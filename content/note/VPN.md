---
title: VPN
date: 2024-04-08T23:47:00+09:00
tags:
  - ネスペ
---

公衆インターネットや閉域のIP網を使用してセキュアな接続を確立し、拠点間通信やプライベートネットワークにアクセスするための技術。
IPSecなどの技術を使う。

インターネット上でデータを送受信する際に暗号化されたトンネルを作成し、第三者からの盗聴やデータの改ざんを防ぐことができる。

広域イーサネットは通信事業者が独自に用意した閉域網を利用するL2（レイヤ2）のVPN接続サービス

## VPNの種類

種類は大きく分けて2つで、インターネットVPNにはさらに2種類ある
- IP-VPN
- インターネットVPN
    - IPsec-VPN
    - SSL-VPN 

### IPsec VPN

[[IPsec]] を利用して暗号化を行う

### SSL VPN

[[SSL TLS]] を利用して暗号化を行う。
社内ネットワークのゲートウェイにSSL-VPN装置を設置する。
クライアントソフトをインストールする必要がなく、Webブラウザがあれば通信可能となる。

- リバースプロキシ方式
    - ブラウザでhttps://～で始まるSSL-VPNゲートウェイにアクセスして認証することで利用できる
- ポートフォワーディング方式
    - リバースプロキシ方式ではWebブラウザに対応していないアプリケーションが利用できないという問題がある
    - そこでサーバのIPアドレスとポートを事前に定義して通信を行うのがポートフォワーディング
    - 動的にポートが変わるアプリケーションでは利用できない
- L2フォワーディング方式
    - **クライアント側にSSL-VPNクライアントソフトのインストールが必要**
    - すべてのアプリケーションで利用可能
    - アプリケーションのデータをHTTPパケットでカプセル化してSSL通信を行う
    - プロトコルの制限もなくUDPでも使える

## 接続タイプ

VPN接続のタイプにはサイト間VPNとリモートアクセスVPNの大きく2タイプがある
### サイト間VPN

- VPNを実装したルータ同士を接続する構成
- PCにソフトウェアをインストールする必要がない
- IPsec-VPNが適している

### リモートアクセスVPN

- PCにVPNクライアントソフトをインストールして通信を行う
- SSL-VPNが適している
