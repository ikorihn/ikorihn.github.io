{"/":{"title":"ikorihn Digitalgarden","content":"\n[Quartz](https://github.com/jackyzha0/quartz) ã§ä½œæˆã—ãŸ [digital garden](https://jzhao.xyz/posts/networked-thought) ã§ã™ã€‚\n\n[Obsidian ã§ä½œæˆã—ã¦ã„ã‚‹ãƒãƒ¼ãƒˆã‹ã‚‰ä¸€éƒ¨ã‚’å…¬é–‹ã—ã¦ã„ã¾ã™ã€‚](blog/Quartzã‚’ä½¿ã£ã¦Obsidianã‚’ç„¡æ–™ã§å…¬é–‹ã—ã¦ã¿ãŸ.md)\n\n- [About me](aboutme)\n- [All Tags](/tags) â€¦ ã‚¿ã‚°ä¸€è¦§\n- [Notes](/note) â€¦ Obsidianã§å–ã£ã¦ã„ã‚‹ãƒ¡ãƒ¢\n- [Blog](/blog) â€¦ ãƒ–ãƒ­ã‚°ã«ç›¸å½“ã™ã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„\n","lastmodified":"2023-07-29T08:18:43.011495969Z","tags":[]},"/aboutme":{"title":"about me","content":"\nikorihn(ã‚¤ã‚³)\n\néƒ½å†…ã®Webç³»ä¼æ¥­ã§ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã‚’ã—ã¦ã„ã¾ã™ã€‚\nä¸»ã«ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã€SREã‚’æ‹…å½“ã—ã¦ã„ã¾ã™ã€‚\nãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚‚æ›¸ã‘ã¾ã™ãŒãƒ¡ã‚¤ãƒ³é ˜åŸŸã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚\n\n## Social\n\n- [GitHub](https://github.com/ikorihn)\n- [X](https://twitter.com/r57ty7)\n- [Bluesky](https://bsky.app/profile/ikorihn.bsky.social)\n\n## ã‚¹ã‚­ãƒ«ãƒãƒƒãƒ—\n\n| ã‚¹ã‚­ãƒ«          | å†…å®¹                                                                                                              |\n| ----            | ----                                                                                                              |\n| Go              | 2020å¹´ä»¥é™ã§ã¯ä¸€ç•ªæ›¸ã„ã¦ã„ã¦å¥½ããªè¨€èªã€‚CLIã€Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã€k8sé–¢é€£ãªã©å¹…åºƒã„é ˜åŸŸã§ä½¿ç”¨                     |\n| TypeScript      | JavaScriptã‚ˆã‚Šã‚‚çµŒé¨“ãŒé•·ã„ã€‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚’æ›¸ãã¨ãã¯é–“é•ã„ãªãã“ã¡ã‚‰ã‚’é¸ã¶ã€‚å‹ãƒ‘ã‚ºãƒ«ã¯è‹¦æ‰‹ã€‚                    |\n| Java            | ã‚­ãƒ£ãƒªã‚¢ã®æœ€åˆã«å­¦ã‚“ã è¨€èªã§ã€ä½¿ç”¨æ­´ã¯ä¸€ç•ªé•·ã„ã€‚Java 9ä»¥é™ã®çŸ¥è­˜ã¯è–„ã„ã€‚JAX-RS(Jersey)ã€Spring Bootãªã©ã®çµŒé¨“ã‚ã‚Š |\n| Kotlin          | Androidã‚’åŠå¹´ãã‚‰ã„é–‹ç™ºã—ã¦ã„ãŸã¨ãã¨ã€ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰é–‹ç™ºã§Kotlin + Spring Bootã§ã®é–‹ç™ºçµŒé¨“ã‚ã‚Šã€‚                 |\n| Shell Script    | ã¡ã‚‡ã£ã¨ã—ãŸã“ã¨ã¯ã‚·ã‚§ãƒ«èŠ¸ã§ãªã‚“ã¨ã‹ã—ãŒã¡ã€‚                                                                      |\n| Python          | æœ¬æ ¼çš„ã«é–‹ç™ºã—ãŸã“ã¨ã¯ãªãã€å°ã•ã„ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’èª­ã¿æ›¸ãã—ãŸç¨‹åº¦ã€‚                                                  |\n| Vue.js(Nuxt.js) | æ¥­å‹™ã§1ã‹ã‚‰Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æ§‹ç¯‰çµŒé¨“ã‚ã‚Šã€‚2ã€3ä¸¡æ–¹è§¦ã£ãŸã“ã¨ãŒã‚ã‚‹ã€‚                                            |\n| Docker          | é–‹ç™ºç’°å¢ƒã§ã®åˆ©ç”¨ã€ECSç­‰ã®é‹ç”¨ã€ã‚³ãƒ³ãƒ†ãƒŠã‚µã‚¤ã‚ºã‚’æ„è­˜ã—ãŸDockerfileã®ä½œæˆãªã©ä¸€é€šã‚Šå¯èƒ½ã€‚                           |\n| Kubernetes      | æ¥­å‹™ã®ä¸€éƒ¨ã§åˆ©ç”¨ä¸­ã€‚Argo CDã‚’ç”¨ã„ãŸGitOpsã§ã®é‹ç”¨çµŒé¨“ã‚ã‚Šã€‚                                                       |\n| AWS Lambda      | API Gatewayã¨çµ„ã¿åˆã‚ã›ãŸRESTful APIã€SQSã¨çµ„ã¿åˆã‚ã›ãŸãƒãƒƒãƒãªã©                                                 |\n\n## çµŒæ­´\n\nTODO\n\n## è¶£å‘³\n\n### ãƒãƒ©ã‚½ãƒ³\n\n- 2018å¹´ã”ã‚ã‹ã‚‰åˆã‚ã¦ã€å¤§ä¼šã«ã¯ã¡ã‚‡ãã¡ã‚‡ãå‡ºã¦ã„ã‚‹ã€‚æœˆ100kmãã‚‰ã„èµ°ã‚‹ã€‚\n- ãƒ•ãƒ«ãƒãƒ©ã‚½ãƒ³ 3:36:50\n- ãƒãƒ¼ãƒ•ãƒãƒ©ã‚½ãƒ³ 1:38:00\n- 10km 44:55\n\n","lastmodified":"2023-07-29T08:18:43.011495969Z","tags":[]},"/blog/%E3%82%BF%E3%83%BC%E3%83%9F%E3%83%8A%E3%83%AB%E5%85%A5%E9%96%80":{"title":"ã‚¿ãƒ¼ãƒŸãƒŠãƒ«å…¥é–€","content":"\n## ç§ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«æ­´\n\n* 2015 æ–°å’å…¥ç¤¾ Windowsæ™‚ä»£ ã¾ã ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã£ã¦é»’ã„ç”»é¢ã§æ€–ã„ã¨æ€ã£ã¦ã„ãŸ\n  * ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§antã®buildã‚’ã™ã‚‹ç¨‹åº¦\n* 2016\n  * batãƒ•ã‚¡ã‚¤ãƒ«ã‚’è§¦ã‚‹ã“ã¨ãŒå¢—ãˆã¦ããŸ\n* 2017 gvimã§åˆã‚ã¦vimã«è§¦ã‚Œã‚‹ã€‚ã“ã‚Œã¾ã§ã‚µã‚¯ãƒ©ã‚¨ãƒ‡ã‚£ã‚¿ã¨ã‹ç§€ä¸¸ã‚’ä½¿ã£ã¦ã„ãŸã—å‘¨ã‚Šã§ã‚‚vimã¨ã„ã†å˜èªã‚’èã„ãŸã“ã¨ãŒãªã‹ã£ãŸã®ã§ã€ãƒã‚¤ãƒŠãƒ¼ãªã‚¨ãƒ‡ã‚£ã‚¿ã‚’ä½¿ã£ã¦ã„ã‚‹ä¿ºã‹ã£ã‘ãƒ¼ã¨æ€ã£ã¦ã„ãŸã€‚ã©ã†ã‚„ã‚‰2å¤§ã‚¨ãƒ‡ã‚£ã‚¿ã‚‰ã—ã„ã¨çŸ¥ã‚‹ã®ã¯ã‚‚ã†å°‘ã—ã‚ã¨ã«ãªã£ã¦ã‹ã‚‰\n  * ç°¡å˜ãªä½œæ¥­ã‚’batãƒ•ã‚¡ã‚¤ãƒ«æ›¸ã„ã¦ã‚„ã‚‰ã›ãŸã‚Šã—å§‹ã‚ãŸ\n* 2018\n  * mac\n  * \n\n## åŸºæœ¬æ“ä½œ\n\n* tabã§ãƒã‚·ãƒã‚·è£œå®Œã™ã‚‹\n* \n\n## ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’è¦šãˆã‚ˆã†\n\n* ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ã¯emacsé¢¨ã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ãŒä½¿ãˆã‚‹\n  * ãƒ›ãƒ¼ãƒ ãƒã‚¸ã‚·ãƒ§ãƒ³ã‹ã‚‰å‹•ã‹ãšã«ã‚«ãƒ¼ã‚½ãƒ«æ“ä½œãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚‹\n  * macã®å ´åˆã¯ã ã„ãŸã„ã®ã‚¢ãƒ—ãƒªã§ã‚‚åŒã˜ãªã®ã§è¦šãˆã¦ãŠãã¨ä¾¿åˆ©\n* `ctrl-n/p`: next/previous\n* `ctrl-f/b`: front/back\n* `ctrl-h/d`: backspace/delete\n* `ctrl-a/e`: ahead/end\n\n## .zshrc\n\n````shell\n# ãƒ’ã‚¹ãƒˆãƒªã®è¨­å®š\nexport HISTFILE=~/.zsh_history\nexport HISTSIZE=1000000\nexport SAVEHIST=1000000\n````\n\n## PATHã£ã¦ãªã«\n\n## aliasã‚’è¨­å®šã—ã‚ˆã†\n\n## è¦‹ãŸç›®ã‚’ã‹ã£ã“ã‚ˆãã—ã‚ˆã†\n\n## fuzzy finder(fzf, peco)ã‚’ä½¿ãŠã†\n\n* \n\n## tabã§ãƒ•ã‚¡ã‚¤ãƒ«åã‚’fzfã§é¸æŠã™ã‚‹ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’è¡¨ç¤ºã•ã›ã‚‹\n\n````shell\n# è£œå®Œæ©Ÿèƒ½ã‚’æœ‰åŠ¹ã«ã™ã‚‹\nautoload -Uz compinit\ncompinit\n````\n\nzinit\n\n````shell\n#######\n# https://github.com/Aloxaf/fzf-tab\n#######\nzinit light \"Aloxaf/fzf-tab\"\nenable-fzf-tab\n# zstyle ':fzf-tab:*' fzf-command ftb-tmux-popup\nzstyle ':fzf-tab:complete:cd:*' fzf-preview 'exa -1 --color=always $realpath'\nzstyle ':fzf-tab:*' fzf-bindings 'ctrl-j:accept' 'ctrl-a:toggle-all' 'ctrl-space:toggle+down'\n# disable sort when completing `git checkout`\nzstyle ':completion:*:git-checkout:*' sort false\n# set descriptions format to enable group support\nzstyle ':completion:*:descriptions' format '[%d]'\n# set list-colors to enable filename colorizing\nzstyle ':completion:*' list-colors ${(s.:.)LS_COLORS}\n# preview directory's content with exa when completing cd\nzstyle ':fzf-tab:complete:cd:*' fzf-preview 'exa -1 --color=always $realpath'\n# switch group using `,` and `.`\nzstyle ':fzf-tab:*' switch-group ',' '.'\n````\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["terminal"]},"/blog/%E3%83%8D%E3%83%83%E3%83%88%E3%83%AF%E3%83%BC%E3%82%AF%E3%81%AB%E5%BF%9C%E3%81%98%E3%81%A6%E5%87%A6%E7%90%86%E3%82%92%E6%8C%AF%E3%82%8A%E5%88%86%E3%81%91%E3%82%8B%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88":{"title":"ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«å¿œã˜ã¦å‡¦ç†ã‚’æŒ¯ã‚Šåˆ†ã‘ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ","content":"\n\\#shell\n\n## ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«å¿œã˜ã¦å‡¦ç†ã‚’æŒ¯ã‚Šåˆ†ã‘ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ\n\n````shell:switch_location.sh\n#!/bin/zsh\n\n# ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç’°å¢ƒã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹\nswitchNetwork() {\n  local location=$1\n  currentLocation=$(networksetup -getcurrentlocation)\n  if test $currentLocation = $location; then\n    return\n  fi\n\n  scselect $(scselect | grep $location | awk '{ print $1 }')\n  osascript -e 'display notification \"'\"Switch network location to ${1}\"'\" with title \"'\"${0##*/}\"'\" '\n}\n\n# Git ãƒªãƒã‚¸ãƒˆãƒªè¨­å®šã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹\nswitchGitConfig() {\n  local location=$1\n\n  case \"$location\" in\n    Home)\n      git config --global --replace-all http.$GIT_REPO_URL_HTTPS.proxy $PROXY_URL\n      git config --global --replace-all url.$GIT_REPO_URL_HTTPS.insteadOf $GIT_REPO_URL_SSH\n      git config --global --replace-all url.$GIT_REPO_URL_HTTPS.insteadOf ssh://$GIT_REPO_URL_SSH --add\n      ;;\n    Office)\n      git config --global --unset-all http.$GIT_REPO_URL_HTTPS.proxy\n      git config --global --unset-all url.$GIT_REPO_URL_HTTPS.insteadOf\n      ;;\n  esac\n}\n\nmain() {\n  set -x\n  ADAPTER=en0\n\n  # Wi-FiãŒONã«ãªã£ã¦ã„ã‚‹ã‹\n  airportpower=$(networksetup -getairportpower $ADAPTER | awk -F': ' '{ print $2 }')\n  if test ${airportpower} = 'Off'; then\n    echo 'Wifi is Off.'\n    exit\n  fi\n\n  # SSIDã‚’å–å¾—\n  ssid=$(networksetup -getairportnetwork $ADAPTER | awk -F': ' '{ print $2 }')\n\n  location=Automatic\n  case \"$ssid\" in\n    $SSID_HOME)\n      location=Home\n      ;;\n    $SSID_OFFICE)\n      location=Office\n      ;;\n  esac\n\n  switchNetwork $location\n  switchGitConfig $location\n  set +x\n}\n\nmain\n````\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["shell"]},"/blog/%E3%83%9E%E3%82%A4%E3%82%AF%E3%81%AE%E3%83%9F%E3%83%A5%E3%83%BC%E3%83%88%E3%82%A2%E3%83%B3%E3%83%9F%E3%83%A5%E3%83%BC%E3%83%88%E3%82%92%E5%88%87%E3%82%8A%E6%9B%BF%E3%81%88%E3%82%8B":{"title":"ãƒã‚¤ã‚¯ã®ãƒŸãƒ¥ãƒ¼ãƒˆãƒ»ã‚¢ãƒ³ãƒŸãƒ¥ãƒ¼ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹","content":"\n\\#Mac\n\n````oascript\nset micVolume to toggleMic()\ndisplay notification micVolume with title \"Mic\"\nreturn micVolume\n\non toggleMic()\n\tset inputVolume to input volume of (get volume settings)\n\tif inputVolume â‰¤ 5 then\n\t\tset inputVolume to 100\n\t\tset micVal to \"ğŸ”ˆ unmuted\"\n\telse\n\t\tset inputVolume to 0\n\t\tset micVal to \"ğŸ”‡ muted\"\n\tend if\n\tset volume input volume inputVolume\n\treturn micVal\nend toggleMic\n````\n\nAutomator \u003e Quick Action ã‹ã‚‰ä½œæˆã—ã¦ã€ã‚·ã‚¹ãƒ†ãƒ è¨­å®š \u003e ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ \u003e ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ \u003e ã‚µãƒ¼ãƒ“ã‚¹ ã§ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚’è¨­å®šã™ã‚Œã°ä¸€ç™ºã§åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹\n\n[macã®ãƒã‚¤ã‚¯ã‚’ãƒœãƒªãƒ¥ãƒ¼ãƒ ã§æ“¬ä¼¼çš„ã«ON/OFF - Qiita](https://qiita.com/okoshi/items/35b17c0865c83e20ea0c)\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["Mac"]},"/blog/%E6%84%9B%E7%94%A8%E3%81%97%E3%81%A6%E3%81%84%E3%82%8Bvim%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3":{"title":"æ„›ç”¨ã—ã¦ã„ã‚‹vimãƒ—ãƒ©ã‚°ã‚¤ãƒ³","content":"\n### gina\n\nhttps://github.com/lambdalisue/gina.vim\n[gina.vimã¨GitHubã®é€£æºã‚’å‘ä¸Šã•ã›ã‚‹ | Inputä¸­å¿ƒã®ãƒ–ãƒ­ã‚°](https://kitagry.github.io/blog/programmings/2020/09/gina-browse/)\n\nfugitiveã®ã»ã†ãŒ `:Git log` ãªã©ãŒè¦‹ã‚„ã™ã„æ°—ãŒã™ã‚‹\n`:Gina! log` ã§åŒã˜ã‚ˆã†ãªã“ã¨ã¯ã§ãã‚‹æ¨¡æ§˜ã€‚\n`:Gina!!` ã¨ double bang ã«ã™ã‚‹ã¨ç”Ÿã®gitã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã€‚\nfzf-previewã¨é€£æºã—ã‚„ã™ã„ã®ã§Ginaã«ã—ã¦ã¿ãŸã€‚\n\n### fzf-preview\n\n[TypeScriptã§Vimã®ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ã‚’å®Ÿè£…ã—ã¦é–‹ç™ºä½“é¨“ãŒæœ€é«˜ã«ãªã£ã¦ã„ã‚‹è©±](https://zenn.dev/yano/articles/vim_with_fzf_preview_is_best_experience)\n[Vimã«ãŸãã•ã‚“ã‚ã‚‹ãƒ•ã‚¡ã‚¸ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ³ãƒ€ãƒ¼ç³»ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’æ¯”è¼ƒã—ã¦ã¿ã‚‹](https://zenn.dev/yutakatay/articles/vim-fuzzy-finder)\n[ç„¡äººå³¶ã«æŒã£ã¦ã„ã(Neo)vimãƒ—ãƒ©ã‚°ã‚¤ãƒ³10é¸ (TSé–‹ç™ºç’°å¢ƒç·¨)](https://zenn.dev/yano/articles/vim_plugin_top_10)\n\nCOCç‰ˆã‚’å…¥ã‚ŒãŸã€‚\nfzf.vimã§è‰¯ã‹ã£ãŸæ°—ã‚‚ã™ã‚‹\n\n### vim-ripgrep\n\n[vim-ripgrepã‚’ä½œã£ãŸè©±](https://zenn.dev/kyoh86/articles/67c1408d6ef950)\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["vim"]},"/blog/%E8%87%AA%E5%AE%85%E3%81%A8%E8%81%B7%E5%A0%B4%E3%81%A7proxy%E8%A8%AD%E5%AE%9A%E3%82%92%E5%88%87%E3%82%8A%E6%9B%BF%E3%81%88%E3%81%9F%E3%81%84":{"title":"è‡ªå®…ã¨è·å ´ã§proxyè¨­å®šã‚’åˆ‡ã‚Šæ›¿ãˆãŸã„","content":"\nå‡ºç¤¾æ™‚ã¨åœ¨å®…æ™‚ã§ã€ãƒ—ãƒ­ã‚­ã‚·ã®æ¥ç¶šæƒ…å ±ã‚’å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\næ‰‹ã§åˆ‡ã‚Šæ›¿ãˆã‚‹ã®ã‚’å¿˜ã‚Œã¦ç¤¾å†…ã‚·ã‚¹ãƒ†ãƒ ã«ã¤ãªãŒã‚‰ãªã„â€¦ã¨ã„ã†ã“ã¨ãŒã‚ˆãç™ºç”Ÿã™ã‚‹ã®ã§ã€è‡ªå‹•åŒ–ã™ã‚‹ã“ã¨ã«ã—ãŸã€‚\n\n## åˆ‡ã‚Šæ›¿ãˆãŸã„å¯¾è±¡\n\n* ãƒ—ãƒ­ã‚­ã‚·è¨­å®š\n* git proxyã®è¨­å®šã‚’ç’°å¢ƒã«å¿œã˜ã¦å¤‰æ›´\n\n## å®Ÿç¾æ–¹æ³•\n\n* proxy.pac ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã®httpã‚µãƒ¼ãƒãƒ¼ã§é…å¸ƒ\n* Macã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®š \u003e Location ã§è‡ªå®…ã¨è·å ´ã§proxy.pacã®URLã‚’ãã‚Œãã‚Œè¨­å®š\n* git proxyã‚’set,unsetã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ\n* wifiã®SSIDãŒå®¶ã‹è·å ´ã‚’åˆ¤å®šã—ã¦åˆ†å²ã™ã‚‹\n* ãƒˆãƒªã‚¬ãƒ¼ã¯ã‚¹ãƒªãƒ¼ãƒ—ã‹ã‚‰ã®å¾©å¸°æ™‚\n\n### ãƒ—ãƒ­ã‚­ã‚·è¨­å®šã«ã¤ã„ã¦\n\nãƒ—ãƒ­ã‚­ã‚·ã®è¨­å®šã¯proxy.pacã‚’ä½¿ã£ã¦è¡Œã†ã€‚\nè·å ´ã§ã¯ç¤¾å†…ã§é…å¸ƒã•ã‚Œã‚‹proxy.pacã®URLã‚’å…¥åŠ›ã™ã‚Œã°ã„ã„ãŒã€\nè‡ªå®…ã§ã¯ã€è‡ªå‰ã®proxy.pacã‚’ä½œã£ã¦è¨­å®šã—ãŸã„ã€‚\n\nã—ã‹ã—ã€Mojaveã‹ã‚‰ãƒ­ãƒ¼ã‚«ãƒ«ã®proxy.pacã‚’ `file://` ã§è¨­å®šã™ã‚‹ã“ã¨ãŒã§ããªããªã£ãŸ\n\n[macOS 10.14 Mojave ä»¥é™ã§ pac ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã£ã¦ proxy ã®è¨­å®šã‚’è¡Œã„ãŸã„ã‘ã©å‡ºæ¥ãªã‹ã£ãŸè©± - Qiita](https://qiita.com/orange634nty/items/9ef5cadd039592e8344a)\n\n \u003e \n \u003e #### Deprecations\n \u003e \n \u003e The `ftp://` and `file://` URL schemes for Proxy Automatic Configuration (PAC) are deprecated. HTTP and HTTPS are the only supported URL schemes for PAC. This affects all PAC configurations including, but not limited to, configurations set via Settings, System Preferences, profiles, and [`URLSession`](https://developer.apple.com/documentation/foundation/urlsession) APIs such as [`connectionProxyDictionary`](https://developer.apple.com/documentation/foundation/urlsessionconfiguration/1411499-connectionproxydictionary), and [`CFNetworkExecuteProxyAutoConfigurationURL(_:_:_:_:)`](https://developer.apple.com/documentation/cfnetwork/1426392-cfnetworkexecuteproxyautoconfigu). (37811761)\n\nãã®ãŸã‚ã€ãƒ­ãƒ¼ã‚«ãƒ«ã«httpã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¦ã¦ `http://localhost` ã‚’è¨­å®šã™ã‚‹æ–¹æ³•ã‚’ã¨ã‚‹\n\n## proxy.pacã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã®httpã‚µãƒ¼ãƒãƒ¼ã§é…å¸ƒ\n\n### httpdã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€è‡ªå‹•èµ·å‹•\n\n````shell\n$ brew install httpd\n\n# M1 Macã®å ´åˆ /opt/homebrew/etc ã«è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚ã‚‹\n$ vim /opt/homebrew/etc/httpd/httpd.conf\n=\u003e Listenãƒãƒ¼ãƒˆã‚’ä»»æ„ã«è¨­å®šã™ã‚‹(ç§ã¯80ã«è¨­å®š)\n\n$ brew services start httpd\n==\u003e Successfully started `httpd` (label: homebrew.mxcl.httpd)\n\n# `brew services start` ã™ã‚‹ã¨launchdã«ç™»éŒ²ã•ã‚Œã€è‡ªå‹•èµ·å‹•ã™ã‚‹ã‚ˆã†ã«ãªã‚‹ (`brew services stop` ã™ã‚‹ã¨åœæ­¢ã€è‡ªå‹•èµ·å‹•ã‚‚è§£é™¤ã•ã‚Œã‚‹)\n$ launchctl list | rg brew\n63000   0       homebrew.mxcl.httpd\n$ cat ~/Library/LaunchAgents/homebrew.mxcl.httpd.plist\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003c!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"\u003e\n\u003cplist version=\"1.0\"\u003e\n\u003cdict\u003e\n        \u003ckey\u003eEnvironmentVariables\u003c/key\u003e\n        \u003cdict\u003e\n                \u003ckey\u003ePATH\u003c/key\u003e\n                \u003cstring\u003e/opt/homebrew/bin:/opt/homebrew/sbin:/usr/bin:/bin:/usr/sbin:/sbin\u003c/string\u003e\n        \u003c/dict\u003e\n        \u003ckey\u003eLabel\u003c/key\u003e\n        \u003cstring\u003ehomebrew.mxcl.httpd\u003c/string\u003e\n        \u003ckey\u003eProgramArguments\u003c/key\u003e\n        \u003carray\u003e\n                \u003cstring\u003e/opt/homebrew/opt/httpd/bin/httpd\u003c/string\u003e\n                \u003cstring\u003e-D\u003c/string\u003e\n                \u003cstring\u003eFOREGROUND\u003c/string\u003e\n        \u003c/array\u003e\n        \u003ckey\u003eRunAtLoad\u003c/key\u003e\n        \u003ctrue/\u003e\n\u003c/dict\u003e\n\u003c/plist\u003e\n````\n\n### proxy.pacã‚’é…ç½®\n\n`/opt/homebrew/var/www/` ã«proxy.pacã‚’ç½®ã\n\n\u003chttp://localhost/proxy.pac\u003e ã§å–å¾—ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹\n\n## Macã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯è¨­å®š \u003e Location ã§è‡ªå®…ã¨è·å ´ã§proxy.pacã®URLã‚’ãã‚Œãã‚Œè¨­å®š\n\n![Pasted-image-20211008123230](blog/Pasted-image-20211008123230.png)\n\nãã‚Œãã‚Œã®Locationã§ã€proxy.pacã®URLã‚’å…¥åŠ›ã™ã‚‹\n\nè‡ªå®…: `http://localhost/proxy.pac`\nè·å ´: `ç¤¾å†…ã®proxy.pacã®URL`\n![Pasted-image-20211008124722](blog/Pasted-image-20211008124722.png)\n\n## ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ‡ã‚Šæ›¿ãˆæ™‚ã«å®Ÿè¡Œã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆ\n\n[ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«å¿œã˜ã¦å‡¦ç†ã‚’æŒ¯ã‚Šåˆ†ã‘ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ](blog/ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«å¿œã˜ã¦å‡¦ç†ã‚’æŒ¯ã‚Šåˆ†ã‘ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ.md)\n\n## sleepå¾©å¸°æ™‚ã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹\n\n### sleepwatcherã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n[Macã‚¹ãƒªãƒ¼ãƒ—æ™‚ãƒ»å¾©å¸°æ™‚ã«å‡¦ç†ã‚’å‹•ã‹ã™](blog/Macã‚¹ãƒªãƒ¼ãƒ—æ™‚ãƒ»å¾©å¸°æ™‚ã«å‡¦ç†ã‚’å‹•ã‹ã™.md)\n\nã‚¹ãƒªãƒ¼ãƒ—å‰ã‚„å¾©å¸°æ™‚ã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ãªã‚‹\n\n````shell\nbrew install sleepwatcher\n````\n\n### plistãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹\n\n`~/Library/LaunchAgents` ä»¥ä¸‹ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ\n\n````xml:~/Library/LaunchAgents/sleepwatcher.plist\n\u003c?xml version=\"1.0\" encoding=\"UTF-8\"?\u003e\n\u003c!DOCTYPE plist PUBLIC \"-//Apple Computer//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"\u003e\n\u003cplist version=\"1.0\"\u003e\n\u003cdict\u003e\n    \u003ckey\u003eLabel\u003c/key\u003e\n    \u003cstring\u003esleepwatcher\u003c/string\u003e\n    \u003ckey\u003eProgramArguments\u003c/key\u003e\n    \u003carray\u003e\n        \u003cstring\u003e/usr/local/sbin/sleepwatcher\u003c/string\u003e\n        \u003cstring\u003e-V\u003c/string\u003e\n        \u003cstring\u003e-w /path/to/switch_location.sh\u003c/string\u003e\n    \u003c/array\u003e\n    \u003ckey\u003eRunAtLoad\u003c/key\u003e\n    \u003ctrue/\u003e\n    \u003ckey\u003eKeepAlive\u003c/key\u003e\n    \u003ctrue/\u003e\n\u003c/dict\u003e\n\u003c/plist\u003e\n````\n\n* `-w` ã‚¹ãƒªãƒ¼ãƒ—å¾©å¸°ï¼ˆWake Upï¼‰æ™‚ã«å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰\n* `-s` ã‚¹ãƒªãƒ¼ãƒ—ï¼ˆSleepï¼‰æ™‚ã«å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰\n\n### launchdã«ç™»éŒ²\n\n````shell\n$ launchctl load ~/Library/LaunchAgents/sleepwatcher.plist\n````\n\n## å‚è€ƒ\n\n[Mac ã®ã‚¹ãƒªãƒ¼ãƒ—ï¼å¾©å¸°æ™‚ã«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ - Qiita](https://qiita.com/fiftystorm36/items/5fe936a92445cbf4ad9a)\n[Macã®èµ·å‹•/ã‚¹ãƒªãƒ¼ãƒ—å¾©å¸°æ™‚ã«è‡ªå‹•ã§VPNã«æ¥ç¶šã™ã‚‹ / LOG](https://log.brdr.jp/post/887)\n[Mac ã§ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ç’°å¢ƒã‚’ä½¿ã†æ–¹æ³• - Apple ã‚µãƒãƒ¼ãƒˆ (æ—¥æœ¬)](https://support.apple.com/ja-jp/HT202480)\n[macOS 10.14 Mojave ä»¥é™ã§ pac ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã£ã¦ proxy ã®è¨­å®šã‚’è¡Œã„ãŸã„ã‘ã©å‡ºæ¥ãªã‹ã£ãŸè©± - Qiita](https://qiita.com/orange634nty/items/9ef5cadd039592e8344a)\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["Mac","Network","shell"]},"/blog/Mac%E3%82%B9%E3%83%AA%E3%83%BC%E3%83%97%E6%99%82%E5%BE%A9%E5%B8%B0%E6%99%82%E3%81%AB%E5%87%A6%E7%90%86%E3%82%92%E5%8B%95%E3%81%8B%E3%81%99":{"title":"Macã‚¹ãƒªãƒ¼ãƒ—æ™‚ãƒ»å¾©å¸°æ™‚ã«å‡¦ç†ã‚’å‹•ã‹ã™","content":"\n[macOSã®ã‚¹ãƒªãƒ¼ãƒ—æ™‚ã«EC2ã‚’è½ã¨ãã† - ã‚µãƒ¼ãƒãƒ¼ãƒ¯ãƒ¼ã‚¯ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒ–ãƒ­ã‚°](https://blog.serverworks.co.jp/tech/2019/08/17/sleepwatcher/)\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["Mac"]},"/blog/Neovim%E3%81%A8VSCode-Neovim%E3%81%A7%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%82%84%E8%A8%AD%E5%AE%9A%E3%82%92%E5%88%86%E3%81%91%E3%82%8B":{"title":"Neovimã¨VSCode-Neovimã§ä½¿ç”¨ã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚„è¨­å®šã‚’åˆ†ã‘ã‚‹","content":"\nhttps://zenn.dev/r57ty7/articles/accd3014e22366 ã«æŠ•ç¨¿ã—ãŸå†…å®¹ã¨åŒã˜ã§ã™ã€‚\n\nã“ã‚Œã¯ [Vimé§…ä¼](https://vim-jp.org/ekiden/) 5/15 ã®è¨˜äº‹ã§ã™ã€‚\n\n## ã¯ã˜ã‚ã«\n\nç§ã¯æ™®æ®µ [Neovim](note/Neovim.md) ã‚’ãƒ¡ã‚¤ãƒ³ã«ã—ã¦ã„ã¾ã™ãŒã€\nä»–ã®äººã¨ç’°å¢ƒã‚’åˆã‚ã›ãŸã„ã¨ããªã© [VS Code](note/Visual%20Studio%20Code.md) ã‚‚ã¨ãã©ãä½¿ã£ã¦ã„ã¾ã™ã€‚\n\nVimã®æ©Ÿèƒ½ã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ [VSCodeVim](https://github.com/VSCodeVim/Vim) ã‚’å…¥ã‚Œã¦ã„ã‚‹æ–¹ã‚‚å¤šã„ã¨æ€ã„ã¾ã™ãŒã€Undoã®æŒ™å‹•ãŒä¸å®‰å®šã ã£ãŸã‚Šã‚‚ã£ã•ã‚Šã—ã¦ã„ãŸã‚Šã§ä¸æº€ãŒã‚ã£ãŸãŸã‚ã€ [VSCode Neovim](https://marketplace.visualstudio.com/items?itemName=asvetliakov.vscode-neovim) ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚\n\nã“ã‚Œã¯ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã§NeovimãŒå‹•ä½œã™ã‚‹ãŸã‚ã€å…±é€šã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«(`init.lua`)ãŒåˆ©ç”¨ã§ãã¦ã€Neovimã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚‚å‹•ãã¨ã“ã‚ãŒå¬‰ã—ã„ã®ã§ã™ãŒã€\nVS Codeã«ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å‚™ã‚ã£ã¦ã„ã‚‹æ©Ÿèƒ½ã‚„ã€ã†ã¾ãå‹•ä½œã—ãªã„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã€ä¸€éƒ¨ã®optionã‚„è¡çªã™ã‚‹key mappingã¯é™¤å¤–ã—ãŸã„ã§ã™ã€‚\n\nã“ã®è¨˜äº‹ã§ã¯ã€ãã†ã—ãŸNeovimã¨VSCode Neovimã‚’ä½µç”¨ã—ã¦ã„ã¦ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚„è¨­å®šã‚’ä½¿ã„åˆ†ã‘ãŸã„ï¼ã¨ã„ã†æ–¹å‘ã‘ã«ã€\nç§ãŒè¨­å®šã—ã¦ã†ã¾ãã„ã£ã¦ã„ã‚‹æ–¹æ³•ã«ã¤ã„ã¦ç´¹ä»‹ã—ã‚ˆã†ã¨æ€ã„ã¾ã™ã€‚\n\nãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒãƒãƒ¼ã‚¸ãƒ£ã¨ã—ã¦ [packer.nvim](https://github.com/wbthomason/packer.nvim) ã¨[lazy.nvim](https://github.com/folke/lazy.nvim) ã®ãã‚Œãã‚Œã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™ã€‚\n\nã¡ãªã¿ã«ç§ã®è¨­å®šã¯ã“ã¡ã‚‰ã®ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚\nhttps://github.com/ikorihn/dotfiles/blob/master/.config/nvim\n\n## packerã®å ´åˆ\n\n`init.lua` ã¨pluginã¯ã“ã¡ã‚‰ã®ã‚ˆã†ã«è¨­å®šã—ã¦ã„ã¾ã™ã€‚\n\n`~/.config/nvim/init.lua`\n\n````lua\nrequire(\"options\")\nrequire(\"keymaps\")\nrequire(\"plugins\")\nrequire(\"packer_compiled\")\n````\n\n`~/.config/nvim/lua/plugins.lua`\n\n````lua\nlocal fn = vim.fn\n\n-- Automatically install packer\nlocal install_path = fn.stdpath \"data\" .. \"/site/pack/packer/start/packer.nvim\"\nif fn.empty(fn.glob(install_path)) \u003e 0 then\n  PACKER_BOOTSTRAP = fn.system {\n    \"git\",\n    \"clone\",\n    \"--depth\",\n    \"1\",\n    \"https://github.com/wbthomason/packer.nvim\",\n    install_path,\n  }\n  print \"Installing packer close and reopen Neovim...\"\nend\n\nvim.cmd [[packadd packer.nvim]]\n\nlocal packer = require(\"packer\")\nlocal util = require(\"packer.util\")\npacker.init {\n  compile_path = util.join_paths(vim.fn.stdpath('config'), 'lua', 'packer_compiled.lua'),\n}\n\nreturn packer.startup(function(use)\n  use { \"wbthomason/packer.nvim\" }\n\n  -- plugins...\n\nend)\n\n````\n\n### cond ã§ãƒ­ãƒ¼ãƒ‰ã™ã‚‹æ¡ä»¶ã‚’è¨­å®šã™ã‚‹\n\n`cond` ã§ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹æ¡ä»¶ã‚’è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\nVS Codeã¨ä½µç”¨ã™ã‚‹ã¨ãã«ã‚ˆãç´¹ä»‹ã•ã‚Œã‚‹ã‚„ã‚Šæ–¹ã¯ã“ã¡ã‚‰ã ã¨æ€ã„ã¾ã™ã€‚\n\nãŸã¨ãˆã°æ¬¡ã®ã‚ˆã†ã«æ›¸ãã¨ã€VS Codeã®ã¨ãã«ã¯disableã«ã™ã‚‹ã¨ã„ã£ãŸã“ã¨ãŒã§ãã¾ã™ã€‚\n\n````lua\nlocal nocode = function()\n  -- VSCode Neovimã®ã¨ãã«ã¯1ãŒè¨­å®šã•ã‚Œã‚‹\n  return vim.g.vscode == nil\nend\n\nreturn packer.startup(function(use)\n  use { \"wbthomason/packer.nvim\" }\n\n  use { \"phaazon/hop.nvim\", config = function() require(\"hop\").setup() end }\n\n  -- vscodeã§ãªã„ã¨ãã ã‘ãƒ­ãƒ¼ãƒ‰ã™ã‚‹\n  use { \"kylechui/nvim-surround\", config = function() require(\"nvim-surround\").setup() end, cond = { nocode } }\n\nend)\n\n````\n\nã“ã‚Œã«ã¯ä»¥ä¸‹ã®å•é¡ŒãŒã‚ã‚Šã¾ã—ãŸã€‚\n\n* vscodeã®ã¨ãã«ãƒ­ãƒ¼ãƒ‰ã—ãŸããªã„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ä¸€ã¤ãšã¤ã«æ›¸ãå¿…è¦ãŒã‚ã‚Šé¢å€’ãªä¸Šã€æ•°ãŒå¤šã„ã¨ã©ã‚ŒãŒãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹/ã•ã‚Œãªã„ã®ã‹ãŒè¦–èªã—ã¥ã‚‰ã‹ã£ãŸ\n* condã‚’æ›¸ãã¨`~/.local/share/nvim/site/pack/packer/opt` ã«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ãŒã€colorschemeãªã©ä¸€éƒ¨ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’optionalã«ã™ã‚‹ã¨ã€ãƒ­ãƒ¼ãƒ‰ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒãšã‚Œã‚‹ãŸã‚ã‹æ­£ã—ãå‹•ä½œã—ãªã‹ã£ãŸ\n  * ä¾‹ [Question: what to use to make plugin inactive if condition Â· Issue #288 Â· wbthomason/packer.nvim](https://github.com/wbthomason/packer.nvim/issues/288)\n\nãã“ã§ã€æ¬¡ã®ã‚ˆã†ã«ã—ã¦è§£æ±ºã—ã¾ã—ãŸã€‚\n\n### `init.lua` ã§èª­ã¿è¾¼ã‚€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†ã‘ã‚‹\n\nVS Codeã®ã¨ãã ã‘åˆ©ç”¨ã—ãŸã„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚„è¨­å®šã‚’ã‹ã„ãŸãƒ•ã‚¡ã‚¤ãƒ«(`vscode.lua`)ã‚’åˆ¥ã§ä½œã‚Šã€ `init.lua` ã§èª­ã¿è¾¼ã‚€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åˆ†ã‘ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚\n\n`~/.config/nvim/init.lua`\n\n````lua\n-- å…±é€šã®è¨­å®š\nrequire(\"options\")\nrequire(\"keymaps\")\n\nif vim.g.vscode == 1 then\n  -- VS Codeç”¨ã®è¨­å®š\n  require(\"vscode\")\n  return\nend\n\nrequire(\"plugins\")\nrequire(\"packer_compiled\")\n````\n\nã¾ãŸã€VS Codeã®ã¨ãã‚‚packerã‚’ä½¿ã„ãŸã‹ã£ãŸã®ã§ã™ãŒã€ç«¶åˆã—ã¦ã—ã¾ã£ã¦ã†ã¾ãã„ã‹ãªã‹ã£ãŸã®ã§ [vim-plug](https://github.com/junegunn/vim-plug) ã‚’ä½¿ã†ã“ã¨ã«ã—ã¾ã—ãŸã€‚\nã‚¨ãƒ¬ã‚¬ãƒ³ãƒˆãªæ–¹æ³•ã§ã¯ãªã„ã¨æ€ã„ã¾ã™ãŒã€çµå±€ã“ã‚ŒãŒä¸€ç•ªå®‰å®šã—ã¾ã—ãŸã€‚\n\n`~/.config/nvim/lua/vscode.lua`\n\n````lua\n-- ~/.local/share/nvim/site/pack/*/start/* ã‚’èª­ã¿è¾¼ã¾ã›ãªã„\nvim.opt.packpath:remove(vim.fn.stdpath('data')..\"/site\")\n\n-- Plug\n-- Automatically install plug\nlocal plugpath = vim.fn.stdpath(\"data\") .. \"/plugged/vim-plug\"\nif not vim.loop.fs_stat(plugpath) then\n  vim.fn.system({\n    \"curl\",\n    \"-fLo\",\n    plugpath .. \"/autoload/plug.vim\",\n    \"--create-dirs\",\n    \"https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim\",\n  })\nend\nvim.opt.rtp:prepend(plugpath)\n\n-- packerã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ¸ˆã¿ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’åˆ©ç”¨ã™ã‚‹\nvim.cmd [[ call plug#begin(stdpath('data') . '/site/pack/packer/start') ]]\n\nvim.cmd [[ Plug 'phaazon/hop.nvim' ]]\nvim.cmd [[ Plug 'junegunn/vim-easy-align' ]]\nvim.cmd [[ Plug 'jeetsukumaran/vim-indentwise' ]]\nvim.cmd [[ Plug 'haya14busa/vim-asterisk' ]]\nvim.cmd [[ Plug 'kevinhwang91/nvim-hlslens' ]]\nvim.cmd [[ Plug 'kylechui/nvim-surround' ]]\n\nvim.cmd [[ call plug#end() ]]\n\nrequire(\"pluginconfig/hop\")\nrequire(\"pluginconfig/nvim-surround\")\nrequire(\"pluginconfig/nvim-hlslens\")\n````\n\n### packpathã«ã¤ã„ã¦\n\n2è¡Œç›®ã® `vim.opt.packpath:remove(vim.fn.stdpath('data')..\"/site\")` ãŒãƒãƒƒã‚¯ã£ã½ã„ã§ã™ãŒã€ã“ã‚Œã‚’æ›¸ã„ã¦ã„ãªã„ã¨ `vscode.lua` ã«æ›¸ã„ã¦ã„ãªã„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚‚ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¦ã—ã¾ã„ã¾ã™ã€‚\n\nruntimepathã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€è¿½åŠ ã—ãŸè¦šãˆã®ãªã„ `~/.local/share/nvim/site/pack/*/start/*` ãŒã‚ã‚Šã¾ã™ã€‚\n\n````\n:se runtimepath\nruntimepath=~/.config/nvim,/opt/homebrew/etc/xdg/nvim,/etc/xdg/nvim,~/.local/share/nvim/site,~/.local/share/nvim/site/pack/*/start/*,...\n````\n\nã“ã‚Œã¯ [packages](https://neovim.io/doc/user/repeat.html#packages) ã®ä»•çµ„ã¿ã«ã‚ˆã£ã¦ [packpath](https://neovim.io/doc/user/options.html#'packpath') ã§æŒ‡å®šã•ã‚ŒãŸãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã«é…ç½®ã•ã‚ŒãŸãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’èµ·å‹•æ™‚ã«èª­ã¿è¾¼ã‚€ãŸã‚ã§ã™ã€‚\nç§ã®ç’°å¢ƒã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«è¨­å®šã•ã‚Œã¦ã„ã¾ã—ãŸã€‚\n\n````\n:se packpath\npackpath=~/.config/nvim,/opt/homebrew/etc/xdg/nvim,/etc/xdg/nvim,~/.local/share/nvim/site,...\n````\n\npackerã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ `vim.fn.stdpath('data')..'/site/pack/packer/start'` ã«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ãŸã‚ã€ã“ã¡ã‚‰ã«ç½®ã‹ã‚ŒãŸãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒVS Codeã§ã‚‚èª­ã¿è¾¼ã¾ã‚Œã¦ã„ãŸã¨ã„ã†ã‚ã‘ã§ã™ã€‚\nãã®ãŸã‚ã€`vim.fn.stdpath('data')..\"/site\"` ã‚’packpathã‹ã‚‰é™¤å¤–ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚\n\n## lazyã®å ´åˆ\n\næœ€è¿‘lazy.nvimã«ç§»è¡Œã—ãŸã®ã§ã€ãã®å ´åˆã®è¨­å®šã‚‚è¼‰ã›ã¦ãŠãã¾ã™ã€‚ã“ã¡ã‚‰ã®ã»ã†ãŒç°¡å˜ã§ã—ãŸã€‚\n\n`~/.config/lua/plugins.lua`\n\n````lua\n-- Automatically install lazy\nlocal lazypath = vim.fn.stdpath(\"data\") .. \"/lazy/lazy.nvim\"\nif not vim.loop.fs_stat(lazypath) then\n  vim.fn.system({\n    \"git\",\n    \"clone\",\n    \"--filter=blob:none\",\n    \"https://github.com/folke/lazy.nvim.git\",\n    \"--branch=stable\", -- latest stable release\n    lazypath,\n  })\nend\nvim.opt.rtp:prepend(lazypath)\n\nlocal plugins = {\n  -- plugins...\n  { \"nvim-lua/plenary.nvim\"  },\n}\n\nrequire('lazy').setup(plugins, {\n})\n````\n\nlazyã§ã¯packpathé…ä¸‹ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œãªã„ãŸã‚ã€`vscode.lua` ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\n\n````diff\n--- a/.config/nvim/lua/vscode.lua\n+++ b/.config/nvim/lua/vscode.lua\n@@ -1,6 +1,3 @@\n--- ~/.local/share/nvim/site/pack/*/start/* ã‚’èª­ã¿è¾¼ã¾ã›ãªã„\n-vim.opt.packpath:remove(vim.fn.stdpath('data')..\"/site\")\n-\n -- Plug\n -- Automatically install plug\n local plugpath = vim.fn.stdpath(\"data\") .. \"/plugged/vim-plug\"\n@@ -15,7 +12,7 @@ if not vim.loop.fs_stat(plugpath) then\n end\n vim.opt.rtp:prepend(plugpath)\n\n-vim.cmd [[ call plug#begin(stdpath('data') .. '/site/pack/packer/start') ]]\n+vim.cmd [[ call plug#begin(stdpath('data') .. '/lazy') ]]\n\n vim.cmd [[ Plug 'phaazon/hop.nvim' ]]\n````\n\nã‚ã‚‹ã„ã¯ã‚‚ã£ã¨ç°¡å˜ã«ã€`vscode.lua` ã«åˆ†ã‘ãšã« `plugins.lua` å†…ã§å®Œçµã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚\n\n````lua\nlocal plugins;\nif vim.g.vscode == 1 then\n  plugins = {\n    { \"phaazon/hop.nvim\", config = function() require(\"pluginconfig/hop\") end },\n    { \"junegunn/vim-easy-align\" },\n    { \"kylechui/nvim-surround\", config = function() require(\"pluginconfig/nvim-surround\") end },\n  }\nelse\n  -- Neovimã§åˆ©ç”¨ã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³\n  plugins = {\n    { \"nvim-lua/plenary.nvim\"  },\n    { \"windwp/nvim-autopairs\", config = function() require(\"pluginconfig/autopairs\") end },\n  }\nend\n\nrequire('lazy').setup(plugins, {\n})\n````\n\n## ãŠã‚ã‚Šã«\n\næ•°ãƒ¶æœˆã»ã©ä½¿ã£ã¦ã„ã¾ã™ãŒã€ä»Šã®ã¨ã“ã‚ç‰¹ã«å•é¡Œã¯ç™ºç”Ÿã›ãšã€å¿…è¦ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã ã‘ã‚’æ´»ã‹ã—ã¦æº€è¶³ã®ã„ãæ“ä½œãŒã§ãã¦ã„ã¾ã™ã€‚\n\nVS Codeã‚’ãƒ¡ã‚¤ãƒ³ã§ä½¿ã£ã¦ã„ã‚‹ãŒã€Vimãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®æ©Ÿèƒ½ã‚’ä½¿ã„ãŸã„ï¼ã¨ã„ã†ã‚ˆã†ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã«ã‚‚åˆºã•ã‚Œã°å¹¸ã„ã§ã™ã€‚\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["Neovim","vscode"]},"/blog/Quartz%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6Obsidian%E3%82%92%E7%84%A1%E6%96%99%E3%81%A7%E5%85%AC%E9%96%8B%E3%81%97%E3%81%A6%E3%81%BF%E3%81%9F":{"title":"Quartzã‚’ä½¿ã£ã¦Obsidianã‚’ç„¡æ–™ã§å…¬é–‹ã—ã¦ã¿ãŸ","content":"\nç§ã¯æ™®æ®µ [Obsidian](note/Obsidianã¨ã¯.md) ã§ãƒ¡ãƒ¢ã‚’å–ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚\nã‚ã‚‹ç¨‹åº¦ã¾ã¨ã¾ã£ãŸå†…å®¹ãŒã§ããŸã‚‰éƒ½åº¦ [Zenn](https://zenn.dev/) ã‚„ãƒ–ãƒ­ã‚°ã«æ›¸ãã‚ˆã†ã«ã—ã¦ã„ãŸã®ã§ã™ãŒã€è¨˜äº‹ã«ã™ã‚‹ãï¼ã¨æ€ã†ã¨ãã¡ã‚“ã¨æ›¸ã‹ãªã„ã¨ã„ã‘ãªã„ã¨æ€ã„è…°ãŒé‡ãã¦ãªã‹ãªã‹ã§ãã¦ã„ã¾ã›ã‚“ã§ã—ãŸã€‚\n\nãã“ã§ã€å–ã£ãŸãƒ¡ãƒ¢ã‚’é›‘ãªã¾ã¾ã§ã„ã„ã‹ã‚‰å…¬é–‹ã—ã‚ˆã†ã¨æ€ã„ã¾ã—ãŸã€‚\n\nã¾ãšé¸æŠè‚¢ã¨ã—ã¦ã‚ãŒã‚‹ã®ã¯ [Obsidian Publish](https://obsidian.md/publish) ã§ã™ãŒã€æœˆ$8(2023/06ç¾åœ¨)ãŒè‡ªåˆ†ã«ã¯é«˜ãã€æ©Ÿèƒ½ã‚‚ãã“ã¾ã§å¿…è¦ã¨ã—ã¦ã„ãªã„ã®ã§ã€å¤šå°‘æ‰‹é–“ãŒã‹ã‹ã£ã¦ã‚‚ç„¡æ–™ã§å…¬é–‹ã§ãã‚‹æ–¹æ³•ã‚’èª¿ã¹ã¾ã—ãŸã€‚\n\n## ã§ããŸã‚‚ã®\n\n{{\u003c card-link \"https://ikorihn.github.io/digitalgarden\" \u003e}}\n\n* [brandonkboswell/obsidian-export](https://github.com/brandonkboswell/obsidian-export/tree/title_frontmatter) ã‚’ä½¿ã£ã¦ã€å…¬é–‹ã—ã¦ã„ã„ãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã‚’exportã™ã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸ\n* [Quartz](https://quartz.jzhao.xyz/) ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ã£ã¦ã€ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚’HTMLã§è¡¨ç¤ºã™ã‚‹ã ã‘ã§ãªããƒãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚„ã‚°ãƒ©ãƒ•ã‚‚ç”Ÿæˆã•ã‚Œã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸ\n\n### å‚è€ƒã«ã—ãŸã‚µã‚¤ãƒˆ\n\n* [Publishing your Obsidian Vault Online with Quartz](https://brandonkboswell.com/blog/Publishing-your-Obsidian-Vault-Online-with-Quartz/)\n* [Quartz: Create and publish your Obsidian Vault for free! : r/ObsidianMD](https://www.reddit.com/r/ObsidianMD/comments/onflb9/quartz_create_and_publish_your_obsidian_vault_for/)\n\n### åŒæ§˜ã®ã“ã¨ã‚’ã—ã¦ã„ã‚‹ã‚µã‚¤ãƒˆ\n\n* https://jzhao.xyz\n* https://nick.groenen.me\n* https://elaraks.github.io/dampcapital/\n* https://blu3mo.github.io/blu3mo-quartz\n\n## Quartz ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—\n\n{{\u003c card-link \"https://quartz.jzhao.xyz/\" \u003e}}\n\n* Obsidian Vaultã‚’Webã‚µã‚¤ãƒˆã«ã™ã‚‹ãƒ„ãƒ¼ãƒ«\n* ãƒãƒƒã‚¯ãƒªãƒ³ã‚¯ã‚„ãƒãƒƒãƒ—ã«å¯¾å¿œã—ã¦ã„ã‚‹\n* [Hugo](note/Hugo.md) ã‚’ä½¿ã£ã¦ã„ã‚‹\n\nã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã¯åŸºæœ¬çš„ã«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«æ›¸ã„ã¦ã‚ã‚‹ã¨ãŠã‚Šã§ã™ãŒã€ä»¥ä¸‹ã®ã‚ˆã†ã«é€²ã‚ã¾ã—ãŸã€‚\n\n### ãƒªãƒã‚¸ãƒˆãƒªã®ä½œæˆ\n\nObsidian Vaultã‚’ç›´æ¥å…¬é–‹ã™ã‚‹ã®ã§ã¯ãªãã€å…¬é–‹ç”¨ãƒªãƒã‚¸ãƒˆãƒªã‚’åˆ¥é€”ä½œã£ã¦ãã¡ã‚‰ã«ã‚³ãƒ”ãƒ¼ã™ã‚‹ã“ã¨ã«ã—ã¾ã™ã€‚ãã†ã™ã‚‹ã“ã¨ã§ã€å…¬é–‹ç¯„å›²ã‚’çµã£ãŸã‚Šã€Vaultå´ã«ã¯ãªã‚‹ã¹ãå½±éŸ¿ã‚’ä¸ãˆãªã„ã‚ˆã†ã«ã—ã¦ã„ã¾ã™ã€‚\n\nhttps://github.com/jackyzha0/quartz ã‚’Forkã—ã¦ä½œæˆã—ã¾ã—ãŸã€‚\nã“ã®ã¨ãã€ `Copy theÂ `hugo`Â branch only` ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ãƒã‚§ãƒƒã‚¯ã‚’å¤–ã—ã¾ã™ã€‚\n\nãƒªãƒã‚¸ãƒˆãƒªåã¯ `digitalgarden` ã¨ã—ã¾ã—ãŸã€‚ã“ã‚Œã‚’[GitHub Pages](https://docs.github.com/ja/pages/getting-started-with-github-pages/about-github-pages) ã§å…¬é–‹ã™ã‚‹ã¨`https://ikorihn.github.io/digitalgarden/` ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\n\n#### GitHub Pages ã§å…¬é–‹ã™ã‚‹ãŸã‚ã®è¨­å®š\n\n* Branchã‚’mainã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’/rootã«è¨­å®š\n* `.github/workflows/deploy.yaml` ã® `name: Deploy` ã‚’ä¿®æ­£ã—ã¾ã™\n  * `hugo` ãƒ–ãƒ©ãƒ³ãƒã«pushã™ã‚‹ã¨ã€GitHub Actionsã§ãƒ“ãƒ«ãƒ‰ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒ `main` ãƒ–ãƒ©ãƒ³ãƒã® `/public` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç½®ã‹ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™\n  * `publish_branch` ã‚’mainã€ `cname` ã‚’ `ikorihn.github.io` ã«ã—ã¾ã—ãŸ\n* GitHubãƒªãƒã‚¸ãƒˆãƒªã®Settings \u003e Pagesã§å…¬é–‹å¯¾è±¡ã‚’è¨­å®šã—ã¾ã™\n\n![Pasted-image-20230504103549](note/Pasted-image-20230504103549.png)\n\n## Obsidian Vaultã‹ã‚‰å…¬é–‹ã—ãŸã„ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹\n\nå…¬é–‹ã—ãŸã„ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿ã‚’ [Hugo](note/Hugo.md) ã§æ‰±ãˆã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã«å¤‰æ›ã—ã¦ã€å…¬é–‹ç”¨ãƒªãƒã‚¸ãƒˆãƒªã«ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚\nãã‚Œã«ã¯ã“ã¡ã‚‰ã‚’ä½¿ã„ã¾ã—ãŸã€‚\n\n{{\u003c card-link \"https://github.com/zoni/obsidian-export\" \u003e}}\n\n* Rustè£½\n* Obsidian Vaultå†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¨™æº–çš„ãªMarkdownã«å¤‰æ›ã—ã¦åˆ¥ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚³ãƒ”ãƒ¼ã™ã‚‹(`[[]]` ã‚’æ¨™æº–ã®ãƒªãƒ³ã‚¯ã«å¤‰ãˆã‚‹ãªã©)\n* `.export-ignore` ã‚’ç½®ãã“ã¨ã§ã€exportå¯¾è±¡ã‹ã‚‰é™¤å¤–ã™ã‚‹ã“ã¨ãŒã§ãã‚‹\n\ngit cloneã—ã¦ `cargo install --path .` ã—ã¦ `~/.cargo/bin` ã«PATHã‚’é€šã—ãŸã‚‰ã€\nå…¬é–‹ç”¨ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ«ãƒ¼ãƒˆã§ä»¥ä¸‹ã‚’å®Ÿè¡Œã—ã¦ã€ `./content` é…ä¸‹ã«Obsidianã®ä¸­èº«ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚\n\n````shell\n$ obsidian-export --frontmatter=always ${OBSIDIAN_VAULT_DIR} ./content\n````\n\n`content` ã¯ [Hugoã§Webã‚µã‚¤ãƒˆã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’é…ç½®ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª](https://gohugo.io/getting-started/directory-structure/) ã§ã™ã€‚\n\nã‚³ãƒ”ãƒ¼ãŒã§ããŸã‚‰ `hugo` ãƒ–ãƒ©ãƒ³ãƒã«commitã—ã¦pushã—ã¾ã—ã‚‡ã†ã€‚\nã“ã‚Œã§GitHub ActionsãŒå‹•ã„ã¦ã€å°‘ã—çµŒã¤ã¨GitHub Pagesã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã§è¦‹ã‚Œã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã¯ãšã§ã™ã€‚\n\n## å…¬é–‹ãƒ•ãƒ­ãƒ¼ã‚’æ•´ãˆã‚‹\n\nObsidian Vaultã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹ â†’ commitã—ã¦pushã™ã‚‹\nã®ã‚’ãã‚Œãã‚Œmakeã§å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã—ã¦ãŠãã¾ã™ã€‚\nè‡ªåˆ†ã®å ´åˆã¯ã€Obsidianã‚’ `~/memo` ã«ãŠã„ã¦ã„ã‚‹ã®ã§ã“ã¡ã‚‰ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\n\n````Makefile\nexport: ## Convert Obsidian markdown to common markdown using obsidian-export\n\tls content | grep -v -E \"(_index.md|private|templates)\" | xargs -i rm -rf content/{}\n\tobsidian-export --frontmatter=always ~/memo content\n\npublish: ## Publish content\n\tgit add content\n\tgit commit -m \"update contents: $(shell date +%Y-%m-%dT%H:%M:%S)\"\n\tgit push\n````\n\n## ãã®ä»–ã‚„ã£ãŸã“ã¨\n\nåŸºæœ¬çš„ã«å…¬é–‹ã™ã‚‹ãŸã‚ã«å¿…è¦ãªã“ã¨ã¯ã“ã“ã¾ã§ã¨ãªã‚Šã¾ã™ã€‚\n\nè‡ªåˆ†ã®å ´åˆã€éå»ä½œæˆã—ã¦ããŸãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®æ›¸ãæ–¹ãŒã‚ˆã‚ã—ããªã‹ã£ãŸã‚ŠHugoã®éƒ½åˆã«åˆã‚ãªã‹ã£ãŸã‚Šã—ãŸãŸã‚ã€ã¾ã¨ã‚ã¦ä¿®æ­£ã‚’è¡Œã„ã¾ã—ãŸã€‚\n\n### ãƒ•ã‚¡ã‚¤ãƒ«ä¿®æ­£\n\n* [Hugo](note/Hugo.md) ã®ãŸã‚ã«frontmatterã‚’æ•´å‚™ã—ã¾ã—ãŸ\n  * `title` (ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«) `date` (ä½œæˆæ—¥) `lastmod` (æ›´æ–°æ—¥) ã‚’å„ãƒ•ã‚¡ã‚¤ãƒ«ã«å…¥ã‚Œã¾ã—ãŸ\n  * `title` ã¯å…ƒã€…å…¥ã‚Œã¦ã„ãŸã®ã§ã€æŠœã‘ã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã«æ‰‹å‹•ã§è¿½åŠ \n    * https://github.com/brandonkboswell/obsidian-export/tree/title_frontmatter ã‚’ä½¿ã£ã¦ `--add-titles` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã‚ˆã£ã¦exportæ™‚ã«ä»˜ä¸ã™ã‚‹ã®ã‚‚ã‚¢ãƒª\n  * `date` ã‚’yyyy-MM-ddTHH:mm:ssZã®å½¢å¼ã«å¤‰æ›\n    * å…ƒã€… `yyyy-MM-dd HH:mm` ã£ã¦ã„ã†å¤‰ãªå½¢å¼ã«ã—ã¡ã‚ƒã£ã¦ãŸ\n    * `fd -e md | xargs -i sed -i -r 's/^date: (.*) (.*)$/date: \"\\1T\\2:00+09:00\"/' {}`\n  * `date updaed` ã‚’ `lastmod` ã«å¤‰æ›\n    * `fd -e md | xargs -i sed -i -r 's/^date updated: (.*) (.*)$/lastmod: \"\\1T\\2:00+09:00\"/' {}`\n* ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«åã®ã‚¹ãƒšãƒ¼ã‚¹ã‚’é™¤å»\n  * [Hugo](note/Hugo.md) ã§åŸ‹ã‚è¾¼ã‚€ã¨ãã«ã‚¹ãƒšãƒ¼ã‚¹ãŒã‚ã‚‹å ´åˆã€`![Pasted image 22222222222.png](\u003c/images/Pasted image 22222222222.png\u003e)` ã®ã‚ˆã†ã« `\u003c\u003e` ã§å›²ã‚€å¿…è¦ãŒã‚ã‚‹\n  * `rename 's/ /-/g' *`\n  * https://github.com/reorx/obsidian-paste-image-rename ã‚’ä½¿ã£ã¦ã€ä»Šå¾Œç”»åƒã‚’è²¼ã‚Šä»˜ã‘ã‚‹ã¨ãã«ã¯ã‚¹ãƒšãƒ¼ã‚¹é™¤å»ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹\n  * [obsidian-export](https://github.com/zoni/obsidian-export) ãŒã‚¹ãƒšãƒ¼ã‚¹ã‚’ï¼…ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã¦ãã‚ŒãŸã®ã§çµæœçš„ã«ã¯ä¸è¦ã ã£ãŸãŒã€å–ã‚Šæ‰±ã„ã¯ã—ã‚„ã™ã„ã®ã§ã“ã®ã¾ã¾ã«ã™ã‚‹\n\n### ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ãƒªãƒ³ã‚¯ãŒè²¼ã‚‰ã‚Œãªã„\n\nVaultã®ãƒ«ãƒ¼ãƒˆç›´ä¸‹ã«ã‚ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¤ã„ã¦ã¯ã¡ã‚ƒã‚“ã¨ãƒªãƒ³ã‚¯ãŒæ©Ÿèƒ½ã™ã‚‹ã®ã§ã™ãŒã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«é–¢ã—ã¦ã¯é·ç§»ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚\n\n#### æœ€åˆã«è©¦ã—ãŸã“ã¨\n\n* [Hugo relative link](note/Hugo%20relative%20link.md) ã§èª¬æ˜ã—ã¦ãã‚Œã¦ã„ã‚‹å†…å®¹ã‚’render-links.html, render-images.htmlã«æ›¸ã„ãŸã‚‰OKã ã£ãŸ\n* ãŸã graphã‚„backlinkã®æ–¹ã¯ã€ãƒãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ãƒ«ãƒ¼ãƒˆã‹ã‚‰ã®ç›¸å¯¾ã«é·ç§»ã—ã¦ã—ã¾ã„ã€ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã¯é·ç§»ã—ãªã‹ã£ãŸã€‚\n  * [Better support for relative/absolute paths Â· Issue #99 Â· jackyzha0/quartz](https://github.com/jackyzha0/quartz/issues/99)\n\n#### ç›´ã—ãŸ\n\nçµ¶å¯¾ãƒ‘ã‚¹ã§ãªã„ã¨ã ã‚ã¨å…¬å¼ã«æ›¸ã„ã¦ã‚ã‚Šã¾ã—ãŸâ€¦\n\n{{\u003c card-link \"https://quartz.jzhao.xyz/notes/obsidian/\" \u003e}}\n\n1. Set theÂ **New link format**Â toÂ **Absolute Path in vault**. If you have a completely flat vault (no folders), this step isnâ€™t necessary.\n1. TurnÂ **on**Â theÂ **Automatically update internal links**Â setting.\n\nWikilink(`[[note/xxxx]]`)ã§ã‚‚å•é¡Œãªã•ãã†ãªã®ã§ã™ãŒã€è‡ªåˆ†ã®ç’°å¢ƒã§ã¯ãƒªãƒ³ã‚¯ã•ã‚Œãªã‹ã£ãŸãŸã‚ã€Markdownã®çµ¶å¯¾ãƒ‘ã‚¹ã§ã®ãƒªãƒ³ã‚¯(`[xxxx](note/xxxx.md)`)ã«å¤‰ãˆãŸã¨ã“ã‚ã€graphãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚\n\nã“ã‚Œã®ãŸã‚ã«ã€å…¨ãƒ•ã‚¡ã‚¤ãƒ«ã®Wikilinkã‚’Markdown Linkã«å¤‰æ›´ã—ã¾ã—ãŸã€‚ã€‚\n\n[Obsidian Wikilinkã‚’Markdown linkã«å¤‰æ›´ã—ãŸ](note/Obsidian%20Wikilinkã‚’Markdown%20linkã«å¤‰æ›´ã—ãŸ.md)\n\n### å¤–éƒ¨ãƒªãƒ³ã‚¯ã‚’ã‚«ãƒ¼ãƒ‰ã§è¡¨ç¤ºã™ã‚‹\n\nZennã¨ã‹ã§è¦‹ã‚‹ã‚„ã¤\n\n[Hugo å¤–éƒ¨ãƒªãƒ³ã‚¯ã‚’ã‚«ãƒ¼ãƒ‰ã§è¡¨ç¤ºã™ã‚‹](note/Hugo%20å¤–éƒ¨ãƒªãƒ³ã‚¯ã‚’ã‚«ãƒ¼ãƒ‰ã§è¡¨ç¤ºã™ã‚‹.md)\n\n## æ„Ÿæƒ³\n\nç„¡äº‹Obsidianã‚’å…¬é–‹ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚\næ›´æ–°ã®æ‰‹é–“ãŒè‹¥å¹²ã‚ã‚Šã¾ã™ãŒã€ç°¡å˜ãªã‚³ãƒãƒ³ãƒ‰ã§æ›´æ–°ã§ãã‚‹ã®ã§ã•ã»ã©è‹¦ã§ã¯ãªã„ã§ã—ã‚‡ã†ã€‚\n\nä»Šã¾ã§ãƒ–ãƒ­ã‚°ã‚’æ›¸ã„ãŸã‚Šã™ã‚‹ã®ã¯å„„åŠ«ã§ãªã‹ãªã‹ã§ãã¦ã„ãªã‹ã£ãŸã®ã§ã™ãŒã€ãƒ¡ãƒ¢ã®ã¤ã„ã§ã«å…¬é–‹ã—ã¦ã„ã‚‹ã¨ã„ã†ã‚¹ã‚¿ãƒ³ã‚¹ã§ã‚ã‚Œã°æ°—è»½ã«ç¶šã‘ã‚‰ã‚Œãã†ã§ã™ã€‚\n\nObsidian Publishã¨æ¯”ã¹ã¦ã©ã†ã‹ã¨ã„ã†ã¨ã€\nã¾ãšè‡ªåˆ†ã§ã„ã‚ã„ã‚èª¿ã¹ã¦ä½œã‚‹ã®ãŒé¢ç™½ã‹ã£ãŸã®ã§å€‹äººçš„ã«ã¯ã‚ˆã‹ã£ãŸã§ã™ã€‚\nQuartzã®ãƒ™ãƒ¼ã‚¹ã¯Hugoã§ã™ã®ã§ã€ãƒ†ãƒ¼ãƒã‚„ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚‚è‡ªåˆ†ã§è¡Œãˆã¾ã™ã€‚\n\nãŸã ã—ä¸‡äººã«ã¯ãŠã™ã™ã‚ã—ã¾ã›ã‚“â€¦\nã¾ãšæ§‹ç¯‰ãŒãã“ãã“æ‰‹é–“ã§ã—ãŸã—ã€ã“ã†ã„ã†ã“ã¨ã‚„ã£ã¦ã„ã‚‹äººè‡ªä½“ãŒå°‘ãªã„ã®ã§æƒ…å ±ãŒã‚ã¾ã‚Šãªãã€ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãŒçµæ§‹ãŸã„ã¸ã‚“ã§ã™ã€‚\nè‡ªåŠ›ã§è§£æ±ºã™ã‚‹ã®ãŒé›£ã—ã„ã¨ã„ã†å ´åˆã¯ã€ç´ ç›´ã«Obsidian Publishã‚’ä½¿ã†ã®ãŒä¾¿åˆ©ã§ã™ã—æ©Ÿèƒ½ã‚‚ååˆ†ã«å‚™ã‚ã£ã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["2023/04/23","obsidian","blog"]},"/blog/Raycast%E3%81%A7%E3%83%9E%E3%82%A4%E3%82%AF%E3%81%AE%E3%83%9F%E3%83%A5%E3%83%BC%E3%83%88%E3%82%92%E5%88%87%E3%82%8A%E6%9B%BF%E3%81%88%E3%82%8B":{"title":"Raycastã§ãƒã‚¤ã‚¯ã®ãƒŸãƒ¥ãƒ¼ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹","content":"\n[Raycast](note/Raycast.md) ã‚’ä½¿ã£ã¦ãƒã‚¤ã‚¯ã®ãƒŸãƒ¥ãƒ¼ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆã¾ã™\n\nRaycastã®è¨­å®š \u003e Extensions \u003e +ãƒœã‚¿ãƒ³ \u003e Create Script Command \u003e templateã‚’Apple Scriptã«ã—ã¦ä»»æ„ã®å ´æ‰€ã«ä½œæˆ\n\n![Pasted-image-20220311122221](blog/Pasted-image-20220311122221.png)\n\n````applescript:mute.applescript\n#!/usr/bin/osascript\n\n# Required parameters:\n# @raycast.schemaVersion 1\n# @raycast.title mic mute\n# @raycast.mode compact\n\n# Optional parameters:\n# @raycast.icon ğŸ¤–\n\nset micVolume to muteMic()\ndisplay notification micVolume with title \"Mic\"\nreturn micVolume\n\non muteMic()\n\tset inputVolume to 0\n\tset micVal to \"ğŸ”‡ muted\"\n\tset volume input volume inputVolume\n\treturn micVal\nend muteMic\n````\n\nåŒæ§˜ã«ã—ã¦ã€ `unmute.applescript` ã‚’ä½œæˆ\n\n````applescript:mute.applescript\n#!/usr/bin/osascript\n\n# Required parameters:\n# @raycast.schemaVersion 1\n# @raycast.title mic unmute\n# @raycast.mode compact\n\n# Optional parameters:\n# @raycast.icon ğŸ¤–\n\nset micVolume to unmuteMic()\ndisplay notification micVolume with title \"Mic\"\nreturn micVolume\n\non unmuteMic()\n\tset inputVolume to 80\n\tset micVal to \"ğŸ”ˆ unmuted\"\n\tset volume input volume inputVolume\n\treturn micVal\nend unmuteMic\n````\n\nRaycastã®è¨­å®š \u003e Extensions ã‹ã‚‰ã€ã‚³ãƒãƒ³ãƒ‰ã«ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚’è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\nç§ã¯ã‚¢ãƒ³ãƒŸãƒ¥ãƒ¼ãƒˆã‚’ `Cmd + Opt + m` , ãƒŸãƒ¥ãƒ¼ãƒˆã‚’ `Cmd + Shift + Opt + m` ã«è¨­å®šã—ã¦ã„ã¾ã™ã€‚\n\nãƒˆã‚°ãƒ«ã®ã»ã†ãŒã„ã„å ´åˆã¯ [ãƒã‚¤ã‚¯ã®ãƒŸãƒ¥ãƒ¼ãƒˆãƒ»ã‚¢ãƒ³ãƒŸãƒ¥ãƒ¼ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹](blog/ãƒã‚¤ã‚¯ã®ãƒŸãƒ¥ãƒ¼ãƒˆãƒ»ã‚¢ãƒ³ãƒŸãƒ¥ãƒ¼ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹.md) ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã™ã‚‹ã€‚\nè‡ªåˆ†ã¯ç¾åœ¨ã®çŠ¶æ…‹ãŒãƒŸãƒ¥ãƒ¼ãƒˆã‚¢ãƒ³ãƒŸãƒ¥ãƒ¼ãƒˆã®ã©ã¡ã‚‰ã§ã‚ã£ã¦ã‚‚åŒã˜å‹•ä½œã‚’ã•ã›ãŸã„ãŸã‚ãã‚Œãã‚Œã®ã‚³ãƒãƒ³ãƒ‰ã‚’ç™»éŒ²ã—ã¦ã„ã¾ã™ã€‚\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["Mac","Raycast"]},"/blog/build-typescript-on-netlify":{"title":"TypeScriptã®Gatsbyã‚’Netlifyã§ãƒ“ãƒ«ãƒ‰ã—ãŸã¨ãã®ã‚¨ãƒ©ãƒ¼ã«å¯¾å¿œã—ãŸ","content":"\n## äº‹è±¡\n\nTypeScriptåŒ–ã—ãŸGatsbyã‚’Netlifyã§ãƒ“ãƒ«ãƒ‰ã—ãŸéš›ã«ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚\n\n````shell\n$ gatsby build\nerror Error in \"/opt/build/repo/gatsby-node.js\": Unexpected token '.'\n\n\n  Error: /opt/build/repo/src/gatsby-node/index.ts:28\n      const posts = result.data?.allMarkdownRemark.nodes;\n                                ^\n  SyntaxError: Unexpected token '.'\n````\n\n## å¯¾å¿œ\n\nNetlifyã®ãƒ“ãƒ«ãƒ‰ãƒ­ã‚°ã« `Now using node v12.18.0 (npm v6.14.4)` ã¨ã‚ã‚‹ã‚ˆã†ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯v12.18.0ãŒä½¿ã‚ã‚Œã‚‹ã‚ˆã†ã§ã™ã€‚\nOptional Chainingã¯Node.js v14ã‹ã‚‰ä½¿ç”¨ã§ãã‚‹æ©Ÿèƒ½ã®ãŸã‚ã€v14ä»¥ä¸ŠãŒä½¿ç”¨ã•ã‚Œã‚‹ã‚ˆã†ã«è¨­å®šã—ã¾ã™ã€‚\n\n[Manage build dependencies | Netlify Docs](https://docs.netlify.com/configure-builds/manage-dependencies/)\n\nç’°å¢ƒå¤‰æ•° `NODE_VERSION` ã§æŒ‡å®šã§ãã‚‹ãŸã‚ä»¥ä¸‹ã®ã‚ˆã†ã«è¨­å®šã—ã¾ã—ãŸã€‚\n\n![2021-10-31-17-31-50](blog/2021-10-31-17-31-50.png)\n\nã“ã‚Œã§ãƒ“ãƒ«ãƒ‰ãŒé€šã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["Gatsbyjs","frontend"]},"/blog/chromedp%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6Go%E3%81%A7Chrome%E3%82%92%E8%87%AA%E5%8B%95%E6%93%8D%E4%BD%9C%E3%81%99%E3%82%8B":{"title":"chromedpã‚’ä½¿ã£ã¦Goã§Chromeã‚’è‡ªå‹•æ“ä½œã™ã‚‹","content":"\næ™®æ®µã®æ¥­å‹™ã§Webãƒšãƒ¼ã‚¸ã‚’é–‹ã„ã¦ã‚°ãƒ©ãƒ•ã‚’ã‚­ãƒ£ãƒ—ãƒãƒ£ã—ãŸã‚Šã€å‹¤æ€ å…¥åŠ›ã‚’ã—ãŸã‚Šã¨ã„ã£ãŸãƒ«ãƒ¼ãƒãƒ³ã®ä½œæ¥­ã‚’è‡ªå‹•åŒ–ã§ããªã„ã‹ãªã¨æ€ã„ã¾ã—ãŸã€‚\n\nã“ã†ã—ãŸãƒ–ãƒ©ã‚¦ã‚¶ã®æ“ä½œã‚’è‡ªå‹•åŒ–ã™ã‚‹åˆ†é‡ã§ã¯ [Selenium](https://www.selenium.dev/ja/documentation/) ã‚„ [Puppetter](https://pptr.dev) ãŒæœ‰åã§ã™ãŒã€ç’°å¢ƒæ§‹ç¯‰ãŒé¢å€’ã ã£ãŸã®ã§Gopherãªè‡ªåˆ†ã¨ã—ã¦ã¯Goã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ããŸã„ã¨æ€ã„ã¾ã™ã€‚\n\n[chromedp](https://github.com/chromedp/chromedp) ã¯Chromeã‚’Goã§æ“ä½œã™ã‚‹ã“ã¨ã®ã§ãã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã™ã€‚\n[Chrome DevTools Protocol](https://chromedevtools.github.io/devtools-protocol/) ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¦ã€ã‚¹ã‚¯ãƒ¬ã‚¤ãƒ”ãƒ³ã‚°ã§DOMã‚’æ“ä½œã™ã‚‹ä»¥å¤–ã«ã‚‚ã“ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’å–ã£ãŸã‚Šã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚\n\n{{\u003c card-link \"https://github.com/chromedp/chromedp\" \u003e}}\n\nHeadless Chromeã‚’æ–°è¦ã§ç«‹ã¡ä¸Šã’ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã—ã€èµ·å‹•æ¸ˆã¿ã®Chromeã‚’æ“ä½œã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚\n\nPure Goãªã®ã§å½“ç„¶ã‚·ãƒ³ã‚°ãƒ«ãƒã‚¤ãƒŠãƒªã§ã©ã“ã§ã‚‚å‹•ã‹ã›ã¾ã™ã®ã§ã€ã‚µãƒ¼ãƒãƒ¼ã«ãŠã„ã¦cronã§å®Ÿè¡Œã™ã‚‹ã®ã‚‚ç”¨æ„ã§ã™ã€‚\n\n## ä½¿ã„æ–¹\n\nhttps://github.com/chromedp/examples ã«åˆ©ç”¨ä¾‹ãŒã„ãã¤ã‹ã‚ã‚‹ã®ã§ã€ã¾ãšã¯ãã¡ã‚‰ã‚’è¦‹ã¦ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’æ´ã‚€ã®ãŒãŠã™ã™ã‚ã§ã™ã€‚\n\n### headlessãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•ã™ã‚‹\n\nãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã“ã¡ã‚‰ã§èµ·å‹•ã—ã¾ã™ã€‚\n\n````go\npackage main\n\nimport (\n\t\"bytes\"\n\t\"context\"\n\t\"fmt\"\n\t\"log\"\n\t\"os\"\n\t\"path/filepath\"\n\n\t\"github.com/chromedp/chromedp\"\n)\n\nfunc main() {\n\tdir, err := os.MkdirTemp(\"\", \"chromedp-example\")\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\tdefer os.RemoveAll(dir)\n\n\t// ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹\n\topts := append(chromedp.DefaultExecAllocatorOptions[:],\n\t\tchromedp.DisableGPU,\n\t\tchromedp.UserDataDir(dir),\n\t)\n\n\t// Headless Chromeã‚’èµ·å‹•ã™ã‚‹\n\tctx, cancel := chromedp.NewExecAllocator(context.Background(), opts...)\n\tdefer cancel()\n\n\t// Chromeã‚’èµ·å‹•ã™ã‚‹\n\tif err := chromedp.Run(ctx,\n\t\tchromedp.Navigate(\"https://example.com/\"),\n\t\tchromedp.Sleep(time.Second),\n\t); err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\tpath := filepath.Join(dir, \"DevToolsActivePort\")\n\tbs, err := os.ReadFile(path)\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\tlines := bytes.Split(bs, []byte(\"\\n\"))\n\tfmt.Printf(\"DevToolsActivePort has %d lines\\n\", len(lines))\n\n}\n````\n\nèµ·å‹•ã—ãŸã‚Šæ“ä½œã‚’ã™ã‚‹éš›ã¯ã€context.Contextã‚’æ¸¡ã™ã‚ˆã†ã«ã—ã¾ã™ã€‚\n\n### èµ·å‹•æ¸ˆã¿ã®Chromeã‚’æ“ä½œã™ã‚‹\n\nSSOã‚„2è¦ç´ èªè¨¼ãŒå¿…è¦ãªã‚µã‚¤ãƒˆã‚’æ“ä½œã—ãŸã„å ´åˆã«ã€èªè¨¼ã‚’çªç ´ã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã®ãŒé¢å€’ãªã®ã§ã€äºˆã‚ãƒ­ã‚°ã‚¤ãƒ³ã¾ã§ã—ã¦ã‚ã‚‹çŠ¶æ…‹ã®Chromeã‚’æ“ä½œã™ã‚‹ã“ã¨ã«ã—ãŸã€‚\n\nã¾ãšã€Chromeã‚’DevTools protocolã‚’æœ‰åŠ¹ã«ã—ãŸçŠ¶æ…‹ã§èµ·å‹•ã—ã¾ã™ã€‚\n\n````shell\n$ open -a 'Google Chrome' --args --remote-debugging-port=9222\n````\n\nãã‚Œã‚’æŒ‡å®šã—ã¦chromedpã‚’å®Ÿè¡Œã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã¾ã™ã€‚\n\n````go\nfunc main() {\n\tdevtoolsWsURL := flag.String(\"-ws-url\", \"ws://localhost:9222\", \"DevTools WebSocket URL\")\n\tflag.Parse()\n\tif *devtoolsWsURL == \"\" {\n\t\tlog.Fatal(\"must specify -ws-url\")\n\t}\n\n\tctx := context.Background()\n\tctx, cancel := context.WithTimeout(ctx, 120*time.Second)\n\tdefer cancel()\n\n\t// NewRemoteAllocatorã«WebSocketã®URLã‚’æŒ‡å®šã—ã¦èµ·å‹•ã™ã‚‹\n\tallocatorContext, cancel := chromedp.NewRemoteAllocator(ctx, *devtoolsWsURL)\n\tdefer cancel()\n\n\tctx, cancel = chromedp.NewContext(allocatorContext)\n\tdefer cancel()\n\n\tvar img []byte\n\tquality := 100\n\tif err := chromedp.Run(ctx,\n\t\tchromedp.Navigate(\"https://secure.example.com\"),\n\t\tchromedp.WaitVisible(\"#footer\"),\n\t\tchromedp.FullScreenshot(\u0026img, quality),\n\t); err != nil {\n\t\tlog.Fatalf(\"Failed: %v\", err)\n\t}\n\n}\n````\n\n### Dockerä¸Šã§å®Ÿè¡Œã™ã‚‹\n\nhttps://github.com/chromedp/chromedp#frequently-asked-questions\n\nã“ã¡ã‚‰ã§ç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹ `chromedp/headless-shell` ã‚’ä½¿ã„ã¾ã™ã€‚\n\nhttps://github.com/chromedp/docker-headless-shell\n\nchromedpã‚’ä½¿ã£ãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦ã€ `chromedp/headless-shell` ä¸Šã§å®Ÿè¡Œã™ã‚‹ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¾ã™ã€‚\n\n````dockerfile\nFROM golang:1.20 as build-env\nWORKDIR /work\nCOPY go.mod go.sum .\nRUN go mod download\n\nCOPY . .\nRUN CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build -ldflags '-s -w' -trimpath -o /work/app\n\nFROM chromedp/headless-shell:latest\n\nCOPY --from=build-env /work/app /usr/local/bin/app\nENTRYPOINT [\"app\"]\n````\n\n````shell\n$ docker build -t myimage .\n$ docker run -d -p 9222:9222 --rm --name headless-shell --shm-size 2G myimage\n````\n\n## ã‚µãƒ³ãƒ—ãƒ«\n\n### ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚‹\n\næœªæŒ‡å®šã®å ´åˆpngã§ä¿å­˜ã•ã‚Œã¾ã™ã€‚\n\n````go\nvar img []byte\nerr := chromedp.Run(taskCtx,\n\tchromedp.Navigate(url),\n\tchromedp.CaptureScreenshot(\u0026img),\n)\n\nf, err := os.Create(\"tmp.png\")\nif err != nil {\n\tlog.Fatal(err)\n}\ndefer f.Close()\nf.Write(img)\n````\n\n### formã«å…¥åŠ›ã™ã‚‹\n\nè¦ç´ ã‚’é¸æŠã™ã‚‹selectorã¯ã€ [XPath](note/XPath.md) ã‚„CSSã‚»ãƒ¬ã‚¯ã‚¿ãŒä½¿ç”¨å¯èƒ½ã§ã™ã€‚\nCSSã‚»ãƒ¬ã‚¯ã‚¿ã®å ´åˆã¯å¼•æ•°ã« `chromedp.ByQuery` ã‚’æŒ‡å®šã—ã¦ãã ã•ã„ã€‚\n\n````go\nerr := chromedp.Run(taskCtx,\n\tchromedp.Navigate(url),\n\n\tchromedp.SetValue(`//*[@id=\"signInFormUsername\"]`, `user`),\n\tchromedp.SetValue(`//*[@id=\"signInFormPassword\"]`, `password`),\n\tchromedp.Submit(`//*[@id=\"signInForm\"]`),\n)\n\n````\n\n### è¤‡é›‘ãªActionã‚’å®šç¾©ã™ã‚‹\n\n`chromedp.Run` ã®å¼•æ•°ã®actionsã«ã¯ã€`chromdp.Tasks` ã‚’æ¸¡ã™ã“ã¨ã‚‚ã§ãã¾ã™ã€‚\nãªã®ã§ä»¥ä¸‹ã®ã‚ˆã†ã«Tasksã‚’ç”Ÿæˆã™ã‚‹é–¢æ•°ã‚’åˆ‡ã‚Šå‡ºã™ã¨ã„ã£ãŸã“ã¨ãŒå¯èƒ½ã§ã™ã€‚\n\n````go\nfunc tasks(url string) chromedp.Tasks {\n\ttasks := chromedp.Tasks{\n\t\tchromedp.Navigate(url),\n\t\tchromedp.Sleep(3 * time.Second),\n\t}\n\treturn tasks\n}\n\n\nerr := chromedp.Run(taskCtx, tasks())\n````\n\nã¾ãŸã€`chromedp.ActionFunc` ã«ä»»æ„ã®å‡¦ç†ã‚’è¨˜è¿°ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚\nãã®éš›ã¯ã€å„å‡¦ç†ã®æœ«å°¾ã« `.Do(ctx)` ã‚’æ¸¡ã—ã¾ã™ã€‚\n\n````go\nchromedp.ActionFunc(func(ctx context.Context) error {\n\tchromedp.Sleep(5 * time.Second).Do(ctx)\n\treturn nil\n}),\n````\n\n### ã‚ã‚‹è¦ç´ ã®ãƒ­ãƒ¼ãƒ‰ã‚’å¾…ã¤\n\n````go\nchromedp.ActionFunc(func(ctx context.Context) error {\n\tvar err error\n\tqueryLoading := `//div[@class=\"loading\"]`\n\t// è¡¨ç¤ºã•ã‚Œã‚‹ã®ã‚’å¾…ã¤\n\terr = chromedp.WaitVisible(queryLoading).Do(ctx)\n\tif err != nil {\n\t\tif errors.Is(err, context.DeadlineExceeded) {\n\t\t\tfmt.Println(\"timeout\")\n\t\t\treturn nil\n\t\t}\n\t\treturn err\n\t}\n\t// è¡¨ç¤ºã•ã‚Œãªããªã‚‹ã®ã‚’å¾…ã¤\n\tchromedp.WaitNotPresent(queryLoading).Do(ctx)\n\n\t// è¦ç´ ãŒ4ã¤è¡¨ç¤ºã•ã‚Œã‚‹ã¾ã§å¾…ã¤\n\tqueryChartContainer := `//div[@class=\"graph\"]`\n\tvar nodes []*cdp.Node\n\tfor len(nodes) \u003c 4 {\n\t\terr = chromedp.Nodes(queryChartContainer, \u0026nodes).Do(ctx)\n\t\tif err != nil {\n\t\t\tif errors.Is(err, context.DeadlineExceeded) {\n\t\t\t\tfmt.Println(\"timeout\")\n\t\t\t\treturn nil\n\t\t\t}\n\t\t\treturn err\n\t\t}\n\t\ttime.Sleep(1 * time.Second)\n\t}\n\n})\n````\n\n### ã‚ã‚‹è¦ç´ ã®textã‚’å–å¾—ã™ã‚‹\n\n````go\nvar users []string\nchromedp.ActionFunc(func(ctx context.Context) error {\n\tfor i := 0; i \u003c 10; i++ {\n\t\tvar t string\n\t\tchromedp.Text(`//li[@class=\"users\"]`, \u0026t).Do(ctx)\n\t\tusers = append(users, t)\n\t}\n\treturn nil\n})\n````\n\n### JavaScriptã‚’å®Ÿè¡Œã™ã‚‹\n\nJavaScriptã‚’å®Ÿè¡Œã™ã‚‹ã«ã¯ã€`chromdp.Evaluate` ã‚’ä½¿ã„ã¾ã™ã€‚\n\n````go\n// #usersç›´ä¸‹ã®è¦ç´ æ•°ã‚’å‡ºåŠ›ã™ã‚‹\nchromedp.ActionFunc(func(ctx context.Context) error {\n\tvar res int\n\tchromedp.Evaluate(`document.getElementById('users').childElementCount`, \u0026res).Do(ctx)\n\tfmt.Printf(\"users count: %d\\n\", res)\n\treturn nil\n}),\n````\n\n## Tips\n\n### Dockerä¸Šã§å®Ÿè¡Œã—ãŸã¨ãã«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆãŒå–ã‚Œãªã„å ´åˆ\n\n`Unable to capture screenshot (-32000)` ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ã§ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã®å–å¾—ã«å¤±æ•—ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚\n\nhttps://github.com/chromedp/chromedp/issues/1215\n\nãã®å ´åˆã¯ã€[--shm-size](https://docs.docker.jp/engine/reference/run.html)ã§ `/dev/shm` (å…±æœ‰ãƒ¡ãƒ¢ãƒª)ã®ã‚µã‚¤ã‚ºã‚’å¢—ã‚„ã—ã¦ãã ã•ã„ã€‚\n\n````shell\ndocker run --shm-size 2g chromedp\n````\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["Go"]},"/blog/fish-history-to-zsh-history":{"title":"fishã®historyã‚’zshã«ç§»è¡Œã™ã‚‹","content":"\nä¸€å¹´ãã‚‰ã„fishã‚’ä½¿ã£ã¦ã„ãŸãŒã€æ–‡æ³•ãŒã‚ã¾ã‚Šã«bash/zshã¨ç•°ãªã‚Šè¾›ã„ãŸã‚ã€zshã«æˆ»ã™ã“ã¨ã«ã—ãŸã€‚\nã‚³ãƒãƒ³ãƒ‰å±¥æ­´ã«é ¼ã‚‹äººé–“ãªã®ã§ã€ç›´è¿‘1å¹´ã®å±¥æ­´ãŒãªããªã£ã¦ã—ã¾ã†ã®ã¯å›°ã‚‹ã€‚\nãã“ã§fishã®historyãƒ•ã‚¡ã‚¤ãƒ«ã‚’zshã®historyãƒ•ã‚¡ã‚¤ãƒ«ã«ç§»è¡Œã™ã‚‹ã“ã¨ã«ã—ãŸã€‚\n\n````toc\n# This code block gets replaced with the TOC\n````\n\n## ç§»è¡Œãƒ„ãƒ¼ãƒ«\n\nç§»è¡Œã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½œã£ãŸã€‚\n\n\u003chttps://github.com/ikorihn/zhistconv\u003e\n\nä½¿ã„æ–¹\n\n````shell\n# fish_hisoryã‚’zsh_historyã«å¤‰æ›ã—ã¦è¿½è¨˜(äº‹å‰ã«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å–ã‚‹ã“ã¨ã‚’æ¨å¥¨)\n$ zhistconv fish fish_hist \u003e\u003e ~/.zsh_history\n$ history -E 1\n=\u003e çµåˆã•ã‚ŒãŸhistoryãŒè¡¨ç¤ºã•ã‚Œã‚‹\n````\n\nä»¥ä¸‹è©³ç´°\n\n## fishã®historyãƒ•ã‚¡ã‚¤ãƒ«ã‚’zshã®historyãƒ•ã‚¡ã‚¤ãƒ«ã®å½¢å¼ã«å¤‰æ›ã™ã‚‹\n\n### fishã®historyãƒ•ã‚¡ã‚¤ãƒ«\n\n`~/.local/share/fish/fish_history`\n\n````yaml\n- cmd: echo hello\n  when: 1621067042\n- cmd: git pull\n  when: 1621067359\n````\n\nyamlå½¢å¼ã§ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€yamlã‚’ãƒ­ãƒ¼ãƒ‰ã—ã¦å¤‰æ›ã—ã¦ã‚ã’ã‚Œã°ã„ã„\n\n### zshã®historyãƒ•ã‚¡ã‚¤ãƒ«\n\n`~/.zsh_history`\n\n````txt\n: 1621066935:0;echo hello\n: 1621066935:0;cd\n````\n\n`: \u003cunix timestamp\u003e:0:\u003ccommand\u003e` å½¢å¼(çœŸã‚“ä¸­ã®0ãŒä½•ã‚’æ„å‘³ã—ã¦ã„ã‚‹ã‹ã¯èª¿ã¹ã¦ãªã„)\n\n## zshã®ãƒãƒ«ãƒãƒã‚¤ãƒˆæ–‡å­—ã®æ‰±ã„ã«ã¤ã„ã¦\n\nä¸€ã¤å•é¡ŒãŒã‚ã£ãŸã€‚ç§»è¡Œãƒ„ãƒ¼ãƒ«ã‚’ã‚ã–ã‚ã–ä½œã£ãŸã®ã¯ã»ã¨ã‚“ã©ã“ã®ä»•æ§˜ã®ãŸã‚\n\n`~/.zsh_history` ã‚’UTF-8ã§é–‹ãã¨ã€æ—¥æœ¬èªãŒæ–‡å­—åŒ–ã‘ã—ã¦ã„ãŸã€‚\nhistoryã‚³ãƒãƒ³ãƒ‰ã®çµæœã¯æ–‡å­—åŒ–ã‘ã—ã¦ã„ãªã„ã€‚\n\nã©ã†ã‚„ã‚‰ãƒãƒ«ãƒãƒã‚¤ãƒˆæ–‡å­—ãŒç‰¹æ®Šãªæ‰±ã„ã‚’ã•ã‚Œã¦ã„ã‚‹ã‚‰ã—ã„ã€‚\n\n[.zsh_historyã«ãŠã‘ã‚‹éASCIIæ–‡å­—ã®æ‰±ã„ã«ã¤ã„ã¦ - ç”Ÿæ¶¯æœªç†Ÿ](https://syossan.hateblo.jp/entry/2017/10/09/181928)\n[unmetafy unicode when zsh by rogerdehe Â· Pull Request #416 Â· dvorka/hstr](https://github.com/dvorka/hstr/pull/416)\n\nmetafy/unmetafyã¨ã„ã†å‡¦ç†ã‚’ã—ã¦ã„ã‚‹ã‚‰ã—ãã€\nãƒ¡ã‚¿ãªãƒã‚¤ãƒˆãŒã‚ã£ãŸã‚‰ç›´å‰ã« `0x83` ã‚’æŒ¿å…¥ã—ã¦ã€`0x20`ã¨ã®xorã‚’å–ã‚Š6bitç›®ã‚’åè»¢ã•ã›ã¦ã„ã‚‹ã‚ˆã†ã ã€‚\n\n\u003chttps://github.com/zsh-users/zsh/blob/master/Src/utils.c#L4921-L4933\u003e\n\n````c\nmod_export char *\nunmetafy(char *s, int *len)\n{\n    char *p, *t;\n\n    for (p = s; *p \u0026\u0026 *p != Meta; p++);\n    for (t = p; (*t = *p++);)\n\tif (*t++ == Meta \u0026\u0026 *p)\n\t    t[-1] = *p++ ^ 32;\n    if (len)\n\t*len = t - s;\n    return s;\n}\n````\n\nå˜ç´”ã«fish_historyã‚’å¤‰æ›ã—ã¦zsh_historyã«è²¼ã‚Šä»˜ã‘ã‚‹ã ã‘ã§ã¯ã€æ—¥æœ¬èªéƒ¨åˆ†ãŒæ–‡å­—åŒ–ã‘ã—ã¦ã—ã¾ã†ã€‚\n\n### æ–‡å­—åŒ–ã‘ã—ãŸzsh_historyãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚ã‚‹ã‚ˆã†ã«ã™ã‚‹\n\n`ãã‚ãƒã„ã…ã†ãœãããŸã ã¡ã¢ã£ã¤ã¥` ã¨ã„ã†æ–‡å­—åˆ—ã‚’ä½¿ã£ã¦èª¿ã¹ã¦ã„ãã€‚\nã“ã‚Œã‚‰ã¯é ­2ãƒã‚¤ãƒˆãŒ `e381`ã€æœ«å°¾1ãƒã‚¤ãƒˆãŒãã‚Œãã‚Œã„ã‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n\n* `ã`: `81`\n* `ã‚`: `82`\n* `ãƒ`: `83`\n* `ã„`: `84`\n* `ã…`: `85`\n* `ã†`: `86`\n* `ãœ`: `9c`\n* `ã`: `9d`\n* `ã`: `9e`\n* `ãŸ`: `9f`\n* `ã `: `a0`\n* `ã¡`: `a1`\n* `ã¢`: `a2`\n* `ã£`: `a3`\n* `ã¤`: `a4`\n* `ã¥`: `a5`\n\nzsh_historyã§è¦‹ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªãƒã‚¤ãƒˆåˆ—ã«ãªã£ã¦ã„ã‚‹(ã‚ã‹ã‚Šã‚„ã™ã„ã‚ˆã†é©å®œã‚¹ãƒšãƒ¼ã‚¹ã‚’å…¥ã‚Œã¦ã„ã‚‹)\n\n````txt\nE38181 E38182 E38183A3 E38183A4 E38183A5 E38183A6 E38183BC E38183BD E38183BE E38183BF E3818380 E3818381 E3818382 E381A3 E381A4 E381A5\n````\n\nzsh_historyã®æ–‡å­—ã‚³ãƒ¼ãƒ‰ã¯latin1ãªã®ã§ã»ã¼UTF-8ã¨åŒã˜ã€‚\næ–‡å­—ã‚³ãƒ¼ãƒ‰è¡¨ã‚’ã‚‚ã¨ã«å½“ã¦ã¯ã¾ã‚‹æ–‡å­—ã«æˆ»ã™ã¨ã€ `0x83-0xA2` ã®ã¨ãã€ç›´å‰ã« `0x83` ã‚’å…¥ã‚Œã¦ã‹ã‚‰6bitç›®ã‚’åè»¢ã•ã›ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã€‚\n\n````txt\nE38181 E38182 E38183A3 E38183A4 E38183A5 E38183A6 E38183BC E38183BD E38183BE E38183BF E3818380 E3818381 E3818382 E381A3 E381A4 E381A5\n````\n\n`0x83` ã‚’æ¶ˆã—ã¦ã€ç›´å¾Œã®6bitç›®ã‚’åè»¢ã•ã›ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹\n\n````txt\nE38181 E38182 E38183 E38184 E38185 E38186 E3819C E3819D E3819E E3819F E381A0 E381A1 E381A2 E381A3 E381A4 E381A5\n````\n\nã“ã‚ŒãŒã‚‚ã¨ã®æ–‡å­—åˆ—ã®ãƒã‚¤ãƒˆåˆ—ã«ä¸€è‡´ã™ã‚‹ã€‚\n\nãƒãƒ«ãƒãƒã‚¤ãƒˆæ–‡å­—ã‚’zsh_historyã®å½¢å¼ã«å¤‰æ›ã™ã‚‹ã«ã¯ä¸Šã¨é€†ã®ã“ã¨ã‚’ã™ã‚Œã°ã„ã„ã€‚\nã¤ã¾ã‚Šã€`0x83-0xA2` ã®ã¨ãã€ç›´å‰ã« `0x83` ã‚’å…¥ã‚Œã¦ã‹ã‚‰6bitç›®ã‚’åè»¢ã•ã›ã‚‹ã€‚\n\n### Goã§zsh_historyã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ã„ã¦ã¿ã‚‹\n\n````go\npackage zhistconv\n\nconst (\n\t// zsh_historyã®ä»•æ§˜ã§ã€å„ãƒã‚¤ãƒˆãŒ0x83~0xA2ã®ã¨ãã€ãã®å‰ã«0x83ã‚’å…¥ã‚Œã¦6bitç›®ã‚’åè»¢ã•ã›ã‚‹\n\tx83 = 131\n\txA2 = 162\n\tx20 = 32\n)\n\nfunc ParseZshHistory(latin1Byte []byte) []byte {\n\tisMarking := false\n\tvar byteBuffer []byte\n\n\tfor _, codePoint := range latin1Byte {\n\t\tif codePoint == x83 {\n\t\t\tisMarking = true\n\t\t\tcontinue\n\t\t}\n\n\t\tif isMarking {\n\t\t\t// 6bitç›®ã‚’åè»¢ã•ã›ã‚‹ãŸã‚ã«0x20ã‚’XORã™ã‚‹\n\t\t\tinvertCodePoint := codePoint ^ x20\n\t\t\tbyteBuffer = append(byteBuffer, invertCodePoint)\n\t\t\tisMarking = false\n\t\t} else {\n\t\t\tbyteBuffer = append(byteBuffer, codePoint)\n\t\t}\n\t}\n\n\treturn byteBuffer\n}\n\nfunc ConvertToZshHistory(latin1Byte []byte) []byte {\n\tvar byteBuffer []byte\n\n\tfor _, codePoint := range latin1Byte {\n\t\t// 131ã¯0metacharã®10é€²æ•°è¡¨ç¾\n\t\tif x83 \u003c= codePoint \u0026\u0026 codePoint \u003c= xA2 {\n\t\t\t// 6bitç›®ã‚’åè»¢ã•ã›ã‚‹ãŸã‚ã«0x20ã‚’XORã™ã‚‹\n\t\t\tinvertCodePoint := codePoint ^ x20\n\t\t\tbyteBuffer = append(byteBuffer, x83)\n\t\t\tbyteBuffer = append(byteBuffer, invertCodePoint)\n\t\t} else {\n\t\t\tbyteBuffer = append(byteBuffer, codePoint)\n\t\t}\n\t}\n\n\treturn byteBuffer\n}\n````\n\n## ä½œã£ãŸãƒ„ãƒ¼ãƒ«ã«ã¤ã„ã¦\n\n[urfave/cli: A simple, fast, and fun package for building command line apps in Go](https://github.com/urfave/cli)\n\nã“ã¡ã‚‰ã‚’ä½¿ã£ã¦cliãƒ„ãƒ¼ãƒ«ã‚’ä½œã£ãŸã€‚\n\n* `zhistconv fish`: fish_historyã‚’zsh_historyã®å½¢å¼ã«å¤‰æ›ã—ã¦æ¨™æº–å‡ºåŠ›ã™ã‚‹\n* `zhistconv parse`: zsh_historyã‚’UTF-8ã«å¤‰æ›ã™ã‚‹\n* `zhistconv reverse`: UTF-8ã§æ›¸ã‹ã‚ŒãŸzsh_historyã®ãƒãƒ«ãƒãƒã‚¤ãƒˆæ–‡å­—ã‚’zsh_historyã®ä»•æ§˜ã«å¤‰æ›ã™ã‚‹\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["fish","zsh"]},"/blog/jenkins-ui-customize":{"title":"Jenkinsã®è¦‹ãŸç›®ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º","content":"\n\n````toc\n# This code block gets replaced with the TOC\n````\n\n## ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³\n\nJenkins ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è¦‹ãŸç›®ã¯å¤è‡­ã„ã®ã§ã€å¥½ããªãƒ†ãƒ¼ãƒã«å¤‰æ›´ã—ãŸã„ã€‚\nã¾ãŸã€ç’°å¢ƒã”ã¨ã®é•ã„ã‚’ã²ã¨ç›®ã§ã‚ã‹ã‚Šã‚„ã™ãã™ã‚‹ã“ã¨ã§äº‹æ•…ã‚’é˜²ãã€‚\n\n## jenkins-material-theme ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰\n\n\u003chttp://afonsof.com/jenkins-material-theme/\u003e\nã‹ã‚‰è‰²ã¨ãƒ­ã‚´ã‚’æŒ‡å®šã—ã¦ãƒ†ãƒ¼ãƒã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã€‚\n\n## ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’è¨­å®š\n\n\\[Jenkinsã®ç®¡ç†\\] -\u003e \\[ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ç®¡ç†\\] -\u003e \\[åˆ©ç”¨å¯èƒ½\\] -\u003e [Simple Theme Plugin](https://plugins.jenkins.io/simple-theme-plugin/) ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\nãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆjenkins-material-theme.cssï¼‰ã‚’ Jenkins ãƒ•ã‚©ãƒ«ãƒ€ã® userContent ãƒ•ã‚©ãƒ«ãƒ€ã¸é…ç½®ã™ã‚‹\n\n* Jenkinsã‚’ç½®ã„ã¦ã‚ã‚‹ã‚µãƒ¼ãƒã«SSHãƒ­ã‚°ã‚¤ãƒ³\n* `\u003cãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ«ãƒ¼ãƒˆ(/var/lib/jenkins/ãªã©)\u003e/userContent/jenkins-material-theme.css`\n\nJenkinsã®ç®¡ç†ã®ã‚·ã‚¹ãƒ†ãƒ ã®è¨­å®šã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ†ãƒ¼ãƒã‚’æŒ‡å®šã™ã‚‹ã€‚\n\nURL of theme CSSã«ã“ã¡ã‚‰ã‚’å…¥åŠ›ã—ã¦ä¿å­˜: `/userContent/jenkins-material-theme.css`\n\n## material-theme ã‚’é©ç”¨ã—ãŸã¨ãã«ã€pipelineã‚¨ãƒ‡ã‚£ã‚¿ã§ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã¨å®Ÿéš›ã«ç·¨é›†ã•ã‚Œã‚‹ä½ç½®ãŒãšã‚Œã‚‹\n\n`:not(div.ace_editor)` ã« `font-family: Roboto, sans-serif!important` ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ãŸã‚ç­‰å¹…ãƒ•ã‚©ãƒ³ãƒˆã«ãªã£ã¦ã„ãªã„ã€‚\n\n[Main Script -- Replay -- the cursor in the editor is out of phase Â· Issue #184 Â· afonsof/jenkins-material-theme](https://github.com/afonsof/jenkins-material-theme/issues/184)\n\nç­‰å¹…ãƒ•ã‚©ãƒ³ãƒˆã‚’è¨­å®šã—ã¦ã‚ã’ã‚Œã°ã‚ˆã„ã€‚\nè‡ªåˆ†ã§ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã‚‹ã®ãŒåˆ©ç‚¹\n\n````css:jenkins-material-theme.css\n#main-panel\u003epre *,\n.ace_editor .ace_scroller .ace_content * {\n  font-family: Roboto Mono, monospace !important;\n}\n\ndiv.ace_editor.ace-tomorrow,\ndiv.ace_editor.ace-tomorrow * {\n  font: 12px/normal Roboto Mono, monospace !important;\n}\n````\n\n## å‚è€ƒ\n\n[Jenkinsã®ãƒ†ãƒ¼ãƒ(UI)ã‚’å¤‰ãˆã¦ã¿ãŸ | ãƒ¬ã‚³ãƒãƒ§ã‚¯ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒ–ãƒ­ã‚°](https://techblog.recochoku.jp/2021)\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["Jenkins"]},"/blog/karabiner-elements-recommend":{"title":"Karabiner-Elementsã§å€‹äººçš„ã«ãŠã™ã™ã‚ã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰","content":"\n\n````toc\n# This code block gets replaced with the TOC\n````\n\n## Karabiner-Elements ã¨ã¯\n\nMacã®ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚\nã“ã‚Œã‚’ä½¿ãˆã°USã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã§ã‚‚JISé…åˆ—ã®ã‚ˆã†ã«ã‹ãª/è‹±æ•°ã‚­ãƒ¼ã‚’å‰²ã‚Šå½“ã¦ã‚‹ãªã©ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚\n\nã“ã“ã§ã¯å€‹äººçš„ã«ä½¿ã£ã¦ã„ã‚‹ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚\nã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚„è¨­å®šæ–¹æ³•ã«ã¤ã„ã¦ã¯è‰²ã€…ãªã‚µã‚¤ãƒˆã§ç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹ã®ã§çœç•¥ã—ã¾ã™ã€‚\n\nãƒ«ãƒ¼ãƒ«ã«ã¤ã„ã¦ã¯ \u003chttps://ke-complex-modifications.pqrs.org/\u003e ã‹ã‚‰æ¢ã™ã“ã¨ãŒã§ãã¾ã™ã€‚\nKarabiner-Elementsã®Preferences -\u003e Complex modifications -\u003e Import more rules from the Internet ã‹ã‚‰é£›ã¹ã¾ã™ã€‚\n\n![2021-08-15-16-28-21](blog/2021-08-15-16-28-21.png)\n\n## Change spacebar to left_shift if pressed with other keys (Post spacebar when pressed alone)\n\n[Change spacebar](https://ke-complex-modifications.pqrs.org/#spacebar)\n\nã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ã«Shiftã‚’å‰²ã‚Šå½“ã¦ã€ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼å˜ç‹¬ã§æŠ¼ã—ãŸã¨ãã«ã¯ã‚¹ãƒšãƒ¼ã‚¹ãŒå…¥åŠ›ã•ã‚Œã¾ã™ã€‚\nã„ã‚ã‚†ã‚‹ `SandS (Space and Shift)` ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚\n\nç‰¹ã«Shift+æ•°å­—ã®å…¥åŠ›ãŒé ãæ„Ÿã˜ã¦ãƒŸã‚¹ãŒå¤šã‹ã£ãŸã®ãŒã€ã‹ãªã‚Šæ”¹å–„ã•ã‚Œã¾ã—ãŸã€‚\n\næ³¨æ„ã¨ã—ã¦ã¯ã€ã‚¹ãƒšãƒ¼ã‚¹æŠ¼ã—ã£ã±ãªã—ã«ã—ã¦ã‚‚1ã¤ã—ã‹å…¥åŠ›ã•ã‚Œãªã„ã®ã§ã€é€£ç¶šå…¥åŠ›ã—ãŸã„å ´åˆé€£æ‰“ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚\n\n## Post escape if left_control is pressed alone\n\n[Change control key](https://ke-complex-modifications.pqrs.org/#control)\n\nCtrlã‚­ãƒ¼ã‚’å˜ç‹¬ã§æŠ¼ã—ãŸã¨ãã«ECSãŒå…¥åŠ›ã•ã‚Œã¾ã™ã€‚\n\nè‡ªèº«ãŒvimmerã§ã‚ã‚Šã€vimä»¥å¤–ã®ã‚¨ãƒ‡ã‚£ã‚¿ã«ã‚‚vimã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’è¨­å®šã—ã¦ã„ã‚‹ã®ã§ã€ECSã‚’ã‚ˆãæŠ¼ã™ã®ã§ã™ãŒã€\næŒ‡ã‚’å‹•ã‹ã™è·é›¢ãŒæ¸›ã£ã¦æ¥½ã«ãªã‚Šã¾ã—ãŸã€‚\n\nvimã§ECSã‚’ `jj` ã‚„ `C-[` ãªã©ã«ãƒã‚¤ãƒ³ãƒ‰ã—ã¦ã„ã‚‹äººã‚„ã€vimmerä»¥å¤–ã«ã¯æ©æµã‚’æ„Ÿã˜ã«ãã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚\n\n## Quit application by holding command-q\n\n[Prevent unintended command-q (rev 2)](https://ke-complex-modifications.pqrs.org/#command_q)\n\nCmd+q ã‚’é•·æŠ¼ã—ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’çµ‚äº†ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\n\nã‚¿ãƒ–ã‚’é–‰ã˜ã‚ˆã†ã¨ã—ã¦ã—ã‚‡ã£ã¡ã‚…ã† `Cmd+w` ã¨ `Cmd+q` ã‚’æ‰“ã¡é–“é•ãˆã‚‹ãŸã‚å°å…¥ã—ã¾ã—ãŸã€‚\n\n## ã‚³ãƒãƒ³ãƒ‰ã‚­ãƒ¼ã‚’å˜ä½“ã§æŠ¼ã—ãŸã¨ãã«ã€è‹±æ•°ãƒ»ã‹ãªã‚­ãƒ¼ã‚’é€ä¿¡ã™ã‚‹ã€‚ï¼ˆå·¦ã‚³ãƒãƒ³ãƒ‰ã‚­ãƒ¼ã¯è‹±æ•°ã€å³ã‚³ãƒãƒ³ãƒ‰ã‚­ãƒ¼ã¯ã‹ãªï¼‰\n\n[For Japanese ï¼ˆæ—¥æœ¬èªç’°å¢ƒå‘ã‘ã®è¨­å®šï¼‰](https://ke-complex-modifications.pqrs.org/#japanese)\n\nè¨˜å·ã®é…ç½®ã®å¥½ã¿ã‚„ã€ãƒªã‚¿ãƒ¼ãƒ³ã‚­ãƒ¼ã®æŠ¼ã—ã‚„ã™ã•ã‹ã‚‰USé…åˆ—ã‚’ä½¿ç”¨ã—ã¦ã„ã¾ã™ã€‚\nUSé…åˆ—ã®ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã§ã¯ã€è‹±æ•°ã‚„ã‹ãªã®ã‚­ãƒ¼ãŒãªãã€æ—¥æœ¬èªåˆ‡ã‚Šæ›¿ãˆã¯ `Cmd+Space` ã‚„ `Ctrl+Space` ã§è¡Œã„ã¾ã™ã€‚\n\nåˆ‡ã‚Šæ›¿ãˆã®å ´åˆã€ç¾åœ¨ã®å…¥åŠ›çŠ¶æ…‹ã‚’æŠŠæ¡ã—ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚‹ã®ã§ã€ã§ãã‚Œã°JISé…åˆ—ã¨åŒã˜ã‚ˆã†ã«å˜ä¸€ã®ã‚­ãƒ¼ã‚’æŠ¼ã™ã¨å¿…ãšè‹±æ•°/ãƒ­ãƒ¼ãƒå­—å…¥åŠ›ã«å¤‰ã‚ã£ã¦ã»ã—ã„ã¨ã“ã‚ã§ã™ã€‚\n\nã“ã®è¨­å®šã‚’è¡Œã†ã¨ã€å·¦CommandãŒè‹±æ•°ã‚­ãƒ¼ã€å³CommandãŒã‹ãªã‚­ãƒ¼ã«å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¾ã™ã€‚\nCommandã®modifierã¨ã—ã¦ã®æ©Ÿèƒ½ã¯ç¶­æŒã•ã‚Œã€ã‚³ãƒ”ãƒ¼ã‚„ãƒšãƒ¼ã‚¹ãƒˆãªã©ã®ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚‚åˆ©ç”¨ã§ãã¾ã™ã€‚\n\n## Vonng/Capslock\n\n\u003chttps://github.com/Vonng/Capslock\u003e\n\nCapsLockã‚­ãƒ¼ã‚’ã€ã„ã‚ã„ã‚ãªã“ã¨ãŒã§ãã‚‹modifierã«å¤‰åŒ–ã•ã›ã‚‹è¨­å®šã§ã™ã€‚\n*Make CapsLock Great Again!* ã¨éŠ˜æ‰“ã¤ã ã‘ã‚ã£ã¦ã€ã‚¢ãƒ—ãƒªèµ·å‹•ã®ãƒ›ãƒƒãƒˆã‚­ãƒ¼ã‚’ä½œã£ãŸã‚Šã€çŸ¢å°ã‚­ãƒ¼ã§ãƒã‚¦ã‚¹ã‚«ãƒ¼ã‚½ãƒ«ã‚’ç§»å‹•ã•ã›ãŸã‚Šã¨ã„ã£ãŸã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\n\n`karabiner://karabiner/assets/complex_modifications/import?url=https://vonng.com/capslock.json` ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚\n\n### Application\n\nã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•ã®ãƒ›ãƒƒãƒˆã‚­ãƒ¼ã‚’ç™»éŒ²ã§ãã¾ã™ã€‚\nä¾‹: `CapsLock+e` ã§SafariãŒèµ·å‹•ã™ã‚‹(èµ·å‹•æ¸ˆã¿ã ã£ãŸã‚‰ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒåˆ‡ã‚Šæ›¿ã‚ã‚‹)\n\nCmd+Tabã§ã‚¢ãƒ—ãƒªã‚’åˆ‡ã‚Šæ›¿ãˆãŸã‚Šã€Mission Controlã‚„Dockã§æ¢ã—ãŸã‚Šã¨ã„ã£ãŸæ‰‹é–“ãŒãªããªã‚Šã¾ã™ã€‚\n\nç§ã¯karabinerã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«(`~/.config/karabiner/karabiner.json`) ã‚’æ›¸ãæ›ãˆã¦ã€ã‚ˆãä½¿ã†ã‚¢ãƒ—ãƒªã‚’å·¦æ‰‹ã®ã‚­ãƒ¼ã«ç™»éŒ²ã—ã¦ã„ã¾ã™ã€‚\n\n* `CapsLock+s`: Slack\n* `CapsLock+g`: Chrome\n* `CapsLock+v`: Visual Studio Code\n* `CapsLock+f`: iTerm2\n* `CapsLock+Cmd+f`: Finder\n\n### Functional\n\n`CapsLock+æ•°å­—åˆ—` ã‚’Functionã‚­ãƒ¼ã«ã—ã¾ã™ã€‚\nFunctionã‚­ãƒ¼ã®ãªã„ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã«ä¾¿åˆ©ã§ã™ã€‚\n\n### Navigation\n\nVimã‚¹ã‚¿ã‚¤ãƒ«ã®ç§»å‹•ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚ã©ã‚“ãªå ´æ‰€ã§ã‚‚ `hjkl` ã§ç§»å‹•ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\nã»ã‹ã«ã‚‚ `u` ãŒ `PgUp`ã€`i` ãŒ `Home` ã«ãªã£ãŸã‚Šã€\n`CapsLock+Opt+hjkl` ãŒãƒã‚¦ã‚¹ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•ã«ãªã£ãŸã‚Šã—ã¾ã™ã€‚\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["Mac","keyboard"]},"/blog/look-back-2021":{"title":"2021å¹´æŒ¯ã‚Šè¿”ã‚Š","content":"\n## 2021å¹´ã«ã‚„ã£ãŸã“ã¨\n\n### Kotlin + Spring Boot\n\n1æœˆã€œ3æœˆã”ã‚ã¯Kotlin + Spring Boot ã‚’è§¦ã£ã¦ã„ã¾ã—ãŸã€‚\nKotlinã§åˆã‚ã¦ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã‚’1ã‹ã‚‰ä½œã‚Œã¦ã„ã„çµŒé¨“ã«ãªã‚Šã¾ã—ãŸã€‚\nSpring Bootã¯Webã‚µãƒ¼ãƒãƒ¼ã¤ãã‚‹ã«ã‚ãŸã£ã¦ã»ã—ã„æ©Ÿèƒ½ãŒä¸€é€šã‚Šæƒã£ã¦ã„ã¦åŠ©ã‹ã‚Šã¾ã—ãŸã€‚\nSpringã‚‚ã»ã¼åˆã‚ã¦ã§æ‚©ã‚€ã“ã¨ã¯ã‚ã‚Šã¾ã—ãŸãŒã€Kotlinã ã‹ã‚‰è©°ã¾ã£ãŸã¨ã„ã†ã“ã¨ã¯ãªã‹ã£ãŸã‚ˆã†ã«æ€ã„ã¾ã™ã€‚\n\nMockKã§ãã£ã¡ã‚Šãƒ†ã‚¹ãƒˆæ›¸ããªãŒã‚‰é€²ã‚ã‚‰ã‚ŒãŸã®ã‚‚ã‚ˆã‹ã£ãŸã§ã™ã€‚\nSpringãŒã¨ã«ã‹ãDIå‘¨ã‚Šã®ã“ã¨ã‚’ä½•ã‚‚è€ƒãˆãªãã¦ã‚‚ã‚„ã£ã¦ãã‚Œã‚‹ã®ã§ã€\nã¨ãã«ãƒãƒã‚‹ã“ã¨ã‚‚ãªãinjectionã—ã¦mockã—ãŸã‚‰ãƒ†ã‚¹ãƒˆãŒã‹ã‘ã¦ã‚¹ãƒˆãƒ¬ã‚¹ãŒå°‘ãªã‹ã£ãŸã§ã™ã€‚\n\nã“ã®æ™‚æœŸã¯æŠ€è¡“çš„ã«ã¯æ¥½ã—ã„ã“ã¨ã‚’ã‚„ã‚Œã¦ã„ã¾ã—ãŸãŒã€è² è·ã‚‚é«˜ãã¦ç–²ã‚Œã¦ã‚‚ã„ã¾ã—ãŸã€‚\n\n### Go + Lambda\n\nAWS Lambdaã§ãƒãƒƒãƒã‚’æ›¸ã„ãŸã‚ŠAPIã‚µãƒ¼ãƒãƒ¼ä½œã£ãŸã‚Šã¨ã€ä½•ã‹ã¨è§¦ã‚‹æ©Ÿä¼šãŒå¤šã‹ã£ãŸã§ã™ã€‚\nä½•å›ã‹æ›¸ã„ã¦ã„ãã†ã¡ã«ãƒ†ã‚¹ãƒˆã®ã—ã‚„ã™ã•ã‚„ãƒ¡ãƒ³ãƒ†ã—ã‚„ã™ã•ã‚’è€ƒæ…®ã—ãŸè¨­è¨ˆãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã¨æ€ã„ã¾ã™ã€‚\n\nãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸã°ã‹ã‚Šã®[aws-sdk-go-v2](https://github.com/aws/aws-sdk-go-v2)ã‚‚ä½¿ã„ãªãŒã‚‰ã€çŸ¥è¦‹ã‚’è²¯ã‚ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€‚\n\n### ç«¶ãƒ—ãƒ­\n\nè¨ˆç®—é‡ã¨ã‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ã¡ã‚ƒã‚“ã¨æ„è­˜ã§ãã‚‹ã‚ˆã†ã«ãªã‚‰ãªãã‚ƒã„ã‹ã‚“ã¨æ€ã£ã¦ã€\n2æœˆã€œ3æœˆã”ã‚ã¯ç«¶ãƒ—ãƒ­ã«ãƒãƒã£ã¦C++ã‚’å‹‰å¼·ã—ãŸã‚Š\n[å•é¡Œè§£æ±ºåŠ›ã‚’é›ãˆã‚‹ï¼ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¨ãƒ‡ãƒ¼ã‚¿æ§‹é€ ](https://www.amazon.co.jp/dp/B08PV83L3N) ã‚’èª­ã‚“ã ã‚Šã—ã¦ã„ã¾ã—ãŸã€‚\n\nAtCoderèŒ¶è‰²ã«ãªã£ãŸãã‚‰ã„ã§é›¢ã‚Œã¦ã—ã¾ã„ã¾ã—ãŸãŒã€ã¾ãŸå†é–‹ã—ãŸã„ã¨æ€ã£ã¦ã„ã¾ã™ã€‚\n\næ¥­å‹™ä¸Šã¯ãã‚“ãªã«æ´»ã‹ã›ã¦ãªã„ã§ã™ãŒã€ãƒ‡ãƒ¼ã‚¿é‡ãŒå¤§ãã„ã¨ãã«ãƒ«ãƒ¼ãƒ—ã—ã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã¦ã€Œã“ã‚Œ1ç§’ä»¥ä¸Šã‹ã‹ã‚‹ã‘ã©å¤§ä¸ˆå¤«ï¼Ÿã€ã®ã‚ˆã†ãªå‹˜ãŒåƒãã‚ˆã†ã«ãªã£ãŸã®ã¯è‰¯ã‹ã£ãŸã¨æ€ã„ã¾ã™ã€‚\n\n### Obsidian\n\n[Obsidian](https://obsidian.md/) ã§ãƒ¡ãƒ¢ã‚’å–ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚\nmarkdownã§å…¨ã¦ç®¡ç†ã§ãã‚‹ã®ãŒæ°—ã«å…¥ã£ã¦ã¾ã™ã€‚\nã‚ã¾ã‚Šä½¿ã„ã“ãªã›ã¦ã‚‹æ°—ã¯ã—ã¾ã›ã‚“ãŒã€markdownãªã®ã§ç‰¹å®šã®ãƒ„ãƒ¼ãƒ«ã«ãƒ­ãƒƒã‚¯ã‚¤ãƒ³ã•ã‚Œã‚‹ã“ã¨ãŒãªã„ã®ãŒå¬‰ã—ã„ã§ã™ã€‚\n\nGoogle Keepãƒ¡ãƒ¢ã‚„Evernoteã«ãŸã‚ã¦ã„ãŸãƒãƒ¼ãƒˆé¡ã‚‚ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¦ã€markdownç®¡ç†ã«ã—ã¦ã„ã¾ã™ã€‚\nä¸€ç™ºã§markdownã«ã™ã‚‹ã“ã¨ãŒã§ããªã‹ã£ãŸã®ã§ã€ä¸€åº¦Notionã«ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã‹ã‚‰markdownã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã—ãŸã€‚\n\nä½œæ¥­è¨˜éŒ²ã‚„ã‚¿ã‚¹ã‚¯ã‚‚Obsidianä¸Šã§ç®¡ç†ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚\nã„ã¾ã¾ã§ã‚‚Togglã‚„Todoistã¯ä½¿ã£ã¦ã„ã¾ã—ãŸãŒã€ãœã‚“ãœã‚“ç¶šã‹ãšæ€ã„å‡ºã—ãŸã¨ãã«ã ã‘æ›¸ãã‹ã‚‰ã‚ã¾ã‚Šæ„å‘³ãŒãªã‹ã£ãŸã®ã§ã™ãŒã€\nObsidianã¯æ›¸ãã“ã¨ã®ã‚¹ãƒˆãƒ¬ã‚¹ãŒå°‘ãªãã€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚‚è‡ªç”±ã«ã„ã˜ã‚Œã‚‹ã®ã§è‡ªåˆ†ã«ã‚ã£ã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚\n\n[Day Planner](https://pouhon.net/obsidian-planner/6033/)ã®æ©Ÿèƒ½ã‚’ä½¿ã£ã¦ã„ã¾ã™ã€‚\n\nç´°ã‹ãè¨˜éŒ²ã‚’ã¤ã‘ã‚ˆã†ã¨æ€ã†ãªã‚‰Togglãªã©ã‚’ãã£ã¡ã‚Šä½¿ã£ãŸã»ã†ãŒã„ã„ã‚“ã ã¨æ€ã„ã¾ã™ãŒã€\nå¤§é›‘æŠŠã«ä½•æ™‚é–“ãã‚‰ã„ä½•ã‚’ã—ã¦ã„ãŸã‹ç¨‹åº¦ã®æŠŠæ¡ã«ã—ã‹ä½¿ã£ã¦ã„ãªã„ã®ã§ååˆ†ã§ã—ãŸã€‚\n\nã‚ã¨ã‹ã‚‰ã“ã®æ—¥ä½•ã‚’ã—ã¦ã„ãŸã‹æŒ¯ã‚Šè¿”ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ä»Šå¾Œã‚‚ç¶šã‘ã¦ã„ããŸã„ã§ã™ã€‚\n\n### ä»Šå¹´è¦‹ã¦è‰¯ã‹ã£ãŸã‚‚ã®\n\n#### æ˜ ç”»\n\n* é–ƒå…‰ã®ãƒã‚µã‚¦ã‚§ã‚¤\n* ã‚·ãƒ³ãƒ»ã‚¨ãƒ´ã‚¡ãƒ³ã‚²ãƒªã‚ªãƒ³\n* æ˜ ç”»å¤§å¥½ããƒãƒ³ãƒã•ã‚“\n* å­ä¾›ã¯ã‚ã‹ã£ã¦ã‚ã’ãªã„\n* ãƒ•ãƒªãƒ¼ã‚¬ã‚¤\n* ã‚³ãƒ³ã‚°vsã‚´ã‚¸ãƒ©\n* ãƒ‡ã‚£ãƒ‘ãƒ¼ãƒ†ãƒƒãƒ‰\n* ãƒã‚¯ã‚¿ãƒ¼ãƒŠãƒ«ãƒ»ã‚¢ãƒ‹ãƒãƒ«ã‚º\n* ãƒªãƒãƒ£ãƒ¼ãƒ‰ã‚¸ãƒ¥ã‚¨ãƒ«\n* ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰\n* æ–°æ„ŸæŸ“ ãƒ•ã‚¡ã‚¤ãƒŠãƒ«ãƒ»ã‚¨ã‚¯ã‚¹ãƒ—ãƒ¬ã‚¹\n* ãƒ–ãƒ©ãƒƒã‚¯ãƒ»ãƒ¬ã‚¤ãƒ³\n\n#### ã‚¢ãƒ‹ãƒ¡\n\n* å‘ªè¡“å»»æˆ¦\n* ç„¡è·è»¢ç”Ÿ\n* ODD TAXI\n* ãƒ–ãƒ«ãƒ¼ãƒ”ãƒªã‚ªãƒ‰\n\n#### ãƒ‰ãƒ©ãƒ\n\n* ã‚¯ã‚¤ãƒ¼ãƒ³ã‚ºãƒ»ã‚®ãƒ£ãƒ³ãƒ“ãƒƒãƒˆ\n* ãƒ•ã‚¡ãƒ«ã‚³ãƒ³\u0026ã‚¦ã‚£ãƒ³ã‚¿ãƒ¼ã‚½ãƒ«ã‚¸ãƒ£ãƒ¼\n* æµ…è‰ã‚­ãƒƒãƒ‰\n\n#### æ¼«ç”»\n\n* æ¨ã—ã®å­\n* å·¦åˆ©ãã®ã‚¨ãƒ¬ãƒ³\n* ãƒã‚§ãƒ³ã‚½ãƒ¼ãƒãƒ³\n\n### ãƒãƒ©ã‚½ãƒ³\n\næœˆé–“100kmã‚’ç›®æ¨™ã«æ¦‚ã­é”æˆã—ã¾ã—ãŸã€‚\n\n![2022-01-01-00-16-08](blog/2022-01-01-00-16-08.png) \n\nåˆè¨ˆ: 1260km\nå¹³å‡ãƒšãƒ¼ã‚¹: 5åˆ†1ç§’\n\nãƒ”ã‚¯ãƒŸãƒ³ãƒ–ãƒ«ãƒ¼ãƒ ã®èŠ±æ¤ãˆãŒæ—ã‚Šã¾ã—ãŸã€‚\n\n## 2022å¹´\n\n* ã‚¤ãƒ³ãƒ—ãƒƒãƒˆãƒ»ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã‚’å¢—ã‚„ã™(å°ä¸¦æ„Ÿ)\n  * æœ€è¿‘æœ¬ã‚’èª­ã‚“ã ã‚ŠæŠ€è¡“ç¿’å¾—ã—ãŸã‚Šã§ãã¦ã„ãªã„ã®ã§ã€ã‚‚ã£ã¨ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã‚’æ„è­˜ã—ãŸã‚¤ãƒ³ãƒ—ãƒƒãƒˆã‚’ã—ã¦ã„ã\n  * ãƒ¬ã‚¬ã‚·ãƒ¼ã‚³ãƒ¼ãƒ‰ã‚’é ‘å¼µã£ã¦èª­ã¿è§£ã„ã¦ã€é•·å¹´ç©ã¿é‡ãªã£ãŸå±±ã‚’å´©ã•ãªã„ã‚ˆã†ã«ã—ãªãŒã‚‰ã©ã†ã«ã‹å‹•ã‹ã™ã¿ãŸã„ãªä»•äº‹ãŒå¤šã‹ã£ãŸã®ã§ã€æ¥å¹´ã¯ã‚‚ã£ã¨å¤§å¹…ã«ãã‚Œã„ã«ã—ãŸã„\n* å¼•ã£è¶Šã—\n  * ä»Šå¾Œã‚‚æ¯æ—¥å‡ºç¤¾ã«ã¯ãªã‚‰ãªã„ã§ã‚ã‚ã†ã¨ä¿¡ã˜ã¦ã€å¤šå°‘é ãã¦ã‚‚ä½ã¿ã‚„ã™ãã¦åºƒã„ã¨ã“ã‚ã«ä½ã¿ãŸã„\n* ãƒãƒ©ã‚½ãƒ³\n  * 2å¹´ã»ã©å¤§ä¼šã«å‡ºã‚Œã¦ã„ãªã„ã®ã§ã€ãƒãƒ¼ãƒ• 1:40ã€ãƒ•ãƒ« ã‚µãƒ–3.5 ã‚’ç›®æ¨™ã«ã—ã¦å¤§ä¼šã«ã§ãŸã„\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["æŒ¯ã‚Šè¿”ã‚Š"]},"/blog/open-google-meet-at-time":{"title":"Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®äºˆå®šæ™‚åˆ»ã«ãªã£ãŸã‚‰Meetã‚’è‡ªå‹•ã§é–‹ãã‚ˆã†ã«ã™ã‚‹","content":"\n\n````toc\n# This code block gets replaced with the TOC\n````\n\n## ãƒ¢ãƒãƒ™ãƒ¼ã‚·ãƒ§ãƒ³\n\nã‚ªãƒ³ãƒ©ã‚¤ãƒ³ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’Google Meetã§ã‚„ã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€æ°—ã¥ã„ãŸã‚‰é–‹å§‹æ™‚é–“ã‚’éãã¦ã„ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™(æœ¬å½“ã«ã‚ˆããªã„)\né€šçŸ¥ãŒæ¥ãŸã¨ãã«é–‹å§‹ã¾ã§ã«å°‘ã—æ™‚é–“ãŒã‚ã‚‹ã®ã§åˆ¥ãªä½œæ¥­ã‚’ã—ã¦ã—ã¾ã†ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒå¤šã„ã§ã™ã€‚\n\næ™‚é–“ã«ãªã£ãŸã‚‰Meetã®ç”»é¢ã‚’è‡ªå‹•ã§é–‹ã„ã¦ã€å¼·åˆ¶çš„ã«ä½œæ¥­ã‚’ä¸­æ–­ã™ã‚Œã°ãã‚“ãªã“ã¨ãŒãªããªã‚‹æ°—ãŒã—ã¾ã™ã€‚\n\n## æ–¹é‡\n\nGoogleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‹ã‚‰äºˆå®šã‚’å–å¾—ã—ã¦ã€æ™‚é–“ã«ãªã£ãŸã‚‰ãã®Meetã®URLã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãã‚ˆã†ã«ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚\n\nã‚„ã‚Šæ–¹ã¯ã„ã‚ã„ã‚ã‚ã‚‹ã¨æ€ã„ã¾ã™ã€‚\nChromeæ‹¡å¼µã§ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã€Calendar APIã§ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ä¸€è¦§ã‚’å–å¾—ã™ã‚‹ã€â€¦\n\nä»Šå›ã¯è«¸èˆ¬ã®äº‹æƒ…ã§Calendar APIã‚’ç›´æ¥ä½¿ãˆãªã‹ã£ãŸãŸã‚ã€ä»¥ä¸‹ã®æ–¹é‡ã«ã—ã¾ã—ãŸã€‚\nOSã¯Macã§ã™ã€‚\n\n* Google Apps Script(GAS) ã§ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‹ã‚‰ä¸€æ—¥ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’JSONã§å–å¾—ã™ã‚‹\n* ã“ã®GASã‚’Webã‚¢ãƒ—ãƒªã¨ã—ã¦å…¬é–‹ã—ã¦ã€HTTP GETã§å–å¾—ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹\n* ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã®æ™‚åˆ»ã« `at` ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚»ãƒƒãƒˆã—ã¦ã€`open \u003cMeetã®URL\u003e` ã‚’å®Ÿè¡Œã™ã‚‹\n\nã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ `at` ã‚’ã‚»ãƒƒãƒˆã™ã‚‹ã®ã¯ä»Šã®ã¨ã“ã‚æ‰‹ã§æœã«å®Ÿè¡Œã—ã¦ã„ã¾ã™ã€‚\n\nã‚‚ã£ã¨ã„ã„ã‚„ã‚Šæ–¹ãŒã‚ã‚‹æ°—ã¯ã—ã¾ã™ãŒã€ã¨ã‚Šã‚ãˆãšã“ã‚Œã§ã‚„ã‚ŠãŸã„ã“ã¨ã¯å‡ºæ¥ã¾ã—ãŸã€‚\nä»¥ä¸‹ã€å„æ‰‹é †ã¨ãªã‚Šã¾ã™ã€‚\n\n## ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å–å¾—GASã‚’ä½œæˆã™ã‚‹\n\n\u003chttps://script.google.com/home\u003e ã‹ã‚‰æ–°ã—ã„ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã™ã‚‹\n\n### GASã®Calendar APIã‚’æœ‰åŠ¹åŒ–\n\næ¨™æº–ã® [CalendarApp](https://developers.google.com/apps-script/reference/calendar) ã§ã¯å–ã‚Œã‚‹æƒ…å ±ãŒå°‘ãªãMeetã®URLãŒã¨ã‚Œãªã„ãŸã‚ã€[Calendar API](https://developers.google.com/apps-script/advanced/calendar) ã‚’ä½¿ç”¨ã™ã‚‹\n\nGASã®ã‚¨ãƒ‡ã‚£ã‚¿ \u003e ã‚µãƒ¼ãƒ“ã‚¹ \u003e Calendar ã‚’æœ‰åŠ¹åŒ–\n\n### dayjs ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹\n\næ¨™æº–ã® [Utilities.formatDate](https://developers.google.com/apps-script/reference/utilities/utilities) ã§ã‚‚æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯ã§ãã‚‹ãŒã€ã‚‚ã†å°‘ã—æ—¥ä»˜ã‚’ã†ã¾ãæ‰±ã†ãŸã‚ã«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å…¥ã‚Œã‚‹ã€‚\nMoment.jsã¯é–‹ç™ºãŒæ­¢ã¾ã£ã¦ã„ã‚‹ã®ã§ã€dayjsã‚’ä½¿ã†ã€‚\n\nGASã®ã‚¨ãƒ‡ã‚£ã‚¿ \u003e ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’è¿½åŠ  \u003e dayjs ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆID `1ShsRhHc8tgPy5wGOzUvgEhOedJUQD53m-gd8lG2MOgs-dXC_aCZn9lFB` ã‚’å…¥åŠ›\n\n#### ä½™è«‡\n\nãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆIDã‚’æ¤œç´¢ã™ã‚‹æ–¹æ³•ãŒã‚ã‹ã‚‰ãªã„â€¦\nä»•æ–¹ãªãå€‹äººãƒ–ãƒ­ã‚°ã‚„Qiitaã‹ã‚‰æƒ…å ±ã‚’å¾—ãŸã‘ã©ã€å…¬å¼æƒ…å ±ã˜ã‚ƒãªã„ã®ã§æ°—æŒã¡æ‚ªã„\n\nã‚¹ã‚¯ãƒªãƒ—ãƒˆIDã®ã‚¨ãƒ‡ã‚£ã‚¿ã®URLã‚’é–‹ãã¨ã€ãŸã—ã‹ã«dayjsã®ã‚³ãƒ¼ãƒ‰ã®ã‚ˆã†\n\u003chttps://script.google.com/home/projects/1ShsRhHc8tgPy5wGOzUvgEhOedJUQD53m-gd8lG2MOgs-dXC_aCZn9lFB/edit\u003e\n\n### ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‹ã‚‰äºˆå®šã‚’å–å¾—ã—ã¦JSONã§è¿”å´ã™ã‚‹å®Ÿè£…\n\nWebã‚¢ãƒ—ãƒªã¨ã—ã¦ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã€`doGet` é–¢æ•°ã‚’ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã«å®Ÿè£…ã™ã‚‹\n\n````javascript:code.gs\nfunction doGet(e) {\n    return ContentService.createTextOutput(JSON.stringify(getSchedule()));\n}\n\nfunction getSchedule() {\n  const now = new Date();\n  const begin = dayjs.dayjs(now);\n  const end = dayjs.dayjs(now).endOf('day');\n    \n  // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®ID\n  const calendarId = CalendarApp.getDefaultCalendar().getId();\n\n  // Calendar APIã§æœ¬æ—¥ã®äºˆå®šã‚’å–å¾—ã™ã‚‹\n  const events = Calendar.Events.list(calendarId, {\n    timeMin: begin.toISOString(),\n    timeMax: end.toISOString(),\n    singleEvents: true,\n    orderBy: 'startTime',\n  })\n\n  const todayEvent = events.items.map(event =\u003e {\n    let start;\n    if (event.start.date) {\n      // All-day event.\n      start = new Date(event.start.date);\n    } else {\n      start = new Date(event.start.dateTime);\n    }\n\n    // atã‚³ãƒãƒ³ãƒ‰ã§æ‰±ã„ã‚„ã™ã„æ™‚é–“å½¢å¼ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ\n    return {\n      title: event.summary,\n      start: dayjs.dayjs(start).subtract(1, 'minute').format(\"YYYYMMDDHHmm\"),\n      meetUrl: event.hangoutLink,\n    }\n  })\n\n  return todayEvent;\n}\n````\n\n### Webã‚¢ãƒ—ãƒªã¨ã—ã¦å…¬é–‹\n\nãƒ‡ãƒ—ãƒ­ã‚¤ \u003e æ–°ã—ã„ãƒ‡ãƒ—ãƒ­ã‚¤ \u003e èª¬æ˜ã‚’å…¥åŠ›ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ \u003e Webã‚¢ãƒ—ãƒªã®URLã‚’å–å¾—\n\n## atã‚³ãƒãƒ³ãƒ‰ã‚’æœ‰åŠ¹åŒ–\n\nMacã®atã‚³ãƒãƒ³ãƒ‰ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ç„¡åŠ¹ã«ãªã£ã¦ã„ã‚‹ã®ã§æœ‰åŠ¹åŒ–ã™ã‚‹ã€‚\n\n[Macã§atã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè¡Œã§ããªã„ã¨ãã®å¯¾å‡¦æ³• - Qiita](https://qiita.com/shge/items/6c43947a77abd9d2d1b2)\n[MacOS ã§ at ã‚³ãƒãƒ³ãƒ‰ã‚’æœ‰åŠ¹åŒ–ã—ã¦ä½¿ã£ã¦ã¿ã‚‹ - Neo's World](https://neos21.net/blog/2019/09/13-02.html)\n\n````shell\nsudo launchctl load -w /System/Library/LaunchDaemons/com.apple.atrun.plist\n````\n\n`/usr/libexec/atrun` ã«ãƒ•ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ã‚’ã¤ã‘ã‚‹\n\n## ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§äºˆå®šä¸€è¦§ã‚’å–å¾—ã—ã¦ã€atã‚³ãƒãƒ³ãƒ‰ã§è¨­å®š\n\n````shell\ncurl -L \"\u003cGASã®Webã‚¢ãƒ—ãƒªURL\u003e\" | jq -r '.[] | .title + \",\" + .start + \",\" + .meetUrl' | awk -F ',' '{ print system(\"echo open \" $3 \" | at -t \" $2 ) }'\n````\n\n## ã¾ã¨ã‚\n\næ¯æœæ‰‹å‹•ã§atã‚³ãƒãƒ³ãƒ‰ã‚’ä»•è¾¼ã‚€ã‚ˆã†ã«ã—ã¦ã„ã¦ã€ãã“ã ã‘ã¯æ‰‹é–“ã ãŒã„ã¾ã®ã¨ã“ã‚ã“ã‚Œã®ãŠã‹ã’ã§æ™‚é–“ã«ãªã£ãŸã‚‰ä½œæ¥­ã‚’æ­¢ã‚ã‚‹ã“ã¨ãŒã§ãã¦ã„ã‚‹ã€‚\n\natã‚³ãƒãƒ³ãƒ‰ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ç„¡åŠ¹ã«ãªã£ã¦ã„ã¦ã€Macã§ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å®Ÿè¡Œã®ã‚³ãƒãƒ³ãƒ‰ã¯launchdã‚’ä½¿ã£ãŸã»ã†ãŒã„ã„ã®ã§ã¯ã¨ã„ã†æ°—ãŒã—ã¦ã„ã‚‹ã€‚\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["GAS","shell"]},"/blog/start-blog-with-gatsby":{"title":"Gatsbyã§ãƒ–ãƒ­ã‚°ã‚’ä½œã£ãŸã®ã§ã€æ§‹ç¯‰ãƒ­ã‚°ã‚’æ®‹ã™","content":"\n## Gatsby.js ã«ã¤ã„ã¦\n\n\u003chttps://www.gatsbyjs.com/\u003e\n\nReactã§ã¤ãã‚‰ã‚ŒãŸé™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿\n\nReactã‚’ãƒ“ãƒ«ãƒ‰æ™‚ã«1å›ã ã‘å®Ÿè¡Œã—ã€HTML,JSã‚’ç”Ÿæˆã™ã‚‹ã€‚\nç”Ÿæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã ã‘ã§è¦‹ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚\n\n### GraphQL\n\n* Gatsby.jsã§ã¯ãƒ“ãƒ«ãƒ‰æ™‚ã®ã•ã¾ã–ã¾ãªãƒ‡ãƒ¼ã‚¿ã‚’GraphQLã§å–å¾—ã™ã‚‹ã€‚\n* Markdownå½¢å¼ã§æ›¸ã„ãŸæƒ…å ±ã‚’ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰èª­ã¿è¾¼ã‚“ã§ã€GraphQLçµŒç”±ã§å–å¾—ã—ã€Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§è¡¨ç¤ºã™ã‚‹ã€‚\n* Gatsbyã§ã¯Markdownãƒ•ã‚¡ã‚¤ãƒ«ã«é™ã‚‰ãšã€æ§˜ã€…ãªãƒ‡ãƒ¼ã‚¿ã‚’ `data source`, `data transformer` ã¨ã„ã†æ çµ„ã¿ã§ä¸€èˆ¬åŒ–ã™ã‚‹ã“ã¨ã§ã€å¤šæ§˜ãªå‡¦ç†ã‚’çµ±ä¸€çš„ã«ã‹ã¤ç°¡æ½”ã«è¨˜è¿°ã™ã‚‹ã“ã¨ãŒã§ãã¦ã„ã‚‹ã€‚\n* ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯ãƒ“ãƒ«ãƒ‰æ™‚ã«å½¢æˆã•ã‚ŒãŸGraphQL DBã®å…¨ä½“ã¯å¿…è¦ãªã„ã®ã§ã€ã€Œã‚¯ã‚¨ãƒªã®çµæœã€ã®ã¿ã‚’JSONã¨ã—ã¦åˆã‚ã›ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã€‚\n\n## starterã‚’ä½¿ã£ã¦blogã‚’ä½œæˆ\n\nãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’åˆ©ç”¨ã—ã¦ãƒ–ãƒ­ã‚°ã‚’æ§‹ç¯‰ã—ã¾ã—ãŸã€‚\n\n````shell\nnpx gatsby new gatsby-starter https://github.com/gatsbyjs/gatsby-starter-blog\n````\n\nâ€»æœ€åˆã€[Leonids](https://www.gatsbyjs.com/starters/renyuanz/leonids/) ã§æ§‹ç¯‰ã—ã¾ã—ãŸãŒã„ã¾ã„ã¡æ°—ã«å…¥ã‚‰ãªã‹ã£ãŸã®ã§ã€[gatsby-starter-blog](https://www.gatsbyjs.com/starters/gatsbyjs/gatsby-starter-blog) ã§ä½œã‚Šç›´ã—ã¾ã—ãŸã€‚\nä½œã‚Šç›´ã™ã«ã‚ãŸã£ã¦ã¯ã€åˆ¥ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§starterã‹ã‚‰ä½œæˆ â†’ ãƒ•ã‚¡ã‚¤ãƒ«ä¸€å¼ã‚’ã‚³ãƒ”ãƒ¼ â†’ TypeScriptã¸ã®å¤‰æ›ç­‰ã§åœ°é“ã«è¡Œã„ã¾ã—ãŸã€‚\n\n## TypeScriptåŒ–ã™ã‚‹\n\ntsxã«å¤‰æ›´\nGraphQLã®ã‚¯ã‚¨ãƒªçµæœã‚’å‹è§£æ±ºã™ã‚‹\n\n## TailwindCSS\n\nTailwindCSSã®ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚’çµ„ã¿åˆã‚ã›ã‚‹æ€æƒ³ãŒå¥½ãã§ã‚ˆãä½¿ç”¨ã™ã‚‹ã®ã§ã€æœ¬ãƒ–ãƒ­ã‚°ã§ã‚‚\n\u003chttps://www.gatsbyjs.com/docs/how-to/styling/tailwind-css/\u003e\nã«æ²¿ã£ã¦è¨­å®šã—ã¦ã„ãã¾ã™ã€‚\n\n### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€åˆæœŸè¨­å®š\n\n````shell\nyarn add -D tailwindcss@npm:@tailwindcss/postcss7-compat autoprefixer\nnpx tailwindcss init\n````\n\n### PostCSSã§é©ç”¨ã™ã‚‹\n\n````shell\nyarn add postcss gatsby-plugin-postcss\n````\n\n````javascript:title=gatsby-config.js\nplugins: [`gatsby-plugin-postcss`],\n````\n\n````javascript:title=postcss.config.js\nmodule.exports = () =\u003e ({\n  plugins: [require(\"tailwindcss\")],\n})\n````\n\n### base CSSã‚’è¿½åŠ ã™ã‚‹\n\n`@tailwind` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã‚’ä½¿ç”¨ã—ã¦Tailwindã® `base`, `components`, `utilities` ã‚’CSSã«æŒ¿å…¥ã—ã¾ã™ã€‚\n\n````css:title=src/index.css\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n````\n\nã‚«ã‚¹ã‚¿ãƒ CSSã«Tailwindã®ã‚¯ãƒ©ã‚¹ã‚’é©ç”¨ã—ãŸã„å ´åˆä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ã‘ã‚‹\n\n````css:title=src/index.css\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n@import popup.css body {\n  @apply bg-purple-200;\n}\n````\n\n`gatsby-browser.js` ã§èª­ã¿è¾¼ã‚€\n\n````javascript:title=gatsby-browser.js\nimport \"./src/index.css\"\n````\n\n### Purge ã‚’è¨­å®šã™ã‚‹\n\nãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯TailwindCSSå…¨ä½“ãŒãƒ“ãƒ«ãƒ‰ã«å«ã¾ã‚Œã‚‹ãŸã‚ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºå‰Šæ¸›ã®ãŸã‚ã«å¿…è¦ãªclassã®ã¿ã«purgeã™ã‚‹ã€‚\n\n````javascript:title=tailwind.config.js\nmodule.exports = {\n  purge: [\"./src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {},\n  variants: {},\n  plugins: [],\n}\n````\n\n## TOCã‚’è¿½åŠ \n\n[gatsby-remark-autolink-headers](https://www.gatsbyjs.com/plugins/gatsby-remark-autolink-headers/) ã§è¦‹å‡ºã—ã«ã‚¢ãƒ³ã‚«ãƒ¼ãŒã¤ãã‚ˆã†ã«ã™ã‚‹\n\n````shell\nyarn add gatsby-remark-autolink-headers\n````\n\n````javascript:title=gatsby-config.js\nmodule.exports = {\n  plugins: [\n    {\n      resolve: `gatsby-transformer-remark`,\n      options: {\n        plugins: [\n          {\n            resolve: `gatsby-remark-autolink-headers`,\n            options: {\n              offsetY: 80,\n              icon: false,\n              maintainCase: false,\n            },\n          },\n        ],\n      },\n    },\n  ],\n}\n````\n\n### TOCã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã—ã¦ãƒšãƒ¼ã‚¸ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«è¿½åŠ \n\n````typescript:toc.tsx\nimport * as React from 'react'\n\ntype Props = {\n  tocHtml?: string\n}\nconst Toc: React.FC\u003cProps\u003e = ({tocHtml}) =\u003e {\n  if (tocHtml === undefined) {\n    return \u003c\u003e\u003c/\u003e\n  }\n  return (\n    \u003cdiv className=\"toc bg-code-block px-4 py-1 my-2\"\u003e\n      \u003ch4 className=\"toc__title mt-2\"\u003eç›®æ¬¡\u003c/h4\u003e\n      \u003cdiv\n        className=\"toc__content\"\n        dangerouslySetInnerHTML={{\n          __html: tocHtml,\n        }}\n      /\u003e\n    \u003c/div\u003e\n  )\n}\n\nexport default Toc\n````\n\n````typescript:bolg-post.tsx\n// ....\n  return (\n    \u003cLayout location={location} title={siteTitle}\u003e\n\n      \u003carticle\n        className=\"blog-post\"\n        itemScope\n        itemType=\"http://schema.org/Article\"\n      \u003e\n        \u003cheader\u003e\n          \u003ch1 itemProp=\"headline\"\u003e{post.frontmatter.title}\u003c/h1\u003e\n          \u003cp\u003e{post.frontmatter.date}\u003c/p\u003e\n        \u003c/header\u003e\n        \u003csection\n          className=\"blog-post__description\"\n        \u003e\n          {post.frontmatter.description}\n        \u003c/section\u003e\n        \u003cToc\n          tocHtml={post.tableOfContents}\n        /\u003e\n// ...\n    \u003c/Layout\u003e\n  )\n````\n\n## ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã«ã‚¿ã‚¤ãƒˆãƒ«ã‚’è¨­å®š\n\nå‚è€ƒ: [Gatsbyã«ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’å…¥ã‚Œã¦ã‚³ãƒ¼ãƒ‰ã‚’ãã‚Œã„ã«è¡¨ç¤ºã™ã‚‹ | littlebylittle](https://littlebylittle.work/2020/01/gatsby-syntax-highlighting/)\n\n[gatsby-remark-code-titles](https://www.gatsbyjs.com/plugins/gatsby-remark-code-titles/) ã‚’ä½¿ã£ã¦ã€ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ã«ã‚¿ã‚¤ãƒˆãƒ«ã‚’ã¤ã‘ã¾ã™\n\n````shell\nyarn add gatsby-remark-code-titles\n````\n\n````javascript:title=gatsby-config.js\nmodule.exports = {\n  plugins: [\n    {\n      resolve: `gatsby-transformer-remark`,\n      options: {\n        plugins: [\n          'gatsby-remark-code-titles',\n          `gatsby-remark-prismjs`,\n        ],\n      },\n    },\n  ],\n}\n````\n\nã‚³ãƒ¼ãƒ‰ã‚¿ã‚¤ãƒˆãƒ«ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’è¿½åŠ \n\n````css:title=index.css\n.gatsby-code-title {\n  @apply bg-code-block text-text-light;\n  margin-bottom: -0.6rem;\n  padding: 6px 12px;\n  font-size: 0.8em;\n  line-height: 1;\n  font-weight: bold;\n  display: table;\n  border-radius: 4px 4px 0 0;\n}\n````\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["Gatsbyjs","blog","frontend"]},"/blog/zplug-to-zinit":{"title":"zplugã‚’zinitã«ç§»è¡Œã™ã‚‹","content":"\n\n````toc\n# This code block gets replaced with the TOC\n````\n\n## ç§»è¡Œç†ç”±\n\nè‡ªåˆ†ãŒã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä½¿ç”¨ã—ã¦ã„ã‚‹ã‚·ã‚§ãƒ«ã®å¤‰é·\n\n* 2016 ~ 2020/04 zsh zplug\n* 2020/04 ~ 2021/04 fishã«ç§»è¡Œã—ãŸ\n* 2021/04 ~ zshã«æˆ»ã£ãŸ\n\nzshã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒé¢å€’ãªã®ã¨ã€ã‚·ã‚§ãƒ«ã®èµ·å‹•ãŒé…ã‹ã£ãŸã®ã§ã€ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒç°¡å˜ãªfishã«ç§»è¡Œã—ãŸãŒã€ä»¥ä¸‹ã®ç†ç”±ã§ã¾ãŸzshã«æˆ»ã£ã¦ããŸ\n\n* fishã¯POSIXéäº’æ›ãªã®ã§ã‚³ãƒãƒ³ãƒ‰ã‚’èª¿ã¹ã‚‹ã®ãŒæ‰‹é–“\n* bash/zshã§ä½œã£ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ãæ›ãˆã‚‹å¿…è¦ãŒã‚ã‚‹\n\nzinitã¯èµ·å‹•ãŒæ—©ã„ã¨èã„ãŸã®ã§ã€zplugã‹ã‚‰zinitã«ç§»è¡Œã™ã‚‹\n\n## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n[å…¬å¼ã®æ¨å¥¨æ‰‹é †](https://github.com/zdharma/zinit#automatic-installation-recommended)\n\n````shell\nsh -c \"$(curl -fsSL https://raw.githubusercontent.com/zdharma/zinit/master/doc/install.sh)\"\n````\n\n`~/.zinit` (`$ZDOTDIR` ãŒè¨­å®šã•ã‚Œã¦ã„ã‚Œã° `$ZDOTDIR/.zinit`) ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã€‚\nã¾ãŸã€ `~/.zshrc` ã«zinitã®è¨­å®šãŒè¿½è¨˜ã•ã‚Œã‚‹ã®ã§ã€ãƒªãƒ­ãƒ¼ãƒ‰ã—ã€Zinitã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ã€‚\n\n````shell\nsource ~/.zshrc\nzinit self-update\n````\n\n## ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®è¨­å®š\n\nå®Œå…¨ãªä¾‹\n\n````shell\n### Added by Zinit's installer\nif [[ ! -f $ZDOTDIR/.zinit/bin/zinit.zsh ]]; then\n    print -P \"%F{33}â–“â–’â–‘ %F{220}Installing %F{33}DHARMA%F{220} Initiative Plugin Manager (%F{33}zdharma/zinit%F{220})â€¦%f\"\n    command mkdir -p \"$HOME/.zsh/.zinit\" \u0026\u0026 command chmod g-rwX \"$HOME/.zsh/.zinit\"\n    command git clone https://github.com/zdharma/zinit \"$HOME/.zsh/.zinit/bin\" \u0026\u0026 \\\n        print -P \"%F{33}â–“â–’â–‘ %F{34}Installation successful.%f%b\" || \\\n        print -P \"%F{160}â–“â–’â–‘ The clone has failed.%f%b\"\nfi\n\nsource \"$ZDOTDIR/.zinit/bin/zinit.zsh\"\nautoload -Uz _zinit\n(( ${+_comps} )) \u0026\u0026 _comps[zinit]=_zinit\n\n# Load a few important annexes, without Turbo\n# (this is currently required for annexes)\nzinit light-mode for \\\n    zinit-zsh/z-a-rust \\\n    zinit-zsh/z-a-as-monitor \\\n    zinit-zsh/z-a-patch-dl \\\n    zinit-zsh/z-a-bin-gem-node\n\n### End of Zinit's installer chunk\n\nzinit ice wait'1' lucid; zinit light \"zdharma/fast-syntax-highlighting\"\nzinit light \"zsh-users/zsh-autosuggestions\"\nzinit light \"zsh-users/zsh-completions\"\nzinit light \"zsh-users/zsh-history-substring-search\"\nbindkey '^[[A' history-substring-search-up\nbindkey '^[[B' history-substring-search-down\n\nzinit ice wait'1' lucid pick'init.sh'; zinit light \"b4b4r07/enhancd\"\nzinit ice wait'1' lucid; zinit light \"reegnz/jq-zsh-plugin\"\n\nzinit ice wait'1' lucid; zinit light \"b4b4r07/emoji-cli\"\nzinit ice wait'1' lucid; zinit light \"mollifier/cd-gitroot\"\nzinit light \"Aloxaf/fzf-tab\"\n\nzinit ice wait'1' lucid; zinit light \"lukechilds/zsh-better-npm-completion\"\n\n#######\n# https://github.com/Aloxaf/fzf-tab\n#######\nenable-fzf-tab\n# zstyle ':fzf-tab:*' fzf-command ftb-tmux-popup\nzstyle ':fzf-tab:complete:cd:*' fzf-preview 'exa -1 --color=always $realpath'\nzstyle ':fzf-tab:*' fzf-bindings 'ctrl-j:accept' 'ctrl-a:toggle-all' 'ctrl-space:toggle+down'\n# disable sort when completing `git checkout`\nzstyle ':completion:*:git-checkout:*' sort false\n# set descriptions format to enable group support\nzstyle ':completion:*:descriptions' format '[%d]'\n# set list-colors to enable filename colorizing\nzstyle ':completion:*' list-colors ${(s.:.)LS_COLORS}\n# preview directory's content with exa when completing cd\nzstyle ':fzf-tab:complete:cd:*' fzf-preview 'exa -1 --color=always $realpath'\n# switch group using `,` and `.`\nzstyle ':fzf-tab:*' switch-group ',' '.'\n````\n\n`End of Zinit's installer chunk` ã¾ã§ã¯ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãŒè¿½è¨˜ã—ãŸéƒ¨åˆ†ã€‚\n\n### ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã€æœ‰åŠ¹åŒ–\n\n````shell\nzinit ice wait'1' lucid\nzinit light \"zdharma/fast-syntax-highlighting\"\n\nzinit load \"zdharma/history-search-multi-word\"\n````\n\nzinitã«ã¯2ã¤ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ­ãƒ¼ãƒ‰æ–¹æ³•ãŒã‚ã‚‹\n\n* `zinit load`\n  * ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°æ©Ÿèƒ½ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã€‚zinit report ã§ä¸€è¦§è¡¨ç¤ºãŒã§ããŸã‚Šã€zinit unload ã§ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ç„¡åŠ¹åŒ–ã§ãã‚‹ãªã©ã®åˆ©ç‚¹ãŒã‚ã‚‹ãŒã€ãƒ­ãƒ¼ãƒ‰ã¯é…ããªã‚‹\n* `zinit light`\n  * ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°æ©Ÿèƒ½ãŒç„¡åŠ¹ã«ãªã‚‹ã€‚ä¸€è¦§ç­‰ã®æ©Ÿèƒ½ãŒä½¿ãˆãªã„ä»£ã‚ã‚Šã«é«˜é€Ÿ\n\nã‚ã£ãŸã«ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°æ©Ÿèƒ½ã‚’ä½¿ã‚ãªã„ãŸã‚ã€åŸºæœ¬çš„ã« `zinit light` ã§ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ã«ã—ãŸ\n\n### zinit ice\n\nå¾Œç¶šã® `zinit load`, `zinit light` ã®æŒ™å‹•ã‚’åˆ¶å¾¡ã™ã‚‹\n\n````shell\nzinit ice wait'1' lucid pick'init.sh'\nzinit light \"b4b4r07/enhancd\"\n# zinit ice wait'1' lucid pick'init.sh'; zinit light \"b4b4r07/enhancd\" ã¨åŒç¾©\n````\n\n* wait\n  * zshãŒèµ·å‹•ã—ãŸã‚ã¨ã«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’é…å»¶ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ç§’æ•°ã‚’æŒ‡å®šã™ã‚‹\n* lucid\n  * é…å»¶ãƒ­ãƒ¼ãƒ‰ã—ãŸã¨ãã«ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ãƒ­ãƒ¼ãƒ‰æƒ…å ±ãŒå‡ºåŠ›ã•ã‚Œã‚‹ã®ã‚’æŠ‘åˆ¶ã™ã‚‹\n* pick\n  * sourceã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹ã€‚pluginãŒ `*.plugin.zsh` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èµ·ç‚¹ã«ã—ã¦ã„ãªã„å ´åˆã€æ˜ç¤ºçš„ã«æŒ‡å®šã™ã‚‹\n\n## çµæœ\n\n2ç§’ãã‚‰ã„ã‹ã‹ã£ã¦ã„ãŸèµ·å‹•æ™‚é–“ãŒ0.6ç§’å‰å¾Œãã‚‰ã„ã«ãªã£ãŸã€‚\nã¾ãŸã€zplugã ã¨è¤‡æ•°ã‚·ã‚§ãƒ«ã‚’åŒæ™‚ã«èµ·å‹•ã™ã‚‹ã¨ç«¶åˆã—ã¦çŠ¶æ…‹ãŒãŠã‹ã—ãã‚‹ã®ã‹ã€åŒã˜ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒè¤‡æ•°å›ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ã“ã¨ãŒã¾ã‚Œã«ã‚ã£ãŸãŒã€\nã“ã†ã„ã£ãŸå•é¡Œã‚‚èµ·ã“ã‚‰ãªããªã£ãŸã€‚\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["zsh"]},"/note/%E3%82%BB%E3%83%9E%E3%83%95%E3%82%A9":{"title":"ã‚»ãƒãƒ•ã‚©","content":"\n[ã‚»ãƒãƒ•ã‚©ã¨ã¯ - æ„å‘³ã‚’ã‚ã‹ã‚Šã‚„ã™ã - ITç”¨èªè¾å…¸ e-Words](https://e-words.jp/w/%E3%82%BB%E3%83%9E%E3%83%95%E3%82%A9.html)\nã‚»ãƒãƒ•ã‚©ã¯ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ä¸Šã®å…±æœ‰è³‡æºã«ã¤ã„ã¦ã€åˆ©ç”¨å¯èƒ½ãªè³‡æºã®æ•°ã‚’æŒ‡ã—ç¤ºã—ã¦ã„ã‚‹ã€‚ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒè³‡æºã‚’å æœ‰ã™ã‚‹ã¨ãã¯ã‚»ãƒãƒ•ã‚©ã®å€¤ã‹ã‚‰1ã‚’æ¸›ã˜ã€å‡¦ç†ãŒçµ‚ã‚ã£ã¦è§£æ”¾ã™ã‚‹éš›ã«ã¯1ã‚’åŠ ãˆã‚‹ã€‚ã‚»ãƒãƒ•ã‚©ãŒ0ã®ã¨ãã¯ç©ºã„ã¦ã„ã‚‹è³‡æºãŒãªã„ãŸã‚æ­£ã®å€¤ã«ãªã‚‹ã¾ã§å¾…æ©Ÿã™ã‚‹ã€‚ã‚»ãƒãƒ•ã‚©ã®å€¤ã‚’åŒã˜è³‡æºã«åŒæ™‚ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã®æ•°ã¨ã—ã¦æ‰±ã†å ´åˆã‚‚ã‚ã‚‹ã€‚\n\næ’ä»–åˆ¶å¾¡ã®ãŸã‚ã®ä»•çµ„ã¿\n\n## Linuxä¸Šã§ã‚»ãƒãƒ•ã‚©ã®æ•°ã‚’ç¢ºèªã™ã‚‹\n\n`ipcs -s`\n\n````shell\n$ ipcs -s \n\n------ Semaphore Arrays --------\nkey        semid      owner      perms      nsems     \n0x0052e2c1 0          postgres  600        17        \n0x0052e2c2 32769      postgres  600        17        \n0x0052e2c3 65538      postgres  600        17        \n0x0052e2c4 98307      postgres  600        17        \n0x0052e2c5 131076     postgres  600        17        \n0x0052e2c6 163845     postgres  600        17        \n0x0052e2c7 196614     postgres  600        17        \n0x00000000 629047303  apache    600        1         \n0x036c6761 588447766  root      600        17        \n0x036c6762 588480535  root      600        17\n````\n\nå‰Šé™¤ `ipcrm -s \u003csemid\u003e`\n\n````shell\n$ ipcrm -s 588447766\n$ ipcs -s | grep 588447766\n=\u003e å‰Šé™¤ã•ã‚Œã‚‹\n````\n\n## ä¸Šé™\n\nãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ä¸Šé™ã¯120\n`sysctl -a` ã§ç¢ºèªã§ãã‚‹\n\n````shell\n$ /sbin/sysctl -a | grep semid\nkernel.sem = 250        32000   32      128\n````\n\nApacheãŒã‚»ãƒãƒ•ã‚©ä¸è¶³ã§èµ·å‹•ã—ãªã„ã“ã¨ãŒã‚ã‚‹ã€‚\n`No space left on device` ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã®ã§ãƒŸã‚¹ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã ãŒã€ã‚»ãƒãƒ•ã‚©ã‚’æ¸›ã‚‰ã—ã¦ã‚„ã‚‹ã“ã¨ã§èµ·å‹•ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹\n\n[ã‚»ãƒãƒ•ã‚©ä¸è¶³ã§ApacheãŒèµ·å‹•ã§ããªã„ã¨ãã‚»ãƒãƒ•ã‚©ã‚’ã¾ã¨ã‚ã¦å‰Šé™¤ã™ã‚‹ - M.C.P.C. (Mamesibori Creation Plus Communication)](https://cl.hatenablog.com/entry/apache-rm-semaphore)\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["2023/03/14","Linux"]},"/note/%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E5%90%8C%E5%A3%AB%E3%81%AE%E6%AF%94%E8%BC%83%E3%82%92vimdiff%E3%81%A7%E5%8F%96%E3%82%8B":{"title":"ãƒ•ã‚¡ã‚¤ãƒ«åŒå£«ã®æ¯”è¼ƒã‚’vimdiffã§å–ã‚‹","content":"\n## ãƒ•ã‚¡ã‚¤ãƒ«åŒå£«ã®æ¯”è¼ƒã‚’vimdiffã§å–ã‚‹\n\n````shell\n$ vimdiff text.txt another.txt\n# ã¾ãŸã¯vim -d\n$ vim -d text.txt another.txt\n````\n\n## ç¾åœ¨vimã§é–‹ã„ã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã¨æŒ‡å®šã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã¨ã®å·®åˆ†\n\n````vim\n:vertical diffsplit å·®åˆ†ã‚’å–ã‚ŠãŸã„ãƒ•ã‚¡ã‚¤ãƒ«\n````\n\n## 2ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å·®åˆ†ã‚’ãƒãƒ¼ã‚¸ã™ã‚‹\n\nVimã§ã¯ï¼Œã€Œdiffãƒ¢ãƒ¼ãƒ‰ã€ã®çŠ¶æ…‹ã§ï¼Œ2ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å·®åˆ†ã®ãƒãƒ¼ã‚¸ã‚’è¡Œã†ã“ã¨ã‚‚ã§ãã‚‹ã€‚\nã‚‚ã†ä¸€æ–¹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®å·®åˆ†ã‚’å–ã‚Šè¾¼ã‚€ã«ã¯ã€å·®åˆ†ãƒã‚¤ãƒ©ã‚¤ãƒˆã•ã‚Œã¦ã„ã‚‹å ´æ‰€ã§æ¬¡ã®ã‚³ãƒãƒ³ãƒ‰\n\n````vim\n:do\n````\n\né€†ã«ã‚‚ã†ä¸€æ–¹ã«å–ã‚Šè¾¼ã¾ã›ã‚‹ã«ã¯\n\n````vim\n:dp\n````\n\ndoã¯ã€Œdiff obtainã€ï¼Œdpã¯ã€Œdiff putã€ã¨è¦šãˆã‚‹ã€‚\n\n## æ¬¡ã®å·®åˆ†ã¸ã‚«ãƒ¼ã‚½ãƒ«ã‚’ç§»å‹•ã™ã‚‹\n\nãƒãƒ¼ãƒãƒ«ãƒ¢ãƒ¼ãƒ‰ã§ `]c` ã‚’å…¥åŠ›ã™ã‚‹ã¨æ¬¡ã®å·®åˆ†ã¸ã€`[c` ã§å‰ã®å·®åˆ†ã¸\n\n[2ã¤ã®ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®å·®åˆ†ã‚’å–ã‚‹ â€” åç„¡ã—ã®vimä½¿ã„](http://nanasi.jp/articles/howto/diff/diff_text.html)\n[2ã¤ã®ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®å·®åˆ†ã‚’ãƒãƒ¼ã‚¸ã™ã‚‹ â€” åç„¡ã—ã®vimä½¿ã„](http://nanasi.jp/articles/howto/diff/merge_diff.html)\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["vim"]},"/note/%E3%83%96%E3%83%AD%E3%82%B0%E3%81%AB%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%99%E3%82%8B":{"title":"ãƒ–ãƒ­ã‚°ã«ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¨­å®šã™ã‚‹","content":"\n\\#blog\n\nNetlifyã§ãƒ‡ãƒ—ãƒ­ã‚¤ã—ãŸã‚µã‚¤ãƒˆã«ã‚«ã‚¹ã‚¿ãƒ ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’è¨­å®šã—ãŸã„ã€‚\n\n## ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ç™ºè¡Œ\n\n[ãŠåå‰.com](https://www.onamae.com/)ã‚„[ãƒ ãƒ¼ãƒ ãƒ¼ãƒ‰ãƒ¡ã‚¤ãƒ³](https://muumuu-domain.com/) ç­‰ã‚ã‚‹ãŒãƒ ãƒ¼ãƒ ãƒ¼ãƒ‰ãƒ¡ã‚¤ãƒ³ã«ã—ãŸã€‚(Whoisæƒ…å ±å…¬é–‹ä»£è¡Œã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒç„¡æ–™ã®ãŸã‚)\n\n`ikorihn.com` ã‚’å–å¾—ã—ãŸã€‚\nã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯Whoisæƒ…å ±å…¬é–‹ä»£è¡Œã®ã¿ã‚’è¨­å®šã—ã»ã‹ã¯ä½¿ç”¨ã—ãªã„ã€‚\n\n## Netlifyã®ç‹¬è‡ªãƒ‰ãƒ¡ã‚¤ãƒ³åŒ–ã®è¨­å®š\n\nNetlifyã®å¯¾è±¡ã‚µã‚¤ãƒˆã®ãƒšãƒ¼ã‚¸ã¸ç§»å‹•ã—ã€`Set up a custom domain` ã‹ã‚‰ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’æŒ‡å®šã™ã‚‹ã€‚\n\n`blog.ikorihn.com` ã‚’æŒ‡å®šã—ãŸã¨ã“ã‚ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ãŒç™»éŒ²æ¸ˆã¿ã®ã‚ˆã†ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã§ã‚‹ã®ã§\n`Add domain` ã‚’æŠ¼ã™ã€‚\n\n![Pasted-image-20211231160203](note/Pasted-image-20211231160203.png)\n\næ¬¡ã®ç”»é¢ã§ `Check DNS Configuration` ã‚’æŠ¼ã—ã¦å‡ºã‚‹èª¬æ˜ã®é€šã‚Šã€DNSãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã§CNAMEã‚’ç™»éŒ²ã™ã‚‹\n\n![Pasted-image-20211231160919](note/Pasted-image-20211231160919.png)\n\n## ãƒ ãƒ¼ãƒ ãƒ¼ãƒ‰ãƒ¡ã‚¤ãƒ³ã®è¨­å®š\n\nã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‘ãƒãƒ« \u003e ãƒ‰ãƒ¡ã‚¤ãƒ³æ“ä½œ \u003e ãƒ ãƒ¼ãƒ ãƒ¼DNSã®ç”»é¢ã‹ã‚‰ã€\nãƒ‰ãƒ¡ã‚¤ãƒ³ã®å¤‰æ›´ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™\n\nã‚«ã‚¹ã‚¿ãƒ è¨­å®šã‚’æŠ¼ã—ã¦ã€æ³¨æ„ãŒã§ã‚‹ãŒOKã‚’æŠ¼ã™ã€‚\n\n* ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³: `blog`\n* ç¨®åˆ¥: `CNAME`\n* å†…å®¹: `***.netlify.app`\n\nã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æƒ…å ±å¤‰æ›´ã‚’æŠ¼ã—ã¦å®Œäº†ã™ã‚‹ã€‚\n\n## åæ˜ ç¢ºèª\n\nNetlifyã®ç”»é¢ã§ã€`Check DNS Configuration` ãŒæ¶ˆãˆãŸã‚‰åæ˜ ã•ã‚ŒãŸã“ã¨ã«ãªã‚Šã€ã‚µã‚¤ãƒˆãŒé–‹ã‘ã‚‹ã“ã¨ã‚‚ç¢ºèªã§ãã‚‹ã€‚\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["blog"]},"/note/%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9%E5%8A%B9%E7%8E%87%E3%81%A8%E3%83%95%E3%83%AD%E3%83%BC%E5%8A%B9%E7%8E%87":{"title":"ãƒªã‚½ãƒ¼ã‚¹åŠ¹ç‡ã¨ãƒ•ãƒ­ãƒ¼åŠ¹ç‡","content":"\n[ãƒ•ãƒ­ãƒ¼åŠ¹ç‡æ€§ã¨ãƒªã‚½ãƒ¼ã‚¹åŠ¹ç‡æ€§ã«ã¤ã„ã¦](https://www.slideshare.net/i2key/xpjug)\n\n* ãƒªã‚½ãƒ¼ã‚¹åŠ¹ç‡ãŒã„ã„\n  * ç¨¼åƒç‡ãŒ100%ã€æš‡ãªäººãŒã„ãªã„\n* ãƒ•ãƒ­ãƒ¼åŠ¹ç‡ãŒã„ã„\n  * æ©Ÿèƒ½ãƒªãƒªãƒ¼ã‚¹ã¾ã§ã®ãƒªãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ ãŒçŸ­ã„\n  * ä¸€ã¤ã®ã‚¿ã‚¹ã‚¯ã«è¤‡æ•°äººã§ã¨ã‚Šãã‚€\n  * ä¸€æ™‚çš„ã«æ‰‹æŒã¡ç„¡æ²™æ±°ãªäººãŒã„ã‚‹çŠ¶æ…‹\n  * ã‚¿ã‚¹ã‚¯ãŒå¾—ã‚‰ã‚Œã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®æ™‚é–“ã‚’æœ€å¤§åŒ–ã™ã‚‹\n  * ãƒšã‚¢ãƒ—ãƒ­ãƒ»ãƒ¢ãƒ–ãƒ—ãƒ­ã€ã‚¯ãƒ­ã‚¹ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒŠãƒ«ãƒãƒ¼ãƒ \n\nåŒã˜ä½œæ¥­ã«è¤‡æ•°äººã§å–ã‚Šçµ„ã‚“ã§ã‚‚ã€æ™‚é–“ã®æµªè²»ã ï¼ã£ã¦è€ƒãˆã‚‹ã®ã¯ãƒªã‚½ãƒ¼ã‚¹åŠ¹ç‡\nãƒ•ãƒ­ãƒ¼ã¨ãƒªã‚½ãƒ¼ã‚¹ã¯ãƒˆãƒ¬ãƒ¼ãƒ‰ã‚ªãƒ•ã«ãªã‚Šã‚„ã™ã„\nãƒ•ãƒ­ãƒ¼=æµã‚Œã‚’æ­¢ã‚ãšã«å°ã•ã„ã‚µã‚¤ã‚¯ãƒ«ã‚’ç´ æ—©ãå›ã™\n\nä½™è£•ãŒã‚ã‚‹çŠ¶æ…‹ã§æ©Ÿèƒ½ãƒªãƒªãƒ¼ã‚¹æ™‚æœŸã‚‚å¤‰ã‚ã‚‰ãªã„ã‚“ã ã£ãŸã‚‰ãƒ•ãƒ­ãƒ¼åŠ¹ç‡ã®ãŒã‚ˆããªã„ï¼Ÿã„ã„ã¨ã“ã‚ã°ã£ã‹ã‚Šè¨€ã†ã‘ã©ãƒ‡ãƒ¡ãƒªãƒƒãƒˆã¯ï¼ŸéŠ€ã®å¼¾ä¸¸ã¯ãªã„ã‚“ã§ã™ã‚ˆã­ï¼Ÿ\n-\u003e ã™ã¹ã¦ã®æ©Ÿèƒ½ã‚’ãƒªãƒªãƒ¼ã‚¹ã™ã‚‹ã¾ã§ã®ç¨¼åƒæ™‚é–“ã¯å¢—ãˆã‚‹ã€‚åŒã˜ã‚¿ã‚¹ã‚¯ã«è¤‡æ•°ã§å–ã‚Šçµ„ã‚€ã‚“ã ã‹ã‚‰ãã‚Œã¯ãã†ã ã‚ˆã­\nãŸã å…¨æ©Ÿèƒ½å‡ºæƒã£ã¦ã‹ã‚‰ãƒªãƒªãƒ¼ã‚¹ï¼ã˜ã‚ƒãªãã¦ä¸€ã¤ã§ããŸã‚‰ãƒªãƒªãƒ¼ã‚¹ï¼ã®ã‚¢ã‚¸ãƒ£ã‚¤ãƒ«é–‹ç™ºã®è€ƒãˆæ–¹ã ã‹ã‚‰ã€é †ç•ªã«ä¾¡å€¤ã‚’å±Šã‘ã‚‰ã‚Œã‚‹\n\nå¤§ãã„å¡Šã‚’æ¸¡ã—ã¦ã€ã‚¹ã‚³ãƒ¼ãƒ—ã‚’å‰Šã‚‹ã“ã¨ãªãå…¨éƒ¨å¿…è¦ã£ã¦ã„ã†ã®ã¯ãƒªã‚½ãƒ¼ã‚¹åŠ¹ç‡\n1stã€2ndã¨é †ã«å‡ºã—ã¦ã„ãã¾ã—ã‚‡ã†ã‚ˆã£ã¦ã„ã†ã®ã¯ãƒ•ãƒ­ãƒ¼åŠ¹ç‡\nã©ã‚“ã¨ã§ã‹ã„ã‚¢ã‚¤ãƒ†ãƒ ã‚’ã“ãªãã†ã¨ã™ã‚Œã°ç¨¼åƒã¯100%ã«ãªã‚‹ã‹ã‚‰ãƒªã‚½ãƒ¼ã‚¹åŠ¹ç‡ã¯ã‚ˆããªã‚‹ã‚ˆã€ãã‚Œã‚’é¸ã‚“ã ã‚“ã ã‹ã‚‰å½“ç„¶\n\ntoBæ¡ˆä»¶ã ã¨çµå±€ã€ä¸€ã¤ã®å®Œæˆå“ã‚’ãŠå±Šã‘ã—ã‚ˆã†ã£ã¦ãªã£ã¦ã§ã‹ã„å¡Šã«ãªã‚‹ã“ã¨ãŒå¤šã„ã‚ˆã­â€¦\nã‚¢ã‚¸ãƒ£ã‚¤ãƒ«ã¯é¡§å®¢ã®ç†è§£ã‚‚ãªã„ã¨ã§ããªã„ã£ã¦ãã†ã„ã†ã“ã¨\n\nãƒ•ãƒ­ãƒ¼åŠ¹ç‡é‡è¦–ã§é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ã‚’çµ„ã‚“ã ã‚‚ã®ã®ã€çŸ¥ã‚‰ãšè­˜ã‚‰ãšã®ã†ã¡ã«ãƒªã‚½ãƒ¼ã‚¹åŠ¹ç‡ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã—ã¦ã—ã¾ã†ã£ã¦ã„ã†ã®ã¯ã‚ˆãã‚ã‚‹\nãƒªãƒªãƒ¼ã‚¹æ—¥ãŒå›ºå®šã•ã‚Œã¦ã„ã¦ã€é€”ä¸­ã§å¤§ããªè¦ä»¶è¿½åŠ ãŒèˆã„è¾¼ã‚“ã§ãã‚‹ã¨ã€ãã†ã„ã†è€ƒãˆã«ãªã£ã¡ã‚ƒã„ãŒã¡\n\n## [ãƒ•ãƒ­ãƒ¼åŠ¹ç‡ã¨ãƒªã‚½ãƒ¼ã‚¹åŠ¹ç‡ã«ã¤ã„ã¦æ€ã†ã“ã¨ - ã‚¿ãƒãƒã‚®ãƒ—ãƒ­ã‚°ãƒ©ãƒãƒ¼ã®é›‘è¨˜](https://gaopin1534.hatenablog.com/entry/2017/12/10/003122)\n\n \u003e \n \u003e æ›°ãã€ã€Œãƒªã‚½ãƒ¼ã‚¹åŠ¹ç‡ã¯æ‚ªã§ãƒ•ãƒ­ãƒ¼åŠ¹ç‡ã“ããŒç›®æŒ‡ã™ã¹ãå§¿ã€ã§ã‚ã‚‹ã¨ã‹ã€ã€Œãƒ•ãƒ­ãƒ¼åŠ¹ç‡ã“ããŒä¾¡å€¤ã‚’æœ€å¤§é™ã«ç™ºæ®ã§ãã‚‹æ–¹æ³•ã€ã§ã‚ã‚‹ã¨ã‹ãã†ã„ã†å£°ã§ã‚ã‚‹ã€‚  \n \u003e ã“ã‚Œã¯ãƒªã‚½ãƒ¼ã‚¹åŠ¹ç‡ã¨ã„ã†ã‚³ãƒ³ã‚»ãƒ—ãƒˆã®ç†è§£ã¨ã—ã¦æ­£ã—ããªã„ã€‚\n\nã§ã™ã‚ˆã­\nã„ã„è©±ã°ã£ã‹ã‚Šèã‹ã•ã‚Œã‚‹ã—ã‚¦ã‚©ãƒ¼ã‚¿ãƒ¼ãƒ•ã‚©ãƒ¼ãƒ«ã¯æ‚ªã€ã‚¢ã‚¸ãƒ£ã‚¤ãƒ«ãŒæœ€å¼·ã£ã¦æ„Ÿã˜ã«ãªã£ã¡ã‚ƒã£ã¦åã£ã¡ã‚ƒã†ã‘ã©é•ã†ã‚ˆã­\n\n \u003e \n \u003e ã“ã®å›³ã ã‘ã‚’è¦‹ãŸäººã¯å¿…ãšã“ã†æ€ã†ã¯ãšã§ã‚ã‚‹ã€‚  \n \u003e ã€Œå…¨ã¦ã®ã‚¢ã‚¤ãƒ†ãƒ ãŒåŒã˜æœŸé–“ã§å®Œäº†ã™ã‚‹ã®ãªã‚‰ã€ãƒˆãƒ¼ã‚¿ãƒ«ã®ãƒªãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ ãŒçŸ­ããªã‚‹ãƒ•ãƒ­ãƒ¼åŠ¹ç‡ã®æ–¹ãŒè‰¯ã„ã«æ±ºã¾ã£ã¦ã„ã‚‹ã˜ã‚ƒãªã„ã‹ã€ã¨ã€‚\n\nã¾ã•ã«ã“ã‚Œã€ã“ã®å›³ã®æ›¸ãæ–¹ã¯ã‚ˆããªã„\nå®Ÿéš›ã«ã¯ãƒ•ãƒ­ãƒ¼åŠ¹ç‡ã§ã¯æ™‚é–“ã¯ã‚‚ã£ã¨ã‹ã‹ã‚‹\nä¸€ã¤ã®ã‚¢ã‚¤ãƒ†ãƒ ã¯ç´ æ—©ããƒªãƒªãƒ¼ã‚¹ã§ãã‚‹ã‘ã©\n\n \u003e \n \u003e ãƒªã‚½ãƒ¼ã‚¹åŠ¹ç‡ã¯ã€ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å…¥ã‚Œã¦æ–¹å‘è»¢æ›ã™ã‚‹ã“ã¨ã«ã¯å¼±ã„ãŒã€äºˆã‚æ±ºã‚ã‚‰ã‚ŒãŸã‚¢ã‚¤ãƒ†ãƒ ç¾¤ã‚’ã‚ˆã‚Šæ—©ãå®Œäº†ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚  \n \u003e ã‚ˆã£ã¦ã€ã„ã‚ã‚†ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‹ã®é–‹ç™ºã«å‘ã„ã¦ã„ã‚‹ã¨è¨€ãˆã‚‹ã€‚  \n \u003e ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‹ã®é–‹ç™ºã§ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå®Œäº†ã¾ã§ã‚¢ã‚¤ãƒ†ãƒ ãŒä¾¡å€¤ã‚’ç™ºæ®ã™ã‚‹å¿…è¦ãŒãªã„ãŸã‚ã€å€‹ã€…ã®ãƒªãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ ã®é•·ã•ã¯å•é¡Œã«ãªã‚‰ãªã„ã€‚\n\nç´æœŸã¨è¦ä»¶ãŒã™ã§ã«æ±ºã¾ã£ã¦ã„ã‚‹ã¨ãã«ãƒ•ãƒ­ãƒ¼åŠ¹ç‡ãŒã„ã„ã‚“ã ã£ã¦ã­ã˜è¾¼ã‚€ã®ã¯é•ã†ã‚ˆ\nã¤ã‹ã„ã©ãã¨ã„ã†ã‚‚ã®ãŒã‚ã‚‹ã®ã§\nä»®èª¬æ¤œè¨¼å‹ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§å°ã•ãä½œã£ã¦åå¿œã‚’è¦‹ãŸã„ã£ã¦ã„ã†ã¨ãã«ã¯æœ‰åŠ¹ã ã‚ˆ\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["agile"]},"/note/%E6%95%B0%E6%99%82%E9%96%93%E3%81%A7%E5%AE%8C%E5%85%A8%E7%90%86%E8%A7%A3%E3%82%8F%E3%82%8A%E3%81%A8%E3%82%B4%E3%83%84%E3%81%84Kubernetes%E3%83%8F%E3%83%B3%E3%82%BA%E3%82%AA%E3%83%B3%E3%82%92%E3%82%84%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B":{"title":"æ•°æ™‚é–“ã§å®Œå…¨ç†è§£ï¼ã‚ã‚Šã¨ã‚´ãƒ„ã„Kubernetesãƒãƒ³ã‚ºã‚ªãƒ³ï¼ï¼ã‚’ã‚„ã£ã¦ã¿ã‚‹","content":"\n[æ•°æ™‚é–“ã§å®Œå…¨ç†è§£ï¼ã‚ã‚Šã¨ã‚´ãƒ„ã„Kubernetesãƒãƒ³ã‚ºã‚ªãƒ³ï¼ï¼ - Qiita](https://qiita.com/Kta-M/items/ce475c0063d3d3f36d5d)\n\nã¡ã‚‡ã£ã¨å¤ã„ã‘ã©ä¸€é€šã‚Šä½“é¨“ã™ã‚‹ã®ã«ã‚ˆã•ãã†\n\n## ä¸‹æº–å‚™\n\ndocker-desktopã«åå‰ãŒå¤‰ã‚ã£ã¦ã„ã‚‹ã¿ãŸã„\n\nã„ããªã‚Šèº“ã„ãŸã€‚`github.com/~~` ã®æ›¸ãæ–¹ã¯deprecatedã«ãªã£ã¦ã„ãŸ\n\nhttps://kubernetes.github.io/ingress-nginx/deploy/#quick-start\n\n````shell\n$ kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v1.3.1/deploy/static/provider/cloud/deploy.yaml\n````\n\n````shell\n$ git clone git@github.com:kubernetes/examples.git\n$ vim examples/guestbook/all-in-one/frontend.yaml\n# replicasã‚’1ã«å¤‰ãˆã‚‹\n\nk apply -f ./examples/guestbook/all-in-one/guestbook-all-in-one.yaml\n````\n\n### kind: Ingress ã¯deprecated\n\nhttps://kubernetes.io/docs/reference/using-api/deprecation-guide/#ingress-v122\n\n* `networking.k8s.io/v1` API version ã«å¤‰æ›´\n* `serviceName` ã‚’ `service.name` ãªã©ç´°ã‹ã„å¤‰æ›´\n* `ingressClassName: nginx` ã¯ `kubernetes/ingress-nginx` ã§ä½œæˆã—ãŸIngressClassã‚’æŒ‡å®šã™ã‚‹\n\n````shell\n$ k get ingressclass \nNAME    CONTROLLER             PARAMETERS   AGE\nnginx   k8s.io/ingress-nginx   \u003cnone\u003e       18m\n````\n\n````yaml\napiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: guestbook-ingress\n  annotations:\n    nginx.ingress.kubernetes.io/rewrite-target: /\nspec:\n  ingressClassName: nginx\n  rules:\n  - http:\n      paths:\n      - path: /\n        pathType: Exact\n        backend:\n          service:\n            name: frontend\n            port:\n              number: 80\n````\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["Kubernetes"]},"/note/%E7%B7%AF%E5%BA%A6%E7%B5%8C%E5%BA%A6%E3%81%A72%E5%9C%B0%E7%82%B9%E9%96%93%E3%81%AE%E8%B7%9D%E9%9B%A2%E3%82%92%E8%A8%88%E7%AE%97%E3%81%99%E3%82%8B":{"title":"ç·¯åº¦çµŒåº¦ã§2åœ°ç‚¹é–“ã®è·é›¢ã‚’è¨ˆç®—ã™ã‚‹","content":"\nã„ã‚ã„ã‚ãªè¨ˆç®—å¼ãŒã‚ã‚Šã€ç²¾åº¦ã¨é€Ÿåº¦ã®ä¸€é•·ä¸€çŸ­\n[ç·¯åº¦çµŒåº¦ã‚’ç”¨ã„ãŸ3ã¤ã®è·é›¢è¨ˆç®—æ–¹æ³•](https://orsj.org/wp-content/corsj/or60-12/or60_12_701.pdf)\n[æ¸¬åœ°ç·šè·é›¢è¨ˆç®—å¼ãƒ»è¨ˆç®—ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ç²¾åº¦è©•ä¾¡ - 330k info](https://www.330k.info/essay/geodesic_distance_formula_comparison_2/)\n\n* Haversine: å®Œå…¨çƒä½“ã¨ã¿ãªã—ãŸè¨ˆç®—ã€‚Great-circle distance(å¤§å††è·é›¢)\n* Hubeny (Simple): ãƒ’ãƒ¥ãƒ™ãƒ‹ã®å¼ã®ç°¡æ˜“ç‰ˆã€‚ã‚«ã‚·ãƒŸãƒ¼ãƒ«3Dã¨ã„ã†åœ°å›³ã‚½ãƒ•ãƒˆã§ä½¿ã‚ã‚Œã¦ã„ã‚‹\n* Hubeny (Full): ãƒ’ãƒ¥ãƒ™ãƒ‹ã®å¼ã®ã‚ªãƒªã‚¸ãƒŠãƒ«ç‰ˆ\n* Vincenty: Vincentyã«ã‚ˆã‚‹å¼ã€‚å›è»¢æ¥•å††ä½“ä¸Šã®æ¸¬åœ°ç·š\n* Lambert: Lambertã«ã‚ˆã‚‹å¼ã€‚Geographical distance\n* Andoyer-Lambert: AndoyerãŒè£œæ­£ã‚’åŠ ãˆãŸã‚‚ã®ã€‚æ¸¬åœ°ç·šèˆªæµ·ç®—æ³•(Geodesic Sailing)\n* Andoyer-Lambert-Thomas: ã•ã‚‰ã«ThomasãŒè£œæ­£ã‚’åŠ ãˆãŸã‚‚ã®ã€‚\n\n## Goè¨€èªã§ã®å®Ÿè£…\n\næœ‰åæ‰€\nhttps://pkg.go.dev/github.com/golang/geo\n\n[S2 Geometryãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§éŠã‚“ã§ã¿ã‚‹ - taiyoh's memorandum](https://taiyoh.hatenablog.com/entry/2019/12/17/181928)\n\nJavaã®GeographicLibã‚’ãƒãƒ¼ãƒˆã—ãŸã‚‚ã®\nhttps://github.com/geographiclib/geographiclib-java\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["2023/03/30","Go"]},"/note/%E7%B7%AF%E5%BA%A6%E7%B5%8C%E5%BA%A6%E3%81%AE%E5%BA%A6%E5%88%86%E7%A7%92%E3%81%A8%E3%83%9F%E3%83%AA%E7%A7%92%E3%82%92%E5%A4%89%E6%8F%9B%E3%81%99%E3%82%8B":{"title":"ç·¯åº¦çµŒåº¦ã®åº¦åˆ†ç§’ã¨ãƒŸãƒªç§’ã‚’å¤‰æ›ã™ã‚‹","content":"\nhttp://www.geosense.co.jp/map/tool/geoconverter.php\n[ç·¯åº¦çµŒåº¦å¤‰æ›ãƒ„ãƒ¼ãƒ«](https://www.ipentec.com/utils/LatLongPlot/LatLongConvert.aspx)\n[æ—¥æœ¬ã®æ±è¥¿å—åŒ—ç«¯ç‚¹ã®çµŒåº¦ç·¯åº¦ | å›½åœŸåœ°ç†é™¢](https://www.gsi.go.jp/KOKUJYOHO/center.htm)\n[æ—¥æœ¬æ¸¬åœ°ç³»ã®ãƒŸãƒªç§’ã‚’ä¸–ç•Œæ¸¬åœ°ç³»ã®åº¦ã«å¤‰æ›ã™ã‚‹è¨ˆç®— - Qiita](https://qiita.com/wildspin/items/02ef89f762d97965337c)\n[ç·¯åº¦çµŒåº¦ ï¼å˜ä½å¤‰æ›ï¼](http://jkl.sakura.ne.jp/labs/archives/27)\n\n## ãƒŸãƒªç§’ã‹ã‚‰åº¦ã¸ã®å¤‰æ›\n\nå…ƒãƒ‡ãƒ¼ã‚¿ã‚’3,600,000ã§å‰²ã‚‹\n\n128544000 -\u003e 35.70666667  \n503329984 -\u003e 139.8138844\n\n## ä¸–ç•Œæ¸¬åœ°å¤‰æ›\n\n````\nlat = jp_lat - jp_lat * 0.00010695 + jp_lon * 0.000017464 + 0.0046017;\nlon = jp_lon - jp_lat * 0.000046038 - jp_lon * 0.000083043 + 0.010040;\n````\n\n## DMSå½¢å¼\n\nãƒ»åº¦/åˆ†/ç§’.ç§’è¡¨è¨˜(åº¦/åˆ†/ãƒŸãƒªç§’è¡¨è¨˜)ã€€ç§’ã®è¡¨ç¾ã¯10é€²\n35/39/15.152(35/39/15152)ã€€139/45/27.932(139/45/27932)\n\nãƒ»ãƒŸãƒªç§’æ›ç®—\n128355152ã€€503127932\nãƒŸãƒªç§’å˜ä½â†’åº¦å˜ä½ã€€ã€€3600000ã§å‰²ã‚‹\n\n## DEGå½¢å¼(Degree) dddd.ddddd\n\nãƒ»åº¦.åº¦(10é€²)ã€ç·¯åº¦çµŒåº¦ã‚’å˜ä½â€åº¦â€ã®ã¿ã§è¡¨ç¾\n136.6694786\n\nDEGã¨DMSã®å¤‰æ›\n136.6694786ã‚’136Â°40â€²10.123ã«å¤‰æ›\n\n136ã¨0.6694786ã«åˆ†ã‘ã‚‹\n0.6694786ã«60ã‚’æ›ã‘ã‚‹\n40.168716 â†’ 40åˆ†\n0.168716ã«60ã‚’æ›ã‘ã‚‹\n10.12296 â†’ 10.12296ç§’\n\n(åº¦ * 3600 + åˆ† * 60 + ç§’) * 1000ã€€ï¼ã€€åˆ†\n\nphpã ã¨ãƒ»ãƒ»ãƒ»ã“ã‚“ãªæ„Ÿã˜ï¼Ÿ\n$Japan_Lat\\[$i\\] = (int)$JapanLat\\[$i\\] * 3600 + (int)( ($JapanLat\\[$i\\] â€“ (int)$JapanLat\\[$i\\]) * 60 ) \\*60 + ( (int)( ($JapanLat\\[$i\\] â€“ (int)$JapanLat\\[$i\\]) * 60 ) â€“ ( ($JapanLat\\[$i\\] â€“ (int)$JapanLat\\[$i\\]) * 60 ) ) * 60;\n$Japan_Lng\\[$i\\] = (int)$JapanLng\\[$i\\] * 3600 + (int)( ($JapanLng\\[$i\\] â€“ (int)$JapanLng\\[$i\\]) * 60 ) \\*60 + ( (int)( ($JapanLng\\[$i\\] â€“ (int)$JapanLng\\[$i\\]) * 60 ) â€“ ( ($JapanLng\\[$i\\] â€“ (int)$JapanLng\\[$i\\]) * 60 ) ) * 60;\n\nã•ã‚‰ã«ãƒŸãƒªç§’ã«å¤‰æ›ã™ã‚‹\n136Â°40â€²10.123\n136+40/60+10/(60*60)+123/(60*60\\*60)\n\nDMSã‹ã‚‰DEGã¸ã®å¤‰æ›\n136Â°40â€²10.123ã‚’136.6694786ã«å¤‰æ›\n$lng = spilit(â€˜/â€™,â€™ï¼„LNGâ€™);\n$lng\\[0\\] + ( $lng\\[1\\] + ( $lng\\[2\\] / 60 ) ) / 60\n\n$lat = spilit(â€˜/â€™,â€™ï¼„LATâ€™);\n$lat\\[0\\] + ( $lat\\[1\\] + ( $lat\\[2\\] / 60 ) ) / 60\n\næ¸¬åœ°ç³»å¤‰æ› ã“ã‚Œã¯ç°¡æ˜“è¨ˆç®—ã§ã€èª¤å·®ãŒç™ºç”Ÿã—ã¾ã™ã€‚\nï¼œæ—¥æœ¬æ¸¬åœ°ç³»â‡’ä¸–ç•Œæ¸¬åœ°ç³»ï¼\nä¸–ç•Œæ¸¬åœ°ç³»ç·¯åº¦ = æ—¥æœ¬æ¸¬åœ°ç³»ç·¯åº¦ â€“ 0.00010695 * æ—¥æœ¬æ¸¬åœ°ç³»ç·¯åº¦ + 0.000017464 * æ—¥æœ¬æ¸¬åœ°ç³»çµŒåº¦ + 0.0046017\nä¸–ç•Œæ¸¬åœ°ç³»çµŒåº¦ = æ—¥æœ¬æ¸¬åœ°ç³»çµŒåº¦ â€“ 0.000046038 * æ—¥æœ¬æ¸¬åœ°ç³»ç·¯åº¦ â€“ 0.000083043 * æ—¥æœ¬æ¸¬åœ°ç³»çµŒåº¦ + 0.010040\nï¼œä¸–ç•Œæ¸¬åœ°ç³»â‡’æ—¥æœ¬æ¸¬åœ°ç³»ï¼\næ—¥æœ¬æ¸¬åœ°ç³»ç·¯åº¦ = ä¸–ç•Œæ¸¬åœ°ç³»ç·¯åº¦ + 0.00010696 * ä¸–ç•Œæ¸¬åœ°ç³»ç·¯åº¦ â€“ 0.000017467 * ä¸–ç•Œæ¸¬åœ°ç³»çµŒåº¦ â€“ 0.0046020\næ—¥æœ¬æ¸¬åœ°ç³»çµŒåº¦ = ä¸–ç•Œæ¸¬åœ°ç³»çµŒåº¦ + 0.000046047 * ä¸–ç•Œæ¸¬åœ°ç³»ç·¯åº¦ + 0.000083049 * ä¸–ç•Œæ¸¬åœ°ç³»çµŒåº¦ â€“ 0.010041\n\næ—¥æœ¬æ¸¬åœ°ç³»ï¼ˆTokyo Datumï¼‰ã€å˜ä½ã¯ç§’ã€ãƒŸãƒªç§’ã¯å°æ•°ç‚¹ä»¥ä¸‹2æ¡ä»¥å†…ã§æŒ‡å®šã™ã‚‹ã“ã¨ã€‚\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["coord"]},"/note/%E8%A8%98%E4%BA%8B%E3%83%A1%E3%83%A2-ZOZOTOWN%E3%81%AEGo%E8%A8%80%E8%AA%9E%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E3%83%9E%E3%82%A4%E3%82%AF%E3%83%AD%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E9%96%8B%E7%99%BA%E3%81%AE%E5%85%B1%E9%80%9A%E8%A6%8F%E7%B4%84%E3%82%92%E5%AE%88%E3%82%8B%E3%81%9F%E3%82%81%E3%81%AE%E5%8F%96%E3%82%8A%E7%B5%84%E3%81%BF":{"title":"è¨˜äº‹ãƒ¡ãƒ¢ ZOZOTOWNã®Goè¨€èªã«ãŠã‘ã‚‹ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹é–‹ç™ºã®å…±é€šè¦ç´„ã‚’å®ˆã‚‹ãŸã‚ã®å–ã‚Šçµ„ã¿","content":"\n* [ZOZOTOWNã®Goè¨€èªã«ãŠã‘ã‚‹ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹é–‹ç™ºã®å…±é€šè¦ç´„ã‚’å®ˆã‚‹ãŸã‚ã®å–ã‚Šçµ„ã¿ - ZOZO TECH BLOG](https://techblog.zozo.com/entry/zozo-microservice-conventions-in-golang)\n  * é–‹ç™ºãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ç”¨æ„ã—ã¦ãŠã„ã¦ã€å„ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ãŒæœ€ä½é™å®ˆã£ã¦æ¬²ã—ã„è¦ç´„ã‚’å®ˆã‚‰ã›ã‚‹\n  * ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å…±é€šè¦ç´„ã®å®Ÿè£…ä¾‹ã¨ã—ã¦æ¬¡ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚\n    * ãƒˆãƒ¬ãƒ¼ã‚¹\n    * ãƒ˜ãƒƒãƒ€ãƒ¼å‡¦ç†\n    * èªè¨¼\n  * å¿…ãšå‡ºåŠ›ã—ã¦ã»ã—ã„é …ç›®ã«ã¤ã„ã¦ã¯ãƒ­ã‚¬ãƒ¼ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œã£ã¦ãŠã„ã¦å…±é€šåŒ–ã™ã‚‹ã®ã‚ã‚Šã ã­\n  * ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¹ã‚³ãƒ¼ãƒ—å…¨ä½“ã§ä½¿ã„ãŸã„ã‚‚ã®ã¯contextã«å…¥ã‚Œã¦ãŠãã®ãŒã‚ˆã•ã’\n\n````go\nfunc RequestMiddleware(next http.Handler) http.Handler {\n    return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n        ctx := r.Context()\n        if userAgent := r.Header.Get(constant.HeaderKeyForwardedUserAgent); userAgent != \"\" {\n            ctx = setForwardedUserAgent(ctx, userAgent)\n        }\n        if userIP := r.Header.Get(constant.HeaderKeyUserIP); userIP != \"\" {\n            ctx = setUserIPAddress(ctx, userIP)\n        }\n        if traceID := r.Header.Get(constant.HeaderKeyZozoTraceID); traceID != \"\" {\n            ctx = SetTraceID(ctx, traceID)\n        }\n        if uid := r.Header.Get(constant.HeaderKeyZozoUID); uid != \"\" {\n            ctx = setUID(ctx, uid)\n        }\n        if xForwardedFor := r.Header.Get(constant.HeaderKeyXForwardedFor); xForwardedFor != \"\" {\n            ctx = setXForwardedFor(ctx, xForwardedFor)\n        }\n        if r.RemoteAddr != \"\" {\n            ctx = setRemoteAddress(ctx, r.RemoteAddr)\n        }\n        next.ServeHTTP(w, r.WithContext(ctx))\n    })\n}\n````\n\n````go\nfunc setHeaders(ctx context.Context, request *http.Request) error {\n    if encodedInternalIDToken, err := middleware.GetEncodedInternalIDToken(ctx); err == nil {\n        request.Header.Set(constant.HeaderKeyZozoInternalIDToken, encodedInternalIDToken)\n    }\n    if ipAddress, err := middleware.GetUserIPAddress(ctx); err == nil {\n        request.Header.Set(constant.HeaderKeyUserIP, ipAddress)\n    }\n    if userAgent, err := middleware.GetForwardedUserAgent(ctx); err == nil {\n        request.Header.Set(constant.HeaderKeyForwardedUserAgent, userAgent)\n    }\n    if traceID, err := middleware.GetTraceID(ctx); err == nil {\n        request.Header.Set(constant.HeaderKeyZozoTraceID, traceID)\n    }\n    if uid, err := middleware.GetUID(ctx); err == nil {\n        request.Header.Set(constant.HeaderKeyZozoUID, uid)\n    }\n    if apiClient, err := middleware.GetAPIClient(ctx); err == nil {\n        request.Header.Set(constant.HeaderKeyAPIClient, apiClient)\n    }\n    if xForwardedFor, err := middleware.GetXForwardedFor(ctx); err == nil {\n        if remoteAddr, err := middleware.GetRemoteAddress(ctx); err == nil {\n            host, _, e := net.SplitHostPort(remoteAddr)\n            if e != nil {\n                return xerrors.Errorf(\"split remote address: %v\", e)\n            }\n            request.Header.Set(constant.HeaderKeyXForwardedFor, xForwardedFor+\", \"+host)\n        }\n    }\n    return nil\n}\n````\n\n \u003e \n \u003e å½“åˆã¯ã‚µãƒ¼ãƒ“ã‚¹æ¯ã«ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹æ–¹å¼ã§ã—ãŸãŒã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–‹å§‹æ™‚ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚³ãƒ¼ãƒ‰ãŒã‚³ãƒ”ãƒ¼ã•ã‚Œã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®å¤‰æ›´ã‚’ã‚µãƒ¼ãƒ“ã‚¹å´ã§å–ã‚Šè¾¼ã‚€é‹ç”¨ã‚’æƒ³å®šã—ã¦ã„ã¾ã—ãŸã€‚ ã—ã‹ã—åˆ©ç”¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒå¢—ãˆã‚‹ã¨ãã‚Œãã‚Œã«åæ˜ ã—ã¦ã‚‚ã‚‰ã†æ‰‹é–“ã€å®Ÿè£…ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¯ã«åæ˜ ã®æœ‰ç„¡ãŒåˆ¥ã‚Œã‚‹ãªã©é‹ç”¨ã®æ‰‹é–“ï¼ˆè² è·ï¼‰ãŒæ‡¸å¿µã•ã‚Œã¾ã—ãŸã€‚\n\nã‚ã‹ã‚‹\n\n \u003e \n \u003e SDKåŒ–ã™ã‚‹ã“ã¨ã§æ©Ÿèƒ½ã®ã¤ãªãŒã‚ŠãŒã‚ã‹ã‚Šã¥ã‚‰ããªã£ãŸã‚Šã€ã‚¤ãƒ³ãƒãƒ¼ãƒˆã®æ‰‹é–“ãŒå¢—ãˆãŸã‚Šã¨éšœå£ãŒã‚¼ãƒ­ãªã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ ãã“ã§ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä½ç½®ä»˜ã‘ã‚’SDKã®åˆ©ç”¨æ–¹æ³•ã‚’ç¤ºã—ãŸã‚µãƒ³ãƒ—ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨æ”¹ã‚ã‚‹ã“ã¨ã§SDKã®ç†è§£ãŒé€²ã‚€ã‚ˆã†ã«ã—ã€å„ã‚µãƒ¼ãƒ“ã‚¹ã«å±•é–‹ã—ã‚„ã™ãã—ã¦ã„ã¾ã™ã€‚\n\nãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã—ã¦ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¦ã‚‚ã‚‰ã†ã®ãŒè‰¯ã•ã’ã§ã€ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¯ãƒ¢ãƒ‡ãƒ«ã‚±ãƒ¼ã‚¹ã¿ãŸã„ãªæ„Ÿã˜ã«ã™ã‚‹\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["Go","article"]},"/note/%E8%B2%A0%E8%8D%B7%E8%A9%A6%E9%A8%93-k6%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6":{"title":"è² è·è©¦é¨“ k6ã«ã¤ã„ã¦","content":"\n[locust](Locust.md) ã‚’ä½¿ã£ã¦ã„ã‚‹ãŒã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒã‚ã¾ã‚Šã‚ˆããªãã¦slaveã‚’èµ·å‹•ã—ãªã„ã¨ã„ã‘ãªã„ã®ãŒå¾®å¦™ã«æ€ã£ãŸã®ã§ä»–ã®ãƒ„ãƒ¼ãƒ«ãŒãªã„ã‹ã‚’èª¿ã¹ã¦ã¿ãŸã€‚\nè¦ä»¶ã¨ã—ã¦ã¯ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒé«˜ãã¦ãƒ‡ãƒ—ãƒ­ã‚¤ãŒç°¡å˜ãªã“ã¨\n\n[k6](https://k6.io) ãŒè‰¯ã•ãã†ã ã£ãŸã€‚\n\n[è² è·ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ« K6 ã«ã¤ã„ã¦èª¿ã¹ã¦ã¿ãŸ | sreake.com | æ ªå¼ä¼šç¤¾ã‚¹ãƒªãƒ¼ã‚·ã‚§ã‚¤ã‚¯](https://sreake.com/blog/learn-about-k6/)\n[k6ä½¿ã£ãŸã‚‰ä»Šã¾ã§ã§ä¸€ç•ªè² è·ãƒ†ã‚¹ãƒˆãŒæ—ã£ãŸ - Qiita](https://qiita.com/hajimeni/items/40c0fd6a86e758be43d5#%E9%A0%85%E7%9B%AE)\n[k6ã§å§‹ã‚ã‚‹è² è·ãƒ†ã‚¹ãƒˆ](https://zenn.dev/shorter/articles/e52c0047c4f0c5)\n\n## ãƒ­ãƒ¼ã‚«ãƒ«ã§å‹•ã‹ã™\n\nãƒ­ãƒ¼ã‚«ãƒ«ã«è² è·è©¦é¨“å¯¾è±¡ã®ã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¦ã‚‹\n\n````go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"log\"\n\t\"net/http\"\n)\n\nfunc main() {\n\thttp.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n\t\tfmt.Fprintf(w, \"Hello\")\n\t})\n\tlog.Fatal(http.ListenAndServe(\":3000\", nil))\n}\n````\n\n````shell\ngo run main.go\n````\n\n### Dockerä¸Šã§å‹•ã‹ã™\n\nk6ã‚’brewç­‰ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‚‚ã‚ˆã„ãŒã€dockerã§å®Ÿè¡Œã—ã¦ã¿ã‚‹ã€‚\n\n`script.js` ã‚’ä½œæˆ\n\n````javascript\nimport http from 'k6/http';\n\nexport default function () {\n  http.get('http://host.docker.internal:8080/');\n}\n````\n\nã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’pull\n\n````shell\ndocker pull grafana/k6\n````\n\nå®Ÿè¡Œ\n\n````shell\ndocker run --rm -i grafana/k6 run - \u003ck6s_test.js\n````\n\nVU(å®Ÿè¡Œãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°)ã€duration(å®Ÿè¡Œæ™‚é–“)ã‚’æŒ‡å®šã™ã‚‹å ´åˆ\n\n````shell\ndocker run --rm -i grafana/k6 run --vus 10 --duration 30s - \u003ck6s_test.js\n````\n\n## Kubernetesä¸Šã§å‹•ã‹ã™\n\n[Running distributed k6 tests on Kubernetes](https://k6.io/blog/running-distributed-tests-on-k8s/)\n\nã“ã‚Œã®é€šã‚Šã«ã‚„ã‚Œã°ã§ãã‚‹\n\n````shell\ngit clone https://github.com/grafana/k6-operator \u0026\u0026 cd k6-operator\nkubectl config get-contexts\nmake deploy \n````\n\n````javascript\nimport http from 'k6/http';\nimport { check } from 'k6';\n\nexport const options = {\n  stages: [\n    { target: 200, duration: '30s' },\n    { target: 0, duration: '30s' },\n  ],\n};\n\nexport default function () {\n  const result = http.get('https://test-api.k6.io/public/crocodiles/');\n  check(result, {\n    'http response status code is 200': result.status === 200,\n  });\n}\n````\n\n````shell\nkubectl create configmap crocodile-stress-test --from-file /path/to/our/test.js\n````\n\n````yaml\napiVersion: k6.io/v1alpha1\nkind: K6\nmetadata:\n  name: k6-sample\nspec:\n  parallelism: 4\n  script:\n    configMap:\n      name: crocodile-stress-test\n      file: test.js\n````\n\n````shell\nkubectl apply -f /path/to/our/k6/custom-resource.yml\n````\n\nãã†ã„ãˆã°Locustã«ã‚‚Helm ChartãŒã‚ã£ãŸ\n\u003chttps://github.com/deliveryhero/helm-charts/tree/master/stable/locust\u003e\n\n## ãã®ä»–\n\n* \u003chttps://github.com/grafana/k6-jslib-aws\u003e ã§S3ã®æ“ä½œãŒã§ãã‚‹\n* influxdbã«ãƒ‡ãƒ¼ã‚¿ã‚’è»¢é€ã—ã¦Grafanaã§è¦‹ã‚‹\n* \n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["loadtest"]},"/note/AWS":{"title":"AWS","content":"\n\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["AWS"]},"/note/AWS-Dev-Day-2022-1109-1110":{"title":"AWS Dev Day 2022 1109-1110","content":"\n## EKS on Fargate ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ã® â€˜æ¬¡ã®3å¹´â€™ ã‚’æ”¯ãˆã‚‹ãŸã‚ã®ã‚¤ãƒ³ãƒ•ãƒ©æŠ€è¡“\n\nmBaaSã‹ã‚‰EKS on Fargateã«ç§»è¡Œã—ãŸ\n\n* Go\n* gRPCã€Protocol Buffers\n* ã‚µãƒ¼ãƒãƒ¼ç®¡ç†ã—ãŸããªã„ã®ã§Fargate\n* Aurora Serverless\n* AWS Cloud Development Kit (CDK)\n* GitHub Actions\n* ArgoCD\n\nãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹åŒ–ã¯ã—ã¦ã„ãªã„ã®ã«EKSä½¿ã†ãƒ¡ãƒªãƒƒãƒˆï¼Ÿ\n\n* k8sã®ã‚¨ã‚³ã‚·ã‚¹ãƒ†ãƒ ã«ä¹—ã£ã‹ã‚‹\n* æ§‹ç¯‰ã§ãã¦ã—ã¾ãˆã°é‹ç”¨ã¯å¤§å¤‰ã§ã¯ãªã„\n\n### AWS CDK\n\n* è„±yaml TypeScriptã‚„Pythonãªã©ã‚³ãƒ¼ãƒ‰ã§æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã‚‹\n* https://github.com/aws-quickstart/cdk-eks-blueprints ã‚’å…ƒã«ã™ã‚‹ã¨Well-ArchitectedãªEKSã‚’æ§‹ç¯‰ã§ãã‚‹\n\n### gRPC\n\n* ALBé–¢é€£ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’gRPCå‘ã‘ã«ã™ã‚‹\n* ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯ã¸ã®å¿œç­”ã‚’ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ä½œã‚‹\n\n### Fargateç”¨ã®Deployment\n\n* 1 Pod = 1 Fargate Node\n* Daemon Setã¯æœªå¯¾å¿œ\n* Gravitonãƒ—ãƒ­ã‚»ãƒƒã‚µæœªå¯¾å¿œ\n* ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆç®¡ç†ã®ã‚¹ãƒãƒ¼ãƒˆãªè§£æ±ºç­–ãŒç”¨æ„ã•ã‚Œã¦ã„ãªã„\n* Secrets Store CSI Driverã¯Daemon Setã®ä½¿ãˆãªã„Fargateã§ã¯ä½¿ãˆãªã„\n* External Secrets Operatorã‚’æ¡ç”¨\n\n## NewsPicksã®ã€Œæœ€é«˜ã®é–‹ç™ºè€…ä½“é¨“ã€ã¸ã®æŒ‘æˆ¦ ã€œAmazon ECSã«ã‚ˆã‚‹å…¨é¢ã‚³ãƒ³ãƒ†ãƒŠåŒ–ã®è»Œè·¡ã€œ\n\n5,6äººã®SREãƒãƒ¼ãƒ ã§ç¤¾å†…å…¨ä½“ã®SREãªã®ã†ã¡ã¨åŒã˜ã \n\nã‚‚ã¨ã‚‚ã¨EC2(Auto Scaling Group)ã§é‹ç”¨ã—ã¦ã„ãŸãŒç®¡ç†ãŒå¤§å¤‰\nã‚³ãƒ³ãƒ†ãƒŠåŒ–ã—ã¦ECSç®¡ç†ã—ãŸã„\n\nAWS CDKã‚’TypeScriptã§æ›¸ã„ãŸ\nConstructã¨ã„ã†æ¦‚å¿µãŒã‚ã£ã¦ã€ã‚¤ãƒ³ãƒ•ãƒ©ã®æ§‹æˆã‚’éƒ¨å“åŒ–ã—ã¦å†åˆ©ç”¨ã§ãã‚‹\nå˜ä½“ãƒ†ã‚¹ãƒˆã‚‚æ›¸ã‘ã‚‹\n\nEC2ã¨ECSã‚’ä¸¦è¡Œç¨¼å‹•\nALBã§æŒ¯ã‚Šåˆ†ã‘\nãƒªã‚¹ãƒŠãƒ¼ãƒ«ãƒ¼ãƒ«ã§ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚°ãƒ«ãƒ¼ãƒ—ã®é‡ã¿ã‚’èª¿æ•´ã—ã¦æ®µã€…ECSã«å¤‰ãˆã¦ã„ã\n\nCodeDeployã§ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’è¡Œã£ã¦ã„ãŸ\nchat opsã§ã€Lambdaã‚’å©ã„ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸ\n\n## AWS CDKã§ECS on Fargateã®CI/CDã‚’å®Ÿç¾ã™ã‚‹éš›ã®ç†æƒ³ã¨ç¾å®Ÿ\n\nECSã¨CDKã®Blue/Greenãƒ‡ãƒ—ãƒ­ã‚¤ãŒå½“æ™‚ã¯ä¸å®‰å®šã ã£ãŸã®ã§ãƒ­ãƒ¼ãƒªãƒ³ã‚°ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’é¸æŠ\nã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚‚å¤šã„\n\nECSãƒ‡ãƒ—ãƒ­ã‚¤é«˜é€ŸåŒ–ã®æ‰‹æ³•ã¯ã„ãã¤ã‹ã‚ã‚‹\nAWS SDKã§ã¯hotswap deploymentãŒã‚ã‚‹\nhotswapã§ã¯ä¸€æ™‚çš„ã«ã‚¿ã‚¹ã‚¯æ•°ãŒ0ã«ãªã‚‹ã®ã§æ¤œè¨¼ã§ã—ã‹ä½¿ãˆãªã„\n\nCDK + ECS on Fargateã®è‰¯è³ªãªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¯ã‚ã‚‹\n\ncdk-ecs-deploymentã‹ã‚«ã‚¹ã‚¿ãƒ ãƒªã‚½ãƒ¼ã‚¹+CodeBuildãŒæœ‰åŠ›\n\n## ï¼’ï¼‘å¹´å¤ãƒ»ï¼’ï¼’å¹´å†¬ã®å›½éš›çš„ã‚¹ãƒãƒ¼ãƒ„å¤§ä¼šã®å ±é“ã‚’ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹åŒ–ã§ä¹—ã‚Šè¶ŠãˆãŸï¼\n\næ™‚äº‹é€šä¿¡ç¤¾\nã‚ªãƒªãƒ³ãƒ”ãƒƒã‚¯ã£ã¦ãƒ¯ãƒ¼ãƒ‰ã¯å‹æ‰‹ã«ä½¿ã£ã¡ã‚ƒã„ã‘ãªã„ã‚“ã ã£ã‘w\n\n30,000PV/ç§’ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«è€ãˆã‚‹è² è·è€æ€§\nLambdaã®ãƒãƒ¼ã‚¹ãƒˆåŒæ™‚å®Ÿè¡Œæ•°ãŒä¸Šé™ã‚’è¶…ãˆãŸå ´åˆã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°\n\nè¨˜è€…ã€ã‚«ãƒ¡ãƒ©ãƒãƒ³ã€ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‹ã‚‰ã®æƒ…å ±ã‚’å—ä¿¡ -\u003e CMSã«æ ¼ç´ -\u003e Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§è¡¨ç¤ºã€é¡§å®¢ã‚µãƒ¼ãƒãƒ¼ã«é…ä¿¡\n\n### PHP Symfonyã‚’ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹åŒ–\n\nServerless Framework\nã‚¹ãƒ‘ã‚¤ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ãŒç™ºç”Ÿã—ã‚„ã™ã„ã‚·ã‚¹ãƒ†ãƒ ã§ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã‹ã‚‰è§£æ”¾ã•ã‚Œã‚‹ãŸã‚ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹åŒ–ã—ãŸã‹ã£ãŸ\nAuto Scalingã§ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã™ã‚‹ã®ã‚‚é›£ã—ã„\n\n### [LamdbaEdge](note/LamdbaEdge.md) ã‚’ç”¨ã„ãŸ [CloudFront](note/CloudFront.md) ã§ã®å¿œç­”æ€§èƒ½æ”¹å–„\n\nã‚­ãƒ£ãƒƒã‚·ãƒ¥ç”¨ã®S3ãƒã‚±ãƒƒãƒˆã‚’é…ç½®ã™ã‚‹\nOrigin Requestæ™‚ã«å®Ÿè¡Œã™ã‚‹ [LamdbaEdge](note/LamdbaEdge.md)\nUserãŒ [CloudFront](note/CloudFront.md) ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹ã¨ [LamdbaEdge](note/LamdbaEdge.md) ã§S3ãƒã‚±ãƒƒãƒˆã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‹Webã‚¢ãƒ—ãƒªã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’å–å¾—ã—è¿”ã™\n\n### å®Ÿè¡ŒçŠ¶æ…‹ã®å¯è¦–åŒ– [Lambda](note/AWS%20Lambda.md) ã‹ã‚‰ [Step Functions](note/Step%20Functions.md) ã¸ã®ç§»è¡Œ\n\nä¸€å®šæ¡ä»¶ã®ãƒªãƒˆãƒ©ã‚¤ã€çŠ¶æ…‹ã«ã‚ˆã‚‹æ¡ä»¶åˆ†å²ã€ä¾‹å¤–ã‚„ã‚¨ãƒ©ãƒ¼åˆ¶å¾¡\n1ã¤ã®Lambdaã§å®Ÿè£…ã—ãŸã¨ãã«å®Ÿè¡ŒçŠ¶æ…‹ãŒè¦‹ãˆã¥ã‚‰ã„ã€ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã«å¼•ã£ã‹ã‹ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹\n\n### [AWS Lambda](note/AWS%20Lambda.md) ã®ãƒãƒ¼ã‚¹ãƒˆåŒæ™‚å®Ÿè¡Œæ•°ãŒä¸Šé™ã«é”ã—ãŸå ´åˆã®å¯¾å‡¦\n\nã‚¯ã‚¦ã‚©ãƒ¼ã‚¿å¼•ãä¸Šã’ã§ã‚‚ãƒãƒ¼ã‚¹ãƒˆåˆ¶é™ã®åˆæœŸå€¤ã¯ä¸Šé™ç·©å’Œã§ããªã„\nåŒæ™‚å®Ÿè¡Œæ•°ã‚’å¼•ãä¸Šã’ã¦ã„ã¦ã‚‚ã€çªç™ºçš„ã«å¢—ãˆãŸå ´åˆã¯ãƒãƒ¼ã‚¹ãƒˆã®åˆ¶é™ã«å¼•ã£ã‹ã‹ã‚‹\n\n* ãƒ¡ãƒ¢ãƒªã‚µã‚¤ã‚ºåˆ¥ã«å®Ÿè¡Œæ™‚é–“ã‚’è¨ˆæ¸¬ã—ã¦ã€æœ€é©ãªãƒ¡ãƒ¢ãƒªã‚’å‰²ã‚Šå½“ã¦ã‚‹\n* Lambdaã®ãƒãƒ«ãƒãƒªãƒ¼ã‚¸ãƒ§ãƒ³åŒ–\n\n## AWS Lambdaã«Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’è¼‰ã›ã‚‹\n\nãã‚‚ãã‚‚Lambdaã§Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’å‹•ã‹ã™ã®ã¯ã„ã„ã“ã¨ãªã®ã‹ï¼Ÿ\n\n* Lambdaé–¢æ•°ã®å®Ÿè£…ã¯ã‚·ãƒ³ãƒ—ãƒ«ã«\n  \n  * API Gatewayã§ANY Method / Proxy resourceã‚’ä½¿ã£ãŸãƒ¢ãƒãƒªã‚¹ã«ãªã‚ŠãŒã¡\n  * æœ€å°æ¨©é™ã®åŸå‰‡ã‚‚ç ´å£Šã•ã‚Œã‚‹\n* cold start latencyã®å¢—åŠ \n  \n  * èµ·å‹•æ™‚é–“ã«ã‹ã‘ã‚‹ã‚³ã‚¹ãƒˆã«è¦‹åˆã‚ãªã„\n* æ…£ã‚Œè¦ªã—ã‚“ã é–‹ç™ºä½“é¨“\n  \n  * ç¤¾å†…ã§ã‚‚é–‹ç™ºçµŒé¨“è€…ã®ç¢ºä¿ãŒå®¹æ˜“\n* ãƒãƒ¼ã‚¿ãƒ“ãƒªãƒ†ã‚£ã®ãŸã‚\n  \n  * ECSãªã©ã‚³ãƒ³ãƒ†ãƒŠã‚µãƒ¼ãƒ“ã‚¹ã«ç§»æ¤ãŒã—ã‚„ã™ã„\n\n### Lambdaã«WAFã‚’è¼‰ã›ã‚‹ãŸã‚ã«ã•ã‚Œã¦ããŸã“ã¨\n\n* æ¨¡å€£ä½“é¨“ã®æä¾›\n  * Chaliceãªã©\n* RuntimeåŸ‹ã‚è¾¼ã¿ç³»Adapter\n  * Serverless Java\n* Ahead-of-time Compilation\n\n#### RuntimeåŸ‹ã‚è¾¼ã¿ç³»Adapter\n\nLambda Handlerã¯eventã‚’å¼•æ•°ã«å–ã‚‹å¿…è¦ãŒã‚ã‚‹\neventã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã®gap\nHandlerã«Adapterã‚’æ··å…¥ã•ã›ã¦eventã‚’http objectã«å¤‰æ›ã—ã¦WAFã«ã‚ãŸã™\n\n* é–‹ç™ºè€…ãŒAdapterã‚’æ„è­˜ã™ã‚‹å¿…è¦ãŒã‚ã‚‹\n* handlerå†…ã«AdapterãŒå­˜åœ¨ã™ã‚‹ãŸã‚ã€Artifactã¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå¿…è¦\n* å®Œå…¨ãªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯æ©Ÿèƒ½ãŒä½¿ãˆãªã„\n* ãƒãƒ¼ã‚¿ãƒ“ãƒªãƒ†ã‚£ãŒãªã„\n\n#### Ahead-of-time Compilation(AOT)\n\nGraalVM\nAOTå‘ã‘ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã‚ã‚‹ãŸã‚ä½¿ã„æ…£ã‚ŒãŸãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§ã¯ãªã„\n\n### ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å¿…è¦ï¼Ÿ\n\nä½¿ã„æ…£ã‚ŒãŸä»¥å¤–ã®ãƒ¡ãƒªãƒƒãƒˆã¯ã‚ã‚‹ã®\nãƒªã‚¯ã‚¨ã‚¹ãƒˆå˜ä½ã®isolationã‚’æŒã¤Lambdaã§ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã‚’å‹•ã‹ã™ã¨ãã€cold startã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ã¯ç„¡è¦–ã§ããªã„\ncold startã«ãŠã‘ã‚‹ãƒªã‚½ãƒ¼ã‚¹ç¢ºä¿\n\nLambdaã¯ãƒªã‚¯ã‚¨ã‚¹ãƒˆã”ã¨ã«ç‹¬ç«‹ã—ãŸå®Ÿè¡Œç’°å¢ƒ isolation ãƒã‚¤ã‚¸ãƒ¼ãƒã‚¤ãƒãƒ¼å•é¡ŒãŒç™ºç”Ÿã—ãªã„\n\nAWS Lambda Powertools ãŒã‚·ãƒ³ãƒ—ãƒ«å®Ÿè£…ã«å¯¾ã™ã‚‹éæ©Ÿèƒ½è¦ä»¶ã«å¯¾å¿œã—ã¦ã„ã‚‹\n\nãã‚Œã§ã‚‚è¼‰ã›ãŸã„ãªã‚‰\n\n* runtimeã«ã‚ˆã‚‰ãªã„\n* ãƒ¬ã‚¤ãƒ†ãƒ³ã‚·ã¸ã®å½±éŸ¿ã‚’æœ€å°é™ã«\n* Lambdaã®ã‚¤ãƒ™ãƒ³ãƒˆå½¢å¼ã¸ã®ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã§ã‚ã‚‹\n\nã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã‚’Rustã§å®Ÿè£…ã™ã‚‹\nã‚µã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã§å®Ÿç¾\n\n### AWS Lambdaã§ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’åˆ©ç”¨ã™ã‚‹\n\nã‚µã‚¤ãƒ‰ã‚«ãƒ¼ã§ãƒ­ã‚®ãƒ³ã‚°ã€ãƒªãƒãƒ¼ã‚¹ãƒ—ãƒ­ã‚­ã‚·ãªã©\nLambda Extensionã‚’ä½¿ç”¨ã—ã¦ã€Lambdaé–¢æ•°ã‚’æ‹¡å¼µå¯èƒ½ã§ã“ã‚Œã‚’ã‚µã‚¤ãƒ‰ã‚«ãƒ¼ãƒ‘ã‚¿ãƒ¼ãƒ³ã£ã½ãä½¿ãˆã‚‹\nExtensionã‚’ã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼ã¨ã—ã¦ã€eventã‚’httpã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«å¤‰æ›ã—ã¦handlerã«ã‚ãŸã™\n\n### AWS Lambda Web Adapter\n\nLambdaã§Webã‚¢ãƒ—ãƒªã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«\nhttps://github.com/awslabs/aws-lambda-web-adapter\n\n## DMMãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹æˆ¦ç•¥ ã‚ªãƒ¼ãƒŠãƒ¼ã‚·ãƒƒãƒ—ã®è½ã¨ã—ç©´\n\n* PHPã€Javaã€JavaScriptã€Goãªã©ãªã©\n* ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã‚¹ã‚¿ãƒƒã‚¯ãŒã°ã‚‰ã°ã‚‰â€¦ã‚ã‚‹ã‚ã‚‹\n* ä»–ãƒãƒ¼ãƒ ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚°ã‚’è¦‹ã‚‹ãŸã‚ã«å„AWSã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãƒ­ã‚°é–²è¦§æ¨©é™ãŒå¿…è¦\n* å„ãƒãƒ¼ãƒ ãŒã‚ªãƒ¼ãƒŠãƒ¼ã‚·ãƒƒãƒ—ã‚’ã‚‚ã£ã¦ã„ã¦ç©¶æ¥µã«ã‚µã‚¤ãƒ­åŒ–ã—ã¦ã„ãŸ\n\nã‚µã‚¤ãƒ­åŒ–ã‚’ãªãã™ãŸã‚ã«â€¦\nå…¨ä½“æœ€é©åŒ–\nãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã‚¹ã‚¿ãƒƒã‚¯ã®çµ±ä¸€\né–‹ç™ºãƒ«ãƒ¼ãƒ«ã®æ¨™æº–åŒ–\n\nãã£ã‹ã‚ã€æŠ€è¡“é ˜åŸŸã¯ã‚ã‚‹ç¨‹åº¦æ±ºã‚ã¦ã—ã¾ã£ãŸã»ã†ãŒã„ã„ã®ã‹â€¦ã†ã¡ã¯ã‚ã‚‹ç¨‹åº¦ãã†ãªã£ã¦ã„ã‚‹ã‹ã€‚Apache + Tomcatãª\nå…¨ä½“æœ€é©åŒ–ã‚’æº€ãŸãã†ã¨ã™ã‚‹ã¨å„ãƒãƒ¼ãƒ ã®è¦ä»¶ã‚’æº€ãŸã›ãªããªã£ã¦ã—ã¾ã†\nå…±é€šã®ãƒ†ã‚¯ãƒãƒ­ã‚¸ãƒ¼ã‚¹ã‚¿ãƒƒã‚¯ã‚’æ±ºã‚ã¤ã¤ã€ã‚ªãƒ¼ãƒŠãƒ¼ã‚·ãƒƒãƒ—ã‚’ã©ã®ç¨‹åº¦æŒãŸã›ã‚‹ã‹\n\n### å…¨ä½“æœ€é©åŒ–\n\nã‚ªãƒ¼ãƒŠãƒ¼ã‚·ãƒƒãƒ—ã®è¨­è¨ˆ = ã‚¬ãƒ¼ãƒ‰ãƒ¬ãƒ¼ãƒ«\n\nAmazonã®ä¾‹\nç¤¾å†…ã«å…±é€šã®ãƒ“ãƒ«ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ã‚„ãƒ‡ãƒ—ãƒ­ã‚¤ã‚·ã‚¹ãƒ†ãƒ ãŒå­˜åœ¨ã—ã€ãã‚Œã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§æ©Ÿæ¢°çš„ã«ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã‚’æµ¸é€ã•ã›ã‚‹\n\nå…¨ä½“æœ€é©åŒ–ã‚’é€²ã‚ã‚‹ã«ã¯\nå°‚é–€ãƒãƒ¼ãƒ ãŒãƒ•ãƒ«ã‚³ãƒŸãƒƒãƒˆã—ãªã„ã¨é›£ã—ã„\nå…¨å“¡ã®æ‰¿èªã‚’å¾—ã¦ã„ãã®ã¯é›£ã—ã„ã®ã§ã‚ã‚‹ç¨‹åº¦ãƒˆãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã§é€²ã‚ã‚‹\n\næœªæ¥ã«å‘ã‘ãŸæœ€é©åŒ–ãªã®ã§ã€çŸ­æœŸçš„ã«ã¯åŠ¹ç‡ã¯ä¸‹ãŒã‚‹\n\n### SREãƒãƒ¼ãƒ ã®æœ€é©åŒ–\n\né‹ç”¨ãƒ¢ãƒ‡ãƒ«\nã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒãƒ¼ãƒ ãŒã‚¤ãƒ³ãƒ•ãƒ©ã‚‚é¢å€’è¦‹ã‚‹ä½“åˆ¶ã‹ã‚‰ã€\nSREãƒãƒ¼ãƒ ãŒå„ãƒãƒ¼ãƒ ã«å‘ã‘ã¦å¿…è¦ãªä»•çµ„ã¿ã‚’æä¾›ã—ã¦ã€å…±é€šã‚¤ãƒ³ãƒ•ãƒ©ã‚’ç”¨æ„ã™ã‚‹\n\nãƒ­ã‚°/ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®å…±é€šãƒ«ãƒ¼ãƒ«ã‚’å®šç¾©\nDatadogã‚’å°å…¥ã—ãŸ\n\nã‚ªãƒ³ãƒ—ãƒ¬ã‹ã‚‰ã‚¯ãƒ©ã‚¦ãƒ‰ã¸ã®ç§»è¡Œãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒå‹•ã„ã¦ã„ãŸ\nãã“ã«k8sã‚’å°å…¥ã—ãŸ\nãƒãƒ«ãƒã‚¯ãƒ©ã‚¦ãƒ‰ãªã®ã§AWSã§ã¯EKSã€ä»–ã®ãƒ‘ãƒ–ãƒªãƒƒã‚¯ã‚¯ãƒ©ã‚¦ãƒ‰ã§ã‚‚k8sã‚’æ§‹ç¯‰\nCDãƒ„ãƒ¼ãƒ«ã¯ArgoCDã€ã‚³ãƒ³ãƒ†ãƒŠãƒ¬ã‚¸ã‚¹ãƒˆãƒªã‚‚å…±é€š\n\n### å„ãƒãƒ¼ãƒ ã®ç‹¬ç«‹æ€§ãŒå¤±ã‚ã‚Œã‚‹\n\nå…±é€šã‚¤ãƒ³ãƒ•ãƒ©ã«çµ±ä¸€ã™ã‚‹ã¨ã€å„ãƒãƒ¼ãƒ ã®ç‹¬ç«‹æ€§ãŒå¤±ã‚ã‚Œã‚‹\n\nå…±é€šã‚¤ãƒ³ãƒ•ãƒ©ã®åˆ©ç”¨è€…ã¯å˜ä¸€ã®Gitãƒªãƒã‚¸ãƒˆãƒªã§Terraformç®¡ç†\nk8sã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã«ã¤ã„ã¦ã‚‚å˜ä¸€ãƒªãƒã‚¸ãƒˆãƒªã§ç®¡ç†\nGitHubã«ã¯ã‚³ãƒ¼ãƒ‰ã‚ªãƒ¼ãƒŠãƒ¼ã¨ã„ã†ã®ãŒã‚ã£ã¦ã€ã»ã‹ãƒãƒ¼ãƒ ã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã¯ãªã„\nãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã®ç®¡ç†ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºè€…ã®ã»ã†ã§è¡Œã£ã¦ã„ã‚‹\nSREãƒãƒ¼ãƒ ã§ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æ•´å‚™\nä»•çµ„ã¿ã‚’æä¾›ã—ã¦è‡ªç”±ã«ä½¿ã£ã¦ã‚‚ã‚‰ã†\n\n### ã‚ªãƒ¼ãƒŠãƒ¼ã‚·ãƒƒãƒ— vs å…±é€šåŒ–\n\næ€§å–„èª¬ãƒ™ãƒ¼ã‚¹ã§æ¨©é™ç®¡ç†ã—ã¦ã„ã‚‹\næŠ€è¡“ã®è©³ç´°ã‚’ã©ã“ã¾ã§éš è”½ã™ã‚‹ã‹ï¼Ÿ\n\n* k8sã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®éš è”½ kustomizeç­‰ã§é–‹ç™ºè€…ã¯å°‘ã—ã ã‘å¤‰æ›´ã™ã‚Œã°ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ã®ã‹ã€è©³ç´°ã‚’éš è”½ã™ã‚‹ã¨ç´°ã‹ã„è¦ä»¶ã‚’æº€ãŸã—ã«ãããªã‚‹\n* DMMã§ã¯éš è”½ã—ãªã„ã§é–‹ç™ºè€…ã«ç´ ã®çŠ¶æ…‹ã§ä½¿ã£ã¦ã‚‚ã‚‰ã£ã¦ã‚‹\n* è‡ªåˆ†ãŸã¡ãŒä½¿ã†æŠ€è¡“ã¯æŠ½è±¡åŒ–ã›ãšãã¡ã‚“ã¨èº«ã«ã¤ã‘ã¦ã‚‚ã‚‰ã†ã¨ã„ã†æ–¹é‡\n\né–‹ç™ºãƒãƒ¼ãƒ ãŒè§£æ±ºã—ã¦ã»ã—ã„èª²é¡Œã‚‚SREãƒãƒ¼ãƒ ã«é ¼ã£ã¦ã—ã¾ã†ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹\né–‹ç™ºè€…ãŒè‡ªç«‹ã—ã¦å¯¾å‡¦ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã‚‚ã‚‰ãŠã†ã¨ã—ã¦ã„ã‚‹\n\n### çŠ¶æ³\n\nãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯Goã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯TypeScript\nCIã€DBé¸å®šã€ã‚¯ãƒ©ã‚¦ãƒ‰é¸å®šã¯é–‹ç™ºè€…\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["2022/11/09","meetup"]},"/note/AWS-Lambda":{"title":"AWS Lambda","content":"\n\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["AWS","Lambda"]},"/note/AWS-Lambda%E3%81%A7Go%E3%81%AEWeb%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%82%92%E5%8B%95%E4%BD%9C%E3%81%95%E3%81%9B%E3%82%8B":{"title":"AWS Lambdaã§Goã®Webã‚µãƒ¼ãƒãƒ¼ã‚’å‹•ä½œã•ã›ã‚‹","content":"\n\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["Draft","AWS","Lambda","Go"]},"/note/AWS-Lambda%E3%81%A7tmp%E3%82%92%E4%BD%BF%E3%81%86%E3%81%A8%E3%81%8D%E3%81%AE%E6%B3%A8%E6%84%8F":{"title":"AWS Lambdaã§tmpã‚’ä½¿ã†ã¨ãã®æ³¨æ„","content":"\n\\#Go #Lambda\n\n\u003chttps://aws.amazon.com/jp/about-aws/whats-new/2022/03/aws-lambda-configure-ephemeral-storage/\u003e\n\u003chttps://cloud5.jp/lambda_tmp_directory/\u003e\n\n`/tmp` ã‚’ä¸€æ™‚é ˜åŸŸã¨ã—ã¦10GBã¾ã§ä½¿ã†ã“ã¨ãŒã§ãã‚‹ã€‚\nLambdaã¯ä¸€å®šæœŸé–“åŒã˜ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ãŒå†åˆ©ç”¨ã•ã‚Œã€`/tmp` é ˜åŸŸã‚‚ä½¿ã„å›ã•ã‚Œã‚‹ã€‚\nzipãƒ•ã‚¡ã‚¤ãƒ«ã‚’ `/tmp/` ã«è§£å‡ã™ã‚‹ã‚ˆã†ãªã“ã¨ã‚’ã—ãŸã¨ãæ°—ã‚’ã¤ã‘ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\nå‰å›å®Ÿè¡Œæ™‚ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ®‹ã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã®ã§ã€\n\n* ãƒ©ãƒ³ãƒ€ãƒ ãªåç§°ã§ä½œæˆã™ã‚‹\n* å‡¦ç†ãŒçµ‚ã‚ã£ãŸã‚‰å‰Šé™¤ã™ã‚‹\n\n````\nimport (\n\t\"log\"\n\t\"os\"\n)\n\nfunc createFile(text string) (*os.File, error) {\n\tf, err := os.CreateTemp(\"/tmp\", \"W020.nc\")\n\tif err != nil {\n\t\tlog.Fatalln(err)\n\t}\n\tdefer f.Close()\n\n\tf.WriteString(text)\n\n\treturn f, err\n}\n\nfunc handler() error {\n\tf, err := createFile(\"hello\")\n\tif err != nil {\n\t\treturn err\n\t}\n\n\tdefer os.Remove(f.Name())\n\n}\n````\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["Go","Lambda"]},"/note/Alacritty":{"title":"Alacritty","content":"\n[Alacritty](https://github.com/alacritty/alacritty) ã¯Rustè£½ã®é«˜é€Ÿãªã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã€‚\n\n* OpenGLã§GPUãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’ç”¨ã„ã¦æç”»ã™ã‚‹ãŸã‚ã¨ã¦ã‚‚é«˜é€Ÿ\n* ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«å¯¾å¿œã—ã¦ã„ã‚‹\n* è¨­å®šãŒã™ã¹ã¦[YAML](note/YAML.md) (`~/.config/alacritty/alacritty.yml`) ãªãŸã‚ç®¡ç†ãŒã—ã‚„ã™ã„\n  * GUIãŒãªã„ãŸã‚åˆå¿ƒè€…ã«ã¯é›£ã—ã„\n* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼ã€ã‚¿ãƒ–ãªã©ã‚‚ãªã„ã€‚[tmux](note/tmux.md) ã¨çµ„ã¿åˆã‚ã›ã¦ä½¿ã†ã®ãŒå‰æã¨ãªã£ã¦ã„ãã†ã€‚\n\n## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n\u003chttps://github.com/alacritty/alacritty/blob/master/INSTALL.md\u003e\n\n* [cargo](note/cargo.md) ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹\n* macã®å ´åˆ `brew install --cask alacritty`\n* ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ãƒ“ãƒ«ãƒ‰ã™ã‚‹\n\n[Homebrew](note/Homebrew.md) ã‚„ [cargo](note/cargo.md) ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹å ´åˆã€ terminfo ã‚„desktop entryã€manual pageã€ã‚·ã‚§ãƒ«è£œå®ŒãŒåˆ©ç”¨ã§ããªã„ãŒã€\nRustã®ç’°å¢ƒã‚’æ§‹ç¯‰ã›ãšï¼ˆcargoã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã¯å¿…è¦ï¼‰ã€ç°¡å˜ã«Alacrittyã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã€‚\n\næœ€æ–°ã‚’ä½¿ã„ãŸã„ã®ã§ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ãƒ“ãƒ«ãƒ‰ã™ã‚‹([Rust](note/Rust.md) ã‚’äº‹å‰ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠã)\n\n````bash\ngit clone https://github.com/jwilm/alacritty.git\ncd alacritty\nmake app\ncp -r target/release/osx/Alacritty.app /Applications/\n````\n\n## æ—¥æœ¬èªã®ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³å…¥åŠ›ãŒã§ããªã„\n\næ—¥æœ¬èªå…¥åŠ›ã«é›£ç‚¹ãŒã‚ã‚‹\n\n* å¤‰æ›ç¢ºå®šå‰ã®æ®µéšã ã¨ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ä¸Šã«å­—ãŒå‡ºã¦ã“ãªã„\n* å¤‰æ›ã®éš›ã«çŸ¢å°ã‚­ãƒ¼ã§é¸æŠã—ãŸã‚Šbackspaceã‚’æŠ¼ã™ã¨ã€ã‚¿ãƒ¼ãƒŸãƒŠãƒ«å´ã®æ“ä½œ(ãƒ’ã‚¹ãƒˆãƒªãƒ¼ãƒãƒƒã‚¯ã€æ–‡å­—å‰Šé™¤ãªã©)ã«ãªã£ã¦ã—ã¾ã†\n\nã“ã¡ã‚‰ã®æ–¹ãŒç›´ã—ã¦ãã‚Œã¦ã€ãƒãƒ¼ã‚¸ã•ã‚Œã¦ã„ã‚‹ã®ã§ãŠãã‚‰ã0.10.0ã§è§£æ¶ˆã•ã‚Œã¦ã„ã‚‹ã€‚\n[AlacrittyãŒæ—¥æœ¬èªå…¥åŠ›ãŒãŠã‹ã—ã„ã®ã‚’ç›´ã—ãŸ](https://komi.dev/post/2021-07-20-enabling-ime-in-alacritty/)\n\nâ€¦ã¨æ€ã£ãŸã‚‰ä¸­å›½èªã®å…¥åŠ›ã§ãƒ‡ã‚°ãƒ¬ãŒã‚ã£ãŸãŸã‚æˆ»ã£ã¦ã„ãŸã€‚é€†ã«ã„ã†ã¨ä¸­å›½èªåœã®äººã®å•é¡ŒãŒè§£æ¶ˆã•ã‚Œã‚Œã°æ—¥æœ¬èªã‚‚ç›´ã‚‹ã®ã‹ãªâ€¦ï¼Ÿ\n\u003chttps://github.com/rust-windowing/winit/pull/2119\u003e\n\n## è¨­å®š\n\n### ãƒ†ãƒ¼ãƒ\n\n\u003chttps://github.com/eendroroy/alacritty-theme\u003e ã«ãƒ†ãƒ¼ãƒãŒã¾ã¨ã¾ã£ã¦ã„ã‚‹ã€‚\n\n`git clone https://github.com/eendroroy/alacritty-theme.git` ã—ã¦ã€ `alacritty.yml` ã«ä»¥ä¸‹ã‚’è¨­å®šã™ã‚‹\n\n````yml\nimport:\n  - /path/to/alacritty-theme/themes/\u003cãƒ†ãƒ¼ãƒ\u003e.yml\n````\n\n### [True color](note/True%20color.md) ã‚’æœ‰åŠ¹ã«ã™ã‚‹\n\næœ‰åŠ¹ã«ãªã£ã¦ã„ã‚‹ã‹ç¢ºèª\n[iTerm2ã®ãƒ†ã‚¹ãƒˆç”¨ã‚³ãƒ¼ãƒ‰](https://github.com/gnachman/iTerm2/blob/master/tests/24-bit-color.sh) ã§ç¢ºèªã§ãã‚‹\n\n````bash\ncurl -s https://github.com/gnachman/iTerm2/blob/master/tests/24-bit-color.sh\n````\n\nè‰²ãŒãªã‚ã‚‰ã‹ã«ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤ºã•ã‚Œã¦ã„ã‚Œã°OKã€‚\næ®µå·®ãŒæ˜ã‚‰ã‹ã«è¦‹ã¦å–ã‚Œã‚‹å ´åˆã¯å¯¾å¿œã•ã‚Œã¦ã„ãªã„ã€‚\n\nAlacrittyã§tmux, Neovimã®True colorã‚’æœ‰åŠ¹ã«ã™ã‚‹ãŸã‚ã«ã¯ã€ãã‚Œãã‚Œä»¥ä¸‹ã®è¨­å®šãŒå¿…è¦\n\n\u003chttps://github.com/alacritty/alacritty/issues/109\u003e\n\n````yml:$HOME/.config/alacritty/alacritty.yml\nenv:\n  TERM: alacritty\n````\n\n````conf:$HOME/.tmux.conf\nset -g default-terminal \"screen-256color\"\nset-option -sa terminal-overrides ',alacritty:RGB'\n````\n\n````vim:$HOME/.config/nvim/init.vim\nset termguicolors\n````\n\n### \n\n````yml:$HOME/.config/alacritty/alacritty.yml\n# ãƒ†ãƒ¼ãƒ\nimport:\n  - ~/.config/alacritty/alacritty-theme/themes/gruvbox_material.yml\n  \nenv:\n  TERM: alacritty\n\nwindow:\n  dimensions:\n    # Alacrittyã‚’é–‹ã„ãŸã¨ãã®ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚º\n    columns: 140\n    lines: 40\n  padding:\n    # Macã ã¨è§’ãŒä¸¸ãã¦è¦‹åˆ‡ã‚Œã‚‹ãŸã‚ä½™ç™½ã‚’å…¥ã‚Œã‚‹\n    x: 8\n    y: 4\nfont:\n  normal:\n    family: \"HackGenNerd Console\"\n    style: Regular\n  bold:\n    family: \"HackGenNerd Console\"\n    style: Bold\n    family: \"HackGenNerd Console\"\n    style: Italic\n    family: \"HackGenNerd Console\"\n    style: Bold Italic\n  size: 16.0\n  \nshell:\n  # èµ·å‹•æ™‚ã«tmuxã‚’é–‹ã(ã‚»ãƒƒã‚·ãƒ§ãƒ³ãŒã™ã§ã«ã‚ã‚Œã°ã‚¢ã‚¿ãƒƒãƒã™ã‚‹)\n  program: zsh\n  args:\n    - -c\n    - \"tmux a -t 0 || tmux\"\n\nkey_bindings:\n  # modifierã‚’ä½¿ã£ãŸã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ãŒAlacrittyã«å¥ªã‚ã‚Œã‚‹ãŸã‚ã€ã‚‚ã¨ã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã§ä¸Šæ›¸ãã™ã‚‹\n  - { key: Q, mods: Control, chars: \"\\x11\" }\n  - { key: Space, mods: Control, chars: \"\\x00\" }\n  - { key: A, mods: Alt, chars: \"\\x1ba\" }\n  - { key: B, mods: Alt, chars: \"\\x1bb\" }\n  - { key: C, mods: Alt, chars: \"\\x1bc\" }\n  - { key: D, mods: Alt, chars: \"\\x1bd\" }\n  - { key: E, mods: Alt, chars: \"\\x1be\" }\n  - { key: F, mods: Alt, chars: \"\\x1bf\" }\n  - { key: G, mods: Alt, chars: \"\\x1bg\" }\n  - { key: H, mods: Alt, chars: \"\\x1bh\" }\n  - { key: I, mods: Alt, chars: \"\\x1bi\" }\n  - { key: J, mods: Alt, chars: \"\\x1bj\" }\n  - { key: K, mods: Alt, chars: \"\\x1bk\" }\n  - { key: L, mods: Alt, chars: \"\\x1bl\" }\n  - { key: M, mods: Alt, chars: \"\\x1bm\" }\n  - { key: N, mods: Alt, chars: \"\\x1bn\" }\n  - { key: O, mods: Alt, chars: \"\\x1bo\" }\n  - { key: P, mods: Alt, chars: \"\\x1bp\" }\n  - { key: Q, mods: Alt, chars: \"\\x1bq\" }\n  - { key: R, mods: Alt, chars: \"\\x1br\" }\n  - { key: S, mods: Alt, chars: \"\\x1bs\" }\n  - { key: T, mods: Alt, chars: \"\\x1bt\" }\n  - { key: U, mods: Alt, chars: \"\\x1bu\" }\n  - { key: V, mods: Alt, chars: \"\\x1bv\" }\n  - { key: W, mods: Alt, chars: \"\\x1bw\" }\n  - { key: X, mods: Alt, chars: \"\\x1bx\" }\n  - { key: Y, mods: Alt, chars: \"\\x1by\" }\n  - { key: Z, mods: Alt, chars: \"\\x1bz\" }\n\n````\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["terminal"]},"/note/Alpine%E3%81%ABglibc%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B":{"title":"Alpineã«glibcã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹","content":"\n\\#Docker\n\nAlpine Linuxã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã®ã¯ glibc ã§ã¯ãªãã¦ musl-libc ãªã®ã§ã€é©å½“ã«ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‚‚å‹•ã‹ãªã„ã¨ã„ã†ã“ã¨ãŒãŸã³ãŸã³ç™ºç”Ÿã™ã‚‹ã€‚\nä¾‹: AWS CLI v2ã€Androidã®ãƒ“ãƒ«ãƒ‰\n\n## glibcã‚’alpineã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹\n\n[sgerrand/alpine-pkg-glibc: A glibc compatibility layer package for Alpine Linux](https://github.com/sgerrand/alpine-pkg-glibc)\nã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚\nåŸºæœ¬çš„ã«ã¯READMEã®é€šã‚Šã«ã€‚\n\nalpineã«glibcã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸdockerã‚¤ãƒ¡ãƒ¼ã‚¸ãŒã‚ã‚‹ã®ã§ã€ãã®Dockerfileã‚’å‚è€ƒã«ã™ã‚‹ã¨ã‚ˆã„ã‹ã‚‚\n\n[docker-alpine-glibc/Dockerfile at master Â· Docker-Hub-frolvlad/docker-alpine-glibc](https://github.com/Docker-Hub-frolvlad/docker-alpine-glibc/blob/master/Dockerfile)\n\n2.35 ã§ã¯ãƒã‚°ãŒã‚ã‚Šã€/lib64ã«glibcã§ã¯ãªãmuslã®ã¾ã¾é…ç½®ã•ã‚Œã‚‹ã®ã§ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚‚ã®ãŒå‹•ã‹ãªã„ã“ã¨ãŒã‚ã‚‹ã€‚\nè§£æ±ºã—ã¦ã„ãªã•ãã†ãªã®ã§ã€2.34 ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä¸‹ã’ã‚‹ã“ã¨ã§å¯¾å‡¦ã€‚\n[2.35-r0: glibc compatibility regression due to removal of /lib64 Â· Issue #181 Â· sgerrand/alpine-pkg-glibc Â· GitHub](https://github.com/sgerrand/alpine-pkg-glibc/issues/181)\n\n### Alpineã§Androidãƒ“ãƒ«ãƒ‰ã™ã‚‹\n\n[GitHub - alvr/alpine-android: ğŸ‹ Small docker image for building \u0026 testing Android applications.](https://github.com/alvr/alpine-android)\n\nhttps://github.com/bell-sw/Liberica/blob/master/docker/repos/liberica-openjdk-alpine/11/Dockerfile\n\n````Dockerfile\nARG JDK_VERSION=8\nFROM amazoncorretto:${JDK_VERSION}-alpine-jdk as jdk\n\nFROM alpine:3.16\n\n# copy jdk\nARG JDK_VERSION=8\nRUN mkdir /usr/lib/jvm\nCOPY --from=jdk /usr/lib/jvm/java-${JDK_VERSION}-amazon-corretto /usr/lib/jvm/default-jvm\n\nENV ANDROID_SDK_VERSION=8512546\n\nENV LANG=C.UTF-8\nENV ANDROID_SDK_ROOT=/opt/android-sdk\nENV JAVA_HOME=/usr/lib/jvm/default-jvm\nENV PATH=$PATH:${ANDROID_SDK_ROOT}/cmdline-tools/latest/bin:${JAVA_HOME}/bin\n\nRUN apk --update add \\\n        bash \\\n        jq \\\n        curl\n\n# å‚è€ƒ: https://github.com/Docker-Hub-frolvlad/docker-alpine-glibc\n# install alpine-pkg-glibc apk and set C.UTF-8 locale as default\nRUN BASE_URL=\"https://github.com/sgerrand/alpine-pkg-glibc/releases/download\" \u0026\u0026 \\\n    VERSION=\"2.34-r0\" \u0026\u0026 \\\n    BASE_FILE=\"glibc-$VERSION.apk\" \u0026\u0026 BIN_FILE=\"glibc-bin-$VERSION.apk\" \u0026\u0026 I18N_FILE=\"glibc-i18n-$VERSION.apk\" \u0026\u0026 \\\n    wget -q -O /etc/apk/keys/sgerrand.rsa.pub https://alpine-pkgs.sgerrand.com/sgerrand.rsa.pub \u0026\u0026 \\\n    wget \"$BASE_URL/$VERSION/$BASE_FILE\" \"$BASE_URL/$VERSION/$BIN_FILE\" \"$BASE_URL/$VERSION/$I18N_FILE\" \u0026\u0026 \\\n    apk add --no-cache \"$BASE_FILE\" \"$BIN_FILE\" \"$I18N_FILE\" \u0026\u0026 \\\n    rm \"/etc/apk/keys/sgerrand.rsa.pub\" \u0026\u0026 \\\n    /usr/glibc-compat/bin/localedef --force --inputfile POSIX --charmap UTF-8 \"$LANG\" || true \u0026\u0026 \\\n    echo \"export LANG=$LANG\" \u003e /etc/profile.d/locale.sh \u0026\u0026 \\\n    apk del glibc-i18n \u0026\u0026 \\\n    rm \"$BASE_FILE\" \"$BIN_FILE\" \"$I18N_FILE\"\n\n# install Android SDK\nRUN FILE=commandlinetools-linux-${ANDROID_SDK_VERSION}_latest.zip \u0026\u0026 \\\n    mkdir -p ${ANDROID_SDK_ROOT} \u0026\u0026 \\\n    mkdir -p /tmp \u0026\u0026 \\\n    cd ${ANDROID_SDK_ROOT} \u0026\u0026 \\\n    wget https://dl.google.com/android/repository/${FILE} \u0026\u0026 \\\n    unzip ${FILE} \u0026\u0026 \\\n    rm ${FILE} \u0026\u0026 \\\n    cd cmdline-tools \u0026\u0026 \\\n    mkdir latest \u0026\u0026 \\\n    mv * latest/ \u0026\u0026 \\\n    mkdir -p ~/.android \u0026\u0026 \\ touch ~/.android/repositories.cfg \u0026\u0026 \\\n    (yes || true) | sdkmanager --licenses\n    \n````\n\n## å‚è€ƒ\n\n[AWS CLI v2 ã§ alpine glibc å•é¡Œã«é­é‡ - vague memory](https://htnosm.hatenablog.com/entry/2020/05/04/090000)\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["Docker"]},"/note/AmasonSNS%E3%81%A7%E9%85%8D%E4%BF%A1":{"title":"AmasonSNSã§é…ä¿¡","content":"\n\\#AWS\n\n[AWS Lambdaã‚’ä½¿ã£ãŸAmazon SNSã¸ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€å—ä¿¡](https://business.ntt-east.co.jp/content/cloudsolution/column-try-29.html)\nAmazon Simple Notification Service(SNS)ã¸ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã™ã‚‹Lambdaã¨Amazon SNSã‹ã‚‰é…ä¿¡ã•ã‚Œã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ä¿¡ã™ã‚‹Lambdaã®ä½œæˆæ‰‹é †ã‚’è§£èª¬ã—ã¾ã™ã€‚\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["AWS"]},"/note/Amazon-EFS":{"title":"Amazon EFS","content":"\n[Amazon EFS ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ - Amazon Elastic File System](https://docs.aws.amazon.com/ja_jp/efs/latest/ug/performance.html)\n\n## ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰ã«ã¤ã„ã¦\n\n[NEW â€“ Amazon EFS Elastic Throughput ã®ç™ºè¡¨ | Amazon Web Services ãƒ–ãƒ­ã‚°](https://aws.amazon.com/jp/blogs/news/new-announcing-amazon-efs-elastic-throughput/)\n\n \u003e \n \u003e æ–°ã—ã„ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰ã§ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«å¿…è¦ãªã ã‘ã®ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã‚’å¾“é‡åˆ¶æ–™é‡‘ã§æä¾›ã™ã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã®æ–°ã—ã„ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰ã§ã¯ã€ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã‚„ã‚­ãƒ£ãƒ‘ã‚·ãƒ†ã‚£ç®¡ç†ã‚’å¿…è¦ã¨ã—ãªã„å…±æœ‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’æä¾›ã™ã‚‹ã“ã¨ã§ã€AWS ã§ã®ãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã¨ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œã‚’ã•ã‚‰ã«ç°¡ç´ åŒ–ã§ãã¾ã™ã€‚\n \u003e Elastic Throughput ã¯ã€äºˆæ¸¬ãŒå›°é›£ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶ã‚’ä¼´ã„ã€ã‹ã¤ã€æ€¥æ¿€ã«å¢—æ¸›ã™ã‚‹äºˆæ¸¬ä¸å¯èƒ½ãªãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã«æœ€é©ã§ã™ã€‚\n\n2022/11ã«æ–°ã—ã„ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆãƒ¢ãƒ¼ãƒ‰ Elastic ThroughputãŒç™ºè¡¨ã•ã‚ŒãŸã€‚ãƒ—ãƒ­ãƒ“ã‚¸ãƒ§ãƒ‹ãƒ³ã‚°ã—ãªãã¦ã‚‚ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¿…è¦ã¨ã™ã‚‹ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’è‡ªå‹•ã§æ±ºå®šã—ã¦ãã‚Œã‚‹ã€‚äºˆæ¸¬ãŒé›£ã—ã„ã¨ãã«ã¯ã“ã‚Œã‚’é¸ã¶ã®ãŒã„ã„ã¿ãŸã„ã€‚\n\n \u003e \n \u003e ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆãŒ Bursting ãƒ¢ãƒ¼ãƒ‰ã§åˆ¶é™ã•ã‚Œã¦ã„ã‚‹å ´åˆ (ä¾‹ãˆã°ã€è¨±å®¹ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆã® 80% è¶…ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã€ã¾ãŸã¯ãƒãƒ¼ã‚¹ãƒˆã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚’ä½¿ã„æœãŸã—ã¦ã„ã‚‹)ã€Provisioned ãƒ¢ãƒ¼ãƒ‰ ([2018 å¹´ã«ç™ºè¡¨](https://aws.amazon.com/blogs/aws/new-provisioned-throughput-for-amazon-elastic-file-system-efs/)) ã¾ãŸã¯æ–°ã—ã„ Elastic Throughput ãƒ¢ãƒ¼ãƒ‰ã®ä½¿ç”¨ã‚’ã”æ¤œè¨ãã ã•ã„ã€‚\n\n[Amazon EFS ãƒãƒ¼ã‚¹ãƒˆã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚’ç†è§£ã™ã‚‹](https://aws.amazon.com/jp/premiumsupport/knowledge-center/efs-burst-credits/)\n\n### Bursting Throughput\n\nFile-based workloads are typically spiky, driving high levels of throughput for short periods, but driving lower levels of throughput for longer periods. Amazon EFS is designed to burst to high throughput levels for periods of time.\n\nAmazon EFS uses a credit system that determines when file systems can burst. If the credit balance of your file system drops to zero, then your permitted throughput rate drops to your baseline throughput. When driving at baseline throughput, you use credits at the same rate you earn them.\n\nEFSã®èª­ã¿æ›¸ãã®é«˜ä½å·®ãŒæ¿€ã—ã„åˆ©ç”¨æ–¹æ³•ã®å ´åˆã«ã€åˆ©ç”¨ã•ã‚Œã¦ã„ã‚‹ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆãŒãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã‚’ä¸‹å›ã£ã¦ã„ã‚‹æœŸé–“ã€ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã¨ã—ã¦æ€§èƒ½ã‚’è“„ç©ã—ã¦ã„ãã€‚ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆãŒå¤§ãã„ã¨ãã¯è“„ç©ã—ãŸã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚’ä½¿ã£ã¦æ€§èƒ½ã‚’ä¸Šã’ã‚‹\nCloudWatch ã® BurstCreditBalance ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã§è¦‹ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\n\nbaseline rate is 50 MiBps per tebibyte \\[TiB\\] of storage (equivalent to 50 KiBps per GiB of storage). Amazon EFS meters read operations up to one-third the rate of write operations, permitting the file system to drive a baseline rate up to 150 KiBps per GiB of read throughput, or 50 KiBps per GiB of write throughput.\n\nãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã¯ãƒ‡ãƒ¼ã‚¿é‡ã«å¿œã˜ã¦æ±ºã¾ã‚‹ã€‚ãƒ‡ãƒ¼ã‚¿é‡1GiBã‚ãŸã‚Š50KiB/sã®èª­ã¿æ›¸ããŒãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ã¨ãªã‚‹ã€‚\nãŸã ã—readã¯writeã®1/3ã§è¨ˆç®—ã•ã‚Œã‚‹ã€‚\n\n### Provisioned Throughput\n\nWith Provisioned Throughput mode, you can instantly provision the throughput of your file system independent of the amount of data stored\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["2023/02/09","AWS"]},"/note/AmazonSNS":{"title":"AmazonSNS","content":"\n\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["AWS"]},"/note/AmazonSNS%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E9%85%8D%E4%BF%A1":{"title":"AmazonSNSã‚’ä½¿ã£ãŸé…ä¿¡","content":"\n\\#AWS \n\n[Amazon SNSã§ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã‚’é€ã‚‹ãŸã‚ã®åŸºç¤çŸ¥è­˜ | UNITRUST](https://www.unitrust.co.jp/6182)\n\nAmazon Simple Notification Serviceã®ç•¥ã€‚\n\nAWSå†…ã®ãƒ¢ãƒã‚¤ãƒ«é€šçŸ¥ã‚µãƒ¼ãƒ“ã‚¹ã§ã€iOSã‚„Androidã®ç«¯æœ«ã«PUSHé€šçŸ¥ãŒå¯èƒ½ã€‚\n\nä¸€å›ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§å¤§é‡ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é…ä¿¡ã§ãã€å®Ÿè¡Œé€Ÿåº¦ã‚‚é€Ÿã„ã€‚\n\n## ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ\n\nAmazonSNSã«ãŠã„ã¦ã¯ã€é…ä¿¡å¯¾è±¡ç«¯æœ«ã‚’è­˜åˆ¥ã™ã‚‹ãŸã‚ã®ãƒ‡ãƒ¼ã‚¿ã€‚ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã®ã‚ˆã†ãªã‚‚ã®ã€‚\n\nãƒ‡ãƒã‚¤ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ï¼ˆPUSHãƒˆãƒ¼ã‚¯ãƒ³ï¼‰ã‹ã‚‰ä½œã‚‰ã‚Œã‚‹ã€ç«¯æœ«ã‚’è­˜åˆ¥ã™ã‚‹ãŸã‚ã®ARNã€‚\n\nãƒ‡ãƒã‚¤ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç™»éŒ²ã™ã‚‹ã¨ã€ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒä½œæˆã•ã‚Œã‚‹ã€‚\n\né…ä¿¡ã®éš›ã«ã¯ã€ä½œæˆã•ã‚ŒãŸã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’æŒ‡å®šã—ã¦å¯¾è±¡ã®ç«¯æœ«ã¸é…ä¿¡ã™ã‚‹ã€‚\n\nã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã«ã¯ã€Œãƒ‡ãƒã‚¤ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã€ã€Œã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ARNã€ã€Œé€šçŸ¥ã®è¨±å¯ãŒä¸‹ã‚Šã¦ã„ã‚‹ã‹ã€ãªã©ã®æƒ…å ±ãŒå«ã¾ã‚Œã‚‹ã€‚\n\n## ãƒˆãƒ”ãƒƒã‚¯\n\né…ä¿¡å¯¾è±¡ã‚’ã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°ã—ã€ä¸€æ–‰ã«é€šçŸ¥ã‚’é…ä¿¡ã™ã‚‹ãŸã‚ã®æ©Ÿèƒ½ã€‚\nãƒˆãƒ”ãƒƒã‚¯ã«ã¯ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ç™»éŒ²ã§ãã‚‹ã€‚\nãƒˆãƒ”ãƒƒã‚¯ã‚’ä½œæˆã—ã€ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ç™»éŒ²ã—ãŸå¾Œã€ãƒˆãƒ”ãƒƒã‚¯ã«å¯¾ã—ã¦é€ä¿¡ã—ãŸã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç™ºè¡Œã™ã‚‹ã¨ã€ãƒˆãƒ”ãƒƒã‚¯ã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¸ä¸€æ–‰ã«PUSHé…ä¿¡ã§ãã‚‹ã€‚\n\n## ã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³\n\nãƒˆãƒ”ãƒƒã‚¯ã¨é…ä¿¡å¯¾è±¡ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’çµã³ã¤ã‘ã‚‹ãƒ‡ãƒ¼ã‚¿ã€‚\n\nï¼ˆã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½œæˆ ï¼ ãƒˆãƒ”ãƒƒã‚¯ã«ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ç™»éŒ²ï¼‰\n\nã‚µãƒ–ã‚¹ã‚¯ãƒªãƒ—ã‚·ãƒ§ãƒ³ã«ã‚ˆã£ã¦ãƒˆãƒ”ãƒƒã‚¯ã«ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒç´ä»˜ã‘ã‚‰ã‚Œã‚‹ã“ã¨ã§ã€ãƒˆãƒ”ãƒƒã‚¯ã«å¯¾ã—ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã™ã‚‹ã¨ã€ãã®ãƒˆãƒ”ãƒƒã‚¯ã«ç´ã¥ãé…ä¿¡å¯¾è±¡ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¸ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒé…ä¿¡ã•ã‚Œã‚‹ã€‚\n\nã€Œãƒˆãƒ”ãƒƒã‚¯ã«ç™ºè¡Œã•ã‚ŒãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒè³¼èª­ã§ãã‚‹ã€ã¨ã„ã†ã‚¤ãƒ¡ãƒ¼ã‚¸ã€‚\n\n## ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ¥ï¼ˆç™ºè¡Œï¼‰\n\nPUSHã‚’é…ä¿¡ã™ã‚‹ã“ã¨ã€‚\n\nAmazonSNSã«ãŠã„ã¦PUSHé…ä¿¡ã¯ã€ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚„ãƒˆãƒ”ãƒƒã‚¯ã«å¯¾ã—ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç™ºè¡Œã™ã‚‹å½¢ã‚’ã¨ã£ã¦ã„ã‚‹ã€‚\n\n## ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ \n\nã‚¢ãƒ—ãƒªã”ã¨ã®ã€PUSHé€šçŸ¥ã«åˆ©ç”¨ã™ã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®è¨­å®šã€‚\n\niOSãªã‚‰ã€ŒApple Productionã€ã€ã€ŒApple Developmentã€ã€‚\n\nAndroidãªã‚‰ã€ŒGoogle Cloud Messaging(GCM)ã€ã€‚\n\nã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ç´ã¥ã„ã¦ç™»éŒ²ãƒ»ç®¡ç†ã•ã‚Œã‚‹ã€‚\n\nã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’é¸æŠã—ã¦å€‹åˆ¥ã«PUSHé…ä¿¡ã§ãã‚‹ã€‚\n\nå€‹åˆ¥ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¸é…ä¿¡ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§å¯èƒ½ã ãŒã€é…ä¿¡ã®åº¦ã«å¯¾è±¡ã‚’é¸æŠã™ã‚‹ã®ã¯æ‰‹é–“ãŒã‹ã‹ã‚‹ã€‚ã“ã®æ‰‹é–“ã‚’è§£æ¶ˆã™ã‚‹ã®ãŒãƒˆãƒ”ãƒƒã‚¯ã€‚\n\n## ãƒ•ãƒ­ãƒ¼\n\n1. ã‚¢ãƒ—ãƒªèµ·å‹•æ™‚ã«ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã¸ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã®è¨±å¯ã‚’é€ã‚‹\n1. ã‚¢ãƒ—ãƒªã¯ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰ç™ºè¡Œã•ã‚ŒãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’å—ã‘å–ã‚‹\n1. ã‚¢ãƒ—ãƒªã¯å—ã‘å–ã£ãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¸é€ä¿¡\n1. ã‚µãƒ¼ãƒãƒ¼ã¯APIã‚’åˆ©ç”¨ã—ã¦ãƒˆãƒ¼ã‚¯ãƒ³ã‚’AmazonSNSã«ç™»éŒ²ã—ã€ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹\n1. ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒä½œæˆã•ã‚ŒãŸã‚‰ã€ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰APIã‚’åˆ©ç”¨ or AmazonSNSã‹ã‚‰ç›´æ¥ã€ãƒˆãƒ”ãƒƒã‚¯ã«ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒ–ã—ã€ãƒˆãƒ”ãƒƒã‚¯ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç™ºè¡Œ\n1. PUSHé€šçŸ¥ãŒé…ä¿¡ã•ã‚Œã‚‹\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":[]},"/note/AmazonSQS":{"title":"AmazonSQS","content":"\n\\#AWS\n\n# Amazon Simple Queue Service (Amazon SQS)\n\n\u003chttps://docs.aws.amazon.com/ja_jp/AWSSimpleQueueService/latest/SQSDeveloperGuide/welcome.html\u003e\n\nãƒ•ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ‰ã®ã‚­ãƒ¥ãƒ¼ã‚µãƒ¼ãƒ“ã‚¹\n\nã‚­ãƒ¥ãƒ¼ã‚’ä½¿ã£ãŸéåŒæœŸå‡¦ç†ã®å®Ÿç¾\n\n## æ¨™æº–ã‚­ãƒ¥ãƒ¼ã¨FIFOã‚­ãƒ¥ãƒ¼\n\n[AWS â€” Difference between SQS Standard and FIFO Queues | by Ashish Patel | Awesome Cloud | Medium](https://medium.com/awesome-cloud/aws-difference-between-sqs-standard-and-fifo-first-in-first-out-queues-28d1ea5e153)\n\n \u003e \n \u003e FIFO queues have essentially the same features as standard queues, but provide the added benefits of supporting ordering and exactly-once processing and ensure that the order in which messages are sent and received is strictly preserved.\n\n* æ¨™æº–ã‚­ãƒ¥ãƒ¼\n  * ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆãŒé«˜ã„\n  * At-Least-Once Delivery: ä¸€å›ã®å®Ÿè¡ŒãŒä¿è¨¼ã•ã‚Œã‚‹ã€‚ãŸã ã—ã€è¤‡æ•°å›å®Ÿè¡Œã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹\n  * Best effort ordering\n  * 120,000ä»¶ã¾ã§\n* FIFOã‚­ãƒ¥ãƒ¼\n  * å…ˆå…¥ã‚Œå…ˆå‡ºã—\n  * Exactly-Once Delivery\n  * Limited Throughput\n  * 20,000ä»¶ã¾ã§\n\nã‚­ãƒ¥ãƒ¼ã®å‡¦ç†ãŒä»¥ä¸‹ã®å ´åˆã¯æ¨™æº–ã‚­ãƒ¥ãƒ¼ã‚’æ¡ç”¨ã€ãã‚Œä»¥å¤–ã¯FIFOã‚­ãƒ¥ãƒ¼ã‚’æ¡ç”¨\n\n* é †åºæ€§ã«ä¾å­˜ã—ãªã„\n* å‡¦ç†ã®é‡è¤‡ã‚’è¨±å®¹ã§ãã‚‹\n\n## ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸\n\nã‚µã‚¤ã‚ºä¸Šé™ã¯256KBã¾ã§\n\n## é…å»¶ã‚­ãƒ¥ãƒ¼\n\nhttps://docs.aws.amazon.com/ja_jp/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-delay-queues.html\n\nã‚­ãƒ¥ãƒ¼ã¸ã®æ–°ã—ã„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’0~900ç§’é…å»¶ã§ãã‚‹\né…å»¶æ™‚é–“ã®é–“ã€ã‚³ãƒ³ã‚·ãƒ¥ãƒ¼ãƒã«ã¯è¡¨ç¤ºã•ã‚Œãªããªã‚‹\n\nãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å€‹åˆ¥ã® `DelaySeconds` ã‚‚è¨­å®šã§ãã‚‹ãŒã€FIFOã‚­ãƒ¥ãƒ¼ã§ã¯ä½¿ç”¨ä¸å¯\n\n## ç”¨èª\n\n### å¯è¦–æ€§ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ\n\nè¨­å®šã—ãŸæœŸé–“ã€é‡è¤‡ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é…ä¿¡ãŒè¡Œã‚ã‚Œãªã„ã‚ˆã†ã«ã™ã‚‹æ©Ÿèƒ½\nãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã¨ã—ã¦ã€å¾Œç¶šå‡¦ç†æ™‚é–“+ã‚¢ãƒ«ãƒ•ã‚¡ã‚’è¨­å®šã™ã‚‹ã¨è‰¯ã„\n\n### ã‚·ãƒ§ãƒ¼ãƒˆãƒãƒ¼ãƒªãƒ³ã‚°ã¨ãƒ­ãƒ³ã‚°ãƒãƒ¼ãƒªãƒ³ã‚°\n\nã‚­ãƒ¥ãƒ¼ã‹ã‚‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å–å¾—(ã‚µãƒ–ã‚¹ã‚¯ãƒ©ã‚¤ãƒ–)ã®éš›ã€å¯¾è±¡ã®ã‚­ãƒ¥ãƒ¼ãŒãªã„å ´åˆã€\nä¸€å®šæ™‚é–“ã‚­ãƒ¥ãƒ¼ã«æ–°è¦ç™»éŒ²ã•ã‚Œã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å¾…æ©Ÿã‹ã©ã†ã‹ã®æ©Ÿèƒ½\n\nå¾…æ©Ÿã‚’è¡Œã†ã“ã¨ã‚’ãƒ­ãƒ³ã‚°ãƒãƒ¼ãƒªãƒ³ã‚°ã€å¾…æ©Ÿã‚’è¡Œãªã„ã“ã¨ã‚’ã‚·ãƒ§ãƒ¼ãƒˆãƒãƒ¼ãƒªãƒ³ã‚°ã¨è¨€ã†\nã€Œãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å—ä¿¡å¾…æ©Ÿæ™‚é–“ã€ã«ã¦è¨­å®š\n\n### ãƒ‡ãƒƒãƒˆãƒ¬ã‚¿ãƒ¼ã‚­ãƒ¥ãƒ¼\n\nãƒã‚°ã£ãŸãƒ‡ãƒ¼ã‚¿ã‚’åˆ¥ã‚­ãƒ¥ãƒ¼ã«æ ¼ç´ã™ã‚‹æ©Ÿèƒ½\nCloudwatchã¨é€£æºã—ã€ãƒ‡ãƒãƒƒã‚°ã«ä½¿ç”¨ã§ãã‚‹ã€‚\nã€Œæœ€å¤§å—ä¿¡æ•°ã€ã«ã¦è¨­å®šã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å—ä¿¡æ•°å¾Œã€ãƒ‡ãƒƒãƒ‰ãƒ¬ã‚¿ãƒ¼ã‚­ãƒ¥ãƒ¼ã«ç§»å‹•ã•ã‚Œã‚‹\nâ€»æœ€å¤§ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚µã‚¤ã‚ºï¼šå€¤ã¯ 1ï½256 KB ã®é–“ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["AWS"]},"/note/Argo-Rollouts%E3%81%A7%E9%80%9A%E7%9F%A5%E3%81%95%E3%81%9B%E3%82%8B":{"title":"Argo Rolloutsã§é€šçŸ¥ã•ã›ã‚‹","content":"\n* argo-rollouts 1.4.0 ã§ã€ãƒ‡ãƒ—ãƒ­ã‚¤å¤±æ•—æ™‚ã«slacké€šçŸ¥ãŒæ¥ãªã‹ã£ãŸ\n* argo-rolloutsã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä»¥å‰ã®1.2.1ã«æˆ»ã—ã¦ã‚‚slacké€šçŸ¥ãŒã“ãªã„ã®ã§ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆèµ·å› ã§ã¯ãªã„ã€‚\n* ã€Œã‚¨ãƒ©ãƒ¼ã«ãªã£ãŸã‚«ãƒ©ãƒ¼ã®PodãŒè½ã¡ã¦ãã‚Œãªã„ã€ã¿ãŸã„ãªã“ã¨ãŒconfluenceã«æ›¸ã„ã¦ã‚ã£ãŸãŒã€è½ã¡ã¦ãã‚Œã¦ãã†ã€‚0.10.2æ™‚ç‚¹ã®èª¿æŸ»å†…å®¹ã£ã½ã„ã®ã§ä»Šã¯æŒ™å‹•ãŒå¤‰ã‚ã£ãŸã‹\n* argocd-notificationsã®ApplicationãŒæ®‹ã£ã¦ã„ã¦ã‚„ã‚„ã“ã—ã‹ã£ãŸã®ã§å‰Šé™¤ã—ã‚ˆã†\n* \u003chttps://argocd-notifications.readthedocs.io/en/stable/triggers/#avoid-sending-same-notification-too-often\u003e é€šçŸ¥æ¸›ã‚‰ã—ãŸã„ãªã‚\n* `manifest/argocd/install/overlays/prod/appproject.yaml` ã§ `notifications.argoproj.io/subscribe.` ã« `on-degraded` ãŒè¨­å®šã•ã‚Œã¦ã„ãªã„ã‹ã‚‰é€šçŸ¥ã“ãªã„ã‚“ã ãª\n\n## Argo CD Notifications\n\nhttps://argocd-notifications.readthedocs.io/en/stable/\n\n* ä»¥å‰ã¯Argo CDã¨ã¯åˆ¥ã§Notificationsç”¨ã®helmã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ãŸãŒã€ç¾åœ¨ã¯Argo CDæœ¬ä½“ã®helmã«å–ã‚Šè¾¼ã¾ã‚Œã¦ã„ã‚‹\n* Triggerã¯ã€è‡ªåˆ†ã§ `argocd-notifications-cm` ConfigMapã« `trigger.on-XXX` ã®å½¢ã§å®šç¾©ã™ã‚‹\n  * ã‚«ã‚¿ãƒ­ã‚°ãŒã“ã¡ã‚‰ã« https://argocd-notifications.readthedocs.io/en/stable/catalog/\n* statusãŒDegradedã«ãªã£ãŸã‚‰argocd-notificationsã§é€šçŸ¥ãŒæ¥ã‚‹ã‚ˆã†è¨­å®šã™ã‚‹ã«ã¯ã€Triggerã‚’ä½œã£ã¦Applicationã®subscriptionã«ç™»éŒ²ã™ã‚‹\n\n````\napiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  annotations:\n    notifications.argoproj.io/subscribe.on-sync-succeeded.slack: my-channel1;my-channel2\n    notifications.argoproj.io/subscribe.on-degraded.slack: my-channel1;my-channel2\n````\n\n### ConfigMap\n\nhttps://github.com/argoproj/argo-rollouts/blob/master/manifests/notifications-install.yaml\nã“ã¡ã‚‰ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã€ `argo-rollouts-notification-configmap` ConfigMapã§triggerã‚„templateã‚’è¨­å®šã™ã‚‹\n\noverlaysã‚„ã€ä¸Šè¨˜yamlã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦è¿½è¨˜ã™ã‚‹å½¢ã§slackã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚’è¨­å®šã™ã‚‹\n\n````yaml\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: argo-rollouts-notification-configmap\ndata:\n  service.slack: |\n    token: $slack-token\n---\napiVersion: v1\nkind: Secret\nmetadata:\n  name: argo-rollouts-notification-secret\nstringData:\n  slack-token: \u003cmy-slack-token\u003e\n````\n\nRolloutã®annotationsã«ã€subscribeã‚’è¨­å®šã™ã‚‹\n\n````yaml\napiVersion: argoproj.io/v1alpha1\nkind: Rollout\nmetadata:\n  name: solr\n  annotations:\n    notifications.argoproj.io/subscribe.on-analysis-run-error.slack: \"#bot_alert\"\n    notifications.argoproj.io/subscribe.on-analysis-run-failed.slack: \"#bot_alert\"\n    notifications.argoproj.io/subscribe.on-analysis-run-running.slack: \"#bot_alert\"\n    notifications.argoproj.io/subscribe.on-rollout-aborted.slack: \"#bot_alert\"\n    notifications.argoproj.io/subscribe.on-rollout-completed.slack: \"#bot_info\"\n    notifications.argoproj.io/subscribe.on-rollout-paused.slack: \"#bot_info\"\n    notifications.argoproj.io/subscribe.on-rollout-step-completed.slack: \"#bot_info\"\n    notifications.argoproj.io/subscribe.on-rollout-updated.slack: \"#bot_info\"\nspec:\n````\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["2023/02/28","Kubernetes"]},"/note/Atomic-Notes":{"title":"Atomic Notes","content":"\nhttps://jmatsuzaki.com/archives/26915\n\n \u003e \n \u003e Atomic Notesã¨ã¯ä½•ã‹ã‚’ç«¯çš„ã«èª¬æ˜ã™ã‚‹ã¨ã€**1æšã®ãƒãƒ¼ãƒˆã‚’ã“ã‚Œä»¥ä¸Šä¸å¯åˆ†ãªå˜ä½ã¨è€ƒãˆã‚‰ã‚Œã‚‹æ¥µå°ã®ã‚µã‚¤ã‚ºã¾ã§å‰Šã‚Šã€åŸå­æ€§ï¼ˆAtomicï¼‰ã‚’ä¿ã¤ã“ã¨**ã§ã™ã€‚\n\nAtomic Designã½ãã¦å¥½ã\n\nåŸå­æ€§ã‚’ä¿ã¤ã“ã¨ã§å†åˆ©ç”¨æ€§ãŒé«˜ã¾ã‚‹ã“ã¨ã¯ç†è§£ã—ã‚„ã™ã„\n\nå†åˆ©ç”¨ã—ã‚„ã™ã„ã¨ãƒãƒ¼ãƒˆåŒå£«ã®ãƒªãƒ³ã‚¯ãŒã—ã‚„ã™ããªã‚‹ã€‚å‚ç…§ãŒé »ç¹ã«è¡Œã‚ã‚Œã€å®šç€ã—ã‚„ã™ããªã‚‹ã€‚\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["memo"]},"/note/Automator":{"title":"Automator","content":"\nMacã®æ“ä½œã‚’è‡ªå‹•åŒ–ã™ã‚‹ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼ãªã©ãŒä½œã‚Œã‚‹ã€‚\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["2023/05/09","Mac"]},"/note/Aws%E3%81%AE%E3%82%B5%E3%83%BC%E3%83%93%E3%82%B9%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%83%90%E3%83%83%E3%83%81%E5%87%A6%E7%90%86%E3%81%99%E3%82%8B":{"title":"Awsã®ã‚µãƒ¼ãƒ“ã‚¹ã‚’ä½¿ã£ã¦ãƒãƒƒãƒå‡¦ç†ã™ã‚‹","content":"\n\\#AWS\n\n[AmazonSQS](note/AmazonSQS.md), [AWS Lambda](note/AWS%20Lambda.md), [AmazonSNS](note/AmazonSNS.md) ã‚’ä½¿ã£ã¦ãƒãƒƒãƒå‡¦ç†ã«ã‚ˆã‚‹PUSHé€ä¿¡ã‚’å®Ÿç¾ã™ã‚‹\n\n* [AWSã§ãƒãƒƒãƒå‡¦ç†ã‚’å®Ÿè£…ã™ã‚‹éš›ã®é¸æŠè‚¢ã¨ã‚µãƒ¼ãƒ“ã‚¹æ¯”è¼ƒ](https://zenn.dev/faycute/articles/fb310e3ccd783f)\n* [\\[ãƒ¬ãƒãƒ¼ãƒˆ\\] SNSã¨SQSã¨Lambdaã«ã‚ˆã‚‹ã‚¹ã‚±ãƒ¼ãƒ©ãƒ–ãƒ«ã§ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ãªã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ \\#reinvent \\#svs303 | DevelopersIO](https://dev.classmethod.jp/articles/reinvent2020-svs303-scalable-serverless-event-driven-architectures-with-sns-sqs-lambda/)\n* [SQSãƒˆãƒªã‚¬ãƒ¼ã‚’ä½¿ã£ã¦15åˆ†ã”ã¨ã«ç¹°ã‚Šè¿”ã—å®Ÿè¡Œã™ã‚‹é‹ç”¨ã‚¸ãƒ§ãƒ–ã‚’ä½œæˆã™ã‚‹ â€“ ã‚µãƒ¼ãƒãƒ¼ãƒ¯ãƒ¼ã‚¯ã‚¹ ã‚µãƒãƒ¼ãƒˆã‚»ãƒ³ã‚¿ãƒ¼](https://support.serverworks.co.jp/hc/ja/articles/360009321134-SQSãƒˆãƒªã‚¬ãƒ¼ã‚’ä½¿ã£ã¦15åˆ†ã”ã¨ã«ç¹°ã‚Šè¿”ã—å®Ÿè¡Œã™ã‚‹é‹ç”¨ã‚¸ãƒ§ãƒ–ã‚’ä½œæˆã™ã‚‹)\n* [ã€AWSã€‘lambdaã¨SQSã‚’åˆ©ç”¨ã—ã¦ãƒãƒƒãƒå‡¦ç†ãŒå¯èƒ½ã‹è©¦ã—ã¦ã¿ã¾ã—ãŸ | eyeon -ã‚¢ã‚¤ã‚ªãƒ³-](https://www.k-friendly.com/541)\n* [Amazon SNSã§ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥ã‚’é€ã‚‹ãŸã‚ã®åŸºç¤çŸ¥è­˜ | UNITRUST](https://www.unitrust.co.jp/6182)\n  \\[\\[\\]\\]\n\n## SQSã‚’é…å»¶å®Ÿè¡Œã™ã‚‹\n\n\u003chttps://docs.aws.amazon.com/ja_jp/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-delay-queues.html\u003e\n\u003chttps://docs.aws.amazon.com/ja_jp/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-message-timers.html\u003e\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["AWS"]},"/note/Bash%E3%83%87%E3%83%90%E3%83%83%E3%82%B0%E5%AE%9F%E8%A1%8C":{"title":"Bashãƒ‡ãƒãƒƒã‚°å®Ÿè¡Œ","content":"\nhttps://qiita.com/mashumashu/items/ee436b770806e8b8176f\n\n````shell\n#!/bin/bash\n\ntrap 'read -p \"$0($LINENO) $BASH_COMMAND\"' DEBUG\n\necho foo\necho bar\nif [ \"$1\" = \"yes\" ]; then\n  echo bazz\nfi\n````\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":[]},"/note/Bazel":{"title":"Bazel","content":"\nGoogleãŒé–‹ç™ºã—ãŸãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«\n\nStarlark ã¨ã„ã†Bazelã®ãŸã‚ã«ãƒ‡ã‚¶ã‚¤ãƒ³ã•ã‚ŒãŸ [Python](note/Python.md) ã®æ–¹è¨€ã‚’ç”¨ã„ã¦ãƒ“ãƒ«ãƒ‰ã®ãƒ«ãƒ¼ãƒ«ã‚’è¨˜è¿°ã™ã‚‹ã®ãŒç‰¹å¾´ã§ã€\nã‚³ãƒ³ãƒ‘ã‚¤ãƒ©ã®å‘¼ã³å‡ºã—ã®ã‚ˆã†ãªä½ãƒ¬ãƒ™ãƒ«ãªå‡¦ç†ã‚’è¨˜è¿°ã™ã‚‹ [Make](note/Make.md) ãªã©ã®æ—¢å­˜ã®ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã«æ¯”ã¹ã¦ã€é«˜ãƒ¬ãƒ™ãƒ«ãªè¨€èªã‚’ç”¨ã„ã¦ãƒ«ãƒ¼ãƒ«ã‚’è¨˜è¿°ã§ãã‚‹ã®ãŒå¼·ã¿ã®1ã¤ã§ã™ã€‚\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":[]},"/note/Bitbucket-Pipelines%E3%81%A7master%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E3%81%A8%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E6%AF%94%E8%BC%83%E3%82%92%E3%81%97%E3%81%9F%E3%81%84":{"title":"Bitbucket Pipelinesã§masterãƒ–ãƒ©ãƒ³ãƒã¨ãƒ•ã‚¡ã‚¤ãƒ«æ¯”è¼ƒã‚’ã—ãŸã„","content":"\npipelineã§ã€masterãƒ–ãƒ©ãƒ³ãƒã¨ã®ãƒ•ã‚¡ã‚¤ãƒ«æ¯”è¼ƒã‚’ã—ã‚ˆã†ã¨ã—ã¦ã€masterã‚’checkoutã—ãŸ\n\n````yaml\ndefault:\n  step:\n    - git remote -v\n    - git branch -a\n    - git fetch origin\n    - git checkout master\n    - git diff master...${BITBUCKET_BRANCH}\n````\n\nã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã£ãŸã€‚masterãƒ–ãƒ©ãƒ³ãƒãŒfetchã§ãã¦ã„ãªã„\n\n````\norigin  git@bitbucket.org:foo/repo (fetch)\norigin  git@bitbucket.org:foo/repo (push)\n\nfeature/bar\nremote/origin/feature/bar\n\nerror: pathspec 'master' did not match any file(s) known to git.\n````\n\nè§£æ±ºç­–ã¯2ã¤\n[Solved: Can't checkout master on a branch pipeline](https://community.atlassian.com/t5/Bitbucket-questions/Can-t-checkout-master-on-a-branch-pipeline/qaq-p/1004778)\n\n`clone.depth: full` ã‚’ã¤ã‘ã‚‹\n\n````yaml\nclone:\n  depth: full\n  \npipelines:\n  default:\n    - step:\n        name: Cloning\n        script:\n          - echo \"Clone all the things!\"\n````\n\n`git config remote.origin.fetch \"+refs/heads/*:refs/remotes/origin/*\"` ã‚’stepå†…ã§è¡Œã†\n\n````yaml\nclone:\n  depth: full\n  \npipelines:\n  default:\n    - step:\n      script:\n        - git config remote.origin.fetch \"+refs/heads/*:refs/remotes/origin/*\"\n        - git fetch origin\n        - git checkout --track origin/master\n\n````\n\nã“ã‚Œã§ãƒ•ã‚¡ã‚¤ãƒ«æ¯”è¼ƒã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸ\n\n````yaml\nclone:\n  depth: full\n\npipelines:\n  default:\n    step:\n      - git remote -v\n      - git branch -a\n      - git fetch origin\n      - git checkout master\n      - git diff master...${BITBUCKET_BRANCH}\n````\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["2023/03/28"]},"/note/CI%E3%83%97%E3%83%A9%E3%83%83%E3%83%88%E3%83%95%E3%82%A9%E3%83%BC%E3%83%A0%E3%81%AEDagger%E3%82%92%E8%A9%A6%E3%81%99":{"title":"CIãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®Daggerã‚’è©¦ã™","content":"\n\\#CICD\n\n[Overview | Dagger](https://docs.dagger.io/)\n[CIãƒ»CDç•ŒéšˆæœŸå¾…ã®æ˜Ÿ!!Daggerã«å…¥é–€ã—ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã¨GithubActionsã§CIã‚’å‹•ã‹ã—ã¦ã¿ãŸ | DevelopersIO](https://dev.classmethod.jp/articles/dagger_cicd_get_started/)\n\nãƒãƒ¼ã‚¿ãƒ–ãƒ«ãªCI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ devkit\nDockerã‚³ãƒ³ãƒ†ãƒŠä¸Šã§å®Ÿè¡Œã•ã‚Œã¦ã€ã©ã“ã§ã‚‚å‹•ã‹ã™ã“ã¨ãŒã§ãã‚‹\n\n* CI/CDã‚µãƒ¼ãƒ“ã‚¹å›ºæœ‰ã®è¨˜æ³•ã‚’å­¦ç¿’ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€ç§»è¡Œã®éš›ã«ã¯æ›¸ãæ›ãˆãŒå¿…è¦\n* ãƒ­ãƒ¼ã‚«ãƒ«ã§è©¦ã—ã«ããã€commit \u0026 pushã—ã¦ã¯å‹•ãã‹ç¢ºèªã™ã‚‹ä½œæ¥­ãŒç™ºç”Ÿ\n* YAMLãŒè¾›ã„\n\nDagger ã¯ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ éä¾å­˜ã§CUEè¨€èªã‚’ä½¿ã£ã¦æ›¸ã‘ã‚‹ã®ãŒè‰¯ã•ãã†ã€‚\nãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œã§ãã‚‹ã£ã¦ã„ã†ã®ã‚‚å¤§ãã„\n\n* CUEè¨€èªãŒãã‚“ãªã«ã¾ã ãƒ¡ã‚¸ãƒ£ãƒ¼ã§ãªã„\n  * IaCã§ãŸã¾ã«è¦‹ã‚‹ã‹ãªï¼ŸGo ã«ã¯å…¬å¼ã®parserãŒã‚ã‚‹\n* ã¾ã ãƒ¡ã‚¸ãƒ£ãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³0ç³»ã§é–‹ç™ºé€”ä¸Š\n\n## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\nmacã¯Homebrewã§ã‚‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹\n\ninstall.sh ã‚’ä½¿ã£ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹\n\n````shell\ncurl -L https://dl.dagger.io/dagger/install.sh | DAGGER_VERSION=0.2.19 sh\n\n./bin/dagger version\ndagger 0.2.19 (GIT_SHA) darwin/arm64\n````\n\n## ã‚µãƒ³ãƒ—ãƒ«\n\n````shell\ngit clone https://github.com/dagger/todoapp\ncd todoapp\ndagger project update\ndagger do build\n````\n\n## ä½¿ã£ã¦ã¿ã‚‹\n\nhello.cue\n\n````go\npackage main\n\nimport (\n    \"dagger.io/dagger\"\n    \"dagger.io/dagger/core\"\n)\n\n// Write a greeting to a file, and add it to a directory\n#AddHello: {\n    // The input directory\n    dir: dagger.#FS\n\n    // The name of the person to greet\n    name: string | *\"world\"\n\n    write: core.#WriteFile \u0026 {\n        input: dir\n        path: \"hello-\\(name).txt\"\n        contents: \"hello, \\(name)!\"\n    }\n\n    // The directory with greeting message added\n    result: write.output\n}\n\ndagger.#Plan \u0026 {\n    // Say hello by writing to a file\n    actions: hello: #AddHello \u0026 {\n        dir: client.filesystem.\".\".read.contents\n        name: \"hey\"\n    }\n    client: filesystem: \".\": {\n        read: contents: dagger.#FS\n        write: contents: actions.hello.result\n    }\n}\n````\n\n````shell\ndagger project init\ndagger project update\n\ndagger do hello\n````\n\n`dagger project update` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€ `./cue.mod` ãŒæ›´æ–°ã•ã‚Œã‚‹\ngo get ã—ãŸã¨ãã« `$GOPATH/pkg/mod` ã«ã‚½ãƒ¼ã‚¹ãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ãŒã€ãã‚Œã¨åŒã˜ã‚ˆã†ã« `./cue.mod` ã«ç½®ã‹ã‚Œã‚‹\n\n## Actions\n\nActions ãŒåŸºæœ¬çš„ãªè¦ç´ ã¨ãªã‚‹\n4ã¤ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãŒã‚ã‚‹\n\n* Definition\n* Integration\n* Discovery\n* Execution\n\npipelines ã¨ steps ã®ã‚ˆã†ãªåŒºåˆ¥ãŒãªãã€å…¨ã¦ã‚’Actionã§å®šç¾©ã§ãã‚‹\nå®šç¾©æ¸ˆã¿ã®Actionã‚’ä»–ã®Actionã‹ã‚‰ã‚µãƒ–ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¨ã—ã¦å‘¼ã³å‡ºã›ã‚‹\n\nå…¬å¼ã®èª¬æ˜ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹Definition\n\n````go\n// Write a greeting to a file, and add it to a directory\n#AddHello: {\n    // The input directory\n    dir: dagger.#FS\n\n    // The name of the person to greet\n    name: string | *\"world\"\n\n    write: core.#WriteFile \u0026 {\n        input: dir\n        path: \"hello-\\(name).txt\"\n        contents: \"hello, \\(name)!\"\n    }\n\n    // The directory with greeting message added\n    result: write.output\n}\n````\n\nã“ã“ã§ã¯ `core.#WriteFile` ã¨ã„ã† core ã§å®šç¾©æ¸ˆã¿ã® Action ã‚’ `#AddHello` ã®ä¸­ã§å‘¼ã³å‡ºã—ã¦ã„ã‚‹\n\n## Integration\n\nå…¨ã¦ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯ `dagger.#Plan`Â definition ã§å®šç¾©ã•ã‚Œã‚‹\n\n`dagger do --help` ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€å®šç¾©æ¸ˆã¿ã® Action ä¸€è¦§ãŒå‡ºåŠ›ã•ã‚Œã‚‹\n\n````shell\n$ ./dagger do --help\nUsage:\n  dagger do \u003caction\u003e [subaction...] [flags]\n\nOptions\n\n\nAvailable Actions:\n hello Say hello by writing to a file\n````\n\n## AWS SAMã®ãƒ‡ãƒ—ãƒ­ã‚¤ã®ã‚µãƒ³ãƒ—ãƒ«\n\n\u003chttps://docs.dagger.io/1248/aws-sam\u003e\nsamç”¨ã®ActionãŒimportã—ã¦ä½¿ç”¨ã§ãã‚‹\n\nzipã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³\n\n````go\npackage samZip\n\nimport (\n    \"dagger.io/dagger\"\n    \"universe.dagger.io/alpha/aws/sam\"\n)\n\ndagger.#Plan \u0026 {\n    _common: config: sam.#Config \u0026 {\n        accessKey: client.env.AWS_ACCESS_KEY_ID\n        region:    client.env.AWS_REGION\n        bucket:    client.env.AWS_S3_BUCKET\n        secretKey: client.env.AWS_SECRET_ACCESS_KEY\n        stackName: client.env.AWS_STACK_NAME\n    }\n\n    client: {\n        filesystem: \"./\": read: contents: dagger.#FS\n        env: {\n            AWS_ACCESS_KEY_ID:     string\n            AWS_REGION:            string\n            AWS_S3_BUCKET:         string\n            AWS_SECRET_ACCESS_KEY: dagger.#Secret\n            AWS_STACK_NAME:        string\n        }\n    }\n\n    actions: {\n        build: sam.#Package \u0026 _common \u0026 {\n            fileTree: client.filesystem.\"./\".read.contents\n        }\n        deploy: sam.#DeployZip \u0026 _common \u0026 {\n            input: build.output\n        }\n    }\n}\n````\n\nDockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³\n\n````go\npackage samImage\n\nimport (\n    \"dagger.io/dagger\"\n    \"universe.dagger.io/alpha/aws/sam\"\n)\n\ndagger.#Plan \u0026 {\n    _common: config: sam.#Config \u0026 {\n        accessKey:    client.env.AWS_ACCESS_KEY_ID\n        region:       client.env.AWS_REGION\n        secretKey:    client.env.AWS_SECRET_ACCESS_KEY\n        stackName:    client.env.AWS_STACK_NAME\n        clientSocket: client.network.\"unix:///var/run/docker.sock\".connect\n    }\n\n    client: {\n        filesystem: \"./\": read: contents: dagger.#FS\n        network: \"unix:///var/run/docker.sock\": connect: dagger.#Socket\n        env: {\n            AWS_ACCESS_KEY_ID:     string\n            AWS_REGION:            string\n            AWS_SECRET_ACCESS_KEY: dagger.#Secret\n            AWS_STACK_NAME:        string\n        }\n    }\n\n    actions: {\n        build: sam.#Build \u0026 _common \u0026 {\n            fileTree: client.filesystem.\"./\".read.contents\n        }\n        deploy: sam.#Deployment \u0026 _common \u0026 {\n            input: build.output\n        }\n    }\n}\n````\n\n## Jenkinsä¸Šã§åˆ©ç”¨ã™ã‚‹\n\nJenkinsã«dockerã€daggerã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãŠã\n\n````groovy\npipeline {\n  agent any\n  environment {\n    NAME='John'\n  }\n  stages {\n    stage(\"setup\") {\n      steps {\n        sh '''\n          # ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãšã¿ãªã‚‰ä¸è¦\n          curl -L https://dl.dagger.io/dagger/install.sh | sh\n        \n          ./bin/dagger project init\n          ./bin/dagger project update\n        '''\n      }\n    }\n    stage(\"do\") {\n      steps {\n        sh '''\n        cat \u003c\u003c EOF \u003e dagger.cue\n        package main\n        \n        import (\n            \"dagger.io/dagger\"\n            \"dagger.io/dagger/core\"\n        )\n        \n        // Write a greeting to a file, and add it to a directory\n        #AddHello: {\n            // The input directory\n            dir: dagger.#FS\n            \n            name: string | *\"world\"\n\n            write: core.#WriteFile \u0026 {\n                input: dir\n                path: \"hello-\\\\(name).txt\"\n                contents: \"hello, \\\\(name)!\"\n            }\n        \n            // The directory with greeting message added\n            result: write.output\n        }\n        \n        dagger.#Plan \u0026 {\n            // Say hello by writing to a file\n            actions: hello: #AddHello \u0026 {\n                dir: client.filesystem.\".\".read.contents\n                name: client.env.NAME\n            }\n            client: {\n                filesystem: \".\": {\n                    read: contents: dagger.#FS\n                    write: contents: actions.hello.result\n                }\n                env : {\n                    NAME: string\n                }\n            }\n        }\n\n        EOF\n        \n        ./bin/dagger do hello\n        '''.stripIndent()\n      }\n    }    \n  }\n}\n\n````\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["CICD"]},"/note/CORS":{"title":"CORS","content":"\n[CORSã®ä»•æ§˜ã¯ãªãœè¤‡é›‘ãªã®ã‹](https://zenn.dev/qnighy/articles/6ff23c47018380)\n\nSame-origin policy (SOP)\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["frontend"]},"/note/CPU%E3%81%AEx86%E3%82%84arm%E3%81%A3%E3%81%A6%E3%81%AA%E3%81%AB":{"title":"CPUã®x86ã‚„armã£ã¦ãªã«","content":"\n[CPU ã¨å‘½ä»¤ã‚»ãƒƒãƒˆã£ã¦ãªã«ï¼Ÿï½œM1 Mac ã£ã¦ãªã«ï¼Ÿ ã¼ãã«ã‚‚ä½¿ãˆã‚‹ï¼Ÿ](https://zenn.dev/suzuki_hoge/books/2021-07-m1-mac-4ede8ceb81e13aef10cf)\n\n* ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã€å‘½ä»¤ã‚»ãƒƒãƒˆ\n  * x86: Intel,AMDã®32bitã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£\n  * x64(x86_64): x86ã‚’64bitã«æ‹¡å¼µã—ãŸã‚‚ã®\n  * arm: ARMç¤¾ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£\n* x86, x86_64\n  * Intel: Core i7\n  * AMD: Ryzen\n    * AMDç¤¾ã®64bitå‘½ä»¤ã‚»ãƒƒãƒˆã¯AMD64\n* ARM \n  * ARMç¤¾ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ç·ç§°\n  * å®‰ä¾¡ã§çœé›»åŠ›\n  * 64bitæ‹¡å¼µã®ARMv8ãŒã‚ã‚‹\n  * ARMv8ã®å®Ÿè¡Œãƒ¢ãƒ¼ãƒ‰ã«AArch32ã¨AArch64ãŒã‚ã‚‹\n  * AArch64 = ARM64\n* Apple Silicon\n  * Appleç¤¾ãŒé–‹ç™ºã—ãŸARMã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã®ãƒãƒƒãƒ—\n\n## [Graviton](https://aws.amazon.com/jp/ec2/graviton/)\n\n* AWS Graviton ãƒ—ãƒ­ã‚»ãƒƒã‚µã¯ã€Amazon EC2 ã§å®Ÿè¡Œã•ã‚Œã‚‹ã‚¯ãƒ©ã‚¦ãƒ‰ãƒ¯ãƒ¼ã‚¯ãƒ­ãƒ¼ãƒ‰ã«æœ€é«˜ã®æ–™é‡‘ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚’æä¾›ã™ã‚‹ãŸã‚ã« AWS ã«ã‚ˆã£ã¦è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™\n* AWS EC2 ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã§ Arm ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ¼ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹\n* ã‚³ã‚¹ãƒˆé¢ã‚„ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹é¢ã§ã‚‚å¾“æ¥ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä¸Šå›ã‚‹\n* M6gã‚„C6gãªã©ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—ãŒã‚ã‚‹\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":[]},"/note/CSS%E3%81%A7%E3%83%89%E3%83%83%E3%83%88%E7%B8%A6%E7%B7%9A%E3%82%92%E3%81%A4%E3%81%8F%E3%82%8B":{"title":"CSSã§ãƒ‰ãƒƒãƒˆç¸¦ç·šã‚’ã¤ãã‚‹","content":"\n\\#css\n\n\u003chttps://developer.mozilla.org/ja/docs/Web/CSS/radial-gradient()\u003e\n\u003chttps://www.esz.co.jp/blog/2766.html\u003e\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["css"]},"/note/CentOS7%E3%81%A8AmazonLinux2%E3%81%AEDocker%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E3%81%A7%E6%97%A5%E6%9C%AC%E8%AA%9E%E3%83%AD%E3%82%B1%E3%83%BC%E3%83%AB%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%99%E3%82%8B":{"title":"CentOS7ã¨AmazonLinux2ã®Dockerã‚³ãƒ³ãƒ†ãƒŠã§æ—¥æœ¬èªãƒ­ã‚±ãƒ¼ãƒ«ã‚’è¨­å®šã™ã‚‹","content":"\nJavaã®DateFormatterã§ã€æ›œæ—¥ã‚’æ—¥æœ¬èªè¡¨ç¤ºã—ã‚ˆã†ã¨ã—ãŸã¨ãã«ã€ja_JPãƒ­ã‚±ãƒ¼ãƒ«ãŒå…¥ã£ã¦ãŠã‚‰ãšã§ããªã‹ã£ãŸã®ã§ã€æ–¹æ³•ã‚’èª¿ã¹ãŸã€‚\n\n## CentOS7\n\nå‚è€ƒ:\n\n* [CentOS 7 ã‚³ãƒ³ãƒ†ãƒŠã«æ¶ˆãˆãªã„æ—¥æœ¬èªãƒ­ã‚±ãƒ¼ãƒ«ã‚’è¿½åŠ ã™ã‚‹ - Qiita](https://qiita.com/teruo-oshida/items/08cb84efc2b581b0a439)\n* [CentOSã§æ—¥æœ¬èªãƒ­ã‚±ãƒ¼ãƒ«è¨­å®šã«ã™ã‚‹Dockerfile - BLOG - siwa32.com](https://blog.siwa32.com/docker_centos_ja/)\n\nDockerã®centos7ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ja_JPã®ãƒ­ã‚±ãƒ¼ãƒ«ãŒå…¥ã£ã¦ã„ãªã„ã€‚\n\n````shell\n$ locale -a | grep ja | wc -l\n0\n````\n\n`/etc/yum.conf` ã«ä»¥ä¸‹ã®è¨­å®šãŒå…¥ã£ã¦ã„ã‚‹ã“ã¨ã§ã€localeãŒen_US.utf8ã«åˆ¶é™ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã“ã‚Œã‚’ã„ã˜ã‚Œã°ã‚ˆã„ã€‚\n\n````conf\noverride_install_langs=en_US.utf8\n````\n\n`override_install_langs` ã®è¨­å®šã‚’æ¶ˆã™ã‹ã€ ja_JP.utf8 ã‚’è¿½åŠ ã™ã‚‹ã®ã ãŒã€æ¶ˆã™ã¨ä½¿ã‚ãªã„ãƒ­ã‚±ãƒ¼ãƒ«ã‚‚ã™ã¹ã¦å…¥ã£ã¦ã—ã¾ã†ã®ã§ã€è¿½åŠ ã™ã‚‹ã»ã†ãŒã„ã„ã ã‚ã†\n\n````shell\n$ sed -i -e '/override_install_langs/s/$/,ja_JP.utf8/g' /etc/yum.conf\n````\n\nã“ã®è¨­å®šã‚’ã—ãŸã‚ã¨ã§glibcã‚’æ›´æ–°ã™ã‚‹ã¨ã€ja_JPãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚‹\n\n````shell\n$ yum reinstall -y glibc-common\n$ locale -a | grep ja\nja_JP\nja_JP.eucjp\nja_JP.ujis\nja_JP.utf8\njapanese\njapanese.euc\n````\n\nDockerfile\n\n````Dockerfile\nFROM centos:7\n\nRUN sed -i -e '/override_install_langs/s/$/,ja_JP.utf8/g' /etc/yum.conf\nRUN yum reinstall -y glibc-common \u0026\u0026 yum clean all\n\nENV LANG ja_JP.UTF-8\n\nCMD [\"bash\"]\n````\n\nã¨ãã©ã `yum update -y \u0026\u0026 yum reinstall -y glibc-common` ã‚’ã—ã¦ã„ã‚‹Dockerfileã‚’è¦‹ã‹ã‘ã¦ã€ã©ã†ã„ã†æ„å‘³ãŒã‚ã‚‹ã‚“ã ã‚ãƒ¼ã¨æ€ã£ã¦ã„ãŸã®ã§è¬ãŒã¨ã‘ãŸ\n\n## AmazonLinux2\n\nç¾åœ¨ã®Localeã‚’ç¢ºèª\n\n````shell\n$ localectl status\nSystem Locale: LANG=en_US.UTF-8Ã—Dismiss this alert.\n````\n\nLocaleã§è¨­å®šã§ãã‚‹å€¤ã‚’ç¢ºèª\n\n````shell\n$ localectl list-locales\n````\n\nLocaleã‚’å¤‰æ›´\n\n````shell\n$ localectl set-locale LANG=ja_JP.utf8\n````\n\n### Dockerã‚³ãƒ³ãƒ†ãƒŠ\n\nå‚è€ƒ:\n\n* [AmazonLinux2ã®Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã«æ—¥æœ¬èªãƒ­ãƒ¼ã‚±ãƒ«ã‚’è¨­å®šã—ã¦ã¿ã¾ã—ãŸã€‚ - Qiita](https://qiita.com/yuyj109/items/a56e562599972eb37abd)\n\nDockerã‚³ãƒ³ãƒ†ãƒŠå†…ã§localectlã‚’æ‰“ã¤ã¨ã€privilegedã§ãªã„ã¨ `Failed to create bus connection` ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã®ã§ã€åˆ¥ã®ã‚„ã‚Šæ–¹ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚\n\nyumã§ `glibc-langpack-ja` ãŒã‚ã‚‹ã®ã§ã€ã“ã¡ã‚‰ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹\n\n````shell\n$ yum install -y glibc-langpack-ja\n...\nInstalled:\n  glibc-langpack-ja.x86_64 0:2.26-27.amzn2.0.4                                                                                                                                                              \n\nComplete!\n\n$ locale -a | grep ja\nja_JP.eucjp\nja_JP.utf8\n\n$ export LANG='ja_JP.utf8'\n$ locale\nLC_CTYPE=\"ja_JP.utf8\"\nLC_NUMERIC=\"ja_JP.utf8\"\nLC_TIME=\"ja_JP.utf8\"\nLC_COLLATE=\"ja_JP.utf8\"\nLC_MONETARY=\"ja_JP.utf8\"\nLC_MESSAGES=\"ja_JP.utf8\"\nLC_PAPER=\"ja_JP.utf8\"\nLC_NAME=\"ja_JP.utf8\"\nLC_ADDRESS=\"ja_JP.utf8\"\nLC_TELEPHONE=\"ja_JP.utf8\"\nLC_MEASUREMENT=\"ja_JP.utf8\"\nLC_IDENTIFICATION=\"ja_JP.utf8\"\nLC_ALL=\n\n````\n\nDockerfile\n\n````Dockerfile\nFROM amazonlinux:2\n\nRUN yum install -y glibc-langpack-ja \u0026\u0026 yum clean all\nENV LANG ja_JP.utf8\n````\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["2023/04/04","Linux"]},"/note/CloudFront":{"title":"CloudFront","content":"\n\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["AWS"]},"/note/Confluence-REST-API%E3%81%A7%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E3%81%BE%E3%81%A8%E3%82%81%E3%81%A6%E7%A7%BB%E5%8B%95":{"title":"Confluence REST APIã§ãƒšãƒ¼ã‚¸ã‚’ã¾ã¨ã‚ã¦ç§»å‹•","content":"\n2022-10-20ç¾åœ¨ã€Confluenceã®ãƒšãƒ¼ã‚¸ã‚’ä¸€æ‹¬ã§ç§»å‹•ã™ã‚‹ã‚ˆã†ãªæ©Ÿèƒ½ã¯ãªã„ã¿ãŸã„\n\nhttps://community.atlassian.com/t5/Confluence-questions/How-do-I-bulk-delete-or-move-pages-in-cloud-Confluence/qaq-p/1634378\n\nãªã®ã§ä½œã£ãŸ\n\n````shell\nparent_page_id=$1\ntarget_page_id=$2\nchild_pages=$(curl -u ${user_email}:${password} \"${CONFLUENCE_BASE_URL}/content/${parent_page_id}/child/page\")\necho $child_pages | jq -c '.results[]' | while read -r arr; do\n  page_id=$(echo $arr | jq -r '.id')\n  curl -u ${user_email}:${password} -XPUT \"${CONFLUENCE_BASE_URL}/content/${page_id}/move/append/${target_page_id}\"\ndone\n\n````\n\nãƒšãƒ¼ã‚¸ã®ã‚³ãƒ”ãƒ¼ã¯ã“ã¡ã‚‰\n[Confluence REST APIã§ãƒšãƒ¼ã‚¸ã‚’ã‚³ãƒ”ãƒ¼](note/Confluence%20REST%20APIã§ãƒšãƒ¼ã‚¸ã‚’ã‚³ãƒ”ãƒ¼.md)\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":[]},"/note/Confluence-REST-API%E3%81%A7%E3%83%9A%E3%83%BC%E3%82%B8%E3%82%92%E3%82%B3%E3%83%94%E3%83%BC":{"title":"Confluence REST APIã§ãƒšãƒ¼ã‚¸ã‚’ã‚³ãƒ”ãƒ¼","content":"\n\\#confluence\n\nå®šæœŸé–‹å‚¬ã•ã‚Œã‚‹ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®è­°äº‹éŒ²ã‚’ä½œã‚‹ã®ã‚’ç°¡ç•¥åŒ–ã—ãŸã‹ã£ãŸã€‚\nå‰å›ã®è­°äº‹éŒ²ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦è¿½è¨˜ã—ã¦ã„ãã‚¹ã‚¿ã‚¤ãƒ«ã ã£ãŸãŸã‚ã€\nã‚ã‚‹ãƒšãƒ¼ã‚¸é…ä¸‹ã®æœ€æ–°ã®ãƒšãƒ¼ã‚¸(=å‰å›ã®è­°äº‹éŒ²)ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã‚¿ã‚¤ãƒˆãƒ«ã‚’å¤‰ãˆã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’REST APIã‚’ä½¿ã£ã¦ä½œã£ãŸã€‚\n\nhttps://developer.atlassian.com/cloud/confluence/rest/v1/api-group-content---children-and-descendants/#api-wiki-rest-api-content-id-copy-post\n\n````shell\nfunction copy_latest_page() {\n  local parent_page_id=$1\n  local page_title=$2\n\n  # parent_pageé…ä¸‹ã®æœ€æ–°ã®ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ«ã€IDã‚’å–å¾— (ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã¯è€ƒãˆãšé›‘ã«)\n  local previous_page=$(curl -u ${user_email}:${password} \"https://${YOUR_CONFLUENCE_DOMAIN}/wiki/rest/api/content/${parent_page_id}/child/page\" | jq -r '.results[] | .title + \",\" + .id' | sort | tail -n 1)\n  local previous_page_id=$(echo $latest_page | cut -d ',' -f 2)\n  if [[ -z \"${previous_page_id}\" ]]; then\n    echo \"previous page is not found\"\n    exit 1\n  fi\n\n  local copy_body=$(cat \u003c\u003c EOS\n{\n  \"pageTitle\": \"${page_title}\",\n  \"copyAttachments\": true,\n  \"destination\": {\n    \"type\": \"parent_page\",\n    \"value\": \"${parent_page_id}\"\n  }\n}\nEOS\n  )\n  copy_body=$(echo $copy_body | jq -c)\n\n  local copy_result=$(curl -u ${user_email}:${password} -XPOST -f -H 'X-Atlassian-Token: no-check' -H 'Content-Type: application/json' \"https://${YOUR_CONFLUENCE_DOMAIN}/wiki/rest/api/content/${previous_page_id}/copy\" -d \"${copy_body}\" )\n\n  local retval=$?\n\n  # copyAttachments=true ã«ã™ã‚‹ã¨ç”»åƒãŒå¤šã„ãƒšãƒ¼ã‚¸ã§ã¯ã‚³ãƒ”ãƒ¼ã«æ™‚é–“ãŒã‹ã‹ã‚Šã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã™ã‚‹ã®ã§ã€ãã®å ´åˆã¯ã‚³ãƒ”ãƒ¼å®Œäº†ã—ãŸã‹ã‚’ãƒãƒ¼ãƒªãƒ³ã‚°ã§ç¢ºèªã™ã‚‹\n  if [[ ! $retval -eq 0 || -z $copy_result ]]; then\n    i=0\n    while [[ $i -lt 10 ]]; do\n      echo \"waiting... $i\"\n      local latest_page=$(curl -u ${user_email}:${password} \"https://${YOUR_CONFLUENCE_DOMAIN}/wiki/rest/api/content/${parent_page_id}/child/page\" | jq -r '.results[] | .title + \",\" + .id' | sort | tail -n 1)\n      local latest_page_title=$(echo $latest_page | cut -d ',' -f 1)\n      local latest_page_id=$(echo $latest_page | cut -d ',' -f 2)\n\n      if [[ \"${latest_page_title}\" = \"${page_title}\" ]]; then\n        copied_page_id=${latest_page_id}\n        break\n      fi\n      \n      sleep 30s\n      i=$((i+1))\n    done\n\n  else\n    copied_page_id=$(echo $copy_result | jq -r '.id')\n  fi\n\n\n  echo \"Copied from '${previous_page_id}' -\u003e '${copied_page_id}' (parent: '${parent_page_id}')\"\n}\n\n````\n\n* ç°¡å˜ã«Basicèªè¨¼ã«ã—ãŸã€‚OAuthç­‰ã‚‚ä½¿ãˆã‚‹\n* æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ã®å¤šã„ãƒšãƒ¼ã‚¸ã§ã‚³ãƒ”ãƒ¼ã«æ™‚é–“ãŒã‹ã‹ã‚Šã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã™ã‚‹éƒ¨åˆ†ã®è§£æ±ºãŒä¸€ç•ªè‹¦åŠ´ã—ãŸã€‚ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå€¤ã¯è¨­å®šã§ããã†ã«ãªã‹ã£ãŸã®ã§ã€ä½œæˆã•ã‚ŒãŸã‹ã‚’ä½•å›ã‹è¦‹ã«è¡Œãæ–¹å¼ã‚’å–ã£ãŸã€‚ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ãƒšãƒ¼ã‚¸ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ã‚‚ã‚„ã¯ã‚Šæ™‚é–“ãŒã‹ã‹ã‚‹ã®ã§ã€æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤šã„å ´åˆã¯æ³¨æ„ãŒå¿…è¦ã \n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":[]},"/note/DBUnit%E3%81%A7Potential-problem-found%E3%81%AEWARN%E3%81%8C%E5%87%BA%E3%82%8B":{"title":"DBUnitã§Potential problem foundã®WARNãŒå‡ºã‚‹","content":"\n\\#Java\n\nDBUnit ã‚’å®Ÿè¡Œã™ã‚‹ã¨ `Potential problem found: The configured data type factory 'class org.dbunit.dataset.datatype.DefaultDataTypeFactory' might cause problems with the current database` ã¨æ€’ã‚‰ã‚Œã‚‹ã®ã‚’è§£æ±ºã—ãŸ\n\n## äº‹è±¡\n\n````txt\n[main] WARN org.dbunit.dataset.AbstractTableMetaData - Potential problem found: The configured data type factory 'class org.dbunit.dataset.datatype.DefaultDataTypeFactory' might cause problems with the current database 'H2' (e.g. some datatypes may not be supported properly). In rare cases you might see this message because the list of supported database products is incomplete (list=[derby]). If so please request a java-class update via the forums.If you are using your own IDataTypeFactory extending DefaultDataTypeFactory, ensure that you override getValidDbProducts() to specify the supported database products.\n````\n\nDefaultDataTypeFactory ã ã¨ DBMS ä¾å­˜ã®å‹ãŒè§£æ±ºã§ããªã„å¯èƒ½æ€§ãŒã‚ã‚‹ã‹ã‚‰ã€ä½¿ã£ã¦ã‚‹ DBMS ç”¨ã® DataTypeFactory ã‚’ä½¿ãˆã¨ã„ã†è¶£æ—¨\n\n## è§£æ±ºç­–\n\n\u003chttp://dbunit.sourceforge.net/faq.html#typefactory\u003e\n\nconfigã®DATATYPE_FACTORYã«ã€ä½¿ã£ã¦ã„ã‚‹DBã®Factoryã‚’ã‚»ãƒƒãƒˆã—ã¦ã‚ã’ã‚Œã°ã‚ˆã„\n\n````java\nIDatabaseConnection connection = new DatabaseConnection(jdbcConnection, schema);\nDatabaseConfig config = connection.getConfig();\nconfig.setProperty(DatabaseConfig.PROPERTY_DATATYPE_FACTORY, new OracleDataTypeFactory());\n````\n\n## JdbcDataTesterã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆ\n\nã“ã‚“ãªæ„Ÿã˜ã§DBã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’ã—ã¦ã„ãŸ\n\n````java\nvoid cleanlyInsert(final IDataSet dataSet) throws Exception {\n    final IDatabaseTester databaseTester = new JdbcDatabaseTester(JDBC_DRIVER, JDBC_URL, JDBC_USER, JDBC_PASSWORD);\n    databaseTester.setSetUpOperation(DatabaseOperation.CLEAN_INSERT);\n    databaseTester.setDataSet(dataSet);\n    databaseTester.onSetup();\n}\n````\n\næœ€åˆã€ã“ã†ã—ãŸã‚‰ã„ã„ã‚“ã˜ã‚ƒãªã„ï¼Ÿã¨æ€ã£ã¦é©å½“ã«ã‚»ãƒƒãƒˆã—ãŸãŒåæ˜ ã•ã‚Œãªã‹ã£ãŸã€‚onSetup()æ™‚ã«åŒã˜WARNãŒå‡ºã‚‹\n\n````java\nvoid cleanlyInsert(final IDataSet dataSet) throws Exception {\n    final IDatabaseTester databaseTester = new JdbcDatabaseTester(JDBC_DRIVER, JDBC_URL, JDBC_USER, JDBC_PASSWORD);\n    databaseTester.getConnection().getConfig().setProperty( config.setProperty(DatabaseConfig.PROPERTY_DATATYPE_FACTORY, new OracleDataTypeFactory());\n    databaseTester.setSetUpOperation(DatabaseOperation.CLEAN_INSERT);\n    databaseTester.setDataSet(dataSet);\n    databaseTester.onSetup();\n}\n````\n\nå†…éƒ¨ã§connectionã‚’ä½œã‚‹ã¨ãã«configã‚’newã—ã¦ã„ã‚‹ã®ã§ã€ä¸Šè¨˜ã§ã¯åæ˜ ã•ã‚Œãªã„ã€‚\nã“ã†ã™ã‚‹ã¨ã„ã„\n\n````java\nimport org.dbunit.JdbcDatabaseTester;\nimport org.dbunit.database.DatabaseConfig;\nimport org.dbunit.database.IDatabaseConnection;\nimport org.dbunit.ext.h2.H2DataTypeFactory;\n\npublic class H2JdbcDatabaseTester extends JdbcDatabaseTester {\n    public H2JdbcDatabaseTester(String driverClass, String connectionUrl, String username, String password) throws ClassNotFoundException {\n        super(driverClass, connectionUrl, username, password);\n    }\n\n    @Override\n    public IDatabaseConnection getConnection() throws Exception {\n        IDatabaseConnection connection = super.getConnection();\n        DatabaseConfig dbConfig = connection.getConfig();\n        // DBã‚¢ã‚¯ã‚»ã‚¹æ™‚ã«å‡ºã‚‹WARNã‚’æŠ‘åˆ¶\n        dbConfig.setProperty(DatabaseConfig.PROPERTY_DATATYPE_FACTORY, new H2DataTypeFactory());\n        return connection;\n    }\n}\n\n\nvoid cleanlyInsert(final IDataSet dataSet) throws Exception {\n    final IDatabaseTester databaseTester = new H2JdbcDatabaseTester(JDBC_DRIVER, JDBC_URL, JDBC_USER, JDBC_PASSWORD);\n    databaseTester.setSetUpOperation(DatabaseOperation.CLEAN_INSERT);\n    databaseTester.setDataSet(dataSet);\n    databaseTester.onSetup();\n}\n\n````\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["Java"]},"/note/DBeaver":{"title":"DBeaver","content":"\nDBã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ\n\n\u003chttps://dbeaver.io/\u003e\n\n[DBeaverä½¿ã„æ–¹ãƒ¡ãƒ¢ - Qiita](https://qiita.com/12345/items/48f6856e32fd618ea307)\n\n* Eclipseãƒ™ãƒ¼ã‚¹\n* ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒé »ç¹\n* ã•ã¾ã–ã¾ãªDBã«å¯¾å¿œã—ã¦ã„ã‚‹\n\n## ãƒ—ãƒ©ã‚°ã‚¤ãƒ³\n\nEclipseã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒãã®ã¾ã¾å…¥ã‚Œã‚‰ã‚Œã‚‹ã€‚\nHelp \u003e Install New Software ã‹ã‚‰ã€ `Work with` ã«siteã®urlã‚’ã„ã‚Œã¦ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ãã€‚\n\n### vrapper\n\n\u003chttp://vrapper.sourceforge.net/update-site/stable/\u003e\n\n### Eclipse Color Theme\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["DB"]},"/note/Docker-build%E6%99%82%E3%81%ABhost%E3%81%AEssh%E3%82%AD%E3%83%BC%E3%82%92%E4%BD%BF%E3%81%86":{"title":"Docker buildæ™‚ã«hostã®sshã‚­ãƒ¼ã‚’ä½¿ã†","content":"\n\\#Docker #git\n\n## å‚è€ƒ\n\n[BuildKit ã§ã‚¤ãƒ¡ãƒ¼ã‚¸æ§‹ç¯‰ â€” Docker-docs-ja 20.10 ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.docker.jp/develop/develop-images/build_enhancements.html)\n[docker buildã™ã‚‹éš›ã«hostå´ã®ssh keyã‚’ä½¿ã£ã¦buildã™ã‚‹ - Qiita](https://qiita.com/toyama0919/items/190eb19298e523094ba2)\n[Docker ã® BuildKit ã‚’ä½¿ã£ã¦ã‚»ã‚­ãƒ¥ã‚¢ãªãƒ“ãƒ«ãƒ‰ã‚’è©¦ã™ - Qiita](https://qiita.com/takasp/items/56e1399a484ed5bfaade)\n\n## ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ssh keyã‚’ä½¿ã†å ´åˆ\n\n````dockerfile\n# syntax=docker/dockerfile:1\nFROM alpine\n\n# ssh ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ git ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\nRUN apk add --no-cache openssh-client git\n\n# github.com ã®ãŸã‚ã®å…¬é–‹éµã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰\nRUN mkdir -p -m 0600 ~/.ssh \u0026\u0026 ssh-keyscan github.com \u003e\u003e ~/.ssh/known_hosts\n\n# ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ»ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³\nRUN --mount=type=ssh git clone git@github.com:myorg/myproject.git myproject\n````\n\n````shell\n$ export DOCKER_BUILDKIT=1\n$ docker build --ssh default .\n````\n\n## ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹å ´åˆ\n\n`type=secret` ã‚’ä½¿ã†ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ã§ãã‚‹\n\n````dockerfile\n# syntax = docker/dockerfile:1\n\nFROM alpine\n\n# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®å ´æ‰€ã‹ã‚‰ã€ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’è¡¨ç¤º\nRUN --mount=type=secret,id=mysecret cat /run/secrets/mysecret\n\n# ä»»æ„ã®ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã®å ´æ‰€ã‹ã‚‰ã€ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’è¡¨ç¤º\nRUN --mount=type=secret,id=mysecret,dst=/foobar cat /foobar\n````\n\n````shell\n$ docker build --secret id=mysecret,src=mysecret.txt .\n````\n\nã“ã‚Œã‚’ä½¿ã£ã¦ssh keyã‚’æ¸¡ã™\n\n````dockerfile\n# syntax=docker/dockerfile:1\nFROM alpine\n\n# ssh ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨ git ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\nRUN apk add --no-cache openssh-client git\n\n# github.com ã®ãŸã‚ã®å…¬é–‹éµã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰\nRUN mkdir -p -m 0600 ~/.ssh \u0026\u0026 ssh-keyscan github.com \u003e\u003e ~/.ssh/known_hosts\n\n# ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒ»ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³\nRUN --mount=type=secret,id=ssh,dst=/root/.ssh/id_rsa git clone git@github.com:myorg/myproject.git myproject\n````\n\n````shell\n$ docker build --secret id=ssh,src=~/.ssh/id_rsa_github .\n````\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["Docker","git"]},"/note/Dockerfile%E5%86%85%E3%81%A7%E6%9D%A1%E4%BB%B6%E5%88%86%E5%B2%90%E3%81%99%E3%82%8B":{"title":"Dockerfileå†…ã§æ¡ä»¶åˆ†å²ã™ã‚‹","content":"\n[docker - Dockerfile if else condition with external arguments - Stack Overflow](https://stackoverflow.com/questions/43654656/dockerfile-if-else-condition-with-external-arguments)\n[Dockerfile å†…ã§æ¡ä»¶ã«å¿œã˜ã¦å‡¦ç†ã‚’å¤‰ãˆãŸã‹ã£ãŸã®ã§è©¦è¡ŒéŒ¯èª¤ã—ãŸãƒ¡ãƒ¢ - ã‚ˆã†ã¸ã„ã®æ—¥ã€…ç²¾é€²XP](https://inokara.hateblo.jp/entry/2021/01/02/165315)\n\nå‰æã¨ã—ã¦ã€Dockerfileå†…ã§åˆ¶å¾¡æ§‹æ–‡ã¯ä½¿ãˆãªã„ã€‚ä½¿ã‚ãšã‚·ãƒ³ãƒ—ãƒ«ã«ã™ã‚‹ã£ã¦ã„ã†æ€æƒ³ã«ãªã£ã¦ã„ã‚‹\n\n## 1. shell scriptã§åˆ†å²\n\n````dockerfile\nFROM centos:7\nARG arg\nRUN if [[ -z \"$arg\" ]] ; then echo Argument not provided ; else echo Argument is $arg ; fi\n````\n\nã“ã‚Œã ã¨shellå†…ã§ã§ãã‚‹ã“ã¨ã¯åˆ†å²ã§ãã‚‹ãŒCOPYãªã©Dockerfileå†…ã®ã‚³ãƒãƒ³ãƒ‰ã«ã¯ä½¿ãˆãªã„ã€‚\n\n## 2. ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ã‚’ä½¿ã†\n\n````dockerfile\nARG my_arg\n\nFROM centos:7 AS base\nRUN echo \"do stuff with the centos image\"\n\nFROM base AS branch-version-1\nRUN echo \"this is the stage that sets VAR=TRUE\"\nENV VAR=TRUE\n\nFROM base AS branch-version-2\nRUN echo \"this is the stage that sets VAR=FALSE\"\nENV VAR=FALSE\n\nFROM branch-version-${my_arg} AS final\nRUN echo \"VAR is equal to ${VAR}\"\n````\n\n`docker build -t my_docker . --build-arg my_arg=2`\n\nbaseã‚’åŸºæº–ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ã—ã¦ã€è¤‡æ•°ç¨®é¡ã®stageã‚’å®šç¾©ã—ã¦globalãªARGã§stageåã‚’æŒ‡å®šã™ã‚‹\n\n## 2'. targetã‚’æŒ‡å®šã™ã‚‹\n\n`--build-arg` ã§æŒ‡å®šã™ã‚‹ã®ã§ã¯ãªãã€ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ã® `--target` ã§æŒ‡å®šã™ã‚‹æ–¹æ³•ã€‚ã“ã¡ã‚‰ã®ã»ã†ãŒtargetãŒæ˜ç¢ºã«ãªã£ã¦ã„ã„ã¨æ€ã£ãŸã€‚\n\n````dockerfile\nFROM foo as base\nRUN ...\nWORKDIR /opt/my-proj\n\nFROM base as npm-ci-dev\n# invalidate cache\nCOPY --chown=www-data:www-data ./package.json /opt/my-proj/package.json\nCOPY --chown=www-data:www-data ./package-lock.json /opt/my-proj/package-lock.json\nRUN npm ci\n\nFROM base as npm-ci-prod\n# invalidate cache\nCOPY --chown=www-data:www-data ./package.json /opt/my-proj/package.json\nCOPY --chown=www-data:www-data ./package-lock.json /opt/my-proj/package-lock.json\nRUN npm ci --only=prod\n\nFROM base as proj-files\nCOPY --chown=www-data:www-data ./ /opt/my-proj\n\nFROM base as image-dev\n# Will mount, not copy in dev environment\nRUN ...\n\nFROM base as image-ci\nCOPY --from=npm-ci-dev /opt/my-proj .\nCOPY --from=proj-files /opt/my-proj .\nRUN ...\n\nFROM base as image-stage\nCOPY --from=npm-ci-prod /opt/my-proj .\nCOPY --from=proj-files /opt/my-proj .\nRUN ...\n\nFROM base as image-prod\nCOPY --from=npm-ci-prod /opt/my-proj .\nCOPY --from=proj-files /opt/my-proj .\nRUN ...\n````\n\n`docker build --target image-dev -t foo .`\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["Docker"]},"/note/EC2%E3%81%AEuserdata-%E3%81%AE%E5%86%85%E5%AE%B9%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B":{"title":"EC2ã®userdata ã®å†…å®¹ã‚’ç¢ºèªã™ã‚‹","content":"\n\n````shell\n$ cd /var/lib/cloud/instances/i-\u003cã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ID\u003e/\n$ ls -al\ntotal 68\ndrwxr-xr-x 5 root root   218 Jul 14 18:00 .\ndrwxr-xr-x 3 root root    33 Jul 14 17:59 ..\n-rw-r--r-- 1 root root    59 Jul 14 18:00 boot-finished\n-rw------- 1 root root     0 Jul 14 17:59 cloud-config.txt\n-rw-r--r-- 1 root root    29 Jul 14 17:59 datasource\ndrwxr-xr-x 2 root root     6 Jul 14 17:59 handlers\n-r-------- 1 root root 25855 Jul 14 17:59 obj.pkl\ndrwxr-xr-x 2 root root    22 Jul 14 17:59 scripts\ndrwxr-xr-x 2 root root  4096 Jul 14 18:00 sem\n-rw------- 1 root root  9945 Jul 14 17:59 user-data.txt\n-rw------- 1 root root 10288 Jul 14 17:59 user-data.txt.i\n-rw------- 1 root root     0 Jul 14 17:59 vendor-data.txt\n-rw------- 1 root root   345 Jul 14 17:59 vendor-data.txt.i\n$ cat user-data.txt\n=\u003e userdataã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆ\n````\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["EC2","AWS"]},"/note/ECS%E3%81%AEtomcat%E3%82%92%E6%89%8B%E3%81%A7%E5%B7%AE%E3%81%97%E6%9B%BF%E3%81%88%E3%82%8B":{"title":"ECSã®tomcatã‚’æ‰‹ã§å·®ã—æ›¿ãˆã‚‹","content":"\n## ã‚„ã‚ŠãŸã„ã“ã¨\n\n[Elastic Container Service](note/Elastic%20Container%20Service.md) ã«å¯¾ã—ã¦ã€æ¤œè¨¼ç’°å¢ƒã®ãƒªãƒªãƒ¼ã‚¹ã®éš›ã«é€šå¸¸é€šã‚Štomcatã‚³ãƒ³ãƒ†ãƒŠãƒ“ãƒ«ãƒ‰ã€œRolling updateã™ã‚‹ã¨5åˆ†ãã‚‰ã„ã¯ã‹ã‹ã£ã¦ã—ã¾ã†ã€‚\nã¡ã‚‡ã£ã¨è¨­å®šã‚’å¤‰ãˆãŸã„ã ã‘ã®ã¨ãã«æ™‚é–“ãŒã‹ã‹ã‚Šã™ãã‚‹ã®ã§ã€ã‚ªãƒ³ãƒ—ãƒ¬ã®ã‚ˆã†ã«æ‰‹å‹•ã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦æ‰‹è»½ã«å¤‰æ›´ã—ãŸã„ã€‚\n\n## æ‰‹é †\n\näº‹å‰ã«ECSã‚¿ã‚¹ã‚¯ãŒå®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’èª¿ã¹ã‚‹\n\n````shell\n# warã‚’ãƒ­ãƒ¼ã‚«ãƒ«ãƒ“ãƒ«ãƒ‰\n$ mvn package\n# scp\n$ scp target/app.war \u003cEC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹\u003e:\n$ ssh \u003cEC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹\u003e\n\n# dockerã‚³ãƒ³ãƒ†ãƒŠå†…ã«ã‚³ãƒ”ãƒ¼\n[user@ip-xx-xx-xx-xx ~]$ docker cp app.war $(docker ps -f 'name=app' -q):/tmp\n# dockerã‚³ãƒ³ãƒ†ãƒŠå†…ã«å…¥ã‚‹\n[user@ip-xx-xx-xx-xx ~]$ docker exec -it $(docker ps -f 'name=app' -q) bash\n\nbash-4.2$ cp /tmp/app.war $TOMCAT_HOME/webapps/\n# =\u003e ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã‚‹ã®ã‚’å¾…ã¤\n\n````\n\n#### æ³¨æ„\n\n`conf/server.xml` ã« `autoDeploy=\"true\"` ã®è¨­å®šãŒå…¥ã£ã¦ã„ãªã„ã¨ã€å†èª­ã¿è¾¼ã¿ã•ã‚Œãªã„\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["2023/04/30","AWS"]},"/note/Elastic-Container-Service":{"title":"Elastic Container Service","content":"\nhttps://aws.amazon.com/jp/ecs/\n\nãƒ•ãƒ«ãƒãƒãƒ¼ã‚¸ãƒ‰ã‚³ãƒ³ãƒ†ãƒŠã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚µãƒ¼ãƒ“ã‚¹ã§ã‚ã‚Šã€ã‚³ãƒ³ãƒ†ãƒŠåŒ–ã•ã‚ŒãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç°¡å˜ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã€ç®¡ç†ã€ãŠã‚ˆã³ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ã§ãã¾ã™ã€‚\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["2023/05/04","AWS"]},"/note/Evergreen-Notes":{"title":"Evergreen Notes","content":"\nhttps://jmatsuzaki.com/archives/27412\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["obsidian","memo"]},"/note/GAS":{"title":"GAS","content":"\n## Google Apps Script ã¨ã¯ï¼Ÿ\n\n* \u003chttps://developers.google.com/apps-script/overview\u003e\n* Googleç¤¾ãŒæä¾›ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èª\n* JavaScriptãƒ™ãƒ¼ã‚¹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èª\n  * åŸºæœ¬æ§‹æ–‡ã¯JavaScriptã¨åŒã˜\n\n## Google Apps Script ã¨ã¯ï¼Ÿ\n\n* Googleã®å„ã‚µãƒ¼ãƒ“ã‚¹ã¨é€£æºã—ã¦ã€é–²è¦§ç·¨é›†ã§ãã‚‹\n  * Gmail\n  * Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼\n  * Googleã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆ\n  * Googleãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ\n  * Googleãƒ•ã‚©ãƒ¼ãƒ \n* ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ä¸è¦ã§ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ç·¨é›†ã§ãã‚‹\n  * ã‚µãƒ¼ãƒãƒ¬ã‚¹\n  * ã‚¯ãƒ©ã‚¦ãƒ‰ä¸Šã§å®Ÿè¡Œã•ã‚Œã‚‹\n* æ›´æ–°æƒ…å ±\n  * \u003chttps://developers.google.com/apps-script/releases/\u003e\n\n## GASã§ã§ãã‚‹ã“ã¨\n\n* æ™‚é–“æŒ‡å®šã‚„ã‚¤ãƒ™ãƒ³ãƒˆã‚’ãƒˆãƒªã‚¬ãƒ¼ã«ã—ã¦ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã§ãã‚‹\n* ã‚«ã‚¹ã‚¿ãƒ ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‚„ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãªã©ã‚’Docs,Sheets,Formsã«è¿½åŠ ã§ãã‚‹\n* ç‹¬è‡ªé–¢æ•°ã‚’Sheetsã«è¿½åŠ ã™ã‚‹\n* Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å…¬é–‹\n\n## åˆ©ç”¨ã§ãã‚‹æ©Ÿèƒ½\n\n* Googleã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ãƒ‡ãƒ¼ã‚¿ã‚’æ“ä½œã—ãŸã‚Šã€å¤–éƒ¨ã¨é€£æºã™ã‚‹æ©Ÿèƒ½ãŒæä¾›ã•ã‚Œã¦ã„ã‚‹\n* G Suite Service\n  * GoogleãŒæä¾›ã™ã‚‹åŸºæœ¬çš„ãªã‚µãƒ¼ãƒ“ã‚¹ã®æ“ä½œ\n* Script Service\n  * ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚µãƒ¼ãƒ“ã‚¹\n  * Base, Utilities, URLFetch, Properties ãªã©\n* Advanced Google Service\n  * æ‹¡å¼µã‚µãƒ¼ãƒ“ã‚¹\n  * BigQuery, Analytics\n\n## Good and Bad\n\n### Good\n\n* ç’°å¢ƒæ§‹ç¯‰ä¸è¦\n  * ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒæ§‹ç¯‰ã¯å¾Œè¿°\n* ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨ãƒ–ãƒ©ã‚¦ã‚¶ãŒã‚ã‚Œã°ç·¨é›†ã€å®Ÿè¡ŒãŒã§ãã‚‹\n* ã‚µãƒ¼ãƒãƒ¬ã‚¹\n* ç„¡æ–™\n\n### Bad\n\n* ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã®ä½¿ã„å‹æ‰‹ãŒå¾®å¦™\n* Gitã§ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãŒã§ããªã„\n\n-\u003e 2018å¹´ã®ãƒªãƒªãƒ¼ã‚¹ã§å¯¾å¿œã•ã‚ŒãŸ(å¾Œè¿°)\n\n* ã‚¤ãƒ³ãƒˆãƒ©ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„\n  * Jenkinsã‚’ç›´æ¥å®Ÿè¡Œã§ããªã„\n* å®Ÿè¡Œã«å›æ•°åˆ¶é™ãŒã‚ã‚‹\n  * ã¡ã‚‡ã£ã¨ã—ãŸé‹ç”¨ãƒ„ãƒ¼ãƒ«ã«ã¯ã„ã„ãŒå¤–éƒ¨å‘ãã«ã¯é›£ã—ã„\n\n## ä½¿ã£ã¦ã¿ã‚‹\n\n* ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹ãã«ã¯2é€šã‚Šã®æ–¹æ³•ãŒã‚ã‚‹\n  * ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã€ãƒ•ã‚©ãƒ¼ãƒ ãªã©ã‚’é–‹ã„ã¦\\[ãƒ„ãƒ¼ãƒ«â†’ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¨ãƒ‡ã‚£ã‚¿\\]ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹\n    * ã‚µãƒ¼ãƒ“ã‚¹ã«ç´ä»˜ã„ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒä½œæˆã•ã‚Œã‚‹\n  * [ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰](https://script.google.com/home)ã‚„ãƒ‰ãƒ©ã‚¤ãƒ–ã‹ã‚‰ç›´æ¥æ–°è¦ä½œæˆã™ã‚‹\n* function ã®ä¸­ã«å‡¦ç†ã‚’æ›¸ã\n  * `ctrl + space` ã§è£œå®Œã•ã‚Œã‚‹\n* é–¢æ•°ã‚’é¸æŠã—ã¦å®Ÿè¡Œã€ãƒ‡ãƒãƒƒã‚°\n  * æ‰¿èªãŒå¿…è¦\n    * ä½¿ç”¨ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã«å¿œã˜ã¦æ¨©é™ã‚’è¨±å¯ã™ã‚‹å¿…è¦ãŒã‚ã‚‹\n    * åˆå›ã¯GASã®å®Ÿè¡Œè¨±å¯ã®ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒå‡ºã‚‹ã‹ã‚‚ã—ã‚Œãªã„\n      * TODO: å›³\n        \u003chttps://www.virment.com/step-allow-google-apps-script/\u003e\n    * ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã®æƒ…å ±ã¯ã€ãƒ¦ãƒ¼ã‚¶ã®\\[ã‚¢ã‚«ã‚¦ãƒ³ãƒˆæƒ…å ±\\]-\u003e\\[ãƒ­ã‚°ã‚¤ãƒ³ã¨ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£\\]-\u003e\\[æ¥ç¶šæ¸ˆã¿ã®ã‚¢ãƒ—ãƒªã¨ã‚µã‚¤ãƒˆ\\]-\u003e\\[ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã«æ¥ç¶šã•ã‚Œã¦ã„ã‚‹ã‚¢ãƒ—ãƒª\\]ã§ç¢ºèªã§ãã‚‹\n\n## ãƒ­ã‚°\n\n* `Logger.log` ã‚’é–¢æ•°å†…ã«æ›¸ã\n  * å€¤ã‚’ãã®ã¾ã¾è¡¨ç¤ºã™ã‚‹ã€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’æŒ‡å®šã™ã‚‹æ–¹æ³•ãŒã§ãã‚‹\n  * Logger.log(object)\n  * Logger.log(format, string)\n* å®Ÿè¡Œå¾Œ \\[è¡¨ç¤º\\]-\u003e\\[ãƒ­ã‚°\\] ã§é–‹ãã¾ãŸã¯ `[cmd] + [Enter]`\n* \\[è¡¨ç¤º\\] -\u003e \\[å®Ÿè¡Œãƒˆãƒ©ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆ\\] ã§å„é–¢æ•°ã®å‘¼ã³å‡ºã—é †ãŒè¡¨ç¤ºã•ã‚Œã‚‹\n\n## ãƒ‡ãƒãƒƒã‚°\n\n* ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆã‚’è¨­ç½®\n* è™«ãƒãƒ¼ã‚¯ã§ãƒ‡ãƒãƒƒã‚°å®Ÿè¡Œ\n* IDEã¨åŒã˜ã‚ˆã†ãªä½¿ã„æ–¹ã§ã‚¹ãƒ†ãƒƒãƒ—å®Ÿè¡Œã‚„ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä¸­èº«è¡¨ç¤ºãªã©ãŒã§ãã‚‹\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["GAS"]},"/note/GAS%E3%81%ABjest%E3%82%92%E5%B0%8E%E5%85%A5%E3%81%99%E3%82%8B":{"title":"GASã«jestã‚’å°å…¥ã™ã‚‹","content":"\nclasp + TypeScriptã§ã‚ã‚‹ã“ã¨ãŒå‰æ\n\n* [GASã‚’claspã§ãƒ­ãƒ¼ã‚«ãƒ«ã§æ›¸ã](GASã‚’claspã§ãƒ­ãƒ¼ã‚«ãƒ«ã§æ›¸ã.md)\n* [GASã‚’TSã§æ›¸ã‘ã‚‹ã‚ˆã†ã«ã™ã‚‹](GASã‚’TSã§æ›¸ã‘ã‚‹ã‚ˆã†ã«ã™ã‚‹.md)\n\n````shell\n$ npm install -D @types/jest jest ts-jest\n````\n\n`jest.config.js`\n\n````javascript\nmodule.exports = {\n    preset: 'ts-jest',\n    testMatch: ['**/__tests__/**/*.+(ts|tsx|js)'],\n    globals: { SpreadsheetApp: {}, UrlFetchApp: {}, Utilities: {} },\n}\n````\n\n### globalsã¨ã¯\n\nGASå›ºæœ‰ã®å‹å®šç¾©ã‚’mockã™ã‚‹ãŸã‚ã®è¨­å®š\n\nGASä¸Šã§ã¯SpreadsheetAppãŒä½¿ãˆãŸã‚Šã™ã‚‹ãŒã€ãƒ­ãƒ¼ã‚«ãƒ«ã§å®Ÿè¡Œã™ã‚‹ã¨ãã«ã¯å½“ç„¶å­˜åœ¨ã—ãªã„ãŸã‚ã€window.SpreadsheetAppã‚’å®šç¾©ã—ã¦ã„ã‚‹\n\nãƒ¡ã‚½ãƒƒãƒ‰æ•°ã®å¤šã„interfaceã‚’å®Ÿè£…ã™ã‚‹ã®ã¯å¤§å¤‰ãªã®ã§ã€\n\u003chttps://github.com/marchaos/jest-mock-extended\u003e\nãªã©ã‚’ä½¿ã†\n\n````javascript\nimport { mock } from 'jest-mock-extended'\n\ndescribe('test', () =\u003e {\n    const values = [\n        ['Bob', new Date('2021-01-02T15:04:05')]\n        ['Alice', new Date('2021-02-03T15:04:05')]\n    ]\n\n    // SpreadsheetAppã‚’mockã™ã‚‹\n    const mockRange = mock\u003cGoogleAppsScript.Spreadsheet.Range\u003e()\n    mockRange.getValues.mockReturnValue(values)\n    const mockSheet = mock\u003cGoogleAppsScript.Spreadsheet.Sheet\u003e()\n    mockSheet.getRange.mockReturnValue(mockRange)\n    const mockSpreadsheet = mock\u003cGoogleAppsScript.Spreadsheet.Spreadsheet\u003e()\n    mockSpreadsheet.getSheetByName.mockReturnValue(mockSheet)\n    SpreadsheetApp.getActiveSpreadsheet = jest.fn(() =\u003e {\n        return mockSpreadsheet\n    })\n\n    // Utilitiesã‚’mockã™ã‚‹\n    Utilities.formatDate = jest.fn((date: Date) =\u003e {\n        return `${date.getFullYear()}-${date.getMonth() \u003c 9 ? '0' + (date.getMonth() + 1) : date.getMonth() + 1}-${\n            date.getDate() \u003c 10 ? '0' + date.getDate() : date.getDate()\n        }T${date.getHours() \u003c 10 ? '0' + date.getHours() : date.getHours()}:${\n            date.getMinutes() \u003c 10 ? '0' + date.getMinutes() : date.getMinutes()\n        }:${date.getSeconds() \u003c 10 ? '0' + date.getSeconds() : date.getSeconds()}`\n    })\n\n    const actual = doFormat()\n\n    expect(mockSheet.getRange).toHaveBeenCalledTimes(1)\n    expect(actual).toBe('2021-01-02T15:04:05')\n}\n\nexport function doFormat() {\n    // sheetã‚’å–å¾—\n    const mysheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('mysheet')\n    // ã‚»ãƒ«ã®å€¤ã‚’é…åˆ—ã§å–å¾—\n    const values = mysheet.getRange(1, 1, 2, 2).getValues()\n    // æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ\n    const formatted = Utilities.formatDate(values[0][1])\n    return formatted\n}\n\n````\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["GAS","TypeScript","unittest"]},"/note/GAS%E3%82%92TS%E3%81%A7%E6%9B%B8%E3%81%91%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B":{"title":"GASã‚’TSã§æ›¸ã‘ã‚‹ã‚ˆã†ã«ã™ã‚‹","content":"\n[clasp](note/clasp.md) ã‚’ä½¿ã†ã¨ã€[GAS](note/GAS.md) ã‚’TypeScriptã§æ›¸ãã“ã¨ãŒã§ãã‚‹ã€‚\nclasp 1.5.0 ã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚\n\n\u003chttps://github.com/google/clasp/blob/master/docs/typescript.md\u003e\n\nãƒ­ãƒ¼ã‚«ãƒ«ã§tsãƒ•ã‚¡ã‚¤ãƒ«ã§æ›¸ã„ãŸGASã‚’pushã™ã‚‹ã¨ã€è‡ªå‹•ã§ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«ã—ã¦ã‹ã‚‰ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã‚Œã‚‹\n\n### GASã‚’TSã§æ›¸ã‘ã‚‹ã‚ˆã†ã«ã™ã‚‹\n\nclaspã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã€google-apps-scriptã®å‹å®šç¾©ã‚’è¿½åŠ \n\n````shell\n$ npm install -D @types/google-apps-script\n````\n\nã“ã‚Œã«ã‚ˆã£ã¦ã€IDEä¸Šã§SpreadsheetAppãªã©GASå›ºæœ‰ã®å®šç¾©ã‚‚è£œå®Œã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹\n\n### tsconfig.jsonã‚’è¿½åŠ ã™ã‚‹\n\n`tsconfig.json`\n\n````json\n{\n  \"compilerOptions\": {\n    \"lib\": [\n      \"esnext\"\n    ],\n    \"target\": \"ES2019\",\n    \"experimentalDecorators\": true,\n    \"esModuleInterop\": true\n  }\n}\n````\n\n### tsãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã£ã¦pushã™ã‚‹\n\n`hello.ts`\n\n````typescript\nconst greeter = (person: string) =\u003e {\n    return `Hello, ${person}!`;\n}\n\nfunction testGreeter() {\n    const user = 'Grant';\n    Logger.log(greeter(user));\n}\n````\n\npush\n\n````shell\n$ clasp push\n````\n\nãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹ã\n\n````shell\n$ clasp open\n````\n\n.gsãƒ•ã‚¡ã‚¤ãƒ«ã«å¤‰æ›ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¦ã„ã‚‹\n\n### æ³¨æ„\n\n* `clasp pull` ã™ã‚‹ã¨ã€å¤‰æ›ã•ã‚ŒãŸjsãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹\n* åŸºæœ¬çš„ã«ã¯ãƒ­ãƒ¼ã‚«ãƒ«ã§TypeScriptã§é–‹ç™ºã—ã¦pushã™ã‚‹ã¨ã„ã†ä¸€æ–¹é€šè¡Œã«ãªã‚‹ã®ã§ã€è¤‡æ•°äººã§é–‹ç™ºã™ã‚‹ã¨ãã«ã‚‚ãã®ãƒ•ãƒ­ãƒ¼ã‚’å¾¹åº•ã™ã‚‹\n* ã‚ˆãã‚ã‹ã‚‰ãšã«Webä¸Šã§ç·¨é›†ã™ã‚‹äººãŒã„ã‚‹ã¨ã€å¤§å¤‰ãªã“ã¨ã«ãªã‚‹(å®Ÿä½“é¨“)\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["GAS","TypeScript"]},"/note/GAS%E3%82%92clasp%E3%81%A7%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%81%A7%E6%9B%B8%E3%81%8F":{"title":"GASã‚’claspã§ãƒ­ãƒ¼ã‚«ãƒ«ã§æ›¸ã","content":"\n\\#GAS\n\n[GAS](GAS.md)ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§é–‹ç™ºã™ã‚‹ãŸã‚ã« [clasp](https://github.com/google/clasp) ã‚’ä½¿ã†\n\n## clasp\n\n* 2018å¹´1æœˆã‹ã‚‰ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ãŸGoogleå…¬å¼ã®CLIãƒ„ãƒ¼ãƒ«\n* ã§ãã‚‹ã“ã¨\n  * ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æ–°è¦ä½œæˆã€ã‚¯ãƒ­ãƒ¼ãƒ³\n  * GASãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰/ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰\n  * ãƒãƒ¼ã‚¸ãƒ§ãƒ³ä¸€è¦§ã®å–å¾—\n  * æ–°è¦ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½œæˆ\n  * ãƒ‡ãƒ—ãƒ­ã‚¤\n  * ãƒ‡ãƒ—ãƒ­ã‚¤ä¸€è¦§ã®å–å¾—\n  * ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã‚’é–‹ã\n* GASãŒãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºã§ãã‚‹\n* TypeScriptã§ã‹ã‘ã‚‹\n* ã‚³ãƒ¼ãƒ‰ãƒ©ãƒœãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã®ã§ã“ã¡ã‚‰ã§å­¦ã¹ã‚‹\n\n\u003chttps://codelabs.developers.google.com/codelabs/clasp/#0\u003e\n\n### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n[Nodebrewã§Node.jsã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç®¡ç†ã™ã‚‹](Nodebrewã§Node.jsã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç®¡ç†ã™ã‚‹.md) ã§Nodeã‚’å…¥ã‚Œã‚‹\n\nã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‚‚ã€ãƒ­ãƒ¼ã‚«ãƒ«ã«npm initã—ã¦ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‚‚ã‚ˆã„ã€‚\n\n````shell\n$ npm i @google/clasp -g\n$ clasp help\n````\n\n### Google Apps Script APIã‚’æœ‰åŠ¹åŒ–\n\n\u003chttps://script.google.com/home/usersettings\u003e\n\n### ãƒ­ã‚°ã‚¤ãƒ³\n\nWebä¸Šã®ã‚¨ãƒ‡ã‚£ã‚¿ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã«ã‚‚ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã«ã‚‚èªè¨¼ãŒå¿…è¦ãªã®ã§ã€ä»¥ä¸‹ã‚³ãƒãƒ³ãƒ‰ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹\n\n````shell\n$ clasp login\nğŸ”‘  Authorize clasp by visiting this url:\nhttps://accounts.google.com/o/oauth2/v2/auth?access_type=offline\u0026scope=https%3A%2F%...\n````\n\nãƒ–ãƒ©ã‚¦ã‚¶ãŒé–‹ãã€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®é¸æŠã¨ã€APIã®æ‰¿èªç”»é¢ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€æ‰¿èªã™ã‚‹\n\nãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±ã¯ã€`$HOME/.clasprc.json` ã«ä¿å­˜ã•ã‚Œã¦ã„ã‚‹\n\n### æ—¢å­˜ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ç·¨é›†ã—ãŸã„å ´åˆ\n\ngit clone ã¨åŒã˜ã‚ˆã†ãªæ„Ÿè¦šã§ãƒ­ãƒ¼ã‚«ãƒ«ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹\n\n````shell\n$ clasp clone ${scriptId}\n````\n\nscriptIdã¯ã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã§é–‹ã„ãŸã¨ãã®ä»¥ä¸‹ã®éƒ¨åˆ†\n\n* æ—§ã‚¨ãƒ‡ã‚£ã‚¿ `https://script.google.com/d/\u003cscriptId\u003e/edit`\n* æ–°ã‚¨ãƒ‡ã‚£ã‚¿ `https://script.google.com/home/projects/\u003cscriptId\u003e/edit`\n\nâ€»2020å¹´ã®å¹´æœ«ã”ã‚ã«ã‚¨ãƒ‡ã‚£ã‚¿ãŒæ–°ã—ããªã‚Šã€URLã‚‚å¤‰ã‚ã£ãŸ\n\n* GASã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹\n  * .clasp.json\n    * ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«\n    * scriptId (å¿…é ˆ): \u003chttps://script.google.com/d/\u003e\\\u003cSCRIPT_ID\u003e/edit ã®SCRIPT_IDéƒ¨åˆ†\n    * rootDir: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä¿å­˜ã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡å®š\n  * appsscript.json\n    * ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«\n    * GASå®Ÿè¡Œæ™‚ã®è¨­å®šãªã©\n  * ä½œæˆæ¸ˆã¿ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«\n    * ãªãŠã€.gsã§ã¯ãªã.jsã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹\n\n### æ–°è¦ä½œæˆã®å ´åˆ\n\n````shell\n$ clasp create --title \u003cprojectName\u003e --rootDir \u003cã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ããƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª\u003e\n````\n\nãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚¿ã‚¤ãƒ—ã‚’èã‹ã‚Œã‚‹\n\n* standalone: ã‚¹ã‚¯ãƒªãƒ—ãƒˆå˜ä½“ã§ä½œæˆã•ã‚Œã‚‹\n* docs,sheets,...: é¸æŠã—ãŸãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ã€ãã‚Œã«ç´ã¥ãã‚¹ã‚¯ãƒªãƒ—ãƒˆã¨ã—ã¦ä½œæˆã•ã‚Œã‚‹\n\n### ãƒªãƒ¢ãƒ¼ãƒˆã®ä¿®æ­£ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«åæ˜ ã™ã‚‹\n\n````shell\n$ clasp pull\n````\n\n* ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ä¿®æ­£ã—ãŸã‚‚ã®ãŒãƒ­ãƒ¼ã‚«ãƒ«ã«åæ˜ ã•ã‚Œã‚‹\n* å¼·åˆ¶çš„ã«ä¸Šæ›¸ãã•ã‚Œã‚‹ã®ã§æ³¨æ„ãŒå¿…è¦\n\n### ãƒ­ãƒ¼ã‚«ãƒ«ã®ä¿®æ­£ã‚’ãƒªãƒ¢ãƒ¼ãƒˆã«åæ˜ ã™ã‚‹\n\n````shell\n$ clasp push\n````\n\n* rootDirã§æŒ‡å®šã—ãŸã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒpushã•ã‚Œã‚‹\n* ç‰¹ã«questionã‚‚ãªãå¼·åˆ¶ä¸Šæ›¸ãã«ãªã‚‹ã®ã§ã€Webä¸Šã§ç·¨é›†ã—ã¦ã„ã‚‹å ´åˆã¯æ³¨æ„ã™ã‚‹\n* Gité–¢é€£ã®ãƒ•ã‚¡ã‚¤ãƒ«ãªã©ã¯åæ˜ ã—ãŸããªã„\n\n=\u003e claspignore ã‚’ä½œæˆ\n\n### claspignore\n\nã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« `.claspignore` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¦ã€claspç®¡ç†å¤–ã«ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¨˜è¼‰ã™ã‚‹ã¨ã€push,pullã‹ã‚‰ç®¡ç†å¤–ã«ãªã‚‹\n\nè¨˜æ³•ã¯gitignoreã¨åŒæ§˜\n\n### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ\n\nä»¥ä¸‹ã®ã‚ˆã†ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’åˆ†ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹\n\n````shell\n./\nâ”œâ”€â”€ appsscript.json\nâ””â”€â”€ src\nâ”‚   â””â”€â”€ Code.js\nâ””â”€â”€ test\n    â””â”€â”€ Code.js\n````\n\n* ã“ã‚Œã‚’ `clasp push` ã™ã‚‹ã¨ã€ `/` åŒºåˆ‡ã‚Šã§ãƒ•ã‚¡ã‚¤ãƒ«ãŒç™»éŒ²ã•ã‚Œã‚‹\n* pull ã—ã¦ã‚‚ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯ä¿æŒã•ã‚Œã‚‹\n\n### ãã®ä»–ã§ãã‚‹ã“ã¨\n\n#### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹ã\n\nãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ãã«ã¯ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ\n\n````shell\n$ clasp open\n````\n\n#### é–¢æ•°ã‚’å®Ÿè¡Œ\n\n````shell\n$ clasp run [functionName]\n````\n\n#### ãƒ­ã‚°ã‚’è¦‹ã‚‹\n\n````shell\nclasp logs \n````\n\näº‹å‰ã«ProjectIDã‚’è¨­å®šã—ã¦ãŠã\n\nã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã‹ã‚‰`ãƒªã‚½ãƒ¼ã‚¹ \u003e Cloud Platform Project`ã‚’é–‹ã„ã¦ã€`project-id-xxxxxxxxxxxxxxxxxxx` ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦.clasp.jsonã«è²¼ã‚Šä»˜ã‘ã‚‹\n\n````json\n    {\n      \"scriptId\":\"\u003cSCRIPT_ID\u003e\",\n      \"projectId\": \"project-id-xxxxxxxxxxxxxxxxxxx\"\n    }\n````\n\n### ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†\n\nGitã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã§ã¯ãªãã¦ã€GASã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†\n\n````shell\n$ clasp version [ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®èª¬æ˜]\nCreated version x\n````\n\nã™ã‚‹ã¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ä¸Šã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒä½œã‚‰ã‚Œã¦ã„ã‚‹ã®ã‚’ç¢ºèªã§ãã‚‹\nã‚³ãƒãƒ³ãƒ‰ã§ç¢ºèªã™ã‚‹å ´åˆã¯ `clasp versions`\n\n### Gitç®¡ç†\n\n* clasp ã§ãƒ­ãƒ¼ã‚«ãƒ«ã«GASãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸãŸã‚ã€Gitã§ç®¡ç†ã§ãã‚‹\n* gitignoreã«ã€Node.gitignoreã‚’æ›¸ã„ã¦ãŠãã¨ã‚ˆã„\n\nä»–ã®äººã‚‚ git clone ã‹ã‚‰é–‹ç™ºã§ãã‚‹ã‚ˆã†ã«ãªã‚‹(ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã¯ã‚‚ã£ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚‹)\n\n````shell\n$ git clone [ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒªãƒã‚¸ãƒˆãƒª]\n(ãƒ•ã‚¡ã‚¤ãƒ«ã«å¤‰æ›´ã‚’åŠ ãˆã‚‹)\n$ clasp push\n(Gitã¸ã‚‚commit, push ã™ã‚‹)\n````\n\n## CIã¨ã®é€£æº\n\n* Jenkinsã«clasp ã‚’è¨­å®šã—ã¦ãŠã‘ã°ã€ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ãªã“ã¨ãŒå¯èƒ½\n  ãƒ­ãƒ¼ã‚«ãƒ«ã§é–‹ç™º\n  â†“\n  Bitbucketã«Push\n  â†“\n  Jenkinsã§`git clone`\n  â†“\n  ãƒ†ã‚¹ãƒˆã€é™çš„è§£æ\n  â†“\n  `clasp push`\n\n* æ³¨æ„\n  \n  * ãƒªãƒ¢ãƒ¼ãƒˆã‹ãƒ­ãƒ¼ã‚«ãƒ«ã‹æ±ºã‚ãŸã»ã†ã§ã®ã¿é–‹ç™ºã™ã‚‹\n  * ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚¨ãƒ‡ã‚£ã‚¿ã‹ã‚‰ã§ã‚ã‚Œã°é–‹ç™ºç’°å¢ƒæ§‹ç¯‰ãªã—ã§ä½œã‚Œã‚‹ã¨ã„ã†ãƒ¡ãƒªãƒƒãƒˆã‚‚ã‚ã‚‹ã®ã§ã€ã©ã¡ã‚‰ã‚’å–ã‚‹ã‹ã¯ãã®ã¨ãã«åˆã‚ã›ã‚‹\n\n### å‚è€ƒ\n\n[è©³è§£ï¼ Google Apps Scriptå®Œå…¨å…¥é–€ ï½Google Apps \u0026 G Suiteã®æœ€æ–°ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚¬ã‚¤ãƒ‰ï½](https://www.amazon.co.jp/dp/B07BNB1Z9L)\n\n[ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹](https://developers.google.com/apps-script/reference/)\n\n[Google Apps Scriptã®æ–°ã—ã„3ã¤ã®æ©Ÿèƒ½ ãã®â‘  Dashboard](https://qiita.com/soundTricker/items/59979d0bb065fdd8d536)\n[Google Apps Scriptã®æ–°ã—ã„3ã¤ã®æ©Ÿèƒ½ ãã®â‘¡ Apps Script API](https://qiita.com/soundTricker/items/13719acd2628ed87894c)\n[Google Apps Scriptã®æ–°ã—ã„3ã¤ã®æ©Ÿèƒ½ ãã®â‘¢ CLI Tool Clasp](https://qiita.com/soundTricker/items/354a993e354016945e44)\n\n\u003chttps://codelabs.developers.google.com/codelabs/clasp/#0\u003e\n[Command Line Interface using clasp](https://developers.google.com/apps-script/guides/clasp)\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["GAS"]},"/note/GAS%E3%82%92clasp%E3%81%A7%E4%BD%9C%E3%81%A3%E3%81%A6V8%E3%83%A9%E3%83%B3%E3%82%BF%E3%82%A4%E3%83%A0%E3%81%AB%E5%AF%BE%E5%BF%9C%E3%81%95%E3%81%9B%E3%82%8B":{"title":"GASã‚’claspã§ä½œã£ã¦V8ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«å¯¾å¿œã•ã›ã‚‹","content":"\n\u003chttps://qiita.com/r57ty7/items/77ea0a3dc5c2200b6f1d\u003e\n\n[GAS](note/GAS.md) ã§V8ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãŒåˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸã€‚\n\nclaspã§ç®¡ç†ã—ã¦ã„ã‚‹GASã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’V8ã«å¯¾å¿œã•ã›ãŸã„ã€‚\n\n`tsconfig.json`\n\n````json\n{\n    // ...\n    \"compilerOptions\": {\n        \"target\": \"ES2019\"\n    }\n}\n````\n\n`appsscript.json`\n\n````json\n{\n    // ...\n    \"runtimeVersion\": \"V8\"\n}\n````\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["GAS","TypeScript"]},"/note/GAS%E3%82%B9%E3%83%8B%E3%83%9A%E3%83%83%E3%83%88":{"title":"GASã‚¹ãƒ‹ãƒšãƒƒãƒˆ","content":"\n\\#GAS\n\n# Spreadsheetã®æ“ä½œ\n\n## ã‚¯ãƒ©ã‚¹\n\n|||\n|:-|:-|\n|SpreadsheetApp|Spreadsheetã‚µãƒ¼ãƒ“ã‚¹ã®åŸºåº•ã‚¯ãƒ©ã‚¹|\n|Spreadsheet|Spreadsheetã‚’æ“ä½œã™ã‚‹æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹|\n|Sheet|ã‚·ãƒ¼ãƒˆã‚’æ“ä½œã™ã‚‹æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹|\n|Range|ã‚»ãƒ«ç¯„å›²ã‚’æ“ä½œã™ã‚‹æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹|\n\n## ãƒ‡ãƒ¼ã‚¿æ“ä½œ\n\n\u003chttps://developers.google.com/apps-script/guides/sheets\u003e\n\n### ãƒ‡ãƒ¼ã‚¿èª­ã¿å–ã‚Š\n\n````javascript\nfunction logProductInfo() {\n  var spreadSheet = SpreadsheetApp.openById('XXXXXXX'); // ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®IDã‚’å…¥åŠ›\n  var sheet = spreadSheet.getSheetByName('sheet name');\n  var data = sheet.getDataRange().getValues();\n  for (var i = 0; i \u003c data.length; i++) {\n    Logger.log('Product name: ' + data[i][0]);\n    Logger.log('Product number: ' + data[i][1]);\n  }\n}\n````\n\n* ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã®ID\n  * \u003chttps://docs.google.com/spreadsheets/d/{ID}/edit\u003e\n  * URLã®IDéƒ¨åˆ†\n\n### ãƒ‡ãƒ¼ã‚¿æ“ä½œ\n\n\u003chttps://developers.google.com/apps-script/guides/sheets\u003e\n\n#### ãƒ‡ãƒ¼ã‚¿æ›¸ãè¾¼ã¿\n\n````javascript\n    function addProduct() {\n      var sheet = SpreadsheetApp.getActiveSheet();\n      sheet.appendRow(['Cotton Sweatshirt XL', 'css004']);\n    }\n````\n\n## ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆãƒã‚¯ãƒ­\n\n\u003chttps://developers.google.com/apps-script/guides/sheets/macros\u003e\n\n* Excelãƒã‚¯ãƒ­ã®ã‚ˆã†ãªæ„Ÿã˜\n* UIã®ä¸€é€£ã®æ“ä½œã‚’è¨˜éŒ²ã—ã¦ã€åŒã˜æ“ä½œã‚’å†ç¾ã§ãã‚‹ã‚ˆã†ãªæ©Ÿèƒ½\n\n## ã‚«ã‚¹ã‚¿ãƒ é–¢æ•°\n\n````javascript\n    function GETRESULT(value) {\n      if (value \u003e= 80) {\n        return 'OK';\n      } else {\n        return 'NG';\n      }\n    }\n````\n\nã‚»ãƒ«ã« `=GETRESULT(A1)` ã¨ã™ã‚‹ã¨çµæœãŒå‡ºåŠ›ã•ã‚Œã‚‹\n\n## Slack ã¨ã®é€£æº\n\n* Slackã®APIãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—ã™ã‚‹\n* UrlFetchã§POSTé€ä¿¡ã™ã‚‹\n* [Slack Botã‚’GASã§ã„ã„æ„Ÿã˜ã§æ›¸ããŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œã£ãŸ](https://qiita.com/soundTricker/items/43267609a870fc9c7453)\n\n## ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œæˆ\n\n\u003chttps://qiita.com/t_imagawa/items/47fc130a419b9be0b447\u003e\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["GAS"]},"/note/GCP-Deployment-Manager":{"title":"GCP Deployment Manager","content":"\nAWSã®CloudFormationã¿ãŸã„ãªã‚‚ã®\nè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«å¾“ã£ã¦ãƒªã‚½ãƒ¼ã‚¹ãŒä½œæˆã•ã‚Œã‚‹\n\n[Deployment Manager ã®æœ€åˆã®ä¸€æ­© - Qiita](https://qiita.com/yhiraki/items/646d015caa3d5a1c2e6b)\n\nã‚µãƒãƒ¼ãƒˆã•ã‚Œã‚‹ãƒªã‚½ãƒ¼ã‚¹ã®ä¸€è¦§\n\u003chttps://cloud.google.com/deployment-manager/docs/configuration/supported-resource-types\u003e\n\nãƒªãƒ³ã‚¯ã‹ã‚‰é£›ã¶ã¨è¨­å®šã§ãã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒJSON Schemaã§ç¢ºèªã§ãã‚‹\n\nNodePoolã®å®šç¾©ã‚’ç¢ºèªã—ãŸã‘ã‚Œã°ã“ã¡ã‚‰\nhttps://cloud.google.com/kubernetes-engine/docs/reference/rest/v1/projects.zones.clusters.nodePools\n\nconfig ã¯ [NodeConfig](https://cloud.google.com/kubernetes-engine/docs/reference/rest/v1/NodeConfig) ã¨ã„ã†ã‚ˆã†ã«ãƒªãƒ³ã‚¯ã‚’ãŸã©ã£ã¦ã„ã\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["2023/02/03","GCP"]},"/note/GKE":{"title":"GKE","content":"\nGoogle Kubernetes Engine\n\n## \n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["2023/02/03"]},"/note/Garmin%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B":{"title":"Garminã‚¢ãƒ—ãƒªã‚’ä½œã£ã¦ã¿ã‚‹","content":"\n## ä½œã‚‹ã‚‚ã®\n\n[Apple Watchã®ã€ŒTapticã‚¿ã‚¤ãƒ ã€ã§ç¾åœ¨æ™‚åˆ»ã‚’æŒ¯å‹•ã§ç¢ºèªã™ã‚‹æ–¹æ³• | Apple Watch Wave](https://www.ipodwave.com/applewatch/howto/taptic_time.html)\nTapticã‚¿ã‚¤ãƒ ã¿ãŸã„ã«ã€ç¾åœ¨æ™‚åˆ»ã‚’æŒ¯å‹•ã§çŸ¥ã‚ŠãŸã„\n\nhttps://github.com/ikorihn/gtaptic\n\n## ç’°å¢ƒæ§‹ç¯‰\n\nvscodeã§ä½œã£ã¦ã¿ã‚‹\n[Visual Studio Codeã§Garmin Connect IQã®é–‹ç™º | Take4-blue](https://take4-blue.com/program/garmin/visual-studio-code%E3%81%A7garmin-connect-iq%E3%81%AE%E9%96%8B%E7%99%BA/)\nhttps://developer.garmin.com/connect-iq/reference-guides/visual-studio-code-extension/\nã“ã¡ã‚‰ã«æ²¿ã£ã¦ã™ã™ã‚ã‚‹\n\nMonkey Cã¨ã„ã†è¨€èªã‚‰ã—ã„\n\n[Monkey C - Visual Studio Marketplace](https://marketplace.visualstudio.com/items?itemName=garmin.monkey-c) ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\nã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¬ãƒƒãƒˆã‹ã‚‰ `Monkey C: Verify Installation` ã‚’é¸ã¶ã¨ã€ãƒ–ãƒ©ã‚¦ã‚¶ã§Connect IQ SDK Managerã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç”»é¢ãŒé–‹ã\n\n[Connect IQ Basics](https://developer.garmin.com/connect-iq/connect-iq-basics/getting-started/)\n\nConnect IQ SDK Managerã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦å®Ÿè¡Œ\nç”»é¢ã«ãã£ã¦ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚’è¡Œã†ã€‚\nè‡ªå‹•ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã®æœ‰ç„¡ãªã©ã‚’èã‹ã‚Œã‚‹ã€‚ä¸€æ—¦OFFã«ã—ãŸã€‚\n\nSDK ManagerãŒé–‹ãã®ã§ã€SDKä¸€è¦§ã‹ã‚‰ Connect IQ 4.1.7 ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n![Pasted-image-20230107171859](note/Pasted-image-20230107171859.png)\n\nDevices ã‹ã‚‰å¯¾è±¡ã«ã—ãŸã„ãƒ‡ãƒã‚¤ã‚¹ã‚‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\nSDKã‚„Deviceã¯Macã®å ´åˆã“ã¡ã‚‰ã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ã€‚\n`~/Library/Application Support/Garmin/ConnectIQ/`\n\nã‚‚ã†ä¸€åº¦vscodeã«æˆ»ã£ã¦ã€Verify Installation ã™ã‚‹ã¨developer keyã‚’å…¥åŠ›ã™ã‚‹ãƒœãƒƒã‚¯ã‚¹ãŒå‡ºã‚‹ã€‚\nã¾ã æŒã£ã¦ã„ãªã„ã¯ãšãªã®ã§ã€generateã®æ–¹ã‚’é¸ã¶ã€‚\nä½œæˆå…ˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’èã‹ã‚Œã‚‹ã®ã§ã€é©å½“ãªå ´æ‰€ã‚’é¸æŠ\n\nJRE 1.8ä»¥ä¸ŠãŒå…¥ã£ã¦ã„ãªã„å ´åˆã€ãã‚Œã‚‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚\n\n### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ\n\nç’°å¢ƒæ§‹ç¯‰ãŒæ¸ˆã‚“ã ã‚‰ã€ `Monkey C: New Project` ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã§ãã‚‹\n\nName (gtaptic) \u003e Watch App \u003e æœ€ä½ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 4.0.0 ã§ä½œæˆ\nWatch Faceãªã©ã‚‚ã“ã“ã§é¸ã¹ã‚‹ã€‚\n\n## ã‚³ãƒãƒ³ãƒ‰\n\n* `Edit Products` å¯¾è±¡ãƒ‡ãƒã‚¤ã‚¹ã‚’é¸æŠ\n* `Edit Application` ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç·¨é›†\n* `Edit Permissions` å¿…è¦ãªæ¨©é™ã‚’ç·¨é›†\n* `Edit Language` è¨€èªé¸æŠ\n\n## ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã§å®Ÿè¡Œã™ã‚‹\n\nhttps://developer.garmin.com/connect-iq/connect-iq-basics/your-first-app/\n\n`~/Library/Application Support/Garmin/ConnectIQ/Sdks/{ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸSDK}/samples` ã«ã„ãã¤ã‹ã‚µãƒ³ãƒ—ãƒ«ãŒã‚ã‚‹ã®ã§ãã‚Œã‚’é–‹ã\n`Run and Debug` \u003e `Run` ã‚’ã™ã‚‹ã¨ã‚¢ãƒ—ãƒªã‚’ãƒ“ãƒ«ãƒ‰ã—ã¦ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ãŒé–‹ã„ã¦å®Ÿè¡Œã•ã‚Œã‚‹\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["2023/01/07"]},"/note/Garmin-%E3%82%B9%E3%83%9E%E3%83%9B%E3%81%AE%E6%A9%9F%E7%A8%AE%E3%82%92%E5%A4%89%E3%81%88%E3%81%9F%E3%81%A8%E3%81%8D%E3%81%AB%E3%83%9A%E3%82%A2%E3%83%AA%E3%83%B3%E3%82%B0%E3%81%8C%E3%81%86%E3%81%BE%E3%81%8F%E8%A1%8C%E3%81%8B%E3%81%AA%E3%81%84":{"title":"Garmin ã‚¹ãƒãƒ›ã®æ©Ÿç¨®ã‚’å¤‰ãˆãŸã¨ãã«ãƒšã‚¢ãƒªãƒ³ã‚°ãŒã†ã¾ãè¡Œã‹ãªã„","content":"\nã‚¹ãƒãƒ›ã®æ©Ÿç¨®å¤‰æ›´æ™‚ã«ã€ä½•åº¦ã‚„ã£ã¦ã‚‚ãƒšã‚¢ãƒªãƒ³ã‚°ã«æˆåŠŸã—ãªã‹ã£ãŸã€‚\npinã®å…¥åŠ›ã¾ã§ã¯ã§ãã‚‹ã‘ã©ã€ãã®ã‚ã¨ failed to pairing ã¨å‡ºã¦ã‚¨ãƒ©ãƒ¼ã¨ãªã‚‹ã€‚ãã—ã¦ãã®å¾Œã¯Try againã¨ã‹ã‚’ã—ã¦ã‚‚å³å¤±æ•—ã«ãªã‚‹ã€‚\n\nå°‘ã—ç‰¹æ®Šãªã“ã¨ã‚’ã—ã¦ã„ã¦ã€ã‚‚ã¨ã‚‚ã¨ã¯Pixel 3aã¨ãƒšã‚¢ãƒªãƒ³ã‚°ã—ã¦ã„ãŸã®ã ãŒã€Pixel 6(ãƒ¬ãƒ³ã‚¿ãƒ«)ã«æ©Ÿç¨®å¤‰æ›´ã‚’ã—ã¦ã€ãƒ¬ãƒ³ã‚¿ãƒ«æœŸé™ãŒæ¥ãŸã®ã§å†åº¦Pixel 3aã«æˆ»ãã†ã¨ã—ãŸã¨ãã«ãƒšã‚¢ãƒªãƒ³ã‚°ãŒã§ããªããªã£ã¦ã—ã¾ã£ãŸã€‚\nãªã®ã§ã€å®Œå…¨ã«æ–°ã—ã„æ©Ÿç¨®ã«å¤‰æ›´ã—ã‚ˆã†ã¨ã„ã†ã¨ãã«ã¯ã“ã‚“ãªå•é¡Œã«ã¯ãªã‚‰ãªã„ã‹ã‚‚ã—ã‚Œãªã„ã€‚\næ˜”ãƒšã‚¢ãƒªãƒ³ã‚°ã—ã¦ã„ãŸæ©Ÿç¨®ã«æˆ»ãã†ã¨ã™ã‚‹ã¨ãƒãƒã‚‹ã®ã‹ã‚‚ã—ã‚Œãªã„ã€‚\n\n### å…¬å¼ã®æ‰‹é †(å¤±æ•—)\n\nhttps://support.garmin.com/ja-JP/?faq=j5tfDRFRWT7q82ipep3bO7\nå…ƒã®æ©Ÿå™¨ã§ãƒšã‚¢ãƒªãƒ³ã‚°ã‚’è§£é™¤ã€Garminã‚¢ãƒ—ãƒªã‚’å‰Šé™¤ã—ãŸã‚ã¨ã€æ–°ã—ã„æ©Ÿç¨®ã§ãƒšã‚¢ãƒªãƒ³ã‚°ã™ã‚‹ã¨ã ã‘æ›¸ã„ã¦ã‚ã‚‹ãŒã€å…¨ç„¶è§£æ±ºã«ãªã‚‰ãªã‹ã£ãŸã€‚\n\n### ãƒ‡ãƒã‚¤ã‚¹ã®å‰Šé™¤(å¤±æ•—)\n\nå…ƒã®æ©Ÿå™¨ã§ãƒšã‚¢ãƒªãƒ³ã‚°ã—ãªãŠã™ã®ã¯ã™ã‚“ãªã‚Šã§ããŸã®ã§ã€ãƒšã‚¢ãƒªãƒ³ã‚°ã—ãŸã‚ã¨Garmin Connectã§ãƒ‡ãƒã‚¤ã‚¹ã‚’å‰Šé™¤ã—ã€æ–°ã—ã„æ©Ÿç¨®ã§ãƒšã‚¢ãƒªãƒ³ã‚°\nâ†’ ã“ã‚Œã‚‚ã†ã¾ãã„ã‹ãªã„\n\n### Bluetoothã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥å‰Šé™¤\n\nBluetoothã®è¨­å®šä¸Šã¯GarminãŒæ¶ˆãˆã¦ã„ã‚‹ãŒã€ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒæ®‹ã£ã¦ã„ã‚‹ã›ã„ã§ãƒšã‚¢ãƒªãƒ³ã‚°ã§ããªã„ã“ã¨ãŒã‚ã‚‹ã¿ãŸã„ãªã®ã§ã€ãã‚Œã„ã«ã™ã‚‹\n\n* è¨­å®š \u003e ã‚¢ãƒ—ãƒª \u003e å³ä¸Šã®3ç‚¹ãƒªãƒ¼ãƒ€ \u003e ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ—ãƒªã‚’è¡¨ç¤º\n* Bluetooth ã‚¢ãƒ—ãƒªã‚’é–‹ã\n* ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’å‰Šé™¤(ãƒšã‚¢ãƒªãƒ³ã‚°æ¸ˆã¿ã®æ©Ÿå™¨ã¯ããˆãªã„ã®ã§å®‰å¿ƒ)\n\nhttps://www.reddit.com/r/Garmin/comments/pm9vlu/can_no_longer_connect_to_phone_pairing_failed/\n\n### Garminã®ã‚½ãƒ•ãƒˆãƒªã‚»ãƒƒãƒˆ\n\nLightãƒœã‚¿ãƒ³ã‚’10ç§’é•·æŠ¼ã—ã™ã‚‹ã¨ã‚½ãƒ•ãƒˆãƒªã‚»ãƒƒãƒˆã—ã¦å†èµ·å‹•ã™ã‚‹\n\n### ã™ã¹ã¦ã®æ¨©é™ã‚’è¨±å¯\n\nGarmin Connectã®ã‚¢ãƒ—ãƒªè¨­å®šã‚’é–‹ã„ã¦ã€ã™ã¹ã¦ã®å¿…è¦ãªæ¨©é™è¨±å¯ã«ã™ã‚‹\n\n## çµæœ\n\nä¸Šã®3ã¤ã‚’ã‚„ã£ã¦ä½•åº¦ã‹ãƒšã‚¢ãƒªãƒ³ã‚°ã—ãªãŠã—ãŸã¨ã“ã‚æˆåŠŸã—ãŸã€‚\nã¡ã‚‡ã£ã¨ã©ã‚ŒãŒåŠ¹ã„ãŸã®ã‹ã€ã™ã¹ã¦ãŒæƒã£ã¦åŠ¹ã„ãŸã®ã‹ã‚ã‹ã‚‰ãªã„ã€‚ã€‚\n\nã¨ã‚Šã‚ãˆãšæš«å®šã®æ‰‹é †ã¨ã—ã¦ã¯ã“ã†ã€‚\n\n* å…ƒã®æ©Ÿç¨®ã§ãƒšã‚¢ãƒªãƒ³ã‚°ã‚’è§£é™¤\n* æ–°ã—ã„æ©Ÿç¨®ã§Bluetoothã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢\n* Garminã‚’ãƒšã‚¢ãƒªãƒ³ã‚°çŠ¶æ…‹ã«ã™ã‚‹(UPé•·æŠ¼ã— \u003e Phone \u003e Pair phone)\n* Garmin Connectã‚’é–‹ã„ã¦ã€Œãƒ‡ãƒã‚¤ã‚¹ã‚’è¿½åŠ ã€\n* Pinã‚’å…¥åŠ›\n* (ã“ã‚Œã‚’æˆåŠŸã™ã‚‹ã¾ã§ä½•å›ã‹)\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["2023/06/28","Garmin"]},"/note/Gatekeeper":{"title":"Gatekeeper","content":"\n[Kubernetes](note/Kubernetes.md) ã§ãƒªã‚½ãƒ¼ã‚¹ãŒä½œæˆã•ã‚Œã‚‹éš›ã«ãƒãƒªã‚·ãƒ¼ã«é©åˆã™ã‚‹ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã€é•åã™ã‚‹å ´åˆã¯ä½œæˆã•ã›ãªã„ã“ã¨ãŒã§ãã‚‹æ©Ÿæ§‹ã€‚\nãƒãƒªã‚·ãƒ¼ã¯Regoè¨€èªã§å®šç¾©ã™ã‚‹\n\n* ConstraintTemplateãƒªã‚½ãƒ¼ã‚¹ã§åˆ¶ç´„ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’å®šç¾© â†’ CRDãŒä½œã‚‰ã‚Œã‚‹\n* ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒ‡å®šã—ã¦CRDã‹ã‚‰åˆ¶ç´„ãƒªã‚½ãƒ¼ã‚¹ã‚’ä½œæˆ\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["2023/04/26","Kubernetes"]},"/note/Gatsby%E3%81%A8Netlify%E3%81%A7%E3%83%96%E3%83%AD%E3%82%B0%E4%BD%9C%E6%88%90":{"title":"Gatsbyã¨Netlifyã§ãƒ–ãƒ­ã‚°ä½œæˆ","content":"\nGatsby.jsã¨Netlifyã§ãƒ–ãƒ­ã‚°ã‚’ä½œæˆã—ã¦å…¬é–‹ã™ã‚‹æ‰‹é †\n\n## Netlify\n\nNetlifyã€GitHubãƒªãƒã‚¸ãƒˆãƒªã‚’è¨­å®šã™ã‚‹\n\n[Netlifyã¨GitHubã§é™çš„ã‚µã‚¤ãƒˆã‚’å…¬é–‹ã™ã‚‹](note/Netlifyã¨GitHubã§é™çš„ã‚µã‚¤ãƒˆã‚’å…¬é–‹ã™ã‚‹.md)\n\n## Gatsby.js\n\n[Gatsby.js](note/Gatsby.js.md)\n\n### CLIã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n````sh\nnpm install -g gatsby-cli\n````\n\n### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ\n\n`gatsby new \u003cåå‰\u003e \u003cã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼\u003e` ã§ä½œæˆã§ãã‚‹ã€‚\n\n````sh\ngatsby new ikorihn-blog https://github.com/renyuanz/leonids\n````\n\nã‚¹ã‚¿ãƒ¼ã‚¿ãƒ¼ã¯ [leonids](https://www.gatsbyjs.com/starters/renyuanz/leonids) ã‚’ä½¿ç”¨ã—ãŸã€‚\n\n* ã‚·ãƒ³ãƒ—ãƒ«ã€å›ºå®šã®ã‚µã‚¤ãƒ‰ãƒãƒ¼\n* TailwindCSSã‚’ä½¿ç”¨\n* Light/Darkãƒ¢ãƒ¼ãƒ‰\n* GitHub actionsã§GitHub pagesã«ãƒ‡ãƒ—ãƒ­ã‚¤\n\n### å‹•ä½œç¢ºèª\n\n````sh\ncd ikorihn-blog\ngatsby develop\n````\n\n`http://localhost:8000/` ã‚’é–‹ã\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["Gatsbyjs","blog"]},"/note/Gatsby.js":{"title":"Gatsby.js","content":"\nReactã®é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿\n\nhttps://www.gatsbyjs.com/\n\n## å‹•ä½œ\n\nReactã‚¢ãƒ—ãƒªã‚’ãƒ“ãƒ«ãƒ‰æ™‚ã«1å›å®Ÿè¡Œã—ã€HTML,JSã‚’ç”Ÿæˆã™ã‚‹ã€‚\nç”Ÿæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã ã‘ã§è¦‹ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹\n\n## ãƒ“ãƒ«ãƒ‰æ™‚GraphQL\n\nGatsby.jsã§ã¯ãƒ“ãƒ«ãƒ‰æ™‚ã®ã•ã¾ã–ã¾ãªãƒ‡ãƒ¼ã‚¿ã‚’GraphQLã§å–å¾—ã™ã‚‹ã€‚\n\nMarkdownå½¢å¼ã®ãƒ†ã‚­ã‚¹ãƒˆæƒ…å ±ã‚’ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰èª­ã¿è¾¼ã‚“ã§ã€GraphQLçµŒç”±ã§å–å¾—ã—ã€Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§è¡¨ç¤ºã™ã‚‹ã€‚\nGatsbyã§ã¯Markdownã«é™ã‚‰ãšæ§˜ã€…ãªãƒ‡ãƒ¼ã‚¿ã‚’ã€ `data source`, `data transformer` ã¨ã„ã†æ çµ„ã¿ã§ä¸€èˆ¬åŒ–ã™ã‚‹ã“ã¨ã§ã€å¤šæ§˜ãªå‡¦ç†ã‚’çµ±ä¸€çš„ã«ã‹ã¤ç°¡æ½”ã«è¨˜è¿°ã™ã‚‹ã“ã¨ãŒã§ãã¦ã„ã‚‹ã€‚\n\nã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯ãƒ“ãƒ«ãƒ‰æ™‚ã«å½¢æˆã•ã‚ŒãŸGraphQL DBã®å…¨ä½“ã¯å¿…è¦ãªã„ã®ã§ã€ã€Œã‚¯ã‚¨ãƒªã®çµæœã€ã®ã¿ã‚’JSONã¨ã—ã¦åˆã‚ã›ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã€‚\n\n## ãƒ—ãƒ©ã‚°ã‚¤ãƒ³\n\nãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã™ã‚‹ãŸã‚ã«ã€ [data transformer](https://www.gatsbyjs.org/plugins/?=tranformer), [data source](https://www.gatsbyjs.org/plugins/?=source)ãŒãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã—ã¦åˆ©ç”¨ã§ãã‚‹ã€‚\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["Gatsbyjs"]},"/note/Gatsbyjs%E3%81%A7Tailwind%E3%82%92%E3%81%A4%E3%81%8B%E3%81%86":{"title":"Gatsbyjsã§Tailwindã‚’ã¤ã‹ã†","content":"\n\\#Gatsbyjs #TailwindCSS\n\n\u003chttps://www.gatsbyjs.com/docs/how-to/styling/tailwind-css/\u003e\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["Gatsbyjs","TailwindCSS"]},"/note/Gatsbyjs%E3%81%AB%E7%9B%AE%E6%AC%A1%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B":{"title":"Gatsbyjsã«ç›®æ¬¡ã‚’è¿½åŠ ã™ã‚‹","content":"\nå„ãƒšãƒ¼ã‚¸ã«ç›®æ¬¡ã‚’è¿½åŠ ã—ãŸã„\n\n## å‰ææ¡ä»¶\n\nç›®æ¬¡ãƒœã‚¿ãƒ³ã¯`h`ã‚¿ã‚°å†…ã«`#`ã‚’ä½¿ã£ãŸã€Œãƒšãƒ¼ã‚¸å†…ãƒªãƒ³ã‚¯ã€ã¨ãªã‚‹ã®ã§\n\nãƒšãƒ¼ã‚¸å†…ãƒªãƒ³ã‚¯ã‚’å–ã‚Šæ‰±ã†ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¨ã®ä½µç”¨ãŒã»ã¼å¿…é ˆã¨ãªã£ã¦ã„ã‚‹ã€‚\n\nç§ãŒåˆã‚ã›ã¦ä½¿ã£ã¦ã„ã‚‹ãƒšãƒ¼ã‚¸å†…ãƒªãƒ³ã‚¯ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯æ¬¡\n\n[gatsby-remark-autolink-headers | GatsbyJS](https://www.gatsbyjs.org/packages/gatsby-remark-autolink-headers/)\n\nã“ã¡ã‚‰ã®è¨­ç½®æ–¹æ³•ã‚‚è¨˜äº‹ã«ã—ã¦ã‚ã‚‹ã€‚\n\n[ã€Gatsby.jsã€‘è¦‹å‡ºã—ã«ãƒšãƒ¼ã‚¸å†…ãƒªãƒ³ã‚¯ã‚’è¨­å®šã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã€Œgatsby-remark-autolink-headersã€ | Blog](https://www.ultra-noob.com/blog/2020-08-14-%E3%80%90Gatsby_js%E3%80%91%E8%A6%8B%E5%87%BA%E3%81%97%E3%81%AB%E3%83%9A%E3%83%BC%E3%82%B8%E5%86%85%E3%83%AA%E3%83%B3%E3%82%AF%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%99%E3%82%8B%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%80%8Cgatsby-remark-autolink-headers%E3%80%8D/)\n\n# [](https://www.ultra-noob.com/blog/2020/2020-08-15-%E3%80%90Gatsby_js%E3%80%91%E8%A8%98%E4%BA%8B%E3%81%AB%E3%80%8C%E7%9B%AE%E6%AC%A1%E3%80%8D%E3%82%92%E8%BF%BD%E5%8A%A0%E3%81%99%E3%82%8B%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%80%8Cgatsby-remark-table-of-contents%E3%80%8D%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9/#gatsby-remark-table-of-contents)\n\n[gatsby-remark-autolink-headers](https://www.gatsbyjs.org/packages/gatsby-remark-autolink-headers/)\n\n## ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’è¿½åŠ \n\n[gatsby-remark-table-of-contents](https://www.gatsbyjs.com/plugins/gatsby-remark-table-of-contents/)\n\n````sh\nyarn add gatsby-remark-table-of-contents\n````\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["Gatsbyjs"]},"/note/Gatsbyjs%E3%81%ABSNS%E3%82%A2%E3%82%A4%E3%82%B3%E3%83%B3":{"title":"Gatsbyjsã«SNSã‚¢ã‚¤ã‚³ãƒ³","content":"\n## FontAwesomeã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\nhttps://fontawesome.com/how-to-use/on-the-web/using-with/react\n\n````bash\nyarn add @fortawesome/fontawesome-svg-core @fortawesome/free-solid-svg-icons @fortawesome/react-fontawesome @fortawesome/free-brands-svg-icons\n````\n\n## ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’åˆ©ç”¨ã™ã‚‹\n\n````\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport {\n  faGithubSquare,\n  faTwitterSquare,\n} from '@fortawesome/free-brands-svg-icons'\n\n// ...\n\n      \u003ca\n        href={`https://github.com/${social.github}`}\n        style={{ boxShadow: `none` }}\n      \u003e\n        \u003cFontAwesomeIcon\n          color=\"#aeaeae\"\n          icon={faGithubSquare}\n          style={{\n            width: `32px`,\n            height: `32px`,\n            marginRight: `4px`,\n          }}\n        /\u003e\n      \u003c/a\u003e\n      \u003ca\n        href={`https://twitter.com/${social.twitter}`}\n        style={{ boxShadow: `none` }}\n      \u003e\n        \u003cFontAwesomeIcon\n          color=\"#3eaded\"\n          icon={faTwitterSquare}\n          style={{\n            width: `32px`,\n            height: `32px`,\n            marginRight: `4px`,\n          }}\n        /\u003e\n      \u003c/a\u003e\n````\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["Gatsbyjs"]},"/note/Gatsbyjs%E3%81%AE%E8%A6%8B%E5%87%BA%E3%81%97%E3%81%AB%E3%83%9A%E3%83%BC%E3%82%B8%E5%86%85%E3%83%AA%E3%83%B3%E3%82%AF%E3%82%92%E3%81%A4%E3%81%91%E3%82%8B":{"title":"Gatsbyjsã®è¦‹å‡ºã—ã«ãƒšãƒ¼ã‚¸å†…ãƒªãƒ³ã‚¯ã‚’ã¤ã‘ã‚‹","content":"\n\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":[]},"/note/Gatsbyjs%E3%81%AETypeScript%E5%8C%96":{"title":"Gatsbyjsã®TypeScriptåŒ–","content":"\n[Gatsby.js](note/Gatsby.js.md) ã‚’ [TypeScript](note/TypeScript.md) åŒ–ã™ã‚‹\n\n## tsconfig.jsonã‚’è¿½åŠ \n\ntsconfig.json\n\n````json\n````\n\n## GraphQL Schema, ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å‹ç”Ÿæˆ\n\nGatsby ã¯ãƒªã‚½ãƒ¼ã‚¹ã«å¯¾ã—ã¦ GraphQL ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ã‚Šãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã™ã‚‹\nGraphQL ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‹ã‚’ã€[gatsby-plugin-typegen](https://github.com/cometkim/gatsby-plugin-typegen) ã‚’ä½¿ã„ç”Ÿæˆã™ã‚‹ã€‚\n\n````bash\nyarn add gatsby-plugin-typegen\n````\n\n`gatsby-config.js`ã® plugins ã«`gatsby-plugin-typegen`ã‚’è¿½è¨˜ã™ã‚‹ã€‚\n\nsrc/components/index.ts\n\n````js\nmodule.exports = {\n  siteMetadata: {\n    // ...\n  },\n  plugins: [\n    // ...\n    `gatsby-plugin-typegen`\n  ],\n}\n````\n\næ¬¡ã«ã€å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã® query ã«ã‚¯ã‚¨ãƒªåã‚’è¿½åŠ ã—ã¦ã„ãã¾ã™ã€‚  \nã“ã®å¤‰æ›´ã‚’ã™ã‚‹ã“ã¨ã§ãã®ã‚¯ã‚¨ãƒªå°‚ç”¨ã®å‹ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚\n\nï¼ˆä¾‹ï¼š src/components/index.js `query BlogIndex`ã®éƒ¨åˆ†ã‚’è¿½è¨˜ã—ã¦ã„ã‚‹ï¼‰\n\n[ğŸ”— src/components/index.ts](https://github.com/kawamataryo/gatsby-typescript-sample/blob/master/src/src/components/index.ts)\n\n````js\n//...\nexport const pageQuery = graphql`\n  query BlogIndex {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n    allMarkdownRemark(sort: { fields: [frontmatter___date], order: DESC }) {\n      nodes {\n        excerpt\n        fields {\n          slug\n        }\n        frontmatter {\n          date(formatString: \"MMMM DD, YYYY\")\n          title\n          description\n        }\n      }\n    }\n  }\n`\n````\n\næœ€å¾Œã«`yarn build`ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€`src/__generated__/gatsby-types.ts`ãŒç”Ÿæˆã•ã‚Œã¦ã„ã‚‹ã¯ãšã§ã™ã€‚  \nã“ã“ã« GraphQL ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å‹å®šç¾©ãŒã‚ã‚Šã¾ã™ã€‚  \nå…ˆã»ã©è¿½åŠ ã—ãŸ BlogIndex ã‚¯ã‚¨ãƒªã®å‹ã‚’è¦‹ã¦ã¿ã‚‹ã¨ã€ã€\n\n[ğŸ”— src/pages/index.ts](https://github.com/kawamataryo/gatsby-typescript-sample/blob/master/src/src/__generated__/gatsby-types.ts)\n\n````ts\n//...\ntype BlogIndexQueryVariables = Exact\u003c{ [key: string]: never; }\u003e;\n\n\ntype BlogIndexQuery = { readonly site: Maybe\u003c{ readonly siteMetadata: Maybe\u003cPick\u003cSiteSiteMetadata, 'title'\u003e\u003e }\u003e, readonly allMarkdownRemark: { readonly nodes: ReadonlyArray\u003c(\n      Pick\u003cMarkdownRemark, 'excerpt'\u003e\n      \u0026 { readonly fields: Maybe\u003cPick\u003cFields, 'slug'\u003e\u003e, readonly frontmatter: Maybe\u003cPick\u003cFrontmatter, 'date' | 'title' | 'description'\u003e\u003e }\n    )\u003e } };\n//...\n````\n\nã¡ã‚ƒã‚“ã¨ç”Ÿæˆã•ã‚Œã¦ã¾ã™ã­ï¼ã€€æœ€é«˜ä¾¿åˆ©ã€‚\n\n## å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®TypeScriptåŒ–\n\nã“ã‚Œã§æº–å‚™ãŒã§ããŸã®ã§ã€å„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ TypeScript åŒ–ã—ã¦ã„ãã¾ã™ã€‚  \n[gatsby-plugin-typescript](https://github.com/gatsbyjs/gatsby/tree/master/packages/gatsby-plugin-typescript)ã®è¿½åŠ ã‹ã‚‰å…¥ã‚‹è¨˜äº‹ãŒå¤šã„ã®ã§ã™ãŒã€2020 å¹´ 10 æœˆç¾åœ¨ã€Gatsby ã«ã¯`gatsby-plugin-typescript`ãŒã™ã§ã«çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã®ã§ã€ä½•ã‚‚ã›ãšã§å¤§ä¸ˆå¤«ã§ã™ã€‚\n\nä½•ã‹ TypeScript ã®ãƒ“ãƒ«ãƒ‰é–¢é€£ã§è¿½åŠ ã®è¨­å®šã‚’ã—ãŸã„å ´åˆã¯ã€gatsby-config.js ã® plugins ã§`gatsby-plugin-typescript`ã‚’è¿½åŠ ã—ã¦ã€option ã‚’è¨­å®šã—ã¦ãã ã•ã„ã€‚\n\nå„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«æ‹¡å¼µå­ã‚’`.js`ã‹ã‚‰`.tsx`ã«æ›¸ãæ›ãˆã¾ã—ã‚‡ã†ã€‚  \nãã—ã¦ã€StaticQuery ã®æˆ»ã‚Šå€¤ãªã©å‹ã‚¨ãƒ©ãƒ¼ã¨ãªã£ã¦ã„ã‚‹ç®‡æ‰€ã«å‹ã‚’ã¤ã‘ã¦ã„ãã¾ã™ã€‚\n\nä¾‹ãˆã°ã€`src/pages/index.ts`ã®å‹ä»˜ã‘ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\n\n[ğŸ”— src/pages/index.ts](https://github.com/kawamataryo/gatsby-typescript-sample/blob/master/src/pages/index.ts)\n\n````ts\nimport React from \"react\"\nimport { Link, graphql } from \"gatsby\"\nimport { PageProps } from \"gatsby\"\n\nimport Bio from \"../components/bio\"\nimport Layout from \"../components/layout\"\nimport SEO from \"../components/seo\"\n\nconst BlogIndex:React.FC\u003cPageProps\u003cGatsbyTypes.BlogIndexQuery\u003e\u003e = ({ data, location }) =\u003e {\n  const siteTitle = data.site?.siteMetadata?.title || `Title`\n  const posts = data.allMarkdownRemark.nodes\n\n  // ... ä»¥ä¸‹ç•¥\n}\n````\n\nãƒã‚¤ãƒ³ãƒˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«`React.FC`ã€`PageProps`ãªã©ã®ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹å‹ã‚’ä½¿ã†ã“ã¨ã¨ã€`gatsby-plugin-typegen`ã§ç”Ÿæˆã—ãŸå‹ã‚’ä½¿ã†ã“ã¨ã§ã™ã€‚\n\n````ts\nconst BlogIndex:React.FC\u003cPageProps\u003cGatsbyTypes.BlogIndexQuery\u003e\u003e = ({ data, location }) =\u003e { /* -- */ }\n````\n\nã“ã‚Œã§`data`ã®å‹ãŒ`BlogIndexQuery`ã®å‹ã§æ¨è«–ã•ã‚Œã¾ã™ã€‚  \nã‚ã¨ã¯ã€é©å®œ Optional Chaining ã‚„ã€Non null Assertion ã‚’ä½¿ã£ã¦å‹ã‚¨ãƒ©ãƒ¼ã‚’è§£æ±ºã—ã¾ã—ã‚‡ã†ã€‚\n\n# [](https://zenn.dev/ryo_kawamata/articles/gatsby-ts-2020#4.-gatsby-node.js%E3%81%AEtypescript%E5%8C%96)4. gatsby-Node.jsã®TypeScriptåŒ–\n\n`gatsby-node.js`ã§ã‚‚ TypeScrip ã§æ›¸ã‘ã‚‹ã‚ˆã†ã«ã—ã¦ã„ãã¾ã™ã€‚ã“ã“ã§ã¯[ts-node](https://github.com/TypeStrong/ts-node)ã‚’è¿½åŠ ã¾ã™ã€‚\n\nã“ã“ã®æ›¸ãæ–¹ã¯[@Takepepe](https://twitter.com/takepepe?lang=en)ã•ã‚“ã®ä»¥ä¸‹ã®è¨˜äº‹ã‚’å‚è€ƒã«ã•ã›ã¦ã„ãŸã ãã¾ã—ãŸã€‚è‰¯è¨˜äº‹ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ğŸ™  \n[Gatsby.js ã‚’å®Œå…¨TypeScriptåŒ–ã™ã‚‹ - Qiita](https://qiita.com/Takepepe/items/144209f860fbe4d5e9bb)\n\n````\nyarn add -D ts-node\n````\n\nãã—ã¦ã€`gatsby-config.js`ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«å¤‰æ›´ã—ã¾ã™ã€‚\n\n[ğŸ”— gatsby-config.js](https://github.com/kawamataryo/gatsby-typescript-sample/blob/master/gatsby-config.js)\n\n````js\n\"use strict\"\n\nrequire(\"ts-node\").register({\n  compilerOptions: {\n    module: \"commonjs\",\n    target: \"esnext\",\n  },\n})\n\nrequire(\"./src/__generated__/gatsby-types\")\n\nconst {\n  createPages,\n  onCreateNode,\n  createSchemaCustomization,\n} = require(\"./src/gatsby-node/index\")\n\nexports.createPages = createPages\nexports.onCreateNode = onCreateNode\nexports.createSchemaCustomization = createSchemaCustomization\n````\n\nãã—ã¦ã€ä»Šã¾ã§`gatsby-node.js`ã«è¨˜è¿°ã—ã¦ã„ãŸå†…å®¹ã‚’`src/gatsby-node/index.ts`ã«ç§»å‹•ã—ã¦ã€å‹ã‚’è¨­å®šã—ã¾ã™ã€‚  \nåŸºæœ¬çš„ã« node ã® API ã¯`GatsbyNode`ã‹ã‚‰å‹ã‚’å–å¾—ã§ãã¾ã™ã€‚\n\næœ¬å½“ã¯ã€`allMarkdownRemark`ã®ã‚¯ã‚¨ãƒªéƒ¨åˆ†ã®æ–¹ã‚‚`gatsby-plugin-typegen`ã§ç”Ÿæˆã—ãŸã‹ã£ãŸã®ã§ã™ãŒã€ä¸Šæ‰‹ãèªè­˜ã—ã¦ãã‚Œã¾ã›ã§ã—ãŸã€‚ã‚„ã‚Šæ–¹ã‚ã‹ã‚‹æ–¹ã„ãŸã‚‰æ•™ãˆã¦ãã ã•ã„ğŸ™  \nï¼ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã® `Provides utility types for gatsby-node.js.`ã¯ã¾ã ãƒã‚§ãƒƒã‚¯ãŒã¤ã„ã¦ã„ãªã„ã®ã§ã€ã¾ã æœªå¯¾å¿œãªã®ã‹ãªï¼Ÿï¼‰ã€‚\n\n[ğŸ”— src/gatsb-node/index.ts](https://github.com/kawamataryo/gatsby-typescript-sample/blob/master/src/gatsby-node/index.ts)\n\n````ts\nimport path from \"path\"\nimport { GatsbyNode, Actions } from \"gatsby\"\nimport { createFilePath } from \"gatsby-source-filesystem\"\n\nexport const createPages: GatsbyNode[\"createPages\"] = async ({ graphql, actions, reporter }) =\u003e {\n  const { createPage } = actions\n\n  const blogPost = path.resolve(`./src/templates/blog-post.js`)\n\n  const result = await graphql\u003c{ allMarkdownRemark: Pick\u003cGatsbyTypes.Query[\"allMarkdownRemark\"], 'nodes'\u003e }\u003e(\n    `\n      {\n        allMarkdownRemark(\n          sort: { fields: [frontmatter___date], order: DESC }\n          limit: 1000\n        ) {\n          nodes {\n            fields {\n              slug\n            }\n            frontmatter {\n              title\n            }\n          }\n        }\n      }\n    `\n  )\n\n  //...\n\n  }\n}\n\nexport const onCreateNode: GatsbyNode[\"onCreateNode\"] = ({ node, actions, getNode }) =\u003e {\n  const { createNodeField } = actions\n  //...\n}\n\nexport const createSchemaCustomization: GatsbyNode[\"createSchemaCustomization\"] = async ({ actions }: { actions: Actions}) =\u003e {\n  const { createTypes } = actions\n  // ...\n}\n\n````\n\nã“ã‚Œã§`gatsby-Node.js`ã® TypeScript åŒ–ã‚‚å®Œäº†ã§ã™ğŸ‰\n\n## å‚è€ƒ\n\n* [Gatsby.jsã®TypeScriptåŒ– 2020](https://zenn.dev/ryo_kawamata/articles/gatsby-ts-2020)\n* [Gatsby.js ã‚’å®Œå…¨TypeScriptåŒ–ã™ã‚‹ - Qiita](https://qiita.com/Takepepe/items/144209f860fbe4d5e9bb)\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["Gatsbyjs","TypeScript"]},"/note/Git":{"title":"Git","content":"\n\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["git"]},"/note/Git%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88%E3%83%AD%E3%82%B0%E3%81%ABJIRA%E3%81%AE%E3%83%81%E3%82%B1%E3%83%83%E3%83%88%E7%95%AA%E5%8F%B7%E3%82%92%E8%87%AA%E5%8B%95%E4%BB%98%E4%B8%8E%E3%81%99%E3%82%8B":{"title":"Gitã‚³ãƒŸãƒƒãƒˆãƒ­ã‚°ã«JIRAã®ãƒã‚±ãƒƒãƒˆç•ªå·ã‚’è‡ªå‹•ä»˜ä¸ã™ã‚‹","content":"\n\\#git\n\nã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ãƒã‚±ãƒƒãƒˆç•ªå·ã‚’å…¥ã‚Œã‚‹ã®ã¯ã‚ˆãã‚ã‚‹é‹ç”¨ã§ã™ãŒã€\næ‰‹å‹•ã§æ¯å›å…¥ã‚Œã‚‹ã¨æ¼ã‚ŒãŒã§ã‚„ã™ã„ã®ã§ã€è‡ªå‹•ã§ãƒã‚±ãƒƒãƒˆç•ªå·ã‚’å…¥ã‚ŒãŸã„ã§ã™ã€‚\n`git config --global commit.template` ã§ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’è¨­å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ãŒã€\nã“ã¡ã‚‰ã¯å›ºå®šã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã¨ãªã‚Šã¾ã™ã€‚\nä¸‹è¨˜ã®æ‰‹é †ã‚’å¿œç”¨ã™ã‚Œã°ã€æŸ”è»Ÿã«ä»–ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥ã‚Œã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚\n\n### å‰æ\n\n* ãƒ–ãƒ©ãƒ³ãƒåã®å‘½åè¦å‰‡ãŒ `feature/TICKET-9999_foo` ã§ã‚ã‚‹ã“ã¨\n* ãƒãƒ¼ãƒ ã®ãƒ«ãƒ¼ãƒ«ã§ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ãƒã‚±ãƒƒãƒˆç•ªå·ã‚’å…¥ã‚Œã‚‹(å…¥ã‚Œã¦ã‚‚ã„ã„)ã“ã¨\n\n### ã‚¹ã‚¯ãƒªãƒ—ãƒˆä½œæˆ\n\nã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å…ˆé ­ã«ãƒã‚±ãƒƒãƒˆç•ªå·ã‚’ä»˜ä¸ã™ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ `~/.git_template/hooks/prepare-commit-msg` ã«é…ç½®ã™ã‚‹\n\n````bash\n$ mkdir -p ~/.git_template/hooks\n$ touch ~/.git_template/hooks/prepare-commit-msg\n# å®Ÿè¡Œæ¨©é™ã‚’ã¤ã‘ã‚‹\n$ chmod 755 ~/.git_template/hooks/prepare-commit-msg\n````\n\n````bash:~/.git_template/hooks/prepare-commit-msg\n#!/bin/bash -u\n\ncurrent_branch=$(git branch | grep \"^\\*\")\n\nif [[ ! \"$current_branch\" =~ .*/[A-Z]+-[0-9]+.* ]]; then\n    exit 0\nfi\n\n# e.g. feature/AAA-123-foo_bar -\u003e AAA-123\nissue_id=$(echo \"$current_branch\" | sed -E 's/^.*\\/([A-Z]+-[0-9]+).*$/\\1/')\n\n# å…ˆé ­ã«issue_idã‚’ä»˜ä¸\nif [[ ! $(head -n 1 $1 | grep \"$issue_id\") ]]; then\n  sed -i -e '1 s@\\(.*\\)@'\"${issue_id}\"' \\1@' $1\nfi\n````\n\n### æ–°ã—ãã‚¯ãƒ­ãƒ¼ãƒ³ã™ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§è¨­å®šã•ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹\n\n````bash\n$ vim ~/.gitconfig\n````\n\n````toml:~/.gitconfig\n[init]\n  templatedir = ~/.git_template\n````\n\n### ã™ã§ã«ã‚¯ãƒ­ãƒ¼ãƒ³ã•ã‚Œã¦ã„ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã«è¨­å®šã™ã‚‹\n\nä¸Šè¨˜è¨­å®šã‚’ã—ãŸã ã‘ã§ã¯ã€æ—¢å­˜ã®ãƒªãƒã‚¸ãƒˆãƒªã«ã¯åæ˜ ã•ã‚Œãªã„ã®ã§ã€\nå„ãƒªãƒã‚¸ãƒˆãƒªã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã® `.git/hooks/prepare-commit-msg` ã«ä¸Šè¨˜ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒé…ç½®ã•ã‚Œã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\n\n````bash\n$ mkdir .git/hooks/\n$ cp -p ~/.git_template/hooks/prepare-commit-msg .git/hooks/\n````\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["git"]},"/note/Git-%E3%81%A7pull%E3%81%97%E3%82%88%E3%81%86%E3%81%A8%E3%81%97%E3%81%9F%E3%82%89fatal-cannot-lock-ref-%E3%81%AE%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%8C%E3%81%A7%E3%82%8B":{"title":"Git ã§pullã—ã‚ˆã†ã¨ã—ãŸã‚‰fatal cannot lock ref ã®ã‚¨ãƒ©ãƒ¼ãŒã§ã‚‹","content":"\n[Jenkinsã®git fetchã§Cannot lock refã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸæ™‚ã®å¯¾å¿œ | by eiryu | Medium](https://medium.com/@eiryu/jenkins%E3%81%AEgit-fetch%E3%81%A7cannot-lock-ref%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%8C%E5%87%BA%E3%81%9F%E6%99%82%E3%81%AE%E5%AF%BE%E5%BF%9C-f112ffd755a6)\n[Gitã§ãƒ–ãƒ©ãƒ³ãƒã‚’ä½œã‚ã†ã¨ã—ãŸã‚‰ã€Œfatal: cannot lock ref ...ã€ã¨æ€’ã‚‰ã‚ŒãŸ - Qiita](https://qiita.com/ezawa800/items/d2c0ce0b8c47ffae0266)\n\n[Git](note/Git.md) ã§ `feature/foo` ã¨ã„ã†ãƒ–ãƒ©ãƒ³ãƒãŒã‚ã‚‹çŠ¶æ…‹ã§ `feature/foo/bar` ã‚’ä½œã‚ã†ã¨ã™ã‚‹ã¨\n`error: Cannot lock ref 'refs/remotes/origin/feature/foo/bar': 'refs/remotes/origin/feature/foo' exists; cannot create 'refs/remotes/origin/feature/foo/bar'`  ã¨ã„ã£ãŸã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã€‚\n\n## ç™ºç”Ÿæ‰‹é †\n\n* AãŒ `feature/foo` ã‚’pushã™ã‚‹\n* BãŒpullã™ã‚‹\n* AãŒ `feature/foo` ã‚’æ¶ˆã—ã¦ `feature/foo/bar` ã‚’pushã™ã‚‹\n* BãŒpullã—ã‚ˆã†ã¨ã™ã‚‹ã¨ãã‚¨ãƒ©ãƒ¼ã«ãªã‚‹\n\n## å¯¾å¿œ\n\n`git remote prune` ã‚’ã™ã‚Œã°è‰¯ã„\n`git pull --prune` ã§ã‚‚è‰¯ã•ãã†\n\n[note/Jenkins](Jenkins.md) ã§ã€Jenkinsfileã®cloneæ™‚ã«ç™ºç”Ÿã—ãŸå ´åˆã¯ `Additional Behaviours` ã®ã¨ã“ã‚ã§ `Prune stale remote-tracking branches` ã‚’æŒ‡å®šã™ã‚‹ã¨ã‚ˆã„ã€‚\nè‡ªåˆ†ã¯çŸ¥ã‚‰ãªã‹ã£ãŸã®ã§ã€JenkinsfileãŒã‚¯ãƒ­ãƒ¼ãƒ³ã•ã‚Œã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª( `${JENKINS_HOME}/workspace/path/to/job@script` ) ã‚’å‰Šé™¤ã™ã‚‹ã‚¸ãƒ§ãƒ–ã‚’ä½œã£ã¦ã„ãŸã€‚ã€‚\n\n![Pasted-image-20230501054721](note/Pasted-image-20230501054721.png)\n\n![Pasted-image-20230501054815](note/Pasted-image-20230501054815.png)\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["2023/05/01","Git"]},"/note/Git-fatal-detected-dubious-ownership-in-repository%E3%82%A8%E3%83%A9%E3%83%BC":{"title":"Git fatal detected dubious ownership in repositoryã‚¨ãƒ©ãƒ¼","content":"\n\\#git\n\n## äº‹è±¡\n\ngitã®æ“ä½œæ™‚ã«ä»¥ä¸‹ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‡ºã¦å›°ã£ãŸã€‚\n\n````shell\n$ git fetch\nfatal: detected dubious ownership in repository at '/path/to/repo'\nTo add an exception for this directory, call:\n\n    git config --global --add safe.directory /path/to/repo\n````\n\n## åŸå› \n\n[CVE-2022-24765](https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2022-24765) ã®è„†å¼±æ€§ã¸ã®å¯¾å¿œã¨ã—ã¦git 2.35.2ã§å…¥ã£ãŸ `safe.directory` é–¢é€£ã®å¤‰æ›´ã«ã‚ˆã‚‹ã‚‚ã®ã€‚\n\nå…±æœ‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ãƒªãƒã‚¸ãƒˆãƒªãŒã‚ã‚‹å ´åˆã€ã•ã‚‰ã«ä¸Šä½ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã€Œ.gitã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆã—ã€ä¸æ­£ã«è¨­å®šã‚’èª­ã¿è¾¼ã¾ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã¨ã„ã£ãŸè„†å¼±æ€§\n\nhttps://git-scm.com/docs/git-config/2.35.2#Documentation/git-config.txt-safedirectory\n[ã€ŒGit 2.35.2ã€ãŒå…¬é–‹ ï½2ä»¶ã®è„†å¼±æ€§ã‚’ä¿®æ­£ã€4æœˆ14æ—¥è¿½è¨˜ã€‘ - çª“ã®æœ](https://forest.watch.impress.co.jp/docs/news/1402486.html)\n\ngit cloneå…ˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ownerãŒç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ãªã„å ´åˆã«ã“ã®ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹\n\nã¡ãªã¿ã« `go get` ã‚‚git cloneã—ã¦ã„ã‚‹ã®ã§ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰å–å¾—ã™ã‚‹éš›ã«ã“ã®äº‹è±¡ãŒç™ºç”Ÿã—ã¦ã€\nCIã‚µãƒ¼ãƒãƒ¼ä¸Šã§å…±æœ‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« $GOMODCACHE ã‚’ç½®ã„ã¦ã„ã‚‹å ´åˆã«å›°ã£ã¦ã—ã¾ã†\n\n## å¯¾å¿œ\n\nãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ownerã‚’gitæ“ä½œã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ã™ã‚‹ã€‚\nãã‚ŒãŒã§ããªã„å ´åˆã€ãƒ•ã‚©ãƒ«ãƒ€åãŒã‚ã‹ã£ã¦ã„ã‚‹ãªã‚‰ã€ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å‡ºã¦ããŸã¨ãŠã‚Šã« `safe.directory` ã«è¿½åŠ ã™ã‚‹ã€‚\n\n`git config --global --add safe.directory /path/to/repo`\n\n`go get` ã™ã‚‹éš›ã«ã¯ `$GOMODCACHE/cache/vcs/abcdef12345` ã®ã‚ˆã†ãªãƒãƒƒã‚·ãƒ¥ã£ã½ã„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ã®ã§ã€\nã“ã‚Œã‚’ã„ã¡ã„ã¡è¿½åŠ ã™ã‚‹ã®ã¯è¾›ã„ã€‚\n\n`git config --global --add safe.directory *` ã¨ã™ã‚‹ã“ã¨ã§ã€ã™ã¹ã¦ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’è¨±å¯ã™ã‚‹ã“ã¨ãŒã§ãã€ã“ã‚Œã§è§£æ¶ˆã¯ã§ããŸã€‚\nãŒã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£çš„ã«ã¯ã™ã¹ã¦ã‚’è¨±å¯ã—ã¦ã—ã¾ã†ã®ã§è‰¯ããªã„ã¨æ€ã†ã€‚ã€‚\n\n[bash - How to add directory recursively on git safe.directory? - Stack Overflow](https://stackoverflow.com/questions/71855882/how-to-add-directory-recursively-on-git-safe-directory)\n2.36 æ™‚ç‚¹ã§ã¯ã€recursiveã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡å®šã™ã‚‹æ–¹æ³•ã¯ãªã `*` ã§æŒ‡å®šã™ã‚‹ã—ã‹ãªã„ã‚ˆã†ã ã£ãŸã€‚\n\nãªã«ã‹ã—ã‚‰å¯¾å¿œãŒå‡ºã‚‹ã¾ã§ã¯ `*` æŒ‡å®šã«ã™ã‚‹\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["git"]},"/note/Git-hunk%E3%81%AE%E3%82%B5%E3%82%A4%E3%82%BA%E3%82%92%E5%A4%89%E6%9B%B4%E3%81%99%E3%82%8B":{"title":"Git hunkã®ã‚µã‚¤ã‚ºã‚’å¤‰æ›´ã™ã‚‹","content":"\n`git diff --ignore-matching-lines=\u003cpattern\u003e` ã§ç‰¹å®šã®diffã‚’é™¤å¤–ã—ã‚ˆã†ã¨ã—ãŸãŒã†ã¾ãã„ã‹ãšèª¿ã¹ãŸã¨ã“ã‚ã€hunkå˜ä½ã§ãƒ‘ã‚¿ãƒ¼ãƒ³ãŒé©ç”¨ã•ã‚Œã‚‹ã‚‰ã—ã„ã€‚\nhunkã®ã‚µã‚¤ã‚ºã‚’å°ã•ãã§ããªã„ã‹ã‚’èª¿ã¹ãŸã€‚\n\n[Can I modify git-add's **default** hunk size? - Stack Overflow](https://stackoverflow.com/questions/33891010/can-i-modify-git-adds-default-hunk-size)\n\nhunk sizeã‚’ [diff.context](https://git-scm.com/docs/diff-config#diff-config-diffcontext) ã§æŒ‡å®šã§ãã‚‹\n\n````\ngit config --global diff.context 0\n\n# å®Ÿè¡Œæ™‚ã®ã¿\ngit -c diff.context=0 diff\n````\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["2023/04/25","git"]},"/note/Git-remote%E3%81%AB%E3%83%96%E3%83%A9%E3%83%B3%E3%83%81%E3%81%8C%E5%AD%98%E5%9C%A8%E3%81%99%E3%82%8B%E3%81%8B%E3%81%A9%E3%81%86%E3%81%8B%E3%82%92%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF%E3%81%99%E3%82%8B":{"title":"Git remoteã«ãƒ–ãƒ©ãƒ³ãƒãŒå­˜åœ¨ã™ã‚‹ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹","content":"\n[Git](note/Git.md) ã§remoteã«ãƒ–ãƒ©ãƒ³ãƒãŒå­˜åœ¨ã™ã‚‹ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã«ã¯ `git ls-remote` ã‚’ä½¿ã†\n\n````shell\nREMOTE_NAME=origin\n# URLã‚’ç›´æ¥æŒ‡å®šã—ã¦ã‚‚ã„ã„\n# REMOTE_NAME=https://github.com/xxx/yyy\n\nBRANCH_NAME=master\n\nif git ls-remote --exit-code $REMOTE_NAME $BRANCH_NAME \u003e/dev/null 2\u003e\u00261; then\n  echo \"Branch $BRANCH_NAME exists in remote $REMOTE_NAME.\"\nelse\n  echo \"Branch $BRANCH_NAME does not exist in remote $REMOTE_NAME.\"\nfi\n````\n\n* [--exit-code](https://git-scm.com/docs/git-ls-remote.html#Documentation/git-ls-remote.txt---exit-code) ä¸€è‡´ã™ã‚‹refsãŒãªã„å ´åˆã¯exit code 2ã‚’è¿”ã™\n* [--head](https://git-scm.com/docs/git-ls-remote.html#Documentation/git-ls-remote.txt---heads) `refs/heads` `refs/tags` ã®ã¿ã«é™å®šã™ã‚‹\n\nã¡ãªã¿ã«ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒªãƒã‚¸ãƒˆãƒªã§åˆ¤å®šã™ã‚‹å ´åˆã¯ã“ã¡ã‚‰\n\n````shell\nif git show-ref --quiet refs/heads/$BRANCH_NAME; then\n  echo \"Branch $BRANCH_NAME exists.\"\nelse\n  echo \"Branch $BRANCH_NAME does not exist.\"\nfi\n````\n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["2023/05/01","git"]},"/note/Go":{"title":"Go","content":"\nGoogleãŒé–‹ç™ºã—ãŸã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èª\nCã‚„C++ãªã©ã®è¨€èªã‹ã‚‰ã®å½±éŸ¿ã‚’å—ã‘ã¦ãŠã‚Šã€é™çš„å‹ä»˜ã‘ã€ãƒ¡ãƒ¢ãƒªå®‰å…¨æ€§ã€ã‚¬ãƒ™ãƒ¼ã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã€ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ãªã©ã®ç‰¹å¾´ãŒã‚ã‚‹ã€‚\n\nã‚·ãƒ³ãƒ—ãƒ«ã§æ‰±ã„ã‚„ã™ãã€é«˜é€Ÿã§ã‚ã‚Šã€ä¸¦è¡Œå‡¦ç†ã«å¼·ã¿ã‚’æŒã£ã¦ã„ã‚‹ã€‚\nWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®é–‹ç™ºã‚„ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãªã©ã«ã‚‚åºƒãä½¿ã‚ã‚Œã¦ã„ã‚‹ã€‚\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Go"]},"/note/Go%E3%81%A7JSON%E3%81%AE%E6%99%82%E5%88%BB%E3%82%92%E6%89%B1%E3%81%86%E5%A0%B4%E5%90%88":{"title":"Goã§JSONã®æ™‚åˆ»ã‚’æ‰±ã†å ´åˆ","content":"\n\\#Go\n\n## JSONã®marshal/unmarshalã§æ—¥æ™‚ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’æŒ‡å®šã™ã‚‹\n\n[ãƒ‡ãƒ¼ã‚¿ã‚’JSONã«å¤‰æ›ã™ã‚‹ã¨ãã«ä»»æ„ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’è¨­å®šã™ã‚‹ - Qiita](https://qiita.com/taizo/items/2c3a338f1aeea86ce9e2)\n\n[Marshaler](https://golang.org/pkg/encoding/json/#Marshaler), [Unmarshaler](https://golang.org/pkg/encoding/json/#Unmarshaler) ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…ã™ã‚‹ã“ã¨ã§ã€ä»»æ„ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã‚‹\n\n````go\npackage main\n\nimport (\n\t\"encoding/json\"\n\t\"fmt\"\n\t\"time\"\n)\n\nconst (\n\tp = `{\"time\": \"2021/07/01 19:30:00\"}`\n)\n\ntype Message struct {\n\tTime JSONTime `json:\"time\"`\n}\n\ntype JSONTime struct {\n\ttime.Time\n}\n\nfunc (t JSONTime) layout() string {\n\treturn \"2006/01/02 15:04:05\"\n}\n\nfunc (t *JSONTime) UnmarshalJSON(b []byte) error {\n\tloc := loadLocation()\n\t// å›²ã¿æ–‡å­—ã®\"ã‚’ã¤ã‘ã‚‹ã®ã‚’å¿˜ã‚Œãªã„\n\tret, err := time.ParseInLocation(`\"`+t.layout()+`\"`, string(b), loc)\n\tif err != nil {\n\t\tfmt.Println(err)\n\t\treturn err\n\t}\n\t*t = JSONTime{ret}\n\treturn nil\n}\n\nfunc (t JSONTime) MarshalJSON() ([]byte, error) {\n\treturn []byte(`\"` + t.Format(t.layout()) + `\"`), nil\n}\n\nfunc loadLocation() *time.Location {\n\t// ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã®æŒ‡å®š\n\tloc, _ := time.LoadLocation(\"Asia/Tokyo\")\n\treturn loc\n}\n\nfunc main() {\n\tvar message Message\n\terr := json.Unmarshal([]byte(p), \u0026message)\n\tif err != nil {\n\t\tfmt.Println(err)\n\t}\n\tfmt.Printf(\"Time unmarshaled: %s\\n\", message.Time)\n\n\tloc := loadLocation()\n\tnow := time.Date(2021, 8, 25, 18, 20, 0, 0, loc)\n\n\tmessage.Time = JSONTime{now}\n\tb, err := json.Marshal(\u0026message)\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\tfmt.Printf(\"Marshalled: %s\\n\", b)\n}\n````\n\n## ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’æ‰±ã†å ´åˆ\n\nã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’æŒ‡å®šã—ãªã„å ´åˆã€ `time.Parse` ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§UTCã«ãªã‚‹ãŸã‚JSTãªã©ã«ã—ãŸã„å ´åˆã¯æ˜ç¤ºçš„ã«æŒ‡å®šã™ã‚‹\n\n[Goã§time.Parseã‚’ä½¿ã†ã¨ãã®ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã«ã¤ã„ã¦](https://blog.70-10.net/2018/07/31/go-time-parse/)\n\n### `time.Parse` ã§ã‚¿ã‚¤ãƒ ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã‚’å«ã‚ã¦ãƒ‘ãƒ¼ã‚¹ã™ã‚‹\n\n````go\n// ã‚¿ã‚¤ãƒ ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã‚’æŒ‡å®šã™ã‚‹ã¨ã€ãã®ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã§è§£é‡ˆã•ã‚Œã‚‹\n// ã‚¿ã‚¤ãƒ ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã‚’èªè­˜ã•ã›ãŸã„å ´åˆã¯formatã«å«ã‚ã‚‹\nt, _ := time.Parse(\"2006-01-02 15:04:05 (MST)\", \"2021-07-02 08:30:00 (JST)\")\n````\n\n## `time.ParseInLocation` ã§ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹\n\n````go\n// ç¬¬3å¼•æ•°ã§time.Locationã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ã‚¿ã‚¤ãƒ ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãªã—ã§ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’æŒ‡å®šã§ãã‚‹\njst, _ := time.LoadLocation(\"Asia/Tokyo\")\nt1, _ := time.ParseInLocation(\"2006-01-02 15:04:05\", \"2021-07-02 08:30:00\", jst)\n\n// ç¬¬3å¼•æ•°ã§ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã€ã‹ã¤æ–‡å­—åˆ—å†…ã§ã‚¿ã‚¤ãƒ ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãŒæŒ‡å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã€\n// ã‚¿ã‚¤ãƒ ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ã®è¨­å®šãŒæœ‰åŠ¹ã«ãªã‚‹\n// =\u003e 2021-07-02 08:30:00 UTC\nt2, _ := time.ParseInLocation(\"2006-01-02 15:04:05 (MST)\", \"2021-07-02 08:30:00 (UTC)\", jst)\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Go"]},"/note/Go%E3%81%A7http%E3%82%B3%E3%83%8D%E3%82%AF%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E5%86%8D%E5%88%A9%E7%94%A8%E3%81%95%E3%82%8C%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E6%9B%B8%E3%81%8F":{"title":"Goã§httpã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ã‚’å†åˆ©ç”¨ã•ã‚Œã‚‹ã‚ˆã†ã«æ›¸ã","content":"\n\\#Go\n\n* responseã‚’æ¨ã¦ã¦ã—ã¾ã†ã¨ã€resp.Body.Close() ãŒã§ããªããªã‚‹ã®ã§ã ã‚\n* æœ€å¾Œã¾ã§èª­ã¿åˆ‡ã£ã¦Closeã—ã¦ãªã„ã¨keep-aliveã—ãªã„\n* for-loopã®ä¸­ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹å ´åˆãã£ã¡ã‚Šæ¯å›Closeã™ã‚‹\n\n[Goã®net/httpã®clientã§ãªãœresponseBodyã‚’Closeã€èª­ã¿åˆ‡ã‚‰ãªãã¦ã¯ã„ã‘ãªã„ã®ã‹](https://zenn.dev/cube/articles/4ce18a672fc991)\n\n1. responseBodyã‚’Closeã—ãªã„ã¨ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ãŒãƒ–ãƒ­ãƒƒã‚¯ã—ã¦ã—ã¾ã„å†åˆ©ç”¨ã•ã‚Œãšã€å¤ã„æ¥ç¶šãŒæ®‹ã£ãŸã¾ã¾ã€æ–°ã—ãæ¥ç¶šã™ã‚‹ãŸã³ã«æ–°ã—ã„Goroutineã¨ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿ã‚’ä½œã£ã¦ã—ã¾ã†\n1. responseBodyã‚’èª­ã¿åˆ‡ã‚‰ãªã„ã¨keepAliveã•ã‚Œãšã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ãŒçµ‚äº†ã—ã¦ã—ã¾ã„å†åˆ©ç”¨ã•ã‚Œãšã€æ¥ç¶šã®ãŸã³ã«æ–°ã—ã„æ¥ç¶šã‚’ä½œã£ã¦ã—ã¾ã†ã€‚\n\n[Connection re-use in Golang with http.Client - stuartleeks.com](https://stuartleeks.com/posts/connection-re-use-in-golang-with-http-client/)\n\n* bodyã‚’èª­ã¿åˆ‡ã‚Šã€Closeã‚’è¡Œã†\n\n`DefaultClient` ã‚’ä½¿ã†:\n\n````go\n    // Uses http.DefaultClient which in turn uses the same http.DefaultTransport instance\n    http.Get(\"http://example.com\")\n````\n\n`Transport`Â ã‚’æŒ‡å®šã—ãªã„(`DefaultTransport` ãŒä½¿ã‚ã‚Œã‚‹):\n\n````go\n    // Transport not set, so http.DefaultTransport instance is used\n    client := \u0026http.Client{}\n    client.Get(\"http://example.com\")\n````\n\nåŒã˜Â `Transport`Â ã‚’ä½¿ã†:\n\n````go\n    // Transport set to a cached value\n    client := \u0026http.Client{\n        Transport: transport, // assuming that transport is a fixed value for this example!\n    }\n    client.Get(\"http://example.com\")\n````\n\nå†åˆ©ç”¨ã•ã‚Œãªã„ã‚±ãƒ¼ã‚¹: `http.Client` ã”ã¨ã« `Transport` ã‚’ä½œã‚‹\n\n````go\n    // New Transport for each client/call means that connections cannot be re-used\n    // This leads to port exhaustion under load :-(\n    client := \u0026http.Client{\n        Transport: \u0026http.Transport{\n            // insert config here\n        },\n    }\n    client.Get(\"http://example.com\")\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Go"]},"/note/Go%E3%81%A7zsh_history%E3%82%92%E3%83%91%E3%83%BC%E3%82%B9%E3%81%99%E3%82%8B%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%A0%E3%82%92%E6%9B%B8%E3%81%84%E3%81%A6%E3%81%BF%E3%82%8B":{"title":"Goã§zsh_historyã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ã„ã¦ã¿ã‚‹","content":"\n\\#zsh\n\n## Goã§zsh_historyã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ã„ã¦ã¿ã‚‹\n\n[zsh æ–‡å­—åŒ–ã‘ã—ãŸzsh_historyãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚ã‚‹ã‚ˆã†ã«ã™ã‚‹](note/zsh%20æ–‡å­—åŒ–ã‘ã—ãŸzsh_historyãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚ã‚‹ã‚ˆã†ã«ã™ã‚‹.md), [zsh ãƒãƒ«ãƒãƒã‚¤ãƒˆæ–‡å­—ã‚’zsh_historyã®å½¢å¼ã«å¤‰æ›ã™ã‚‹](note/zsh%20ãƒãƒ«ãƒãƒã‚¤ãƒˆæ–‡å­—ã‚’zsh_historyã®å½¢å¼ã«å¤‰æ›ã™ã‚‹.md) ã®ä»•æ§˜ã«å‰‡ã£ã¦ã€ãƒ‘ãƒ¼ã‚¹å‡¦ç†ã‚’æ›¸ã„ã¦ã„ã\n\n````go\npackage zhistconv\n\nconst (\n\t// zsh_historyã®ä»•æ§˜ã§ã€å„ãƒã‚¤ãƒˆãŒ0x83~0xA2ã®ã¨ãã€ãã®å‰ã«0x83ã‚’å…¥ã‚Œã¦6bitç›®ã‚’åè»¢ã•ã›ã‚‹\n\tx83 = 131\n\txA2 = 162\n\tx20 = 32\n)\n\n// zsh_historyã‚’èª­ã‚ã‚‹å½¢å¼ã«å¤‰æ›ã™ã‚‹\nfunc ParseZshHistory(latin1Byte []byte) []byte {\n\tisMarking := false\n\tvar byteBuffer []byte\n\n\tfor _, codePoint := range latin1Byte {\n\t\tif codePoint == x83 {\n\t\t\tisMarking = true\n\t\t\tcontinue\n\t\t}\n\n\t\tif isMarking {\n\t\t\t// 6bitç›®ã‚’åè»¢ã•ã›ã‚‹ãŸã‚ã«0x20ã‚’XORã™ã‚‹\n\t\t\tinvertCodePoint := codePoint ^ x20\n\t\t\tbyteBuffer = append(byteBuffer, invertCodePoint)\n\t\t\tisMarking = false\n\t\t} else {\n\t\t\tbyteBuffer = append(byteBuffer, codePoint)\n\t\t}\n\t}\n\n\treturn byteBuffer\n}\n\n// ãƒ—ãƒ¬ãƒ¼ãƒ³ãªãƒ†ã‚­ã‚¹ãƒˆã‚’zsh_historyã«å¤‰æ›ã™ã‚‹\nfunc ConvertToZshHistory(latin1Byte []byte) []byte {\n\tvar byteBuffer []byte\n\n\tfor _, codePoint := range latin1Byte {\n\t\t// 131ã¯0metacharã®10é€²æ•°è¡¨ç¾\n\t\tif x83 \u003c= codePoint \u0026\u0026 codePoint \u003c= xA2 {\n\t\t\t// 6bitç›®ã‚’åè»¢ã•ã›ã‚‹ãŸã‚ã«0x20ã‚’XORã™ã‚‹\n\t\t\tinvertCodePoint := codePoint ^ x20\n\t\t\tbyteBuffer = append(byteBuffer, x83)\n\t\t\tbyteBuffer = append(byteBuffer, invertCodePoint)\n\t\t} else {\n\t\t\tbyteBuffer = append(byteBuffer, codePoint)\n\t\t}\n\t}\n\n\treturn byteBuffer\n}\n\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["zsh"]},"/note/Go%E3%81%AA%E3%82%89%E3%82%8F%E3%81%8B%E3%82%8B%E3%82%B7%E3%82%B9%E3%83%86%E3%83%A0%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E7%AC%AC2%E7%89%88":{"title":"Goãªã‚‰ã‚ã‹ã‚‹ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ç¬¬2ç‰ˆ","content":"\n## 1ç« \n\n* \n\n## 2ç« \n\n* io.Writer\n* ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿ã«å¯¾å¿œã™ã‚‹ãƒ¢ãƒã¯ã€é€šå¸¸ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯é™ã‚‰ã‚Œã¾ã›ã‚“ã€‚æ¨™æº–å…¥å‡ºåŠ›ã€ã‚½ã‚±ãƒƒãƒˆã€OS ã‚„ CPU ã«å†…è”µã•ã‚Œã¦ã„ã‚‹ä¹±æ•°ç”Ÿæˆã®ä»•çµ„ã¿ãªã©ã€æœ¬æ¥ãƒ•ã‚¡ã‚¤ãƒ«ã§ã¯ãªã„ã‚‚ã®ã«ã‚‚ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿ãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œã€ã©ã‚Œã‚‚ãƒ•ã‚¡ã‚¤ãƒ«ã¨åŒã˜ã‚ˆã†ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã™ã€‚\n* ã“ã‚Œã¨åŒã˜ã‚ˆã†ã«ã€ãƒ•ã‚¡ã‚¤ãƒ«ãƒ†ã‚™ã‚£ã‚¹ã‚¯ãƒªãƒ•ã‚šã‚¿ã®ã‚ˆã†ãªå…±é€šåŒ–ã®ä»•çµ„ã¿ã‚’è¨€èªãƒ¬ãƒ˜ã‚™ãƒ«ã¦ã‚™æ¨¡å€£ã—ã¦æ•´å‚™ã—ã€OS ã«ã‚ˆã‚‹ API ã®å·®ç•°ã‚’å¸åã—ã¦ã„ã¾ã™ã€‚ãã®ä¸€ä¾‹ã‹ã‚™ã€æœ¬ç« ã¦ã‚™å–ã‚Šä¸Šã‘ã‚™ã‚‹ io.Writer ã¦ã‚™ã™ã€‚\n\n## 3ç«  io.Reader\n\nãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹\nèª­ã¿è¾¼ã‚“ã å†…å®¹ã‚’å¼•æ•°ã«æ ¼ç´ã—ã€ãƒã‚¤ãƒˆæ•°ã‚’ã‹ãˆã™\n\n`io.Copy`\n`io.Reader` ã‹ã‚‰ `io.Writer` ã«ãã®ã¾ã¾ãƒ‡ãƒ¼ã‚¿ã‚’æ¸¡ã™\n\n````go\n// ã™ã¹ã¦æ›¸ãå‡ºã™\nwriteSize, err := io.Copy(writer, reader)\n// æŒ‡å®šã—ãŸã‚µã‚¤ã‚ºã ã‘ã‚³ãƒ”ãƒ¼\nwriteSize, err := io.CopyN(writer, reader, size)\n````\n\nãƒ•ã‚¡ã‚¤ãƒ«å…¥åŠ›ã€ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯é€šä¿¡ãªã©\n\nãƒã‚¤ãƒŠãƒªè§£æãŒã¸ãƒ¼ã¨ãªã£ãŸ\nPNGãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿\n\nã‚¹ãƒˆãƒªãƒ¼ãƒ \nã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ã¤ã‹ã£ãŸãƒ‡ãƒ¼ã‚¿å…¥å‡ºåŠ›\nGoã§ã¯ã‚¹ãƒˆãƒªãƒ¼ãƒ ã¯è¨€ã‚ãªã„ãŒãƒ‘ã‚¤ãƒ—ã¨ã—ã¦ä½¿ãˆã‚‹\n\n* `io.MultiReader`\n* `io.TeeReader`\n  * Readerã§readã—ãŸå†…å®¹ã‚’åˆ¥ã®io.Writerã«æ›¸ãå‡ºã™\n* `io.Pipe` (io.PipeReader ã¨ io.PipeWriter)\n\n## 4ç«  ãƒãƒ£ãƒãƒ«\n\nãƒãƒƒãƒ•ã‚¡ä»˜ãã‹ã„ãªã‹ã§å‹•ä½œã‹ã‚ã‚‹\n\n````go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"strconv\"\n\t\"time\"\n)\n\nfunc sub(message chan string) {\n\n\tfor i := 0; i \u003c 5; i++ {\n\t\tmessage \u003c- \"hello \" + strconv.Itoa(i)\n\t}\n\n\tfmt.Println(\"wait close\")\n\tclose(message)\n\n}\n\nfunc main() {\n\tfmt.Println(\"start\")\n\tdone := make(chan bool, 2)\n\tgo func() {\n\t\tfmt.Println(\"sub() is finished\")\n\t\ttime.Sleep(time.Second)\n\t\tdone \u003c- true\n\t}()\n\n\t\u003c-done\n\n\tmessage := make(chan string, 5)\n\n\tgo sub(message)\n\n\tfor ch := range message {\n\t\tfmt.Println(ch)\n\t\ttime.Sleep(time.Second)\n\t}\n\n\tfmt.Println(\"end\")\n}\n\n````\n\nforæ–‡\n\n````go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"math\"\n)\n\nfunc primeNumber() chan int {\n\tresult := make(chan int)\n\n\tgo func() {\n\t\tresult \u003c- 2\n\t\tfor i := 3; i \u003c 100000; i+=2 {\n\t\t\tl := int(math.Sqrt(float64(i)))\n\t\t\tfound := false\n\t\t\tfor j := 3; j \u003c l+1; j += 2 {\n\t\t\t\tif i%j == 0 {\n\t\t\t\t\tfound = true\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif !found {\n\t\t\t\tresult \u003c- i\n\t\t\t}\n\t\t}\n\t\tclose(result)\n\t}()\n\n\treturn result\n}\n\nfunc main() {\n\tfmt.Println(\"start\")\n\tpn := primeNumber()\n\tfmt.Println(\"...\")\n\tfor n := range pn {\n\t\tfmt.Println(n)\n\t}\n\tfmt.Println(\"end\")\n}\n````\n\n### selectæ–‡\n\nè¤‡æ•°ã®ãƒãƒ£ãƒãƒ«ã‚’å¾…ã¡å—ã‘ã¦ãƒ‡ãƒ¼ã‚¿ãŒå…ˆã«é€ä¿¡ã§ããŸãƒãƒ£ãƒ³ãƒãƒ«ã®ã¿å‡¦ç†ã™ã‚‹\ntimeoutãªã©\n`default` ã‚’æ›¸ãã¨ä½•ã‚‚èª­ã¿è¾¼ã‚ãªã‹ã£ãŸã¨ãã«å®Ÿè¡Œã•ã‚Œã‚‹ã€‚ãƒ–ãƒ­ãƒƒã‚¯ã›ãšã«ã™ãçµ‚äº†ã—ã¦ã—ã¾ã†ã€‚ã“ã®æ§‹æ–‡ã¯ãƒãƒ£ãƒãƒ«ã«ãƒ‡ãƒ¼ã‚¿ãŒå…¥ã‚‹ã¾ã§ãƒãƒ¼ãƒªãƒ³ã‚°ã§ãƒ«ãƒ¼ãƒ—ã‚’å›ã™\n\n````go\nfor {\n    select {\n    case data := \u003c- reader:\n        // ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ã†\n    default:\n        break \n    }\n}\n````\n\n### context\n\nã‚­ãƒ£ãƒ³ã‚»ãƒ«ã‚„ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆãªã©\n\n## 5ç«  ã‚·ã‚¹ãƒ†ãƒ ã‚³ãƒ¼ãƒ«\n\nã‚·ã‚¹ãƒ†ãƒ ã‚³ãƒ¼ãƒ«: ç‰¹æ¨©ãƒ¢ãƒ¼ãƒ‰ã§OSã®æ©Ÿèƒ½ã‚’å‘¼ã¶ã“ã¨\n\nCPUã®å‹•ä½œãƒ¢ãƒ¼ãƒ‰\nãƒ—ãƒ­ã‚»ã‚¹ã¯è‡ªåˆ†ã®ã“ã¨ã ã‘ã«é›†ä¸­ã—ã€ãƒ¡ãƒ¢ãƒªç®¡ç†ã‚„æ™‚é–“ç®¡ç†ã¯ãƒ—ãƒ­ã‚»ã‚¹ã®å¤–ã‹ã‚‰OSãŒã™ã¹ã¦è¡Œã†\nCPUã®ä»•çµ„ã¿ã«å‹•ä½œãƒ¢ãƒ¼ãƒ‰ãŒã‚ã‚Šã€OSãŒå‹•ä½œã™ã‚‹ **ç‰¹æ¨©ãƒ¢ãƒ¼ãƒ‰** ã¨ä¸€èˆ¬çš„ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒå‹•ä½œã™ã‚‹ **ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ãƒ¼ãƒ‰**\n\né€šå¸¸ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚‚ã€ãƒ¡ãƒ¢ãƒªå‰²ã‚Šå½“ã¦ã‚„ãƒ•ã‚¡ã‚¤ãƒ«å…¥å‡ºåŠ›ã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆé€šä¿¡ãªã©ã®æ©Ÿèƒ½ãŒå¿…è¦ã«ãªã‚‹ã“ã¨ã¯å¤šã€…ã‚ã‚Šã¾ã™\nã‚·ã‚¹ãƒ†ãƒ ã‚³ãƒ¼ãƒ«ã‚’ä»‹ã—ã¦ã€ç‰¹æ¨©ãƒ¢ãƒ¼ãƒ‰ã§ã®ã¿è¨±ã•ã‚Œã¦ã„ã‚‹æ©Ÿèƒ½ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã®ã‚¢ãƒ—ãƒªã‹ã‚‰å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã‚‹\n\nPOSIXã¨Cè¨€èªã®æ¨™æº–è¦æ ¼\nOSé–“ã¦ã‚™å…±é€šã®ã‚·ã‚¹ãƒ†ãƒ ã‚³ãƒ¼ãƒ«ã‚’æ±ºã‚ã‚‹ã“ã¨ã¦ã‚™ã€ã‚¢ãƒ•ã‚šãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ç§»æ¤æ€§ã‚’é«˜ã‚ã‚‹ãŸã‚ã«ä½œã‚‰ã‚ŒãŸIEEEè¦æ ¼\n\nPOSIXã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆã¯ã€ã€ŒOSé–“ã®ãƒãƒ¼ã‚¿ãƒ“ãƒªãƒ†ã‚£ã‚’ç¶­æŒã™ã‚‹ã€ã§ã™ã€‚\nGoè¨€èªã¯ã€ãƒãƒ¼ã‚¿ãƒ“ãƒªãƒ†ã‚£ã‚’è‡ªåŠ›ã§ãŒã‚“ã°ã‚‹ã“ã¨ã§ã‚¯ãƒ­ã‚¹ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒå®¹æ˜“ã«ãªã‚Šã€ä»–ã®OSã§å‹•ããƒã‚¤ãƒŠãƒªãŒç°¡å˜ã«ä½œæˆã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚\n\n## 6ç«  TCPã‚½ã‚±ãƒƒãƒˆã¨HTTPã®å®Ÿè£…\n\nRPCã¯ã‚µãƒ¼ãƒã‚™ãƒ¼ã‹ã‚™ç”¨æ„ã—ã¦ã„ã‚‹ã•ã¾ã•ã‚™ã¾ãªæ©Ÿèƒ½ã‚’ã€ãƒ­ãƒ¼ã‚«ãƒ«ã‚³ãƒ³ãƒ’ã‚šãƒ¥ãƒ¼ã‚¿ãƒ¼ä¸Šã«ã‚ã‚‹é–¢æ•°ã®ã‚ˆã†ã«ç°¡å˜ã«å‘¼ã²ã‚™å‡ºãã†ã€ã¨ã„ã†ä»•çµ„ã¿ã¦ã‚™ã™\nJSON-RPCã¦ã‚™ã¯ã€ãƒ•ã‚šãƒ­ãƒˆã‚³ãƒ«ãƒã‚™ãƒ¼ã‚·ã‚™ãƒ§ãƒ³(\"jsonrpc\"ã‚­ãƒ¼ã®å€¤)ã€ãƒ¡ã‚½ãƒƒãƒˆã‚™(\"method\")ã€å¼•æ•°(\"params\")ã€é€å—ä¿¡ã®å¯¾å¿œã‚’å–ã‚‹ãŸã‚ã®IDã®4é …ç›®ã‚’ä½¿ã£ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¾ã™\n\nã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ã‹ã‚‰ãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆå±¤ã®ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã‚’åˆ©ç”¨ã™ã‚‹ã¨ãã®APIã¨ã—ã¦ã‚½ã‚±ãƒƒãƒˆãŒã‚ã‚‹\nOSã«ã¯ã€ã‚·ã‚¯ã‚™ãƒŠãƒ«ã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚·ã‚™ã‚­ãƒ¥ãƒ¼ã€ãƒã‚šã‚¤ãƒ•ã‚šã€å…±æœ‰ãƒ¡ãƒ¢ãƒªãªã¨ã‚™ã€æ•°å¤šãã®ãƒ•ã‚šãƒ­ã‚»ã‚¹é–“é€šä¿¡æ©Ÿèƒ½ã‹ã‚™ç”¨æ„ã•ã‚Œã¦ã„ã¾ã™ã€‚ã‚½ã‚±ãƒƒãƒˆã‚‚ã€ãã®ã‚ˆã†ãªãƒ•ã‚šãƒ­ã‚»ã‚¹é–“é€šä¿¡ã®ä¸€ç¨®ã¦ã‚™ã™\nã‚½ã‚±ãƒƒãƒˆã«ã¯TCPã€UDPã€Unixãƒ‰ãƒ¡ã‚¤ãƒ³ã‚½ã‚±ãƒƒãƒˆãªã©\nHTTPã§ã¯80ç•ªãƒãƒ¼ãƒˆã«å¯¾ã—ã¦ã‚½ã‚±ãƒƒãƒˆã‚’ä½¿ã£ãŸãƒ—ãƒ­ã‚»ã‚¹é–“é€šä¿¡ã‚’è¡Œã†\n\n### ã‚½ã‚±ãƒƒãƒˆé€šä¿¡\n\nã‚½ã‚±ãƒƒãƒˆã¨ã‹å…¨ç„¶ã‚ã‹ã£ã¦ã„ãªã‹ã£ãŸãªãƒ¼\n\nãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿ã‚’ä»‹ã—ã¦ãƒ—ãƒ­ã‚»ã‚¹ã®é€šä¿¡ã‚’ãŠã“ãªã†ã€‚\nã‚½ã‚±ãƒƒãƒˆã¯é€šä¿¡ç”¨ã®ç‰¹åˆ¥ãªãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚ˆã†ãªã‚‚ã®ã€‚æ™®é€šã®ãƒ•ã‚¡ã‚¤ãƒ«åŒæ§˜ã«ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿ã‚’ä»‹ã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’ã‚„ã‚Šã¨ã‚Šã™ã‚‹\nhttp.Serveã£ã¦ã—ã¦ãŸã‘ã©è£å´ã¯ã“ã†ãªã£ã¦ã„ã‚‹ã‚“ã \n\nã‚µãƒ¼ãƒãƒ¼: ã‚½ã‚±ãƒƒãƒˆã‚’é–‹ã„ã¦å¾…ã¡å—ã‘ã‚‹(Goã§ã¯ `Listen()`)\nã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ: é–‹ã„ã¦ã„ã‚‹ã‚½ã‚±ãƒƒãƒˆã«æ¥ç¶šã—é€šä¿¡ã‚’è¡Œã†(Goã§ã¯ `Dial()`)\n\n````go\n// ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ\nconn, err := net.Dial(\"tcp\", \"localhost:8080\")\n\n// ã‚µãƒ¼ãƒãƒ¼\nln, err := net.Listen(\"tcp\", \":8080\")\nconn, err := ln.Accept()\n````\n\nã‚µãƒ¼ãƒãƒ¼å´ã¯ã“ã‚Œã ã¨ä¸€åº¦åˆ‡ã‚Šã§çµ‚äº†ã—ã¦ã—ã¾ã†ã®ã§for loop\n\n````go\nfor {\n    conn, err := ln.Accept()\n    go func() {\n        // conn ã‚’ä½¿ã£ãŸèª­ã¿æ›¸ã\n    }\n}\n````\n\n### ä½ãƒ¬ãƒ™ãƒ«APIã§ã‚µãƒ¼ãƒãƒ¼ã‚’å®Ÿè£…\n\nTCPã‚½ã‚±ãƒƒãƒˆã‚’ä½¿ã£ãŸHTTPã‚µãƒ¼ãƒãƒ¼(gzipåœ§ç¸®)\n\n````go\npackage main\n\nimport (\n\t\"bufio\"\n\t\"bytes\"\n\t\"compress/gzip\"\n\t\"errors\"\n\t\"fmt\"\n\t\"io\"\n\t\"net\"\n\t\"net/http\"\n\t\"net/http/httputil\"\n\t\"strings\"\n\t\"time\"\n)\n\n// ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯gzipã‚’å—ã‘å…¥ã‚Œå¯èƒ½ã‹?\nfunc isGZipAcceptable(request *http.Request) bool {\n\treturn strings.Contains(strings.Join(request.Header[\"Accept-Encoding\"], \",\"), \"gzip\")\n}\n\n// 1ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®å‡¦ç†ã‚’ã™ã‚‹\nfunc processSession(conn net.Conn) {\n\tfmt.Printf(\"Accept %v\\n\", conn.RemoteAddr())\n\tdefer conn.Close()\n\tfor {\n\t\tconn.SetReadDeadline(time.Now().Add(5 * time.Second))\n\t\t// ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’èª­ã¿è¾¼ã‚€\n\t\trequest, err := http.ReadRequest(bufio.NewReader(conn))\n\t\tif err != nil {\n\t\t\tvar ne net.Error\n\t\t\tif errors.As(err, \u0026ne) \u0026\u0026 ne.Timeout() {\n\t\t\t\tfmt.Println(\"Timeout\")\n\t\t\t\tbreak\n\t\t\t} else if errors.Is(err, io.EOF) {\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tpanic(err)\n\t\t}\n\t\tdump, err := httputil.DumpRequest(request, true)\n\t\tif err != nil {\n\t\t\tpanic(err)\n\t\t}\n\t\tfmt.Println(string(dump))\n\t\t// ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’æ›¸ãè¾¼ã‚€\n\n\t\tresponse := http.Response{StatusCode: 200,\n\t\t\tProtoMajor: 1,\n\t\t\tProtoMinor: 1,\n\t\t\tHeader:     make(http.Header),\n\t\t}\n\t\tif isGZipAcceptable(request) {\n\t\t\tcontent := \"Hello World (gzipped)\\n\" // ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’gzipåŒ–ã—ã¦è»¢é€\n\t\t\tvar buffer bytes.Buffer\n\t\t\twriter := gzip.NewWriter(\u0026buffer)\n\t\t\tio.WriteString(writer, content)\n\t\t\twriter.Close()\n\t\t\tresponse.Body = io.NopCloser(\u0026buffer)\n\t\t\tresponse.ContentLength = int64(buffer.Len())\n\t\t\tresponse.Header.Set(\"Content-Encoding\", \"gzip\")\n\t\t} else {\n\t\t\tcontent := \"Hello World\\n\"\n\t\t\tresponse.Body = io.NopCloser(\n\t\t\t\tstrings.NewReader(content))\n\t\t\tresponse.ContentLength = int64(len(content))\n\t\t}\n\t\tresponse.Write(conn)\n\t}\n}\nfunc main() {\n\tlistener, err := net.Listen(\"tcp\", \"localhost:8888\")\n\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\tfmt.Println(\"Server is running at localhost:8888\")\n\tfor {\n\t\tconn, err := listener.Accept()\n\t\tif err != nil {\n\t\t\tpanic(err)\n\t\t}\n\t\tgo processSession(conn)\n\t}\n\n}\n````\n\n### Keep-Alive\n\nHTTP/1.0 ã§ã¯ã€1ã‚»ãƒƒãƒˆã®é€šä¿¡ãŒçµ‚ã‚ã‚‹ãŸã³ã«TCPã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ãŒåˆ‡ã‚Œã‚‹ã€‚\nHTTP/1.1 ã§ã¯Keep-AliveãŒè¦æ ¼ã«ã¯ã„ã£ã¦ã€ã—ã°ã‚‰ãã®é–“TCPã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¶­æŒã™ã‚‹ã€‚\nTCPã¯ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ã‚’ç¢ºç«‹ã™ã‚‹ã®ã«1.5RTT(Round Trip Time) ãŒã‹ã‹ã‚‹ã¶ã‚“ä½™è¨ˆãªæ™‚é–“ãŒã‹ã‹ã‚‹ã€‚Keep-AliveãŒã“ã®ã¶ã‚“ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ˜ãƒƒãƒ‰ã‚’ãªãã›ã‚‹\n\nä»–ã«é€Ÿåº¦æ”¹å–„ã®æ‰‹æ³•ã¨ã—ã¦ã€gzipåœ§ç¸®ã€ãƒãƒ£ãƒ³ã‚¯å½¢å¼ã®ãƒœãƒ‡ã‚£é€ä¿¡ã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ‹ãƒ³ã‚°ãŒã‚ã’ã‚‰ã‚Œã¦ã„ã‚‹\n\n## 7ç«  UDPã‚½ã‚±ãƒƒãƒˆã‚’ä½¿ã£ãŸãƒãƒ«ãƒã‚­ãƒ£ã‚¹ãƒˆ\n\n````go\n// ã‚µãƒ¼ãƒãƒ¼\npackage main\n\nimport (\n\t\"fmt\"\n\t\"net\"\n\t\"time\"\n)\n\nconst interval = 10 * time.Second\n\nfunc main() {\n\tfmt.Println(\"start tick server at 224.0.0.1:9999\")\n\tconn, err := net.Dial(\"udp\", \"224.0.0.1:9999\")\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\tdefer conn.Close()\n\n\tstart := time.Now()\n\twait := start.Truncate(interval).Add(interval).Sub(start)\n\ttime.Sleep(wait)\n\tticker := time.Tick(interval)\n\n\tfor now := range ticker {\n\t\tconn.Write([]byte(now.String()))\n\t\tfmt.Println(\"Tick: \", now.String())\n\t}\n\n}\n````\n\n````go\n// ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ\npackage main\n\nimport (\n\t\"fmt\"\n\t\"net\"\n)\n\nfunc main() {\n\tfmt.Println(\"Listen tick server at 224.0.0.1:9999\")\n\taddress, err := net.ResolveUDPAddr(\"udp\", \"224.0.0.1:9999\")\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\tlistener, err := net.ListenMulticastUDP(\"udp\", nil, address)\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\n\tdefer listener.Close()\n\n\tbuffer := make([]byte, 1500)\n\n\tfor {\n\t\tlength, remoteAddress, err := listener.ReadFromUDP(buffer)\n\n\t\tif err != nil {\n\t\t\tpanic(err)\n\t\t}\n\n\t\tfmt.Printf(\"Server %v\\n\", remoteAddress)\n\t\tfmt.Printf(\"Now %s\\n\", string(buffer[:length]))\n\t}\n\n}\n````\n\nUDPã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ãŒã‚½ã‚±ãƒƒãƒˆã‚’ã‚ªãƒ¼ãƒ—ãƒ³ã—ã¦å¾…å—ã€ã‚µãƒ¼ãƒãƒ¼å´ãŒãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹ã€‚\nTCPã¨ã¯é€†ã®ã‚ˆã†ã«è¦‹ãˆã‚‹ã€‚TCPã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨åŒã˜ã‚ˆã†ãªå®Ÿè£…ã«ãªã£ã¦ã„ã‚‹\n\nã‚¯ãƒ©ã‚¹ D ã®ã€224.0.0.0ã€œ239.255.255.255ã€ã®ãƒ¬ãƒ³ã‚¸ã¯ãƒãƒ«ãƒã‚­ãƒ£ã‚¹ãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹\n\nNTPã¯é…å»¶ãŒè‡´å‘½çš„ã«ãªã‚‹ãŸã‚TCPã§ã¯ãªãUDP\n\n### TCPã¨ã®é•ã„\n\n* TCPã¯1.5 RTTã‹ã‹ã‚‹ãŒUDPã¯0 RTT\n* TCPã«ã¯å†é€å‡¦ç†ã¨ãƒ•ãƒ­ãƒ¼å‡¦ç†ãŒã‚ã‚‹\n  * ãƒ‘ã‚±ãƒƒãƒˆã®é †åºã‚’å—ä¿¡å´ã§ä¸¦ã¹æ›¿ãˆã‚‰ã‚Œã‚‹\n  * å¿œç­”ç•ªå·ã‚’è¿”ä¿¡ã—ã¦é€ä¿¡å´ã¯æ­£ã—ãå—ã‘å–ã‚ŒãŸã®ã‹ã©ã†ã‹åˆ¤æ–­ã—ã€å—ã‘å–ã‚Œã¦ãªã‹ã£ãŸã‚‰å†é€ã™ã‚‹\n* ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦åˆ¶å¾¡  å—ä¿¡å´ãŒãƒªã‚½ãƒ¼ã‚¹ã‚’ç¢ºä¿ã§ãã¦ã„ãªã„ã®ã«é€ä¿¡ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒé›†ä¸­ã—ã¦ã—ã¾ã†ã®ã‚’é˜²ãã€‚\n  * å—ä¿¡ç”¨ã®ãƒãƒƒãƒ•ã‚¡(TCPã§ã¯ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã¨ã„ã†)ã‚’æ±ºã‚ã¦ãŠãã€é€ä¿¡å´ã§ã¯ãã®ã‚µã‚¤ã‚ºã¾ã§ã¯å—ä¿¡å´ã‹ã‚‰ã®å—ä¿¡ç¢ºèªã‚’å¾…ãŸãšã«ãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã§ãã‚‹\n  * å—ä¿¡ã§ãã‚‹ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚µã‚¤ã‚ºã‚’é€ä¿¡å´ã«ã¤ãŸãˆã‚‹ã“ã¨ã§é€šä¿¡é‡ã‚’åˆ¶å¾¡ã§ãã‚‹(ãƒ•ãƒ­ãƒ¼åˆ¶å¾¡)\n* ãƒ•ãƒ¬ãƒ¼ãƒ ã‚µã‚¤ã‚º\n  * ã²ã¨ã‹ãŸã¾ã‚Šã§é€ä¿¡ã§ãã‚‹ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚ºã‚’MTU(æœ€å¤§è»¢é€å˜ä½)\n  * MTUã«åã¾ã‚‰ãªã„ãƒ‡ãƒ¼ã‚¿ã¯IPãƒ¬ãƒ™ãƒ«ã§è¤‡æ•°ãƒ‘ã‚±ãƒƒãƒˆã«åˆ†å‰²ã™ã‚‹\n  * UDPã‚’åˆ©ç”¨ã™ã‚‹å ´åˆã«ã¯ãƒ†ã‚™ãƒ¼ã‚¿æ§‹é€ ã‚’1ãƒ•ãƒ¬ãƒ¼ãƒ ã¦ã‚™åã¾ã‚‹ã‚µã‚¤ã‚¹ã‚™ã«ã—ã€ãƒ•ãƒ¬ãƒ¼ãƒ ã“ã‚™ã¨ã«ãƒ•ãƒ¬ãƒ¼ãƒ ã®å†…å®¹ã‚’è­˜åˆ¥ã™ã‚‹ãƒ˜ãƒƒã‚¿ã‚™ãƒ¼ã‚’ä»˜ã‘ã‚‹å¿…è¦ã‹ã‚™ã‚ã‚‹ã¦ã‚™ã—ã‚‡ã†\n* è¼»è¼³åˆ¶å¾¡\n  * TCPã«ã¯è¼»è¼³åˆ¶å¾¡ãŒå‚™ã‚ã£ã¦ãŠã‚Šã€ãã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã«ã¯ã•ã¾ã–ã¾ãªç¨®é¡ãŒã‚ã‚Šã¾ã™ã€‚ã©ã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚‚ã‚†ã£ãã‚Šé€šä¿¡é‡ã‚’å¢—ã‚„ã—ã¦ã„ãã€é€šä¿¡é‡ã®é™ç•Œå€¤ã‚’æ¢ã‚Šã¤ã¤ã€ãƒ‘ã‚±ãƒƒãƒˆæ¶ˆå¤±ãªã©ã®æ¸‹æ»ç™ºç”Ÿã‚’æ¤œçŸ¥ã™ã‚‹ã¨æµé‡ã‚’çµã£ãŸã‚Šå¢—ã‚„ã—ãŸã‚Šã—ãªãŒã‚‰æœ€é©ãªé€šä¿¡é‡ã‚’æ¢ã‚Šã¾ã™ \n\nHTTP/2 ã¨ TCP ã§åŒã˜ã‚ˆã†ãªã“ã¨ã‚’é‡è¤‡ã—ã¦è¡Œã£ã¦ã„ã‚‹éƒ¨åˆ†ã‚’çµ±åˆã—ã€UDP ä¸Šã® QUIC ã‚’ä½¿ã†ã“ã¨ã§ã•ã‚‰ã«ç„¡é§„ã‚’æ¸›ã‚‰ãã†ã¨ã„ã†ã®ãŒ HTTP/3\n\n## 8ç«  Unixãƒ‰ãƒ¡ã‚¤ãƒ³ã‚½ã‚±ãƒƒãƒˆ\n\nåˆã‚ã¦èã„ãŸã€‚\n\nUnixãƒˆã‚™ãƒ¡ã‚¤ãƒ³ã‚½ã‚±ãƒƒãƒˆã¦ã‚™ã¯å¤–éƒ¨ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã¸ã®æ¥ç¶šã¯è¡Œã„ã¾ã›ã‚“ã€‚\nãã®ä»£ã‚ã‚Šã€ã‚«ãƒ¼ãƒãƒ«å†…éƒ¨ã¦ã‚™å®Œçµã™ã‚‹é«˜é€Ÿãªãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ä½œæˆã—ã¾ã™ã€‚\nUnixãƒˆã‚™ãƒ¡ã‚¤ãƒ³ã‚½ã‚±ãƒƒãƒˆã‚’ä½¿ã†ã“ã¨ã¦ã‚™ã€ã‚¦ã‚§ãƒ•ã‚™ã‚µãƒ¼ãƒã‚™ãƒ¼ã¨NGINXãªã¨ã‚™ã®ãƒªãƒã‚™ãƒ¼ã‚¹ãƒ•ã‚šãƒ­ã‚­ã‚·ã¨ã®é–“ã€ã‚ã‚‹ã„ã¯ã‚¦ã‚§ãƒ•ã‚™ã‚µãƒ¼ãƒã‚™ãƒ¼ã¨ãƒ†ã‚™ãƒ¼ã‚¿ãƒ˜ã‚™ãƒ¼ã‚¹ã¨ã®é–“ã®æ¥ç¶šã‚’é«˜é€Ÿã«ã¦ã‚™ãã‚‹å ´åˆã‹ã‚™ã‚ã‚Šã¾ã™ã€‚\n\nã‚µãƒ¼ãƒãƒ¼ãŒãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã£ã¦ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ—ãƒ­ã‚»ã‚¹ã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’ä½¿ã£ã¦é€šä¿¡ç›¸æ‰‹ã‚’æ¢ã™ã€‚\nå˜ã«ã‚µãƒ¼ãƒã‚™ãƒ¼ã‹ã‚™ä½œæˆã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã«ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‹ã‚™æ›¸ãè¾¼ã¿ã€ãã®å†…å®¹ã‚’ä»–ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒè¦‹ã«è¡Œã£ã¦ã„ã‚‹ã ã‘ã®ã‚ˆã†ã ãŒã€\nUnixãƒ‰ãƒ¡ã‚¤ãƒ³ã‚½ã‚±ãƒƒãƒˆã¯ã‚½ã‚±ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¨ã„ã†ç‰¹æ®Šãªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹\n\n## 9ç«  ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®åŸºç¤\n\nãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã€path/filepath ã®é–¢æ•°ã®ç´¹ä»‹\n\n## 10ç«  ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®æœ€æ·±éƒ¨ã‚’æ‰±ã† Go è¨€èªã®é–¢æ•°\n\nãƒ•ã‚¡ã‚¤ãƒ«ã®å¤‰æ›´ç›£è¦–(syscall.Inotify)\n\n* ç›£è¦–ã—ãŸã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’OSå´ã«é€šçŸ¥ã—ã¦ãŠã„ã¦ã€å¤‰æ›´ã‹ã‚™ã‚ã£ãŸã‚‰æ•™ãˆã¦ã‚‚ã‚‰ã†(ãƒã‚šãƒƒã‚·ãƒ•ã‚™ãª æ–¹å¼)\n  * gopkg.in/fsnotify.v1â€ 2 ã‚’åˆ©ç”¨ã—ãŸãƒ‘ãƒƒã‚·ãƒ–ãªæ–¹å¼\n* ã‚¿ã‚¤ãƒãƒ¼ãªã¨ã‚™ã¦ã‚™å®šæœŸçš„ã«ãƒ•ã‚©ãƒ«ã‚¿ã‚™ã‚’èµ°æŸ»ã—ã€os.Stat()ãªã¨ã‚™ã‚’ä½¿ã£ã¦å¤‰æ›´ã‚’æ¢ã—ã«è¡Œã (ã‚¢ã‚¯ãƒ†ã‚£ãƒ•ã‚™ãªæ–¹å¼)\n\nãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ­ãƒƒã‚¯(syscall.Flock())\n\nsyscall.Flock()ã«ã‚ˆã‚‹ãƒ­ãƒƒã‚¯ã¦ã‚™ã¯ã€ã™ã¦ã‚™ã«ãƒ­ãƒƒã‚¯ã•ã‚Œã¦ã„ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã«å¯¾ã—ã¦ãƒ­ãƒƒã‚¯ã‚’ã‹ã‘ã‚ˆã†ã¨ã™ã‚‹ã¨ã€æœ€åˆã®ãƒ­ãƒƒã‚¯ã‹ã‚™å¤–ã‚Œã‚‹ã¾ã¦ã‚™ã™ã‚™ã£ã¨å¾…ãŸã•ã‚Œã¾ã™ã€‚ãã®ãŸã‚ã€å®šæœŸçš„ã«ä½•åº¦ã‚‚ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãƒ­ãƒƒã‚¯ã‹ã‚™å–å¾—ã¦ã‚™ãã‚‹ã‹ãƒˆãƒ©ã‚¤ã™ã‚‹ã€ã¨ã„ã£ãŸã“ã¨ã‹ã‚™ã¦ã‚™ãã¾ã›ã‚“ã€‚ã“ã‚Œã‚’å¯èƒ½ã«ã™ã‚‹ã®ã‹ã‚™ãƒãƒ³ãƒ•ã‚™ãƒ­ãƒƒã‚­ãƒ³ã‚¯ã‚™ãƒ¢ãƒ¼ãƒˆã‚™ã¦ã‚™ã™\n\nãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ¡ãƒ¢ãƒªã¸ã®ãƒãƒƒãƒ’ã‚šãƒ³ã‚¯ã‚™(syscall.Mmap())\nãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ã‚’ãã®ã¾ã¾ãƒ¡ãƒ¢ãƒªä¸Šã«å±•é–‹ã¦ã‚™ãã¾ã™ã—ã€ãƒ¡ãƒ¢ãƒªä¸Šã¦ã‚™æ›¸ãæ›ãˆãŸå†…å®¹ã‚’ãã®ã¾ã¾ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãè¾¼ã‚€ã“ã¨ã‚‚ã¦ã‚™ãã¾ã™ã€‚ãƒãƒƒãƒ’ã‚šãƒ³ã‚¯ã‚™ã¨ã„ã†åå‰ã®ã¨ãŠã‚Šã€ãƒ•ã‚¡ã‚¤ãƒ«ã¨ãƒ¡ãƒ¢ãƒªã®å†…å®¹ã‚’åŒæœŸã•ã›ã¾ã™\n\n* åŒæœŸãƒ»ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°: èª­ã¿è¾¼ã¿ãƒ»æ›¸ãè¾¼ã¿å‡¦ç†ã‹ã‚™å®Œäº†ã™ã‚‹ã¾ã¦ã‚™ã®é–“ã€ä½•ã‚‚ã›ã™ã‚™ã«å¾…ã¡ã¾ã™\n\n* åŒæœŸãƒ»ãƒãƒ³ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°: APIã‚’å‘¼ã¶ã¨ã€å³åº§ã«ã€Œã¾ã å®Œäº†ã—ã¦ã„ãªã„ã‹ã€ã©ã†ã‹ã®ãƒ•ãƒ©ã‚°ã¨ã€ç¾åœ¨æº–å‚™ãŒã§ãã¦ã„ã‚‹ãƒ‡ãƒ¼ã‚¿ãŒå¾—ã‚‰ã‚Œã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒå®Œäº†ã‚’çŸ¥ã‚‹å¿…è¦ãŒã‚ã‚‹ã¨ãã¯ã€å®Œäº†ãŒè¿”ã£ã¦ãã‚‹ã¾ã§ä½•åº¦ã‚‚APIã‚’å‘¼ã³ã¾ã™(ã“ã‚Œã‚’ãƒãƒ¼ãƒªãƒ³ã‚°)\n\n* éåŒæœŸãƒ»ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°: I/O å¤šé‡åŒ–(I/O ãƒãƒ«ãƒãƒ•ã‚šãƒ¬ã‚¯ã‚µãƒ¼)ã¨ã‚‚å‘¼ã°ã‚Œã‚‹ã€‚æº–å‚™ã‹ã‚™å®Œäº†ã—ãŸã‚‚ã®ã‹ã‚™ã‚ã‚Œã¯ã‚™é€šçŸ¥ã—ã¦ã‚‚ã‚‰ã†ã€ã¨ã„ã†ã‚¤ãƒ˜ã‚™ãƒ³ãƒˆé§†å‹•ãƒ¢ãƒ†ãƒ«\n\n* éåŒæœŸãƒ»ãƒãƒ³ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°: ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚»ã‚¹ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã¨ã¯å®Œå…¨ã«åˆ¥ã®ã‚¹ãƒ¬ãƒƒãƒ‰ã§ã‚¿ã‚¹ã‚¯ã‚’è¡Œã„ã€å®Œäº†ã—ãŸã‚‰ãã®é€šçŸ¥ã ã‘ã‚’å—ã‘å–ã‚‹\n\n* goroutine ã‚’ãŸãã•ã‚“å®Ÿè¡Œã—ã€ãã‚Œãã‚Œã«åŒæœŸãƒ»ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚° I/O ã‚’æ‹…å½“ã•ã›ã‚‹ã¨ã€**éåŒæœŸãƒ»ãƒãƒ³ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°** ã¨ãªã‚‹\n\n* goroutine ã§ä¸¦è¡ŒåŒ–ã•ã›ãŸ I/O ã®å…¥å‡ºåŠ›ã§ãƒãƒ£ãƒãƒ«ã‚’ä½¿ã†ã“ã¨ã§ã€ä»–ã® goroutine ã¨ã‚„ã‚Šå–ã‚Šã™ã‚‹ç®‡æ‰€ã®ã¿ã®åŒæœŸãŒã§ãã‚‹\n\n* ã“ã®ãƒãƒ£ãƒãƒ«ã«ãƒãƒƒãƒ•ã‚¡ãŒã‚ã‚Œã°ã€æ›¸ãè¾¼ã¿å´ã‚‚ãƒãƒ³ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ã¨ãªã‚‹\n\n* ã“ã‚Œã‚‰ã®ãƒãƒ£ãƒãƒ«ã§selectæ§‹æ–‡ã‚’ä½¿ã†ã“ã¨ã§ **éåŒæœŸãƒ»ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°** ã®I/Oå¤šé‡åŒ–ãŒã§ãã‚‹\n\n* select æ§‹æ–‡ã« default ç¯€ãŒã‚ã‚‹ã¨ã€èª­ã¿è¾¼ã¿ã‚’ãƒãƒ³ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ã§è¡Œãˆã‚‹ã‚ˆã†ã«ãªã‚Šã€éåŒæœŸ IO åŒ–ãŒã§ãã‚‹\n\n### selectå±\n\néåŒæœŸãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°(I/Oå¤šé‡åŒ–)ã‚’åŠ¹ç‡ã‚ˆãå®Ÿç¾ã™ã‚‹API\nå¤§é‡ã®å…¥å‡ºåŠ›ã‚’ã•ã°ãæ‰‹æ³•\n\nOS ã®å ´åˆã«ã¯ã€ãƒ–ãƒ­ãƒƒã‚¯ã—ã†ã‚‹è¤‡æ•°ã® I/O ã‚·ã‚¹ãƒ†ãƒ ã‚³ãƒ¼ãƒ«ã‚’ã¾ã¨ã‚ã¦ç™»éŒ²ã—ã€æº–å‚™ãŒã§ããŸã‚‚ã®ã‚’æ•™ãˆã¦ã‚‚ã‚‰ã†ã®ãŒ select() ã®å½¹å‰²\nGo è¨€èªã® select æ–‡ã‚‚ã€ã“ã®ç‚¹ã«ã¤ã„ã¦ã¯ OS ãŒæä¾›ã™ã‚‹ select() ã‚·ã‚¹ãƒ†ãƒ ã‚³ãƒ¼ãƒ«ã¨åŒã˜\n\n## ç¬¬11ç«  ã‚³ãƒãƒ³ãƒ‰ã‚·ã‚§ãƒ«101\n\n### POSIX, SUS\n\nPOSIXã¨ã„ã†ç”¨èªã¯ã€ã€ŒUNIXã€ã¨åä¹—ã‚‹ãŸã‚ã«å¿…è¦ãª **Single UNIX Specification(SUS)** ã¨å‘¼ã¯ã‚™ã‚Œã‚‹è¦æ ¼ã®åˆ¥åã¦ã‚™ã‚‚ã‚ã‚Šã¾ã™\n\nhttps://pubs.opengroup.org/onlinepubs/9699919799/\nã“ã‚Œã‚’æº€ãŸã™ã‚‚ã®ãŒPOSIXæº–æ‹ ã‚’åä¹—ã‚Œã‚‹\n\nPOSIXã®è¦ç´„ã«å¾“ã£ã¦å®Ÿè£…ã•ã‚ŒãŸãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã¯ã€ä½¿ã†å´ã‹ã‚‰ã™ã‚Œã°è¡Œå„€ã®ã‚ˆã„ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã ã¨è¨€ãˆã‚‹ã§ã—ã‚‡ã†ã€‚ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã«ã¤ã„ã¦ã®POSIXã®è¦ç´„ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚Šã¾ã™\n\n* å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¼•æ•°ã¨ã—ã¦æ¸¡ã™(ãƒ•ãƒ©ã‚°ã§ã¯ãªã)\n* å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«ãŒãªã‹ã£ãŸå ´åˆã¯æ¨™æº–å…¥åŠ›ã‚’èª­ã¿è¾¼ã‚€\n* å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«ãŒã€Œ-ã€ã§ã‚‚æ¨™æº–å…¥åŠ›ã‚’èª­ã¿è¾¼ã‚€\n\nUNIX ã‚’åä¹—ã‚Œãªã„ Linux ã¦ã‚™ã™ã‹ã‚™ã€SUS ã‚’ãƒ˜ã‚™ãƒ¼ã‚¹ã«ã—ãªã‹ã‚™ã‚‰åˆ©ä¾¿æ€§ã‚’æ„è­˜ã—ã¦ GUI ã¾ã‚ã‚Šã®ãƒã‚šãƒƒã‚±ãƒ¼ã‚·ã‚™ã‚„ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹æˆã€ãƒ•ã‚šãƒªãƒ³ã‚¿ãƒ¼ã‚µãƒ›ã‚šãƒ¼ãƒˆã¾ã‚ã‚Šãªã¨ã‚™ã‚’åŠ ãˆãŸ ISO è¦æ ¼ã¨ã—ã¦ã€ **LSB (Linux Standard Base)** ã¨ã„ã†ã‚‚ã®ã‹ã‚™ã‚ã‚‹\n\nPOSIX ã‚„ LSB ã¯å·¨å¤§ãªè¦æ ¼ã¦ã‚™ã‚ã‚‹ã“ã¨ã‹ã‚‰ã€ãã‚Œã‚‰ã®å°ã•ã„ã‚µãƒ•ã‚™ã‚»ãƒƒãƒˆã¨ã—ã¦ã€ **BusyBox** ã¨å‘¼ã¯ã‚™ã‚Œã‚‹ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚‚ã‚ã‚Šã¾ã™ã€‚\nAlpineã¯BusyBoxã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ã¦ã„ã‚‹\n\n### Unixå“²å­¦\n\nå°ã•ãªãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã‚’çµ„ã¿åˆã‚ã›ã‚‹\n\n## ç¬¬12ç«  ãƒ•ã‚šãƒ­ã‚»ã‚¹ã®å½¹å‰²ã¨Goè¨€èªã«ã‚ˆã‚‹æ“ä½œ\n\nOSãŒå®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§å®Ÿè¡Œã™ã‚‹ã«ã¯ãã®ãŸã‚ã®ãƒªã‚½ãƒ¼ã‚¹ã‚’ç”¨æ„ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„ã€‚ãƒªã‚½ãƒ¼ã‚¹ã‚’ã¾ã¨ã‚ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®å®Ÿè¡Œå˜ä½ãŒãƒ—ãƒ­ã‚»ã‚¹\n\n* å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«å : `os.Executable()`\n* ãƒ—ãƒ­ã‚»ã‚¹ID : `os.Getpid()`\n* è¦ªãƒ—ãƒ­ã‚»ã‚¹ID : `os.Getppid()`\n* ãƒ¦ãƒ¼ã‚¶ãƒ¼ID: `os.Getuid()` `os.Getgid()`\n\nãªã©Goã‹ã‚‰ãƒ—ãƒ­ã‚»ã‚¹æƒ…å ±ã‚’å–ã‚‹é–¢æ•°ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹\n\nOS ã‹ã‚‰è¦‹ãŸãƒ•ã‚šãƒ­ã‚»ã‚¹ã¯ã€CPU æ™‚é–“ã‚’æ¶ˆè²»ã—ã¦ã‚ã‚‰ã‹ã—ã‚™ã‚ç”¨æ„ã—ã¦ã‚ã£ãŸãƒ•ã‚šãƒ­ã‚¯ã‚™ãƒ©ãƒ ã«å¾“ã£ã¦å‹•ãã€Œã‚¿ã‚¹ã‚¯ã€\nãƒ—ãƒ­ã‚»ã‚¹ã”ã¨ã«ãƒ—ãƒ­ã‚»ã‚¹ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿ã‚’æŒã£ã¦ã„ã‚‹\n\n### Goãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‹ã‚‰ã®ãƒ—ãƒ­ã‚»ã‚¹èµ·å‹•\n\nä»–ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’æ‰±ã†ã«ã¯ä»¥ä¸‹ã‚’ä½¿ã†\n\n* `os.Process`: ä½ãƒ¬ãƒ™ãƒ«\n* `os/exec` ã® `exec.Cmd`: å°‘ã—é«˜æ©Ÿèƒ½\n\n`exec.Command(åå‰, å¼•æ•°, ...)` ã§èµ·å‹•ã§ãã‚‹\n`exec.CommandContext` ã¯Contextã‚’å—ã‘å–ã‚Œã‚‹\nContextãŒã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã‚‹ã¨ã€os.Process.Killã§å¼·åˆ¶çµ‚äº†ã•ã‚Œã‚‹\n\n````go\nfunc main() {\n\tcmd := exec.Command(os.Args[1], os.Args[2:]...)\n\tif err := cmd.Run(); err != nil {\n\t\tpanic(err)\n\t}\n\n\tstate := cmd.ProcessState\n\tfmt.Printf(\"%s\\n\", state.String())\n\tfmt.Printf(\" Pid: %d\\n\", state.Pid())\n\tfmt.Printf(\" System: %v\\n\", state.SystemTime())\n\tfmt.Printf(\" User: %v\\n\", state.UserTime())\n}\n````\n\n`cmd.Output()` ã§å­ãƒ—ãƒ­ã‚»ã‚¹ã®å‡ºåŠ›å†…å®¹ã‚’å¾—ã‚‹ãŒã€å®Ÿè¡Œæ™‚é–“ãŒé•·ã„ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã§æœ€å¾Œã«ã—ã‹å¾—ã‚‰ã‚Œãªã„ã®ã¯ä¸ä¾¿\n`StdinPipe` `StdoutPipe` ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«é€šä¿¡ã§ãã‚‹ãƒ‘ã‚¤ãƒ—ã‚’å–å¾—ã§ãã‚‹\n\n`github.com/mattn/go-colorable` `github.com/mattn/go-isatty` ã‚’ä½¿ã£ã¦å‡ºåŠ›ã«è‰²ã‚’ã¤ã‘ã‚‰ã‚Œã‚‹\n\n````go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"io\"\n\t\"os\"\n\n\t\"github.com/mattn/go-colorable\"\n\t\"github.com/mattn/go-isatty\"\n)\n\nvar data = \"\\033[34m\\033[47m\\033[4mB\\033[31me\\n\\033[24m\\033[30mOS\\033[49m\\033[m\\n\"\n\nfunc main() {\n\tvar stdOut io.Writer\n\tif isatty.IsTerminal(os.Stdout.Fd()) {\n\t\tstdOut = colorable.NewColorableStdout()\n\t} else {\n\t\tstdOut = colorable.NewNonColorable(os.Stdout)\n\t}\n\tfmt.Fprintln(stdOut, data)\n}\n````\n\n### ãƒ•ã‚©ãƒ¼ã‚¯\n\nãƒ•ã‚©ãƒ¼ã‚¯ã¯ã€ãƒã‚¤ãƒ†ã‚£ãƒ–ã‚¹ãƒ¬ãƒƒãƒ‰ãŒæ‰±ã„ã‚„ã™ã„è¨€èªã‚„ã€Goè¨€èªã®ã‚ˆã†ã«ã‚¹ãƒ¬ãƒƒãƒ‰ã®æ´»ç”¨ãŒãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹è¨€èªä»¥å¤–ã§ã¯ã€ãƒãƒ«ãƒã‚³ã‚¢CPUã®æ€§èƒ½å‘ä¸Šã‚’ç”Ÿã‹ã™ã†ãˆã§å¼·åŠ›ãªæ­¦å™¨ã¨ãªã‚Šã¾ã™ã€‚\nã‚¹ã‚¯ãƒªãƒ—ãƒˆè¨€èªã§ã¯ã€ã‚¤ãƒ³ã‚¿ãƒ—ãƒªã‚¿å†…éƒ¨ã®ãƒ‡ãƒ¼ã‚¿ã®ç«¶åˆãŒèµ·ããªã„ã‚ˆã†ã«ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¤ãƒ³ã‚¿ãƒ—ãƒªã‚¿ãƒ­ãƒƒã‚¯(GILã€Global Interpreter Lock)ã‚„ã‚¸ãƒ£ã‚¤ã‚¢ãƒ³ãƒˆ VMãƒ­ãƒƒã‚¯(GVLã€Giant VM Lock)ã¨å‘¼ã°ã‚Œã‚‹æ©Ÿæ§‹ãŒã‚ã‚Šã€åŒæ™‚ã«å‹•ã‘ã‚‹ã‚¹ãƒ¬ãƒƒãƒ‰æ•°ãŒå³ã—ãåˆ¶é™ã•ã‚Œã¦è¤‡æ•°ã‚³ã‚¢ã®æ€§èƒ½ãŒç”Ÿã‹ã›ãªã„ã‚±ãƒ¼ã‚¹ãŒã‚ã‚Šã¾ã™ã€‚ã“ã®ã¨ãã«fork() ã§è¤‡æ•°ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’ä½œã‚Šã€ãƒ¯ãƒ¼ã‚«ãƒ¼ã¨ã—ã¦ä¸¦è¡Œã«å®Ÿè¡Œã•ã›ã‚‹ã“ã¨ãŒã‚ˆãã‚ã‚Šã¾ã™ã€‚\n\nãŸã¨ãˆã°Python ã«ã¯ã€ã“ã‚Œã‚’åŠ¹ç‡ã‚ˆãè¡Œã†ãŸã‚ã® multiprocessing ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚ã‚Šã¾ã™ã€‚Node.jsã«ã‚‚clusterãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒã‚ã‚Šã¾ã™ã€‚ã‚¦ã‚§ãƒ–ã‚µãƒ¼ãƒãƒ¼ã®Apacheã§ã‚‚ã€äº‹å‰ã«ãƒ•ã‚©ãƒ¼ã‚¯ã—ã¦ãŠãã“ã¨ã§ä¸¦è¡Œã§å‡¦ç†ã‚’è¡Œã†PreforkãŒä¸€ç•ªæœ€åˆã«å°å…¥ã•ã‚Œã€åºƒãä½¿ã‚ã‚Œã¦ã„ã¾ã™ã€‚\n\nè¦ªå­ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒä½œã‚‰ã‚Œã‚‹ã¨ãã¯ã€ã©ã¡ã‚‰ã‹ã®ãƒ—ãƒ­ã‚»ã‚¹ã§ãƒ¡ãƒ¢ãƒªã‚’å¤‰æ›´ã™ã‚‹ã¾ã§ã¯ãƒ¡ãƒ¢ãƒªã®å®Ÿä½“ã‚’ã‚³ãƒ”ãƒ¼ã—ãªã„ã€Œã‚³ãƒ”ãƒ¼ã‚ªãƒ³ãƒ©ã‚¤ãƒˆã€ã§ãƒ¡ãƒ¢ãƒªãŒå…±æœ‰ã•ã‚Œã¾ã™\nãã®ãŸã‚ã€å­ãƒ—ãƒ­ã‚»ã‚¹ç”Ÿæˆæ™‚ã«ç¬æ™‚ã«ãƒ¡ãƒ¢ãƒªæ¶ˆè²»é‡ãŒå¤§ããå¢—ãˆã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚\nã—ã‹ã—ã€ã“ã®ä»•æ§˜ã¨è¨€èªã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã®ç›¸æ€§ãŒè‰¯ããªã„ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ãŸã¨ãˆã°ã€Rubyã«ã¯ã‚¬ãƒ™ãƒ¼ã‚¸ã‚³ãƒ¬ã‚¯ã‚¿ç”¨ã®ãƒ•ãƒ©ã‚°ãŒObjectã®å†…éƒ¨æ§‹é€ ä½“ã«ã‚ã£ãŸã“ã¨ã‹ã‚‰ã€GCãŒèµ°ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ãƒ•ãƒ©ã‚°ã®æ›¸ãæ›ãˆãŒç™ºç”Ÿã—ã¦æ—©æœŸã«ãƒ¡ãƒ¢ãƒªã‚³ãƒ”ãƒ¼ãŒç™ºç”Ÿã—ã¦ã—ã¾ã†ã¨ã„ã†å•é¡ŒãŒã‚ã‚Šã¾ã—ãŸã€‚\nInstagram ã§ã¯ã€ã“ã®ã‚³ãƒ”ãƒ¼ã‚ªãƒ³ãƒ©ã‚¤ãƒˆã®å•é¡Œã‚’å›é¿ã™ã‚‹ãŸã‚ã«GC ã‚’åœæ­¢ã•ã›ã¦å‡¦ç†é€Ÿåº¦ã‚’å‘ä¸Šã•ã›ã‚‹æ–¹æ³•ã‚’ç´¹ä»‹ã—ã¦ã„ã¾ã—ãŸãŒã€Pythonã®GCã‹ã‚‰å…±æœ‰ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’éš ã™ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’Pythonæœ¬ä½“ã«è¿½åŠ ã—ã¦ã‚³ãƒ”ãƒ¼ã‚ªãƒ³ãƒ©ã‚¤ãƒˆã‚’é˜²ã„ã ã“ã¨ã§ã€ãƒ¡ãƒ¢ãƒªã®å¢—åŠ é‡ãŒ50%æ¸›å°‘ã—ã¾ã—ãŸã€‚ã“ã®ä¿®æ­£ã¯Python3.7ã«å…¥ã‚Šã¾ã—ãŸã€‚\n\n### ãƒ‡ãƒ¼ãƒ¢ãƒ³åŒ–\n\nPOSIX ç³»ã® OS ã¦ã‚™å‹•ãç¶šã‘ã‚‹ã‚µãƒ¼ãƒã‚™ãƒ¼ãƒ•ã‚šãƒ­ã‚»ã‚¹ãªã¨ã‚™ã®ãƒã‚™ãƒƒã‚¯ã‚¯ã‚™ãƒ©ã‚¦ãƒ³ãƒˆã‚™ãƒ•ã‚šãƒ­ã‚»ã‚¹ã‚’ä½œã‚‹ãŸã‚ã®æ©Ÿèƒ½ã¦ã‚™ã™\nãƒ­ã‚°ã‚¢ã‚¦ãƒˆã—ãŸã‚Šã‚·ã‚§ãƒ«ã‚’ã¨ã˜ã¦ã‚‚ãƒ—ãƒ­ã‚»ã‚¹ã‚’çµ‚äº†ã•ã›ãªã„ä»•çµ„ã¿\n\n## ç¬¬13ç«  ã‚·ã‚°ãƒŠãƒ«ã«ã‚ˆã‚‹ãƒ—ãƒ­ã‚»ã‚¹é–“ã®é€šä¿¡\n\nã‚·ã‚°ãƒŠãƒ«\n\n* ãƒ•ã‚šãƒ­ã‚»ã‚¹é–“é€šä¿¡:ã‚«ãƒ¼ãƒãƒ«ã‹ã‚™ä»²ä»‹ã—ã¦ã€ã‚ã‚‹ãƒ•ã‚šãƒ­ã‚»ã‚¹ã‹ã‚‰ã€åˆ¥ã®ãƒ•ã‚šãƒ­ã‚»ã‚¹ã«å¯¾ã—ã¦ã‚·ã‚¯ã‚™ãƒŠãƒ«ã‚’é€ã‚‹ã“ã¨ã‹ã‚™ã¦ã‚™ãã‚‹ã€‚è‡ªåˆ†è‡ªèº«ã«å¯¾ã—ã¦ã‚·ã‚¯ã‚™ãƒŠãƒ«ã‚’é€ã‚‹ã“ã¨ã‚‚å¯èƒ½\n\n* ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢å‰²ã‚Šè¾¼ã¿:ã‚·ã‚¹ãƒ†ãƒ ã¦ã‚™ç™ºç”Ÿã—ãŸã‚¤ãƒ˜ã‚™ãƒ³ãƒˆã¯ã€ã‚·ã‚¯ã‚™ãƒŠãƒ«ã¨ã—ã¦ãƒ•ã‚šãƒ­ã‚»ã‚¹ã«é€ã‚‰ã‚Œã‚‹ã€‚ã‚·ã‚¯ã‚™ãƒŠãƒ«ã‚’å—ã‘å–ã£ãŸãƒ•ã‚šãƒ­ã‚»ã‚¹ã¯ã€ç¾åœ¨è¡Œã£ã¦ã„ã‚‹ã‚¿ã‚¹ã‚¯ã‚’ä¸­æ–­ã—ã¦ã€ã‚ã‚‰ã‹ã—ã‚™ã‚ç™»éŒ²ã—ã¦ãŠã„ãŸç™»éŒ²ãƒ«ãƒ¼ãƒãƒ³ã‚’å®Ÿè¡Œã™ã‚‹\n\n* SIGKILL, SIGSTOP ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ãƒãƒ³ãƒ‰ãƒ«ã§ããªã„\n\n* SIGTERM killã‚³ãƒãƒ³ãƒ‰ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§é€ä¿¡ã™ã‚‹\n\n* SIGHUP è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å†èª­ã¿è¾¼ã¿ã‚’å¤–éƒ¨ã‹ã‚‰æŒ‡ç¤ºã™ã‚‹ç”¨é€”ã¦ã‚™ä½¿ã‚ã‚Œã‚‹ã“ã¨ã‹ã‚™ãƒ†ã‚™ãƒ•ã‚¡ã‚¯ãƒˆã‚¹ã‚¿ãƒ³ã‚¿ã‚™ãƒ¼ãƒˆã‚™\n\n* SIGINT Ctrl+C ãƒãƒ³ãƒ‰ãƒ«ã§ãã‚‹SIGKILL\n\n## ç¬¬14ç«  Goè¨€èªã¨ä¸¦åˆ—å‡¦ç†\n\nã“ã®æœ¬ã®å®šç¾©ã§ã¯\n\n* ä¸¦è¡Œ:CPU æ•°ã€ã‚³ã‚¢æ•°ã®é™ç•Œã‚’è¶…ãˆã¦è¤‡æ•°ã®ä»•äº‹ã‚’åŒæ™‚ã«è¡Œã†\n* ä¸¦åˆ—:è¤‡æ•°ã® CPUã€ã‚³ã‚¢ã‚’åŠ¹ç‡ã‚ˆãæ‰±ã£ã¦è¨ˆç®—é€Ÿåº¦ã‚’ä¸Šã‘ã‚™ã‚‹\n\ngoroutine é–“ã®æƒ…å ±å…±æœ‰æ–¹æ³•ã¨ã—ã¦ãƒãƒ£ãƒãƒ«ã‚’ä½¿ã†ã“ã¨ã‚’æ¨å¥¨\n\nã‚¹ãƒ¬ãƒƒãƒ‰ã¨goroutineã®é•ã„\n\n* ã‚¹ãƒ¬ãƒƒãƒˆã‚™ã¨ã¯ãƒ•ã‚šãƒ­ã‚¯ã‚™ãƒ©ãƒ ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ã€Œã‚‚ã®ã€ã¦ã‚™ã‚ã‚Šã€OS ã«ã‚ˆã£ã¦æ‰‹é…ã•ã‚Œã‚‹ã‚‚ã®ã¦\n\n* ãƒ•ã‚šãƒ­ã‚¯ã‚™ãƒ©ãƒ ã‹ã‚‰è¦‹ãŸã‚¹ãƒ¬ãƒƒãƒˆã‚™ã¯ã€ã€Œãƒ¡ãƒ¢ãƒªã«ãƒ­ãƒ¼ãƒˆã‚™ã•ã‚ŒãŸãƒ•ã‚šãƒ­ã‚¯ã‚™ãƒ©ãƒ ã®ç¾åœ¨ã®å®Ÿè¡ŒçŠ¶æ…‹ã‚’æŒã¤ä»®æƒ³ CPUã€\n\n* OS ã‚„ CPU ã‹ã‚‰è¦‹ãŸã‚¹ãƒ¬ãƒƒãƒˆã‚™ã¯ã€ã€Œæ™‚é–“ã‹ã‚™å‡çµã•ã‚ŒãŸãƒ•ã‚šãƒ­ã‚¯ã‚™ãƒ©ãƒ ã®å®Ÿè¡ŒçŠ¶æ…‹ã€\n\n* ã‚¹ãƒ¬ãƒƒãƒˆã‚™ã‹ã‚™CPUã‚³ã‚¢ã«å¯¾ã—ã¦ãƒãƒƒãƒ’ã‚šãƒ³ã‚¯ã‚™ã•ã‚Œã‚‹ã®ã«å¯¾ã—ã€goroutineã¯OSã®ã‚¹ãƒ¬ãƒƒãƒˆã‚™(Go è£½ã®ã‚¢ãƒ•ã‚šãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‹ã‚‰è¦‹ã‚‹ã¨ 1 ã¤ã®ä»®æƒ³CPU)ã«ãƒãƒƒãƒ’ã‚šãƒ³ã‚¯ã‚™ã•ã‚Œã¾ã™\n\n* ã€Œæ©Ÿèƒ½ã‹ã‚™å°‘ãªã„ä»£ã‚ã‚Šã«ã‚·ãƒ³ãƒ•ã‚šãƒ«ã¦ã‚™èµ·å‹•ã‹ã‚™æ—©ã„ã‚¹ãƒ¬ãƒƒãƒˆã‚™ã€ã¨ã—ã¦æä¾›ã•ã‚Œã¦ã„ã‚‹\n\n* M: Machine ã‚«ãƒ¼ãƒãƒ«ã«ã¨ã£ã¦ã®ç‰©ç†CPUã‚³ã‚¢\n\n* P: Process ã‚«ãƒ¼ãƒãƒ«ã«ã¨ã£ã¦ã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©\n\n* G: goroutine ã‚«ãƒ¼ãƒãƒ«ã«ã¨ã£ã¦ã®ãƒ—ãƒ­ã‚»ã‚¹\n\nOSã®ã‚¹ãƒ¬ãƒƒãƒ‰(M)ã”ã¨ã«ã‚¿ã‚¹ã‚¯ã§ã‚ã‚‹G(goroutine)ã®ãƒªã‚¹ãƒˆãŒã‚ã‚Šã€ãƒ©ãƒ³ã‚­ãƒ¥ãƒ¼ãªã©ã®ã‚¹ãƒ¬ãƒƒãƒ‰ãŒè¡Œã†ä½œæ¥­ã‚’æŸã­ã‚‹ã®ã¯Process(P)\nProcess Affinity ã®ä»•çµ„ã¿ã¯ãªã„\n\nruntimeãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã€OSã®ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’ç›´æ¥æ“ä½œã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹\n\n### Race Detector\n\nãƒ‡ãƒ¼ã‚¿ç«¶åˆã‚’ç™ºè¦‹ã™ã‚‹æ©Ÿèƒ½\nbuildã‚„runã˜ã« `-race` ã‚’ã¤ã‘ã¦å®Ÿè¡Œã™ã‚‹ã¨ã€ç«¶åˆã‹ã‚™ç™ºç”Ÿã—ãŸç®‡æ‰€ã¨ã€ç«¶åˆã—ãŸæ›¸ãè¾¼ã¿ã‚’è¡Œã£ãŸ goroutineã€ãã® goroutine ã®ç”Ÿæˆå ´æ‰€ã‹ã‚™ã‚ã‹ã‚‹\n\n### syncãƒ‘ãƒƒã‚±ãƒ¼ã‚¸\n\nãƒãƒ£ãƒãƒ«ã¨selectã§goroutineé–“ã®åŒæœŸã¯äº‹è¶³ã‚Šã‚‹ã€‚\nä»–ã®è¨€èªã‹ã‚‰ã®ç§»æ¤ãªã©ã§selectã«æ›¸ãç›´ã™ã®ãŒå¤§å¤‰ãªã¨ãã«ã€syncãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã†ã€‚\n\n#### sync.Mutex\n\nsync.Mutex ã¯ã€å®Ÿè¡Œãƒã‚šã‚¹ã«å…¥ã‚‹ã“ã¨ã‹ã‚™å¯èƒ½ãª goroutine ã‚’ã€æ’ä»–åˆ¶å¾¡ã«ã‚ˆã£ã¦åˆ¶é™ã™ã‚‹ã€‚\nã€Œãƒ¡ãƒ¢ãƒªã‚’èª­ã¿è¾¼ã‚“ã¦ã‚™æ›¸ãæ›ãˆã‚‹ã€ã‚³ãƒ¼ãƒˆã‚™ã«å…¥ã‚‹ goroutine ã‹ã‚™ 1 ã¤ã«åˆ¶é™ã•ã‚Œã‚‹ãŸã‚ã€ä¸æ•´åˆã‚’é˜²ãã‚™ã“ã¨ã‹ã‚™ã¦ã‚™ãã‚‹\nåŒæ™‚ã«å®Ÿè¡Œã•ã‚Œã‚‹ã¨å•é¡Œã‹ã‚™èµ·ãã‚‹å®Ÿè¡Œã‚³ãƒ¼ãƒˆã‚™ã®è¡Œã‚’ **ã‚¯ãƒªãƒ†ã‚£ã‚«ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³** ã¨å‘¼ã²ã‚™ã¾ã™\nãƒãƒƒãƒ—ã‚„é…åˆ—ã«å¯¾ã™ã‚‹æ“ä½œã¯ã‚¢ãƒˆãƒŸãƒƒã‚¯ã§ãªã„ã®ã§ä¿è­·ãŒå¿…è¦\n\nsync.Mutexã®å®£è¨€ã¯å€¤ã§ã‚‚ãƒã‚¤ãƒ³ã‚¿ã§ã‚‚ã„ã„ãŒã€\nå€¤ã‚³ãƒ’ã‚šãƒ¼ã—ã¦ã—ã¾ã†ã¨ãƒ­ãƒƒã‚¯ã—ã¦ã„ã‚‹çŠ¶æ…‹ã®ã¾ã¾åˆ¥ã® sync.Mutex ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã«ãªã£ã¦ã—ã¾ã†ãŸã‚ã€ä»–ã®é–¢æ•°ã«æ¸¡ã™ã¨ãã¯å¿…ã™ã‚™ãƒ›ã‚šã‚¤ãƒ³ã‚¿ã¦ã‚™æ¸¡ã™ã‚ˆã†ã«ã—ã¾ã™\n\n````go\nvar id int\nfunc generateId(mutex *sync.Mutex) int { \n    // å¤šãã®å ´åˆã¯æ¬¡ã®ã‚ˆã†ã«é€£ç¶šã—ã¦æ›¸ã\n    mutex.Lock()  \n    defer mutex.Unlock()\n    id++\n    return id\n}\n````\n\n#### ãƒãƒ£ãƒãƒ«ã¨Mutexã®ä½¿ã„åˆ†ã‘\n\n* ãƒãƒ£ãƒãƒ«ã‹ã‚™æœ‰ç”¨ãªç”¨é€”: ãƒ†ã‚™ãƒ¼ã‚¿ã®æ‰€æœ‰æ¨©ã‚’æ¸¡ã™å ´åˆã€ä½œæ¥­ã‚’ä¸¦åˆ—åŒ–ã—ã¦åˆ†æ•£ã™ã‚‹å ´åˆã€éåŒæœŸã¦ã‚™çµæœã‚’å—ã‘å–ã‚‹å ´åˆ\n* Mutex ã‹ã‚™æœ‰ç”¨ãªç”¨é€”: ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã€çŠ¶æ…‹ç®¡ç†\n\n#### sync.WaitGroup\n\nå¤šæ•°ã®goroutineã®å¾…ã¡åˆã‚ã›ã«ä½¿ã†\n\n````go\nfunc main() {\n  var wg sync.WaitGroup \n  wg.Add(2)\n  go func() {\n    fmt.Println(\"work 1\")\n    wg.Done()\n  }()\n  go func() {\n    fmt.Println(\"work 2\")\n    wg.Done()\n  }()\n\n  wg.Wait()\n  fmt.Println(\"end\")\n}\n````\n\nãƒãƒ£ãƒãƒ«ã‚ˆã‚Šã‚‚ sync.WaitGroup ã®ã»ã†ã‹ã‚™ã‚ˆã„ã®ã¯ã€**ã‚·ã‚™ãƒ§ãƒ•ã‚™æ•°ã‹ã‚™å¤§é‡ã«ã‚ã£ãŸã‚Šã€å¯å¤‰å€‹ãŸã‚™ã£ãŸã‚Šã™ã‚‹å ´åˆ**\n100 ä»¥ä¸Šã® goroutine ã®ãŸã‚ã«ãƒãƒ£ãƒãƒ«ã‚’å¤§é‡ã«ä½œæˆã—ã¦çµ‚äº†çŠ¶æ…‹ã‚’ä¼é”ã™ã‚‹ã“ã¨ã‚‚ã¦ã‚™ãã¾ã™ã‹ã‚™ã€ã“ã‚ŒãŸã‚™ã‘å¤§é‡ã®ã‚·ã‚™ãƒ§ãƒ•ã‚™ã¦ã‚™ã‚ã‚Œã¯ã‚™ã€æ•°å€¤ã®ã‚«ã‚¦ãƒ³ãƒˆãŸã‚™ã‘ã¦ã‚™ã‚¹ã‚±ãƒ¼ãƒ«ã™ã‚‹sync.WaitGroup ã®ã»ã†ã‹ã‚™ãƒªãƒ¼ã‚¹ã‚™ãƒŠãƒ•ã‚™ãƒ«ã¦ã‚™ã™ã€‚\n\n#### sync.Once\n\nä¸€åº¦ã ã‘å®Ÿè¡Œã—ãŸã„å‡¦ç†\n\n````go\nfunc initialize() {\n    fmt.Println(\"1å›ã ã‘åˆæœŸåŒ–\")\n}\n\nvar once sync.Once\n\nfunc main() {\n    once.Do(initialize)\n    once.Do(initialize)\n    once.Do(initialize)\n}\n````\n\ninit() ã‚’ä½¿ã£ã¦ã‚‚åˆæœŸå‡¦ç†ã¯æ›¸ã‘ã‚‹ãŒã€ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’åˆ¶å¾¡ã—ãŸã„ã¨ããªã©ã¯ã“ã¡ã‚‰ã‚’ä½¿ã†\n\n#### sync.Cond\n\næ¡ä»¶å¤‰æ•°\n\n* å…ˆã«çµ‚ã‚ã‚‰ã›ãªã‘ã‚Œã¯ã‚™ã„ã‘ãªã„ã‚¿ã‚¹ã‚¯ã‹ã‚™ã‚ã‚Šã€ãã‚Œã‹ã‚™å®Œäº†ã—ãŸã‚‰å¾…ã£ã¦ã„ã‚‹ã™ã¸ã‚™ã¦ã® goroutine ã«é€šçŸ¥ã™ã‚‹(`Broadcast()` ãƒ¡ã‚½ãƒƒãƒˆã‚™)\n* ãƒªã‚½ãƒ¼ã‚¹ã®æº–å‚™ã‹ã‚™ã¦ã‚™ãã—ãŸã‚™ã„ã€ãã®ãƒªã‚½ãƒ¼ã‚¹ã‚’å¾…ã£ã¦ã„ã‚‹ goroutine ã«é€šçŸ¥ã‚’ã™ã‚‹ (`Signal()` ãƒ¡ã‚½ãƒƒãƒˆã‚™)\n\n````go\nfunc main() {\n\tvar mutex sync.Mutex\n\tcond := sync.NewCond(\u0026mutex)\n\n\tfor _, name := range []string{\"A\", \"B\", \"C\"} {\n\t\tgo func(name string) {\n\t\t\t// ãƒ­ãƒƒã‚¯ã—ã¦ã‹ã‚‰Waitãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‘¼ã¶\n\t\t\tmutex.Lock()\n\t\t\tdefer mutex.Unlock()\n\t\t\t// Broadcast()ãŒå‘¼ã°ã‚Œã‚‹ã¾ã§å¾…ã¤\n\t\t\tcond.Wait()\n\t\t\t// å‘¼ã°ã‚ŒãŸ!\n\t\t\tfmt.Println(name)\n\t\t}(name)\n\t}\n\tfmt.Println(\" ã‚ˆãƒ¼ã„ \")\n\ttime.Sleep(time.Second)\n\tfmt.Println(\"ã©ã‚“! \")\n\t// å¾…ã£ã¦ã„ã‚‹goroutineã‚’ä¸€æ–‰ã«èµ·ã“ã™\n\tcond.Broadcast()\n\ttime.Sleep(time.Second)\n}\n````\n\nãƒãƒ£ãƒãƒ«ã®å ´åˆã€å¾…ã£ã¦ã„ã‚‹ã™ã¸ã‚™ã¦ã® goroutine ã«é€šçŸ¥ã™ã‚‹ã¨ã—ãŸã‚‰ã‚¯ãƒ­ãƒ¼ã‚¹ã‚™ã™ã‚‹ã—ã‹ãªã„ãŸã‚ã€ä¸€åº¦ãã‚Šã®é€šçŸ¥ã«ã—ã‹ä½¿ãˆã¾ã›ã‚“ã€‚\nsync.Cond ã¦ã‚™ã‚ã‚Œã¯ã‚™ã€ä½•åº¦ã¦ã‚™ã‚‚ä½¿ãˆã¾ã™ã€‚ã¾ãŸã€é€šçŸ¥ã‚’å—ã‘å–ã‚‹ goroutine ã®æ•°ã‹ã‚™ã‚»ã‚™ãƒ­ã¦ã‚™ã‚ã£ã¦ã‚‚è¤‡æ•°ã¦ã‚™ã‚ã£ã¦ã‚‚åŒã—ã‚™ã‚ˆã†ã«æ‰±ãˆã¾ã™\n\n#### sync/atomic\n\nä¸å¯åˆ†æ“ä½œã‚’æä¾›ã™ã‚‹\né€”ä¸­ã¦ã‚™ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚¹ã‚¤ãƒƒãƒã‹ã‚™å…¥ã£ã¦æ“ä½œã‹ã‚™å¤±æ•—ã—ãªã„ã“ã¨ã‹ã‚™ä¿è¨¼ã•ã‚Œã‚‹\n\n````go\nvar id int64 \nfunc generateId(mutex *sync.Mutex) int64 {\n    return atomic.AddInt64(\u0026id, 1)\n}\n````\n\n## ç¬¬15ç«  ä¸¦è¡Œãƒ»ä¸¦åˆ—å‡¦ç†ã®æ‰‹æ³•ã¨è¨­è¨ˆã®ãƒã‚šã‚¿ãƒ¼ãƒ³\n\nä¸¦è¡Œãƒ»ä¸¦åˆ—å‡¦ç†ã®å®Ÿç¾æ‰‹æ³•\n\n* ãƒãƒ«ãƒãƒ•ã‚šãƒ­ã‚»ã‚¹\n* ã‚¤ãƒ˜ã‚™ãƒ³ãƒˆé§†å‹•\n* ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒˆã‚™\n* ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚¯ã‚™ãƒ»ãƒ•ã‚šãƒ­ã‚»ãƒƒã‚·ãƒ³ã‚¯\n\n## ç¬¬16ç«  Go è¨€èªã®ãƒ¡ãƒ¢ãƒªç®¡ç†\n\n## ç¬¬17ç«  å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ãŒèµ·å‹•ã™ã‚‹ã¾ã§\n\nãƒ©ãƒ³ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒã‚«ãƒ¼ãƒãƒ«ã¸ã®å‘½ä»¤ãªã©ã‚’ãƒ©ãƒƒãƒ—ã—ã¦ã‚‹\n\nCã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ãƒªãƒ³ã‚¯ã—ãªã„\nGoã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«ã™ã¹ã¦goroutineã‚„ãƒ¡ãƒ¢ãƒªç®¡ç†ãªã©ã‚’ãµãã‚“ã§ã„ã‚‹\né€†ã«ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¨ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã‚’åˆ‡ã‚Šé›¢ã™ã“ã¨ã‚‚ä¸å¯èƒ½\nOSã®ã‚«ãƒ¼ãƒãƒ«ã®ã‚ˆã†ãªã‚‚ã®ã¯Goã§ã¯ä½œã‚Œãªã„ Biscuitã®ã‚ˆã†ãªä¾‹ã¯ã‚ã‚‹\n\nGoã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«å„OSç”¨ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆãŒã‚ã‚‹ãŸã‚ã©ã®OSã§ã‚‚ãƒ“ãƒ«ãƒ‰ã§ãã‚‹\n\n## ç¬¬18ç«  æ™‚é–“ã¨æ™‚åˆ»\n\nä½ãƒ¬ã‚¤ãƒ¤ãƒ¼ã«ãŠã‘ã‚‹ã‚¿ã‚¤ãƒãƒ¼ã‚„ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®ä»•çµ„ã¿ã¨ä½¿ã„æ–¹\n\nOSãŒä½¿ã†æ™‚é–“ã®ä»•çµ„ã¿ã¯æ²¢å±±ã®ç¨®é¡ã®ã‚¿ã‚¤ãƒãƒ¼ã‚„ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ãŒã‚ã‚‹\n\n* OSãŒèµ·å‹•ã™ã‚‹ã¨ã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚¯ãƒ­ãƒƒã‚¯(RTCã€ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢) ã‹ã‚‰ç¾åœ¨æ™‚åˆ»ã‚’ã‚ˆã¿ã¨ã‚‹\n* OSã®ã‚·ã‚¹ãƒ†ãƒ ã‚¯ãƒ­ãƒƒã‚¯(ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢)ã«åæ˜ ã™ã‚‹\n* ãƒãƒ¼ãƒˆã‚™ã‚¦ã‚§ã‚¢ã®ã‚¿ã‚¤ãƒãƒ¼ã‚’è¨­å®šã—ã€ä¸€å®šé–“éš”ã¦ã‚™å‰²ã‚Šè¾¼ã¿ã‹ã‚™ã‹ã‹ã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚ã“ã®å‰²ã‚Šè¾¼ã¿ã‚’å—ã‘ã¦ã€ã‚·ã‚¹ãƒ†ãƒ ã‚¯ãƒ­ãƒƒã‚¯ã‚’æ›´æ–°ã—ãŸã‚Šã€ç¾åœ¨å®Ÿè¡Œä¸­ã®ãƒ•ã‚šãƒ­ã‚»ã‚¹ã‹ã‚™æŒã¤æ®‹ã‚Šã®ã‚¿ã‚¤ãƒ ã‚¹ãƒ©ã‚¤ã‚¹ã‚’æ¸›ã‚‰ã—ãŸã‚Šã€å¿…è¦ã«å¿œã—ã‚™ã¦ã‚¿ã‚¹ã‚¯ã®åˆ‡ã‚Šæ›¿ãˆã‚’è¡Œã£ãŸã‚Šã—ã¾ã™ã€‚\n\nLinux ã‚«ãƒ¼ãƒãƒ«ã®ãƒ†ã‚™ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šãŸã‚™ã¨ã€ã“ã®ã‚¿ã‚¤ãƒãƒ¼å‰²ã‚Šè¾¼ã¿ã®é–“éš”ã¯ 1 ç§’ ã‚ãŸã‚Š 250 å›ã¨ãªã£ã¦ã„ã¾ã™ã€‚ã“ã®å‰²ã‚Šè¾¼ã¿ã®ãŸã²ã‚™ã«ã€jiffies ã¨ã„ã†ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼å¤‰æ•°ã‹ã‚™å¢—ãˆã¾ã™ã€‚ã“ã®ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼å¤‰æ•°ã‹ã‚™1å¢—åŠ ã™ã‚‹ã“ã¨ã‚’ã€Œ1 Tickã€ã¨ã„ã†\n\nãƒ¢ãƒãƒˆãƒ‹ãƒƒã‚¯æ™‚åˆ»ã¯ã€OS èµ·å‹•ã‹ã‚‰ã®æ™‚é–“ã‚„ã€å„ãƒ•ã‚šãƒ­ã‚»ã‚¹èµ·å‹•ã‹ã‚‰ã®æ™‚é–“ã‚’ã‚«ã‚¦ãƒ³ãƒˆãªã©å·»ãæˆ»ã‚‰ãªã„æ™‚åˆ»\nã‚¦ã‚©ãƒ¼ãƒ«ã‚¯ãƒ­ãƒƒã‚¯æ™‚é–“ã¯ã€æ—¥å¸¸ç”Ÿæ´»ã«ãŠã‘ã‚‹å®Ÿæ™‚é–“\nCPUæ™‚é–“ã¯CPUãŒæ¶ˆè²»ã—ãŸæ™‚é–“\n\n## ç¬¬19ç«  Go è¨€èªã¨ã‚³ãƒ³ãƒ†ãƒŠ\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["reading"]},"/note/Go%E3%81%AB%E4%B8%89%E9%A0%85%E6%BC%94%E7%AE%97%E5%AD%90%E3%81%8C%E6%8E%A1%E7%94%A8%E3%81%95%E3%82%8C%E3%81%AA%E3%81%84%E7%90%86%E7%94%B1":{"title":"Goã«ä¸‰é …æ¼”ç®—å­ãŒæ¡ç”¨ã•ã‚Œãªã„ç†ç”±","content":"\n\\#Go\n\n### [Goã«ä¸‰é …æ¼”ç®—å­ãŒæ¡ç”¨ã•ã‚Œãªã„ç†ç”±](https://zenn.dev/nobonobo/articles/09d884f1f520d6)\n\n* if-elseã¯é•·ããªã‚‹ãŒé–“é•ã„ãªã„ã€æ˜ç¢º\n  * çµå±€ã€åˆ†å²ã¯è¡Œã‚’ã‚ã‘ã¦åˆ†å²ãŒç›®ã§è¿½ãˆã‚‹ã»ã†ãŒãƒ‡ãƒãƒƒã‚°ã—ã‚„ã™ã„\n* ã‚«ãƒãƒ¬ãƒƒã‚¸ã¯è¡Œå˜ä½ã§è¨ˆæ¸¬ã•ã‚Œã‚‹ã“ã¨ãŒå¤šãã€ä¸‰é …æ¼”ç®—å­ã ã¨ã‚«ãƒãƒ¬ãƒƒã‚¸ãŒæ­£ã—ãè¨ˆæ¸¬ã§ããªã„\n* switchæ–‡ã‚‚ã‚ã‚‹\n* ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã¯è³›æˆæ´¾ï¼”ï¼ï¼…ã€å¦å®šæ´¾ï¼–ï¼ï¼…ç¨‹åº¦ã€‚ã—ã‹ã—è³›æˆæ¯”ç‡ãŒä¸ŠãŒã£ã¦ã‚‚ãã‚Œã ã‘ã§æ¡ç”¨ã•ã‚Œã‚‹ã“ã¨ã¯ãªã•ãã†\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Go"]},"/note/Go%E3%81%AE%E3%83%A1%E3%83%88%E3%83%AA%E3%82%AF%E3%82%B9%E3%82%92Prometheus%E3%81%A7%E5%8F%8E%E9%9B%86%E3%81%99%E3%82%8B":{"title":"Goã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’Prometheusã§åé›†ã™ã‚‹","content":"\n## http.Serverã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’Prometheusã§å‡ºåŠ›ã™ã‚‹\n\nhttps://prometheus.io/docs/tutorials/instrumenting_http_server_in_go/\n\n````go\npackage main\n\nimport (\n   \"fmt\"\n   \"net/http\"\n\n   \"github.com/prometheus/client_golang/prometheus\"\n   \"github.com/prometheus/client_golang/prometheus/promhttp\"\n)\n\nvar pingCounter = prometheus.NewCounter(\n   prometheus.CounterOpts{\n       Name: \"ping_request_count\",\n       Help: \"No of request handled by Ping handler\",\n   },\n)\n\nfunc ping(w http.ResponseWriter, req *http.Request) {\n   pingCounter.Inc()\n   fmt.Fprintf(w, \"pong\")\n}\n\nfunc main() {\n   prometheus.MustRegister(pingCounter)\n\n   http.HandleFunc(\"/ping\", ping)\n   http.Handle(\"/metrics\", promhttp.Handler())\n   http.ListenAndServe(\":8090\", nil)\n}\n````\n\n### Echoã®å ´åˆ\n\n````go\npackage main\n\nimport (\n\t\"net/http\"\n\n\tpromMiddleware \"github.com/labstack/echo-contrib/prometheus\"\n\t\"github.com/labstack/echo/v4\"\n)\n\nfunc main() {\n\te := echo.New()\n\n\t// /metrics ã§ãƒ¡ãƒˆãƒªã‚¯ã‚¹æƒ…å ±ãŒå–ã‚Œã‚‹\n\tpm := promMiddleware.NewPrometheus(\"echo\", nil)\n\tpm.Use(e)\n\n\te.GET(\"/ping\", func(c echo.Context) error {\n\t\treturn c.String(http.StatusOK, \"pong\")\n\t})\n\n\te.Logger.Fatal(e.Start(\":1323\"))\n}\n````\n\n## è‡ªä½œã®Exporterã‚’ä½œã‚‹\n\n[Golangã§ç°¡å˜ã«Prometheusã®Exporterã‚’ä½œã‚Œã‚‹ã€‚ - ry's Tech blog](https://ryo-xjsbx.hatenablog.com/entry/prometheus-exporter-with-golang)\n\n`prometheus.Collector` interfaceã‚’æº€ãŸã™ã‚ˆã†ã«ä½œæˆã—ã¦ç™»éŒ²ã™ã‚Œã°ã„ã„ã€‚\n\nhttps://github.com/dgraph-io/ristretto (ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ©ã‚¤ãƒ–ãƒ©ãƒª)ã§ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’ã¨ã£ã¦ã¿ã‚‹\n\n````go\npackage main\n\nimport (\n\t\"github.com/dgraph-io/ristretto\"\n\t\"github.com/prometheus/client_golang/prometheus\"\n)\n\n// CacheStatsCollector implements the prometheus.Collector interface.\ntype CacheStatsCollector struct {\n\tcache *ristretto.Cache\n\n\t// descriptions of exported metrics\n\thitsDesc                  *prometheus.Desc\n\tmissesDesc                *prometheus.Desc\n\tkeysAddedDesc             *prometheus.Desc\n\tkeysUpdatedDesc           *prometheus.Desc\n\tkeysEvictedDesc           *prometheus.Desc\n\tcostAddedDesc             *prometheus.Desc\n\tcostEvictedDesc           *prometheus.Desc\n\tgetsDroppedDesc           *prometheus.Desc\n\tgetsKeptDesc              *prometheus.Desc\n\tratioDesc                 *prometheus.Desc\n\tlifeExpectancySecondsDesc *prometheus.Desc\n}\n\n// NewCacheStatsCollector for prometheus.\nfunc NewCacheStatsCollector(cache *ristretto.Cache) *CacheStatsCollector {\n\tlabels := prometheus.Labels{\"name\": \"ristretto\"}\n\n\treturn \u0026CacheStatsCollector{\n\t\tcache:                     cache,\n\t\thitsDesc:                  prometheus.NewDesc(\"ristretto_hits_total\", \"The number of hits in the cache.\", nil, labels),\n\t\tmissesDesc:                prometheus.NewDesc(\"ristretto_misses_total\", \"The number of misses in the cache.\", nil, labels),\n\t\tkeysAddedDesc:             prometheus.NewDesc(\"ristretto_keys_added\", \"The number of keys added in the cache.\", nil, labels),\n\t\tkeysUpdatedDesc:           prometheus.NewDesc(\"ristretto_keys_updated\", \"The number of keys updated in the cache.\", nil, labels),\n\t\tkeysEvictedDesc:           prometheus.NewDesc(\"ristretto_keys_evicted\", \"The number of keys evicted in the cache.\", nil, labels),\n\t\tcostAddedDesc:             prometheus.NewDesc(\"ristretto_cost_added\", \"The number of cost added in the cache.\", nil, labels),\n\t\tcostEvictedDesc:           prometheus.NewDesc(\"ristretto_cost_evicted\", \"The number of cost evicted in the cache.\", nil, labels),\n\t\tgetsDroppedDesc:           prometheus.NewDesc(\"ristretto_gets_dropped\", \"The number of gets dropped in the cache.\", nil, labels),\n\t\tgetsKeptDesc:              prometheus.NewDesc(\"ristretto_gets_kept\", \"The number of gets kept in the cache.\", nil, labels),\n\t\tratioDesc:                 prometheus.NewDesc(\"ristretto_ratio\", \"The hit ratio of the cache.\", nil, labels),\n\t\tlifeExpectancySecondsDesc: prometheus.NewDesc(\"ristretto_life_expectancy_seconds\", \"The seconds of life expectancy of the cache.\", nil, labels),\n\t}\n}\n\n// Describe implements the prometheus.Collector interface.\nfunc (c CacheStatsCollector) Describe(ch chan\u003c- *prometheus.Desc) {\n\tch \u003c- c.hitsDesc\n\tch \u003c- c.missesDesc\n\tch \u003c- c.keysAddedDesc\n\tch \u003c- c.keysUpdatedDesc\n\tch \u003c- c.keysEvictedDesc\n\tch \u003c- c.costAddedDesc\n\tch \u003c- c.costEvictedDesc\n\tch \u003c- c.getsDroppedDesc\n\tch \u003c- c.getsKeptDesc\n\tch \u003c- c.ratioDesc\n\tch \u003c- c.lifeExpectancySecondsDesc\n}\n\n// Collect implements the prometheus.Collector interface.\nfunc (c CacheStatsCollector) Collect(ch chan\u003c- prometheus.Metric) {\n\tmetrics := c.cache.Metrics\n\n\tch \u003c- prometheus.MustNewConstMetric(c.hitsDesc, prometheus.CounterValue, float64(metrics.Hits()))\n\tch \u003c- prometheus.MustNewConstMetric(c.missesDesc, prometheus.CounterValue, float64(metrics.Misses()))\n\tch \u003c- prometheus.MustNewConstMetric(c.keysAddedDesc, prometheus.CounterValue, float64(metrics.KeysAdded()))\n\tch \u003c- prometheus.MustNewConstMetric(c.keysUpdatedDesc, prometheus.CounterValue, float64(metrics.KeysUpdated()))\n\tch \u003c- prometheus.MustNewConstMetric(c.keysEvictedDesc, prometheus.CounterValue, float64(metrics.KeysEvicted()))\n\tch \u003c- prometheus.MustNewConstMetric(c.costAddedDesc, prometheus.CounterValue, float64(metrics.CostAdded()))\n\tch \u003c- prometheus.MustNewConstMetric(c.costEvictedDesc, prometheus.CounterValue, float64(metrics.CostEvicted()))\n\tch \u003c- prometheus.MustNewConstMetric(c.getsDroppedDesc, prometheus.CounterValue, float64(metrics.GetsDropped()))\n\tch \u003c- prometheus.MustNewConstMetric(c.getsKeptDesc, prometheus.CounterValue, float64(metrics.GetsKept()))\n\tch \u003c- prometheus.MustNewConstMetric(c.ratioDesc, prometheus.CounterValue, float64(metrics.Ratio()))\n\tch \u003c- prometheus.MustNewConstMetric(c.lifeExpectancySecondsDesc, prometheus.CounterValue, float64(metrics.LifeExpectancySeconds().Count))\n}\n\nfunc main() {\n\n\tcache, _ := ristretto.NewCache(\u0026ristretto.Config{\n\t\tNumCounters: 10000,\n\t\tMaxCost:     100000,\n\t\tBufferItems: 64,\n\t\tMetrics:     true,\n\t})\n\n\tcollector := NewCacheStatsCollector(cache)\n\tprometheus.MustRegister(collector)\n\n\thttp.Handle(\"/metrics\", promhttp.Handler())\n\thttp.Handle(\"/set\", http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n\t\tk := r.URL.Query().Get(\"key\")\n\t\tv := r.URL.Query().Get(\"value\")\n\t\tcache.Set(k, v, 1)\n\t}))\n\thttp.Handle(\"/get\", http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n\t\tk := r.URL.Query().Get(\"key\")\n\t\tif v, ok := cache.Get(k); ok {\n\t\t\tvs, _ := v.(string)\n\t\t\tw.Write([]byte(vs))\n\t\t}\n\t}))\n\thttp.ListenAndServe(\":2112\", nil)\n}\n\n````\n\n````shell\n$ curl 'localhost:2112/set?key=foo\u0026value=bar'\n\n$ curl localhost:2112/metrics\n# HELP ristretto_misses_total The number of misses in the cache.\n# TYPE ristretto_misses_total counter\nristretto_misses_total{name=\"ristretto\"} 1\n# HELP ristretto_ratio The hit ratio of the cache.\n# TYPE ristretto_ratio counter\nristretto_ratio{name=\"ristretto\"} 0\n\n$ curl 'localhost:2112/get?key=foo\u0026value=bar'\nbar\n\n$ curl localhost:2112/metrics | rg 'ristretto'\n# HELP ristretto_misses_total The number of misses in the cache.\n# TYPE ristretto_misses_total counter\nristretto_misses_total{name=\"ristretto\"} 1\n# HELP ristretto_ratio The hit ratio of the cache.\n# TYPE ristretto_ratio counter\nristretto_ratio{name=\"ristretto\"} 0.5\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Go","Prometheus"]},"/note/Go-%E3%82%BF%E3%83%BC%E3%83%9F%E3%83%8A%E3%83%AB%E3%81%AE%E3%83%97%E3%83%AD%E3%83%B3%E3%83%97%E3%83%88%E3%81%A7password%E3%82%92%E5%85%A5%E5%8A%9B%E3%81%99%E3%82%8B":{"title":"Go ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§passwordã‚’å…¥åŠ›ã™ã‚‹","content":"\nã‚¿ãƒ¼ãƒŸãƒŠãƒ«ä¸Šã§ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹ã¨ãã€ç”»é¢ä¸Šã«ã¯è¡¨ç¤ºã•ã‚Œãªã„ã‚ˆã†ã«ã—ãŸã„ã€‚\n\nãã‚“ãªã¨ãã« [golang.org/x/crypto ã® ssh/terminal](https://pkg.go.dev/golang.org/x/crypto) ãŒä½¿ãˆã‚‹\n\n````go\nfunc askCred() (string, string) {\n\treader := bufio.NewReader(os.Stdin)\n\tfmt.Print(\"Enter Username: \")\n\tusername, _ := reader.ReadString('\\n')\n\n\tfmt.Print(\"Enter Password: \")\n\tbytePassword, err := terminal.ReadPassword(0)\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\tfmt.Println(\"\\nPassword typed: \" + string(bytePassword))\n\tpassword := string(bytePassword)\n\n\treturn strings.TrimSpace(username), strings.TrimSpace(password)\n}\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/04/26","Go"]},"/note/Go-%E3%83%97%E3%83%A9%E3%82%A4%E3%83%99%E3%83%BC%E3%83%88%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%81%AB%E5%AF%BE%E3%81%97%E3%81%A6ssh%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6go-get%E3%81%99%E3%82%8B":{"title":"Go ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã«å¯¾ã—ã¦sshã‚’ä½¿ã£ã¦go getã™ã‚‹","content":"\n\\#Go #git\n\ngo get æ™‚ã«ã¯git cloneãŒå‹•ã„ã¦ã„ã‚‹ã®ã§gitã®è¨­å®šã§ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã§ãã‚‹ã€‚\n\n## tl;dr\n\n* ç’°å¢ƒå¤‰æ•° `GOPRIVATE=\u003cprivate repository\u003e` ã‚’è¨­å®šã™ã‚‹\n  * ä¾‹ `export GOPRIVATE=github.com/PRIVATE`\n* ç§˜å¯†éµãªã©sshã®è¨­å®šã‚’ã—ãŸã„å ´åˆã¯ç’°å¢ƒå¤‰æ•° `GIT_SSH_COMMAND` ã‚’è¨­å®šã™ã‚‹\n  * ä¾‹ `export GIT_SSH_COMMAND=ssh -i ~/.ssh/id_rsa_privaterepo`\n* `git config --global url.\"ssh://git@github.com\".insteadOf https://github.com/` ã‚’è¨­å®šã™ã‚‹\n\n## èª¿ã¹ãŸã“ã¨\n\n### GOPRIVATE\n\ngolang 1.13ã§è¿½åŠ ã•ã‚ŒãŸè¨­å®šå€¤\nãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§sum.golang.orgã«ã‚ã‚‹å…¬é–‹ã®Go checksum databaseã¨ç…§åˆã—ã¦æ¤œè¨¼ã™ã‚‹ãŒã€å…¬é–‹ã—ã¦ã„ãªã„ãƒªãƒã‚¸ãƒˆãƒªã®å ´åˆã¯æ¤œè¨¼ãŒè¡Œãˆãšãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ™‚ã«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã€‚\n`GOPRIVATE` ã«è¨­å®šã—ãŸãƒ‘ã‚¹ã¯æ¤œè¨¼ã•ã‚Œãªããªã‚‹ã€‚\n\n### httpsã§ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ã£ã¦cloneã™ã‚‹\n\n[GitHubã®private repositoryã‚’å«ã‚“ã å ´åˆã®Go Modulesç®¡ç† | ãŠãã‚‰ãã¯ãã‚Œã•ãˆã‚‚å¹³å‡¡ãªæ—¥ã€…](https://songmu.jp/riji/entry/2019-07-29-go-private-modules.html)\n\ngo get ã¯é€šå¸¸ã§ã¯httpsã®URLã§cloneã—ã‚ˆã†ã¨ã™ã‚‹ã€‚\nGitHubã‚„Bitbucketã§ã¯ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ã£ã¦httpsã§cloneã§ãã‚‹ã€‚\n`insteadOf` ã§URLã‚’ä¸Šæ›¸ãã™ã‚‹ã“ã¨ã§ã€go getæ™‚ã«èªè¨¼æƒ…å ±ã‚’ä½¿ã£ã¦git cloneã•ã‚Œã‚‹ã‚ˆã†ã«ã§ãã‚‹\n\n````shell\n$ git config --global url.\"https://${USER}:${PERSONAL_TOKEN}@bitbucket.org/\".insteadOf \"https://bitbucket.org/\"\n$ cat ~/.gitconfig\n[url \"https://\u003cuser\u003e:\u003ctoken\u003e@bitbucket.org/\"]\n        insteadOf = https://bitbucket.org/\n````\n\nã“ã‚Œã ã¨ä¸Šè¨˜ã®ã‚ˆã†ã«gitconfigã«ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³ãŒæ›¸ã‹ã‚Œã¦ã—ã¾ã†ã®ã§ã€ä»–ã®äººã‚‚è¦‹ãˆã‚‹ç’°å¢ƒã ã¨ã‚ã¾ã‚Šè‰¯ããªã„ã€‚\n\n### go getã§sshã®è¨­å®šã‚’ã™ã‚‹\n\nbitbucketã®ä¾‹\n`https://bitbucket.org/` ã®ã‹ã‚ã‚Šã« `ssh://git@bitbucket.org/` ãŒä½¿ã‚ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹\n\n````shell\ngit config --global url.\"ssh://git@bitbucket.org/\".insteadOf https://bitbucket.org/\n````\n\n`~/.ssh/id_rsa` ãŒå­˜åœ¨ã—ã¦ã€å…¬é–‹éµã‚’ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã‚µãƒ¼ãƒ“ã‚¹ä¸Šã«ç™»éŒ²ã—ã¦ã„ã‚Œã°ã€sshã§go getã§ãã‚‹\n\n````shell\n$ ls -al ~/.ssh/id_rsa\n.r-------- # å­˜åœ¨ã—ã¦permissionãŒé©åˆ‡ã«ãªã£ã¦ã„ã‚‹\n\n# å…¬é–‹éµã‚’known_hostsã«ç™»éŒ²ã—ã¦ã„ãªã„ã¨æ¥ç¶šæ™‚ã«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ãŸã‚äºˆã‚å…¥ã‚Œã¦ãŠã\n$ ssh-keygen -F bitbucket.org || ssh-keyscan bitbucket.org \u003e\u003e ~/.ssh/known_hosts\n\n$ go get bitbucket.org/private-repo\n=\u003e å–å¾—ã§ããŸ\n````\n\nãƒ•ã‚¡ã‚¤ãƒ«ãŒãªã‹ã£ãŸã‚Šå…¬é–‹éµã‚’ç™»éŒ²ã—ã¦ã„ãªã‹ã£ãŸã‚Šã™ã‚‹ã¨ `Permission denied (publickey).` ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ã€‚\n\n### ç§˜å¯†éµã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ã‚’æŒ‡å®šã™ã‚‹\n\n`~/.ssh/id_rsa` ä»¥å¤–ã®éµã‚’æŒ‡å®šã—ãŸã„å ´åˆã¯ã•ã‚‰ã«è¨­å®šãŒå¿…è¦ã¨ãªã‚‹ã€‚\n\n[git clone æ™‚ã«ç§˜å¯†éµã‚’æŒ‡å®šã™ã‚‹ - Qiita](https://qiita.com/sonots/items/826b90b085f294f93acf)\n\n#### `~/.ssh/config` ã‚’ã„ã˜ã‚‹\n\n````ssh-config\nHost bitbucket.org\n  IdentityFile ~/.ssh/id_rsa_privaterepo\n````\n\nã“ã‚Œã§go getã§ããŸã€‚\nã—ã‹ã—å…¨ä½“ã®è¨­å®šã‚’ã„ã˜ã‚‹ã“ã¨ã«ãªã‚‹ãŸã‚ã‚ã¾ã‚Šã‚„ã‚ŠãŸããªã„ã€‚\n\n#### `core.sshCommand` ã‚’è¨­å®šã™ã‚‹\n\n````shell\n$ git config --global core.sshCommand \"ssh -i ~/.ssh/id_rsa_privaterepo -F /dev/null\"\n````\n\nã“ã‚Œã§git cloneæ™‚ã«ã¯sshã‚­ãƒ¼ãŒä½¿ã‚ã‚ŒãŸã®ã ãŒã€go getæ™‚ã«ã¯ãªãœã‹ä½¿ã‚ã‚Œãªã‹ã£ãŸã€‚ã€‚\n\nã¡ãªã¿ã«ä¸€æ™‚çš„ã« config è¨­å®šã‚’ã—ãŸã„å ´åˆã¯ `git -c` ã§è¨­å®šã§ãã¦ã€æ™®é€šã«git cloneã™ã‚‹ã¨ãã¯ã“ã‚Œã§ã‚‚ã„ã„\n\n````shell\n$ git -c core.sshCommand=\"ssh -i ~/.ssh/id_rsa_privaterepo -F /dev/null\" clone ssh://git@bitbucket.org/private.git\n````\n\n#### `GIT_SSH_COMMAND` ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã™ã‚‹\n\nåŒã˜ã“ã¨ã§æ‚©ã‚“ã§ã„ã‚‹äººãŒã„ãŸã€‚\n[git - How can you specify which ssh key `go get` will use - Stack Overflow](https://stackoverflow.com/questions/65569280/how-can-you-specify-which-ssh-key-go-get-will-use)\n\n[GIT_SSH_COMMAND](https://git-scm.com/docs/git#Documentation/git.txt-codeGITSSHCOMMANDcode) ã®è¨­å®šã¯åŠ¹ãã¨ã„ã†ã“ã¨ã ã£ãŸã€‚\n\n````shell\nexport GIT_SSH_COMMAND=\"ssh -i ~/.ssh/id_rsa_privaterepo -o StrictHostKeyChecking=no -F /dev/null\"\n````\n\nå®Ÿéš›ã“ã‚Œã§æŒ‡å®šã—ãŸéµã‚’ä½¿ã£ã¦go getã™ã‚‹ã“ã¨ãŒã§ããŸã€‚\n\n### `fatal: detected dubious ownership` ã‚¨ãƒ©ãƒ¼\n\nå…±æœ‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã« `GOMODCACHE` ã‚’æŒ‡å®šã—ã¦ã„ãŸãŸã‚ã«ã“ã®ã‚¨ãƒ©ãƒ¼ã‚‚ç™ºç”Ÿã—ãŸã€‚\n[Git fatal detected dubious ownership in repositoryã‚¨ãƒ©ãƒ¼](note/Git%20fatal%20detected%20dubious%20ownership%20in%20repositoryã‚¨ãƒ©ãƒ¼.md)\n\nã“ã¡ã‚‰ã‚’è¨­å®šã—ãŸ\n\n````\ngit config --global safe.directory '*'\n````\n\n### Jenkinsä¸Šã§å®Ÿè¡Œã™ã‚‹\n\nworkerä¸Šã«ç§˜å¯†éµã‚’ç½®ã„ã¦ã„ãªã„å ´åˆã€credentialã‹ã‚‰ssh private keyã‚’å–å¾—ã—ã¦ä½¿ã†ã“ã¨ã«ãªã‚‹ã€‚\n\nã¾ãšã¯ `~/.ssh/id_rsa` ã«éµã‚’ç½®ã„ã¦ã¿ãŸ\n\n````groovy\npipeline {\n  agent {\n    label \"worker\"\n  }\n\n  stages {\n    stage('clone'){\n      steps {\n        withCredentials([sshUserPrivateKey(credentialsId: 'git_ssh_key', keyFileVariable: 'GIT_SSH_KEY')]) {\n            sh '''\n            mkdir -p ~/.ssh\n            cp \"$BITBUCKET_SSH_KEY\" ~/.ssh/id_rsa\n            chmod 400 ~/.ssh/id_rsa\n\n            ssh-keygen -F bitbucket.org || ssh-keyscan bitbucket.org \u003e\u003e ~/.ssh/known_hosts\n            export GOPRIVATE='bitbucket.org'\n\n            git config --global url.\"ssh://git@bitbucket.org/\".insteadOf https://bitbucket.org/\n\n            go get bitbucket.org/my/repo\n            '''\n        }\n      }\n    }\n  }\n}\n````\n\nã“ã‚Œã§ã‚‚è‰¯ã‹ã£ãŸãŒã€credentialã®å€¤ã‚’åˆ¥ã®å ´æ‰€ã«ã‚³ãƒ”ãƒ¼ã—ã¦ä½¿ã†ã¨ã„ã†ã®ãŒæ°—æŒã¡æ‚ªã‹ã£ãŸã®ã§ã€ `GIT_SSH_COMMAND` ã‚’ä½¿ã£ãŸã€‚\n\n#### GIT_SSH_COMMANDç‰ˆ\n\n````groovy\npipeline {\n\n  stages {\n    stage('clone'){\n      steps {\n        withCredentials([sshUserPrivateKey(credentialsId: 'git_ssh_key', keyFileVariable: 'GIT_SSH_KEY')]) {\n            sh '''\n            ssh-keygen -F bitbucket.org || ssh-keyscan bitbucket.org \u003e\u003e ~/.ssh/known_hosts\n            export GIT_SSH_COMMAND=\"ssh -i $GIT_SSH_KEY -F /dev/null\"\n            export GOPRIVATE='bitbucket.org'\n\n            git config --global url.\"ssh://git@bitbucket.org/\".insteadOf https://bitbucket.org/\n\n            go get bitbucket.org/my/repo\n            '''\n        }\n      }\n    }\n  }\n}\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Go","git"]},"/note/Go-%E8%A4%87%E6%95%B0%E3%81%AELambda%E3%81%A7%E5%85%B1%E9%80%9A%E3%81%A7%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B%E5%87%A6%E7%90%86%E3%82%92middleware%E3%81%A7%E6%9B%B8%E3%81%8F":{"title":"Go è¤‡æ•°ã®Lambdaã§å…±é€šã§å®Ÿè¡Œã™ã‚‹å‡¦ç†ã‚’middlewareã§æ›¸ã","content":"\nAPI Gatewayå‘ã‘ã® [AWS Lambda](note/AWS%20Lambda.md) ã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’Goã§ä½œæˆã™ã‚‹å ´åˆã€æ™®é€šã«æ›¸ãã¨ã“ã®ã‚ˆã†ã«ã€mainé–¢æ•°ã‹ã‚‰ç‰¹å®šã®ã‚·ã‚°ãƒãƒãƒ£ã®é–¢æ•°ã‚’ lambda.Start ã§å‘¼ã³å‡ºã™ã€‚\n\nhttps://docs.aws.amazon.com/ja_jp/lambda/latest/dg/golang-handler.html\n\n````go\npackage main\n\nimport (\n        \"fmt\"\n        \"context\"\n        \"github.com/aws/aws-lambda-go/events\"\n        \"github.com/aws/aws-lambda-go/lambda\"\n)\n\nfunc handler(ctx context.Context, request events.APIGatewayProxyRequest) (events.APIGatewayProxyResponse, error) {\n\treturn events.APIGatewayProxyResponse{\n\t\tBody:       fmt.Sprintf(\"Hello, %v\", request.QueryStringParameters[\"name\"]),\n\t\tStatusCode: 200,\n\t}, nil\n}\n\nfunc main() {\n        lambda.Start(handler)\n}\n````\n\nAPI Gatewayã®ãƒ‘ã‚¹ã”ã¨ã«Functionã‚’ç´ã¥ã‘ã¦ã„ã‚‹å ´åˆã«ã€ãƒ˜ãƒƒãƒ€ãƒ¼ã‹ã‚‰ãƒˆãƒ¬ãƒ¼ã‚¹ç”¨ã®æƒ…å ±ã‚’å–å¾—ã—ãŸã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å–å¾—ã—ãŸã‚Šã¨ã„ã£ãŸå„ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å…±é€šã§å®Ÿè¡Œã™ã‚‹å‡¦ç†ã‚’æ›¸ããŸã„ã€‚\n\nAPI Gateway -----\u003e /hello HelloFunction\nâ””-------\u003e  /bye ByeFunction\n\n`hello/main.go`\n\n````go\npackage main\n\nimport (\n\t\"context\"\n\t\"fmt\"\n\n\t\"github.com/aws/aws-lambda-go/events\"\n\t\"github.com/aws/aws-lambda-go/lambda\"\n)\n\nfunc handler(ctx context.Context, request events.APIGatewayProxyRequest) (events.APIGatewayProxyResponse, error) {\n\ttraceId := request.Headers[\"X-Amzn-Trace-Id\"]\n\tfmt.Println(traceId)\n\n\treturn events.APIGatewayProxyResponse{\n\t\tBody:       fmt.Sprintf(\"Hello, %v\", request.QueryStringParameters[\"name\"]),\n\t\tStatusCode: 200,\n\t}, nil\n}\n\nfunc main() {\n\tlambda.Start(handler)\n}\n````\n\n`bye/main.go`\n\n````go\npackage main\n\nimport (\n\t\"context\"\n\t\"fmt\"\n\n\t\"github.com/aws/aws-lambda-go/events\"\n\t\"github.com/aws/aws-lambda-go/lambda\"\n)\n\nfunc handler(ctx context.Context, request events.APIGatewayProxyRequest) (events.APIGatewayProxyResponse, error) {\n\ttraceId := request.Headers[\"X-Amzn-Trace-Id\"]\n\tfmt.Println(traceId)\n\n\treturn events.APIGatewayProxyResponse{\n\t\tBody:       fmt.Sprintf(\"Bye, %v\", request.QueryStringParameters[\"name\"]),\n\t\tStatusCode: 200,\n\t}, nil\n}\n\nfunc main() {\n\tlambda.Start(handler)\n}\n````\n\nå„ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®ã‚³ãƒ¼ãƒ‰ã«åŒã˜å‡¦ç†ã‚’æ›¸ãã®ã¯ã€æ•°ãŒå¢—ãˆãŸã¨ãã«é–“é•ãˆã‚„ã™ããªã‚‹ã®ã§ã€ãªã‚“ã¨ã‹ã—ãŸã„ã€‚\n\n## http handlerã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢\n\nnet/httpã§webã‚µãƒ¼ãƒãƒ¼ã‚’ä½œã‚‹ã¨ãã«ã€å„http handlerã«å…±é€šã§å®Ÿè¡Œã—ãŸã„å‡¦ç†ã‚’å®Ÿè£…ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä¸€ã¤ã¨ã—ã¦ã€ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’æ›¸ãã“ã¨ãŒã‚ã‚‹ã€‚\n\nå‚è€ƒ [HTTP Middleware ã®ä½œã‚Šæ–¹ã¨ä½¿ã„æ–¹ - æŠ€è¡“ãƒ¡ãƒ¢](https://tutuz-tech.hatenablog.com/entry/2020/03/23/220326)\n\nã“ã‚Œã¯å¼•æ•°ã« `http.Handler` ã‚’ã¨ã£ã¦ `http.Handler` ã‚’è¿”ã™é–¢æ•°ã§ã€ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®å‰å¾Œã«å‡¦ç†ã‚’æŒŸã¿è¾¼ã‚€ã®ã¨ã€ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢è‡ªèº«ã‚’ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã§ãƒ©ãƒƒãƒ—ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\n\n````go\nfunc logging(next http.Handler) http.Handler {\n  return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n    fmt.Printf(\"Request: %v\\n\", r.URL.String())\n    next.ServeHTTP(w, r)\n  })\n}\n````\n\nã“ã‚Œã‚’ã•ã‚‰ã«wrapã—ã¦ã€è¨­å®šå€¤ã‚’æ¸¡ã™ã‚ˆã†ãªæ›¸ãæ–¹ã‚‚ã§ãã‚‹ã€‚echoã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã¯ã“ã®ã‚ˆã†ãªå®Ÿè£…ã«ãªã£ã¦ã„ã‚‹ã€‚\n\n````go\ntype HttpMiddlewareFunc func(next http.Handler) http.Handler\n\nfunc LoggingMiddleware(debug bool) HttpMiddlewareFunc {\n    return func (next http.Handler) http.Handler {\n        return http.HandlerFunc(func(w http.ResponseWriter, r *http.Request) {\n            if debug {\n                fmt.Printf(\"Request: %v\\n\", r.URL.String())\n            }\n            next.ServeHTTP(w, r)\n        })\n    }\n}\n````\n\n## lambda handlerã®ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã«å¿œç”¨ã™ã‚‹\n\nåŒæ§˜ã®æ–¹æ³•ã§ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚’æ›¸ãã¨ã“ã‚“ãªæ„Ÿã˜ã«ãªã‚‹ã€‚\n\n````go\ntype LambdaHandlerFunc func(context.Context, events.APIGatewayProxyRequest) (events.APIGatewayProxyResponse, error)\ntype LambdaMiddlewareFunc func(next LambdaHandlerFunc) LambdaHandlerFunc\n\nfunc LoggingMiddleware(debug bool) HttpMiddlewareFunc {\n    return func(next LambdaHandlerFunc) LambdaHandlerFunc {\n        return LambdaHandlerFunc(func(ctx context.Context, request events.APIGatewayProxyRequest) (events.APIGatewayProxyResponse, error) {\n            if debug {\n                fmt.Printf(\"Request: %v\\n\", request)\n            }\n\n            return next(ctx, request)\n        })\n    }\n}\n````\n\nå®Ÿç”¨çš„ãªä¾‹ã¨ã—ã¦ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n\n````go\npackage middleware\n\nimport (\n\t\"context\"\n\t\"net/http\"\n\n\t\"github.com/aws/aws-lambda-go/events\"\n)\n\ntype LambdaHandlerFunc func(context.Context, events.APIGatewayProxyRequest) (events.APIGatewayProxyResponse, error)\ntype LambdaMiddlewareFunc func(next LambdaHandlerFunc) LambdaHandlerFunc\n\n// ApplyMiddlewares\nfunc ApplyMiddlewares(handler LambdaHandlerFunc) LambdaHandlerFunc {\n\tmiddlewares := []LambdaMiddlewareFunc{\n\t\tHeader(),\n\t\tAuth(),\n\t}\n\n\tfor i := len(middlewares) - 1; i \u003e= 0; i-- {\n\t\thandler = middlewares[i](handler)\n\t}\n\n\treturn handler\n}\n\n// Header contextã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®request/response headerã‚’ã‚»ãƒƒãƒˆã™ã‚‹\nfunc Header() LambdaMiddlewareFunc {\n\treturn func(next LambdaHandlerFunc) LambdaHandlerFunc {\n\t\treturn func(ctx context.Context, request events.APIGatewayProxyRequest) (events.APIGatewayProxyResponse, error) {\n\n\t\t\tresHeaders := http.Header{\n\t\t\t\t\"Content-Type\": []string{\"application/json\"},\n\t\t\t}\n\t\t\tctx = SetResponseHeader(ctx, resHeaders)\n\n\t\t\treturn next(ctx, request)\n\t\t}\n\t}\n}\n\nfunc Auth() LambdaMiddlewareFunc {\n\treturn func(next LambdaHandlerFunc) LambdaHandlerFunc {\n\t\treturn func(ctx context.Context, request events.APIGatewayProxyRequest) (events.APIGatewayProxyResponse, error) {\n\t\t\tauthHeader := request.Headers[\"Authorization\"]\n\t\t\t// èªè¨¼å‡¦ç†\n\n\t\t\tctx = SetUser(ctx, user)\n\n\t\t\treturn next(ctx, request)\n\t\t}\n\t}\n}\n\n// ----\n// ctxã«ã‚»ãƒƒãƒˆ/å–å¾—ã™ã‚‹å‡¦ç†\n// ----\n\ntype ctxKey string\n\nconst (\n\tctxKeyUser      ctxKey = \"ctxKeyCustomerUser\"\n\tctxKeyResHeader ctxKey = \"ctxKeyResHeader\"\n)\n\nfunc SetResponseHeader(ctx context.Context, headers http.Header) context.Context {\n\tctx = context.WithValue(ctx, ctxKeyResHeader, headers)\n\treturn ctx\n}\n\nfunc ResponseHeaderFromContext(ctx context.Context) http.Header {\n\tif v, ok := ctx.Value(ctxKeyResHeader).(http.Header); ok {\n\t\treturn v\n\t}\n\treturn http.Header{}\n}\n\nfunc SetUser(ctx context.Context, user *User) context.Context {\n\tctx = context.WithValue(ctx, ctxKeyUser, user)\n\treturn ctx\n}\n\nfunc UserFromContext(ctx context.Context) *User {\n\tif v, ok := ctx.Value(ctxKeyUser).(*User); ok {\n\t\treturn v\n\t}\n\treturn nil\n}\n\n````\n\n`hello/main.go`\n\n````go\nfunc handler(ctx context.Context, request events.APIGatewayProxyRequest) (events.APIGatewayProxyResponse, error) {\n\t// ...Handlerã®å‡¦ç†\n}\n\nfunc main() {\n\tlambda.Start(ApplyMiddlewares(handler))\n}\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/06/13","Go","Lambda"]},"/note/Go-Conference-2022-Spring":{"title":"Go Conference 2022 Spring","content":"\n\\#Go #meetup\n\nhttps://gocon.jp/2022spring/schedule/#day_2022-04-23\n\nè³‡æ–™ã¾ã¨ã‚\n[Go Conference 2022 Springå‚åŠ ãƒ¡ãƒ¢](https://blog.hozi.dev/hozi576/articles/01g19p2b2eg3dmjfzj4qg7cywp)\n\n## é™çš„è§£æ\n\ngo/ast ã‚ã£ã¡ã‚ƒä¾¿åˆ©ã˜ã‚ƒã‚“ã€æ„å¤–ã¨é›£ã—ããªã„\nãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§astã§ãƒ‘ãƒ¼ã‚¹ã™ã‚‹ã¨ã„ã„æ„Ÿã˜ã«ãƒ„ãƒªãƒ¼ãŒã§ãã¦ã€è¤‡é›‘åº¦åˆ¤å®šã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ãŸã‚Šã§ãã‚‹\n\n## PHPã‹ã‚‰ãƒªãƒ—ãƒ¬ãƒ¼ã‚¹ã—ãŸ\n\nãƒ¤ãƒ—ãƒªã§å‰µæ¥­ä»¥æ¥ã®PHPã‚’Goã§æ›¸ãæ›ãˆã‚‹\n\nã€Œç¤¾å†…ã§å°å…¥å®Ÿç¸¾ãŒã‚ã£ãŸã€\nã‚„ã‚ŠãŸã‹ã£ãŸã‚‰å°ã•ã„ãƒ„ãƒ¼ãƒ«ã‹ã‚‰ã§ã‚‚å®Ÿç¸¾ä½œã‚‹ã®å¤§äº‹ã ã‚ˆãªãƒ¼ã€‚ãƒ¯ã‚¤ãŒå…ˆé§†è€…ã \n\n* DBãŒæ··æ²Œã¨ã—ã¦ã„ã‚‹ãŒãƒªãƒ—ãƒ¬ãƒ¼ã‚¹å¯¾è±¡ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã¿\n  * ã‚«ãƒ©ãƒ ã«å·¨å¤§JSONã‚’çªã£è¾¼ã‚“ã§ã„ã‚‹ã•ã¾ã‚’chaos jsonã£ã¦å‘½åã™ã‚‹ã®ã™ãã€ç¾å ´ã¯åœ°ç„\n  * database/sql ã§ã¯ã€Scannerã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’æº€ãŸã™ã‚ˆã†ã«å®Ÿè£…ã™ã‚Œã°ã€Selectã—ãŸã¨ãã«å®Ÿè¡Œã•ã‚Œã‚‹ã®ã§å¥½ããªãƒ‘ãƒ¼ã‚¹å‡¦ç†ãŒã‹ã‘ã‚‹\n  * ã‚«ã‚ªã‚¹ã‚’ä¸‹å±¤ãƒ¬ã‚¤ãƒ¤ã«é–‰ã˜è¾¼ã‚ã‚‹ã“ã¨ãŒã§ããŸ\n* å‹ãŒã‚ã‚‹ã®ã¯ã™ã°ã‚‰ã—ã„\n* ã‚¨ãƒ©ãƒ¼ã®æ¡ã‚Šã¤ã¶ã—ãŒæ¸›ã‚‹\n* ç’°å¢ƒæ§‹ç¯‰ãŒæ¥½\n* æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒèª­ã¿ã‚„ã™ã„\n* æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚³ãƒ¼ãƒ‰ãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã™ã‚‹ä¼šã€ã„ã„ã­ ã†ã¡ã§ã‚‚ã‚„ã£ã¦ã¿ã¦ã‚‚ã„ã„ã®ã‹ã‚‚ï¼Ÿ\n\n## GC\n\n* DiscordãŒãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®ç†ç”±ã‹ã‚‰Goã‹ã‚‰Rustã«æ›¸ãæ›ãˆãŸã‘ã©ã€æœ¬å½“ã«ãã†ãªã®ï¼Ÿ\n* Goã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤ã„ã®ã§ã€ç¾åœ¨ã§ã¯ã‚‚ã£ã¨æ”¹å–„ã•ã‚Œã¦ã„ã‚‹\n* Stop The Worldã®æ™‚é–“ã«SLOãŒè¨­ã‘ã‚‰ã‚Œã¦ã„ã¦ã€1msæœªæº€\n* GCã®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã¯å¤ãã‹ã‚‰ã‚ã‚‹ã‚‚ã®ã«æ”¹è‰¯ã‚’åŠ ãˆã¦ã„ã‚‹\n  * concurrent mark and sweep\n* ä¸¦è¡Œå‡¦ç†ã‚’ä½¿ã£ã¦ã„ã‚‹\n  * https://github.com/golang/go/blob/master/src/runtime/mgc.go\n\n## Go ã§ RDB ã« SQL ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª Kra ã®ç´¹ä»‹\n\n* sqlxã¯panicä½¿ã£ã¦ã„ã¦ã€Goã‚‰ã—ããªã„\n* SQLã¯RDBæ“ä½œã®åŸºæœ¬ã§é¿ã‘ã‚‰ã‚Œãªã„\n* ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã»ã†ãŒã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚ˆã‚Šé•·ç”Ÿã\n* ã‚¤ãƒ³ãƒ”ãƒ¼ãƒ€ãƒ³ã‚¹ãƒŸã‚¹ãƒãƒƒãƒã¯è§£æ¶ˆã—ãŒãŸã„ã‚‚ã®ã€‚é¿ã‘ã‚ˆã†ã¨ã›ãšã—ã£ã‹ã‚Šå‘ãåˆã†\n* ORMã®èª¤ç”¨ã§N+1å•é¡ŒãŒç™ºç”Ÿã—ãŒã¡\n\n## protoc\n\n* ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã‚’ã„ã£ã±ã„é ‘å¼µã£ã¦ãªã‚“ã¨ã‹ã—ã¦ããŸã‚“ã ãªã€œã£ã¦ã‚ã‹ã‚‹\n* enumã‚„DBé–¢é€£ã‚³ãƒ¼ãƒ‰ã€APIé–¢é€£ã‚³ãƒ¼ãƒ‰ã‚’ãã‚Œãã‚Œåˆ¥ã‚³ãƒãƒ³ãƒ‰ã§ç”Ÿæˆ\n* protoc pluginã§æ‹¡å¼µã™ã‚‹ã“ã¨ã§ã€protoå®šç¾©ã‹ã‚‰ã™ã¹ã¦ã®è‡ªå‹•ç”ŸæˆãŒè¡Œãˆã‚‹ã‚ˆã†ã«ãªã£ãŸ\n\n## database/sqlã®å®Ÿè£…\n\n* blank importã§ã©ã†ã‚„ã£ã¦å‹•ã„ã¦ã„ã‚‹ã®ï¼Ÿ\n* func initã§å‹•ã„ã¦ã„ã‚‹\n* mysqlã ã£ãŸã‚‰ã€sql.Registerã‚’initã§å‘¼ã‚“ã§ã„ã‚‹\n* globalãªnowFuncå¤‰æ•°ã«time.Nowã‚’å…¥ã‚Œã¦ã€testæ™‚ã«å…¥ã‚Œæ›¿ãˆã‚Œã‚‹ã‚ˆã†ã«ã—ã¦ã„ã‚‹\n* goroutine safeãªä½œã‚Šã«ãªã£ã¦ã„ã¦ã€åŒæ™‚ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒãã¦ã‚‚ã†ã¾ããƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã§ãã‚‹\n* connectionæ•°ãŒè†¨å¤§ã«ãªã‚‰ãªã„ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹\n\n## Goã§API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®å®Ÿè£…\n\n* RoundTripper\n  * ãƒªãƒˆãƒ©ã‚¤åˆ¶å¾¡\n  * ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«\n  * ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆæ™‚ã«å¤–éƒ¨é€šä¿¡ã‚’è¡Œã‚ãªã„ã‚ˆã†ã«ã™ã‚‹\n* newRequestã¨doã‚’å®Ÿè£…ã™ã‚‹ã®ã¯ã‚ã‚‹ã‚ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³\n* å…¸å‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç´¹ä»‹ã—ã¦ãã‚Œã¦ã„ã‚‹ã®ã§å¤§ã„ã«å‚è€ƒã«ãªã‚Šãã†ãªã‚“ã ã‘ã©ã€ç†è§£ãŒè¿½ã„ã¤ã‹ãªã‹ã£ãŸã®ã§ã¡ã‚ƒã‚“ã¨ã¿ãŸã„ãª\n* ãƒ†ã‚¹ãƒˆæ™‚ã¯httptest.Serverã‚’ç«‹ã¡ä¸Šã’ã‚‹ã‹ã€RoundTripperã‚’å·®ã—æ›¿ãˆã‚‹ã‹\n  * httptest.Serverç«‹ã¡ä¸Šã’ã‚‹ã»ã†ãŒãƒãƒ”ãƒ¥ãƒ©ãƒ¼ãªã®ã‹ãªï¼Ÿ\n\n## testingãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ã£ãŸWebã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆï¼ˆå˜ä½“ãƒ†ã‚¹ãƒˆã‹ã‚‰E2Eãƒ†ã‚¹ãƒˆã¾ã§ï¼‰\n\nBASE @budougumiã•ã‚“\n\n* ãƒªãƒã‚¸ãƒˆãƒªå±¤ã®ãƒ†ã‚¹ãƒˆ\n  * contextã¯æ¸¡ã™ã‚ˆã­\n  * UseCaseå±¤ã‹ã‚‰ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ã‚’ã‚‚ã‚‰ã†ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã€‚å®ŸDBã‚’ä½¿ã£ã¦ãƒ†ã‚¹ãƒˆã—ã¦ã„ã‚‹\n  * sql-mockã¯ã€æœŸå¾…ã•ã‚ŒãŸSQLãŒç™ºè¡Œã•ã‚Œã‚‹ã‹ï¼Ÿã ã‘ã§å®Ÿéš›ã«ãƒ‡ãƒ¼ã‚¿ãŒå–ã‚ŒãŸã‹ã©ã†ã‹ã¯ã‚ã‹ã‚‰ãªã„\n  * fixtureã¯ã‚·ãƒ³ãƒ—ãƒ«ãªå½¢ã§ç”¨æ„\n  * CIä¸Šã§å®Ÿè¡Œã™ã‚‹ã¨ããªã©ã¯ç’°å¢ƒå¤‰æ•°ã‚’è¦‹ã¦DBã‚’ç«‹ã¡ä¸Šã’ã‚‹\n  * t.Cleanupã§ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æ¶ˆã™\n  * UseCaseå±¤ã§ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³åˆ¶å¾¡ã—ã¦ã„ã‚‹ã€‚è‰²ã€…æ„è¦‹ã¯ã‚ã‚‹ã‹ã‚‚ã ã‘ã©æ¡ˆä»¶æ¬¡ç¬¬ã ã‚ˆã­\n* ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å±¤ã®ãƒ†ã‚¹ãƒˆ\n  * å®ŸDBã¯ä½¿ã‚ãªã„\n  * sql.DBã‚„txã‚’mockã—ã¦ã„ã‚‹\n  * commitã‚„rollbackãŒå‘¼ã°ã‚ŒãŸã‹ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹\n* httpãƒãƒ³ãƒ‰ãƒ©ãƒ¼å±¤ã®ãƒ†ã‚¹ãƒˆ\n  * ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å±¤ã‚’mockã—ã¦å…¥å‡ºåŠ›è¦‹ã‚‹ãã‚‰ã„\n  * httptest pkgã‚’ä½¿ã£ãŸç´ æœ´ãªãƒ†ã‚¹ãƒˆ\n  * å…¥åŠ›/æœŸå¾…JSONã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã«ã—ã¦ã„ã‚‹\n* t.Helper, t.Cleanupã¨ã‹ã€shuffleã‚ªãƒ—ã‚·ãƒ§ãƒ³ä¾¿åˆ©\n\n## Go x AWS Lambda\n\n* \n","lastmodified":"2023-07-29T08:18:43.019496563Z","tags":["Go","meetup"]},"/note/Go-Echo%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC":{"title":"Go Echoã‚µãƒ¼ãƒãƒ¼","content":"\n\\#Go\n\n## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°\n\n[Error Handling | Echo - High performance, minimalist Go web framework](https://echo.labstack.com/guide/error-handling/)\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/01/19","Go"]},"/note/Go-GORM%E3%81%A7PrepareStmt-true%E3%81%AB%E3%81%97%E3%81%9F%E3%81%A8%E3%81%8D%E3%81%AB%E3%83%A1%E3%83%A2%E3%83%AA%E3%83%AA%E3%83%BC%E3%82%AF%E3%81%8C%E7%99%BA%E7%94%9F%E3%81%97%E3%81%9F":{"title":"Go GORMã§PrepareStmt trueã«ã—ãŸã¨ãã«ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ãŒç™ºç”Ÿã—ãŸ","content":"\nãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Šã®ãŸã‚ã€PrepareStmtã‚’trueã«ã—ãŸã€‚\n\nhttps://gorm.io/docs/performance.html#Caches-Prepared-Statement\n\nã“ã‚Œã¯æ¨™æº–ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã® `PrepareContext` ã®å®Ÿè¡Œçµæœã® `sql.Stmt` ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¦ãŠã„ã¦ã€2å›ç›®ä»¥é™ã®å®Ÿè¡Œã‚’é€Ÿãã™ã‚‹ã€‚\n\nhttps://github.com/go-gorm/gorm/blob/206613868439c5ee7e62e116a46503eddf55a548/prepare_stmt.go#L68\n\nã“ã‚Œã‚’æœ‰åŠ¹ã«ã—ãŸã¨ãã«ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ãŒç™ºç”Ÿã™ã‚‹ã‚ˆã†ã«ãªã£ãŸãŸã‚ã€åŸå› ã‚’èª¿ã¹ãŸã€‚\n\n## å†ç¾æ–¹æ³•\n\nä»¥ä¸‹ã®ã‚ˆã†ãªSQLã‚’å®Ÿè¡Œã—ã¦ã„ãŸã€‚\n\n````go\ngormDb, err := gorm.Open(\"mydb\", \u0026gorm.Config{\n    PrepareStmt: true,\n})\nif err != nil {\n    return nil, err\n}\n\n// weightã¯é–¢æ•°ã®å¼•æ•°ã¨æƒ³å®šã€‚ã»ã¼è¢«ã‚‹ã“ã¨ã®ãªã„ãƒãƒ©ãƒãƒ©ã®å€¤ã¨ã™ã‚‹\ngormDb.Order(fmt.Sprintf(\"(ranking * %s) asc\", weight)).First(\u0026result)\n````\n\nã“ã‚Œã®å•é¡Œç‚¹ã¯ã€ `weight` ã®å€¤ã”ã¨ã«ç•°ãªã‚‹SQLãŒç™ºè¡Œã•ã‚Œã‚‹ã“ã¨ã ã£ãŸã€‚\nPrepareStmt: true ã®ã¨ãã€GORMã®å®Ÿè£…ã§ã¯ç™ºè¡Œã•ã‚ŒãŸSQLæ–‡ã‚’ã‚­ãƒ¼ã«mapå‹ã®å€¤ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã‚‹ãŸã‚ã€ `weight` ã®å€¤ãŒã°ã‚‰ã¤ãã»ã©ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã‚‹é‡ã‚‚å¢—ãˆã‚‹ã€‚\nã“ã‚Œã«ã‚ˆã£ã¦ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ãŒç™ºç”Ÿã—ã¦ã„ãŸã€‚\n\n## è§£æ±ºæ–¹æ³•\n\nè§£æ±ºæ–¹æ³•ã¯ã€ã¡ã‚ƒã‚“ã¨prepared statementã«ã™ã‚‹ã“ã¨ã ã€‚\n\n````go\ngormDb.Clauses(clause.OrderBy{\n\tExpression: clause.Expr{\n\t\tSQL: \"(ranking * ?) asc\",\n\t\tVars: []any{\n\t\t\tweight,\n\t\t},\n\t},\n}).Limit(1).Find(\u0026tpoint)\n````\n\n* å˜ç´”ãªOrderã«ã¯æŒ‡å®šãŒã§ããªã‹ã£ãŸã®ã§ã€clauseã‚’ä½¿ã£ã¦ç”ŸSQLã‚’æ›¸ã\n* `First` ã‚’æŒ‡å®šã™ã‚‹ã¨ `ORDER BY \u003cprimary key\u003e` ã§ä¸Šæ›¸ãã•ã‚Œã¦ã—ã¾ã£ãŸãŸã‚ã€ `Limit(1).Find` ã«ã—ãŸ\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/06/08","Go"]},"/note/Go-GORM%E3%81%A7SQL%E5%AE%9F%E8%A1%8C%E5%89%8D%E5%BE%8C%E3%81%AB%E5%AE%9F%E8%A1%8C%E3%81%95%E3%82%8C%E3%82%8BHook%E3%82%92%E7%99%BB%E9%8C%B2%E3%81%99%E3%82%8B":{"title":"Go GORMã§SQLå®Ÿè¡Œå‰å¾Œã«å®Ÿè¡Œã•ã‚Œã‚‹Hookã‚’ç™»éŒ²ã™ã‚‹","content":"\n## æ§‹é€ ä½“å˜ä½ã§é©ç”¨ã™ã‚‹\n\n## gorm.DBå…¨ä½“ã«é©ç”¨ã™ã‚‹\n\n[Plugin](https://gorm.io/docs/write_plugins.html) ã‚’ä½¿ã£ã¦Globalã«è¨­å®šã™ã‚‹ã“ã¨ã‚‚å¯èƒ½\n\nå®šç¾©æ¸ˆã¿ã®callbackã¯ã“ã¡ã‚‰\nhttps://github.com/go-gorm/gorm/blob/master/callbacks/callbacks.go\n\n`Query()` ã«å¯¾ã—ã¦ `gorm:query` ã¨ã„ã†åå‰ã§å®šç¾©æ¸ˆã¿ãªã®ã§ã€ãã‚Œã®ã‚ã¨ã«å®Ÿè¡Œã™ã‚‹Pluginã¯ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ã‘ã‚‹\n\n````go\ngormDb.Callback().Query().After(\"gorm:query\").Register(\"custom_after_query\", func(tx *gorm.DB) {\n    fmt.Printf(\"sql ==\u003e %v, var ==\u003e %v\\n\", tx.Statement.SQL.String(), tx.Statement.Vars)\n})\n````\n\nå„pluginã®å‹•ãã‚’è¦‹ã‚‹ãŸã‚ã«ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ã„ãŸ\n\n````go\nfunc NewDB(dialector gorm.Dialector) (*gorm.DB, error) {\n\tgormDb, err := gorm.Open(dialector, \u0026gorm.Config{\n\t\tSkipDefaultTransaction: true,\n\t\tPrepareStmt:            true,\n\t})\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\n\t{\n\t\tt := \"query\"\n\t\tgormDb.Callback().Query().Before(\"gorm:\"+t).Register(\"before_\"+t, func(tx *gorm.DB) {\n\t\t\tfmt.Println(\"before_\"+t, \"sql\", tx.Statement.SQL.String(), \"var\", tx.Statement.Vars)\n\t\t})\n\t\tgormDb.Callback().Query().After(\"gorm:\"+t).Register(\"after_\"+t, func(tx *gorm.DB) {\n\t\t\tfmt.Println(\"after_\"+t, \"sql\", tx.Statement.SQL.String(), \"var\", tx.Statement.Vars)\n\t\t})\n\t}\n\t{\n\t\tt := \"preload\"\n\t\tgormDb.Callback().Query().Before(\"gorm:\"+t).Register(\"before_\"+t, func(tx *gorm.DB) {\n\t\t\tfmt.Println(\"before_\"+t, \"sql\", tx.Statement.SQL.String(), \"var\", tx.Statement.Vars)\n\t\t})\n\t\tgormDb.Callback().Query().After(\"gorm:\"+t).Register(\"after_\"+t, func(tx *gorm.DB) {\n\t\t\tfmt.Println(\"after_\"+t, \"sql\", tx.Statement.SQL.String(), \"var\", tx.Statement.Vars)\n\t\t})\n\t}\n\t{\n\t\tt := \"after_query\"\n\t\tgormDb.Callback().Query().Before(\"gorm:\"+t).Register(\"before_\"+t, func(tx *gorm.DB) {\n\t\t\tfmt.Println(\"before_\"+t, \"sql\", tx.Statement.SQL.String(), \"var\", tx.Statement.Vars)\n\t\t})\n\t\tgormDb.Callback().Query().After(\"gorm:\"+t).Register(\"after_\"+t, func(tx *gorm.DB) {\n\t\t\tfmt.Println(\"after_\"+t, \"sql\", tx.Statement.SQL.String(), \"var\", tx.Statement.Vars)\n\t\t})\n\t}\n\t{\n\t\tt := \"raw\"\n\t\tgormDb.Callback().Raw().Before(\"gorm:\"+t).Register(\"before_\"+t, func(tx *gorm.DB) {\n\t\t\tfmt.Println(\"before_\"+t, \"sql\", tx.Statement.SQL.String(), \"var\", tx.Statement.Vars)\n\t\t})\n\t\tgormDb.Callback().Raw().After(\"gorm:\"+t).Register(\"after_\"+t, func(tx *gorm.DB) {\n\t\t\tfmt.Println(\"after_\"+t, \"sql\", tx.Statement.SQL.String(), \"var\", tx.Statement.Vars)\n\t\t})\n\t}\n\t{\n\t\tt := \"row\"\n\t\tgormDb.Callback().Row().Before(\"gorm:\"+t).Register(\"before_\"+t, func(tx *gorm.DB) {\n\t\t\tfmt.Println(\"before_\"+t, \"sql\", tx.Statement.SQL.String(), \"var\", tx.Statement.Vars)\n\t\t})\n\t\tgormDb.Callback().Raw().After(\"gorm:\"+t).Register(\"after_\"+t, func(tx *gorm.DB) {\n\t\t\tfmt.Println(\"after_\"+t, \"sql\", tx.Statement.SQL.String(), \"var\", tx.Statement.Vars)\n\t\t})\n\t}\n\n\treturn gormDb, nil\n}\n\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/05/19","Go"]},"/note/Go-Gin%E3%81%AB%E5%85%A5%E9%96%80%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B":{"title":"Go Ginã«å…¥é–€ã—ã¦ã¿ã‚‹","content":"\n\\#Go\n\n[Quickstart | Gin Web Framework](https://gin-gonic.com/docs/quickstart/)\n\n````shell\ngo get -u github.com/gin-gonic/gin\n````\n\n`main.go`\n\n````go\npackage main\n\nimport \"github.com/gin-gonic/gin\"\n\nfunc main() {\n\tr := gin.Default()\n\tr.GET(\"/ping\", func(c *gin.Context) {\n\t\tc.JSON(200, gin.H{\n\t\t\t\"message\": \"pong\",\n\t\t})\n\t})\n\tr.Run() // listen and serve on 0.0.0.0:8080\n}\n````\n\n### Graceful shutdownã‚’å®Ÿè£…ã™ã‚‹\n\n\u003chttps://gin-gonic.com/docs/examples/graceful-restart-or-stop/\u003e\n\n[Go http.Serverã®Graceful shutdown](note/Go%20http.Serverã®Graceful%20shutdown.md)\n\n### middleware\n\nmiddlewareã«ã¯ `gin.HandlerFunc` ã‚’å®Ÿè£…ã—ã¦ã„ã‚‹é–¢æ•°ã‚’æ¸¡ã™\n\n````go\nfunc Logger() gin.HandlerFunc {\n\treturn func(c *gin.Context) {\n\t\tt := time.Now()\n\n\t\tdefer func() {\n\t\t\telapsed := time.Since(t)\n\t\t\tfmt.Printf(\"elapsed: %v\\n\", elapsed)\n\n\t\t}()\n\n\t\tc.Next()\n\t}\n}\n\nfunc main() {\n\tr := gin.New()\n\tr.Use(Logger())\n\n\tr.GET(\"/test\", func(c *gin.Context) {\n\t\texample := c.MustGet(\"example\").(string)\n\n\t\t// it would print: \"12345\"\n\t\tlog.Println(example)\n\t})\n\n\t// Listen and serve on 0.0.0.0:8080\n\tr.Run(\":8080\")\n}\n\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Go"]},"/note/Go-Neovim%E3%81%A7template%E3%81%AEsyntax-highlight%E3%82%92%E5%8A%B9%E3%81%8B%E3%81%9B%E3%82%8B":{"title":"Go Neovimã§templateã®syntax highlightã‚’åŠ¹ã‹ã›ã‚‹","content":"\nã“ã‚Œã‚’å…¥ã‚ŒãŸ\n\n{{\u003c card-link \"https://github.com/ngalaiko/tree-sitter-go-template\" \u003e}}\n\n[text/template](https://pkg.go.dev/text/template) ã® [nvim-treesitter](note/nvim-treesitter.md) å‘ã‘ã®ãƒ‘ãƒ¼ã‚µãƒ¼\n\n## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—\n\nå…¬å¼ã®é€šã‚Šã ãŒãƒ¡ãƒ¢ã—ã¦ãŠã\n\n1. parserã«è¿½åŠ ã—ãŸã‚ã¨ã€ `:TSInstallFromGrammar gotmpl`\n\n````lua\nlocal parser_config = require'nvim-treesitter.parsers'.get_parser_configs()\nparser_config.gotmpl = {\n  install_info = {\n    url = \"https://github.com/ngalaiko/tree-sitter-go-template\",\n    files = {\"src/parser.c\"}\n  },\n  filetype = \"gotmpl\",\n  used_by = {\"gohtmltmpl\", \"gotexttmpl\", \"gotmpl\", \"yaml\"}\n}\n````\n\n2. gotmplã‚’æ¤œçŸ¥ã—ãŸã‚‰filetypeã«è¨­å®šã•ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹\n\nluaã§æ›¸ãå ´åˆã¯ã“ã‚“ãªæ„Ÿã˜ã«\n\n````lua\nvim.api.nvim_create_autocmd({ \"BufNewFile\", \"BufRead\" }, {\n  pattern = { \"*.tmpl\" },\n  callback = function()\n    if vim.fn.search(\"{{.\\\\+}}\", \"nw\") ~= 0 then\n        vim.bo.filetype = \"gotmpl\"\n    end\n  end,\n})\n````\n\n3. [queries](https://github.com/nvim-treesitter/nvim-treesitter#adding-queries) ã«è¿½åŠ ã™ã‚‹\n\n`~/.config/nvim/queries/gotmpl/injections.scm`\n\n````\n(text) @yaml\n````\n\n`~/.config/nvim/queries/gotmpl/highlights.scm`\n\n````\n; Identifiers\n\n[\n    (field)\n    (field_identifier)\n] @property\n\n(variable) @variable\n\n; Function calls\n\n(function_call\n  function: (identifier) @function)\n\n(method_call\n  method: (selector_expression\n    field: (field_identifier) @method))\n\n; Operators\n\n\"|\" @operator\n\":=\" @operator\n\n; Builtin functions\n\n((identifier) @function.builtin\n (#match? @function.builtin \"^(and|call|html|index|slice|js|len|not|or|print|printf|println|urlquery|eq|ne|lt|ge|gt|ge)$\"))\n\n; Delimiters\n\n\".\" @punctuation.delimiter\n\",\" @punctuation.delimiter\n\n\"{{\" @punctuation.bracket\n\"}}\" @punctuation.bracket\n\"{{-\" @punctuation.bracket\n\"-}}\" @punctuation.bracket\n\")\" @punctuation.bracket\n\"(\" @punctuation.bracket\n\n; Keywords\n\n[\n    \"else\"\n    \"else if\"\n    \"if\"\n    \"with\"\n] @conditional\n\n[\n    \"range\"\n    \"end\"\n    \"template\"\n    \"define\"\n    \"block\"\n] @keyword\n\n; Literals\n\n[\n  (interpreted_string_literal)\n  (raw_string_literal)\n  (rune_literal)\n] @string\n\n(escape_sequence) @string.special\n\n[\n  (int_literal)\n  (float_literal)\n  (imaginary_literal)\n] @number\n\n[\n    (true)\n    (false)\n] @boolean\n\n[\n  (nil)\n] @constant.builtin\n\n(comment) @comment\n(ERROR) @error\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/05/19","Go","Neovim"]},"/note/Go-OS%E3%81%AEcredential%E7%AE%A1%E7%90%86%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B":{"title":"Go OSã®credentialç®¡ç†ã‚’åˆ©ç”¨ã™ã‚‹","content":"\nãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã‚’ä½œã£ã¦ã„ã¦ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’æ›¸ããŸããªã‹ã£ãŸãŸã‚ã€Goã§OSã®ç®¡ç†ãƒ„ãƒ¼ãƒ«ã«ä¿å­˜ã€å–å¾—ã™ã‚‹æ–¹æ³•ã‚’èª¿ã¹ãŸã€‚\n\nMacã§ã‚ã‚Œã°Keychainã€Windowsã§ã‚ã‚Œã°Credential ManagerãŒã‚ã‚‹\nhttps://support.apple.com/guide/keychain-access/what-is-keychain-access-kyca1083/mac\nhttps://support.microsoft.com/en-us/windows/accessing-credential-manager-1b5c916a-6a16-889f-8581-fc16e8165ac0\n\n## ãƒ©ã‚¤ãƒ–ãƒ©ãƒª\n\n[zalando/go-keyring: Cross-platform keyring interface for Go](https://github.com/zalando/go-keyring/tree/master) ãŒè‰¯ã•ãã†ã€‚\n\nLinuxå«ã‚å„OSã«å¯¾å¿œã—ã¦ã„ã¦ã€OS Xã¯ `/usr/bin/security` (OS X keychain ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹)ã€Windowsã¯ https://github.com/danieljoos/wincred ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹\n\n## å®Ÿè£…\n\ncredentialã‚’å–å¾—ã—ã¦ã€æœªæŒ‡å®šã§ã‚ã‚Œã°å…¥åŠ›ã‚’ä¿ƒã™ã‚ˆã†ã«ã—ãŸã€‚\n\nãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®å…¥åŠ›ã¯ã“ã¡ã‚‰ã‚’ä½¿ç”¨ã™ã‚‹\n[Go ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§passwordã‚’å…¥åŠ›ã™ã‚‹](note/Go%20ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§passwordã‚’å…¥åŠ›ã™ã‚‹.md)\n\n````go\nfunc getPassword(service, username string) (string, error) {\n\t// get password\n\tsecret, err := keyring.Get(service, username)\n\tif err != nil {\n\t\tif errors.Is(err, keyring.ErrNotFound) {\n\t\t\tfmt.Print(\"Enter Password: \")\n\t\t\tbytePassword, err := terminal.ReadPassword(0)\n\t\t\tif err != nil {\n\t\t\t\treturn \"\", err\n\t\t\t}\n\t\t\tfmt.Println()\n\t\t\tp := strings.TrimSpace(string(bytePassword))\n\t\t\tif p == \"\" {\n\t\t\t\treturn \"\", errors.New(\"password should not be empty\")\n\t\t\t}\n\n\t\t\terr = keyring.Set(service, username, p)\n\t\t\tif err != nil {\n\t\t\t\treturn \"\", err\n\t\t\t}\n\n\t\t\treturn p, nil\n\t\t} else {\n\t\t\treturn \"\", err\n\t\t}\n\t}\n\n\treturn secret, nil\n}\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/04/26","Go"]},"/note/Go-Revel%E5%85%A5%E9%96%80":{"title":"Go Revelå…¥é–€","content":"\nhttps://revel.github.io/tutorial/index.html\n\n````shell\n# revelã‚³ãƒãƒ³ãƒ‰ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n$ go install github.com/revel/cmd/revel@latest\n$ revel\nUsage:\n  revel [OPTIONS] \u003ccommand\u003e\n\nApplication Options:\n  -v, --debug                If set the logger is set to verbose\n      --historic-run-mode    If set the runmode is passed a string not json\n      --historic-build-mode  If set the code is scanned using the original parsers, not the go.1.11+\n  -X, --build-flags=         These flags will be used when building the application. May be specified multiple times, only applicable for Build, Run, Package, Test commands\n      --gomod-flags=         These flags will execute go mod commands for each flag, this happens during the build process\n\nAvailable commands:\n  build\n  clean\n  new\n  package\n  run\n  test\n````\n\nmyapp ã¨ã„ã†åå‰ã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ\n\n````shell\n$ revel new -a myapp\n$ cd myapp\n$ revel run\nRevel executing: run a Revel application\nWARN  14:32:45 harness.go:179: No http.addr specified in the app.conf listening on localhost interface only. This will not allow external access to your application\nChange detected, recompiling\nParsing packages, (may require download if not cached)... Completed\nINFO  14:32:46    app     run.go:34: Running revel server\nINFO  14:32:46    app   plugin.go:9: Go to /@tests to run the tests.\nRevel engine is listening on.. localhost:51839\nRevel proxy is listening, point your browser to : 9000\n````\n\nhttp://localhost:9000 ã§ç”»é¢ãŒé–‹ã\n\n### è¨­å®š\n\n`conf/app.conf` ã«è¨­å®šå€¤ã‚’æ›¸ã\nportãªã©ã‚‚ã“ã“\n\n`conf/routes` ã«ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’æ›¸ã\n\n### View\n\n`app/views/App/Index.html`\n\n````html\n{{set . \"title\" \"Home\"}}\n{{template \"header.html\" .}}\n\n\u003cheader class=\"jumbotron\" style=\"background-color:#A9F16C\"\u003e\n  \u003cdiv class=\"container\"\u003e\n    \u003cdiv class=\"row\"\u003e\n      \u003ch1\u003eIt works!\u003c/h1\u003e\n      \u003cp\u003e\u003c/p\u003e\n    \u003c/div\u003e\n  \u003c/div\u003e\n\u003c/header\u003e\n\n\u003cdiv class=\"container\"\u003e\n  \u003cdiv class=\"row\"\u003e\n    \u003cdiv class=\"span6\"\u003e\n      {{template \"flash.html\" .}}\n    \u003c/div\u003e\n  \u003c/div\u003e\n\u003c/div\u003e\n\n{{template \"footer.html\" .}}\n\n````\n\n## æ„Ÿæƒ³\n\n* å¤ãè‰¯ãMVCãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨ã„ã†æ„Ÿã˜ã€‚Tomcatã®Servletã®é–‹ç™ºã«ä½“é¨“ã¨ã—ã¦ã¯è¿‘ã„ï¼Ÿ\n* Viewã‚‚å‚™ãˆã¦ã„ã¦JSPã¿ãŸã„ã«æ›¸ã‘ã‚‹\n* scaffoldã€ã‚µãƒ¼ãƒãƒ¼èµ·å‹•ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãªã©äºˆã‚æ±ºã‚ã‚‰ã‚Œã¦ã„ã¦ã€ã“ã¡ã‚‰ã§æ±ºã‚ã‚‹ã“ã¨ã¯å°‘ãªã„\n* REST APIã®æ§‹ç¯‰ã«ã¯å¤§ãã™ãã‚‹æ„Ÿã˜ã€Goã£ã½ããªã„\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Go"]},"/note/Go-SQLBoiler%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9":{"title":"Go SQLBoilerã®ä½¿ã„æ–¹","content":"\n{{\u003c card-link \"https://github.com/volatiletech/sqlboiler\" \u003e}}\n\n[Go](note/Go.md) ã®ORMãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä¸€ã¤ã§ã€ç‰¹å¾´ã¨ã—ã¦ã¯DBã«æ¥ç¶šã—ã¦ã€äºˆã‚ä½œæˆãšã¿ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\nã‚ˆã£ã¦ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã¯ãªã„ã®ã ãŒã€è‡ªåˆ†ã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã§ã¯ãã®æ©Ÿèƒ½ã¯ä½¿ã‚ãªã„ã®ã§ä¾¿åˆ©ã ã¨æ€ã†ã€‚\n\nã‚³ãƒ¼ãƒ‰ã®ç”Ÿæˆã¯ `sqlboiler` ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã§è¡Œã†ã€‚\n\nç”Ÿæˆã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ã¯ä»¥ä¸‹ã®ç‰¹å¾´ãŒã‚ã‚‹ã€‚\n\n* é™çš„å‹ä»˜ã‘ã•ã‚Œã¦ãŠã‚Šã€ãƒªãƒ•ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ã‚’ä½¿ã‚ãªã„ã®ã§é«˜é€Ÿã§ã€ã‚³ãƒ¼ãƒ‰ã‚‚è¿½ã„ã‚„ã™ã„\n* DBã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹é–¢æ•°ã¯context.Contextã‚’å¼•æ•°ã«ã¨ã‚‹\n  * GORMã®å ´åˆã€ `WithContext` ã‚’å¿˜ã‚Œã‚‹ã¨contextãŒæ¸¡ã›ãšã€ç‰¹ã«åˆå¿ƒè€…ã ã¨å¿˜ã‚ŒãŒã¡\n* ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½¿ã£ã¦ç”Ÿæˆã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã‚‹\n\n## åŸºæœ¬çš„ãªä½¿ã„æ–¹\n\nã“ã“ã«ã¯ã‚ã¾ã‚Šæ›¸ã‹ãªã„ã€‚\n\n* æ¥ç¶šã¯ `database/sql` ã® `sql.Open`\n* å‚ç…§ã‚„æ›´æ–°ã¯ã€ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã® `models.XXX` ã«ãƒ¡ã‚½ãƒƒãƒ‰ãŒç”Ÿãˆã¦ã„ã‚‹\n\n## Eager Loading\n\n## ãƒãƒ«ã‚¯ã‚¤ãƒ³ã‚µãƒ¼ãƒˆ\n\n[SQLBoilerã§Bulk Insertã‚’å®Ÿç¾ã™ã‚‹æ–¹æ³• - Qiita](https://qiita.com/touyu/items/4b25fbf12804f12778b7)\nhttps://github.com/volatiletech/sqlboiler/issues/101\n\n## Raw SQLã‚’æ›¸ã„ã¦å®Ÿè¡Œã™ã‚‹\n\n## TIPS\n\n### mysqlã§BOOLEAN (TINYINT(1)ã¨ç­‰ä¾¡) ã‚’æ•°å€¤å‹ã¨ã—ã¦æ‰±ã„ãŸã„\n\nhttps://github.com/volatiletech/sqlboiler/issues/80\nhttps://github.com/volatiletech/sqlboiler/blob/4dd76363f68e73f9bd52ca984446db69a2282981/drivers/sqlboiler-mysql/driver/mysql.go#L516\n\n## å‚è€ƒè³‡æ–™\n\n* [Golangã®ORM SQLBoilerã‚’ä½¿ã£ã¦ã¿ã‚‹ - å®Ÿè£…ç·¨(Create/Update/Delete) - ken-aio's blog](https://ken-aio.github.io/post/2019/03/25/golang-sqlboiler-cud/)\n* [SQLBoilerï¼ˆã¨oapi-codegenï¼‰ã§ã¤ãã‚‹REST APIã‚µãƒ¼ãƒ | ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°](https://future-architect.github.io/articles/20210730a/)\n* [SQLBoiler ã®ä½¿ã„æ–¹ã‚’ç°¡å˜ã«ã¾ã¨ã‚ãŸ - ãã‚ã®ã¦](https://note.crohaco.net/2020/golang-sqlboiler/)\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/06/13"]},"/note/Go-Sentry%E3%81%AB%E9%80%81%E4%BF%A1%E3%81%99%E3%82%8B":{"title":"Go Sentryã«é€ä¿¡ã™ã‚‹","content":"\n\\#Go\n\nGoã®ã‚³ãƒ¼ãƒ‰ã§Sentryã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡ã™ã‚‹ã‚„ã‚Šæ–¹\n\n## æ™®é€šã®Goã®ã‚³ãƒ¼ãƒ‰\n\nGoã§Sentryã«ã‚¨ãƒ©ãƒ¼ã‚’é€ä¿¡ã™ã‚‹å ´åˆã€ \u003chttps://github.com/getsentry/sentry-go\u003e ã‚’ä½¿ã†ã€‚\nä»¥å‰ã¯raven-goã¨ã„ã†åå‰ã ã£ãŸã®ã§ã€å¤ã„ãƒšãƒ¼ã‚¸ã§ã¯ã“ã¡ã‚‰ã§è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹ã‹ã‚‚ã€‚\n\nWebãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ç­‰ã‚’ä½¿ã‚ãªã„ãƒ—ãƒ¬ãƒ¼ãƒ³ãªGoã®ã‚³ãƒ¼ãƒ‰ã®å ´åˆã€ `github.com/getsentry/sentry-go` ã‚’importã—ã¦å‘¼ã³å‡ºã›ã°ã‚ˆã„\n\n[Go | Sentry Documentation](https://docs.sentry.io/platforms/go/)\n\n````go\npackage main\n\nimport (\n\t\"log\"\n\t\"time\"\n\n\t\"github.com/getsentry/sentry-go\"\n)\n\nfunc main() {\n\terr := sentry.Init(sentry.ClientOptions{\n\t\tDsn: \"https://examplePublicKey@o0.ingest.sentry.io/0\",\n\t\t// Enable printing of SDK debug messages.\n\t\t// Useful when getting started or trying to figure something out.\n\t\tDebug: true,\n\t})\n\tif err != nil {\n\t\tlog.Fatalf(\"sentry.Init: %s\", err)\n\t}\n\t// Flush buffered events before the program terminates.\n\t// Set the timeout to the maximum duration the program can afford to wait.\n\tdefer sentry.Flush(2 * time.Second)\n\n    sentry.CaptureMessage(\"It works!\")\n}\n````\n\n### Scope, Hub\n\n[Scopes and Hubs for Go | Sentry Documentation](https://docs.sentry.io/platforms/go/enriching-events/scopes/)\n\nã‚¤ãƒ™ãƒ³ãƒˆãŒã‚­ãƒ£ãƒ—ãƒãƒ£ã•ã‚Œã¦Sentryã«é€ä¿¡ã•ã‚Œã‚‹ã¨ãã€SDKã§ç¾åœ¨ã®ã‚¹ã‚³ãƒ¼ãƒ—å†…ã§ã‚¤ãƒ™ãƒ³ãƒˆãƒ‡ãƒ¼ã‚¿ã«è¿½åŠ æƒ…å ±ã‚’ä»˜ä¸ã™ã‚‹\n\n`init()`Â ãŒå‘¼ã°ã‚Œã‚‹ã¨hubãŒä½œæˆã•ã‚Œã¦ã€ãã®ä¸Šã«ç©ºã®scopeã¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãŒä½œæˆã•ã‚Œã‚‹ã€‚\nscope ã¯ã€Sentryã«ã‚¤ãƒ™ãƒ³ãƒˆé€ä¿¡æ™‚ã« `context` ã¨ `breadcrumbs` ã¨ã„ã£ãŸæƒ…å ±ã‚’è¿½åŠ ã—ã¦é€ä¿¡ã™ã‚‹ã€‚\nè¦ªscopeã‹ã‚‰ç¶™æ‰¿ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’é€ä¿¡ã™ã‚‹ã€‚\n\n### Stacktraceã‚’è¡¨ç¤ºã—ãŸã„\n\n[\\[Go\\]Sentryã«å¯¾å¿œã—ãŸcustom errorã®ä½œã‚Šæ–¹](https://zenn.dev/tomtwinkle/articles/18447cca3232d07c9f12)\n\n## httpã‚µãƒ¼ãƒãƒ¼ã«Sentryã‚’çµ„ã¿è¾¼ã‚€\n\n[net/http | Sentry Documentation](https://docs.sentry.io/platforms/go/guides/http/)\n[Echo | Sentry Documentation](https://docs.sentry.io/platforms/go/guides/echo/)\n[Gin | Sentry Documentation](https://docs.sentry.io/platforms/go/guides/gin/)\n\nå„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ç”¨ã«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã€‚\nmiddlewareã«è¨­å®šã™ã‚‹ã“ã¨ã§ã€handlerã§panicç™ºç”Ÿæ™‚ã«ã‚¤ãƒ™ãƒ³ãƒˆã‚’é€ä¿¡ã§ãã‚‹ã€‚\n\n`net/http` ã®ä¾‹\n\n````go\nimport (\n\t\"fmt\"\n\t\"net/http\"\n\n\t\"github.com/getsentry/sentry-go\"\n\tsentryhttp \"github.com/getsentry/sentry-go/http\"\n)\n\ntype handler struct{}\n\nfunc (h *handler) ServeHTTP(rw http.ResponseWriter, r *http.Request) {\n\tif hub := sentry.GetHubFromContext(r.Context()); hub != nil {\n\t\thub.WithScope(func(scope *sentry.Scope) {\n\t\t\tscope.SetExtra(\"unwantedQuery\", \"someQueryDataMaybe\")\n\t\t\thub.CaptureMessage(\"User provided unwanted query string, but we recovered just fine\")\n\t\t})\n\t}\n\trw.WriteHeader(http.StatusOK)\n}\n\nfunc enhanceSentryEvent(handler http.HandlerFunc) http.HandlerFunc {\n\treturn func(rw http.ResponseWriter, r *http.Request) {\n\t\tif hub := sentry.GetHubFromContext(r.Context()); hub != nil {\n\t\t\thub.Scope().SetTag(\"someRandomTag\", \"maybeYouNeedIt\")\n\t\t}\n\t\thandler(rw, r)\n\t}\n}\n\nfunc main() {\n\n    // To initialize Sentry's handler, you need to initialize Sentry itself beforehand\n    if err := sentry.Init(sentry.ClientOptions{\n    \tDsn: \"https://examplePublicKey@o0.ingest.sentry.io/0\",\n    \tEnableTracing: true,\n    \t// Set TracesSampleRate to 1.0 to capture 100%\n    \t// of transactions for performance monitoring.\n    \t// We recommend adjusting this value in production,\n    \tTracesSampleRate: 1.0,\n    }); err != nil {\n    \tfmt.Printf(\"Sentry initialization failed: %v\\n\", err)\n    }\n    \n    sentryHandler := sentryhttp.New(sentryhttp.Options{\n    \tRepanic: true, // Sentryã«é€ä¿¡ã—ãŸã‚ã¨å†åº¦panicã‚’ç™ºç”Ÿã•ã›ã¦ä¸Šä½éšå±¤ã§ã‚­ãƒ£ãƒƒãƒã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹\n    })\n    \n    http.Handle(\"/\", sentryHandler.Handle(\u0026handler{}))\n    http.HandleFunc(\"/foo\", sentryHandler.HandleFunc(\n    \tenhanceSentryEvent(func(rw http.ResponseWriter, r *http.Request) {\n    \t\tpanic(\"y tho\")\n    \t}),\n    ))\n    \n    fmt.Println(\"Listening and serving HTTP on :3000\")\n    \n    if err := http.ListenAndServe(\":3000\", nil); err != nil {\n    \tpanic(err)\n    }\n}\n````\n\nmiddlewareã§ `sentry.GetHubFromContext(r.Context())` ã‚’å‘¼ã¶ã“ã¨ã§ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚¹ã‚³ãƒ¼ãƒ—ã§hubã®è¨­å®šã‚’ã—ã¦ä»–ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¨æ··ã–ã‚‰ãªã„ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã€‚\n\n`sentryhttp.New` ã®ä¸­ã§ã¯æ¬¡ã®ã‚ˆã†ãªå‡¦ç†ã‚’ã—ã¦ã„ã‚‹\n\n````go\nfunc (h *Handler) handle(handler http.Handler) http.HandlerFunc {\n\treturn func(w http.ResponseWriter, r *http.Request) {\n\t\tctx := r.Context()\n\t\thub := sentry.GetHubFromContext(ctx)\n\t\tif hub == nil {\n\t\t\thub = sentry.CurrentHub().Clone()\n\t\t\tctx = sentry.SetHubOnContext(ctx, hub)\n\t\t}\n\t\toptions := []sentry.SpanOption{\n\t\t\tsentry.OpName(\"http.server\"),\n\t\t\tsentry.ContinueFromRequest(r),\n\t\t\tsentry.TransctionSource(sentry.SourceURL),\n\t\t}\n\t\t// We don't mind getting an existing transaction back so we don't need to\n\t\t// check if it is.\n\t\ttransaction := sentry.StartTransaction(ctx,\n\t\t\tfmt.Sprintf(\"%s %s\", r.Method, r.URL.Path),\n\t\t\toptions...,\n\t\t)\n\t\tdefer transaction.Finish()\n\t\t// TODO(tracing): if the next handler.ServeHTTP panics, store\n\t\t// information on the transaction accordingly (status, tag,\n\t\t// level?, ...).\n\t\tr = r.WithContext(transaction.Context())\n\t\thub.Scope().SetRequest(r)\n\t\tdefer h.recoverWithSentry(hub, r)\n\t\t// TODO(tracing): use custom response writer to intercept\n\t\t// response. Use HTTP status to add tag to transaction; set span\n\t\t// status.\n\t\thandler.ServeHTTP(w, r)\n\t}\n}\n````\n\n* http.Requestã®Contextã‹ã‚‰hubã‚’å–å¾—\n  * ãªã‘ã‚Œã°ç”Ÿæˆã—ã¦Contextã«ã‚»ãƒƒãƒˆ\n* scopeã«http.Requestã‚’SetRequest\n* handlerã§panicãŒç™ºç”Ÿã—ãŸã¨ãã«recoverã™ã‚‹\n  * `Repanic: true` ãªã‚‰å†åº¦panicã‚’ç™ºç”Ÿã•ã›ã‚‹\n\n### åœæ­¢æ™‚ã®å‡¦ç†\n\n[Shutdown and Draining for Echo | Sentry Documentation](https://docs.sentry.io/platforms/go/guides/echo/configuration/draining/)\n\nã‚µãƒ¼ãƒãƒ¼åœæ­¢æ™‚ã« `sentry.Flush` ã‚’å‘¼ã‚“ã§ã€é€ä¿¡é€”ä¸­ã®ã‚¤ãƒ™ãƒ³ãƒˆãŒã‚ã£ãŸã‚‰é€ä¿¡ã•ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚\n\n## http.Request.Headerã‚’Sentryã«é€ä¿¡ã™ã‚‹\n\n`0.15.0` ã§å…¥ã£ãŸå¤‰æ›´ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯headerãŒé€ä¿¡ã•ã‚Œãªã„ã‚ˆã†ã«ãªã£ãŸã€‚\n[https://github.com/getsentry/sentry-go/pull/485](https://github.com/getsentry/sentry-go/pull/485)\nHostã®ã¿ãŒé€ä¿¡ã•ã‚Œã‚‹ã€‚\n\n`sentry.Init` æ™‚ã« `SendDefaultPII: true` ã‚’ã¤ã‘ã‚‹ã“ã¨ã§ã€headerã‚‚é€ä¿¡ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚\n\n````\n\tif err := sentry.Init(sentry.ClientOptions{\n\t\tDsn:            conf.Sentry.Dsn,\n\t\tSendDefaultPII: true,\n\t}); err != nil {\n\t\tlog.Fatalf(\"Sentry initialization failed: %v\\n\", err)\n\t}\n````\n\n`0.16.0` ã§ã€ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãªæƒ…å ±ä»¥å¤–ã®ãƒ˜ãƒƒãƒ€ãƒ¼ã¯é€ä¿¡ã•ã‚Œã‚‹ã‚ˆã†ä¿®æ­£ã—ãŸ(å¤‰æ›´è€…:ç§)\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Go"]},"/note/Go-checksum%E3%81%AE%E7%85%A7%E5%90%88%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6":{"title":"Go checksumã®ç…§åˆã«ã¤ã„ã¦","content":"\n[Go](note/Go.md) ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ [JFrog Artifactory](note/JFrog%20Artifactory.md) ã«ã‚¢ãƒƒãƒ—ã—ã¦å–å¾—ã™ã‚‹é‹ç”¨ã‚’ã—ã¦ã„ã‚‹ã®ã ãŒã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’Gitãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰å–å¾—ã—ãŸå ´åˆã¨JFrogã‹ã‚‰å–å¾—ã—ãŸå ´åˆã§ãƒãƒƒã‚·ãƒ¥å€¤ãŒç•°ãªã‚‹äº‹è±¡ãŒã‚ã‚Šã€\ngo.sumã€checksumã®ç†è§£ãŒæµ…ã„ã“ã¨ã«æ°—ã¥ã„ãŸã®ã§èª¿ã¹ãŸã€‚\n\n## Checksum Database\n\nhttps://go.dev/blog/module-mirror-launch\n\nGo modulesã§å°å…¥ã•ã‚ŒãŸ go.sum ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ã€å„ä¾å­˜é–¢ä¿‚ãŒæœ€åˆã«ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸã¨ãã®ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¨go.modãƒ•ã‚¡ã‚¤ãƒ«ã®SHA-256ãƒãƒƒã‚·ãƒ¥ã®ãƒªã‚¹ãƒˆãŒå«ã¾ã‚Œã¦ã„ã‚‹ã€‚\nã“ã®ãƒãƒƒã‚·ãƒ¥å€¤ã‚’ä½¿ç”¨ã—ã¦ã€åŒã˜ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ç•°ãªã‚‹ã‚³ãƒ¼ãƒ‰ãŒæä¾›ã•ã‚ŒãŸå ´åˆã«æ¤œå‡ºã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\n\nã§ã¯åˆå›ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ™‚ã«ã©ã“ã¨ç…§åˆã—ãŸã‚‰ã‚ˆã„ã ã‚ã†ã‹ã€‚\nä¾å­˜é–¢ä¿‚ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’è¿½åŠ ã™ã‚‹éš›(ã¾ãŸã¯æ—¢å­˜ã®ä¾å­˜é–¢ä¿‚ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹éš›)ã€goã‚³ãƒãƒ³ãƒ‰ã¯ã‚³ãƒ¼ãƒ‰ã‚’å–å¾—ã—ã€go.sumã«è¡Œã‚’è¿½åŠ ã™ã‚‹ã€‚\nå•é¡Œã¯ã€ã“ã‚Œã‚‰ã®è¡ŒãŒæ­£ã—ã„ã‹ã©ã†ã‹ãŒç…§åˆã•ã‚Œã¦ã„ãªã„ã“ã¨ã§ã€ã“ã“ã§æ‚ªæ„ã®ã‚ã‚‹ã‚³ãƒ¼ãƒ‰ã«æ”¹ã–ã‚“ã•ã‚Œã¦ã„ã¦ã‚‚æ°—ã¥ãã“ã¨ãŒã§ããªã„ã€‚\n\nãã“ã§Goã¯ã€checksum databaseã¨å‘¼ã°ã‚Œã‚‹ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªgo.sumã‚’ã€sum.golang.org ã§æä¾›ã—ã¦ã„ã‚‹ã€‚\ngoã‚³ãƒãƒ³ãƒ‰ãŒæ–°ã—ã„ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¨ãã€ãã®ã‚³ãƒ¼ãƒ‰ã®ãƒãƒƒã‚·ãƒ¥ã‚’ã“ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã¨ç…§åˆã—ã€ãƒãƒƒã‚·ãƒ¥ãŒä¸€è‡´ã™ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã€‚\nã“ã‚Œã«ã‚ˆã‚Šã€ç‰¹å®šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚³ãƒ¼ãƒ‰ã‚’ã¿ã‚“ãªãŒåŒã˜ã‚‚ã®ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã“ã¨ãŒä¿è¨¼ã•ã‚Œã‚‹ã€‚\n\n## Privateãƒªãƒã‚¸ãƒˆãƒª\n\nhttps://go.dev/doc/go1.13\n\nPrivateãƒªãƒã‚¸ãƒˆãƒªã¯ã€Checksum databaseã«è¨˜éŒ²ã•ã‚Œãªã„ã€‚\nãã®ãŸã‚æ™®é€šã« `go get` ã™ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã€‚\n`GOPRIVATE` ã‚„ `GONOSUMDB` ã‚’æŒ‡å®šã—ã¦æ¤œè¨¼å¯¾è±¡å¤–ã¨ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\nå‚è€ƒ [Go ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã«å¯¾ã—ã¦sshã‚’ä½¿ã£ã¦go getã™ã‚‹](note/Go%20ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã«å¯¾ã—ã¦sshã‚’ä½¿ã£ã¦go%20getã™ã‚‹.md)\n\n## checksumã‚’ç®—å‡ºã™ã‚‹\n\nç®—å‡ºã—ã¦ãã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ã¿ã‚‹\n\nhttps://github.com/vikyd/go-checksum\n\n````shell\n$ go-checksum ./ github.com/ikorihn/my-module@v1.0.0\ndirectory: ./\n{\n        \"HashSynthesized\": \"abcdef11111111111111111\",\n        \"HashSynthesizedBase64\": \"xlsleituieutaiueagab=\",\n        \"GoCheckSum\": \"h1:xlsleituieutaiueagab=\"\n}\n\n````\n\n## ã¾ã¨ã‚\n\nå†’é ­ã®JFrogã®ãƒãƒƒã‚·ãƒ¥å€¤ãŒç•°ãªã‚‹ä»¶ã¯ã€jfrog cliã«ã‚ˆã£ã¦ `.jfrog` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒä½œæˆã•ã‚ŒãŸã“ã¨ãŒåŸå› ã ã£ãŸã€‚\nã“ã‚Œã‚’ä½œæˆã•ã‚Œãªã„ã‚ˆã†ã«ã—ã¦checksumã‚’ç®—å‡ºã—ãŸã¨ã“ã‚ã€JFrog Artifactory ã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹å‰å¾Œã§ãƒãƒƒã‚·ãƒ¥å€¤ãŒå¤‰ã‚ã‚‰ãªã„ã“ã¨ãŒç¢ºèªã§ããŸã€‚\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/07/10","Go"]},"/note/Go-circuit-breaker%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B":{"title":"Go circuit breakerãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å®Ÿè£…ã™ã‚‹","content":"\n\\#Go\n\nhttps://learn.microsoft.com/en-us/azure/architecture/framework/resiliency/reliability-patterns\n\n[Make resilient Go net/http servers using timeouts, deadlines and context cancellation Â· Ilija Eftimov ğŸ‘¨â€ğŸš€](https://ieftimov.com/posts/make-resilient-golang-net-http-servers-using-timeouts-deadlines-context-cancellation/)\n\nãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ã«ãŠã„ã¦ã‚µãƒ¼ãƒ“ã‚¹ãŒãƒ€ã‚¦ãƒ³ã—ã¦ã„ã‚‹ã¨ãã«ä¸€å®šæ™‚é–“ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¡Œã‚ãªã„ã‚ˆã†ã«ã™ã‚‹ã“ã¨ã§å›å¾©ã•ã›ã‚„ã™ãã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³ã€‚\né›»æ°—å›è·¯ã®ã‚µãƒ¼ã‚­ãƒƒãƒˆãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼ã‚’ã‚ªãƒ¼ãƒ—ãƒ³ã™ã‚‹ã“ã¨ã§ã‚·ãƒ§ãƒ¼ãƒˆã™ã‚‹ã®ã‚’é˜²ãã®ã«ä¼¼ã¦ã„ã‚‹\n\n## ãƒ©ã‚¤ãƒ–ãƒ©ãƒª\n\nmetricsã‚‚ã¨ã‚Œã‚‹\nhttps://github.com/cep21/circuit/\nhttps://github.com/afex/hystrix-go å¤ã„\n\nbulk headãªã©circuit breakerä»¥å¤–ã®æ©Ÿèƒ½ã‚‚ã‚ã‚‹\nhttps://github.com/slok/goresilience metricsã¨ã‚Œã‚‹\nhttps://github.com/eapache/go-resiliency\n\ncircuit breakerã®ã¿\nhttps://github.com/mercari/go-circuitbreaker\nhttps://github.com/sony/gobreaker\nhttps://github.com/streadway/handy/tree/master/breaker\nhttps://github.com/rubyist/circuitbreaker\n\n[Hystrix dashboard](note/Hystrix%20dashboard.md) ã‚‚ä½¿ã£ã¦ã¿ã‚‹ã¨ã€ã‚µãƒ¼ã‚­ãƒƒãƒˆã®çŠ¶æ…‹ã‚’è¦‹ã‚Œã¦ãŠã‚‚ã—ã‚ã„\n\n### cep21/circuit\n\n* Hystrixãƒ©ã‚¤ã‚¯ãªã‚µãƒ¼ã‚­ãƒƒãƒˆãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼ã‚’æä¾›ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒª\n* è¨­å®šå€¤ã¯ https://github.com/Netflix/Hystrix/wiki/Configuration ã‚’å‚è€ƒã«ã§ãã‚‹\n* ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å–ã‚Œã‚‹\n* Prometheus ã§åé›†ã§ãã‚‹\n* ãƒ¡ãƒ¢ãƒªã‚¢ãƒ­ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚³ã‚¹ãƒˆãŒä½ã„ã€ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ãŒã„ã„\n* [Hystrix dashboard](note/Hystrix%20dashboard.md) ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹\n\nPrometheus ã§åé›†ã™ã‚‹ã«ã¯ã“ã¡ã‚‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã†\nhttps://github.com/jiacai2050/prometrics\nã“ã‚Œã«ã‚ˆã£ã¦ã€ã‚µãƒ¼ã‚­ãƒƒãƒˆã®ã‚ªãƒ¼ãƒ—ãƒ³å›æ•°ã€å®Ÿè¡Œå›æ•°ãªã©ãŒã‚ã‹ã‚‹\n\n[Goã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’Prometheusã§åé›†ã™ã‚‹](note/Goã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’Prometheusã§åé›†ã™ã‚‹.md)\n\nå®Ÿè£…ä¾‹\n\n````go\npackage main\n\nimport (\n\t\"context\"\n\t\"errors\"\n\t\"fmt\"\n\t\"math/rand\"\n\t\"net/http\"\n\t\"time\"\n\n\t\"github.com/cep21/circuit/closers/hystrix\"\n\t\"github.com/cep21/circuit/v3\"\n\t\"github.com/jiacai2050/prometrics\"\n\t\"github.com/prometheus/client_golang/prometheus\"\n\t\"github.com/prometheus/client_golang/prometheus/promhttp\"\n)\n\ntype result struct {\n\terr error\n\tmsg string\n}\n\nfunc newCircuitBreaker() *circuit.Circuit {\n\t// circuit breakerã®è¨­å®š\n\thystrixConf := hystrix.Factory{\n\t\tConfigureOpener: hystrix.ConfigureOpener{\n\t\t\t// ã‚µãƒ¼ã‚­ãƒƒãƒˆã‚’ã‚ªãƒ¼ãƒ—ãƒ³ã™ã‚‹ã‚¨ãƒ©ãƒ¼ç‡\n\t\t\tErrorThresholdPercentage: 50,\n\t\t\t// 10å›ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã¾ã§ã¯ã‚µãƒ¼ã‚­ãƒƒãƒˆã‚’ã‚ªãƒ¼ãƒ—ãƒ³ã—ãªã„\n\t\t\tRequestVolumeThreshold: 10,\n\t\t},\n\t\tConfigureCloser: hystrix.ConfigureCloser{\n\t\t\t// ã‚µãƒ¼ã‚­ãƒƒãƒˆãŒã‚ªãƒ¼ãƒ—ãƒ³ã«ãªã£ã¦ã‹ã‚‰ãƒãƒ¼ãƒ•ã‚ªãƒ¼ãƒ—ãƒ³ã«ãªã‚‹ã¾ã§ã®æ™‚é–“\n\t\t\tSleepWindow: 2000 * time.Millisecond,\n\t\t},\n\t}\n\n\t// Prometheusã§åé›†ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹\n\tprom := prometrics.GetFactory(prometheus.DefaultRegisterer)\n\n\th := circuit.Manager{\n\t\tDefaultCircuitProperties: []circuit.CommandPropertiesConstructor{\n\t\t\thystrixConf.Configure,\n\t\t\tprom.CommandProperties,\n\t\t},\n\t}\n\t// This circuit will inherit the configuration from the example\n\tc := h.MustCreateCircuit(\"hystrix-circuit\")\n\tfmt.Println(\"This is a hystrix configured circuit\", c.Name())\n\n\treturn c\n}\n\nfunc main() {\n\tc := newCircuitBreaker()\n\n\tmux := http.NewServeMux()\n\tmux.Handle(\"/metrics\", promhttp.HandlerFor(prometheus.DefaultGatherer, promhttp.HandlerOpts{}))\n\n\tgo func() {\n\t\thttp.ListenAndServe(\":8080\", mux)\n\t}()\n\n\tresults := make(chan result)\n\n\t// Run a infinite loop executing using our runner.\n\tgo func() {\n\t\tfor {\n\t\t\ttime.Sleep(200 * time.Millisecond)\n\n\t\t\t// Execute concurrently.\n\t\t\tgo func() {\n\t\t\t\t// Execute our call to the service.\n\t\t\t\tvar msg string\n\n\t\t\t\t// Call the circuit\n\t\t\t\terr := c.Execute(context.Background(), func(ctx context.Context) error {\n\t\t\t\t\tnow := time.Now()\n\n\t\t\t\t\t// If minute is mod 3 return error directly\n\t\t\t\t\tif now.Second()%10 == 0 {\n\t\t\t\t\t\treturn fmt.Errorf(\"huge system error\")\n\t\t\t\t\t}\n\n\t\t\t\t\tvar err error\n\t\t\t\t\tswitch time.Now().UnixMilli() % 10 {\n\t\t\t\t\tcase 0:\n\t\t\t\t\t\tmsg = \"ok\"\n\t\t\t\t\tcase 2, 9:\n\t\t\t\t\t\ttime.Sleep(750 * time.Millisecond)\n\t\t\t\t\t\terr = fmt.Errorf(\"a error\")\n\t\t\t\t\tcase 7:\n\t\t\t\t\t\ttime.Sleep(5 * time.Second)\n\t\t\t\t\t\tmsg = \"ok\"\n\t\t\t\t\tdefault:\n\t\t\t\t\t\ttime.Sleep(20 * time.Millisecond)\n\t\t\t\t\t\tif rand.Intn(1000)%2 == 0 {\n\t\t\t\t\t\t\tmsg = \"ok\"\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\terr = fmt.Errorf(\"another error\")\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn err\n\t\t\t\t}, func(ctx context.Context, err error) error {\n\t\t\t\t\tvar ce circuit.Error\n\t\t\t\t\tif errors.As(err, \u0026ce) {\n\t\t\t\t\t\tfmt.Println(\"circuit is open\")\n\t\t\t\t\t\treturn nil\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn err\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\t// Send the result to our receiver outside this infinite loop.\n\t\t\t\tresults \u003c- result{\n\t\t\t\t\terr: err,\n\t\t\t\t\tmsg: msg,\n\t\t\t\t}\n\t\t\t}()\n\n\t\t}\n\t}()\n\n\t// Process the received executions.\n\tfor res := range results {\n\t\tif res.err != nil {\n\t\t\tfmt.Printf(\"[!] fallback because err received: %s\\n\", res.err)\n\t\t} else {\n\t\t\tfmt.Printf(\"[*] all ok: %s\\n\", res.msg)\n\t\t}\n\t}\n\n}\n````\n\n````shell\ngo run main.go\n````\n\n`http://localhost:8080/metrics` ã‚’é–‹ãã¨go_gcãªã©æ¨™æº–ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã«åŠ ãˆã¦circuitã®çŠ¶æ…‹ãŒå–å¾—ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹\n\n````\n# HELP circuit_failure_duration_seconds Duration of failed func run\n# TYPE circuit_failure_duration_seconds histogram\ncircuit_failure_duration_seconds_bucket{func=\"fallback\",name=\"hystrix-circuit\",le=\"0.005\"} 2\ncircuit_failure_duration_seconds_bucket{func=\"fallback\",name=\"hystrix-circuit\",le=\"0.01\"} 2\ncircuit_failure_duration_seconds_bucket{func=\"fallback\",name=\"hystrix-circuit\",le=\"0.025\"} 2\ncircuit_failure_duration_seconds_bucket{func=\"fallback\",name=\"hystrix-circuit\",le=\"0.05\"} 2\ncircuit_failure_duration_seconds_bucket{func=\"fallback\",name=\"hystrix-circuit\",le=\"0.1\"} 2\ncircuit_failure_duration_seconds_bucket{func=\"fallback\",name=\"hystrix-circuit\",le=\"0.25\"} 2\ncircuit_failure_duration_seconds_bucket{func=\"fallback\",name=\"hystrix-circuit\",le=\"0.5\"} 2\ncircuit_failure_duration_seconds_bucket{func=\"fallback\",name=\"hystrix-circuit\",le=\"1\"} 2\ncircuit_failure_duration_seconds_bucket{func=\"fallback\",name=\"hystrix-circuit\",le=\"2.5\"} 2\ncircuit_failure_duration_seconds_bucket{func=\"fallback\",name=\"hystrix-circuit\",le=\"5\"} 2\ncircuit_failure_duration_seconds_bucket{func=\"fallback\",name=\"hystrix-circuit\",le=\"10\"} 2\ncircuit_failure_duration_seconds_bucket{func=\"fallback\",name=\"hystrix-circuit\",le=\"+Inf\"} 2\ncircuit_failure_duration_seconds_sum{func=\"fallback\",name=\"hystrix-circuit\"} 1.6e-05\ncircuit_failure_duration_seconds_count{func=\"fallback\",name=\"hystrix-circuit\"} 2\ncircuit_failure_duration_seconds_bucket{func=\"run\",name=\"hystrix-circuit\",le=\"0.005\"} 2\ncircuit_failure_duration_seconds_bucket{func=\"run\",name=\"hystrix-circuit\",le=\"0.01\"} 2\ncircuit_failure_duration_seconds_bucket{func=\"run\",name=\"hystrix-circuit\",le=\"0.025\"} 2\ncircuit_failure_duration_seconds_bucket{func=\"run\",name=\"hystrix-circuit\",le=\"0.05\"} 2\ncircuit_failure_duration_seconds_bucket{func=\"run\",name=\"hystrix-circuit\",le=\"0.1\"} 2\ncircuit_failure_duration_seconds_bucket{func=\"run\",name=\"hystrix-circuit\",le=\"0.25\"} 2\ncircuit_failure_duration_seconds_bucket{func=\"run\",name=\"hystrix-circuit\",le=\"0.5\"} 2\ncircuit_failure_duration_seconds_bucket{func=\"run\",name=\"hystrix-circuit\",le=\"1\"} 2\ncircuit_failure_duration_seconds_bucket{func=\"run\",name=\"hystrix-circuit\",le=\"2.5\"} 2\ncircuit_failure_duration_seconds_bucket{func=\"run\",name=\"hystrix-circuit\",le=\"5\"} 2\ncircuit_failure_duration_seconds_bucket{func=\"run\",name=\"hystrix-circuit\",le=\"10\"} 2\ncircuit_failure_duration_seconds_bucket{func=\"run\",name=\"hystrix-circuit\",le=\"+Inf\"} 2\ncircuit_failure_duration_seconds_sum{func=\"run\",name=\"hystrix-circuit\"} 0.000570084\ncircuit_failure_duration_seconds_count{func=\"run\",name=\"hystrix-circuit\"} 2\n````\n\n### afex/hystrix-go\n\nHystrix ã¨åå‰ã«å…¥ã£ã¦ã„ã‚‹é€šã‚Šã€Javaã®Hystrixã¨åŒã˜ã‚ˆã†ã«ä½¿ç”¨ã§ãã‚‹\ngoroutineã§å®Ÿè¡Œã•ã‚Œã‚‹\nãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’å–ã‚‹ä»•çµ„ã¿ã¯çµ„ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„\næœ€çµ‚ã‚³ãƒŸãƒƒãƒˆã¯2018å¹´\n\n````go\noutput := make(chan bool, 1)\nerrors := hystrix.Go(\"my_command\", func() error {\n\t// talk to other services\n\toutput \u003c- true\n\treturn nil\n}, nil)\n\nselect {\ncase out := \u003c-output:\n\t// success\ncase err := \u003c-errors:\n\t// failure\n}\n````\n\n### slok/goresilience\n\nã‚µãƒ¼ã‚­ãƒƒãƒˆãƒ–ãƒ¬ãƒ¼ã‚«ãƒ¼ã«é™ã‚‰ãšã€resilliencyã‚’é«˜ã‚ã‚‹ãŸã‚ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ã„ãã¤ã‹æä¾›ã—ã¦ã„ã‚‹\nHystrixãƒ©ã‚¤ã‚¯\nPrometheusã§åé›†ã§ãã‚‹\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Go"]},"/note/Go-cognito%E3%81%AEjwt%E3%82%92%E6%A4%9C%E8%A8%BC%E3%81%99%E3%82%8B":{"title":"Go cognitoã®jwtã‚’æ¤œè¨¼ã™ã‚‹","content":"\n\\#Go \n\nCognitoã®JWTã®æ¤œè¨¼ã¯å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®é€šã‚Šã«è¡Œã†\n[JSON web ãƒˆãƒ¼ã‚¯ãƒ³ã®æ¤œè¨¼ - Amazon Cognito](https://docs.aws.amazon.com/ja_jp/cognito/latest/developerguide/amazon-cognito-user-pools-using-tokens-verifying-a-jwt.html)\n\nä»Šå›ã¯ https://github.com/lestrrat-go/jwx ã‚’ä½¿ã†\n\n````go\nimport (\n\t\"context\"\n\t\"fmt\"\n\n\t\"github.com/lestrrat-go/jwx/jwk\"\n\t\"github.com/lestrrat-go/jwx/jwt\"\n)\n\nfunc ValidateJwt(tokenString string) error {\n\n\tfmt.Printf(\"%v\\n\", tokenString)\n\n    // jwkã‚’å–å¾—ã™ã‚‹\n\tkeySet, err := jwk.Fetch(context.Background(), fmt.Sprintf(\"https://cognito-idp.%s.amazonaws.com/%s/.well-known/jwks.json\", \"region\", \"userId\"))\n\tif err != nil {\n\t\treturn err\n\t}\n\n    // æ¤œè¨¼\n\ttoken, err := jwt.Parse([]byte(tokenString), jwt.WithKeySet(keySet), jwt.WithValidate(true))\n\tif err != nil {\n\t\tfmt.Printf(\"%v\\n\", err)\n\t\treturn err\n\t}\n\n    // aud ã®å€¤ãŒcliend_idã¨ä¸€è‡´ã™ã‚‹ã‹æ¤œè¨¼\n\tif token.Audience()[0] != \"my_client_id\" {\n\t\treturn ErrClientId\n\t}\n    // iss ã®å€¤ãŒuserpool_idã¨ä¸€è‡´ã™ã‚‹ã‹æ¤œè¨¼\n\tif token.Issuer() != \"userpoolId\" {\n\t\treturn ErrClientId\n\t}\n    // token_use ã®å€¤ãŒaccessã‹æ¤œè¨¼\n\tif tokenUse, ok := token.Get(\"token_use\"); ok {\n\t\tif tokenUseStr, ok := tokenUse.(string); ok \u0026\u0026 tokenUseStr != \"access\" {\n\t\t\treturn ErrTokenUse\n\t\t}\n\t}\n\treturn nil\n\n\n\treturn nil\n}\n\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":[]},"/note/Go-echo%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%AE%E3%83%86%E3%82%B9%E3%83%88":{"title":"Go echoã‚µãƒ¼ãƒãƒ¼ã®ãƒ†ã‚¹ãƒˆ","content":"\n\\#Go\n\nechoã®Handlerã®ãƒ†ã‚¹ãƒˆã¯åŸºæœ¬å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®é€šã‚Šã«ã‚„ã‚Œã°ã§ãã‚‹\nhttps://echo.labstack.com/guide/testing/\n\n## ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã¨ãƒ†ã‚­ã‚¹ãƒˆã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’åŒæ™‚ã«é€ã‚‹\n\n\u003chttps://stackoverflow.com/questions/7223616/http-post-file-multipart\u003e\n\n````go\nimport (\n\t\"bytes\"\n\t\"image\"\n\t\"image/color\"\n\t\"image/png\"\n\t\"mime/multipart\"\n\t\"net/http\"\n\t\"net/http/httptest\"\n\t\"net/textproto\"\n\t\"testing\"\n\n\t\"github.com/labstack/echo/v4\"\n)\n\nfunc TestUpload(t *testing.T) {\n\t// Setup\n\te := echo.New()\n\n\tbuf := new(bytes.Buffer)\n\twriter := multipart.NewWriter(buf)\n\n\tmh := make(textproto.MIMEHeader)\n\tmh.Set(\"Content-Type\", \"text/plain\")\n\n\tfw, err := writer.CreateFormField(\"fileName\")\n\tif err != nil {\n\t\tt.Error(err)\n\t}\n\tfw.Write([]byte(\"my-name\"))\n\ttw, err := writer.CreateFormField(\"timestamp\")\n\tif err != nil {\n\t\tt.Error(err)\n\t}\n\ttw.Write([]byte(\"20220102150607\"))\n\n\t// create the form data\n\tpart, err := writer.CreateFormFile(\"file\", \"someimg.png\")\n\tif err != nil {\n\t\tt.Error(err)\n\t}\n\t// https://yourbasic.org/golang/create-image/\n\timg := createImage()\n\terr = png.Encode(part, img)\n\tif err != nil {\n\t\tt.Error(err)\n\t}\n\n\t// å¿˜ã‚Œã‚‹ã¨çµ‚äº†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒæ›¸ã‹ã‚Œãªã„\n\twriter.Close()\n\n\treq := httptest.NewRequest(http.MethodPost, \"/\", buf)\n\treq.Header.Set(echo.HeaderContentType, writer.FormDataContentType())\n\n\trec := httptest.NewRecorder()\n\tc := e.NewContext(req, rec)\n\tc.SetPath(\"/upload\")\n\n\th := \u0026handler{}\n\n\terr = h.Upload(c)\n\tif err != nil {\n\t\tt.Errorf(\"Should not be error: %v\", err)\n\t}\n\n\tif rec.Code != http.StatusOK {\n\t\tt.Errorf(\"Not ok: %v\", rec.Code)\n\t}\n\tif rec.Body.String() != `{\"result\":\"success\"}` {\n\t\tt.Errorf(\"Not match: %v\", rec.Body.String())\n\t}\n\n}\n\nfunc createImage() *image.RGBA {\n\twidth := 200\n\theight := 100\n\n\tupLeft := image.Point{0, 0}\n\tlowRight := image.Point{width, height}\n\n\timg := image.NewRGBA(image.Rectangle{upLeft, lowRight})\n\n\t// Colors are defined by Red, Green, Blue, Alpha uint8 values.\n\tcyan := color.RGBA{100, 200, 200, 0xff}\n\n\t// Set color for each pixel.\n\tfor x := 0; x \u003c width; x++ {\n\t\tfor y := 0; y \u003c height; y++ {\n\t\t\tswitch {\n\t\t\tcase x \u003c width/2 \u0026\u0026 y \u003c height/2: // upper left quadrant\n\t\t\t\timg.Set(x, y, cyan)\n\t\t\tcase x \u003e= width/2 \u0026\u0026 y \u003e= height/2: // lower right quadrant\n\t\t\t\timg.Set(x, y, color.White)\n\t\t\tdefault:\n\t\t\t\t// Use zero value.\n\t\t\t}\n\t\t}\n\t}\n\n\treturn img\n}\n\n\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Go"]},"/note/Go-gomock-%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E3%83%86%E3%82%B9%E3%83%88":{"title":"Go gomock ã‚’ä½¿ã£ãŸãƒ†ã‚¹ãƒˆ","content":"\n\\#Go\n\nhttps://github.com/golang/mock\n\nGoã®interfaceã‹ã‚‰mockã‚’ç”Ÿæˆã™ã‚‹ãƒ„ãƒ¼ãƒ« + ç”Ÿæˆã—ãŸã‚³ãƒ¼ãƒ‰ã‚’ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰å†…ã§åˆ©ç”¨ã™ã‚‹ãŸã‚ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒª\n\n`s3api.go`\n\n````go\ntype S3Api interface {\n\tDeleteObject(ctx context.Context, params *s3.DeleteObjectInput, optFns ...func(*s3.Options)) (*s3.DeleteObjectOutput, error)\n\tGetObject(ctx context.Context, params *s3.GetObjectInput, optFns ...func(*s3.Options)) (*s3.GetObjectOutput, error)\n\tListObjectsV2(ctx context.Context, params *s3.ListObjectsV2Input, optFns ...func(*s3.Options)) (*s3.ListObjectsV2Output, error)\n}\n````\n\n````shell\n$ go install github.com/golang/mock/mockgen@latest\n$ mockgen -source=repository/s3api.go -destination=repository/mock/s3api.go\n````\n\nã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«å†…ã«go:generateãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ–ã‚’æ›¸ãã“ã¨ã§ã€ `go generate` ã‚³ãƒãƒ³ãƒ‰ã§ç”Ÿæˆã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹\n\n````go\n//go:generate mockgen -source=$GOFILE -destination=../$GOPACKAGE/mock/$GOFILE\n````\n\n### ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰å†…ã§ã®ä½¿ã„æ–¹\n\n````go\nimport (\n\t\"context\"\n\t\"testing\"\n\n\tmock_repository \"my/repository/mock\"\n\t\"github.com/golang/mock/gomock\"\n\t\"github.com/stretchr/testify/assert\"\n)\n\nfunc TestService(t *testing.T) {\n\t// gomock Controllerã‚’åˆæœŸåŒ–\n\tctrl := gomock.NewController(t)\n\tdefer ctrl.Finish()\n\n\t// ãƒ¢ãƒƒã‚¯ãƒ¡ã‚½ãƒƒãƒ‰ã®æŒ™å‹•ã‚’æŒ‡å®š\n\tctx := context.Background()\n\trepoMock := mock_repository.NewMockS3Api(ctrl)\n\trepoMock.EXPECT().GetObject(ctx, \u0026s3.GetObjectInput{}. nil).Return(\u0026s3.GetObjectOutput{}, nil)\n\n\t// ãƒ¢ãƒƒã‚¯ã‚’æ³¨å…¥\n\tsrv := Service{\n\t\trepo: repoMock,\n\t}\n\n\t// ãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œ\n\tok, err := srv.IsExistEntity(1)\n\tif err != nil {\n\t\tt.Errorf(\"äºˆæœŸã›ã¬ã‚¨ãƒ©ãƒ¼: %v\", err)\n\t} else if !ok {\n\t\tt.Errorf(\"æœŸå¾…: %v, å®Ÿéš›: %v\", true, ok)\n\t}\n}\n````\n\n## gomockhandler\n\n[Goã§å¤§é‡ã®ãƒ¢ãƒƒã‚¯ã‚’ã‚ˆã‚Šçµ±ä¸€çš„ã«ç®¡ç†ã—ã€ã‚‚ã£ã¨é«˜é€Ÿã«ç”Ÿæˆã—ãŸã„ï¼ãã†ã ï¼ï¼gomockhandlerã‚’ä½¿ãŠã†ï¼ï¼ | ãƒ¡ãƒ«ã‚«ãƒªã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°](https://engineering.mercari.com/blog/entry/20210406-gomockhandler/)\n\n````shell\ngo install github.com/sanposhiho/gomockhandler@latest\n````\n\n## testifyã€mockery\n\nhttps://github.com/stretchr/testify ã«ã‚‚mockãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒå­˜åœ¨ã™ã‚‹ã€‚\n\nmockã®ä½œæˆã¯ [mockery](https://github.com/vektra/mockery) ã‚’ä½¿ã†ã€‚\ngomockã«æ¯”ã¹ãŸå„ªä½æ€§ã‚’æ›¸ã„ã¦ãã‚Œã¦ã„ã‚‹ãŒæ­£ç›´å¥½ã¿ã§ã£ã¦æ„Ÿã˜ã€‚testifyã«ã©ã£ã·ã‚Šæµ¸ã‹ã‚‹ãªã‚‰ã“ã¡ã‚‰ã§ã„ã„ã¨æ€ã†\nhttps://vektra.github.io/mockery/#why-use-mockery-over-gomock\n\n### mockä½œæˆ\n\nä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã€diré…ä¸‹ã®ã™ã¹ã¦ã®interfaceã«å¯¾ã—ã¦mockãŒä½œæˆã•ã‚Œã‚‹ã€‚\n`--inpackage` ã‚’ã¤ã‘ã‚‹ã“ã¨ã§interfaceã¨åŒã˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã« `mock_\u003cinterfaceå\u003e.go` ã§ä½œæˆã•ã‚Œã‚‹ã€‚\n\n````\n$ mockery --all --dir=src --inpackage\n````\n\n## å‚è€ƒ\n\n* [gomockã‚’å®Œå…¨ã«ç†è§£ã™ã‚‹](https://zenn.dev/sanpo_shiho/articles/01da627ead98f5)\n* [go generateã§ãƒ¢ãƒƒã‚¯ã‚’ç”Ÿæˆã™ã‚‹ - Carpe Diem](https://christina04.hatenablog.com/entry/use-go-generate-when-generating-mock)\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Go"]},"/note/Go-http.Client%E3%81%AEConnection%E8%A8%AD%E5%AE%9A%E5%80%A4%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E8%AA%BF%E6%9F%BB":{"title":"Go http.Clientã®Connectionè¨­å®šå€¤ã«ã¤ã„ã¦èª¿æŸ»","content":"\n\\#Go\n\n[Goè¨€èª: http.Client ã®ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ç®¡ç† (HTTP/1.x) - Qiita](https://qiita.com/nozmiz/items/b4e8a48c75bf01ccc9f0)\n[\\[Go\\] å‰æ–¹äº’æ›æ€§ã‚’ä¿ã¡ãªãŒã‚‰http.DefaultTransportã‹ã‚‰ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã—ãŸhttp.Transportã‚’ã¤ãã‚‹ - My External Storage](https://budougumi0617.github.io/2021/09/13/how_to_copy_default_transport/)\n\n`http.Client` ã® `Transport` ã«ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ¼ãƒ«é–¢é€£ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒè¨­å®šã§ãã‚‹ã€‚\n\n* `MaxIdleConns` Transport å…¨ä½“ã§ä¿æŒã§ãã‚‹ç©ºãã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ç·æ•°ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯100\n* `MaxIdleConnsPerHost` æ¥ç¶šå…ˆã”ã¨ã«ä¿æŒã§ãã‚‹ç©ºãã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ç·æ•°ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯2\n* `MaxConnsPerHost` æ¥ç¶šå…ˆã”ã¨ã®ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ç·æ•°(ä½¿ç”¨ä¸­ãƒ»ç©ºããƒ»æ¥ç¶šä¸­ã®ã‚‚ã®ã‚’å«ã‚€)ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯0(ç„¡åˆ¶é™)\n* `IdleConnTimeout` ç©ºãã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ã‚’ä¿æŒã§ãã‚‹æœ€é•·æ™‚é–“ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯90ç§’\n\n## èª¿æŸ»ç”¨ã‚³ãƒ¼ãƒ‰\n\n````go\npackage main\n\nimport (\n\t\"crypto/tls\"\n\t\"fmt\"\n\t\"io\"\n\t\"log\"\n\t\"net/http\"\n\t\"net/http/httptrace\"\n\t\"sync\t\"time\"\n)\n\nvar urls = []string{\n\t\"http://httpbin.org/delay/1\",\n\t\"http://httpbin.org/delay/2\",\n\t\"http://httpbin.org/delay/3\",\n\t\"http://example.com\",\n}\n\nvar client *http.Client\n\nfunc main() {\n\ttr := http.DefaultTransport.(*http.Transport).Clone()\n    // ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ãƒ—ãƒ¼ãƒ«é–¢é€£ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è¨­å®šã™ã‚‹\n\t// tr.MaxIdleConns = 10\n\t// tr.MaxIdleConnsPerHost = 2\n\t// tr.MaxConnsPerHost = 10\n\t// tr.IdleConnTimeout = 10 * time.Second\n\tclient = \u0026http.Client{\n\t\tTransport: tr,\n\t}\n\n\tfmt.Printf(\"--- send start ---- MaxConnsPerHost: %v, MaxIdleConns: %v, MaxIdleConnsPerHost: %v, IdleConnTimeout: %v\\n\",\n\t\ttr.MaxConnsPerHost,\n\t\ttr.MaxIdleConns,\n\t\ttr.MaxIdleConnsPerHost,\n\t\ttr.IdleConnTimeout,\n\t)\n\tstart := time.Now()\n\tasyncSend()\n\tfmt.Println(\"--- sleep 3s...\")\n\ttime.Sleep(3 * time.Second)\n\tasyncSend()\n\n\tfmt.Printf(\"elapsed: %v\\n\", time.Since(start))\n\n}\n\nfunc asyncSend() {\n\tvar wg sync.WaitGroup\n\tfor _, url := range urls {\n\t\turl := url\n\n\t\twg.Add(1)\n\t\tgo func() {\n\t\t\tdefer wg.Done()\n\t\t\tsend(url)\n\t\t}()\n\t}\n\twg.Wait()\n}\n\nfunc send(url string) {\n\treq, err := http.NewRequest(\"GET\", url, nil)\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\tvar connStart time.Time\n\tvar connDuration time.Duration\n\tvar conninfo httptrace.GotConnInfo\n\ttrace := \u0026httptrace.ClientTrace{\n\t\tGotConn: func(connInfo httptrace.GotConnInfo) {\n\t\t\tconninfo = connInfo\n\t\t},\n\t\tConnectStart: func(network, addr string) {\n\t\t\tconnStart = time.Now()\n\t\t},\n\t\tConnectDone: func(network, addr string, err error) {\n\t\t\tconnDuration = time.Since(connStart)\n\t\t},\n\t}\n\n\treq = req.WithContext(httptrace.WithClientTrace(req.Context(), trace))\n\n\tvar resp *http.Response\n\tresp, err = client.Do(req)\n\tif err != nil {\n\t\tlog.Fatalf(\"client.Do %v\\n\", err)\n\t}\n\tdefer resp.Body.Close()\n\n\tb, err := io.ReadAll(resp.Body)\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\tfmt.Fprintf(io.Discard, \"res: %s\", string(b))\n\n\tlog.Printf(\"GET %s: Proto %s, TCPConnection %v, ConnectionInfo %+v\\n\", url, resp.Proto, connDuration, conninfo)\n}\n````\n\n### `net/http/httptrace` ã‚’ä½¿ã†\n\nGo 1.7 ã‹ã‚‰å…¥ã£ãŸhttptraceãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã€`http events` ã‚’ãƒˆãƒ¬ãƒ¼ã‚¹ã™ã‚‹ã“ã¨ãŒã§ãã‚‹\n\n* Connection creation\n* Connection reuse\n* DNSÂ lookups\n* Writing the request to theÂ wire\n* Reading the response\n\n`httptrace.ClientTrace` ã§ã€å„ãƒ•ã‚§ãƒ¼ã‚ºã«funcã‚’è¨­å®šã™ã‚‹ã“ã¨ã§ãƒ­ã‚°ã‚’ä»•è¾¼ã‚“ã ã‚Šæ™‚é–“ã‚’è¨ˆæ¸¬ã—ãŸã‚Šã§ãã‚‹\n\n````go\n\tvar connStart time.Time\n\tvar connDuration time.Duration\n\ttrace := \u0026httptrace.ClientTrace{\n\t\tTLSHandshakeDone: func(cs tls.ConnectionState, err error) {\n\t\t\tlog.Printf(\"TLSHandshake Done: %+v\\n\", cs)\n\t\t},\n\t\tGetConn: func(hostPort string) {\n\t\t\tlog.Printf(\"Get Conn: %v\\n\", hostPort)\n\t\t},\n\t\tGotConn: func(connInfo httptrace.GotConnInfo) {\n\t\t\tlog.Printf(\"Got Conn: %+v\\n\", connInfo)\n\t\t},\n\t\tDNSDone: func(dnsInfo httptrace.DNSDoneInfo) {\n\t\t\tlog.Printf(\"DNS Info: %+v\\n\", dnsInfo)\n\t\t},\n\t\tConnectStart: func(network, addr string) {\n\t\t\tconnStart = time.Now()\n\t\t},\n\t\tConnectDone: func(network, addr string, err error) {\n\t\t\tconnDuration = time.Since(connStart)\n\t\t\tlog.Printf(\"Connect Done: %v\\n\", connDuration)\n\t\t},\n\t}\n\n\treq = req.WithContext(httptrace.WithClientTrace(req.Context(), trace))\n\n````\n\n## çµæœ\n\nè¨­å®šå€¤ã‚’ã„ã‚ã„ã‚å¤‰ãˆãªãŒã‚‰å®Ÿè¡Œã—ã¦ã¿ã‚‹\n\n### ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ\n\nåŒä¸€ãƒ›ã‚¹ãƒˆã«å¯¾ã—ã¦2ã¤ã®ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ã¯å†åˆ©ç”¨ã•ã‚ŒãŸ\n\n````\n$ go run *.go\n--- send start ---- MaxConnsPerHost: 0, MaxIdleConns: 100, MaxIdleConnsPerHost: 0, IdleConnTimeout: 1m30s\n2022/12/20 18:58:25 GET http://example.com: Proto HTTP/1.1, TCPConnection 21.032458ms, ConnectionInfo {Conn:0x14000010048 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 18:58:27 GET http://httpbin.org/delay/1: Proto HTTP/1.1, TCPConnection 33.830875ms, ConnectionInfo {Conn:0x14000218028 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 18:58:28 GET http://httpbin.org/delay/2: Proto HTTP/1.1, TCPConnection 33.052625ms, ConnectionInfo {Conn:0x14000010050 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 18:58:28 GET http://httpbin.org/delay/3: Proto HTTP/1.1, TCPConnection 32.912542ms, ConnectionInfo {Conn:0x1400019e020 Reused:false WasIdle:false IdleTime:0s}\n--- sleep 3s...\n2022/12/20 18:58:31 GET http://example.com: Proto HTTP/1.1, TCPConnection 0s, ConnectionInfo {Conn:0x14000010048 Reused:true WasIdle:true IdleTime:6.437538416s}\n2022/12/20 18:58:33 GET http://httpbin.org/delay/1: Proto HTTP/1.1, TCPConnection 0s, ConnectionInfo {Conn:0x14000218028 Reused:true WasIdle:true IdleTime:3.80156475s}\n2022/12/20 18:58:34 GET http://httpbin.org/delay/2: Proto HTTP/1.1, TCPConnection 10.771792ms, ConnectionInfo {Conn:0x14000010068 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 18:58:35 GET http://httpbin.org/delay/3: Proto HTTP/1.1, TCPConnection 0s, ConnectionInfo {Conn:0x14000010050 Reused:true WasIdle:true IdleTime:3.087510208s}\nelapsed: 10.291201167s\n````\n\n### MaxIdleConns=1\n\nå…¨ä½“ã§ä¿æŒã§ãã‚‹Idleä¸­ã®ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³æ•°ã‚’1ã«ã™ã‚‹\n=\u003e å…¨ä½“ã§1ã¤ã ã‘å†åˆ©ç”¨ã•ã‚ŒãŸ\n\n````\n$ go run *.go\n--- send start ---- MaxConnsPerHost: 0, MaxIdleConns: 1, MaxIdleConnsPerHost: 0, IdleConnTimeout: 1m30s\n2022/12/20 19:01:56 GET http://example.com: Proto HTTP/1.1, TCPConnection 19.573917ms, ConnectionInfo {Conn:0x14000220018 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 19:01:58 GET http://httpbin.org/delay/1: Proto HTTP/1.1, TCPConnection 38.706084ms, ConnectionInfo {Conn:0x14000010038 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 19:01:59 GET http://httpbin.org/delay/2: Proto HTTP/1.1, TCPConnection 38.803583ms, ConnectionInfo {Conn:0x14000120020 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 19:02:00 GET http://httpbin.org/delay/3: Proto HTTP/1.1, TCPConnection 39.267958ms, ConnectionInfo {Conn:0x14000010040 Reused:false WasIdle:false IdleTime:0s}\n--- sleep 3s...\n2022/12/20 19:02:03 GET http://example.com: Proto HTTP/1.1, TCPConnection 20.372584ms, ConnectionInfo {Conn:0x14000308048 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 19:02:05 GET http://httpbin.org/delay/1: Proto HTTP/1.1, TCPConnection 22.206166ms, ConnectionInfo {Conn:0x14000220058 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 19:02:05 GET http://httpbin.org/delay/2: Proto HTTP/1.1, TCPConnection 0s, ConnectionInfo {Conn:0x14000010040 Reused:true WasIdle:true IdleTime:3.001381s}\n2022/12/20 19:02:06 GET http://httpbin.org/delay/3: Proto HTTP/1.1, TCPConnection 20.229334ms, ConnectionInfo {Conn:0x14000120038 Reused:false WasIdle:false IdleTime:0s}\nelapsed: 10.021672791s\n````\n\n### MaxIdleConnsPerHost=1\n\næ¥ç¶šå…ˆã”ã¨ã«ä¿æŒã§ãã‚‹Idleä¸­ã®ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³æ•°ã‚’1ã«ã™ã‚‹\n=\u003e æ¥ç¶šå…ˆã”ã¨ã«1ã¤ãšã¤å†åˆ©ç”¨ã•ã‚ŒãŸ\n\n````\n$ go run *.go\n--- send start ---- MaxConnsPerHost: 0, MaxIdleConns: 100, MaxIdleConnsPerHost: 1, IdleConnTimeout: 1m30s\n2022/12/20 19:03:05 GET http://example.com: Proto HTTP/1.1, TCPConnection 19.162375ms, ConnectionInfo {Conn:0x1400012c048 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 19:03:06 GET http://httpbin.org/delay/1: Proto HTTP/1.1, TCPConnection 23.317375ms, ConnectionInfo {Conn:0x14000010038 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 19:03:08 GET http://httpbin.org/delay/2: Proto HTTP/1.1, TCPConnection 23.148917ms, ConnectionInfo {Conn:0x14000010030 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 19:03:09 GET http://httpbin.org/delay/3: Proto HTTP/1.1, TCPConnection 25.611208ms, ConnectionInfo {Conn:0x14000010040 Reused:false WasIdle:false IdleTime:0s}\n--- sleep 3s...\n2022/12/20 19:03:12 GET http://example.com: Proto HTTP/1.1, TCPConnection 0s, ConnectionInfo {Conn:0x1400012c048 Reused:true WasIdle:true IdleTime:6.369719167s}\n2022/12/20 19:03:13 GET http://httpbin.org/delay/1: Proto HTTP/1.1, TCPConnection 22.194541ms, ConnectionInfo {Conn:0x1400009e058 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 19:03:15 GET http://httpbin.org/delay/2: Proto HTTP/1.1, TCPConnection 0s, ConnectionInfo {Conn:0x14000010038 Reused:true WasIdle:true IdleTime:5.231218708s}\n2022/12/20 19:03:15 GET http://httpbin.org/delay/3: Proto HTTP/1.1, TCPConnection 16.294916ms, ConnectionInfo {Conn:0x1400009e050 Reused:false WasIdle:false IdleTime:0s}\nelapsed: 10.556359875s\n````\n\n### MaxIdleConnsPerHost=3\n\næ¥ç¶šå…ˆã”ã¨ã«ä¿æŒã§ãã‚‹Idleä¸­ã®ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³æ•°ã‚’3ã«ã™ã‚‹\n=\u003e æ¥ç¶šå…ˆã”ã¨ã«3ã¤ãšã¤å†åˆ©ç”¨ã•ã‚ŒãŸ\n\n````\n$ go run *.go\n--- send start ---- MaxConnsPerHost: 0, MaxIdleConns: 100, MaxIdleConnsPerHost: 3, IdleConnTimeout: 1m30s\n2022/12/20 19:03:35 GET http://example.com: Proto HTTP/1.1, TCPConnection 22.971458ms, ConnectionInfo {Conn:0x14000010028 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 19:03:37 GET http://httpbin.org/delay/1: Proto HTTP/1.1, TCPConnection 24.629334ms, ConnectionInfo {Conn:0x1400032c010 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 19:03:38 GET http://httpbin.org/delay/2: Proto HTTP/1.1, TCPConnection 22.705208ms, ConnectionInfo {Conn:0x14000010030 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 19:03:39 GET http://httpbin.org/delay/3: Proto HTTP/1.1, TCPConnection 22.523167ms, ConnectionInfo {Conn:0x1400032c008 Reused:false WasIdle:false IdleTime:0s}\n--- sleep 3s...\n2022/12/20 19:03:43 GET http://example.com: Proto HTTP/1.1, TCPConnection 0s, ConnectionInfo {Conn:0x14000010028 Reused:true WasIdle:true IdleTime:7.025793875s}\n2022/12/20 19:03:44 GET http://httpbin.org/delay/1: Proto HTTP/1.1, TCPConnection 0s, ConnectionInfo {Conn:0x14000010030 Reused:true WasIdle:true IdleTime:4.847397167s}\n2022/12/20 19:03:45 GET http://httpbin.org/delay/2: Proto HTTP/1.1, TCPConnection 0s, ConnectionInfo {Conn:0x1400032c008 Reused:true WasIdle:true IdleTime:3.001350125s}\n2022/12/20 19:03:46 GET http://httpbin.org/delay/3: Proto HTTP/1.1, TCPConnection 0s, ConnectionInfo {Conn:0x1400032c010 Reused:true WasIdle:true IdleTime:5.766263584s}\nelapsed: 10.564832208s\n````\n\n### MaxConnsPerHost=1\n\næ¥ç¶šå…ˆã”ã¨ã®ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³æ•°ã‚’1ã«ã™ã‚‹\n=\u003e æ¥ç¶šå…ˆã”ã¨ã«ä¸€ã¤ã ã‘ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ãŒä½œæˆã•ã‚Œã€ãã‚ŒãŒå†åˆ©ç”¨ã•ã‚ŒãŸ\n\n````\n$ go run *.go\n--- send start ---- MaxConnsPerHost: 1, MaxIdleConns: 100, MaxIdleConnsPerHost: 0, IdleConnTimeout: 1m30s\n2022/12/20 19:03:59 GET http://example.com: Proto HTTP/1.1, TCPConnection 10.686958ms, ConnectionInfo {Conn:0x140000aa050 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 19:04:01 GET http://httpbin.org/delay/2: Proto HTTP/1.1, TCPConnection 15.183792ms, ConnectionInfo {Conn:0x14000120030 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 19:04:03 GET http://httpbin.org/delay/1: Proto HTTP/1.1, TCPConnection 0s, ConnectionInfo {Conn:0x14000120030 Reused:true WasIdle:false IdleTime:0s}\n2022/12/20 19:04:06 GET http://httpbin.org/delay/3: Proto HTTP/1.1, TCPConnection 0s, ConnectionInfo {Conn:0x14000120030 Reused:true WasIdle:false IdleTime:0s}\n--- sleep 3s...\n2022/12/20 19:04:09 GET http://example.com: Proto HTTP/1.1, TCPConnection 0s, ConnectionInfo {Conn:0x140000aa050 Reused:true WasIdle:true IdleTime:10.279613416s}\n2022/12/20 19:04:13 GET http://httpbin.org/delay/3: Proto HTTP/1.1, TCPConnection 0s, ConnectionInfo {Conn:0x14000120030 Reused:true WasIdle:true IdleTime:3.001459625s}\n2022/12/20 19:04:14 GET http://httpbin.org/delay/1: Proto HTTP/1.1, TCPConnection 0s, ConnectionInfo {Conn:0x14000120030 Reused:true WasIdle:false IdleTime:0s\n2022/12/20 19:04:18 GET http://httpbin.org/delay/2: Proto HTTP/1.1, TCPConnection 0s, ConnectionInfo {Conn:0x14000120030 Reused:true WasIdle:false IdleTime:0s}\nelapsed: 19.207177666s\n````\n\n### IdleConnTimeout=2s\n\nã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ãŒIdleã§å¾…æ©Ÿã§ãã‚‹æ™‚é–“ã‚’2ç§’ã«ã™ã‚‹\n=\u003e 2ç§’çµŒéã§ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ãŒåˆ‡æ–­ã•ã‚Œã€å†åˆ©ç”¨ã•ã‚Œãªã‹ã£ãŸ\n\n````\n$ go run *.go\n--- send start ---- MaxConnsPerHost: 0, MaxIdleConns: 100, MaxIdleConnsPerHost: 0, IdleConnTimeout: 2s\n2022/12/20 19:04:56 GET http://example.com: Proto HTTP/1.1, TCPConnection 18.289333ms, ConnectionInfo {Conn:0x14000218030 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 19:04:58 GET http://httpbin.org/delay/1: Proto HTTP/1.1, TCPConnection 35.073625ms, ConnectionInfo {Conn:0x14000306000 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 19:04:59 GET http://httpbin.org/delay/2: Proto HTTP/1.1, TCPConnection 35.495083ms, ConnectionInfo {Conn:0x1400012c058 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 19:05:00 GET http://httpbin.org/delay/3: Proto HTTP/1.1, TCPConnection 34.939209ms, ConnectionInfo {Conn:0x1400012c050 Reused:false WasIdle:false IdleTime:0s}\n--- sleep 3s...\n2022/12/20 19:05:03 GET http://example.com: Proto HTTP/1.1, TCPConnection 26.906709ms, ConnectionInfo {Conn:0x14000306038 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 19:05:04 GET http://httpbin.org/delay/1: Proto HTTP/1.1, TCPConnection 33.716209ms, ConnectionInfo {Conn:0x1400012c088 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 19:05:06 GET http://httpbin.org/delay/2: Proto HTTP/1.1, TCPConnection 27.599459ms, ConnectionInfo {Conn:0x14000010050 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 19:05:07 GET http://httpbin.org/delay/3: Proto HTTP/1.1, TCPConnection 26.6985ms, ConnectionInfo {Conn:0x1400012c080 Reused:false WasIdle:false IdleTime:0s}\nelapsed: 10.808737583s\n````\n\n### MaxIdleConns \\\u003c MaxIdleConnsPerHost\n\nå…¨ä½“ã®Idleã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³æ•°ã‚’ã€æ¥ç¶šå…ˆã”ã¨ã®Idleã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³æ•°ã‚ˆã‚Šå°‘ãªãã™ã‚‹\n=\u003e å…¨ä½“ã®Idleã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³æ•°ãŒä¸Šé™ã¨ãªã‚‹\n\n````\n$ go run *.go\n--- send start ---- MaxConnsPerHost: 0, MaxIdleConns: 2, MaxIdleConnsPerHost: 3, IdleConnTimeout: 1m30s\n2022/12/20 19:05:33 GET http://example.com: Proto HTTP/1.1, TCPConnection 9.587334ms, ConnectionInfo {Conn:0x14000010040 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 19:05:35 GET http://httpbin.org/delay/1: Proto HTTP/1.1, TCPConnection 33.300458ms, ConnectionInfo {Conn:0x1400012c038 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 19:05:37 GET http://httpbin.org/delay/2: Proto HTTP/1.1, TCPConnection 33.856917ms, ConnectionInfo {Conn:0x14000218020 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 19:05:37 GET http://httpbin.org/delay/3: Proto HTTP/1.1, TCPConnection 33.399125ms, ConnectionInfo {Conn:0x14000218018 Reused:false WasIdle:false IdleTime:0s}\n--- sleep 3s...\n2022/12/20 19:05:40 GET http://example.com: Proto HTTP/1.1, TCPConnection 18.400042ms, ConnectionInfo {Conn:0x1400012c050 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 19:05:41 GET http://httpbin.org/delay/1: Proto HTTP/1.1, TCPConnection 21.112875ms, ConnectionInfo {Conn:0x1400012c058 Reused:false WasIdle:false IdleTime:0s}\n2022/12/20 19:05:42 GET http://httpbin.org/delay/2: Proto HTTP/1.1, TCPConnection 0s, ConnectionInfo {Conn:0x14000218018 Reused:true WasIdle:true IdleTime:3.001382958s}\n2022/12/20 19:05:43 GET http://httpbin.org/delay/3: Proto HTTP/1.1, TCPConnection 0s, ConnectionInfo {Conn:0x14000218020 Reused:true WasIdle:true IdleTime:3.001510458s}\nelapsed: 9.904582917s\n````\n\n|MaxConnsPerHost|MaxIdleConns|MaxIdleConnsPerHost|IdleConnTimeout|ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³|\n|---------------|------------|-------------------|---------------|------------------|\n|0|100|2|1m30s|æ¥ç¶šå…ˆã”ã¨ã«2ã¤ã¾ã§å†åˆ©ç”¨ã•ã‚ŒãŸ|\n|0|1|2|1m30s|å…¨ä½“ã§1ã¤ã ã‘å†åˆ©ç”¨ã•ã‚ŒãŸ|\n|0|100|1|1m30s|æ¥ç¶šå…ˆã”ã¨ã«1ã¤ãšã¤å†åˆ©ç”¨ã•ã‚ŒãŸ|\n|0|100|3|1m30s|æ¥ç¶šå…ˆã”ã¨ã«3ã¤ãšã¤å†åˆ©ç”¨ã•ã‚ŒãŸ|\n|1|100|2|1m30s|æ¥ç¶šå…ˆã”ã¨ã«ä¸€ã¤ã ã‘ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ãŒä½œæˆã•ã‚Œã€ãã‚ŒãŒå†åˆ©ç”¨ã•ã‚ŒãŸ|\n|0|100|2|2s|2ç§’çµŒéã§ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ãŒåˆ‡æ–­ã•ã‚Œã€å†åˆ©ç”¨ã•ã‚Œãªã‹ã£ãŸ|\n|0|2|3|1m30s|MaxIdleConnsãŒä¸Šé™ã¨ãªã‚‹|\n\n### HTTP/2.0 ã®å ´åˆ\n\næ¥ç¶šå…ˆãŒHTTP/2.0ã®å ´åˆã€MaxConnsPerHost=1 ã«ã—ã¦ã‚‚ä¸€ã¤ã®ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³ã§åŒæ™‚ã«è¤‡æ•°ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\n\nhttps://knowledge.sakura.ad.jp/7734/\nã‚ã¾ã‚Šè©³ã—ããªã„ã®ã ãŒã€ã‚¹ãƒˆãƒªãƒ¼ãƒ ã«ã‚ˆã£ã¦1ã¤ã®ã‚³ãƒã‚¯ã‚·ãƒ§ãƒ³å†…ã§åŒæ™‚ã«ä¸¦è¡Œã—ã¦è¤‡æ•°ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å‡¦ç†ã§ãã‚‹ã¨ã„ã†ã“ã¨ã ã‚ã†ã‹\n\n````\n--- send start ---- MaxConnsPerHost: 1, MaxIdleConns: 100, MaxIdleConnsPerHost: 0, IdleConnTimeout: 1m30s\n2022/12/21 10:50:15 GET https://example.com: Proto HTTP/2.0, TCPConnection 117.219375ms, ConnectionInfo {Conn:0x1400030a000 Reused:false WasIdle:false IdleTime:0s}\n2022/12/21 10:50:16 GET https://httpbin.org/delay/1: Proto HTTP/2.0, TCPConnection 0s, ConnectionInfo {Conn:0x1400030a380 Reused:true WasIdle:false IdleTime:0s}\n2022/12/21 10:50:17 GET https://httpbin.org/delay/2: Proto HTTP/2.0, TCPConnection 171.794125ms, ConnectionInfo {Conn:0x1400030a380 Reused:true WasIdle:false IdleTime:0s}\n2022/12/21 10:50:18 GET https://httpbin.org/delay/3: Proto HTTP/2.0, TCPConnection 0s, ConnectionInfo {Conn:0x1400030a380 Reused:false WasIdle:false IdleTime:0s}\n--- sleep 3s...\n2022/12/21 10:50:22 GET https://example.com: Proto HTTP/2.0, TCPConnection 0s, ConnectionInfo {Conn:0x1400030a000 Reused:true WasIdle:true IdleTime:6.22757825s}\n2022/12/21 10:50:23 GET https://httpbin.org/delay/1: Proto HTTP/2.0, TCPConnection 0s, ConnectionInfo {Conn:0x1400030a380 Reused:true WasIdle:true IdleTime:3.001377041s}\n2022/12/21 10:50:24 GET https://httpbin.org/delay/2: Proto HTTP/2.0, TCPConnection 0s, ConnectionInfo {Conn:0x1400030a380 Reused:true WasIdle:false IdleTime:0s}\n2022/12/21 10:50:25 GET https://httpbin.org/delay/3: Proto HTTP/2.0, TCPConnection 0s, ConnectionInfo {Conn:0x1400030a380 Reused:true WasIdle:true IdleTime:3.001423166s}\nelapsed: 9.895872041s\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Go"]},"/note/Go-http.Server%E3%81%AEGraceful-shutdown":{"title":"Go http.Serverã®Graceful shutdown","content":"\n\\#Go\n\nGo 1.8 ã‹ã‚‰ã¯http.Serverã«Graceful Shutdownã‚’è¡Œã†ãŸã‚ã®ä»•çµ„ã¿ãŒå‚™ã‚ã£ã¦ã„ã‚‹\ncontext.Contextã‚’æ¸¡ã™ã“ã¨ã§çŒ¶äºˆæ™‚é–“ã‚’æ±ºã‚ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¸­ã®å‡¦ç†ã®çµ‚äº†ã‚’å¾…ã¤ã“ã¨ãŒã§ãã‚‹\n\n````go\npackage main\n\nimport (\n\t\"context\"\n\t\"log\"\n\t\"net/http\"\n\t\"os/signal\"\n\t\"syscall\"\n\t\"time\"\n\n\t\"github.com/labstack/echo/v4\"\n)\n\nfunc main() {\n\th := echo.New()\n\th.GET(\"/ping\", func(c echo.Context) error {\n\t\tresp := map[string]string{\n\t\t\t\"msg\": \"ok\",\n\t\t}\n\t\treturn c.JSON(http.StatusOK, resp)\n\t})\n\n\tsrv := http.Server{\n\t\tAddr:    \":1323\",\n\t\tHandler: h,\n\t}\n\n\t// Graceful shutdown ã®ãŸã‚ã€interrupt signalã‚’ã‚­ãƒ£ãƒƒãƒã—ã¦å³æ™‚çµ‚äº†ã—ãªã„ã‚ˆã†ã«ã™ã‚‹\n\tctx, stop := signal.NotifyContext(context.Background(), syscall.SIGINT, syscall.SIGTERM)\n\tdefer stop()\n\n\tgo func() {\n\t\tif err := srv.ListenAndServe(); err != nil \u0026\u0026 err != http.ErrServerClosed {\n\t\t\tlog.Fatalf(\"Failed to listen and serve: %v\\n\", err)\n\t\t}\n\t}()\n\n\t\u003c-ctx.Done()\n\tstop()\n\tlog.Println(\"Shutting down gracefully, press Ctrl+C again to force\")\n\n    // å‡¦ç†ä¸­ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒã‚ã‚‹å ´åˆã«çŒ¶äºˆ10ç§’ã‚’æŒãŸã›ã¦ã‹ã‚‰shutdownã™ã‚‹\n\tctx, cancel := context.WithTimeout(context.Background(), 10*time.Second)\n\tdefer cancel()\n\tif err := srv.Shutdown(ctx); err != nil {\n\t\tlog.Printf(\"Server forced to shutdown: %v\\n\", err)\n\t}\n\n\tlog.Println(\"Server exiting\")\n}\n````\n\n`signal.NotifyContext` ã§ã¯ãªã `signal.Notify` ã‚’ä½¿ã†ä¾‹ã‚‚è¦‹ã‹ã‘ã‚‹ãŒãƒ©ãƒƒãƒ—ã—ã¦ã„ã‚‹ã ã‘ãªã®ã§ã ã„ãŸã„åŒã˜\n\n````go\n\tquit := make(chan os.Signal, 1)\n\tsignal.Notify(quit, os.Interrupt, syscall.SIGTERM)\n\n\t\u003c-quit\n\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Go"]},"/note/Go-oapi-codegen%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9F%E3%82%B3%E3%83%BC%E3%83%89%E7%94%9F%E6%88%90":{"title":"Go oapi-codegenã‚’ä½¿ã£ãŸã‚³ãƒ¼ãƒ‰ç”Ÿæˆ","content":"\n## å°å…¥ã—ãŸçµæœ\n\n1. ä»•æ§˜æ›¸ã¨ã‚³ãƒ¼ãƒ‰ãŒä¸€è‡´ã™ã‚‹ã‚ˆã†ã«ãªã£ãŸ\n1. ãã‚Œãã‚Œã®è¨€èªå‘ã‘ã«APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè£…ã™ã‚‹ã‚³ã‚¹ãƒˆãŒæ¸›ã£ãŸ\n1. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å®Ÿè£…ãŒä¸¦è¡Œã—ã¦é€²ã‚ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸ\n\n1ã€2ã«ã¤ã„ã¦ã¯ã€APIã‚’å¤‰æ›´ã—ãŸã¨ãã«ã‚³ãƒ¼ãƒ‰ã‚’å†ç”Ÿæˆã™ã‚‹ã¨Goã‚„TypeScriptã§ã‚¨ãƒ©ãƒ¼ãŒã§ã‚‹ã®ã§ã€å¤‰æ›´ãŒå®‰å…¨ã«è¡Œãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚\n\nã“ã®ã¨ãã®é–‹ç™ºãƒãƒ¼ãƒ ã§ã¯åŒã˜äººãŒãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ä¸¡æ–¹ã‚’å®Ÿè£…ã—ã¦ã„ãŸã®ã§ã€3ã«ã¤ã„ã¦ã¯ã‚ã¾ã‚Šå½±éŸ¿ãŒã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸãŒã€é–‹ç™ºè€…ãŒåˆ†ã‹ã‚Œã¦ã„ã‚‹å ´åˆã¯ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®é–‹ç™ºãŒæ¸ˆã‚“ã§ã„ãªãã¦ã‚‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®é–‹ç™ºã‚’é€²ã‚ã‚‰ã‚Œã‚‹ã®ã¯å¤§ããªåˆ©ç‚¹ã ã¨æ€ã„ã¾ã™ã€‚\n\nä¸€æ–¹ã§ã‚¤ãƒã‚¤ãƒã ã£ãŸç‚¹ã¨ã—ã¦ã€ç”Ÿæˆãƒ„ãƒ¼ãƒ«ã®åãå‡ºã™ã‚³ãƒ¼ãƒ‰ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«åˆã‚ãªã„ã‚‚ã®ã§ã‚ã£ã¦ã‚‚å¦¥å”ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚\nå‡ºåŠ›ã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯ã‚ã‚‹ç¨‹åº¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã§ãã‚‹ã‚‚ã®ã®ã€ãã®æ–¹æ³•ã‚’èª¿ã¹ã‚‹ã‚³ã‚¹ãƒˆã‚„ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚³ã‚¹ãƒˆã‚’é‘‘ã¿ã¦ã€ç”Ÿæˆã•ã‚ŒãŸã‚‚ã®ã«ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ã‚’ã‹ã‘ã‚‹ãã‚‰ã„ã«ç•™ã‚ã¦ã‚ã¨ã¯å—ã‘å…¥ã‚Œã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚\n\n### ã‚„ã‚‰ãªã‹ã£ãŸã“ã¨\n\nä»Šå›ã¯OpenAPIãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚‚ã¨ã«ã—ã¦ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹æ–¹é‡ã§é–‹ç™ºã‚’è¡Œã„ã¾ã—ãŸã€‚\n\nä¸€æ–¹ã§ã€ã‚³ãƒ¼ãƒ‰ã‹ã‚‰OpenAPIãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚‚ã‚ã‚Šã¾ã™ã€‚\nyamlã‚’ç·¨é›†ã™ã‚‹ã‚ˆã‚Šã‚‚ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ããŸã„ã€ã‚³ãƒ¼ãƒ‰ã®ã»ã†ãŒã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã§æ¤œçŸ¥ã§ããŸã‚ŠIDEã®æ©æµã‚’å—ã‘ã‚„ã™ã„ã¨ã„ã†æ°—æŒã¡ã¯ã‚ã£ãŸã®ã§ã™ãŒã€\nãƒ©ã‚¤ãƒ–ãƒ©ãƒªå´ãŒOpenAPI 3.0ç³»ã«å¯¾å¿œã™ã‚‹ã®ã‚’å¾…ã¤å¿…è¦ãŒã‚ã£ãŸã‚Šã€ä½¿ç”¨ã§ãã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒåˆ¶é™ã•ã‚ŒãŸã‚Šã¨ä¸ä¾¿ãªã¨ã“ã‚ãŒã‚ã£ãŸãŸã‚ã€ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯å–ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚\nä¾‹ãˆã°ã€Go ã§ã‚³ãƒ¼ãƒ‰ã‹ã‚‰OpenAPI(Swagger)ã‚’ç”Ÿæˆã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä¸­ã§ã‚¹ã‚¿ãƒ¼æ•°ã®å¤šã„ [swag](https://github.com/swaggo/swag) ã¯Swagger 2.0ã«å¯¾å¿œã—ã¦ã„ã¾ã™ãŒOpenAPI 3.0ç³»ã«ã¯æœªå¯¾å¿œã§ã™ã€‚\n\n*ä»¥é™ã¯ã‚µãƒ³ãƒ—ãƒ«ã¨ã—ã¦ [OpenAPIã®examplesã«ã‚ã‚‹petstore.yaml](https://github.com/OAI/OpenAPI-Specification/blob/3.1.0/examples/v3.0/petstore.yaml) ã‚’ä½¿ç”¨ã—ã¦èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚*\n\n## ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ\n\nGoã®AWS Lambdaãƒãƒ³ãƒ‰ãƒ©ãƒ¼å‘ã‘ã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚\n\nOpenAPIã‹ã‚‰Goã®ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§æœ‰åãªã‚‚ã®ã« [go-swagger](https://github.com/go-swagger/go-swagger) ãŒã‚ã‚Šã¾ã™ãŒã€ç¾æ™‚ç‚¹(v0.30.3)ã§ã¯Swagger 2.0ã«ã®ã¿å¯¾å¿œã—ã¦ãŠã‚Šã€OpenAPI 3ç³»ãŒä½¿ãˆã¾ã›ã‚“ã€‚\nã™ã§ã«OpenAPIãƒ•ã‚¡ã‚¤ãƒ«ã¯3ç³»ã§æ›¸ã„ã¦ã„ãŸãŸã‚ã€ã“ã‚Œã«å¯¾å¿œã—ã¦ã„ã‚‹ [oapi-codegen](https://github.com/deepmap/oapi-codegen) ã‚’ä½¿ç”¨ã—ã¾ã—ãŸã€‚\ngo-swagger ã¨æ¯”ã¹ã‚‹ã¨ãƒªãƒªãƒ¼ã‚¹é »åº¦ãŒä½ãã€ãƒ—ãƒ«ãƒªã‚¯ãŒæ»ç•™ã—ãŒã¡ãªã®ãŒæ°—ã«ãªã‚‹ã¨ã“ã‚ã§ã¯ã‚ã‚Šã¾ã™ãŒã€ä»–ã®é¸æŠè‚¢ãŒãªã‹ã£ãŸãŸã‚ã“ã¡ã‚‰ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚\n\n### oapi-codegenã®ä½¿ã„æ–¹\n\nã¾ãšã¯æœ€æ–°ç‰ˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚\n\n````shell\ngo install github.com/deepmap/oapi-codegen/cmd/oapi-codegen@latest\n\noapi-codegen -package \"openapi\" petstore.yaml \u003e petstore.gen.go\n````\n\nã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªå†…å®¹ãŒæ›¸ã‹ã‚ŒãŸ petstore.gen.go ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚\n\n* **components** ã‚„ **parameters** ã®structå®šç¾©\n* å…¨APIã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’æŒã£ãŸ **ServerInterface**\n* Echoç”¨ã®wrapper\n* Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸOpenAPI spec\n\nç”Ÿæˆå¯¾è±¡ã¯configãƒ•ã‚¡ã‚¤ãƒ«ã§è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\nä»Šå›ã¯structå®šç¾©ã®ã¿ç”Ÿæˆã—ãŸã‹ã£ãŸã®ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ãªè¨­å®šã«ã—ã¾ã—ãŸã€‚\n\n````yaml\n# oapi-codegen.yaml\n\npackage: openapi\ngenerate:\n  models: true\n  # echo-server: true\n  # embedded-spec: true\n````\n\n````shell\noapi-codegen -config oapi-codegen.yaml petstore.yaml \u003e petstore.gen.go\n````\n\nç”Ÿæˆã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ã¯ã“ã¡ã‚‰ã§ã™ã€‚\n\n````go\n// Package openapi provides primitives to interact with the openapi HTTP API.\n//\n// Code generated by github.com/deepmap/oapi-codegen version v1.11.0 DO NOT EDIT.\npackage openapi\n\n// Error defines model for Error.\ntype Error struct {\n\tCode    int32  `json:\"code\"`\n\tMessage string `json:\"message\"`\n}\n\n// Pet defines model for Pet.\ntype Pet struct {\n\tId   int64   `json:\"id\"`\n\tName string  `json:\"name\"`\n\tTag  *string `json:\"tag,omitempty\"`\n}\n\n// Pets defines model for Pets.\ntype Pets = []Pet\n\n// ListPetsParams defines parameters for ListPets.\ntype ListPetsParams struct {\n\t// How many items to return at one time (max 100)\n\tLimit *int32 `form:\"limit,omitempty\" json:\"limit,omitempty\"`\n}\n````\n\nâ€»v1.10.0ä»¥å‰ã§ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ç”Ÿæˆå¯¾è±¡ã‚’æŒ‡å®šã§ãã¾ã—ãŸãŒã“ã‚Œã¯ä½¿ãˆãªããªã£ã¦ã„ã¾ã™ã€‚\nè©³ã—ãã¯ [v1.11.0ã®ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆ](https://github.com/deepmap/oapi-codegen/releases/tag/v1.11.0) ã‚’ã”è¦§ãã ã•ã„ã€‚\n\n````\noapi-codegen -generate \"types\" -package \"openapi\" petstore.yaml\noapi-codegen -generate \"server\" -package \"openapi\" petstore.yaml\n````\n\n### AWS Lambdaã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å†…ã§åˆ©ç”¨ã™ã‚‹\n\nãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®ã‚³ãƒ¼ãƒ‰ã«ã¤ã„ã¦è©³ç´°ã¯çœãã¾ã™ãŒã€\nã“ã¡ã‚‰ã®ã‚ˆã†ã«ã—ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã‚³ãƒ¼ãƒ‰ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã—ã¦ã€å‡¦ç†ã‚’è¡Œã„ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™ã‚ˆã†å®Ÿè£…ã—ã¾ã—ãŸã€‚\n\n````go\npackage main\n\nimport (\n\t\"encoding/json\"\n\t\"net/http\"\n\n\t\"github.com/aws/aws-lambda-go/events\"\n\t\"github.com/aws/aws-lambda-go/lambda\"\n\t\"github.com/mitchellh/mapstructure\"\n\n\t\"example.com/petstore/openapi\"\n)\n\nfunc handler(request events.APIGatewayProxyRequest) (events.APIGatewayProxyResponse, error) {\n\t// requestã‚’openapi.ListPetsParamsã«ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹\n\tvar param openapi.ListPetsParams\n\n\tdecoderConfig := \u0026mapstructure.DecoderConfig{\n\t\tWeaklyTypedInput: true,\n\t\tResult:           \u0026param,\n\t}\n\tdecoder, err := mapstructure.NewDecoder(decoderConfig)\n\tif err != nil {\n\t\treturn events.APIGatewayProxyResponse{}, err\n\t}\n\terr = decoder.Decode(request.QueryStringParameters)\n\tif err != nil {\n\t\treturn events.APIGatewayProxyResponse{}, err\n\t}\n\n\t// do something\n\n\t// openapi.Petsã‚’ä½œæˆã—ã¦JSONã«ã—ã¦è¿”å´ã™ã‚‹\n\tpets := make(openapi.Pets, 0)\n\n\tbody, err := json.Marshal(pets)\n\treturn events.APIGatewayProxyResponse{\n\t\tStatusCode: http.StatusOK,\n\t\tBody:       string(body),\n\t}, err\n}\n\nfunc main() {\n\tlambda.Start(handler)\n}\n````\n\nã“ã†ã™ã‚‹ã“ã¨ã§ã€ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã¨ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ãƒãƒƒãƒ”ãƒ³ã‚°ãŒè¡Œã‚ã‚Œã€ä»•æ§˜æ›¸ã¨ã‚³ãƒ¼ãƒ‰ãŒä¸€è‡´ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚\n\n### struct tagã‚’è¿½åŠ ã—ãŸã„\n\nä¸Šè¨˜ã‚³ãƒ¼ãƒ‰ã§ã¯ã€  [mapstructure](https://github.com/mitchellh/mapstructure) ã‚’ä½¿ã£ã¦Lambdaã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿( map\\[string\\]string å‹ã® QueryStringParameters) ã‚’ openapi.ListPetsParams å‹ã®å¤‰æ•°ã«ãƒ‘ãƒ¼ã‚¹ã—ã¦ã„ã¾ã™ã€‚\nã“ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã€ `mapstructre:\"limit\"` ã®ã‚ˆã†ãªstruct tagã‚’æ›¸ãã“ã¨ã§ã€mapã®ã‚­ãƒ¼åã¨tagãŒä¸€è‡´ã™ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å€¤ã‚’ãƒ‘ãƒ¼ã‚¹ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n\nã“ã‚Œã¯ã€æ¬¡ã®ã‚ˆã†ã«kebab-caseã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å®šç¾©ã—ãŸã„ã¨ãã«å½¹ç«‹ã¡ã¾ã™ã€‚\n\n````yaml\n  /pets:\n    get:\n      parameters:\n        - name: limit\n          in: query\n          description: How many items to return at one time (max 100)\n          required: false\n          schema:\n            type: integer\n            format: int32\n        - name: sort-by\n          in: query\n          description: How to sort items\n          required: false\n          schema:\n            type: string\n````\n\nç”Ÿæˆã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰\n\n````go\ntype ListPetsParams struct {\n\t// How many items to return at one time (max 100)\n\tLimit *int32 `form:\"limit,omitempty\" json:\"limit,omitempty\"`\n\n\t// How to sort items\n\tSortBy *string `form:\"sort-by,omitempty\" json:\"sort-by,omitempty\"`\n}\n````\n\nã“ã®çŠ¶æ…‹ã§ /pets?sort-by=name ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹ã¨ã€SortBy ã«ã¯å€¤ãŒå…¥ã‚‰ãšã€ /pets?sortBy=name ã¨ã—ãªã„ã¨ã„ã‘ã¾ã›ã‚“ã€‚\n\nã“ã‚Œã‚’è§£æ¶ˆã™ã‚‹ãŸã‚ã« oapi-codegen ã§ã¯ã€**x-oapi-codegen-extra-tags** ã‚’æ›¸ãã“ã¨ã§ä»»æ„ã®struct tagã‚’ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚\n\n````yaml\n        - name: sort-by\n          in: query\n          description: How to sort items\n          required: false\n          schema:\n            type: string\n          x-oapi-codegen-extra-tags:\n            mapstructure: sort-by,omitempty\n````\n\nç”Ÿæˆã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰\n\n````go\ntype ListPetsParams struct {\n\t// How many items to return at one time (max 100)\n\tLimit *int32 `form:\"limit,omitempty\" json:\"limit,omitempty\"`\n\n\t// How to sort items\n\tSortBy *string `form:\"sort-by,omitempty\" json:\"sort-by,omitempty\" mapstructure:\"sort-by,omitempty\"`\n}\n````\n\nã“ã‚Œã§ /pets?sort-by=name ãŒæœŸå¾…é€šã‚Šåƒãã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚\n\nä»–ã«ã‚‚ [go-playground/validator](https://github.com/go-playground/validator) ç”¨ã®ã‚¿ã‚°ã‚’è¿½åŠ ã™ã‚‹ã®ã«ã‚‚ä½¿ãˆãã†ã§ã™ã€‚\n\n## Echoã§ä½¿ã†\n\n## ä»»æ„ã®å‹ã‚’åˆ©ç”¨ã™ã‚‹\n\n`x-go-type`\n\n`runtime.Binder`\nhttps://github.com/deepmap/oapi-codegen/blob/master/pkg/runtime/bind.go\n\nåˆ©ç”¨ç®‡æ‰€\nhttps://github.com/deepmap/oapi-codegen/blob/a444d309616eaac712c1b1a633c0818613918e11/pkg/runtime/bindstring.go#L111\n\n````go\ntype Animal struct {\n\tvalue string\n}\n\nvar (\n\tDog = Animal{\"dog\"}\n\tCat = Animal{\"cat\"}\n)\n\nfunc (i *Animal) Bind(src string) error {\n\tswitch strings.ToLower(src) {\n\tcase \"dog\":\n\t\t*i = Dog\n\tcase \"cat\":\n\t\t*i = Cat\n\t}\n\n\treturn nil\n}\n\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/05/29","Draft","Go","OpenAPI"]},"/note/Go-vscode-go%E3%81%A7goimports%E6%99%82%E3%81%ABlocal%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%99%E3%82%8B":{"title":"Go vscode-goã§goimportsæ™‚ã«localã‚’æŒ‡å®šã™ã‚‹","content":"\nvscodeã§Goã®ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã« `\"go.formatTool\": \"goimports\"` ã‚’æŒ‡å®šã—ã¦ã„ã¦ã€`-local` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒåŠ¹ã‹ãªã‹ã£ãŸã®ã§èª¿ã¹ãŸã€‚\n`-local` ã¯ã€`-local \"github.com/my/module\"` ã®ã‚ˆã†ã«æŒ‡å®šã™ã‚‹ã¨ã€importã‚’ã‚µãƒ¼ãƒ‰ãƒ‘ãƒ¼ãƒ†ã‚£ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨è‡ªèº«ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã‚°ãƒ«ãƒ¼ãƒ—åˆ†ã‘ã—ã¦ãã‚Œã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³\n\n````go\nimport (\n    \"fmt\"\n    \"os\"\n\n    \"github.com/other/module1\"\n    \"github.com/other/module2\"\n\n    \"github.com/my/module/client\"\n    \"github.com/my/module/service\"\n)\n\n````\n\n## `go.formatFlags`\n\nhttps://github.com/golang/vscode-go/wiki/settings#goformatflags\n\nã“ã‚Œã¯åŠ¹ã‹ãªã„\n\n \u003e \n \u003e Not applicable when using the language server.\n\n````json\n{\n  \"go.formatFlags\": [\n    \"-local\",\n    \"github.com/my/module\"\n  ],\n}\n````\n\n## `gopls.\"formatting.local\"`\n\nã“ã¡ã‚‰ãŒæ­£ã—ã„\n\n````json\n{\n  \"gopls\": {\n    \"formatting.local\": \"github.com/my/module\"\n  },\n}\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Go","vscode"]},"/note/Google%E3%82%AB%E3%83%AC%E3%83%B3%E3%83%80%E3%83%BC%E3%81%AE%E4%BA%88%E5%AE%9A%E6%99%82%E5%88%BB%E3%81%AB%E3%81%AA%E3%81%A3%E3%81%9F%E3%82%89Meet%E3%81%AEURL%E3%82%92%E3%83%96%E3%83%A9%E3%82%A6%E3%82%B6%E3%81%A7%E8%87%AA%E5%8B%95%E3%81%A7%E9%96%8B%E3%81%8F":{"title":"Googleã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®äºˆå®šæ™‚åˆ»ã«ãªã£ãŸã‚‰Meetã®URLã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§è‡ªå‹•ã§é–‹ã","content":"\n\\#GAS\n\nGoogle Meetã§ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã¨ãã«ã€æ™‚é–“ã‚’ã™ãã¦ã—ã¾ã†ã“ã¨ãŒã‚ã‚‹ã€‚\næ™‚é–“ã«ãªã£ãŸã‚‰Meetã®ç”»é¢ã‚’å¼·åˆ¶çš„ã«é–‹ã„ã¦ãã‚Œã‚Œã°ã€é…ã‚Œãªããªã‚‹ã¯ãšã€‚\n\nã‚„ã‚Šæ–¹ã¯ã„ã‚ã„ã‚ã‚ã‚‹ã¨æ€ã†\nChromeæ‹¡å¼µã€Calendar API\n\nä»Šå›ã¯è«¸èˆ¬ã®äº‹æƒ…ã§Calendar APIã‚’ç›´æ¥ä½¿ãˆãªã‹ã£ãŸãŸã‚ã€ä»¥ä¸‹ã®æ–¹é‡ã«ã—ãŸ\n\n## æ–¹é‡\n\n* [Google Apps Script](note/Google%20Apps%20Script.md) ã§ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‹ã‚‰äºˆå®šã‚’å–å¾—\n* [Google Apps Script](note/Google%20Apps%20Script.md) ã‚’Webã‚¢ãƒ—ãƒªã¨ã—ã¦å…¬é–‹ã—ã¦ã€JSONã§å–å¾—ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹\n* æ™‚é–“ã‚’æŒ‡å®šã—ã¦ `at` ã‚³ãƒãƒ³ãƒ‰ã§macã® `open \u003cMeetã®URL\u003e` ã‚’ã‚»ãƒƒãƒˆã—ã¦ã€ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‹ãã‚ˆã†ã«ã™ã‚‹\n\nã‚‚ã£ã¨ã„ã„ã‚„ã‚Šæ–¹ã‚ã‚‹æ°—ã¯ã™ã‚‹ãŒã€ã¨ã‚Šã‚ãˆãšã“ã‚Œã§ã‚„ã‚ŠãŸã„ã“ã¨ã¯å‡ºæ¥ãŸ\n\n## GASã‚’ä½œæˆã™ã‚‹\n\nGASã§Webã‚¢ãƒ—ãƒªã‚’ä½œæˆã™ã‚‹\n\n### Calendar APIã‚’æœ‰åŠ¹åŒ–\n\n[Google Apps Script](note/Google%20Apps%20Script.md) çµ„ã¿è¾¼ã¿ã® `CalendarApp` ã§ã¯æƒ…å ±ãŒå°‘ãªãMeetã®URLãŒã¨ã‚Œãªã„ãŸã‚ã€[Calendar API](https://developers.google.com/apps-script/advanced/calendar) ã‚’ä½¿ç”¨ã™ã‚‹\n\nGASã®ã‚¨ãƒ‡ã‚£ã‚¿ \u003e ã‚µãƒ¼ãƒ“ã‚¹ \u003e Calendar ã‚’æœ‰åŠ¹åŒ–\n\n### dayjs ã‚’ä½¿ã†\n\næ—¥ä»˜ã‚’ã†ã¾ãæ‰±ã†ãŸã‚ã«Moment.jsã¯é–‹ç™ºãŒæ­¢ã¾ã£ã¦ã„ã‚‹ã®ã§ã€dayjsã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚\n\nãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’è¿½åŠ  \u003e dayjs ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆIDã‚’å…¥åŠ›\n\nã‚¹ã‚¯ãƒªãƒ—ãƒˆID: `1ShsRhHc8tgPy5wGOzUvgEhOedJUQD53m-gd8lG2MOgs-dXC_aCZn9lFB`\n\n#### ã¡ãªã¿ã«\n\nãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆIDã‚’æ¤œç´¢ã™ã‚‹æ–¹æ³•ãŒã‚ã‹ã‚‰ãªã„â€¦\nä»•æ–¹ãªãå€‹äººãƒ–ãƒ­ã‚°ã‚„Qiitaã‹ã‚‰æƒ…å ±ã‚’å¾—ãŸã‘ã©ã€å…¬å¼æƒ…å ±ã˜ã‚ƒãªã„ã®ã§ã‚ã¾ã‚Šè‰¯ããªã„æ°—ãŒã™ã‚‹\nhttps://gas.excelspeedup.com/dayjs/\n\n### å®Ÿè£…ã™ã‚‹\n\nWebã‚¢ãƒ—ãƒªã¨ã—ã¦ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã€`doGet` ã‚’å®Ÿè£…ã™ã‚‹\n\n````javascript:code.gs\nfunction doGet(e) {\n    return ContentService.createTextOutput(JSON.stringify(getSchedule()));\n}\n\nfunction getSchedule() {\n  const now = new Date();\n  const begin = dayjs.dayjs(now);\n  const end = dayjs.dayjs(now).endOf('day');\n    \n  // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®ID\n  const calendarId = CalendarApp.getDefaultCalendar().getId();\n\n  // Calendar APIã§æœ¬æ—¥ã®äºˆå®šã‚’å–å¾—ã™ã‚‹\n  const events = Calendar.Events.list(calendarId, {\n    timeMin: begin.toISOString(),\n    timeMax: end.toISOString(),\n    singleEvents: true,\n    orderBy: 'startTime',\n  })\n\n  const todayEvent = events.items.map(event =\u003e {\n    let start;\n    if (event.start.date) {\n      // All-day event.\n      start = new Date(event.start.date);\n    } else {\n      start = new Date(event.start.dateTime);\n    }\n\n    // atã‚³ãƒãƒ³ãƒ‰ã§ä½¿ã„ã‚„ã™ã„æ™‚é–“å½¢å¼ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ\n    return {\n      title: event.summary,\n      start: dayjs.dayjs(start).subtract(1, 'minute').format(\"YYYYMMDDHHmm\"),\n      meetUrl: event.hangoutLink,\n    }\n  })\n\n  console.log(todayEvent)\n\n  return todayEvent;\n}\n````\n\n### Webã‚¢ãƒ—ãƒªã¨ã—ã¦å…¬é–‹\n\nãƒ‡ãƒ—ãƒ­ã‚¤ \u003e æ–°ã—ã„ãƒ‡ãƒ—ãƒ­ã‚¤ \u003e èª¬æ˜ã‚’å…¥åŠ›ã—ã¦ãƒ‡ãƒ—ãƒ­ã‚¤ \u003e Webã‚¢ãƒ—ãƒªã®URLã‚’å–å¾—\n\n## shellã§äºˆå®šä¸€è¦§ã‚’å–å¾—ã—ã¦ã€atã‚³ãƒãƒ³ãƒ‰ã§è¨­å®š\n\natã‚³ãƒãƒ³ãƒ‰ãŒä½¿ãˆãªã„å ´åˆã¯è¨­å®šã™ã‚‹ã€‚\nå‚è€ƒ: [macã§atã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†](note/macã§atã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†.md) \n\n````shell\ncurl -H \"Authorization: Bearer $TOKEN\" -L \"\u003cGASã®Webã‚¢ãƒ—ãƒªURL\u003e\" | jq -r '.[] | .title + \",\" + .start + \",\" + .meetUrl' | awk -F ',' '{ print system(\"echo open \" $3 \" | at -t \" $2 ) }'\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["GAS"]},"/note/Google-Apps-Script":{"title":"Google Apps Script","content":"\n\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["GAS"]},"/note/GooglePlay%E8%AA%B2%E9%87%91":{"title":"GooglePlayèª²é‡‘","content":"\n[\\[DroidKaigi 2020\\] Re:ã‚¼ãƒ­ã‹ã‚‰å§‹ã‚ã‚‹ Play Billing Library / Re: Zero - starting uses of Play Billing Library - Speaker Deck](https://speakerdeck.com/syarihu/re-zero-starting-uses-of-play-billing-library)\n\n[Android(Google Play)ã«ã¦ã‚¢ãƒ—ãƒªå†…å®šæœŸè³¼å…¥ã‚’å®Ÿè£…ã—ãŸã¨ãã«å›°ã£ãŸãƒã‚¤ãƒ³ãƒˆ - Qiita](https://qiita.com/amymd/items/f3f10a5e953d53653010)\n[ã€Androidé–‹ç™ºã€‘Google Playã‚¢ãƒ—ãƒªå†…èª²é‡‘ã®å®Ÿè£…æ–¹æ³•ã‚¬ã‚¤ãƒ‰ | by DAIKI MOCHIZUKI | Medium](https://medium.com/@dkmczk/android%E9%96%8B%E7%99%BA-google-play%E3%82%A2%E3%83%97%E3%83%AA%E5%86%85%E8%AA%B2%E9%87%91%E3%81%AE%E5%AE%9F%E8%A3%85%E6%96%B9%E6%B3%95%E3%82%AC%E3%82%A4%E3%83%89-8be98331a35c)\n[ã€2021å¹´ç‰ˆã€‘Googleã‚¢ãƒ—ãƒªå†…èª²é‡‘ã®å°å…¥ã¨é‹ç”¨æ–¹æ³•(GooglePlayBilling)ï½œèŒ¶ãƒˆãƒ©çŒ«ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢æ—¥è¨˜](https://itneko.com/google-play-billing/)\n[ã€2020å¹´ç‰ˆã€‘Play Commerceã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå¯¾å¿œ. ã“ã‚“ã«ã¡ã¯ã€@syarihuã§ã™ã€‚ | by Taichi Sato (syarihu) | Medium](https://syarihu.medium.com/2020%E5%B9%B4%E7%89%88-play-commerce%E3%82%A2%E3%83%83%E3%83%97%E3%83%87%E3%83%BC%E3%83%88%E5%AF%BE%E5%BF%9C-682716d240fd)\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Android"]},"/note/Grafana":{"title":"Grafana","content":"\nãƒ­ã‚°ã‚„ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–ã®ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³\n\n{{\u003c card-link \"https://grafana.com/docs/grafana/latest/\" \u003e}}\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/05/16","Grafana"]},"/note/Grafana-%E3%83%80%E3%83%83%E3%82%B7%E3%83%A5%E3%83%9C%E3%83%BC%E3%83%89%E3%82%84%E3%82%A2%E3%83%A9%E3%83%BC%E3%83%88%E3%81%AEexport-import":{"title":"Grafana ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚„ã‚¢ãƒ©ãƒ¼ãƒˆã®export import","content":"\n[Grafana](note/Grafana.md) ã«ã¦8.xã‹ã‚‰9.xã¸ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ç§»è¡Œã—ãŸã„ã€‚ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¯export/importã§ã„ã‘ã‚‹ãŒã‚¢ãƒ©ãƒ¼ãƒˆãŒã‚¤ãƒ³ãƒãƒ¼ãƒˆã•ã‚Œãªãã¦å›°ã£ãŸ\n\n9.xä»¥é™ã®Alertã¯è¨­å®šæ–¹æ³•ãŒå¤‰ã‚ã£ãŸã€‚\nexportã®æ©Ÿèƒ½ãŒã¤ã„ãŸãŒã€ä»¥å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆã™ã‚‹ã®ã¯ç°¡å˜ã˜ã‚ƒãªã•ãã†\n\nhttps://community.grafana.com/t/ngalert-grafana-8-alert-feature-how-to-export-import-alerts-as-yml-json/51677/22\nã“ã®ã‚³ãƒ¡ãƒ³ãƒˆã®é€šã‚Šã«ã™ã‚Œã°ã§ããã†\n\n## 9.0ã‚ˆã‚Šå‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ã¯Alerting APIãŒä½¿ãˆãŸ\n\n* [Alerting HTTP API | Grafana documentation](https://grafana.com/docs/grafana/latest/developers/http_api/alerting/)\n* [Alerting Notification Channels HTTP API | Grafana documentation](https://grafana.com/docs/grafana/latest/developers/http_api/alerting_notification_channels/)\n\n## 9.xã®å ´åˆ\n\n* [Create and manage alerts: 12 ways it's easier in Grafana Alerting](https://grafana.com/blog/2023/03/06/grafana-alerting-12-ways-we-made-creating-and-managing-alerts-easier-than-ever/#5-export-alert-rules-for-provisioning)\n* [Alerting | Grafana documentation](https://grafana.com/docs/grafana/latest/alerting/)\n\nã‚¢ãƒ©ãƒ¼ãƒˆã‚’Slackã§é€šçŸ¥ã™ã‚‹ã«ã¯ä»¥ä¸‹ã‚’è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šãã†\n\n* Notification Template\n* Contact Points\n* Alert\n\nã“ã¡ã‚‰ã®APIã‚’ä½¿ãˆã°ãã‚Œãã‚Œè¨­å®šã§ãã‚‹æ§˜å­\n\n* [Alerting Provisioning HTTP API | Grafana documentation](https://grafana.com/docs/grafana/latest/developers/http_api/alerting_provisioning/)\n\nã‚ˆã‚Šè©³ã—ãã¯ã“ã¡ã‚‰ [Grafana Alertã‚’è¨­å®šã™ã‚‹](note/Grafana%20Alertã‚’è¨­å®šã™ã‚‹.md)\n\n## Provisioning\n\n[Provision Grafana | Grafana documentation](https://grafana.com/docs/grafana/latest/administration/provisioning/)\n\næ§‹ç¯‰æ™‚ã«yamlã§è¨­å®šã—ã¦ãŠãã¨ã‚ˆã„ã‚ˆ\n\nhelmã®å ´åˆã¯ã“ã¡ã‚‰ã® `alerting` ã®é …ç›®\n\nhttps://github.com/grafana/helm-charts/blob/main/charts/grafana/values.yaml\n\n[kube-prometheus-stack](https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack) ã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã€subchartã¨ã—ã¦grafanaãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¨­å®šã§ãã‚‹ã€‚\n\n````yaml\ngrafana:\n  alerting:\n    rules.yaml:\n      apiVersion: 1\n      groups:\n        - orgId: 1\n    # ...\n````\n\n## ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã¨ã‚¢ãƒ©ãƒ¼ãƒˆã‚’export/importã™ã‚‹shell script\n\nä»¥ä¸Šè¸ã¾ãˆã¦ã“ã‚“ãªæ„Ÿã˜ã«ä½œã£ãŸ\n\n`import.sh`\n\n````shell\nBASE_URL=$1\n# Grafanaã®API KEY\nTOKEN=$2\n\n# ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆ\ncurl -XPOST -H \"Authorization: Bearer ${TOKEN}\" -H 'Content-Type: application/json' -Ss -d '@folders.json' \"$BASE_URL/api/folders\"\n\n# ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ä½œæˆ\ncurl -XPOST -H \"Authorization: Bearer ${TOKEN}\" -H 'Content-Type: application/json' -Ss -d \"@dashboard.json\" \"$BASE_URL/api/dashboards/db\"\n\n# Alert Ruleã‚’ä½œæˆ\nfor i in $(seq $(cat alert-rules.json | jq '. | length')); do\n  rule=$(cat alert-rules.json | jq --argjson index $(($i-1)) '.[$index]')\n  echo \"$rule\" | curl -XPOST -H \"Authorization: Bearer ${TOKEN}\" -H 'Content-Type: application/json' -H 'X-Disable-Provenance: none' -Ss -d @- \"$BASE_URL/api/v1/provisioning/alert-rules\"\ndone\n````\n\n`export.sh`\n\n````shell\nBASE_URL=$1\n# Grafanaã®API KEY\nTOKEN=$2\n\n# ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰\ncurl -XGET -H \"Authorization: Bearer ${TOKEN}\" -Ss \"$BASE_URL/api/dashboards/uid/my-board\" | jq 'del(.meta, .dashboard.id)' | jq '. |= .+ {\"folderUid\": \"solr\", \"overwrite\": true}' \u003e dashboard.json\n\n# Alert Rule\ncurl -XGET -H \"Authorization: Bearer ${TOKEN}\" -Ss \"$BASE_URL/api/v1/provisioning/alert-rules\" \u003e alert-rules.json\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/05/16","Grafana"]},"/note/Grafana-Alert%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%99%E3%82%8B":{"title":"Grafana Alertã‚’è¨­å®šã™ã‚‹","content":"\n[Grafana](note/Grafana.md) 9.xã§ã¯ã‚¢ãƒ©ãƒ¼ãƒˆã™ã‚‹ã®ã«Contact pointsã€Notification policiesã€Alert Ruleã‚’ãã‚Œãã‚Œè¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\n\n## Contact Points\n\nE-mailã‚„Slackãªã©ã®é€ä¿¡å…ˆã¨ã€é€ä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’è¨­å®šã™ã‚‹ã€‚\n\n### Notification Template\n\n* å…¬å¼ã®èª¬æ˜ [Create notification templates | Grafana documentation](https://grafana.com/docs/grafana/latest/alerting/manage-notifications/template-notifications/create-notification-templates/)\n* ã‚µãƒ³ãƒ—ãƒ«ãŒã„ãã¤ã‹ç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹ã®ã§ã“ã‚Œã‚’ã‚³ãƒ”ãƒšã™ã‚‹ã®ãŒä¾¿åˆ© [Grafana Alerting: A guide to templating alert notifications](https://grafana.com/blog/2023/04/05/grafana-alerting-a-beginners-guide-to-templating-alert-notifications/)\n\nãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä½œæˆæ™‚ã«ã¯ä»¥ä¸‹ã®Referenceã‚’å‚ç…§ã™ã‚‹ã¨ã‚ˆã„ã€‚\nåˆ©ç”¨ã§ãã‚‹å¤‰æ•°ãŒèª¬æ˜ã•ã‚Œã¦ã„ã‚‹ã€‚\n\n* [Customize notifications | Grafana documentation](https://grafana.com/docs/grafana/latest/alerting/manage-notifications/template-notifications/)\n* [Reference | Grafana documentation](https://grafana.com/docs/grafana/latest/alerting/manage-notifications/template-notifications/reference/)\n\n#### ä¾‹\n\n* `Alert`: ã‚¢ãƒ©ãƒ¼ãƒˆã®å†…å®¹ã‚„ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰URLãªã©ã‚’æŒã£ãŸãƒ‡ãƒ¼ã‚¿\n* `Alert.Annotations`: summaryã‚„descriptionãªã©ã®æƒ…å ±ã‚’key-valueã§ä¿æŒã™ã‚‹\n\n````go\n{{ define \"alerts.message\" -}}\n{{ if .Alerts.Firing -}}\n{{ len .Alerts.Firing }} firing alert(s)\n{{ template \"alerts.summarize\" .Alerts.Firing }}\n{{- end }}\n{{- if .Alerts.Resolved -}}\n{{ len .Alerts.Resolved }} resolved alert(s)\n{{ template \"alerts.summarize\" .Alerts.Resolved }}\n{{- end }}\n{{- end }}\n\n{{ define \"alerts.summarize\" -}}\n{{ range . -}}\n- {{ index .Annotations \"summary\" }}\n{{ end }}\n{{ end }}\n````\n\nAlert Ruleã§ã€Summary and annotations ã‚’è¨­å®šã§ãã‚‹é …ç›®ãŒã‚ã‚‹ã®ã§ã€Summaryã«ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¨­å®šã—ã¦ãŠãã¨ã€æ¬¡ã®ã‚ˆã†ãªé€šçŸ¥ãŒé£›ã¶ã‚ˆã†ã«ãªã‚‹ã€‚\n\nSummary\n\n````\nThe database server {{ index $labels \"instance\" }} has exceeded 75% of available disk space. Disk space used is {{ index $values \"B\" }}%, please resize the disk within the next 24 hours\n````\n\n````\n1 firing alert(s)\n- The database server db1 has exceeded 75% of available disk space. Disk space used is 76%, please resize the disk size within the next 24 hours\n\n1 resolved alert(s)\n- The web server web1 has been responding to 5% of HTTP requests with 5xx errors for the last 5 minutes\n````\n\n## Notification policies\n\n[Manage notification policies | Grafana documentation](https://grafana.com/docs/grafana/latest/alerting/manage-notifications/create-notification-policy/)\n\né€šçŸ¥ã‚’Alert ruleã«ã¤ã‘ãŸãƒ©ãƒ™ãƒ«ãªã©ã§ã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°ã—ã¦ã€é€šçŸ¥å…ˆã‚„é–“éš”ã®è¨­å®šã‚’ã¾ã¨ã‚ã¦è¡Œãˆã‚‹ã€‚\ndefault policyã‚’è¨­å®šã—ã¦ãŠã‘ã°ä½•ã‚‚ãªã‘ã‚Œã°ãã‚ŒãŒã¤ã‹ã‚ã‚Œã‚‹ã€‚\n\n## Alerting Rule\n\né€šçŸ¥ã™ã‚‹æ¡ä»¶ã‚„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¨­å®šã™ã‚‹ã€‚ãŠãã‚‰ãä¸€ç•ªè§¦ã‚‹éƒ¨åˆ†\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/05/18","Grafana"]},"/note/Grafana-database-is-locked%E3%81%AE%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%8C%E3%81%A7%E3%81%A6%E3%82%A2%E3%83%A9%E3%83%BC%E3%83%88%E8%A8%AD%E5%AE%9A%E3%81%AA%E3%81%A9%E3%81%8C%E6%9B%B4%E6%96%B0%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%84":{"title":"Grafana database is lockedã®ã‚¨ãƒ©ãƒ¼ãŒã§ã¦ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®šãªã©ãŒæ›´æ–°ã§ããªã„","content":"\n[Grafana](note/Grafana.md)ã§ã‚¢ãƒ©ãƒ¼ãƒˆãƒ«ãƒ¼ãƒ«ã‚’æ›´æ–°ã—ãŸéš›ã«ã€`database is locked` ã¨ã‚¨ãƒ©ãƒ¼ãŒã§ã¦æ›´æ–°ãŒã§ããªã„å ´åˆãŒã‚ã‚‹ã€‚\nã“ã‚Œã¯sqliteã®DBãŒãƒ­ãƒƒã‚¯ã•ã‚ŒãŸçŠ¶æ…‹ã«ãªã£ã¦ã—ã¾ã£ã¦ç™ºç”Ÿã—ã¦ã„ã‚‹ã€‚\n\n[Grafana, SQLite, and database is locked - handle it like a pro!](https://opsverse.io/2022/12/15/grafana-sqlite-and-database-is-locked/)\n\ninitContainerã§ã€sqliteã®dbãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚Šç›´ã™ã“ã¨ã§è§£æ¶ˆã™ã‚‹\n\n````\n  initContainers:\n    - command:\n        - /bin/sh\n        - '-c'\n        - \u003e-\n          /usr/bin/sqlite3 /var/lib/grafana/grafana.db '.clone /var/lib/grafana/grafana.db.clone';\n          mv /var/lib/grafana/grafana.db.clone /var/lib/grafana/grafana.db;\n          chmod a+w /var/lib/grafana/grafana.db\n      image: keinos/sqlite3\n      imagePullPolicy: IfNotPresent\n      name: sqlite\n      resources: {}\n      securityContext:\n        runAsNonRoot: false\n        runAsUser: 0\n      volumeMounts:\n        - mountPath: /var/lib/grafana\n          name: storage\n````\n\n[Grafana Helm Chart](https://github.com/grafana/helm-charts/tree/main/charts/grafana)ã®å ´åˆã€`extraInitContainers` ã«æŒ‡å®šã™ã‚‹\n\n````yaml\nextraInitContainers:\n  - name: grafanadb-clone-and-replace\n    image: keinos/sqlite3\n    command:\n    - \"/bin/sh\"\n    - \"-c\"\n    - \"/usr/bin/sqlite3 /var/lib/grafana/grafana.db '.clone /var/lib/grafana/grafana.db.clone'; mv /var/lib/grafana/grafana.db.clone /var/lib/grafana/grafana.db; chmod a+w /var/lib/grafana/grafana.db\"\n    imagePullPolicy: IfNotPresent\n    securityContext:\n      runAsUser: 0\n    volumeMounts:\n    - name: storage\n  mountPath: \"/var/lib/grafana\"\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/05/30","Grafana"]},"/note/Groovy":{"title":"Groovy","content":"\n## operator overloading\n\n[The Apache Groovy programming language - Operators](https://groovy-lang.org/operators.html#Operator-Overloading)\n\n`+` `-` ãªã©ã®operatorã‚’å†å®šç¾©ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\n\nhttps://github.com/jenkinsci/job-dsl-plugin/blob/master/job-dsl-core/src/main/groovy/javaposse/jobdsl/dsl/NodeEnhancement.groovy\n\n````groovy\n/**\n * Add div and leftShift operators to Node.\n * * div - Will return the first child that matches name, and if it doesn't exists, it creates\n * * leftShift - Take node (or configure block to create) and appends as child, as opposed to plus which appends as a\n *               peer\n */\n@Category(Node)\nclass NodeEnhancement {\n    private static final Logger LOGGER = Logger.getLogger(NodeEnhancement.name)\n\n    Node div(Node orphan) {\n        Node clonedOrphan = cloneNode(orphan)\n        LOGGER.fine(\"Looking for child node ${clonedOrphan}\")\n        String childName = clonedOrphan.name()\n        List children = this.children().findAll { child -\u003e\n\n....\n````\n\nhttps://github.com/jenkinsci/job-dsl-plugin/blob/master/docs/The-Configure-Block.md\nhttps://stackoverflow.com/questions/27931795/how-to-refactor-common-jenkins-jobdsl-code\n\n## this, owner, delegate\n\nclosureå†…ã§ä½¿ã†ã“ã¨ãŒã§ãã‚‹å¤‰æ•°ã€‚\n\n* this ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£ã‚’å›²ã‚“ã§ã„ã‚‹ã‚¯ãƒ©ã‚¹\n* owner ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£ã‚’å›²ã‚“ã§ã„ã‚‹ã‚¯ãƒ©ã‚¹ã‹ã€ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£ã‚’å›²ã‚“ã§ã„ã‚‹ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£\n* delegate defaultã§ã¯ownerãŒã‚»ãƒƒãƒˆã•ã‚Œã¦ã„ã‚‹ã€‚å¤–ã‹ã‚‰ä¸ãˆã‚‹ã“ã¨ã‚‚ã§ãã‚‹\n  * It is a powerful concept for building domain specific languages in Groovy\n  * The delegate of a closure can be changed to any object.\n\nhttps://groovy-lang.org/closures.html#\\_delegate_of_a_closure\n[\\[Groovy\\]ã‚¯ãƒ­ãƒ¼ã‚¸ãƒ£ã®thisã€ownerã€delegateã«ã¤ã„ã¦ - Qiita](https://qiita.com/saba1024/items/b57c412961e1a2779881)\n\nJob DSLã§ã¯ã“ã®ã‚ˆã†ã«ã—ã¦delegateã‚’ä½¿ã£ã¦ã„ã‚‹\n\nhttps://github.com/jenkinsci/job-dsl-plugin/blob/master/job-dsl-core/src/main/groovy/javaposse/jobdsl/dsl/Job.groovy\n[ContextHelper.executeInContext](https://github.com/jenkinsci/job-dsl-plugin/blob/master/job-dsl-core/src/main/groovy/javaposse/jobdsl/dsl/ContextHelper.groovy) ã§ã€`closure.delegate` ã«Contextã‚’å·®ã—è¾¼ã‚“ã§ã„ã‚‹\nContextã¯Job DSLã§å®šç¾©ã—ã¦ã„ã‚‹ã‚¯ãƒ©ã‚¹(å¤šåˆ†groovyä¸€èˆ¬ã¦ã‚ã‘ã˜ã‚ƒãªã„)\nhttps://github.com/jenkinsci/job-dsl-plugin/blob/master/job-dsl-core/src/main/groovy/javaposse/jobdsl/dsl/helpers/BuildParametersContext.groovy\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Groovy"]},"/note/Homebrew":{"title":"Homebrew","content":"\n\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["CLI"]},"/note/Hugo":{"title":"Hugo","content":"\n\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Go","Hugo"]},"/note/Hugo-%E5%A4%96%E9%83%A8%E3%83%AA%E3%83%B3%E3%82%AF%E3%82%92%E3%82%AB%E3%83%BC%E3%83%89%E3%81%A7%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B":{"title":"Hugo å¤–éƒ¨ãƒªãƒ³ã‚¯ã‚’ã‚«ãƒ¼ãƒ‰ã§è¡¨ç¤ºã™ã‚‹","content":"\n[Hugo](note/Hugo.md) ã§ã€ãƒ–ãƒ­ã‚°ã§ã‚ˆãè¦‹ã‚‹ãƒªãƒ³ã‚¯ã‚’ã‚«ãƒ¼ãƒ‰ã§è¡¨ç¤ºã™ã‚‹ã‚„ã¤ã‚’ã‚„ã‚ŠãŸã„\n\n[resources.GetRemote](https://gohugo.io/hugo-pipes/introduction/#get-resource-with-resourcesget-and-resourcesgetremote) ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§ã€ãƒ“ãƒ«ãƒ‰ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§æŒ‡å®šã—ãŸURLã¸ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ãƒªã‚½ãƒ¼ã‚¹ã‚’å–å¾—ã§ãã‚‹\n\n[v0.91.0](https://github.com/gohugoio/hugo/releases/tag/v0.91.0) ã§å…¥ã£ãŸæ©Ÿèƒ½\n\n## ä½œã‚Šæ–¹\n\n`shortcode/card-link.html`\n\n### å¤–éƒ¨ãƒªã‚½ãƒ¼ã‚¹ã‚’å–å¾—\n\n````go-html-template\n{{ $remote := resources.GetRemote \"https://www.example.com/styles.scss\" }}\n````\n\n### ã‚¹ã‚¿ã‚¤ãƒ«\n\n[Hugoã§ã¤ã„ã«å¤–éƒ¨URLã®ãƒ–ãƒ­ã‚°ã‚«ãƒ¼ãƒ‰ã‚’ä½œã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã€è‡ªä½œã‚·ãƒ§ãƒ¼ãƒˆã‚³ãƒ¼ãƒ‰ã€‘ | Hugoãƒ–ãƒ­ã‚°ãƒ†ãƒ¼ãƒã€ŒSaltã€](https://hugo-theme-salt.okdyy75.com/article/salt/blog-card/)\n\n## ä½¿ã„æ–¹\n\n````\n{{\u003c card-link \"https://example.com\" \u003e}}\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/05/07","Hugo","Go"]},"/note/Hugo-relative-link":{"title":"Hugo relative link","content":"\n[Relative linking in Hugo - Nick's Blog and Digital Garden](https://nick.groenen.me/notes/relative-linking-in-hugo/)\n\n[Hugo](note/Hugo.md) ã§ã¯ç›¸å¯¾ãƒ‘ã‚¹ã§ã®ãƒªãƒ³ã‚¯ãŒç¾åœ¨ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„ã€‚\nã‹ã‚ã‚Šã«ã€ `ref` ã¨ `relerf` ã‚’ä½¿ã£ã¦ä»–ã®ãƒšãƒ¼ã‚¸ãƒ˜ã®ãƒªãƒ³ã‚¯ã‚’æ›¸ãã“ã¨ãŒã§ãã‚‹\n[Shortcodes | Hugo](https://gohugo.io/content-management/shortcodes/#ref-and-relref)\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/05/05","Go","Hugo"]},"/note/Hystrix-dashboard":{"title":"Hystrix dashboard","content":"\nhttps://github.com/Netflix-Skunkworks/hystrix-dashboard/wiki\n\n````\ngit clone https://github.com/cep21/circuit.git\ncd circuit\nmake run\n\ndocker run -d -p 7979:9002 --name hystrix-dashboard mlabouardy/hystrix-dashboard:latest\n````\n\nhttp://127.0.0.1:7979/hystrix\n\nhttp://host.docker.internal:8123/hystrix.stream ã‚’è¿½åŠ ã™ã‚‹\n\nã“ã‚“ãªãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ãŒè¦‹ã‚Œã‚‹\n\n![Pasted-image-20221118112314](note/Pasted-image-20221118112314.png)\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["ç›£è¦–"]},"/note/JFrog-Artifactory":{"title":"JFrog Artifactory","content":"\nJFrogã®æä¾›ã™ã‚‹ãƒ¦ãƒ‹ãƒãƒ¼ã‚µãƒ«ãƒªãƒã‚¸ãƒˆãƒª\n\nhttps://jfrog.com/ja/artifactory/\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":[]},"/note/JSDoc-VSCode%E3%81%A7%E5%9E%8B%E3%83%81%E3%82%A7%E3%83%83%E3%82%AF%E3%82%92%E3%81%99%E3%82%8B":{"title":"JSDoc VSCodeã§å‹ãƒã‚§ãƒƒã‚¯ã‚’ã™ã‚‹","content":"\nTypeScriptã‚’ä½¿ãŠã†ã¨ã™ã‚‹ã¨ãƒ“ãƒ«ãƒ‰ã®æ‰‹é–“ãŒã‹ã‹ã‚‹ã®ã§ã€å°ã•ã„ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§æ‰‹è»½ã«å‹ãƒã‚§ãƒƒã‚¯ã ã‘ã—ãŸã„ã¨ãã«JSDocã§ç°¡æ˜“çš„ã«å‹ã‚’ã¤ã‘ãŸã„ã€‚\n\n1è¡Œç›®ã« `@ts-check` ã‚’æ›¸ãã®ãŒé‡è¦\n\n````javascript\n// @ts-check\n````\n\n`@typedef` ãªã©ã‚’æ›¸ãã“ã¨ã§å‹ãƒã‚§ãƒƒã‚¯ãŒè¡Œã‚ã‚Œã¦ãƒãƒƒãƒ”ãƒ¼ã«ãªã‚Œã‚‹\n\n````javascript\n/**\n * @typedef {Object} Payload\n * @property {string} channel - channelId\n * @property {Block[]} blocks - block\n */\n\n/**\n * @typedef {Object} Block\n * @property {('section' | 'mrkdwn')} type - block type\n * @property {(Block | string)} text - inner block or text\n */\n\n/**\n * @param {string} channelId - Slack channel ID\n * @param {string} message - message\n * @returns {Payload}\n */\nfunction slackPayload(channelId, message) {\n  // payloadã‚’ä½œæˆã™ã‚‹å‡¦ç†...\n  return {\n    channel: channelId,\n    blocks: [\n      {\n        type: 'section',\n        text: {\n          type: 'mrkdwn',\n          text: message,\n        },\n      },\n    ],\n  }\n}\n\nfunction send() {\n  const payload = slackPayload('Cxxxxxx', 'hello');\n  // payloadã‚’é€ä¿¡ã™ã‚‹å‡¦ç†....\n}\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/04/05","JavaScript","TypeScript"]},"/note/JUni4%E3%81%AEparameterized-test%E3%82%92JUnit5%E3%81%AB":{"title":"JUni4ã®parameterized testã‚’JUnit5ã«","content":"\n\\#Java\n\\#Kotlin\n\n## ãƒ†ã‚¹ãƒˆå¯¾è±¡ã‚³ãƒ¼ãƒ‰\n\n````kotlin\nclass Calculator() {\n    fun add(x: Int, y: Int) = x + y\n}\n````\n\n## JUnit4\n\n````kotlin\nimport org.hamcrest.CoreMatchers\nimport org.hamcrest.MatcherAssert\nimport org.junit.Test\nimport org.junit.runner.RunWith\nimport org.junit.runners.Parameterized\n\n@RunWith(Parameterized::class)\ninternal class CalculatorTest(private val x: Int, private val y: Int, private val expected: Int) {\n\n    @Test\n    fun test() {\n        val calc = Calculator()\n        val actual = calc.add(x, y)\n        MatcherAssert.assertThat(actual, CoreMatchers.equalTo(expected))\n    }\n\n    companion object {\n        @JvmStatic\n        @Parameterized.Parameters\n        fun data() = listOf(\n                arrayOf(1, 2, 3),\n                arrayOf(9, 8, 17),\n        )\n    }\n}\n````\n\n## JUnit5\n\n````kotlin\nimport org.junit.Assert.assertEquals\nimport org.junit.jupiter.params.ParameterizedTest\nimport org.junit.jupiter.params.provider.CsvSource\n\ninternal class CalculatorTest {\n\n    @ParameterizedTest\n    @CsvSource(\n            \"1, 2, 3\",\n            \"9, 8, 17\",\n    )\n    fun test(x: Int, y: Int, expected: Int) {\n        val calc = Calculator()\n        val actual = calc.add(x, y)\n        assertEquals(expected, actual)\n    }\n\n}\n````\n\ncompanion object ã‚’ä½¿ã†å¿…è¦ãŒãªã„\nç°¡å˜ãªãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã§ã‚ã‚Œã° `@CsvSource` ãŒä½¿ãˆã‚‹ãŸã‚ã€ã™ã£ãã‚Šã™ã‚‹\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Java","Kotlin"]},"/note/JUnit%E3%81%A7resource%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%82%80":{"title":"JUnitã§resourceã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€","content":"\nãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆæ™‚ã«ã€\n\n\u003chttps://www.baeldung.com/junit-src-test-resources-directory-path\u003e\n\u003chttps://stackoverflow.com/questions/3891375/how-to-read-a-text-file-resource-into-java-unit-test\u003e\n\nHoge.class.getResourceã‚’ä½¿ã†ã¨ã‚ˆã„\n\n````java\npublic class FooTest {\n  @Test public void readXMLToString() throws Exception {\n        java.net.URL url = MyClass.class.getResource(\"test/resources/abc.xml\");\n        java.nio.file.Path resPath = java.nio.file.Paths.get(url.toURI());\n        String xml = new String(java.nio.file.Files.readAllBytes(resPath), \"UTF8\"); \n  }\n````\n\nJava 9+ã§ã¯ã“ã†\n\n````java\nnew String(getClass().getClassLoader().getResourceAsStream(resourceName).readAllBytes());\n````\n\nClassLoader.getSystemResource() ã§ã‚‚ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹ãŒã€ã¨ãã©ãNullPointerExceptionã§ãŠã¡ã‚‹\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Java"]},"/note/Jackson%E3%81%A7deserialize%E3%82%92%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA%E3%81%99%E3%82%8B":{"title":"Jacksonã§deserializeã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹","content":"\n\\#Kotlin #Java\n\n## JSONã®ç‰¹å®šã®å€¤ã«å¿œã˜ã¦ãƒ‘ãƒ¼ã‚¹ã™ã‚‹å‹ã‚’å¤‰ãˆãŸã„\n\nJSONã®typeã¨ã„ã†ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ã‚ˆã£ã¦ã€ä½¿ã†ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãŒç•°ãªã‚‹å ´åˆã«ãƒ‘ãƒƒã¨æ€ã„ã¤ãã‚„ã‚Šæ–¹ã¯ä»¥ä¸‹ã‹ãªã¨æ€ã„ã¾ã™ã€‚\n\n````kotlin\ndata class User(\n    // ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¿ã‚¤ãƒ—ã‚’è¡¨ã™ 'free' or 'payed'\n    val type: String,\n    // ã©ã¡ã‚‰ã®å‹ã§ã‚‚å…±é€š\n    val name: String,\n    // freeã®å ´åˆã®ã¿å­˜åœ¨ã™ã‚‹\n    val trialEndAt: Date,\n    // payedã®å ´åˆã®ã¿å­˜åœ¨ã™ã‚‹\n    val purchasedAt: Date,\n)\n````\n\n````json\n{\n  \"users\": [\n    {\n      \"type\": \"free\",\n      \"name\": \"John\",\n      \"trialEndAt\": '2022-02-02T19:00:00+09:00'\n    },\n    {\n      \"type\": \"payed\",\n      \"name\": \"Alice\",\n      \"purchasedAt\": '2022-01-22T19:00:00+09:00'\n    }\n  ]\n}\n````\n\n### `@JsonTypeInfo`ã€`@JsonSubTypes` ã‚’ä½¿ã£ã¦å‹ã‚’æŒ¯ã‚Šåˆ†ã‘ã‚‹\n\n````kotlin\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = \"type\") // â€œtypeâ€ ã¨ã„ã†JSONã®ã‚­ãƒ¼ã§å‹ã‚’åˆ¤åˆ¥ã™ã‚‹\n@JsonSubTypes(  // â€œtypeâ€ã®å€¤ã«å¿œã˜ã¦ã©ã®å‹ã«ãƒ‘ãƒ¼ã‚¹ã™ã‚‹ã‹\n    value = [\n        JsonSubTypes.Type(value = User.Free::class, name = \"free\"),\n        JsonSubTypes.Type(value = User.Payed::class, name = \"payed\"),\n    ]\n)\nsealed class User(val name: String) { // type ã¯ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ã¯å…¥ã‚Œãªã„\n    data class Free(val trialEndAt: Date) : User()\n\n    data class Payed(val purchasedAt: Date) : User()\n}\n````\n\næ™®æ®µã¯ç¶™æ‰¿ã‚’ã‚ã¾ã‚Šä½¿ã„ãŸããªã„ãŒã€ `sealed class` ã§ã‚¹ã‚³ãƒ¼ãƒ—ã‚’é™å®šã™ã‚‹ã“ã¨ã§ä½¿ã„ã‚„ã™ãã—ãŸã€‚\nç¶™æ‰¿ã«ã™ã‚‹å¿…è¦ã¯ãªãåˆ¥ã‚¯ãƒ©ã‚¹ã«å®šç¾©ã—ã¦ã‚‚å•é¡Œãªã„ã¯ãšã€‚\n\n## å‚è€ƒ\n\n[Kotlin with Jackson: Deserializing Kotlin Sealed Classes | by Sergii Prodan | Medium](https://serpro69.medium.com/kotlin-with-jackson-deserializing-kotlin-sealed-classes-c95f837e9164)\n[JsonDeserializerã‚’ä½¿ã£ã¦ç©ºã®æ™‚ã«å‹ãŒé…åˆ—ã«ãªã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«å¯¾å¿œã™ã‚‹ - Qiita](https://qiita.com/yotama/items/1a95329a8cd87f6f0460)\n[Jacksonã§ç‹¬è‡ªã®JSONã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã‚’ã™ã‚‹ | GROUP DEV BLOG | TECHNO DIGITAL](https://www.tcdigital.jp/dev_blog/programming/jackson%E3%81%A7%E7%8B%AC%E8%87%AA%E3%81%AEjson%E3%82%B7%E3%83%AA%E3%82%A2%E3%83%A9%E3%82%A4%E3%82%BA%E3%82%92%E3%81%99%E3%82%8B/)\n[Jacksonä½¿ã„æ–¹ãƒ¡ãƒ¢ - Qiita](https://qiita.com/opengl-8080/items/b613b9b3bc5d796c840c#%E5%9E%8B%E5%BC%95%E6%95%B0%E3%82%92%E6%8C%81%E3%81%A4%E3%82%AF%E3%83%A9%E3%82%B9%E3%82%92%E3%83%87%E3%82%B7%E3%83%AA%E3%82%A2%E3%83%A9%E3%82%A4%E3%82%BA%E3%81%99%E3%82%8B)\n[Parse Snake case JSON in Spring Boot | by Bhanu Chaddha | Medium](https://medium.com/@bhanuchaddha/parse-snake-case-json-in-spring-boot-66b42627a791)\n[å‚™å¿˜éŒ²çš„ãªblog: Jacksonã§snake caseã®ã‚­ãƒ¼ã‚’lower camel caseã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ¼ã«ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã™ã‚‹](http://se-bikou.blogspot.com/2019/01/jacksonsnake-caselower-camel-case.html)\n[Jackson overcoming underscores in favor of camel-case](https://stackoverflow.com/questions/10519265/jackson-overcoming-underscores-in-favor-of-camel-case)\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Kotlin","Java"]},"/note/Java%E3%81%A7%E5%90%8C%E4%B8%80%E3%81%AEFQCN%E3%81%8Cclasspath%E4%B8%8A%E3%81%AB%E8%A4%87%E6%95%B0%E3%81%82%E3%82%8B%E5%A0%B4%E5%90%88%E3%81%AE%E6%8C%99%E5%8B%95":{"title":"Javaã§åŒä¸€ã®FQCNãŒclasspathä¸Šã«è¤‡æ•°ã‚ã‚‹å ´åˆã®æŒ™å‹•","content":"\n\\#Java\n\n2ã¤ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«åŒã˜classãŒå­˜åœ¨ã™ã‚‹ã¨ãã®æŒ™å‹•ã«ã¤ã„ã¦\n\n## ä¾‹\n\n[org:json:1.0](https://mvnrepository.com/artifact/org/json/1.0.0)\n[com.googlecode.json-simple:1.1.1](https://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple/1.1.1)\n\n`org.json.simple.parser.JSONParser` ãŒä¸¡æ–¹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«å­˜åœ¨ã™ã‚‹\n\n* `org.json.simple.parser.JSONParser.parse(Ljava/io/String;)Ljava/lang/Object;` ã¯json-simpleã«ã—ã‹ãªã„ã®ã§ã€org:jsonãŒå…ˆã«èª­ã¿è¾¼ã¾ã‚Œã¦ã„ã‚‹ã¨ãã«ã“ã‚Œã‚’ä½¿ãŠã†ã¨ã™ã‚‹ã¨NoSuchMethodExceptionãŒå‡ºã‚‹\n* `org.json.simple.parser.JSONParser.parse(Ljava/io/Reader;)Ljava/lang/Object;` ã¯ org:json ã¨ json-simple ä¸¡æ–¹ã«å­˜åœ¨ã™ã‚‹ã®ã§ã€ã“ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ã†å ´åˆã¯ã©ã¡ã‚‰ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã‚‚é–¢ä¿‚ãªã„\n* classpathã®èª­ã¿è¾¼ã¿é †ã«ã‚ˆã£ã¦å•é¡ŒãŒç™ºç”Ÿã—ãŸã‚Šã—ãªã‹ã£ãŸã‚Šã™ã‚‹\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":[]},"/note/Java%E3%81%AEDate%E3%81%A8DateAndTimeAPI%E3%81%A8%E3%81%AE%E7%9B%B8%E4%BA%92%E5%A4%89%E6%8F%9B":{"title":"Javaã®Dateã¨DateAndTimeAPIã¨ã®ç›¸äº’å¤‰æ›","content":"\n\\#Java\n\n\u003chttps://javazuki.com/articles/date-calendar-convert-to-datetime.html\u003e\n\n# Date/Calendarâ†”Date And Time APIç³»å¤‰æ›ã®ã¾ã¨ã‚\n\nDate/Calendarâ†”Date And Time APIç³»ã®å¤‰æ›ã¯ã€Instantã‚’ä»‹ã—ã¦è¡Œã†ã€‚ãã‚Œãã‚Œã®ã‚¯ãƒ©ã‚¹ã§Instantã‚’ç›´æ¥æ‰±ãˆã‚‹ã®ã‹ã©ã†ã‹ãªã©ãŒç•°ãªã‚‹ãŸã‚ã€æ‰‹é †ã‚’ã¾ã¨ã‚ã‚‹ã€‚\n\n## Date/Calendarâ†’Date And Time APIç³»ã®å¤‰æ›\n\n![](https://javazuki.com/images/javase/date-and-time-api/DateOrCalendar%E3%81%8B%E3%82%89XXXDateTime%E3%81%B8%E3%81%AE%E5%A4%89%E6%8F%9B.png)\n\nDate/Calendarã‹ã‚‰Date And Time APIç³»ã¸å¤‰æ›ã™ã‚‹å ´åˆã¯ã€ã¾ãšXXXDateTimeã¸ã®å¤‰æ›ã‚’è€ƒãˆã‚‹ã€‚ï½¢LocalDateï½£ï½¢LocalTimeï½£ï½¢Yearï½£ï½¢YearMonthï½£ãªã©ã¯XXXDateTimeã‹ã‚‰å¤‰æ›ãƒ¡ã‚½ãƒƒãƒ‰ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã¨ã‚Šã‚ãˆãšXXXDateTimeã«ã—ã¦ã—ã¾ã†ã€‚\n\nDate/Calendarã‹ã‚‰XXXDateTimeã¸ã®å¤‰æ›ã¯Instantã‚’ä»‹ã—ã¦è¡Œã†ã€‚Date/Calendarã«ã¯Instantã‚’å–å¾—ã§ãã‚‹toInstant()ãƒ¡ã‚½ãƒƒãƒ‰ãŒã€Java8ã‹ã‚‰è¿½åŠ ã•ã‚ŒãŸã€‚Instantã¯ã‚¨ãƒãƒƒã‚¯æ™‚é–“ã‹ã‚‰ã®çµŒéç§’ãŒä¿æŒã•ã‚Œã¦ã„ã‚‹ã€‚ãŸã ã—Instantã ã‘ã§ã¯è¡¨ç¾ã—ãŸã„æ™‚å·®ã‚„ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ãŒä¸æ˜ã®ãŸã‚ã€XXXDateTimeã«ã™ã‚‹ã«ã¯ï½¢ZoneIdï½£orï½¢ZoneOffsetï½£ãŒå¿…è¦ã«ãªã‚‹ã€‚ã‚·ã‚¹ãƒ†ãƒ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ZoneIdã¯ZoneId.systemDefault()ã§å–å¾—ã§ãã‚‹ã€‚\n\n### Dateâ†’LocalDateTime\n\nLocalDateTimeã®å ´åˆã€ã‚¨ãƒãƒƒã‚¯ç§’ã‹ã‚‰ç”Ÿæˆã§ãã‚‹ofEpochSecond()ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã€‚ãŸã ZoneIdã‹ã‚‰ZoneOffsetã‚’å–å¾—ã™ã‚‹ã®ã¯æ‰‹é †ãŒé¢å€’ãªãŸã‚ã€instantã¨zoneIdã§ç”Ÿæˆã§ãã‚‹ofInstant()ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã€‚ãã‚Œã‚’åˆ©ç”¨ã™ã‚‹ã€‚\n\nDateâ†’LocalDateTimeã¸ã®å¤‰æ›\n\n````java\nDate date = new Date();\n\nInstant instant = date.toInstant();\nZoneId zone = ZoneId.systemDefault();\nLocalDateTime converted = LocalDateTime.ofInstant(instant, zone);\n````\n\n### Dateâ†’OffsetDateTime\n\nOffsetDateTimeã®å ´åˆã€ï½¢ZoneIdï½£ï½¢ZoneOffsetï½£ã®ã©ã¡ã‚‰ã‹ã‚‰ã§ã‚‚ç”Ÿæˆã§ãã‚‹ã€‚ZoneIdã¯ZoneOffsetã®æƒ…å ±ã‚’å–å¾—ã§ãã‚‹ã®ã§å¯èƒ½ã€‚\n\nOffsetDateTimeã¸ã®å¤‰æ›(ZoneOffsetåˆ©ç”¨)\n\n````java\nDate date = new Date();\n\nInstant instant = date.toInstant();\nZoneOffset offset = ZoneOffset.ofHours(9);\nOffsetDateTime converted = instant.atOffset(offset);\n````\n\nOffsetDateTimeã¸ã®å¤‰æ›(ZoneIdåˆ©ç”¨)\n\n````java\nDate date = new Date();\n\nInstant instant = date.toInstant();\nZoneId zone = ZoneId.systemDefault();\nOffsetDateTime converted = OffsetDateTime.ofInstant(instant, zone);\n````\n\n### Dateâ†’ZonedDateTime\n\nZonedDateTimeã®å ´åˆã€instantã¨zoneIdã‹ã‚‰ç”Ÿæˆã§ãã‚‹ã€‚Instantã‚¯ãƒ©ã‚¹ã«ã‚‚ZonedDateTimeã‚’ç”Ÿæˆã§ãã‚‹ãƒ•ã‚¡ã‚¯ãƒˆãƒªãŒã‚ã‚‹ãŒã€å†…éƒ¨çš„ã« ZonedDateTime.ofInstant()å‘¼ã³å‡ºã™ã®ã§ã©ã¡ã‚‰ã§ã‚‚ã„ã„ã€‚\n\nZonedDateTimeã¸ã®å¤‰æ›\n\n````java\nDate date = new Date();\n\nInstant instant = date.toInstant();\nZoneId zone = ZoneId.systemDefault();\nZonedDateTime converted = ZonedDateTime.ofInstant(instant, zone);\n````\n\n### Calendarâ†’LocalDateTime,OffsetDateTime,ZonedDateTime\n\nCalendarã‚‚toInstant()ãŒã‚ã‚‹ã®ã§Instantã‚’ä»‹ã—ãŸå¤‰æ›ãŒå¯èƒ½ã€‚instantå–å¾—å¾Œã¯åŒæ§˜ã®æ‰‹é †ã€‚\n\nLocalDateTimeã¸ã®å¤‰æ›\n\n````java\nCalendar calendar = Calendar.getInstance();\n\nInstant instant = calendar.toInstant();\nZoneId zone = ZoneId.systemDefault();\nLocalDateTime converted = LocalDateTime.ofInstant(instant, zone);\n````\n\n## Date And Time APIç³»â†’Date/Calendarã®å¤‰æ›\n\n[![XXXDateTimeã‹ã‚‰DateOrCalendarã¸ã®å¤‰æ›](https://javazuki.com/images/javase/date-and-time-api/XXXDateTime%E3%81%8B%E3%82%89DateOrCalendar%E3%81%B8%E3%81%AE%E5%A4%89%E6%8F%9B.png)](https://javazuki.com/articles/date-calendar-convert-to-datetime.html#)\n\nFigure 2. Date And Time APIç³»ã‹ã‚‰Date/Calendarã¸ã®å¤‰æ›\n\nDate And Time APIç³»ã‹ã‚‰Date/Calendarã¸å¤‰æ›ã™ã‚‹å ´åˆã¯ã€ã¾ãšï½¢OffsetDateTimeï½£ï½¢ZonedDateTimeï½£ã¸ã®å¤‰æ›ã‚’è€ƒãˆã‚‹ã€‚Instantã‚’å–å¾—ã™ã‚‹ã“ã¨ã§Date/Calendarã¸ã®å¤‰æ›ãŒå¯èƒ½ã«ãªã‚‹ã€‚ãŸã ã—ã€Instantã‹ã‚‰Calendarã‚’ç›´æ¥ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ããªã„ã€‚Dateã‚’ç”Ÿæˆã—ã¦ã‹ã‚‰Calendarã¸å¤‰æ›ã™ã‚‹æ‰‹é †ã«ãªã‚‹ã€‚\n\nDate/Calendarã¸ã®å¤‰æ›ã«ãŠã„ã¦ã¯ã€LocalDateTimeãŒç›´æ¥Instatntã‚’ä½œã‚Œãªã„ã€‚LocalDateTimeãŒç¤ºã—ã¦ã„ã‚‹æ—¥æ™‚ãŒã©ã®æ™‚å·®ã‚ã‚‹ã„ã¯ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ãªã®ã‹ã®æƒ…å ±ã‚’æŒãŸãªã„ãŸã‚ã€Instantã¯ç”Ÿæˆã§ããªã„ã“ã¨ã«ãªã‚‹ã€‚ã‚ˆã£ã¦ï½¢LocalDateï½£ï½¢LocalTimeï½£ï½¢Yearï½£ï½¢YearMonthï½£ãªã©ã¨åŒæ§˜ã«ã€ï½¢OffsetDateTimeï½£ï½¢ZonedDateTimeï½£ã‚’çµŒç”±ã—ã¦Instantã‚’ç”Ÿæˆã™ã‚‹ã€‚\n\n### LocalDateTimeâ†’Date\n\nLocalDateTimeã‹ã‚‰Instantã¯ç›´æ¥ç”Ÿæˆã§ããªã„ã®ã§ã€OffsetDateTime ã‹ZonedDateTimeã‚’çµŒç”±ã™ã‚‹ã€‚\n\nLocalDateTimeâ†’Dateã¸ã®å¤‰æ›\n\n````java\nLocalDateTime localDateTime = LocalDateTime.now();\nZoneId zone = ZoneId.systemDefault();\nZonedDateTime zonedDateTime = ZonedDateTime.of(localDateTime, zone);\n\nInstant instant = zonedDateTime.toInstant();\nDate date = Date.from(instant);\n````\n\n### OffsetDateTimeâ†’Date\n\nOffsetDateTimeã¯Instantã‚’ç”Ÿæˆã§ãã‚‹ã®ã§ã€ãã®ã¾ã¾å¤‰æ›å¯èƒ½ã€‚\n\nOffsetDateTimeâ†’Dateã¸ã®å¤‰æ›\n\n````java\nOffsetDateTime offsetDateTime = OffsetDateTime.now();\nInstant instant = offsetDateTime.toInstant();\nDate date = Date.from(instant);\n````\n\n### ZonedDateTimeâ†’Date\n\nZonedDateTimeã¯Instantã‚’ç”Ÿæˆã§ãã‚‹ã®ã§ã€ãã®ã¾ã¾å¤‰æ›å¯èƒ½ã€‚\n\nZonedDateTimeâ†’Dateã¸ã®å¤‰æ›\n\n````java\nZonedDateTime zonedDateTime = ZonedDateTime.now();\nInstant instant = zonedDateTime.toInstant();\nDate date = Date.from(instant);\n````\n\n### LocalDateTime,OffsetDateTime,ZonedDateTimeâ†’Calendar\n\nCalendarã¯Instantã‚’ç”Ÿæˆã§ãã‚‹ãŒã€Instantã‹ã‚‰Calendarã‚’ç”Ÿæˆã§ããªã„ã€‚Dateã‚’çµŒç”±ã—ã¦ã€Dateâ†’Calendarå¤‰æ›ã‚’è¡Œã†ã€‚ï½¢OffsetDateTimeï½£ï½¢ZonedDateTimeï½£ã‚‚åŒæ§˜ã®æ‰‹é †ã€‚\n\nLocalDateTimeâ†’Calendarã¸ã®å¤‰æ›\n\n````java\nLocalDateTime localDateTime = LocalDateTime.now();\nZoneId zone = ZoneId.systemDefault();\nZonedDateTime zonedDateTime = ZonedDateTime.of(localDateTime, zone);\n\nInstant instant = zonedDateTime.toInstant();\nDate date = Date.from(instant);\n\nCalendar calendar = Calendar.getInstance();\ncalendar.setTime(date);\n````\n\n## GregorianCalendarâ†”ZonedDateTimeã®å¤‰æ›\n\nCalendarã®ä¸­ã§ã‚‚GregorianCalendarã®ã¿ç‰¹æ®Šã§ã€ZonedDateTimeã¨ç›¸äº’å¤‰æ›ãŒå¯èƒ½ã€‚\n\nGregorianCalendarãŒã‚°ãƒ¬ã‚´ãƒªã‚ªæš¦ã‹ã¤ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ã‚’ä¿æŒã—ã¦ã„ã‚‹ã®ã§ã€ZonedDateTimeã¨ã¨ã¦ã‚‚è¿‘ã„ãŸã‚ã€‚ãŸã ã—GregorianCalendarã¨ZonedDateTimeã¯ãƒ¦ãƒªã‚¦ã‚¹/ã‚°ãƒ¬ã‚´ãƒªã‚ªæš¦ã®åˆ‡æ›ãˆæ—¥ã®ã‚µãƒãƒ¼ãƒˆæœ‰ç„¡ãŒç•°ãªã‚‹ãŸã‚ã€ãã“ã ã‘æ³¨æ„ã€‚\n\nGregorianCalendarâ†’ZonedDateTimeã¸ã®å¤‰æ›\n\n````java\nGregorianCalendar gregorianCalendar = new GregorianCalendar();\nZonedDateTime converted = gregorianCalendar.toZonedDateTime();\n````\n\nZonedDateTimeâ†’GregorianCalendarã¸ã®å¤‰æ›\n\n````java\nZonedDateTime zonedDateTime = ZonedDateTime.now();\nGregorianCalendar gregorianCalendar = GregorianCalendar.from(zonedDateTime);\n````\n\n## Appendix A: å‚è€ƒ\n\n* [Instantï¼ˆJava SE 8 APIä»•æ§˜ï¼‰](http://docs.oracle.com/javase/jp/8/docs/api/index.html?java/time/Instant.html)\n* [LocalDateTimeï¼ˆJava SE 8 APIä»•æ§˜ï¼‰](http://docs.oracle.com/javase/jp/8/docs/api/index.html?java/time/LocalDateTime.html)\n* [OffsetDateTime ï¼ˆJava SE 8 APIä»•æ§˜ï¼‰](http://docs.oracle.com/javase/jp/8/docs/api/index.html?java/time/OffsetDateTime.html)\n* [ZonedDateTimeï¼ˆJava SE 8 APIä»•æ§˜ï¼‰](http://docs.oracle.com/javase/jp/8/docs/api/index.html?java/time/ZonedDateTime.html)\n* [Date ï¼ˆJava SE 8 APIä»•æ§˜ï¼‰](http://docs.oracle.com/javase/jp/8/docs/api/index.html?java/util/Date.html)\n* [Calendar ï¼ˆJava SE 8 APIä»•æ§˜ï¼‰](http://docs.oracle.com/javase/jp/8/docs/api/index.html?java/util/Calendar.html)\n* [GregorianCalendar ï¼ˆJava SE 8 APIä»•æ§˜ï¼‰](http://docs.oracle.com/javase/jp/8/docs/api/index.html?java/util/GregorianCalendar.html)\n\n# é–¢é€£è¨˜äº‹ãƒªãƒ³ã‚¯\n\n* Javaæ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒª\n  * java.time\n    * [Date And Time APIã¨ã¯](https://javazuki.com/articles/date-and-time-api-introcution.html)\n    * [Date And Time APIã¨ISO8601](https://javazuki.com/articles/date-and-time-api-iso8601.html)\n    * [Date And Time APIã®æ—¥æ™‚ã‚¯ãƒ©ã‚¹](https://javazuki.com/articles/date-and-time-api-classes.html)\n    * Date/Calendarâ†”Date And Time APIç³»å¤‰æ›ã®ã¾ã¨ã‚ â† ã“ã®è¨˜äº‹\n    * [java.sqlæ—¥æ™‚ã‚¯ãƒ©ã‚¹â†”Date And Time APIç³»ã®å¤‰æ›](https://javazuki.com/articles/sql-date-conver-to-datetime.html)\n    * [Date And Time APIã®å’Œæš¦ã‚µãƒãƒ¼ãƒˆ](https://javazuki.com/articles/japanese-date-introduction.html)\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Java"]},"/note/Java%E3%81%AEFormatter":{"title":"Javaã®Formatter","content":"\n[Java Check-style and Formatting using Maven | by Arushi Sharma | Medium](https://medium.com/@aru_sha4/java-check-style-and-formatting-using-maven-a1a1b4e6e10a)\n\n## google-java-format\n\n\u003chttps://github.com/google/google-java-format/\u003e\n\nmavenã®pluginã§ã¯ãªãIDEã®pluginã ã£ãŸã‚Šã€spotlessã‹ã‚‰ä½¿ã£ãŸã‚Šã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒª\n\n## googleformatter-maven-plugin\n\n\u003chttps://github.com/talios/googleformatter-maven-plugin\u003e\n\nGoogle Java Formatã‚’é©ç”¨ã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³\n\n## formatter-maven-plugin\n\n[maven-formatterã‚’ä½¿ã£ã¦formatã‚’è‡ªå‹•åŒ– - Qiita](https://qiita.com/daikon510/items/abb8cdc552833b5cdaf7)\n[mavenãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãƒ¼ã‚’ä½¿ã† - ã‚ˆãƒ¼ãã‚‹ã¨ã®ãƒ–ãƒ­ã‚°](https://yoghurt1131.hatenablog.com/entry/2017/10/01/204302)\n\u003chttps://code.revelc.net/formatter-maven-plugin/\u003e\n\nç‹¬è‡ªã®formatè¨­å®šã‚’è¡Œã†ã«ã¯Eclipseå½¢å¼ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹ã€‚\n\n[googleãŒå…¬é–‹ã—ã¦ã„ã‚‹format](https://github.com/google/styleguide/blob/gh-pages/eclipse-java-google-style.xml)\n\nã“ã‚Œã‚’æ›¸ãæ›ãˆã‚Œã°ã„ã„ã‚“ã ã‚ã†ã‘ã©ã€ã‚ã¾ã‚Šç‹¬è‡ªè¨­å®šã¯ã„ã‚ŒãŸããªã„æ°—ã‚‚ã™ã‚‹\n\n````xml\n\u003cproject ...\u003e\n    ...\n    \u003cplugin\u003e\n      \u003cgroupId\u003enet.revelc.code.formatter\u003c/groupId\u003e\n      \u003cartifactId\u003eformatter-maven-plugin\u003c/artifactId\u003e\n      \u003cversion\u003e2.11.0\u003c/version\u003e\n      \u003cconfiguration\u003e\n        \u003cdirectories\u003e\n          \u003c!-- å¯¾è±¡ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª --\u003e\n          \u003cdirectory\u003e${project.build.sourceDirectory}\u003c/directory\u003e\n          \u003cdirectory\u003e${project.build.directory}/generated-sources\u003c/directory\u003e\n        \u003c/directories\u003e\n        \u003cincludes\u003e\n          \u003cinclude\u003ejp/****/****/****/formatter/\u003c/include\u003e\n        \u003c/includes\u003e\n        \u003cexcludes\u003e\n          \u003cexclude\u003ejp/relativitas/maven/plugins/formatter/special/\u003c/exclude\u003e\n          \u003cexclude\u003e**/*Test.java\u003c/exclude\u003e\n        \u003c/excludes\u003e\n        \u003cconfigFile\u003e${project.basedir}/eclipse-java-google-style.xml\u003c/configFile\u003e\n      \u003c/configuration\u003e\n    \u003c/plugin\u003e\n    ...\n\u003c/project\u003e\n````\n\n## Spotless\n\n[spotlessã§ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã™ã‚‹](note/spotlessã§ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã™ã‚‹.md)\n\n## Checkstyle\n\nã“ã‚Œã¯å¤šåˆ†ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒã‚§ãƒƒã‚¯ã™ã‚‹ã ã‘ã§ã€ãƒã‚§ãƒƒã‚¯ã¯ä¸Šã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã§ãã‚‹ã®ã§ç‰¹åˆ¥ä¸è¦ãªããŒã™ã‚‹\n\n## Kotlinã®å ´åˆ\n\n[Kotlinã®Formatter](note/Kotlinã®Formatter.md)\n\n## å‚è€ƒ\n\n* https://aru-sha4.medium.com/java-check-style-and-formatting-using-maven-a1a1b4e6e10a\n* https://google.github.io/styleguide/javaguide.html#s4.2-block-indentation\n* https://stackoverflow.com/questions/65791764/klint-and-spotless-com-pinterest-ktlint-core-parseexception-expecting-a-parame\n* https://code.visualstudio.com/docs/java/java-linting\n* https://github.com/jhipster/prettier-java\n* https://github.com/pinterest/ktlint/issues\n* https://github.com/diffplug/spotless/tree/main/plugin-maven#eclipse-jdt\n* https://github.com/diffplug/spotless/blob/main/ECLIPSE_SCREENSHOTS.md\n* https://github.com/google/styleguide\n* https://www.howtogeek.com/723144/how-to-copy-the-url-addresses-of-all-open-tabs-in-chrome/\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Java"]},"/note/Java-BigDecimal%E3%81%ABdouble%E3%82%92%E6%B8%A1%E3%81%97%E3%81%9F%E3%81%A8%E3%81%8D%E8%AA%A4%E5%B7%AE%E3%81%8C%E3%81%A7%E3%82%8B":{"title":"Java BigDecimalã«doubleã‚’æ¸¡ã—ãŸã¨ãèª¤å·®ãŒã§ã‚‹","content":"\nJavaã§æ­£ç¢ºãªæ•°å€¤è¨ˆç®—ã‚’è¡Œã†ãŸã‚ BigDecimal ã‚’ä½¿ã£ã¦ã„ãŸãŒã€BigDecimalã‚’doubleã§åˆæœŸåŒ–ã—ãŸã‚ã¨ã€å°æ•°ç‚¹ä»¥ä¸‹ã§å››æ¨äº”å…¥ã—ãŸã¨ã“ã‚èª¤å·®ãŒå‡ºã¦ã—ã¾ã£ãŸã€‚\n\n[BigDecimalã§èª¤å·®ãŒå‡ºã¦ã—ã¾ã£ãŸè©± - ãŸã‘ã¼ãƒ¼ã®å‚™å¿˜éŒ²](https://tks-lab.hatenablog.com/entry/2017/03/03/131427)\n\n`BigDecimal`ã‚’ä½¿ç”¨ã—ã¦æ­£ç¢ºãªæ•°å€¤è¨ˆç®—ã‚’è¡Œã†å ´åˆã€`double`ã§åˆæœŸåŒ–ã™ã‚‹ã“ã¨ã¯é¿ã‘ãŸã»ã†ãŒè‰¯ã„ã§ã™ã€‚`double`ã¯æµ®å‹•å°æ•°ç‚¹æ•°ã§ã‚ã‚Šã€å¤šãã®10é€²æ•°ã¯æ­£ç¢ºã«è¡¨ç¾ã§ãã¾ã›ã‚“ã€‚ãã®ãŸã‚ã€`double`ã§åˆæœŸåŒ–ã—ãŸ`BigDecimal`ã¯ã™ã§ã«èª¤å·®ã‚’å«ã‚“ã§ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚\n\n`BigDecimal`ã‚’åˆæœŸåŒ–ã™ã‚‹éš›ã«ã¯ã€`String`å‹ã®å€¤ã‚„`BigInteger`å‹ã®å€¤ã‚’åˆ©ç”¨ã—ã¦ãã ã•ã„ã€‚ä¾‹ãˆã°ï¼š\n\n````java\nBigDecimal bd = new BigDecimal(\"123.456\");\n\n````\n\nã“ã®æ–¹æ³•ã§åˆæœŸåŒ–ã™ã‚‹ã¨ã€`BigDecimal`ã¯æ­£ç¢ºãª10é€²æ•°å€¤ã‚’ä¿æŒã—ã¾ã™ã€‚\n\nå°æ•°ç‚¹ä»¥ä¸‹ã§å››æ¨äº”å…¥ã‚’è¡Œã†å ´åˆã¯ã€`setScale`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã€`RoundingMode`ã‚’æŒ‡å®šã—ã¾ã™ã€‚\n\n````java\nimport java.math.BigDecimal;\nimport java.math.RoundingMode;\n\npublic class Main {\n    public static void main(String[] args) {\n        BigDecimal bd = new BigDecimal(\"123.456\");\n        BigDecimal rounded = bd.setScale(2, RoundingMode.HALF_UP);\n        System.out.println(rounded);\n    }\n}\n````\n\nã“ã®ä¾‹ã§ã¯ã€å°æ•°ç‚¹ä»¥ä¸‹2æ¡ã§å››æ¨äº”å…¥ã•ã‚ŒãŸçµæœãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚æ­£ç¢ºãªæ•°å€¤è¨ˆç®—ã‚’è¡Œã†ãŸã‚ã«ã¯ã€`BigDecimal`ã®åˆæœŸåŒ–ã¨å››æ¨äº”å…¥ã®ä¸¡æ–¹ã§é©åˆ‡ãªæ–¹æ³•ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/03/30","Java"]},"/note/Java-Heapdump%E3%82%92MAT%E3%81%A7%E8%A7%A3%E6%9E%90%E3%81%99%E3%82%8B":{"title":"Java Heapdumpã‚’MATã§è§£æã™ã‚‹","content":"\n\\#Java \n\nEclipse Memory Analyzer(MAT)\nhttps://www.eclipse.org/mat/downloads.php\n\nAmazon Correttoã®JDK 19ãŒå…¥ã£ã¦ã„ã‚‹ã®ã ãŒã€matã‚’é–‹ãã¨ã‚¨ãƒ©ãƒ¼ãŒã§ã¦èµ·å‹•ã—ãªã‹ã£ãŸ\n`shared library does not contain the JNI_CreateJavaVM symbol`\n\nOpenJDK 19ã‚’å…¥ã‚Œã¦JAVA_HOMEã‚’ã“ã¡ã‚‰ã«å¤‰æ›´ã—ãŸã¨ã“ã‚èµ·å‹•ã§ããŸ\nhttps://jdk.java.net\n\n````shell\n$ curl -LO https://download.java.net/java/GA/jdk19.0.2/fdb695a9d9064ad6b064dc6df578380c/7/GPL/openjdk-19.0.2_macos-aarch64_bin.tar.gz\n$ cd /Library/Java/JavaVirtualMachines\n$ sudo tar -zxvf /tmp/openjdk-19.0.2_macos-aarch64_bin.tar.gz\n$ export JAVA_HOME=$(pwd)/jdk-19.0.2.jdk/Contents/Home\n\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/04/07"]},"/note/JavaScript%E3%81%A7JSON%E3%82%92kebab-case%E3%81%AB%E3%81%99%E3%82%8B":{"title":"JavaScriptã§JSONã‚’kebab-caseã«ã™ã‚‹","content":"\n\\#JavaScript\n\n````javascript\nexport const stringifyRoutePoint = (point?: QueryRoutePoint) =\u003e\n  point != null\n    ? JSON.stringify(point, (key: string, value: any) =\u003e {\n        if (value \u0026\u0026 typeof value === 'object') {\n          const replacement: { [key: string]: string } = {}\n          for (const v in value) {\n            if (Object.hasOwnProperty.call(value, v)) {\n              const key = kebabize(v)\n              console.log('kebabize---', key, value)\n              replacement[key] = value[v]\n            }\n          }\n\n          return replacement\n        }\n        return value\n      })\n    : undefined\n\nconst kebabize = (str: string) =\u003e {\n  return str\n    .split('')\n    .map((letter, idx) =\u003e {\n      return letter.toUpperCase() === letter\n        ? `${idx !== 0 ? '-' : ''}${letter.toLowerCase()}`\n        : letter\n    })\n    .join('')\n}\n\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["JavaScript"]},"/note/JavaScript-xpath%E3%81%A7%E8%A6%81%E7%B4%A0%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B":{"title":"JavaScript xpathã§è¦ç´ ã‚’å–å¾—ã™ã‚‹","content":"\n\n````javascript\nfunction getElementByXpath(path) {\n  return document.evaluate(\n    path,\n    document,\n    null,\n    XPathResult.FIRST_ORDERED_NODE_TYPE,\n    null\n  ).singleNodeValue;\n}\n\ngetElementByXpath('(//div[@class=\"font-bold btn\"])[1]')\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/04/27","JavaScript"]},"/note/Jenkinfsfile%E3%82%92CI%E3%81%A7validate%E3%81%97%E3%81%9F%E3%81%84":{"title":"Jenkinfsfileã‚’CIã§validateã—ãŸã„","content":"\n[Jenkins: How do I lint Jenkins pipelines from the command line? - Stack Overflow](https://stackoverflow.com/questions/44703012/jenkins-how-do-i-lint-jenkins-pipelines-from-the-command-line)\nhttps://www.jenkins.io/doc/book/pipeline/development/\n\nèµ·å‹•ä¸­ã® [note/Jenkins](Jenkins.md) ã«curlã‚„sshã—ã¦validateã®APIã‚’å©ãã¨ãƒã‚§ãƒƒã‚¯ã§ãã‚‹\n\nLinting via the CLI with SSH\n\n````shell\n# ssh (Jenkins CLI)\n# JENKINS_SSHD_PORT=[sshd port on controller]\n# JENKINS_HOSTNAME=[Jenkins controller hostname]\nssh -p $JENKINS_SSHD_PORT $JENKINS_HOSTNAME declarative-linter \u003c Jenkinsfile\n````\n\nLinting via HTTP POST using curl\n\n````shell\n# curl (REST API)\n# Assuming \"anonymous read access\" has been enabled on your Jenkins instance.\n# JENKINS_URL=[root URL of Jenkins controller]\n# JENKINS_CRUMB is needed if your Jenkins controller has CRSF protection enabled as it should\nJENKINS_CRUMB=`curl \"$JENKINS_URL/crumbIssuer/api/xml?xpath=concat(//crumbRequestField,\\\":\\\",//crumb)\"`\ncurl -X POST -H $JENKINS_CRUMB -F \"jenkinsfile=\u003cJenkinsfile\" $JENKINS_URL/pipeline-model-converter/validate\n````\n\nãã‚Œã‚’npmã‚³ãƒãƒ³ãƒ‰ã§ã§ãã‚‹ã‚ˆã†ã«ã—ãŸã‚‚ã®ãŒã“ã¡ã‚‰\n\n[Jenkinsfileã®lintã§æ•‘ãˆã‚‹å‘½ãŒã‚ã‚‹](https://www.slideshare.net/miyajan/jenkinsfilelint)\n[jflint - npm](https://www.npmjs.com/package/jflint)\n\n## linter\n\nhttps://github.com/nvuillam/npm-groovy-lint ã¨ã„ã†ã®ã‚‚ã‚ã‚‹\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Jenkins"]},"/note/Jenkins%E3%81%A7%E9%87%8D%E3%81%84%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%82%92clone%E3%81%99%E3%82%8B%E3%81%A8%E3%81%8D%E3%81%AB%E4%BD%BF%E3%81%88%E3%82%8B%E3%83%86%E3%82%AF%E3%83%8B%E3%83%83%E3%82%AF":{"title":"Jenkinsã§é‡ã„ãƒªãƒã‚¸ãƒˆãƒªã‚’cloneã™ã‚‹ã¨ãã«ä½¿ãˆã‚‹ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯","content":"\nshallow clone, sparse checkoutã‚’ä½¿ã†ã“ã¨ã§ã€å®¹é‡ã‚’è»½ãã—ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã«è½ã¨ã™ã“ã¨ãŒã§ãã‚‹\n\n![Pasted-image-20220705174631](note/Pasted-image-20220705174631.png)\n\nJob DSLã®å ´åˆ\n\n````groovy\npipelineJob('myJob') {\n    definition {\n        cpsScm {\n            scm {\n                git {\n                    configure { git -\u003e\n                        // sparse checkout\n                        git / 'extensions' / 'hudson.plugins.git.extensions.impl.SparseCheckoutPaths' / 'sparseCheckoutPaths' {\n                            'hudson.plugins.git.extensions.impl.SparseCheckoutPath' {\n                                path('src')\n                            }\n                        }\n\n                        // shallow clone\n                        git / 'extensions' / 'hudson.plugins.git.extensions.impl.CloneOption' {\n                            shallow(true)\n                            depth(1)\n                            noTags(true)\n                        }\n                    }\n                    remote {\n                        url('https://bare.example.com/repository.git')\n                        credentials('credential')\n                    }\n                    branch('master')\n                }\n            }\n            lightweight(false)\n            scriptPath(\"Jenkinsfile\")\n        }\n    }\n}\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Jenkins"]},"/note/Jenkins%E3%81%A7raw-html%E3%82%92%E8%AA%AC%E6%98%8E%E6%96%87%E3%81%AB%E6%9B%B8%E3%81%91%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B":{"title":"Jenkinsã§raw htmlã‚’èª¬æ˜æ–‡ã«æ›¸ã‘ã‚‹ã‚ˆã†ã«ã™ã‚‹","content":"\nhtmlã‚¿ã‚°ãŒã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã•ã‚Œãšã«è£…é£¾ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹\n\n[OWASP Markup Formatter](https://plugins.jenkins.io/antisamy-markup-formatter/) ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\nã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®è¨­å®š \u003e ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—è¨˜æ³• \u003e Safe HTML ã«å¤‰æ›´\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Jenkins"]},"/note/Jenkins%E3%81%ABBlueOcean%E5%85%A5%E3%82%8C%E3%82%8B":{"title":"Jenkinsã«BlueOceanå…¥ã‚Œã‚‹","content":"\n\u003chttps://cloudbees.techmatrix.jp/blog/first-time-blue-ocean/\u003e\n\n## å§‹ã‚ã«\n\nJenkins 2.0ã‹ã‚‰ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ãŒã€ãã—ã¦Jenkins 2.7ã‹ã‚‰ã¯Blue Oceanãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒåˆ©ç”¨å¯èƒ½ã¨ãªã‚Šã¾ã—ãŸã€‚\n\n## ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¨ã¯\n\nå¾“æ¥Jenkinsã¯ãƒ•ãƒªãƒ¼ã‚¹ã‚¿ã‚¤ãƒ«ã‚¸ãƒ§ãƒ–ã§ã‚¸ãƒ§ãƒ–ã‚’å®šç¾©ã—ã¦ã„ã¾ã—ãŸã€‚ãŸã ãƒ•ãƒªãƒ¼ã‚¹ã‚¿ã‚¤ãƒ«ã‚¸ãƒ§ãƒ–ã§ã¯ã€ä¾‹ãˆã°æ¡ä»¶ãƒ­ã‚¸ãƒƒã‚¯ã‚’çµ„ã‚ãªã‹ã£ãŸã‚Šã€ã‚¸ãƒ§ãƒ–ã®é€”ä¸­ã§åœæ­¢ã—ã¦ã—ã¾ã£ãŸå ´åˆã«æœ€åˆã‹ã‚‰å§‹ã‚ãªã‘ã‚Œã°ãªã‚‰ãªã‹ã£ãŸã‚Šã¨ç¾å®Ÿçš„ã«CI/CDã‚’å®Ÿç¾ã™ã‚‹ã«ã¯å¤šãã®åˆ¶ç´„ãŒã‚ã‚Šã¾ã—ãŸã€‚\n\nãã‚Œã‚‰ã®å•é¡Œã‚’è§£æ¶ˆã™ã‚‹ãŸã‚ã«ç™»å ´ã—ãŸã®ãŒãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ã™ã€‚\n\nãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¨ã¯ã€Jenkins2.0ã‹ã‚‰ç™»å ´ã—ãŸå…¬å¼ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã‚ã‚Šã€CI/CDã®ãƒ•ãƒ­ãƒ¼ã‚’ã‚³ãƒ¼ãƒ‰ã¨ã—ã¦å®šç¾©ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚ãªãŠã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã«ã¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¨å®£è¨€å‹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®2ç¨®é¡ãŒã‚ã‚Šã¾ã™ãŒã€ä»Šå›ã¯Blue Oceanã‚’åˆ©ç”¨ã™ã‚‹ãŸã‚ã«å®£è¨€å‹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’ç”¨ã„ã¾ã™ã€‚\n\n### ã©ã†ã„ã£ãŸã“ã¨ãŒã§ãã‚‹ï¼Ÿ\n\nãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®ç‰¹å¾´ã‚„ã€ãƒ•ãƒªãƒ¼ã‚¹ã‚¿ã‚¤ãƒ«ã‚¸ãƒ§ãƒ–ã¨æ¯”ã¹ã¦ã®åˆ©ç‚¹ã«ã¤ã„ã¦èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚\n\nã¾ãšãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯Jenkinsfileã¨ã„ã†Apache Groovyã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ãŸDSLã§è¨˜è¼‰ã•ã‚ŒãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã™ã€‚ 1ã¤ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§CI/CDã®ãƒ•ãƒ­ãƒ¼ã‚’è¨˜è¼‰ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚\n\nå¾“æ¥ã€è¤‡æ•°ã®ã‚¸ãƒ§ãƒ–ã‚’ã¤ãªã’ã¦ã„ãã«ã¯ãƒ“ãƒ«ãƒ‰ãƒ»ãƒˆãƒªã‚¬ã‚’ç”¨ã„ã¦é€£çµã—ã¦ã„ãå¿…è¦ãŒã‚ã‚Šã¾ã—ãŸãŒã€ä¸€ç›®è¦‹ã‚‹ã ã‘ã§ã¯ã©ã®ã‚ˆã†ã«ã‚¸ãƒ§ãƒ–ãŒã¤ãªãŒã£ã¦ã„ã‚‹ã®ã‹ãŒã‚ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚ ã‚¿ã‚¹ã‚¯ã®åç§°ã‚’ãƒŠãƒ³ãƒãƒªãƒ³ã‚°ã™ã‚‹ã¨ã„ã£ãŸæ–¹æ³•ã§é‹ç”¨å›é¿ã•ã‚Œã¦ã„ãŸã‹ã¨æ€ã„ã¾ã™ã€‚ å…¨ä½“åƒãŒã‚ã‹ã‚Šã¥ã‚‰ãã€æ¥­å‹™å¼•ç¶™ãç­‰ã‚’è€ƒãˆã‚‹ã¨éå¸¸ã«ãƒã‚¬ãƒ†ã‚£ãƒ–ãªçŠ¶æ³ã§ã—ãŸã€‚\n\nã¾ãŸã€å®Ÿè¡Œã—ãŸã„CI/CDã®ãƒ•ãƒ­ãƒ¼ã«æ¯”ä¾‹ã—ã¦ã‚¸ãƒ§ãƒ–ã®æ•°ã‚‚å¢—ãˆã¦ã„ãã€ç®¡ç†ã«ã‚‚ã‚³ã‚¹ãƒˆãŒã‹ã‹ã£ã¦ã—ã¾ã„ã¾ã™ã€‚ æ¯”è¼ƒã—ã¦ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯ã€CI/CDã®ãƒ•ãƒ­ãƒ¼ã®æµã‚Œã‚’1ã¤ã®Jenkinsfileã§è¡¨ç¾ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚\n\nã•ã‚‰ã«ã€CI/CDã®ãƒ•ãƒ­ãƒ¼ã‚’è¡¨ç¾ã§ãã‚‹å¹…ã‚‚åºƒãŒã‚Šã¾ã—ãŸã€‚ å¾“æ¥ã®ãƒ“ãƒ«ãƒ‰ãƒ»ãƒˆãƒªã‚¬ã®ã‚ˆã†ãªé †æ¬¡å®Ÿè¡Œã¯å½“ç„¶ã¨ã—ã¦ã€ä¸¦åˆ—å®Ÿè¡Œã‚„ç¹°ã‚Šè¿”ã—ã®å®Ÿè¡Œã€æ¡ä»¶ã«å¿œã˜ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡Œã¨ã„ã£ãŸã“ã¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚\n\nä¾‹ãˆã°è£½å“ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ¯ã«ç•°ãªã‚‹JDKã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³é•ã„ã€‚å¾“æ¥ã§ã‚ã‚Œã°JDKæ¯ã«ãƒ•ãƒªãƒ¼ã‚¹ã‚¿ã‚¤ãƒ«ã‚¸ãƒ§ãƒ–ã‚’ä½œæˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸãŒã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ã¯æ¡ä»¶ã«å¿œã˜ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡ŒãŒå¯èƒ½ãªã®ã§ã€ã‚³ãƒŸãƒƒãƒˆã•ã‚ŒãŸãƒªãƒã‚¸ãƒˆãƒªã«å¿œã˜ã¦JDKã‚’åˆ†ã‘ã‚‹ã¨ã„ã£ãŸäº‹ãŒã§ãã¾ã™ã€‚\n\nCI/CDãƒ•ãƒ­ãƒ¼å†…ã®æ‰¿èªã¨ã„ã£ãŸã“ã¨ã«ã¤ã„ã¦ã‚‚ã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ä¸Šã§å¯èƒ½ã§ã™ã€‚ ãƒ•ãƒ­ãƒ¼ã®ä¸€æ™‚ç‚¹ã§åœæ­¢ã—ã€æ‰¿èªã‚„å…¥åŠ›ã‚’å¾…æ©Ÿã—ã¦ã€å…¥åŠ›å†…å®¹ã«å¿œã˜ã¦å¾Œç¶šãƒ•ãƒ­ãƒ¼ã®å®Ÿè¡Œã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n\nè€ä¹…æ€§ã«ã¤ã„ã¦ã‚‚ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯ç§€ã§ã¦ã„ã¾ã™ã€‚ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®å®Ÿè¡Œé€”ä¸­ã§JenkinsãŒå†èµ·å‹•ã—ã¦ãƒ•ãƒ­ãƒ¼ãŒåœæ­¢ã—ã¦ã—ã¾ã£ãŸå ´åˆã§ã‚‚ã€å®Ÿè¡Œé€”ä¸­ã‹ã‚‰å†é–‹ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚1å›ã®å®Ÿè¡ŒãŒé•·æ™‚é–“ãªãƒ•ãƒ­ãƒ¼ã®å ´åˆã«ç‰¹ã«åŠ¹æœã‚’ç™ºæ®ã™ã‚‹ã§ã—ã‚‡ã†ã€‚\n\nä¿å®ˆæ€§ã¨ã„ã†ç‚¹ã§ã‚‚å„ªã‚Œã¦ã„ã¾ã™ã€‚ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’å®Ÿç¾ã™ã‚‹ã®ã¯1ã¤ã®Jenkinsfileã¨ã„ã†ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚ã‚Šã€SCMã§ã®ç®¡ç†ãŒå¯èƒ½ã§ã™ã€‚ãƒ•ãƒªãƒ¼ã‚¹ã‚¿ã‚¤ãƒ«ã‚¸ãƒ§ãƒ–ã¨æ¯”è¼ƒã—ã¦ä¿å®ˆæ€§ã¯æ ¼æ®µã«é«˜ããªã‚Šã¾ã™ã€‚\n\nå½“ç„¶Antã‚„Mavenã€Gradleã¨ã„ã£ãŸãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã‚„ã€ãƒ¡ãƒ¼ãƒ«é€šçŸ¥ã€å¤–éƒ¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®å‘¼ã³å‡ºã—ã¨ã„ã£ãŸå¾“æ¥ã®ãƒ•ãƒªãƒ¼ã‚¹ã‚¿ã‚¤ãƒ«ã‚¸ãƒ§ãƒ–ã§å®Ÿç¾ã§ãã¦ã„ãŸã“ã¨ã¯ã™ã¹ã¦å®Ÿè¡ŒãŒå¯èƒ½ã§ã™ã€‚ã“ã‚Œã‹ã‚‰Jenkinsã®æ´»ç”¨ã‚’å§‹ã‚ã‚‹æ–¹ã¯ã‚‚ã¡ã‚ã‚“ã€ãƒ•ãƒªãƒ¼ã‚¹ã‚¿ã‚¤ãƒ«ã‚¸ãƒ§ãƒ–ã§æ›¸ã‹ã‚ŒãŸã‚¸ãƒ§ãƒ–ã‚‚ã©ã“ã‹ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã«ä¹—ã›æ›ãˆã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚\n\nãŸã ã“ã®ã‚ˆã†ã«ãƒ¡ãƒªãƒƒãƒˆã®ã‚ã‚‹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã§ã™ãŒã€ã„ã¾ã¾ã§ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§æ“ä½œã—ã¦ã„ãŸã‚¯ãƒ©ã‚·ãƒƒã‚¯ã‚¸ãƒ§ãƒ–ã‹ã‚‰ã„ããªã‚ŠApache Groovyã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ãŸã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã¨ã„ã†ã¨ãƒãƒ¼ãƒ‰ãƒ«ã‚’æ„Ÿã˜ã‚‹æ–¹ã‚‚ã„ã‚‹ã¨æ€ã„ã¾ã™ã€‚\n\nãã‚Œã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã®ãŒæ¬¡ã«ç´¹ä»‹ã™ã‚‹Jenkinsã®å…¬å¼ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã‚ã‚‹Blue Oceanã§ã™ã€‚\n\n## Blue Oceanã®åˆ©ç”¨\n\n### Blue Oceanã¨ã¯\n\nBlue Oceanã¨ã¯Jenkinsã®å…¬å¼ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§ã™ã€‚\n\n\u003chttps://www.jenkins.io/projects/blueocean/\u003e\n\nBlue Oceanã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§å®£è¨€å‹ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’ã‚°ãƒ©ãƒ•ã‚£ã‚«ãƒ«ã«ä½œæˆã§ãã¾ã™ã€‚ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®å®Ÿè¡Œå†…å®¹ã‚„å®Ÿè¡Œçµæœã‚‚è¦–è¦šçš„ã«ã‚ã‹ã‚Šã‚„ã™ãªã‚Šã€å¾“æ¥ã®ã‚¯ãƒ©ã‚·ã‚«ãƒ«ãªUIã¨ã¯ç•°ãªã£ãŸæ–°ã—ã„ä½“é¨“ã‚’ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚\n\nãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¯å‰è¿°ã®ã¨ãŠã‚ŠJenkinsfileã¨ã„ã†ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’è¨˜è¼‰ã—ã¦ã„ãå¿…è¦ãŒã‚ã‚Šã¾ã™ãŒã€Blue Oceanã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§GUIã§ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’ä½œæˆã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚ãã®ãŸã‚ã€Apache Groovyå½¢å¼ã§ã®è¨˜è¼‰ãŒæ…£ã‚Œã¦ã„ãªã„æ–¹ã§ã‚‚Jenkinsfileã®ä½œæˆãŒå¯èƒ½ã§ã™ã€‚\n\nBlue Oceanå†…ã§ã‚³ãƒ¼ãƒ‰ã‚¨ãƒ‡ã‚£ã‚¿ã®åˆ©ç”¨ã‚‚å¯èƒ½ã§ã™ã€‚è¤‡é›‘ãªå†…å®¹ã®ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’ä½œæˆã™ã‚‹ã«ã¯Jenkinsfileã‚’ç·¨é›†ã—ã¦ã„ãå¿…è¦ã‚‚å‡ºã¦ãã¾ã™ãŒã€ã‚ã‚‹ç¨‹åº¦Blue Oceanã§ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã®å…¨ä½“åƒã‚’æ•´ãˆã€ç´°ã‹ã„éƒ¨åˆ†ã«ã¤ã„ã¦ã®ã¿ä¿®æ­£ã™ã‚‹ã¨ã„ã£ãŸåˆ©ç”¨ã‚‚å¯èƒ½ã§ã™ã€‚\n\nBlue Oceanã¯å®Ÿè¡Œçµæœã‚’å¯è¦–åŒ–ã™ã‚‹ã“ã¨ã«ã‚‚å„ªã‚Œã¦ã„ã¾ã™ã€‚å½“ç„¶Blue Oceanã‚’ç”¨ã„ãªã„å ´åˆã§ã‚‚ã‚¯ãƒ©ã‚·ã‚«ãƒ«ãªUIã§å®Ÿè¡Œçµæœã®ç¢ºèªã¯ã§ãã‚‹ã®ã§ã™ãŒã€ã‚ˆã‚Šå¯è¦–åŒ–ã—ãŸçŠ¶æ…‹ã§çµæœã®ç¢ºèªãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã«ã©ã“ã§ã©ã®ã‚ˆã†ãªå•é¡ŒãŒç™ºç”Ÿã—ã¦ã„ã‚‹ã®ã‹ã®åˆ¤æ–­ã‚’å®¹æ˜“ã«ã—ã€ç”Ÿç”£æ€§ã‚’å‘ä¸Šã•ã›ã¾ã™ã€‚\n\nBlue Oceanã¯ã€ŒBitbucket Cloudã€ã€ŒBitBucket Serverã€ã€ŒGitHubã€ã€ŒGitHub Enterpriseã€ã€ŒGitã€ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ãŠã‚Šã€Blue Oceanã§ä½œæˆã—ãŸJenkinsfileã¯ä¸Šè¨˜SCMã§ç®¡ç†ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚å…±åŒç·¨é›†ã‚„ãƒ¬ãƒ“ãƒ¥ãƒ¼ã§åŠ¹æœã‚’ç™ºæ®ã—ã¾ã™ã€‚\n\nã“ã†ã„ã£ãŸãƒ¡ãƒªãƒƒãƒˆã®ã‚ã‚‹Blue Oceanã‚’åˆ©ç”¨ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Jenkins"]},"/note/Jenkins%E3%81%AEHTMLPublisherPlugin%E3%81%A7CSS%E3%81%8C%E9%81%A9%E7%94%A8%E3%81%95%E3%82%8C%E3%81%AA%E3%81%84":{"title":"Jenkinsã®HTMLPublisherPluginã§CSSãŒé©ç”¨ã•ã‚Œãªã„","content":"\n\u003chttps://techblog.recochoku.jp/1285\u003e\n\u003chttps://stackoverflow.com/questions/35783964/jenkins-html-publisher-plugin-no-css-is-displayed-when-report-is-viewed-in-j\u003e\n\n## åŸå› \n\n\u003chttps://www.jenkins.io/doc/book/security/configuring-content-security-policy/\u003e\n\nContent Security PolicyãŒè¨­å®šã•ã‚Œã¦ã„ã¦ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ãƒ–ãƒ­ãƒƒã‚¯ã•ã‚Œã‚‹\n\n## è§£æ±ºç­–\n\nJavaã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ `hudson.model.DirectoryBrowserSupport.CSP` ã‚’è¨­å®šã™ã‚Œã°ã‚ˆã„\n\n### 1. Jenkinsã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‹ã‚‰CSPã‚’è¨­å®šã™ã‚‹\n\n````shell\nSystem.setProperty(\"hudson.model.DirectoryBrowserSupport.CSP\", \"default-src https: 'unsafe-inline'\")\n````\n\nãŸã ã—ã€ä¸€æ™‚çš„ãªè¨­å®šã§ã€å†èµ·å‹•ã™ã‚‹ã¨ã‚‚ã¨ã«æˆ»ã‚‹\n\n### 2. èµ·å‹•ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«è¨­å®šã™ã‚‹\n\nè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãæ›ãˆã‚‹ã€‚\n\nrpm ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸå ´åˆ\n`/etc/sysconfig/jenkins`\n\ndefault\n\n````shell\nJENKINS_JAVA_OPTIONS=\"-Djava.awt.headless=true\"\n````\n\nè¿½åŠ \n\n````shell\nJENKINS_JAVA_OPTIONS=\"-Djava.awt.headless=true -Dhudson.model.DirectoryBrowserSupport.CSP=\\\"default-src https: 'unsafe-inline'\\\"\"\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Jenkins"]},"/note/Jenkins%E3%82%B8%E3%83%A7%E3%83%96%E3%81%A7git-lfs%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%97%E3%81%A6%E4%B8%80%E9%83%A8%E3%81%A0%E3%81%91pull%E3%81%97%E3%81%9F%E3%81%84":{"title":"Jenkinsã‚¸ãƒ§ãƒ–ã§git-lfsã‚’ä½¿ç”¨ã—ã¦ä¸€éƒ¨ã ã‘pullã—ãŸã„","content":"\n# Jenkinsã¨gitlfs\n\n## ã‚„ã‚ŠãŸã„ã“ã¨\n\nJenkinsã®git pluginã§ä¸€éƒ¨ã ã‘git lfs pullã—ãŸã„\n\n## ã‚ã‹ã£ã¦ã„ã‚‹ã“ã¨\n\n* `git lfs pull -I \"$target\"` ã§å¯¾è±¡ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ»ãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹\n* `git lfs install --skip-smudge` ã—ã¦ãŠã‹ãªã„ã¨ã€æœ€åˆã®checkoutã§å…¨éƒ¨`git lfs pull`ã—ã‚ˆã†ã¨ã™ã‚‹ã£ã½ã„\n* Jenkinsã®Git PluginãŒcloneã™ã‚‹ã‚ˆã‚Šå‰ã« `git lfs install --skip-smudge`\n  git init\n  git lfs install --skip-smudge --local\n  git remote add origin https://${BITBUCKET_CREDENTIAL}@bitbucket.org/ntj-developer/passstorage.git || true\n  git pull origin master\n  git lfs pull -I \"$input\"\n\n## çµæœ\n\n* Jenkinsã®Git Pluginã«ã‚ˆã‚‹ãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã¯ç„¡åŠ¹ã«ã™ã‚‹\n* shellã§ lfs pull ã™ã‚‹\n\n````shell\n# Git Pluginã®cloneã ã¨ã€git lfs pullã‚’ã‚¹ã‚­ãƒƒãƒ—ã§ããªã„ã®ã§ã€äº‹å‰ã«--skip-sumudgeã‚’è¨­å®šã—ã¦ã‹ã‚‰æ‰‹å‹•ã§cloneã™ã‚‹\ngit init\ngit lfs install --skip-smudge --local\ngit remote add origin https://${CREDENTIAL}@bitbucket.org/\u003cworkspace\u003e/\u003crepository\u003e.git\ngit pull origin master\n\n# å¯¾è±¡ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ã¿lfs pullã™ã‚‹ã“ã¨ã§æ™‚é–“çŸ­ç¸®ã€å®¹é‡å‰Šæ¸›\ngit lfs pull -I \"$targetIn\"\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Jenkins","git"]},"/note/Jenkins%E3%82%B8%E3%83%A7%E3%83%96%E3%82%92curl%E3%81%A7%E3%82%A8%E3%82%AF%E3%82%B9%E3%83%9D%E3%83%BC%E3%83%88%E3%82%A4%E3%83%B3%E3%83%9D%E3%83%BC%E3%83%88":{"title":"Jenkinsã‚¸ãƒ§ãƒ–ã‚’curlã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã‚¤ãƒ³ãƒãƒ¼ãƒˆ","content":"\n[note/Jenkins](Jenkins.md) ã‚¸ãƒ§ãƒ–è¨­å®šã‚’curlã§ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ãŸã„\n\n1. `crumbIssuer/api/xml` ã«BASICèªè¨¼ã§GETãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ãªã’ã€`/defaultCrumbIssuer/crumbRequestField` ã¨ `/defaultCrumbIssuer//crumb/` ã‚’ã‚³ãƒ­ãƒ³ã§çµåˆã—ãŸã‚‚ã®ãŒcrumb\n1. cookieã«crumbã‚’ä¿å­˜ã™ã‚‹\n1. cookieã¨BASICèªè¨¼ã‚’ä½¿ã£ã¦ã€ `http://jenkins-url.com/path/to/job/directory/createItem?name=${job_name}` ã«postã™ã‚‹\n   1. ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã«ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ãŸã‚¸ãƒ§ãƒ–ã®xmlã‚’æŒ‡å®šã™ã‚‹\n\n````shell\n$ curl -O -u $user:$passwd '[http://old-jenkins/job/job_name/config.xml](http://old-jenkins/job/job_name/config.xml)'  \n$ set CRUMB (curl -s --cookie-jar /tmp/cookies -u $user:$passwd '[http://new-jenkins/jenkins/crumbIssuer/api/xml](http://new-jenkins/jenkins/crumbIssuer/api/xml)' | xmllint --xpath 'concat(/defaultCrumbIssuer/crumbRequestField/text(),\":\",/defaultCrumbIssuer//crumb/text())' -)  \n$ curl -s --cookie /tmp/cookies -u $user:$passwd '[http://new-jenkins/jenkins/job/directory/createItem?name=job_name](http://new-jenkins/jenkins/job/directory/createItem?name=job_name)' --data-binary @config.xml -H 'Content-Type:text/xml' -H \"$CRUMB\"\n````\n\nxmllintã‚’ä½¿ã£ãŸãŒã€Jenkinsãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã‚‚ã‚ˆã„ã¿ãŸã„\n`/crumbIssuer/api/xml?xpath=concat(//crumbRequestField,\":\",//crumb)'`\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Jenkins"]},"/note/Jenkins%E6%9C%AC%E4%BD%93%E3%81%AE%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E3%81%A8%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3%E3%82%92%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%81%A7%E6%9C%80%E6%96%B0%E5%8C%96%E3%81%99%E3%82%8B":{"title":"Jenkinsæœ¬ä½“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§æœ€æ–°åŒ–ã™ã‚‹","content":"\njenkinsã®æœ€æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å–å¾—ã™ã‚‹URL\n\u003chttps://stackoverflow.com/questions/43857882/how-to-query-the-current-jenkins-lts-version-number\u003e\n\n* For stable (LTS)Â \u003chttps://updates.jenkins.io/stable/latestCore.txt\u003e\n* And for the latestÂ \u003chttps://updates.jenkins.io/latestCore.txt\u003e\n\n[Simple groovy script to upgrade active plugins when new versions are available](https://gist.github.com/alecharp/d8329a744333530e18e5d810645c1238)\n[jenkins safe auto update plugins](https://gist.github.com/taherbs/6d03b4d56ac4f1e7a119e64cf5d17f4c)\n\n````groovy\ndef jenkins = Jenkins.get()\nUpdateCenter uc = jenkins.getUpdateCenter()\n\n// UpdateSitesã®ãƒ‡ãƒ¼ã‚¿æ›´æ–°\nuc.sites.each { site -\u003e\n    site.updateDirectlyNow()\n}\n\ndef plugins = jenkins.pluginManager.activePlugins.collect {\n    // æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³\n    UpdateSite.Plugin updateSitePlugin = uc.getPlugin(it.shortName, it.versionNumber)\n    return [\n            name             : it.shortName,\n            installed_version: it.version as String,\n            available_version: updateSitePlugin.version as String,\n    ]\n}\n\nprintln plugins.collect { \"${it.name}:${it.available_version}\" }.join(\" \")\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/01/27","Jenkins"]},"/note/Jenkins-%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%82%B3%E3%83%B3%E3%82%BD%E3%83%BC%E3%83%AB%E3%81%A7plugin%E3%82%84%E3%82%B8%E3%83%A7%E3%83%96%E3%82%92%E4%B8%80%E8%A6%A7%E3%81%A7%E5%87%BA%E5%8A%9B%E3%81%99%E3%82%8B":{"title":"Jenkins ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§pluginã‚„ã‚¸ãƒ§ãƒ–ã‚’ä¸€è¦§ã§å‡ºåŠ›ã™ã‚‹","content":"\n## pluginä¸€è¦§ã‚’å‡ºåŠ›ã™ã‚‹\n\n````groovy\ndef pluginList = new ArrayList(Jenkins.instance.pluginManager.plugins)\npluginList.sort { it.getShortName() }.each{\n  plugin -\u003e \n    println (\"${plugin.getShortName()}:${plugin.getVersion()}\")\n}\n\n// ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆä¸€è¦§\nUpdateCenter uc = Jenkins.get().updateCenter\n\ndef plugins = Jenkins.get().pluginManager.plugins\nplugins.toSorted { l,r -\u003e l.shortName \u003c r.shortName ? -1 : 1 }.collect{ plugin -\u003e \n  UpdateSite.Plugin updateSitePlugin = uc.getPlugin(plugin.shortName, plugin.versionNumber)\n\n  if (plugin.hasUpdate() \u0026\u0026 false) {\n    return \"\"\"-- ${plugin.shortName}:${plugin.version}\n+- ${plugin.shortName}:${updateSitePlugin.version}\"\"\"\n  } else {\n        return \"\"\" - ${plugin.shortName}:${plugin.version}\"\"\"\n  }\n  \n}.each{\n  p -\u003e println(p)\n}\n\nprintln \"\"\n````\n\n````groovy\ndef plugins = Jenkins.get().pluginManager.plugins\nplugins.each {\n    println \"${it.shortName} (${it.version}) =\u003e ${it.dependencies}\"\n}\n\n// graphvizã‚’ä½¿ã£ã¦graphã§è¡¨ç¤ºã™ã‚‹\ndef plugins = Jenkins.get().pluginManager.plugins\nprintln \"digraph test {\"\nplugins.each {\n    def plugin = it.getShortName()\n    println \"\\\"${plugin}\\\";\"\n    def deps =  it.getDependencies()\n    deps.each {\n      def s = it.shortName\n      println \"\\\"${plugin}\\\" -\u003e \\\"${s}\\\";\"\n    }\n} \nprintln \"}\"\n\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Jenkins"]},"/note/Jenkins-%E3%83%93%E3%83%AB%E3%83%89%E3%81%AE%E6%9C%80%E7%B5%82%E6%9B%B4%E6%96%B0%E6%99%82%E5%88%BB%E3%82%92%E7%A2%BA%E8%AA%8D%E3%81%99%E3%82%8B":{"title":"Jenkins ãƒ“ãƒ«ãƒ‰ã®æœ€çµ‚æ›´æ–°æ™‚åˆ»ã‚’ç¢ºèªã™ã‚‹","content":"\n[Jenkins](note/Jenkins.md) ã§ãƒ“ãƒ«ãƒ‰ã®æœ€çµ‚æ›´æ–°æ™‚åˆ»ã‚’ç¢ºèªã™ã‚‹\n\n````groovy\nimport java.time.ZoneOffset\nimport java.time.Instant\nimport java.time.temporal.ChronoUnit\ndef builds = Jenkins.get().getAllItems(Job.class).collectMany { job -\u003e\n        job.builds\n    }.findAll { build -\u003e\n        build.building\n    }\t\n\nprintln builds.size()\nbuilds.each {\n  println \"${it.url} hasntStartedYet: ${it.hasntStartedYet()} , isInProgress: ${it.isInProgress()} , isLogUpdated: ${it.isLogUpdated()} , getTime: ${it.time} , getStartTimeInMillis: ${java.time.Instant.ofEpochMilli(it.getStartTimeInMillis()).atOffset(ZoneOffset.ofHours(9)).toString()} , logfile: ${java.time.Instant.ofEpochMilli(it.logFile.lastModified()).atOffset(ZoneOffset.ofHours(9)).toString()}\"\n  it.doStop()\n}\n\nprintln \"\"\n````\n\n````groovy\nimport java.time.ZoneOffset\nimport java.time.Instant\nimport java.time.temporal.ChronoUnit\n\npipeline {\n    agent none\n    stages {\n        stage('find') {\n            steps {\n                script {\n                    def builds = findNotStoppedJobs()\n                    if (builds.size() == 0) {\n                        println 'å®Ÿè¡Œä¸­ã®ã‚¸ãƒ§ãƒ–ãªã—'\n                        return\n                    }\n\n                    // Nodeã®æƒ…å ±ã‚’ãƒ­ã‚°ã«æ®‹ã™\n                    println \"---- print all Node ----\"\n                    Jenkins.get().nodes.each { node -\u003e\n                        println \"---- Node ${node.getSelfLabel()} ----\"\n                        printNodeInfo(node)\n                        println \"\"\n                    }\n\n                    def now = Instant.now()\n                    def stoppedBuilds = []\n                    builds.each { build -\u003e\n                        def lastModified = Instant.ofEpochMilli(build.logFile.lastModified())\n\n                        def matcher = build.log =~ /Cannot contact ([^:]*).*/\n                        if (lastModified.plus(5, ChronoUnit.MINUTES).isBefore(now) \u0026\u0026 matcher.size() \u003e 0 \u0026\u0026 matcher[0].size() \u003e 1) {\n                            // slaveã¨ã®é€šä¿¡ãŒã§ããªããªã£ã¦ä¸€å®šæ™‚é–“çµŒéã—ã¦ã„ã‚‹å ´åˆ\n\n                            println \"---- ${build.url} ----\"\n\n                            def nodeLabel = matcher[0][1]\n                            def node = Jenkins.get().getNode(nodeLabel)\n                            if (node == null) {\n                                println \"Node ${nodeLabel} ã®æƒ…å ±ãŒå–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚podãŒåœæ­¢ã—ãŸå¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ãƒ“ãƒ«ãƒ‰ã‚’åœæ­¢ã—ã¾ã™\"\n                                stopBuild(build)\n                                stoppedBuilds.add(build)\n                            } else {\n                                printNodeInfo(node)\n                                if (node.channel == null) {\n                                    println \"Node ${nodeLabel} ã®channelãŒå–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚podãŒåœæ­¢ã—ãŸå¯èƒ½æ€§ãŒã‚ã‚‹ãŸã‚ãƒ“ãƒ«ãƒ‰ã‚’åœæ­¢ã—ã¾ã™\"\n                                    stopBuild(build)\n                                    stoppedBuilds.add(build)\n                                }\n                            }\n                            return\n                        }\n\n                    }\n\n                    if (stoppedBuilds.size() == 0) {\n                        println 'åœæ­¢ã—ãŸã‚¸ãƒ§ãƒ–ã¯ã‚ã‚Šã¾ã›ã‚“'\n                        return\n                    }\n\n                }\n            }\n        }\n    }\n}\n\ndef findNotStoppedJobs() {\n    return Jenkins.get().getAllItems(Job.class).collectMany { job -\u003e\n        job.builds\n    }.findAll { build -\u003e\n        build.building\n    }\n}\n\ndef printNodeInfo(def node) {\n    println \"getAssignedLabels()          : ${node.getAssignedLabels()              }\"\n    println \"getChannel()                 : ${node.getChannel()                     }\"\n    println \"getDisplayName()             : ${node.getDisplayName()                 }\"\n    println \"getLabelString()             : ${node.getLabelString()                 }\"\n    println \"getMode()                    : ${node.getMode()                        }\"\n    println \"getNodeDescription()         : ${node.getNodeDescription()             }\"\n    println \"getNodeName()                : ${node.getNodeName()                    }\"\n    println \"getRootPath()                : ${node.getRootPath()                    }\"\n    println \"getSearchUrl()               : ${node.getSearchUrl()                   }\"\n    println \"getSelfLabel()               : ${node.getSelfLabel()                   }\"\n    println \"isAcceptingTasks()           : ${node.isAcceptingTasks()               }\"\n    println \"isHoldOffLaunchUntilSave()   : ${node.isHoldOffLaunchUntilSave()       }\"\n}\n\ndef stopBuild(def build) {\n    build.doStop()\n}\n\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Jenkins"]},"/note/Jenkins-%E3%83%93%E3%83%AB%E3%83%89%E3%81%AEChangeSets%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B":{"title":"Jenkins ãƒ“ãƒ«ãƒ‰ã®ChangeSetsã‚’å–å¾—ã™ã‚‹","content":"\n[How to access Changelogs in a Pipeline Job?](https://docs.cloudbees.com/docs/cloudbees-ci-kb/latest/client-and-managed-masters/how-to-access-changelogs-in-a-pipeline-job)\n\n````groovy\ndef changeSets = Jenkins.get().getItemByFullName(\"myjob\").builds[0].changeSets\n\nfor (def changeSet: changeSets) {\n    for (def entry: changeSet) {\n        println \"${entry.commitId} by ${entry.author} on ${new Date(entry.timestamp)}: ${entry.msg}\"\n        def files = new ArrayList(entry.affectedFiles)\n        for (int k = 0; k \u003c files.size(); k++) {\n            def file = files[k]\n            println \"  ${file.editType.name} ${file.path}\"\n        }\n    }\n}\n\n    ```\n\n## Upstream buildã‚’å–å¾—ã™ã‚‹\n    \n[how to get upstream build information in a script step of jenkins classic ui pipeline - Stack Overflow](https://stackoverflow.com/questions/70291635/how-to-get-upstream-build-information-in-a-script-step-of-jenkins-classic-ui-pip)\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/04/19","Jenkins"]},"/note/Jenkins-%E5%89%8D%E5%9B%9E%E3%81%AE%E3%83%93%E3%83%AB%E3%83%89%E3%81%AEarchiveArtifact%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B":{"title":"Jenkins å‰å›ã®ãƒ“ãƒ«ãƒ‰ã®archiveArtifactã‚’å–å¾—ã™ã‚‹","content":"\nå‰å›ã®ãƒ“ãƒ«ãƒ‰ã®æˆæœç‰©ã‚’å–å¾—ã—ãŸã„ã“ã¨ãŒãŸã¾ã«ã‚ã‚‹ã®ã§èª¿ã¹ãŸã€‚\n\nresult.txtã‚’archiveã—ã¦ã„ã‚‹ã¨ã—ã¦è€ƒãˆã‚‹\n\n## ArtifactManagerã‚’ä½¿ã†å ´åˆ\n\nhttps://javadoc.jenkins.io/hudson/model/Run.html?is-external=true#getArtifactManager()\n\n`Run.getArtifactManager().root().child(\"relativepath/to/file\")`  ã§ [VirtualFile](https://javadoc.jenkins-ci.org/jenkins/util/VirtualFile.html) ãŒå–å¾—ã§ãã‚‹\n\n````\n    script {\n        def build = currentBuild.previousBuild.rawBuild\n        def am = build.artifactManager\n        def virtualFile = am.root().child('result.txt')\n        println virtualFile\n    }\n````\n\n## shellå†…ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã„ãŸã„å ´åˆ\n\nhttps://javadoc.jenkins.io/hudson/model/Run.html?is-external=true#getRootDir()\n\n`Run.getRootDir()` ã§ãƒ“ãƒ«ãƒ‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ `java.io.File` ã¨ã—ã¦å–å¾—ã§ãã‚‹\nã‚ã¨ã¯getAbsolutePathã§çµ¶å¯¾ãƒ‘ã‚¹ã‚’å–å¾—ã™ã‚‹ãªã©ã™ã‚‹\n\n````\n    script {\n        def prevBuild = currentBuild.previousBuild\n        def prevBuildPath = prevBuild.rawBuild.rootDir.absolutePath\n        \n        withEnv([\"PREV_BUILD=${prevBuildPath}\"]) {\n            sh '''\n            echo '----prev ${prevBuildPath}----'\n            cat ${PREV_BUILD}/archive/result.txt\n            '''\n        }\n\n    }\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/04/20","Jenkins"]},"/note/Jenkins-Configuration-as-Code":{"title":"Jenkins Configuration as Code","content":"\nJCasC\n\nJenkinsã®è¨­å®šã‚’ã‚³ãƒ¼ãƒ‰åŒ–ã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³\n\nhttps://github.com/jenkinsci/configuration-as-code-plugin\n\n## Kubernetesã§ä½¿ç”¨ã™ã‚‹\n\nhelmã‚’ä½¿ã†\nhttps://github.com/jenkinsci/helm-charts\n\n`CASC_JENKINS_CONFIG=/var/jenkins_home/casc_config` ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã“ã“ã«è¨­å®šãŒç½®ã‹ã‚Œã‚‹ã‚ˆã†ã«ä½œã‚‹\n\n## Job DSLã¨ã®é€£æº\n\n\u003chttps://github.com/jenkinsci/job-dsl-plugin/blob/master/docs/JCasC.md\u003e\n\nhttps://github.com/jenkinsci/configuration-as-code-plugin/blob/master/docs/seed-jobs.md\n\n* ConfigMapã§jobs.yamlã‚’ä½œã£ã¦ `$CASC_JENKINS_CONFIG ` ã«ç½®ã\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Jenkins"]},"/note/Jenkins-HTML-Publisher%E3%81%A7%E5%85%AC%E9%96%8B%E3%81%97%E3%81%9FHTML%E3%81%ABCSS%E3%81%8C%E5%BD%93%E3%81%9F%E3%82%89%E3%81%AA%E3%81%84":{"title":"Jenkins HTML Publisherã§å…¬é–‹ã—ãŸHTMLã«CSSãŒå½“ãŸã‚‰ãªã„","content":"\n## äº‹è±¡\n\n[Jenkins - HTML Publisher Plugin - No CSS is displayed when report is viewed in Jenkins Server](https://stackoverflow.com/questions/35783964/jenkins-html-publisher-plugin-no-css-is-displayed-when-report-is-viewed-in-j)\n\n[note/Jenkins](Jenkins.md) HTML Publisher Pluginã§å…¬é–‹ã—ãŸhtmlã§ã€CSSãŒèª­ã¿è¾¼ã¾ã‚Œãšã‚¹ã‚¿ã‚¤ãƒ«ãŒå½“ãŸã‚‰ãªã„ã€‚\nãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‡ºã¦ã„ãŸã€‚\n\n````\nbecause it violates the following Content Security Policy directive: \"default-src https: 'unsafe-inline'\". Note that 'img-src' was not explicitly set, so 'default-src' is used as a fallback.\n````\n\n## æ‰‹é †\n\n### HTMLã‚’å…¬é–‹ã™ã‚‹\n\n[Jenkins ã® HTML Publisher Plugin ã‚’ä½¿ã£ã¦ã€Gauge ãŒå‡ºã—ãŸãƒ†ã‚¹ãƒˆçµæœã® HTML ãƒ¬ãƒãƒ¼ãƒˆã‚’ã„ã„æ„Ÿã˜ã«è¦‹ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹ - ã‚†ãµã¦ã£ãã€‚](https://yufutech.hatenablog.com/entry/2021/03/07/201536)\n\nã“ã¡ã‚‰ã®ã‚ˆã†ã«ã—ã¦html,cssã‚’ä½œæˆã—ãŸ\n\n````groovy\npipeline {\n  stages {\n      stage('make html') {\n          steps {\n              sh '''\n              mkdir -p report\n              echo \"\u003chtml\u003e\u003chead\u003e \u003clink rel=\"stylesheet\" href=\"index.css\"\u003e \u003c/head\u003e \u003cbody\u003e\u003cdiv\u003eHello, world\u003c/div\u003e\u003c/body\u003e\u003c/html\u003e\" \u003e report/index.html\n              echo \"div { font-size: \"20px\"; }\" \u003e report/index.css\n              '''\n          }\n      }\n  }\n  post {\n      always {\n          // æˆæœç‰©ã‚’ä¿å­˜\n          archiveArtifacts artifacts: 'report/*'\n          // publish html\n          publishHTML target: [\n            allowMissing: false,\n            alwaysLinkToLastBuild: true,\n            keepAll: false,\n            reportDir: 'report',\n            reportFiles: '*',\n            reportName: 'html-report'\n          ]\n      }\n  }\n}\n````\n\n`${ã‚¸ãƒ§ãƒ–ã®URL}/${reportNameã§æŒ‡å®šã—ãŸåå‰}` ã§htmlã‚’é–‹ãã“ã¨ãŒã§ãã‚‹ãŒã€ã“ã‚Œã ã‘ã ã¨ã‚¹ã‚¿ã‚¤ãƒ«ãŒã‚ãŸã£ã¦ã„ãªã„ãŸã‚ã€Jenkins ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®šã‚’å¤‰æ›´ã™ã‚‹ã€‚\n\n### ä¸€æ™‚çš„\n\nJenkinsã®ç®¡ç† \u003e ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚³ãƒ³ã‚½ãƒ¼ãƒ« ã«ã¦ä»¥ä¸‹ã‚’å…¥åŠ›ã—ã¦å®Ÿè¡Œã™ã‚‹\n\n````java\nSystem.setProperty(\"hudson.model.DirectoryBrowserSupport.CSP\", \"\")\n````\n\nâ†’ Jenkinså†èµ·å‹•ã™ã‚‹ã¨ãƒªã‚»ãƒƒãƒˆã•ã‚Œã‚‹\n\n### æ’ä¹…çš„\n\nJenkinsã®èµ·å‹•æ™‚ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«æŒ‡å®šã™ã‚‹ã“ã¨ã§å¸¸ã«é©ç”¨ã•ã›ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\n\n`sudo vi /etc/sysconfig/jenkins` ã‚’é–‹ã„ã¦ã€ `JENKINS_JAVA_OPTIONS` ã‚’å¤‰æ›´ã™ã‚‹ã€‚\nç©ºã«ã™ã‚‹ã®ã¯å±ãªãã†ãªã®ã§ã€å¿…è¦ãªåˆ†ã ã‘è¨±å¯ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚\n\n````shell\nJENKINS_JAVA_OPTIONS=\"-Djava.awt.headless=true -Dhudson.model.DirectoryBrowserSupport.CSP=\\\"default-src 'self' 'unsafe-inline' 'unsafe-eval'; img-src 'self' 'unsafe-inline' data:;\\\"\"\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Jenkins"]},"/note/Jenkins-Jenkinsfile%E3%82%92clone%E3%81%99%E3%82%8B%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E3%82%92clean-up%E3%81%99%E3%82%8B":{"title":"Jenkins Jenkinsfileã‚’cloneã™ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’clean upã™ã‚‹","content":"\n## çµŒç·¯\n\nPipelineã‚¸ãƒ§ãƒ–ã‚’é€”ä¸­ã§abortã—ãŸã‚ã¨å†å®Ÿè¡Œã—ãŸã‚‰ã€gitã®index.lockãŒã‚ã‚‹ãŸã‚fetchãŒã§ããªã„ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹å ´åˆãŒã‚ã‚‹ã€‚\n\n````\n stderr: fatal: Unable to create '/var/jenkins_home/workspace/MyJob@script/.../.git/index.lock': File exists.\n \n Another git process seems to be running in this repository, e.g.\n an editor opened by 'git commit'. Please make sure all processes\n are terminated then try again. If it still fails, a git process\n may have crashed in this repository earlier:\n remove the file manually to continue.\n````\n\nã“ã†ãªã£ã¦ã—ã¾ã†ã¨ã€Jenkinsfileã‚’å«ã‚“ã ãƒªãƒã‚¸ãƒˆãƒªã‚’cloneã™ã‚‹å…ˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§gitã®æ“ä½œãŒè¡Œãˆãªã„ã€‚\nJenkinsã‚µãƒ¼ãƒãƒ¼ã«sshã—ã¦ `/var/jenkins_home/workspace/` é…ä¸‹ã®ã‚¸ãƒ§ãƒ–ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å‰Šé™¤ã™ã‚‹ã®ãŒã™ãæ€ã„ã¤ããŒã€ã§ãã‚Œã°sshã›ãšã«æ¸ˆã¾ã›ãŸã„ã€‚\n\n## ã‚„ã£ãŸã“ã¨1\n\nã‚¸ãƒ§ãƒ–ã‚’æ›¸ãæ›ãˆã¦ã€Jenkinsfileã‚’cloneã›ãšç›´æ¥pipelineã‚’æ›¸ãã€clean upã™ã‚‹\n\n````groovy\npipeline {\n    agent any\n\n    stages {\n        stage('clean up') {\n            steps {\n                deleteDir()\n                cleanWs()\n            }\n        }\n    }\n}\n````\n\n=\u003e ã“ã‚Œã ã¨ `/var/jenkins_home/workspace/MyJob/` ã¯æ¶ˆãˆã¦ãã‚Œã‚‹ãŒ `MyJob@scipt` ã¯æ¶ˆãˆãªã‹ã£ãŸ\n\n## ã‚„ã£ãŸã“ã¨2\n\nã“ã¡ã‚‰ã«ç­”ãˆãŒã‚ã£ãŸã€‚\n[continuous integration - Jenkins Pipeline Wipe Out Workspace - Stack Overflow](https://stackoverflow.com/questions/37468455/jenkins-pipeline-wipe-out-workspace)\n\n````groovy\npipeline {\n    agent any\n\n    stages {\n        stage('clean up') {\n            steps {\n                /* clean up tmp directory */\n                dir(\"${env.WORKSPACE}@tmp\") {\n                    deleteDir()\n                }\n                /* clean up script directory */\n                dir(\"${env.WORKSPACE}@script\") {\n                    deleteDir()\n                }\n            }\n        }\n    }\n}\n````\n\nè¦ã™ã‚‹ã« `/var/jenkins_home/workspace/MyJob@script` ã«ç§»å‹•ã—ã¦ `deleteDir()` ã‚’å®Ÿè¡Œã—ã¦ã„ã‚‹ã ã‘\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Jenkins"]},"/note/Jenkins-Job-DSL-Plugin":{"title":"Jenkins Job DSL Plugin","content":"\n[note/Jenkins](Jenkins.md) ã®è¨­å®šã‚„ã‚¸ãƒ§ãƒ–ã‚’Job DSLã¨ã„ã† [Groovy](note/Groovy.md) ã®DSLã§å®šç¾©ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚‹\n\n\u003chttps://plugins.jenkins.io/job-dsl/\u003e\n\u003chttps://github.com/jenkinsci/job-dsl-plugin\u003e\n\n* æ™®é€šã«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³è¨­å®šç”»é¢ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯èƒ½\n* Groovyã®DSLã§ã€Jenkinsã®ã‚¸ãƒ§ãƒ–ã‚„ãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆå¯èƒ½ã«ã™ã‚‹\n* Groovyã‚¹ã‚¯ãƒªãƒ—ãƒˆãªã®ã§ã€åˆ†å²ã‚„åå¾©ãªã©ã‚’ä½¿ã£ã¦è‡ªç”±åº¦é«˜ãã‚¸ãƒ§ãƒ–ãŒä½œæˆã§ãã‚‹\n* DSLã‚’åŸºã«ã€Jenkinsã®ã‚¸ãƒ§ãƒ–ã”ã¨ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«(xml)ã‚’ç”Ÿæˆã™ã‚‹ã‚ˆã†ãªã‚¤ãƒ¡ãƒ¼ã‚¸\n* [Playground](https://job-dsl.herokuapp.com/) ã‚„ [ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³](https://github.com/jenkinsci/job-dsl-plugin/wiki/User-Power-Moves#run-a-dsl-script-locally) ã§Jenkinsã«åæ˜ ã•ã›ã‚‹ã¾ãˆã«å®Ÿéš›ã©ã®ã‚ˆã†ãªXMLãŒç”Ÿæˆã•ã‚Œã‚‹ã‹è©¦ã™ã“ã¨ãŒã§ãã‚‹\n  * ãªãŠPlaygroundã§ã¯è‡ªåˆ†ã§ã„ã‚ŒãŸãƒ—ãƒ©ã‚°ã‚¤ãƒ³(listGitBranchãªã©)ã¯ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã“ã¨ãŒã§ããªã„\n\n## DSLã‹ã‚‰ã‚¸ãƒ§ãƒ–ã‚’ä½œæˆã™ã‚‹æ–¹æ³•\n\n1. Jenkinsã‚¸ãƒ§ãƒ–ã‚’ä½œæˆ\n1. è¨­å®šã§Build stepã« `Process Job DSL` ãŒã‚ã‚‹ã®ã§é¸æŠã™ã‚‹\n1. æ‰‹ã§ç›´æ¥å…¥åŠ›ã—ãŸã‘ã‚Œã°ã€ `Use the provided DSL script` ã«ãƒã‚§ãƒƒã‚¯ã‚’å…¥ã‚Œã¦DSLã‚’å…¥åŠ›\n1. `Look on Filesystem` ã§ã‚µãƒ¼ãƒãƒ¼ä¸Šã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚å¯èƒ½\n1. è¨­å®šå®Œäº†ã—ãŸã‚‰ä¿å­˜ã—ã¦ã€ã‚¸ãƒ§ãƒ–ã‚’å®Ÿè¡Œã™ã‚‹\n\n````groovy\nfolder('deplly') {\n    description('Folder for deploy')\n}\n\npipelineJob(\"deploy/server\") {\n    description(\"ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¸ãƒ§ãƒ–\")\n    parameters {\n        stringParam(\"FILE\", \"exec.tar.gz\", \"ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«å\")\n        gitParam('sha') {\n            description('Revision commit SHA')\n            type('REVISION')\n            branch('master')\n        }\n\n    }\n\n    throttleConcurrentBuilds {\n        maxPerNode(1)\n        maxTotal(1)\n        throttleDisabled(false)\n    }\n\n    logRotator {\n        numToKeep(5)\n    }\n\n    definition {\n        cpsScm {\n            scm {\n                git {\n                    configure { git -\u003e\n                        // sparse checkoutã®ã‚ˆã†ãªã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ãŸã„å ´åˆ\n                        git / 'extensions' / 'hudson.plugins.git.extensions.impl.SparseCheckoutPaths' / 'sparseCheckoutPaths' {\n                            'hudson.plugins.git.extensions.impl.SparseCheckoutPath' {\n                                path('script')\n                            }\n                        }\n                    }\n                    remote {\n                        url('ssh://git@bitbucket.org/workspace/slug.git')\n                        credentials('bitbucket_credential')\n                    }\n                    branch('*/master')\n                }\n            }\n            lightweight(false)\n            scriptPath(\"Jenkinsfile\")\n        }\n    }\n\n}\n\n````\n\n````groovy\ndef REPOSITORY_URL = '\u003crepository URL\u003e'\ndef CREDENTIAL = '\u003ccredential\u003e'\npipelineJob(\"deploy/server\") {\n    description(\"ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¸ãƒ§ãƒ–\")\n    parameters {\n         listGitBranches {\n             name(\"REVISION\")\n             description('git branch')\n             remoteURL(REPOSITORY_URL)\n             credentialsId(CREDENTIAL)\n             defaultValue('refs/heads/master')\n             selectedValue('DEFAULT')\n             sortMode('ASCENDING_SMART')\n             quickFilterEnabled(true)\n             type('PT_BRANCH_TAG')\n             tagFilter('*')\n             branchFilter('.*')\n         }\n    }\n\n    logRotator {\n        numToKeep(5)\n    }\n\n    definition {\n        cps {\n            script(pipelineTemplate())\n            sandbox()\n        }\n    }\n\n}\n\n def pipelineTemplate() {\n   return '''\npipeline {\n  agent {\n    node {\n      label 'worker'\n    }\n  }\n\n  options {\n    ansiColor('xterm')\n    buildDiscarder logRotator(numToKeepStr: '5')\n    timestamps()\n  }\n\n  stages {\n\n    stage('prepare') {\n      steps {\n        wrap([$class: 'BuildUser']) {\n          script {\n            currentBuild.description = \"${BUILD_USER_ID} ${params.REVISION}\"\n\n            deleteDir()\n\n            def revision = params.REVISION.startsWith('refs/heads') ? params.REVISION : \"refs/tags/${params.REVISION}\"\n\n            checkout([\n                $class                           : 'GitSCM',\n                branches                         : [[name: \"$revision\"]],\n                userRemoteConfigs                : [\n                    [credentialsId: \"\u003ccredential id\u003e\", url: \"\u003crepository url\u003e\"],\n                ]\n            ])\n\n          }\n        }\n      }\n    }\n  }\n}'''.stripIndent()\n \n}\n\n````\n\n## ä»–ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¸ã®å¯¾å¿œ\n\nãŸã¨ãˆã°ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®è¨­å®šæ™‚ã«ã¯æ–‡å­—åˆ—ã‚„é¸æŠå€¤ã®ä»–ã€Git Parameterãªã©ãƒ¡ã‚¸ãƒ£ãƒ¼ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ã‚‚å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚\nã™ã¹ã¦ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«å¯¾å¿œã™ã‚‹ã“ã¨ã¯ä¸å¯èƒ½ãªã®ã§ã€å®šç¾©ã•ã‚Œã¦ã„ãªã„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã«ã¤ã„ã¦ã¯ [Dynamic DSL](https://github.com/jenkinsci/job-dsl-plugin/wiki/Dynamic-DSL) ã«ã‚ˆã£ã¦ä½¿ç”¨å¯èƒ½ã«ãªã‚Šã¾ã™ã€‚\nãã‚Œã§ã‚‚å¯¾å¿œä¸å¯èƒ½ãªå ´åˆã¯[Configure Block](https://github.com/jenkinsci/job-dsl-plugin/wiki/The-Configure-Block) ã§ç›´æ¥xmlã‚’è¨˜è¿°ã™ã‚‹ã‚ˆã†ãªã“ã¨ã‚‚ã§ãã¾ã™ã€‚\n\nã“ã®è¾ºãŒæ‹¡å¼µæ€§é«˜ãä½œã‚‰ã‚Œã¦ã„ã‚‹ã®ã¯ç´ æ™´ã‚‰ã—ã„ã§ã™ã­ã€‚\n\n### Dynamic DSL\n\nã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã®[API Viewer](https://jenkinsci.github.io/job-dsl-plugin/)ã§ã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹APIãŒæ¤œç´¢ã§ãã¾ã™ãŒã€\nã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®APIã¯ã€è‡ªåˆ†ã®Jenkinsã®API Viewer(\u003chttps://JENKINS-HOST/plugin/job-dsl/api-viewer/index.html\u003e)ã§ç¢ºèªã§ãã¾ã™ã€‚\n\nGit Parameter Pluginã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã‚‹å ´åˆã€ `gitParam` ä»¥å¤–ã« `gitParameter` ãŒè¦‹å½“ãŸã‚‹ã¨æ€ã„ã¾ã™ã€‚\n\u003chttps://HOST/plugin/job-dsl/api-viewer/index.html#method/javaposse.jobdsl.dsl.helpers.BuildParametersContext.gitParameter\u003e\n\nDynamic DSLã®å ´åˆã¯API Viewerä¸Šã§ã¯å³ä¸Šã«ç´«è‰²ã®ã‚¢ã‚¤ã‚³ãƒ³ã§ Dynamic ã¨è¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚\n\n````groovy\npipelineJob(\"foo\") {\n    parameters {\n        gitParameter {\n            name(\"BRANCH\")\n            description('git branch')\n            defaultValue('master')\n            selectedValue('DEFAULT')\n            sortMode('ASCENDING_SMART')\n            quickFilterEnabled(true)\n            type('Branch')\n            tagFilter('*')\n            branchFilter('refs/heads/(.*)')\n        }\n        \n        // ...\n    }\n    \n    // ...\n}\n````\n\nä¸€ç‚¹æ³¨æ„ã¨ã—ã¦ã¯ã€API Viewerã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’é–‹ãã¨ `Required` ãŒã¤ã„ã¦ã„ãŸã‚Šã€è¨­å®šå¯èƒ½ãªæ–‡å­—åˆ—ã®ä¸€è¦§ãŒè¡¨ç¤ºã•ã‚ŒãŸã‚Šã—ã¾ã™ã€‚è¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã¨ãŠã‚Šã«å®ˆã‚‰ãªã„ã¨ã€è¨­å®šãŒåæ˜ ã•ã‚Œã¾ã›ã‚“ã€‚\n`description` ã„ã‚‰ã‚“ã‚„ã‚ã¨æ€ã£ã¦æ›¸ã‹ãªã„ã§ã„ãŸã‚‰ã„ã¤ã¾ã§ã‚‚åæ˜ ã•ã‚Œãšã€åŸå› ç‰¹å®šã«æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã—ãŸâ€¦ã€‚\n\n`gitParam` ã«ã¤ã„ã¦ã¯çµ„ã¿è¾¼ã¿DSLã«ã‚‚ã‚ã‚‹ã®ã«Dynamic DSLã‚’ä½¿ã†åˆ©ç‚¹ã¨ã—ã¦ã¯ã€ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®æ©Ÿèƒ½æ‹¡å¼µã«è¿½å¾“ã—ã¦ãŠã‚‰ãšè¨­å®šãŒä¸ä¾¿ãªå ´åˆã®è£œå®ŒãŒã§ãã‚‹ç‚¹ã§ã™ã€‚\nä¾‹ãˆã° `gitParam` ã§ã¯ `quickFilter` ã®è¨­å®šãŒã§ãã¾ã›ã‚“ãŒ `gitParameter` ã§ã¯ã§ãã‚‹ã€ãªã©ã§ã™ã€‚\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Jenkins"]},"/note/Jenkins-JobDSL%E3%82%92CI%E3%81%A7validate%E3%81%97%E3%81%9F%E3%81%84":{"title":"Jenkins JobDSLã‚’CIã§validateã—ãŸã„","content":"\n[Jenkins Job DSL Plugin](note/Jenkins%20Job%20DSL%20Plugin.md)\n\n[job-dsl-plugin/Testing-DSL-Scripts.md at master Â· jenkinsci/job-dsl-plugin Â· GitHub](https://github.com/jenkinsci/job-dsl-plugin/blob/master/docs/Testing-DSL-Scripts.md)\nå…¬å¼ã§testã®æ–¹æ³•æ›¸ã„ã¦ãã‚ŒãŸã®ã§ã¾ãšã¯ã“ã‚Œã‚’è©¦ã—ã¦ã¿ã‚‹\n\n### gradleåˆæœŸåŒ–\n\n````\ngradle init\n````\n\nã‚µãƒ³ãƒ—ãƒ«ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³å¤ãã¦å‹•ã‹ãªã‹ã£ãŸã®ã§ä¸Šã’ã¦ã¿ãŸã‘ã©ã€testãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒèªè­˜ã•ã‚Œãªã„ï¼Ÿã®ã‹å®Ÿè¡Œã•ã‚Œãªã„ã§çµ‚äº†ã™ã‚‹\n\nbuild.gradle\n\n````groovy\nplugins {\n  id 'groovy'\n}\n\nsourceSets {\n    jobs {\n        groovy {\n            srcDirs 'manifest/jenkins/overlays'\n        }\n    }\n    test {\n        groovy {\n            srcDir 'src/test/groovy'\n        }\n    }\n}\n\next {\n    jobDslVersion = '1.78.1'\n    jenkinsVersion = '2.319.3'\n}\n\nrepositories {\n    mavenCentral()\n    maven {\n        url 'https://repo.jenkins-ci.org/public/'\n    }\n}\n\nconfigurations {\n    testPlugins {}\n\n    // see JENKINS-45512\n    testCompile {\n        exclude group: 'xalan'\n        exclude group: 'xerces'\n    }\n}\n\ndependencies {\n    implementation 'org.codehaus.groovy:groovy-all:3.0.11'\n\n    testImplementation platform(\"org.spockframework:spock-bom:2.1-groovy-3.0\")\n    testImplementation \"org.spockframework:spock-core\"\n    testImplementation \"org.spockframework:spock-junit4\"  // you can remove this if your code does not rely on old JUnit 4 rules\n\n    // Jenkins test harness dependencies\n    testImplementation 'org.jenkins-ci.main:jenkins-test-harness:1794.vfb_4a_4cde0824'\n    testImplementation \"org.jenkins-ci.main:jenkins-war:${jenkinsVersion}\"\n\n    // Job DSL plugin including plugin dependencies\n    testImplementation \"org.jenkins-ci.plugins:job-dsl:${jobDslVersion}\"\n    testImplementation \"org.jenkins-ci.plugins:job-dsl:${jobDslVersion}@jar\"\n    testImplementation 'org.jenkins-ci.plugins:structs:1.19@jar'\n    testImplementation 'org.jenkins-ci.plugins:script-security:1.54@jar'\n\n    // plugins to install in test instance\n    testPlugins 'org.jenkins-ci.plugins:ghprb:1.31.4'\n    testPlugins 'com.coravy.hudson.plugins.github:github:1.28.0'\n}\n\ntask resolveTestPlugins(type: Copy) {\n    from configurations.testPlugins\n    into new File(sourceSets.test.output.resourcesDir, 'test-dependencies')\n    include '*.hpi'\n    include '*.jpi'\n\n    doLast {\n        def baseNames = source.collect { it.name[0..it.name.lastIndexOf('.')-1] }\n        new File(destinationDir, 'index').setText(baseNames.join('\\n'), 'UTF-8')\n    }\n}\n\ntest {\n    dependsOn tasks.resolveTestPlugins\n    inputs.files sourceSets.jobs.groovy.srcDirs\n\n    // set build directory for Jenkins test harness, JENKINS-26331\n    systemProperty 'buildDirectory', project.buildDir.absolutePath\n}\n\n````\n\n### Spock\n\n[13. ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ - Apache Groovyãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«](https://koji-k.github.io/groovy-tutorial/unit-test/index.html)\nGroovyã®ãƒ†ã‚¹ãƒ†ã‚£ãƒ³ã‚°ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ã‚‰ã—ã„ã€‚èã„ãŸã“ã¨ãªã‹ã£ãŸ\n\n\u003chttps://github.com/sheehan/job-dsl-gradle-example\u003e\n-\u003e è‡ªåˆ†ã§ã“ã®æ§‹æˆã‚’çœŸä¼¼ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã£ãŸã‚‰å‹•ã ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã—ã‚„ã™ã„ã®ã§ã“ã‚ŒãŒè‰¯ã•ãã†\n\n\u003chttps://github.com/AOEpeople/gradle-jenkins-job-dsl-plugin\u003e\n-\u003e gradle 6ç³»ã«ã—ãŸã‚‰ã¨ã‚Šã‚ãˆãšå‹•ã\n\n\u003chttps://github.com/johnmartel/jenkins-job-dsl-script-validator-plugin\u003e\n-\u003e ãƒãƒ¼ã‚¸ãƒ§ãƒ³å¤ã™ãã¦å‹•ã‹ãªã‹ã£ãŸ\n\n## ã‚¨ãƒ©ãƒ¼å¯¾å‡¦\n\n./gradlew test ã§ãƒ†ã‚¹ãƒˆå®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸ\n\n### `version 2.4 or later of plugin 'workflow-job' needs to be installed`\n\n\u003chttps://github.com/AOEpeople/gradle-jenkins-job-dsl-plugin/issues/16\u003e\nã‚ˆã‚Šæ–°ã—ã„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å…¥ã‚Œã¦ã‚‚ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã€ã´ã£ãŸã‚Šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ãªã„ã¨ã ã‚ æ­£è¦è¡¨ç¾ãŒãŠã‹ã—ã„ã£ã½ã„\n\n\u003chttps://mvnrepository.com/artifact/org.jenkins-ci.plugins.workflow/workflow-job?repo=jenkins-incrementals\u003e\n\n#### `Caused by: javaposse.jobdsl.dsl.DslScriptException: (script, line 6) No signature of method: javaposse.jobdsl.dsl.helpers.BuildParametersContext.booleanParam() is applicable for argument types: (java.util.LinkedHashMap) values: [[parameterName:FOO, defaultValue:false]]`\n\nåå‰ä»˜ãå¼•æ•°ã§æ›¸ã„ã¦ã‚‹ã¨ã“ã‚ãŒã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã‚‹\nå®Ÿéš›ã«ã¯ã‚¸ãƒ§ãƒ–åæ˜ ã•ã‚Œã¦ã„ã‚‹\n\u003chttp://job-dsl.herokuapp.com\u003e ã§å®Ÿè¡Œã™ã‚‹ã¨ãŸã—ã‹ã«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã‹ã‚‰æ›¸ãæ–¹å¤‰ãˆã‚‹ã¹ããªã®ã‹\n\n### `Could not create item, unknown parent path in \"path/to/job\"`\n\nfoldersã§è¦ªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä½œã‚‰ã‚Œã‚‹ã¯ãšã ã‘ã©ã€èª­ã¿è¾¼ã¿é †ã®å•é¡Œã‹ã‚‚ã—ã‚Œãªã„\n\n### `Caused by: java.lang.NoClassDefFoundError: com/cloudbees/hudson/plugins/folder/Folder`\n\nFolders pluginã¯ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã‚‹ã®ã«ãªãœ\nãªãœã‹ã²ã¨ã¤ã®ã‚µãƒ–ãƒ•ã‚©ãƒ«ãƒ€ã ã‘ã§ãƒ†ã‚¹ãƒˆã™ã‚‹ã¨ã†ã¾ãã„ãã€è¤‡æ•°ã®ãƒ•ã‚¡ã‚¤ãƒ«ä¸€æ°—ã«ãƒ†ã‚¹ãƒˆã—ã‚ˆã†ã¨ã™ã‚‹ã¨ç™ºç”Ÿã™ã‚‹\n\n### `No signature of method: javaposse.jobdsl.dsl.helpers.BuildParametersContext.gitParameter`\n\ngit-parameterãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã¯è¿½åŠ ã—ã¦ã„ã‚‹ã®ã«è§£æ¶ˆã•ã‚Œãªã„\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Jenkins"]},"/note/Jenkins-JobDSL-Tips-%E5%A4%96%E9%83%A8%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92import%E3%81%99%E3%82%8B%E3%81%AA%E3%81%A9":{"title":"Jenkins JobDSL Tips å¤–éƒ¨ãƒ•ã‚¡ã‚¤ãƒ«ã‚’importã™ã‚‹ãªã©","content":"\n[Jenkins Job DSL Plugin](note/Jenkins%20Job%20DSL%20Plugin.md) ã®TIPS\n\n## job DSLã®ã‚µãƒ³ãƒ—ãƒ«é›†\n\nhttps://github.com/edx/jenkins-job-dsl\nhttps://github.com/sheehan/job-dsl-gradle-example\nhttps://github.com/unguiculus/job-dsl-sample\n\n## ä¸Šç´šè€…å‘ã‘ã‚ªãƒ—ã‚·ãƒ§ãƒ³\n\nhttps://github.com/jenkinsci/job-dsl-plugin/blob/master/docs/User-Power-Moves.md\n\n## JCasCã¨ã®é€£æº\n\nhttps://github.com/jenkinsci/job-dsl-plugin/blob/master/docs/JCasC.md\n\nYou can pass values from the YAML file to the Job DSL script.\n\n### å…±é€šã§ä½¿ãˆã‚‹å¤‰æ•°ã‚’å®šç¾©ã™ã‚‹\n\n````yaml\njobs:\n  - providedEnv:\n      SUPERHERO: 'Midnighter'\n  - file: ./jobdsl/job.groovy\n````\n\n````groovy\n//job.groovy\njob('awesome-job') {\n    description(\"favorite job of ${SUPERHERO}\")\n}\n````\n\n## åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã‚’importã™ã‚‹\n\nhttps://github.com/jenkinsci/job-dsl-plugin/blob/master/docs/Real-World-Examples.md#import-other-files-ie-with-class-definitions-into-your-script\n\nãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã©ã“ã«ç½®ã„ãŸã‚‰ã„ã„ã®ã‹ã“ã‚Œã‚’è¦‹ã¦ã‚‚ã‚ˆãã‚ã‹ã‚‰ãªã„ã€‚\nGradleã§ä½œã‚‹ã®ãŒå‰æãªã®ï¼Ÿ\nclasspathä¸Šã«ç½®ã„ã¨ã„ãŸã‚‰ã„ã„ã‚“ã ã‚ã†ã‹\n\n## Job DSLã®Factoryã‚’ä½œã‚‹\n\nhttps://github.com/jenkinsci/job-dsl-plugin/blob/master/docs/Job-DSL-Commands.md#dsl-factory\n\n \u003e \n \u003e Because the engine is just Groovy, you can call other Groovy classes on the classpath\n\nclasspathã©ã“â€¦\n\n[ã“ã†ã„ã†ã‚¯ãƒ©ã‚¹](https://github.com/sheehan/job-dsl-gradle-example/blob/master/src/main/groovy/com/dslexample/builder/GradleCiJobBuilder.groovy)ã‚’ä½œã£ã¦ã€[dslã®ã»ã†ã§èª­ã¿è¾¼ã¾ã›ã‚‹](https://github.com/sheehan/job-dsl-gradle-example/blob/master/src/jobs/example7Jobs.groovy)\n\nJCasCã§ã¯ã§ããªã„ã‹ã‚‚ã—ã‚Œãªã„ğŸ˜\nhttps://github.com/jenkinsci/configuration-as-code-plugin/issues/1355\n\n## groovyã‚’loadã™ã‚‹\n\n[Jenkins / Groovy language patterns](https://gist.github.com/thikade/5e68a99d611510a521ad74d5f9c88a13)\n\n## IDEã§è£œå®Œã‚’åŠ¹ã‹ã›ãŸã„\n\nhttps://github.com/jenkinsci/job-dsl-plugin/blob/master/docs/IDE-Support.md\n\n## script consoleã‹ã‚‰Job DSLã®APIã‚’å©ã„ã¦ã‚¸ãƒ§ãƒ–ã‚’ä½œã‚‹\n\nã“ã‚Œã‚’è²¼ã£ã¦å®Ÿè¡Œã™ã‚‹ã ã‘\n\n````groovy\nimport javaposse.jobdsl.dsl.*\nimport  javaposse.jobdsl.plugin.*\n\nJenkinsJobManagement jm = new JenkinsJobManagement(System.out, [:], new File('.'));\nDslScriptLoader dslScriptLoader = new DslScriptLoader(jm)\ndslScriptLoader.runScript(\"folder('project-a')\")\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Jenkins"]},"/note/Jenkins-Kubernetes-plugin%E3%81%A7inheritFrom%E3%82%92%E4%B8%8A%E6%9B%B8%E3%81%8D%E3%81%97%E3%81%A4%E3%81%A4pod%E5%90%8D%E3%81%ABprefix%E3%82%92%E3%81%A4%E3%81%91%E3%82%8B":{"title":"Jenkins Kubernetes pluginã§inheritFromã‚’ä¸Šæ›¸ãã—ã¤ã¤podåã«prefixã‚’ã¤ã‘ã‚‹","content":"\nconfigure cloudsã®è¨­å®šã§podTemplateã‚’å®šç¾©ãšã¿ã§ã€ `inheritFrom` ã§ç¶™æ‰¿ã—ã¤ã¤ä¸€éƒ¨ã ã‘ã‚’ä¸Šæ›¸ãã—ãŸã„ã¨ãã®æ›¸ãæ–¹\n\npodTemplateã®è¨­å®š\n\n* name `my-jenkins-agent`\n* labels `my-jenkins-agent`\n\n````groovy\npipeline {\n  agent {\n    kubernetes {\n      inheritFrom 'my-jenkins-agent'\n      label 'my-jenkins-agent'\n      yamlMergeStrategy merge()\n      yaml '''\n        apiVersion: v1\n        kind: Pod\n        metadata:\n          labels:\n            some-label: some-label-value\n        spec:\n          containers:\n          - name: maven\n            image: maven:alpine\n            command:\n            - cat\n            tty: true\n\n        '''\n    }\n  }\n  stages {\n    stage('Run maven') {\n      steps {\n        container('maven') {\n          sh 'mvn -version'\n        }\n      }\n    }\n  }\n}\n\n````\n\nã“ã†ã™ã‚‹ã¨ã€è¨­å®šæ¸ˆã¿ã®podTemplateãŒä½¿ã‚ã‚Œã¦ `yaml` ã«æ›¸ã„ãŸå®šç¾©ã¯åæ˜ ã•ã‚Œãªã„ã€‚\nlabelãŒå®Œå…¨ä¸€è‡´ã—ã¦ã„ã‚‹ã¨ä¸Šæ›¸ãã§ããªã„ã®ã‹ã‚‚ï¼Ÿ\n\n````groovy\n    kubernetes {\n      inheritFrom 'my-jenkins-agent'\n      // label 'my-jenkins-agent'\n      yamlMergeStrategy merge()\n      yaml '''\n        apiVersion: v1\n        kind: Pod\n        metadata:\n          labels:\n            some-label: some-label-value\n        spec:\n          containers:\n          - name: maven\n            image: maven:alpine\n            command:\n            - cat\n            tty: true\n\n        '''\n    }\n````\n\n`label` ã‚’å‰Šé™¤ã™ã‚‹ã¨ `yaml` ã®å®šç¾©ãŒåæ˜ ã•ã‚Œã‚‹ãŒã€podåãŒ `my-jenkins-agent-\u003crandom string\u003e` ã¨ã¯ãªã‚‰ãšã€ã‚¸ãƒ§ãƒ–åãŒprefixã«ã¤ã„ãŸpodãŒä½œæˆã•ã‚Œã‚‹\n\n````groovy\n    kubernetes {\n      inheritFrom 'my-jenkins-agent'\n      label 'my-jenkins-agent-custom'\n      yamlMergeStrategy merge()\n      yaml '''\n        apiVersion: v1\n        kind: Pod\n        metadata:\n          labels:\n            some-label: some-label-value\n        spec:\n          containers:\n          - name: maven\n            image: maven:alpine\n            command:\n            - cat\n            tty: true\n\n        '''\n    }\n````\n\nã“ã®ã‚ˆã†ã« `label` ã« podTemplate ã¨ã¯ç•°ãªã‚‹å€¤ã‚’ã¤ã‘ã‚‹ã“ã¨ã§ã€ `my-jenkins-agent-custom-\u003crandom string\u003e` ã¨ã„ã†podã§ä½œæˆã•ã‚ŒãŸã€‚\ncustom ã¨ã„ã†ã®ãŒå…¥ã£ã¦ã—ã¾ã†ã®ã¯æ°—ã«ãªã‚‹ãŒä»•æ–¹ãªã„\n\npodTemplateã®labelsã®è¨­å®šã‚’æ¶ˆã™ã“ã¨ã§ã€  `label 'my-jenkins-agent'` ã¨ã—ã¦ã‚‚podåãŒæ„å›³é€šã‚Šã«ãªã‚Šã¤ã¤ä¸Šæ›¸ãã§ããŸã®ã§ã€ã“ã‚Œã§ã‚‚ã„ã„ã€‚\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/02/02","Jenkins"]},"/note/Jenkins-Pipeline":{"title":"Jenkins Pipeline","content":"\n[note/Jenkins](Jenkins.md) ã®ã‚¸ãƒ§ãƒ–è¨­å®šã‚’Pipelineã¨ã„ã†DSLã§å®šç¾©ã§ãã‚‹\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/05/04","Jenkins"]},"/note/Jenkins-Pipeline%E3%81%A7Parameter%E3%81%AEFile%E3%81%8C%E5%8B%95%E4%BD%9C%E3%81%97%E3%81%AA%E3%81%84%E3%83%90%E3%82%B0":{"title":"Jenkins Pipelineã§Parameterã®FileãŒå‹•ä½œã—ãªã„ãƒã‚°","content":"\n[note/Jenkins](Jenkins.md) pluginã®ãƒã‚°\n\n\u003chttps://issues.jenkins.io/browse/JENKINS-27413\u003e\n\u003chttps://stackoverflow.com/questions/38080876/jenkins-pipeline-job-with-file-parameter\u003e\n\npipelineã˜ã‚ƒãªããµã¤ã†ã®ã‚¸ãƒ§ãƒ–ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«Fileã‚’æŒ‡å®šã™ã‚‹åˆ†ã«ã¯å•é¡Œãªã„\n\n![Pasted-image-20210921192112](note/Pasted-image-20210921192112.png)\n![Pasted-image-20210921192126](note/Pasted-image-20210921192126.png)\n\npipelineã§æŒ‡å®šã™ã‚‹ã¨ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œãªã„\n\n````groovy\npipeline {\n  agent any\n  parameters {\n    file (\n        name: 'file.txt',\n    )\n  }\n}\n````\n\n## å¯¾å¿œ\n\nhttps://plugins.jenkins.io/file-parameters/ ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ã†\n\nå¤§ãã„ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ `stashedFile`ã€å°ã•ã„ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯ `base64File` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã™ã‚‹\n\n````groovy\npipeline {\n  agent any\n  parameters {\n    base64File 'small'\n    stashedFile 'large'\n  }\n  stages {\n    stage('Example') {\n      steps {\n        withFileParameter('small') {\n          sh 'cat $small'\n        }\n        unstash 'large'\n        sh 'cat large'\n      }\n    }\n  }\n}\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Jenkins"]},"/note/Jenkins-Plugin%E3%82%92M1-Mac%E3%81%A7%E9%96%8B%E7%99%BA%E3%81%99%E3%82%8B":{"title":"Jenkins Pluginã‚’M1 Macã§é–‹ç™ºã™ã‚‹","content":"\n[note/Jenkins](Jenkins.md) ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’é–‹ç™ºã™ã‚‹\n\n* Java8ãŒå¿…è¦\n\n`mvn hpi:hpi` ã§ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã ã‘ãªã‚‰JDK8ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚Œã°OK\n\n### Jenkinsä¸Šã§ç¢ºèªã—ãŸã„\n\nDockerä¸Šã§ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã‚ˆã‚ã—\n\n````shell\n$ mvn hpi:hpl\n[INFO] Scanning for projects...\n[WARNING] The POM for org.jenkins-ci.tools:maven-hpi-plugin:jar:1.121 is missing, no dependency information available\n[WARNING] Failed to build parent project for org.jenkins-ci.plugins:list-git-branches-parameter:hpi:0.0.12-SNAPSHOT\n[INFO]\n[INFO] ---------\u003c org.jenkins-ci.plugins:list-git-branches-parameter \u003e---------\n[INFO] Building List Git Branches Parameter PlugIn 0.0.12-SNAPSHOT\n[INFO] --------------------------------[ hpi ]---------------------------------\n[INFO]\n[INFO] --- maven-hpi-plugin:1.121:hpl (default-cli) @ list-git-branches-parameter ---\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  2.614 s\n[INFO] Finished at: 2022-07-12T10:53:30+09:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.jenkins-ci.tools:maven-hpi-plugin:1.121:hpl (default-cli) on project list-git-branches-parameter: Property jenkinsHome needs to be set to $JENKINS_HOME. Please use 'mvn -DjenkinsHome=...' orput \u003csettings\u003e\u003cprofiles\u003e\u003cprofile\u003e\u003cproperties\u003e\u003cproperty\u003e\u003cjenkinsHome\u003e...\u003c/...\u003e -\u003e [Help 1]\n[ERROR]\n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR]\n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException\n````\n\n* Jenkinsdd\n\n### hplã®ä½œæˆ\n\n````shell\nmvn -DjenkinsHome=$JENKINS_HOME hpi:hpl\n\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Jenkins"]},"/note/Jenkins-bitbucket-pipelines%E3%81%A7%E5%8B%95%E3%81%8B%E3%81%99":{"title":"Jenkins bitbucket-pipelinesã§å‹•ã‹ã™","content":"\nJenkinsã‚’helm chartã‚’ä½¿ã£ã¦k8sã§å‹•ã‹ã—ã¦ã„ã¦ã€JCasCã®ã‚³ãƒ¼ãƒ‰ã‚’Gitã§ç®¡ç†ã—ã¦ã„ã¦ã€è¨­å®šãŒæ­£ã—ã„ã®ã‹ã©ã†ã‹ã¯åæ˜ ã•ã‚Œã‚‹ã¾ã§ã‚ã‹ã‚‰ãªã„\nã“ã‚Œã‚’CIã§ãƒã‚§ãƒƒã‚¯ã§ãã‚‹ã‚ˆã†ã«ã—ãŸã‹ã£ãŸ\n\n[Jenkins ã‚¸ãƒ§ãƒ–ã‚’ GitHub Actions ä¸Šã§å‹•ã‹ã›ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ](https://zenn.dev/snowcait/articles/c17b08e8f3485f)\nã‚’å‚è€ƒã«ã—ãŸ\n\n## Dockerã§å‹•ã‹ã›ã‚‹ã‚ˆã†ã«ã™ã‚‹\n\n````yaml\nservices:\n  jenkins:\n    build:\n      context: .\n      args:\n        tag: ${JENKINS_IMAGE_TAG}\n    ports:\n      - 8080:8080\n      - 50000:50000\n    environment:\n      - JAVA_OPTS=\"-Djenkins.install.runSetupWizard=false\"\n      - CASC_RELOAD_TOKEN=\"reload-token\"\n    healthcheck:\n      test: [\"CMD\", \"curl\", \"-f\", \"http://localhost:8080\"]\n      interval: 10s\n      timeout: 5s\n      retries: 5\n      start_period: 30s\n````\n\n````Dockerfile\nARG tag=\"lts-jdk11\"\nFROM jenkins/jenkins:${tag}\nCOPY --chown=jenkins:jenkins plugins.txt /usr/share/jenkins/ref/plugins.txt\nCOPY --chown=jenkins:jenkins jcasc/jenkins.yaml /var/jenkins_home/\nCOPY --chown=jenkins:jenkins jcasc/jobdsl/ /var/jenkins_home/jobdsl/\nRUN jenkins-plugin-cli -f /usr/share/jenkins/ref/plugins.txt\n````\n\nãƒ—ãƒ©ã‚°ã‚¤ãƒ³ä¸€è¦§ã‚’plugins.txtã«æ›¸ã\n\n`plugins.txt`\n\n````\ncloudbees-folder\ntimestamper\nws-cleanup\nworkflow-aggregator\ngit\nconfiguration-as-code\nconfiguration-as-code-groovy\njob-dsl\n````\n\nJCasCã®è¨­å®šã‚’jenkins.yamlã«æ›¸ã\n\n````yaml\njobs:\n  - file: /var/jenkins_home/jobdsl/job1.groovy\n````\n\n`jobdsl/job1.groovy`\n\n````groovy\npipelineJob('job-dsl-groovy') {\n  definition {\n    cpsScm {\n      scm {\n        git {\n          remote {\n            url('https://github.com/jenkinsci/job-dsl-plugin.git')\n          }\n          branch('*/master')\n        }\n      }\n      lightweight()\n    }\n  }\n}\n````\n\n### ã‚„ã£ã¦ã„ã‚‹ã“ã¨\n\n* Dockerfileã§Jenkinsã‚’è¨­å®š\n* plugins.txtã€jenkins.yamlã€job-dslã®groovyãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼\n* jenkins-cliã§pluginã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n* ã“ã‚Œã‚’docker composeã§èµ·å‹• \n\n````shell\ndocker compose -f compose.yaml up -d --wait\ncurl -O http://localhost:8080/jnlpJars/jenkins-cli.jar\njava -jar jenkins-cli.jar -s http://localhost:8080/ -webSocket reload-jcasc-configuration\n````\n\n### reload-configuration\n\n## æœ€çµ‚çš„ã«ã©ã†ã—ãŸã‹\n\nä¸€å€‹ã®ãƒªãƒã‚¸ãƒˆãƒªã§è¤‡æ•°Jenkinsã®ã‚³ãƒ¼ãƒ‰ã‚’ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåˆ¥ã§ç®¡ç†ã™ã‚‹ã‚ˆã†ãªæ§‹æˆã«ãªã£ã¦ã„ãŸã®ã§ã€ãªã‹ãªã‹ã†ã¾ãã§ããªã‹ã£ãŸ\nçµå±€ãã‚Œãã‚Œã®Jenkinsä¸Šã§ reload-jcasc-configuration \n\n````shell\ncurl -O http://localhost:8080/jnlpJars/jenkins-cli.jar\njava -jar jenkins-cli.jar -s http://localhost:8080/ -webSocket reload-jcasc-configuration\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Jenkins"]},"/note/Jenkins-declarative-pipeline%E3%81%A7Active-Choice-Parameter%E3%82%92%E4%BD%BF%E3%81%86":{"title":"Jenkins declarative pipelineã§Active Choice Parameterã‚’ä½¿ã†","content":"\n[Active Choices | Jenkins plugin](https://plugins.jenkins.io/uno-choice/) ã‚’ã¤ã‹ã†ã¨ã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å‹•çš„ã«è¨­å®šã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚\n\nPipeline Syntaxã®ç”»é¢ã§parametersãƒ–ãƒ­ãƒƒã‚¯ã‚’ä½œæˆã§ãã‚‹ãŒã€ãã“ã«å‡ºã¦ã“ãªã„ãŸã‚scriptã§æ›¸ãã—ã‹ãªã•ãã†ã€‚\n\nä»¥ä¸‹ã®ã‚ˆã†ã«propertiesã§ä½œæˆã™ã‚‹ã€‚\n\n````groovy\nproperties([\n    parameters([\n        [$class: 'ChoiceParameter', \n            choiceType: 'PT_SINGLE_SELECT',\n            description: 'Select a choice',\n            filterLength: 1,\n            filterable: true,\n            name: 'Target',\n            script: [\n                $class: 'GroovyScript',\n                fallbackScript: [\n                    classpath: [], \n                    sandbox: true, \n                    script: 'return [\"ERROR\"]'\n                ],\n                script: [\n                    classpath: [], \n                    sandbox: false, \n                    script: \"\"\"\n                        def lines = new File(\"/var/jenkins_home/workspace/paramlist.txt\").readLines()\n                        return lines\n                    \"\"\".stripIndent()\n                ]\n            ]\n        ]\n    ])\n])\n\npipeline {\n    agent any\n\n    stages {\n        stage(\"Run Tests\") {\n            steps {\n                sh \"echo SUCCESS on ${params.Target}\"\n            }\n        }\n    }\n}\n````\n\nä»–ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã®å€¤ã«å¿œã˜ã¦é¸æŠè‚¢ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹å ´åˆã¯ `CascadeChoiceParameter` ãŒä½¿ãˆã‚‹\n[Active choice parameter with declarative Jenkins pipeline - Stack Overflow](https://stackoverflow.com/questions/63057793/active-choice-parameter-with-declarative-jenkins-pipeline)\n\n````groovy\nproperties([\n    parameters([\n        [$class: 'CascadeChoiceParameter', \n            choiceType: 'PT_SINGLE_SELECT',\n            description: 'Select a choice',\n            filterLength: 1,\n            filterable: true,\n            name: 'Target',\n            referencedParameters: 'ENVIRONMENT', // ä¾å­˜ã™ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åã‚’æŒ‡å®š\n            script: [\n                $class: 'GroovyScript',\n                fallbackScript: [\n                    classpath: [], \n                    sandbox: true, \n                    script: 'return [\"ERROR\"]'\n                ],\n                script: [\n                    classpath: [], \n                    sandbox: true, \n                    script: \"\"\"\n                        if (ENVIRONMENT == 'foo') { \n                            return['aaa','bbb']\n                        } else {\n                            return['ccc', 'ddd']\n                        }\n                    \"\"\".stripIndent()\n                ]\n            ]\n        ]\n    ])\n])\n\npipeline {\n    agent any\n\n    parameters {\n        choice(name: 'ENVIRONMENT', choices: ['foo', 'bar'])\n    }\n    stages {\n        stage(\"Run Tests\") {\n            steps {\n                sh \"echo SUCCESS on ${params.ENVIRONMENT} - ${params.Target}\"\n            }\n        }\n    }\n}\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/05/01","Jenkins"]},"/note/Jenkins-helm-SecretsManager%E3%81%8B%E3%82%89Secret%E3%82%92%E5%8F%96%E5%BE%97%E3%81%97%E3%81%A6%E3%82%BB%E3%83%83%E3%83%88%E3%81%99%E3%82%8B":{"title":"Jenkins helm SecretsManagerã‹ã‚‰Secretã‚’å–å¾—ã—ã¦ã‚»ãƒƒãƒˆã™ã‚‹","content":"\n`additionalExternalSecrets` ã‚’ä½¿ã†ã®ãŒã‚ˆã•ãã†\n\u003chttps://github.com/jenkinsci/helm-charts/tree/main/charts/jenkins#additional-secrets\u003e\n\n`additionalSecrets` ã¯3.3.1ã§è¿½åŠ ã•ã‚Œã¦ã„ã‚‹\n\u003chttps://github.com/jenkinsci/helm-charts/commit/f6316c95d264dbf064d0c3cc51836b364650273e\u003e\n\nãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚‚ã“ã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§æ›´æ–°ã•ã‚Œã¦ã„ã‚‹ã€‚\n\u003chttps://github.com/jenkinsci/helm-charts/commit/6773a7ff4868a579f54fd6f57d01e2fd3b81e6e6\u003e\n\nä»¥å‰ã®æ›¸ãæ–¹ã ã¨ã€`volumes` ã§secretsã‚’è¨­å®šã—ã¦ã€`mounts` ã§ `/run/secrets/${KEY}` ã§é…ç½®ã™ã‚‹ã¨ã„ã†ã®ã‚’è‡ªåˆ†ã§è¡Œã£ã¦ã„ãŸ\n\u003chttps://github.com/jenkinsci/configuration-as-code-plugin/blob/master/docs/features/secrets.adoc#kubernetes-secrets\u003e\n\n`additionalSecrets` ãŒExternalSecretsã®å¤‰æ›´ã«è¿½å¾“ã•ã‚Œã‚‹ã‚ˆã†ãªPRã‚‚ãƒãƒ¼ã‚¸ã•ã‚Œã¦ã„ã‚‹(4.x)\n[https://github.com/jenkinsci/helm-charts/pull/645](https://github.com/jenkinsci/helm-charts/pull/645)\n\n## ãã®ä»–\n\n\u003chttps://jenkinsci.github.io/kubernetes-credentials-provider-plugin/\u003e\n\n[5 ways to inject secrets from AWS into Jenkins pipelines â€“ Tom Gregory](https://tomgregory.com/inject-secrets-from-aws-into-jenkins-pipelines/)\nAWS Secrets Manager Credentials Provider plugin ã¨ã„ã†ã®ã‚‚ã‚ã‚‹\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Jenkins","Kubernetes"]},"/note/Jenkins-job-dsl%E3%81%A7%E5%B0%91%E3%81%97%E3%81%A0%E3%81%91%E9%81%95%E3%81%86%E3%82%B8%E3%83%A7%E3%83%96%E3%82%92%E3%81%BE%E3%81%A8%E3%82%81%E3%81%A6%E5%AE%9A%E7%BE%A9%E3%81%99%E3%82%8B":{"title":"Jenkins-job-dslã§å°‘ã—ã ã‘é•ã†ã‚¸ãƒ§ãƒ–ã‚’ã¾ã¨ã‚ã¦å®šç¾©ã™ã‚‹","content":"\n[Jenkins Job DSL Plugin](note/Jenkins%20Job%20DSL%20Plugin.md) ã§ç’°å¢ƒã”ã¨ã«ã‚¸ãƒ§ãƒ–ãŒåˆ†ã‹ã‚Œã¦ã„ã¦å¾®å¦™ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãŒç•°ãªã‚‹å ´åˆã‚„ã€ç•°ãªã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ä¼¼ãŸã‚¸ãƒ§ãƒ–ã‚’è¤‡è£½ã—ãŸã„ã¨ãã¯ã¾ã¾ã‚ã‚‹ã¨æ€ã„ã¾ã™ãŒã€‚\nGUIä¸Šã§ã½ã¡ã½ã¡ã™ã‚‹ã®ã¯æ™‚é–“ãŒã‹ã‹ã‚‹ã—é–“é•ãˆã‚‹ã®ã§ã€Jenkinsã‚µãƒ¼ãƒãƒ¼ã«å…¥ã£ã¦config.xmlã‚’ã‚³ãƒ”ãƒ¼ã—ã¦æ›¸ãæ›ãˆã‚‹ã¿ãŸã„ãªã“ã¨ã‚’ã‚„ã£ãŸã‚Šã—ã¾ã™ãŒã€\n[Jenkins Job DSL Plugin](note/Jenkins%20Job%20DSL%20Plugin.md) ã‚’ä½¿ã†ã¨ã“ã®å•é¡ŒãŒè§£æ±ºã—ã¾ã™ã€‚\n\né¡ä¼¼: [Jenkins JobDSLã§closureå†…ã‹ã‚‰functionã‚’å‘¼ã¶](jenkins%20JobDSL%E3%81%A7closure%E5%86%85%E3%81%8B%E3%82%89function%E3%82%92%E5%91%BC%E3%81%B6.md) \n\n## Groovyã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã‚¸ãƒ§ãƒ–ã‚’ä½œæˆã™ã‚‹\n\n[Jenkins Job DSL Plugin](note/Jenkins%20Job%20DSL%20Plugin.md) ã¯çµå±€Groovyãªã®ã§ã€ã‚ã‚‹ç¨‹åº¦è‡ªç”±ã«è¨˜è¿°ãŒã§ãã¾ã™ã€‚\né…åˆ—ã‚’å®šç¾©ã—ã¦ã€ç•°ãªã‚‹éƒ¨åˆ†ã ã‘ã‚’å¤‰æ•°ã«ã™ã‚‹ã¨ã„ã£ãŸã‚„ã‚Šæ–¹ã§ã€è¦‹é€šã—ã‚‚ã‚ˆãè¤‡è£½ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n\nã•ã£ããpipelineJobã‚’ä½œã£ã¦ã‚ã’ã¾ã—ã‚‡ã†\n\n````groovy\ndef services = [\n  'service-A',\n  'service-B',\n]\n\nservices.each { service -\u003e\n  pipelineJob(\"build/${service}\") {\n    definition {\n      cps {\n        script(pipelineTemplate(service))\n        sandbox()\n      }\n    }\n\n  }\n}\n\ndef pipelineTemplate(String service) {\n  def repositoryUrl = \"https://~~~~/${service}.git\"\n  return '''\n    pipeline {\n      options {\n        ansiColor('xterm')\n        buildDiscarder logRotator(artifactDaysToKeepStr: '', artifactNumToKeepStr: '', daysToKeepStr: '', numToKeepStr: '5')\n        timestamps()\n      }\n\n      parameters {\n        listGitBranches(\n            name: 'BRANCH_TAG',\n            defaultValue: 'master',\n            branchFilter: '.*',\n            credentialsId: \"\",\n            quickFilterEnabled: true,\n            remoteURL: '#repositoryUrl',\n            selectedValue: 'DEFAULT',\n            sortMode: 'ASCENDING_SMART',\n            tagFilter: '*',\n            type: 'PT_BRANCH_TAG'\n        )\n      }\n\n      stages {\n        stage('git clone') {\n          steps {\n            script {\n              currentBuild.description = \"#service - ${params.BRANCH_TAG}\"\n              checkout([\n                  $class                           : 'GitSCM',\n                  branches                         : [[name: \"${params.BRANCH_TAG}\"]],\n                  userRemoteConfigs                : [\n                      [url: \"#repositoryUrl\"],\n                  ]\n              ])\n            }\n          }\n        }\n\n      }\n    }\n    '''.stripIndent()\n      .replaceAll('#service', service)\n      .replaceAll('#repositoryUrl', repositoryUrl)\n\n}\n\n````\n\nãªãŠã“ã“ã§ã¯pipelineã‚’æ–‡å­—åˆ—ã§ç›´æ¥æ›¸ã„ã¦ã„ã¦ã€pipelineå†…ã®parameter(`params.XXXX`)ã¨Groovyã®å¤‰æ•°ãŒã†ã¾ãå…±å­˜ã§ããªã‹ã£ãŸãŸã‚Groovyã®å¤‰æ•°ã¯ `replaceAll` ã§ç½®æ›ã‚’ã‹ã‘ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã¾ã™\n\n[Jenkins Job DSL Plugin](note/Jenkins%20Job%20DSL%20Plugin.md) ã¯å…¬å¼ã§PlaygroundãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€ã¾ãšã¯ã“ã¡ã‚‰ã§è©¦ã™ã®ãŒã‚ˆã„ã§ã—ã‚‡ã†ã€‚\nhttps://job-dsl.herokuapp.com/\n\næ‰‹å…ƒã§å®Ÿè¡Œã™ã‚‹ã®ã‚‚å¯èƒ½ã§ã™\nhttps://github.com/jenkinsci/job-dsl-plugin\n\n### å‚è€ƒ\n\n[ ã‚‚ã—Jenkinsã§ã¡ã‚‡ã£ã¨ãšã¤é•ã†100ã®ã‚¸ãƒ§ãƒ–ã‚’ç®¡ç†ã—ãªãã¦ã¯ã„ã‘ãªããªã£ãŸã‚‰ - knjnameã®ãƒ–ãƒ­ã‚°](https://knjname.hateblo.jp/entry/2015/01/06/025459)\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Jenkins"]},"/note/Jenkins-kubernetes-plugin-3872.v760b_4a_6c126b_-%E3%81%A7agent%E8%B5%B7%E5%8B%95%E3%81%97%E3%81%AA%E3%81%84":{"title":"Jenkins kubernetes plugin 3872.v760b_4a_6c126b_ ã§agentèµ·å‹•ã—ãªã„","content":"\nã‚¨ãƒ©ãƒ¼ãƒ­ã‚°\n\n````\n2023-02-21 01:06:57.665+0000 [id=81]\tWARNING\to.c.j.p.k.KubernetesLauncher#launch: Error in provisioning; agent=KubernetesSlave name: jenkins-agent-x86-64-kjhkr, template=PodTemplate{id='afef69c1-5cc4-48a8-a070-fd6a6fd4f6d1', name='jenkins-agent-x86_64', namespace='staging-jenkins', runAsUser=0, runAsGroup=0, slaveConnectTimeout=600, idleMinutes=30, label='jenkins-agent-x86_64', serviceAccount='jenkins', nodeSelector='ap-type=cicd-jenkins-slave-kp-staging,arch=amd64', nodeUsageMode=NORMAL, podRetention='Never', annotations=[PodAnnotation{key='cluster-autoscaler.kubernetes.io/safe-to-evict', value='false'}]}\nio.fabric8.kubernetes.client.KubernetesClientException: name not specified for an operation requiring one.\n\tat io.fabric8.kubernetes.client.dsl.internal.BaseOperation.requireFromServer(BaseOperation.java:182)\n\tat io.fabric8.kubernetes.client.dsl.internal.BaseOperation.get(BaseOperation.java:142)\n\tat io.fabric8.kubernetes.client.dsl.internal.BaseOperation.get(BaseOperation.java:93)\n\tat org.csanchez.jenkins.plugins.kubernetes.PodTemplateUtils.parseFromYaml(PodTemplateUtils.java:611)\nCaused: java.lang.RuntimeException: Failed to parse yaml: \"apiVersion: v1\n````\n\n`kubernetes-client-api:6.4.1-208.vfe09a_9362c2c` ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒä¸ŠãŒã£ã¦ã„ãŸ\n`kubernetes:3872.v760b_4a_6c126b_` ãŒã‚ãŸã£ã¦ã„ã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³\n\n1. `kubernetes:3845.va_9823979a_744`  ã«ä¸‹ã’ãŸ -\u003e åŠ¹æœãªã—\n1. `overwritePlugins: true` ã«å¤‰æ›´ -\u003e åŠ¹æœãªã—\n\n````shell\necho \"remove all plugins from shared volume\"\n# remove all plugins from shared volume\nrm -rf /var/jenkins_home/plugins/*\n````\n\n3. `kubernetes-client-api:6.3.1-206.v76d3b_6b_14db_b` ã‚’æŒ‡å®šã—ãŸ -\u003e èµ·å‹•ã™ã‚‹ã‚ˆã†ã«ãªã£ãŸ\n3. `overwritePlugins: false` ã®çŠ¶æ…‹ã§ `kubernetes:3845.va_9823979a_744` ã‚’æŒ‡å®šã—ãŸ -\u003e `kubernetes-client-api:6.4.1-208.vfe09a_9362c2c` ã«ä¸ŠãŒã£ã¦ã—ã¾ã£ãŸ\n   1. \u003chttps://github.com/jenkinsci/kubernetes-plugin/blob/67c727ed5b645f1e740ca9d7236aeda20d8362a9/pom.xml#L59\u003e ã§æŒ‡å®šã•ã‚Œã¦ã„ã‚‹ã®ã§ç„¡ç†ãªã®ã‹\n3. `kubernetes:3883.v4d70a_a_a_df034` ã‚’æŒ‡å®š -\u003e \n\nissue ä¸ŠãŒã£ã¦ã„ãŸ\n\u003chttps://issues.jenkins.io/browse/JENKINS-70639\u003e\n\u003chttps://issues.jenkins.io/browse/JENKINS-70637\u003e\n\nhttps://issues.jenkins.io/browse/JENKINS-70637?focusedCommentId=435317\u0026page=com.atlassian.jira.plugin.system.issuetabpanels:comment-tabpanel#comment-435317\nã‚³ãƒ¡ãƒ³ãƒˆã§ã€Œãªãœã“ã‚“ãªãƒ¡ã‚¸ãƒ£ãƒ¼ãªãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒãƒ†ã‚¹ãƒˆã‚‚ã•ã‚Œãšã«ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã‚‹ã®ã‹ã€ã€Œãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã„ã‹ã‚ŒãŸä¾å­˜é–¢ä¿‚ç®¡ç†ã«ã¯ã†ã‚“ã–ã‚Šã ã—ã€ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸã¨ã“ã‚ã§æ”¾ç½®ã•ã‚Œã¦ã„ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚‚å¤šãã¦å¸¸æ™‚å¤§é‡ã®è„†å¼±æ€§ãŒå‡ºã‚‹ã€ â€¦ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ç®¡ç†ã«é–¢ã—ã¦ã¯æœ¬å½“ãã®ã¨ãŠã‚Šã§ãªã‚‹ã¹ãä½¿ã‚ãªã„ã»ã†ãŒã„ã„ã‚“ã˜ã‚ƒãªã„ã‹ã¨ã•ãˆæ€ãˆã‚‹\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/02/21","Jenkins"]},"/note/Jenkins-matrix%E3%83%93%E3%83%AB%E3%83%89%E3%81%A7%E5%A4%89%E6%95%B0%E3%81%8C%E5%85%B1%E6%9C%89%E3%81%95%E3%82%8C%E3%82%8B%E5%95%8F%E9%A1%8C":{"title":"Jenkins matrixãƒ“ãƒ«ãƒ‰ã§å¤‰æ•°ãŒå…±æœ‰ã•ã‚Œã‚‹å•é¡Œ","content":"\nmatrixã‚’ä½¿ã£ã¦ãµãŸã¤ã®workerä¸Šã§ãƒ“ãƒ«ãƒ‰ã—ãŸã„ã¨ãã€å®Ÿè¡Œé †ã«ã‚ˆã£ã¦ã¯\n\n````groovy\npipeline {\n    agent none\n    stages {\n        stage('parallel') {\n            matrix {\n                agent {\n                    label \"worker-${ARCH}\"\n                }\n                axes {\n                    axis {\n                        name 'ARCH'\n                        values 'x86_64', 'armv8'\n                    }\n                }\n\n                stages {\n\n                    stage('prepare') {\n                      steps {\n                        script {\n                          env.KEY = \"key_${ARCH}\"\n                        }\n                      }\n                    }\n\n                    stage('build') {\n                        steps {\n                            sh '''\n                            echo \"${ARCH} ${KEY}\"\n                            '''\n                        }\n                    }\n                }\n            }\n        }\n\n    }\n}\n````\n\nworker-x86_64 prepare -\u003e worker-x86_64 build -\u003e worker-armv8 prepare -\u003e worker-armv8 build ã®é †ã«å®Ÿè¡Œã•ã‚Œã‚Œã°å•é¡Œãªã„ãŒã€\nworker-x86_64 prepare -\u003e worker-armv8 prepare -\u003e worker-x86_64 build -\u003e worker-armv8 build ã®é †ã«å®Ÿè¡Œã•ã‚Œã‚‹ã¨ã€ã‚ã¨ã‹ã‚‰å®Ÿè¡Œã•ã‚ŒãŸã‚‚ã®ã«ä¸Šæ›¸ãã•ã‚Œã‚‹\n\n````\nx86_64 key_armv8\narmv8 key_armv8\n````\n\nãã®ãŸã‚åˆ¥ã®å¤‰æ•°ã§æ ¼ç´ã™ã‚‹å¿…è¦ãŒã‚ã‚‹\n\n````groovy\npipeline {\n    agent none\n    stages {\n        stage('parallel') {\n            matrix {\n                agent {\n                    label \"worker-${ARCH}\"\n                }\n                axes {\n                    axis {\n                        name 'ARCH'\n                        values 'x86_64', 'armv8'\n                    }\n                }\n\n                stages {\n\n                    stage('prepare') {\n                      steps {\n                        script {\n                          if (ARCH == \"armv8\") {\n                            env.KEY_ARM = \"key_arm\"\n                          } else {\n                            env.KEY_AMD = \"key_amd\"\n                          }\n                        }\n                      }\n                    }\n\n                    stage('build') {\n                        steps {\n                            sh '''\n                            if [[ \"${ARCH}\" == \"armv8\" ]]; then\n                              export KEY=${KEY_ARM}\n                            else\n                              export KEY=${KEY_AMD}\n                            fi\n                            echo \"${ARCH} ${KEY}\"\n                            '''\n                        }\n                    }\n                }\n            }\n        }\n\n    }\n}\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/02/13","Jenkins"]},"/note/Jenkins-pipeline%E3%81%A7%E4%BB%96%E3%81%AE%E3%82%B8%E3%83%A7%E3%83%96%E3%82%92%E5%81%9C%E6%AD%A2%E3%81%99%E3%82%8B":{"title":"Jenkins pipelineã§ä»–ã®ã‚¸ãƒ§ãƒ–ã‚’åœæ­¢ã™ã‚‹","content":"\n[Jenkins Pipeline](note/Jenkins%20Pipeline.md) \n\n````groovy\npipeline {\n  stages {\n    stage('abort jobs') {\n      steps {\n        script {\n          Jenkins.instance.getAllItems(Job.class).collectMany { job -\u003e\n            // ãƒ“ãƒ«ãƒ‰ä¸€è¦§ã«flattenã™ã‚‹\n            job.builds\n          }.findAll { build -\u003e\n            // ãƒ“ãƒ«ãƒ‰ä¸­ã®ã‚¸ãƒ§ãƒ–ã«çµã‚‹\n            build.building\n          }.each { build -\u003e\n            // ã‚¸ãƒ§ãƒ–ã‚’åœæ­¢ã™ã‚‹\n            build.doStop()\n          }\n\n        }\n      }\n    }\n  }\n}\n````\n\n* groovyã®è¨˜æ³•ã§ã€`.getXXX()` ã¯ `.XXX` ã§ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹\n\n## reference\n\n* [Groovy ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ Jenkins ä¸Šã®ã™ã¹ã¦ã® Job ã‚’åˆ¶å¾¡ã™ã‚‹ | ã¾ãã¾ãã„ã‚ã„ã‚ãƒãƒ¼ãƒˆ](https://maku77.github.io/memo/jenkins/handle-jobs.html)\n* [Mirantis Documentation: Abort a hung build in Jenkins](https://docs.mirantis.com/mcp/q4-18/mcp-operations-guide/drive-train-operations/jenkins-abort-hung-build.html)\n* [jenkinsã§ã‚¸ãƒ§ãƒ–ãŒãƒã‚§ãƒƒã‚¯ã‚¢ã‚¦ãƒˆã™ã‚‹ãƒ–ãƒ©ãƒ³ãƒã‚’ä¸€æ‹¬è¨­å®šã™ã‚‹ Â· GitHub](https://gist.github.com/tckz/2835544)\n* https://javadoc.jenkins-ci.org/jenkins/model/Jenkins.html\n* https://javadoc.jenkins.io/hudson/model/Job.html#getBuilds()\n* https://javadoc.jenkins.io/hudson/model/Run.html#isBuilding()\n* https://javadoc.jenkins.io/hudson/model/AbstractBuild.html#doStop()\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Jenkins"]},"/note/Jenkins-shared-library":{"title":"Jenkins shared library","content":"\n[note/Jenkins](Jenkins.md) ã§è¤‡æ•°ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒã‚ã£ã¦ã€ãã‚Œãã‚Œã«ãƒ“ãƒ«ãƒ‰ã‚„ãƒ‡ãƒ—ãƒ­ã‚¤ã®ã‚¸ãƒ§ãƒ–ã‚’ä½œæˆã—ã¦ã„ã‚‹ã€‚\nåŒã˜ã‚ˆã†ãªã‚¹ãƒ†ãƒƒãƒ—ã‚’å®Ÿè¡Œã™ã‚‹ã®ã§ã€å…±é€šå‡¦ç†ã‚’ã¾ã¨ã‚ã¦ãƒ¡ãƒ³ãƒ†ãƒŠã‚¹ã—ã‚„ã™ãã—ãŸã„ã€‚\n\n## Jenkins Shared Library\n\nShared Libraryã‚’ä½¿ã†ã¨pipelineã‹ã‚‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«å®šç¾©ã•ã‚ŒãŸé–¢æ•°ã‚„å¤‰æ•°ã‚’ä½¿ã†ã“ã¨ãŒã§ãã‚‹ã€‚\n[Jenkins Shared Librariesã®æ´»ç”¨äº‹ä¾‹ã®ç´¹ä»‹ - DeNA Testing Blog](https://swet.dena.com/entry/2021/01/18/200000)\n\nãªã‚“ã¨ `pipeline {}` ã”ã¨å®šç¾©ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã€‚\n\n### ä½¿ã„æ–¹\n\n[Share a standard Pipeline across multiple projects with Shared Libraries](https://www.jenkins.io/blog/2017/10/02/pipeline-templates-with-shared-libraries/)\n\n[Extending with Shared Libraries](https://www.jenkins.io/doc/book/pipeline/shared-libraries/)\n\n1. ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½œæˆã™ã‚‹\n\nãƒ©ã‚¤ãƒ–ãƒ©ãƒªç”¨ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã—ã¦ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ã™ã‚‹(srcã‹varsã©ã¡ã‚‰ã‹ä¸€ã¤ã¯å¿…é ˆ)\n\n`mylibrary`\n\n````\n+- src                     # Groovy source files\n|   +- org\n|       +- foo\n|           +- Bar.groovy  # for org.foo.Bar class\n+- vars\n|   +- foo.groovy          # for global 'foo' variable\n|   +- foo.txt             # help for 'foo' variable\n+- resources               # resource files (external libraries only)\n|   +- org\n|       +- foo\n|           +- bar.json    # static helper data for org.foo.Bar\n````\n\nå‡¦ç†ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«è¨˜è¿°ã™ã‚‹ã€‚callãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®šç¾©ã™ã‚‹ã¨\n\n`mylibrary/vars/hello.groovy`\n\n````groovy\ndef call() {\n  pipeline {\n    agent any\n    stages {\n      stage('library stage') {\n        steps {\n          echo \"hello\"\n        }\n      }\n    }\n  }\n}\n````\n\n2. Jenkinsã®ç®¡ç† \u003e ã‚·ã‚¹ãƒ†ãƒ ã®è¨­å®š \u003e Global Pipeline Libraries ã«ã€ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒªãƒã‚¸ãƒˆãƒªã‚’è¨­å®šã™ã‚‹\n\nè¨­å®šå€¤ã¯è¦‹ã¦ã®é€šã‚Š\n\n3. pipelineã‚’ä½œæˆã™ã‚‹\n\n`Jenkinsfile`\n\n````groovy\n// ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåã‚’æŒ‡å®š\n@Library('mylibrary') _\n\n// xxx.groovy ã® xxx éƒ¨åˆ†ã§é–¢æ•°ã‚’å®Ÿè¡Œã§ãã‚‹\nhello()\n````\n\n`vars` é…ä¸‹ã«ä½œæˆã—ãŸå ´åˆã¯ã€globalã«å®šç¾©ã•ã‚Œã‚‹ãŸã‚importã‚’æ›¸ã‹ãšã«åˆ©ç”¨ã§ãã‚‹ã€‚\n\n````groovy\n// Global Pipeline Libraries ã® Default version ã‚’ä½¿ç”¨ã™ã‚‹\n@Library('mylibrary') _\n\n// ãƒ–ãƒ©ãƒ³ãƒã‚„ã‚¿ã‚°ã‚’æŒ‡å®šã™ã‚‹å ´åˆ\n@Library('mylibrary@1.0') _\n\n// è¤‡æ•°ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®èª­ã¿è¾¼ã¿\n@Library(['mylibrary', 'other@abcdef1234']) _\n````\n\n`src` é…ä¸‹ã«ä½œæˆã—ãŸå ´åˆã¯ã€importã—ã¦newã§ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä½œæˆã—ãŸä¸Šã§åˆ©ç”¨ã§ãã‚‹ã€‚\n\n````groovy\n// åˆ©ç”¨ã—ãŸã„ class ã‚’ import ã™ã‚‹\n@Library('mylibrary') import org.foo.Sample\n\n// åˆ©ç”¨æ™‚ã¯ script { } ãƒ–ãƒ­ãƒƒã‚¯å†…ã§åˆ©ç”¨ã™ã‚‹\nscript {\n  def sample = new org.foo.Sample()\n  sample.hello()   // Sample å†…ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ hello() ãƒ¡ã‚½ãƒƒãƒ‰ã®å‘¼ã³å‡ºã—\n}\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Jenkins"]},"/note/Jenkinsfile":{"title":"Jenkinsfile","content":"\n[Jenkins Pipeline](note/Jenkins%20Pipeline.md) ã‚’æ›¸ã„ãŸãƒ•ã‚¡ã‚¤ãƒ«\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Jenkins"]},"/note/Jenkinsfile%E3%82%92%E3%83%AA%E3%83%AD%E3%83%BC%E3%83%89%E3%81%99%E3%82%8B":{"title":"Jenkinsfileã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹","content":"\n[Jenkinsfile](note/Jenkinsfile.md) å†…ã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ `parameters` ãƒ–ãƒ­ãƒƒã‚¯ã§å®šç¾©ã—ã¦ã‚‚ã€ä¸€åº¦å®Ÿè¡Œã—ãªã„ã¨åæ˜ ã•ã‚Œãªã„ã€‚\n\nhttps://stackoverflow.com/questions/44422691/how-to-force-jenkins-to-reload-a-jenkinsfile\nrefreshç”¨ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å®šç¾©ã—ã¦ãŠãã®ãŒå¸¸å¥—æ‰‹æ®µ\n\n````groovy\npipeline {\n    agent any\n    parameters {\n        booleanParam(name: 'Refresh',\n                    defaultValue: false,\n                    description: 'Read Jenkinsfile and exit.')\n    }\n    stages {\n        stage('Read Jenkinsfile') {\n            when {\n                expression { return params.Refresh == true }\n            }\n            steps {\n              echo(\"stop\")\n            }\n        }\n        stage('Run Jenkinsfile') {\n            when {\n                expression { return params.Refresh == false }\n            }\n            stages {\n              stage('Build') {\n                  steps {\n                    echo(\"build\")\n                  }\n              }\n              stage('Test') {\n                  steps {\n                    echo(\"test\")\n                  }\n              }\n              stage('Deploy') {\n                  steps {\n                    echo(\"deploy\")\n                  }\n              }\n            }\n        }\n    }\n}\n````\n\n### Job DSLã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹å ´åˆ\n\n````groovy\npipelineJob('myJobName') {\n    // sets RELOAD=true for when the job is 'queued' below\n    parameters {\n        booleanParam('RELOAD', true)\n    }\n\n    definition {\n        cps {\n            script(readFileFromWorkspace('Jenkinsfile'))\n            sandbox()\n        }\n    }\n\n    // queue the job to run so it re-downloads its Jenkinsfile\n    queue('myJobName')\n}\n````\n\nerrorã‚’ä½¿ã£ã¦ã‚¸ãƒ§ãƒ–ã‚’æ­¢ã‚ã¦ã—ã¾ãˆã°ã€ `RELOAD==false` ã§å›²ã†å¿…è¦ãŒãªããªã‚‹\n\n````groovy\npipeline {\n    agent any\n    stages {\n        stage('Preparations') {\n            when { expression { return params.RELOAD == true } }\n            // Because this: https://issues.jenkins-ci.org/browse/JENKINS-41929\n            steps {\n                script {\n                    if (currentBuild.getBuildCauses('hudson.model.Cause') != null) {\n                        currentBuild.displayName = 'Parameter Initialization'\n                        currentBuild.description = 'On first build we just load the parameters as they are not available of first run on new branches.  A second run has been triggered automatically.'\n                        currentBuild.result = 'ABORTED'\n\n                        error('Stopping initial build as we only want to get the parameters')\n                    }\n                }\n            }\n        }\n\n        stage('Parameters') {\n            steps {\n                echo 'Running real job steps...'                \n            }\n        }\n}\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Jenkins"]},"/note/Junit%E3%81%A7%E3%83%A1%E3%82%BD%E3%83%83%E3%83%89%E5%90%8D%E3%81%8C%E9%95%B7%E3%81%99%E3%81%8E%E3%81%A6%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%AB%E3%81%AA%E3%82%8B":{"title":"Junitã§ãƒ¡ã‚½ãƒƒãƒ‰åãŒé•·ã™ãã¦ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹","content":"\n\n````txt\n[ERROR] org.jetbrains.kotlin.backend.common.BackendException: Backend Internal error: Exception during file facade code generation File being compiled: [file:///tmp/workspace/very/long/long/TestClass.java]\nThe root cause java.io.FileNotFoundException was thrown at: java.io.FileOutputStream.open0(Native Method)\n\tat org.jetbrains.kotlin.backend.common.CodegenUtil.reportBackendException(CodegenUtil.kt:239)\n\tat org.jetbrains.kotlin.codegen.PackageCodegenImpl.generate(PackageCodegenImpl.java:78)\n\tat org.jetbrains.kotlin.codegen.DefaultCodegenFactory.generatePackage(CodegenFactory.kt:77)\n\tat org.jetbrains.kotlin.codegen.DefaultCodegenFactory.generateModule(CodegenFactory.kt:62)\n\tat org.jetbrains.kotlin.codegen.KotlinCodegenFacade.compileCorrectFiles(KotlinCodegenFacade.java:35)\n    ...\nCaused by: java.io.FileNotFoundException: /tmp/workspace/very/long/long/TestClass.java$test_ã¨ã¦ã‚‚ãªãŒã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã‚ã„ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹å$1.class (File name too long)\n\tat java.io.FileOutputStream.open0(Native Method)\n\tat java.io.FileOutputStream.open(FileOutputStream.java:270)\n\tat java.io.FileOutputStream.\u003cinit\u003e(FileOutputStream.java:213)\n\t...\n````\n\nãƒ†ã‚¹ãƒˆãƒ¡ã‚½ãƒƒãƒ‰ã‚’èª¬æ˜çš„ã«ã—ã‚ˆã†ã¨é•·ãã—ã™ãã‚‹ã¨ã€å®Ÿè¡Œç’°å¢ƒã®ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹é•·ã®åˆ¶é™ã«ã‚ˆã£ã¦ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["unittest","Java"]},"/note/Kaniko%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6%E8%AA%BF%E3%81%B9%E3%81%9F%E3%83%A1%E3%83%A2":{"title":"Kanikoã«ã¤ã„ã¦èª¿ã¹ãŸãƒ¡ãƒ¢","content":"\n[GitLab Runnerã¨kanikoã§Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ - GeekFactory](https://int128.hatenablog.com/entry/2019/09/25/204930)\n[Jenkinsã¨Kubernetesã§CIãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã‚’æ§‹ç¯‰ - Qiita](https://qiita.com/MahoTakara/items/7a5018dee28ff6bae89a)\n\n[Let's make faster GitLab CI/CD pipelines](https://blog.nimbleways.com/let-s-make-faster-gitlab-ci-cd-pipelines/)\n[Amazon EKS on Fargate ã‚’ä½¿ç”¨ã—ã¦ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹æ–¹æ³• | Amazon Web Services ãƒ–ãƒ­ã‚°](https://aws.amazon.com/jp/blogs/news/how-to-build-container-images-with-amazon-eks-on-fargate/)\n[kanikoã‚’ä½¿ã£ãŸGitLab Container Registry ã¨ AWS ECRã®èªè¨¼æ–¹æ³•ã«ã¤ã„ã¦ - ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ¯ãƒ³ãƒ»ã‚¸ãƒ£ãƒ‘ãƒ³ Tech Blog](https://tech.designone.jp/entry/2022/07/29/203342)\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/04/20","Kubernetes"]},"/note/Kaniko-assume-role%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6ECR%E3%83%AD%E3%82%B0%E3%82%A4%E3%83%B3%E3%81%99%E3%82%8B":{"title":"Kaniko assume roleã‚’ä½¿ã£ã¦ECRãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹","content":"\n[kaniko ãŒä½•ã‚’ã—ã¦ã„ã‚‹ã‹, ä½•ãŒã§ãã‚‹ã‹ - è–„ã„ãƒ–ãƒ­ã‚°](https://orisano.hatenablog.com/entry/2019/05/20/120032)\n[Container Image Building with Kaniko](https://www.giantswarm.io/blog/container-image-building-with-kaniko)\n\n[Kaniko Image Cache in Jenkins Kubernetes Agents - Stack Overflow](https://stackoverflow.com/questions/72754983/kaniko-image-cache-in-jenkins-kubernetes-agents)\n\n* `/kaniko/.docker/config.json` ã«\n\n````json\n{\n  \"credsStore\": \"ecr-login\"\n}\n````\n\n````groovy\npipeline {\n    agent {\n        kubernetes {\n          label \"kaniko\"\n          yaml '''\n          spec:\n            volumes:\n              - name: cache\n                emptyDir: {}\n            containers:\n            - name: kaniko\n              image: gcr.io/kaniko-project/executor:debug\n              imagePullPolicy: IfNotPresent\n              volumeMounts:\n              - mountPath: /mnt/cache\n                name: cache\n              command:\n              - /busybox/cat\n              tty: true\n            - name: awscli\n              image: public.ecr.aws/aws-cli/aws-cli:latest\n              imagePullPolicy: IfNotPresent\n              args:\n                - \"9999999\"\n              command:\n              - sleep\n              tty: true\n          '''.stripIndent()\n\n        }\n    }\n\n    stages {\n        stage('Login'){\n            steps{\n                container(name: 'awscli') {\n                    script {\n                        def credentialText = sh(\n                          script: 'aws sts assume-role --role-arn \"$ROLE_ARN\"',\n                          returnStdout: true\n                        ).trim()\n                        def credential = new groovy.json.JsonSlurper().parseText(credentialText)\n\n                        // ç’°å¢ƒå¤‰æ•°ã«ã‚»ãƒƒãƒˆ\n                        env.AWS_ACCESS_KEY_ID = credential['Credentials']['AccessKeyId']\n                        env.AWS_SECRET_ACCESS_KEY = credential['Credentials']['SecretAccessKey']\n                        env.AWS_SESSION_TOKEN = credential['Credentials']['SessionToken']\n                    }\n                }\n            }\n        }\n\n        stage('Warm'){\n            steps{\n                container(name: 'kaniko', shell: '/busybox/sh') {\n                    sh '''\n                    /kaniko/warmer --cache-dir=/mnt/cache --image=\u003cIMAGE_FROM_ECR\u003e -v debug\n                    '''.stripIndent()\n                }\n            }\n        }\n\n        stage('Build \u0026 Cache Image'){\n            steps{\n                container(name: 'kaniko', shell: '/busybox/sh') {\n                    sh '''\n                    echo hello \u003e tmp.txt\n\n                    cat \u003c\u003cEOF \u003e Dockerfile\n                    FROM \u003cIMAGE_FROM_ECR\u003e\n                    COPY tmp.txt /usr/local/tomcat/\n                    EOF\n\n                    /kaniko/executor --context . --dockerfile Dockerfile --destination=kaniko-sample --cache-dir=/mnt/cache --no-push --tarPath out.tar\n                    '''.stripIndent()\n                }\n            }\n        }\n    }\n}\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/02/10","Docker","Kubernetes"]},"/note/Karabiner-elements_HyperKey":{"title":"Karabiner-elements_HyperKey","content":"\n\u003chttps://github.com/Vonng/Capslock\u003e\n\n \u003e \n \u003e Transform â‡ªCapsLock into a powerful **modifier** **âœ± Hyper** that miraculously increases your work productivity!\n\n## Hyper Application\n\nãƒ›ãƒƒãƒˆã‚­ãƒ¼ã§ã‚¢ãƒ—ãƒªã‚’èµ·å‹•ã™ã‚‹\n\n## Hyper Function\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Mac","keyboard"]},"/note/Kibana":{"title":"Kibana","content":"\nhttps://www.elastic.co/jp/kibana/\n\nKibanaã¯ã€Elasticsearchã§ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã®æ¤œç´¢ã¨å¯è¦–åŒ–ã®æ©Ÿèƒ½ã‚„ã€Elastic Stackã®ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã®åˆ¶å¾¡ã®æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ã€‚\nãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’å¯è¦–åŒ–ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Observability"]},"/note/Kotlin":{"title":"Kotlin","content":"\n## æ¦‚è¦\n\n* JVMè¨€èª\n* JetBrainsè£½\n* GoogleãŒAndroidã‚¢ãƒ—ãƒªé–‹ç™ºè¨€èªã¨ã—ã¦æ­£å¼æ¡ç”¨\n\n## ç‰¹å¾´\n\n* Null Safety\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Kotlin"]},"/note/Kotlin%E3%81%AEFormatter":{"title":"Kotlinã®Formatter","content":"\n\\#Kotlin\n\n\u003chttps://github.com/facebookincubator/ktfmt\u003e\n\u003chttps://github.com/pinterest/ktlint\u003e\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Kotlin"]},"/note/Kotlin_Coroutines":{"title":"Kotlin_Coroutines","content":"\n\\#Kotlin\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Kotlin"]},"/note/Kotlin_Coroutines%E3%81%AE%E4%B8%A6%E5%88%97%E6%95%B0%E3%82%92%E5%88%B6%E5%BE%A1%E3%81%99%E3%82%8B":{"title":"Kotlin_Coroutinesã®ä¸¦åˆ—æ•°ã‚’åˆ¶å¾¡ã™ã‚‹","content":"\n\\#Kotlin\n\n## ã‚„ã‚ŠãŸã„ã“ã¨\n\n[Kotlin_Coroutines](Kotlin_Coroutines.md) ã‚’ä½¿ã£ã¦ä¸¦åˆ—å‡¦ç†ã‚’ã—ãŸã¨ãã«ã€ä¸¦åˆ—æ•°ã‚’åˆ¶å¾¡ã—ãŸã„\nãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨ã€CPUã®ã‚³ã‚¢æ•°ï¼Ÿ\n\n## æ–¹æ³•\n\n### Semaphore\n\nhttps://stackoverflow.com/questions/58428584/limiting-the-maximum-number-of-coroutines-that-can-run-in-a-scope\n\n````kotlin\n    import kotlinx.coroutines.sync.Semaphore\n\n    val requestSemaphore = Semaphore(5)\n    \n    runBlocking {\n        mDownloadJobs.map {\n            async {\n                // Will limit number of concurrent requests to 5\n                requestSemaphore.withPermit {\n                    it.loadData()\n                }\n            }\n        }\n    }\n````\n\nkotlin,kotlinx 1.3 ã®ç’°å¢ƒã§ã¯ `kotlin/KotlinNothingValueException` ãŒã§ã¦ã€ SemaphoreImpl ãŒè¦‹ã¤ã‹ã‚‰ãªã„ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã—ã¾ã„ã ã‚ã ã£ãŸ\n\nkotlin-stdlib-jdk8 ã¨ kotlinx-coroutines-core ã ã‘ã ã¨ã ã‚\nkotlin-stdlibã‚’è¿½åŠ ã—ã¦ã€1.4ã«ã™ã‚‹ã¨å‹•ã„ãŸ\n\n### Channelã‚’ä½¿ã†\n\nhttps://stackoverflow.com/questions/47686353/how-to-cap-kotlin-coroutines-maximum-concurrency\nhttps://tech.uzabase.com/entry/2019/11/05/190000\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Kotlin"]},"/note/Kubernetes":{"title":"Kubernetes","content":"\nOSSã®ã‚³ãƒ³ãƒ†ãƒŠã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ„ãƒ¼ãƒ«\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/04/26","Kubernetes"]},"/note/Kubernetes-Krew":{"title":"Kubernetes Krew","content":"\nhttps://krew.sigs.k8s.io/docs/user-guide/setup/install/\n\n[kubectl](note/kubectl.md) å‘ã‘ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ãƒ„ãƒ¼ãƒ«\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Kubernetes"]},"/note/Kubernetes-configMapGenerator%E3%82%92%E4%BD%BF%E3%81%86":{"title":"Kubernetes configMapGeneratorã‚’ä½¿ã†","content":"\n\\#Kubernetes\n\n[Kustomize](note/Kustomize.md) ã®å ´åˆã€ConfigMapã‚’ç›´æ¥æŒ‡å®šã™ã‚‹ä»£ã‚ã‚Šã«configMapGeneratorã‚’ä½¿ç”¨ã—ã¦ä½œæˆã§ãã‚‹\n\n\u003chttps://kubernetes.io/docs/tasks/manage-kubernetes-objects/kustomization/\u003e\nhttps://github.com/kubernetes-sigs/kustomize/blob/master/examples/configGeneration.md\n\n* literals: key-valueã‚’æŒ‡å®šã™ã‚‹\n* files: ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹\n\n````yaml\napiVersion: kustomize.config.k8s.io/v1beta1\nkind: Kustomization\nnamePrefix: dev-\ncommonLabels:\n  env: dev\nresources:\n- ./../../base\nconfigMapGenerator:\n- name: config-file\n  files:\n  - application.yaml\n- name: the-map\n  literals:\n    - altGreeting=Good Morning!\n    - enableRisky=\"false\"\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Kubernetes"]},"/note/Kubernetes-limits%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%97%E3%81%9FPod%E3%81%A7%E5%8B%95%E3%81%8B%E3%81%97%E3%81%A6%E3%81%84%E3%82%8B%E3%83%97%E3%83%AD%E3%82%BB%E3%82%B9%E3%81%8C%E3%83%A1%E3%83%A2%E3%83%AA%E8%B6%85%E9%81%8E%E3%81%97%E3%81%A6%E3%82%82evict%E3%81%95%E3%82%8C%E3%81%9A%E3%83%97%E3%83%AD%E3%82%BB%E3%82%B9%E3%81%8Ckill%E3%81%95%E3%82%8C%E3%82%8B":{"title":"Kubernetes limitsã‚’æŒ‡å®šã—ãŸPodã§å‹•ã‹ã—ã¦ã„ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ãŒãƒ¡ãƒ¢ãƒªè¶…éã—ã¦ã‚‚evictã•ã‚Œãšãƒ—ãƒ­ã‚»ã‚¹ãŒkillã•ã‚Œã‚‹","content":"\n[kubernetes resourcesã®è¨­å®šå€¤ã«ã¤ã„ã¦ Kubernetes](note/kubernetes%20resourcesã®è¨­å®šå€¤ã«ã¤ã„ã¦%20Kubernetes.md)\n\n`command: ['sleep', '3600']` ã¨ã‹ã§èµ·å‹•ã—ãŸpodã«execã§å…¥ã£ã¦ `yes` ã‚³ãƒãƒ³ãƒ‰ç­‰ã§è² è·ã‚’ã‹ã‘ã¦ã‚‚ã€`yes` ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒkillã•ã‚Œã‚‹ã ã‘ã§podã¯evictã•ã‚Œãªã‹ã£ãŸã€‚\nãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆèª­ã‚€é™ã‚ŠpodãŒevictã•ã‚Œã‚‹ã®ã‹ã¨æ€ã£ãŸãŒãã†ã˜ã‚ƒãªã„ï¼Ÿ\n\nã“ã¡ã‚‰ã«æ›¸ã„ã¦ã‚ã£ãŸ\nhttps://dunkshoot.hatenablog.com/entry/kubernetes_manage_resource#limits-%E3%82%92%E8%B6%85%E3%81%88%E3%81%A6%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%84%E3%83%A1%E3%83%A2%E3%83%AA\n\nèµ·å‹•æ™‚ã®ã‚³ãƒãƒ³ãƒ‰ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒlimitsã«é”ã—ãŸã¨ãã€podãŒkillã•ã‚Œã‚‹(æƒ³å®šé€šã‚Š)\n\nkillã•ã‚ŒãŸç†ç”±ãŒã©ã“ã‹ã«å‡ºåŠ›ã•ã‚Œã¦ã„ã‚‹ã®ã‹ã¯ã‚ã‹ã‚‰ãªã‹ã£ãŸã€‚\ndescribe pod ã™ã‚‹ã¨è² è·ã‹ã‘ãŸã‚³ãƒ³ãƒ†ãƒŠã®ã»ã†ã«OOMKilledãŒå‡ºã¦ã„ã‚‹ã®ã¯ã‚ã‹ã£ãŸ\n\n````yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: test-deployment\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: test-app\n  template:\n    metadata:\n      labels:\n        app: test-app\n    spec:\n      containers:\n      - name: busybox # ã“ã¡ã‚‰ã¯killã•ã‚Œãªã„\n        image: busybox:latest\n        command: ['sh', '-c', 'echo \"Hello, Kubernetes!\" \u0026\u0026 sleep 3600']\n        resources:\n          requests:\n            cpu: \"100m\"\n            memory: \"64M\"\n          limits:\n            cpu: \"200m\"\n            memory: \"128M\"\n      - name: stress # killã•ã‚Œã‚‹\n        image: polinux/stress:latest\n        command: ['stress']\n        args: [\"--vm\", \"1\", \"--vm-bytes\", \"256M\", \"--vm-hang\", \"1\"]\n        resources:\n          requests:\n            cpu: \"100m\"\n            memory: \"64M\"\n          limits:\n            cpu: \"200m\"\n            memory: \"128M\"\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/01/26","Kubernetes"]},"/note/Kustomize":{"title":"Kustomize","content":"\nhttps://kustomize.io\n\nè¤‡æ•°ã®Kubernetesã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚’ç®¡ç†ã™ã‚‹å ´åˆã«ã€ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç®¡ç†ã—ã‚„ã™ãã™ã‚‹ãƒ„ãƒ¼ãƒ«\n\né–‹ç™ºç’°å¢ƒã¨æœ¬ç•ªç’°å¢ƒãªã©ã€å„ç’°å¢ƒã”ã¨ã«ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ä½œæˆã™ã‚‹ã¨ã€å…¨ç’°å¢ƒã«å…±é€šã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å¤‰æ›´ã—ãŸã„ã¨ãã«ã™ã¹ã¦ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å¤‰æ›´ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã€ç®¡ç†ãŒå¤§å¤‰ã«ãªã‚‹ã€‚\nãã“ã§Kustomizeã‚’ä½¿ã†ã“ã¨ã§ã€ç’°å¢ƒã”ã¨ã«å…±é€šã®éƒ¨åˆ†ã‚’å®šç¾©ã—ãŸãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«(base)ã¨ã€å·®ç•°ãŒã‚ã‚‹éƒ¨åˆ†ã ã‘ã‚’å®šç¾©ã—ãŸãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ(overlays)ã«åˆ†ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\n`kustomize build` ã§baseã¨overlaysã‚’ãƒãƒ¼ã‚¸ã—ãŸãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’ä½œæˆã§ãã‚‹ã€‚\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Kubernetes"]},"/note/Kustomize-patch%E3%81%A7%E7%89%B9%E5%AE%9A%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E3%81%AE%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9%E3%81%AB%E3%81%BE%E3%81%A8%E3%82%81%E3%81%A6patch%E3%82%92%E5%BD%93%E3%81%A6%E3%82%8B":{"title":"Kustomize patchã§ç‰¹å®šãƒ‘ã‚¿ãƒ¼ãƒ³ã®ãƒªã‚½ãƒ¼ã‚¹ã«ã¾ã¨ã‚ã¦patchã‚’å½“ã¦ã‚‹","content":"\npatch ã§è¤‡æ•°ã®ãƒªã‚½ãƒ¼ã‚¹ã«ã¾ã¨ã‚ã¦å¤‰æ›´ã‚’åŠ ãˆãŸã„å ´åˆã«ä½¿ãˆã‚‹\n\n````\napiVersion: kustomize.config.k8s.io/v1beta1\nkind: Kustomization\nresources:\n- github.com/argoproj/argo-cd/manifests/cluster-install?ref=v2.5.0\n\npatches:\n  - patch: |-\n      kind: any\n      metadata:\n        name: any\n      spec:\n        template:\n          spec:\n            nodeSelector:\n              ap-type: argocd-node\n    target:\n      kind: (StatefulSet|Deployment)\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["2023/04/07","Kubernetes"]},"/note/Lambda%E3%81%A7%E3%82%BF%E3%82%A4%E3%83%A0%E3%82%A2%E3%82%A6%E3%83%88%E3%81%97%E3%81%9F%E3%81%A8%E3%81%8D%E3%81%AB%E5%87%A6%E7%90%86%E3%82%92%E3%81%97%E3%81%9F%E3%81%84":{"title":"Lambdaã§ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ãŸã¨ãã«å‡¦ç†ã‚’ã—ãŸã„","content":"\n\\#Go #Lambda\n\n[Go ã® AWS Lambda context ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ - AWS Lambda](https://docs.aws.amazon.com/ja_jp/lambda/latest/dg/golang-context.html)\n\nLambda ã§ã¯å®Ÿè¡Œæ™‚ã« context.Context ã‚’å—ã‘å–ã‚‹ã“ã¨ãŒã§ãã€\nLambda ãŒèµ·å‹•ã—ãŸæ™‚é–“ï¼‹Lambdaã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆç§’ã‚’ DeadLine ã¨ã—ã¦å–å¾—ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\n\n````go\npackage main\n\nimport (\n        \"context\"\n        \"log\"\n        \"time\"\n        \"github.com/aws/aws-lambda-go/lambda\"\n)\n\nfunc longFunc(ctx, err chan error) {\n    time.Sleep(2 * time.Second)\n    close(err)\n}\n\nfunc LongRunningHandler(ctx context.Context) (string, error) {\n\n\tdeadline, _ := ctx.Deadline()\n\tdeadline = deadline.Add(-1 * time.Second)\n\ttimeoutChannel := time.After(time.Until(deadline))\n\n\terrChan := make(chan error)\n\n\tgo longFunc(ctx, errChan)\n\n\tselect {\n\tcase \u003c-timeoutChannel:\n\t\treturn nil, errors.New(\"timeout\")\n\tcase err := \u003c-errChan:\n        if err != nil {\n            return nil, err\n        } else {\n            return \"success\", nil\n        }\n\t}\n\n}\n\nfunc main() {\n        lambda.Start(LongRunningHandler)\n}\n````\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":["Go","Lambda"]},"/note/Lambda%E5%90%8C%E6%99%82%E5%AE%9F%E8%A1%8C%E6%95%B0":{"title":"LambdaåŒæ™‚å®Ÿè¡Œæ•°","content":"\n\\#AWS #Lambda \n\n* åŒæ™‚å®Ÿè¡Œæ•°ã®ä¸Šé™ã¯ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå…¨ä½“ã®1ãƒªãƒ¼ã‚¸ãƒ§ãƒ³ã«ã¤ã1000\n* é–¢æ•°Aã§1000ä»¶å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ã¨é–¢æ•°BãŒå¤±æ•—ã™ã‚‹\n* é–¢æ•°ã”ã¨ã«åŒæ™‚å®Ÿè¡Œæ•°ä¸Šé™ã‚’è¨­å®šã§ãã‚‹\n\n[\\[ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ\\]Lambdaã®åŒæ™‚å®Ÿè¡Œæ•°ã‹ã‚™ã‚ˆã‚Šãã‚ç´°ã‹ãç¢ºèªã¦ã‚™ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ | DevelopersIO](https://dev.classmethod.jp/articles/aws-lambda-metric-for-concurrent-executions-now-supports-all-functions-versions-and-aliases/)\n\n[Lambda é–¢æ•°ã«å†ªç­‰ã«ã™ã‚‹](https://aws.amazon.com/jp/premiumsupport/knowledge-center/lambda-function-idempotent/)\n\n[Lambda é–¢æ•°ã®åŒæ™‚å®Ÿè¡Œæ•°ã‚’1ã«ã—ã¦ã‚‚å†ªç­‰æ€§ã®æ‹…ä¿ã‹ã‚‰é€ƒã‚Œã‚‹ã“ã¨ã¯å‡ºæ¥ãªã„ | by noid11 | Medium](https://medium.com/@noid11/lambda-%E9%96%A2%E6%95%B0%E3%81%AE%E5%90%8C%E6%99%82%E5%AE%9F%E8%A1%8C%E6%95%B0%E3%82%921%E3%81%AB%E3%81%97%E3%81%A6%E3%82%82%E5%86%AA%E7%AD%89%E6%80%A7%E3%81%AE%E6%8B%85%E4%BF%9D%E3%81%8B%E3%82%89%E9%80%83%E3%82%8C%E3%82%8B%E3%81%93%E3%81%A8%E3%81%AF%E5%87%BA%E6%9D%A5%E3%81%AA%E3%81%84-24a7e414933d)\n\n \u003e \n \u003e ãƒ»å†ªç­‰æ€§ã¯ãŠå®¢æ§˜ã®ã‚³ãƒ¼ãƒ‰ã§ç¢ºä¿ã™ã‚‹å¿…è¦ãŒã‚ã‚‹\n \u003e \n \u003e * AWS Lambda ã§ä¿è¨¼ã—ã¦ã„ã‚‹ã®ã¯æœ€ä½1å›å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã‚ã‚Š1å›ã—ã‹å®Ÿè¡Œã—ãªã„ã“ã¨ã§ã¯ãªã„\n \u003e \n \u003e * åŒä¸€ã‚¤ãƒ™ãƒ³ãƒˆã§åŒä¸€ Lambda ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³ãŒ2å›èµ·å‹•ã•ã‚Œã‚‹ã“ã¨ãŒã¾ã‚Œã«ç™ºç”Ÿã™ã‚‹\n \u003e \n \u003e * DynamoDB ã‚’åˆ©ç”¨ã™ã‚‹ãªã©ã—ã¦å†ªç­‰æ€§ã‚’æ‹…ä¿ã™ã‚‹å®Ÿè£…ã‚’è¡Œã†ã“ã¨\n\n \u003e \n \u003e 1. å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆã®å›ºæœ‰å±æ€§ã®å€¤ã‚’æŠ½å‡ºã—ã¾ã™ã€‚(ãŸã¨ãˆã°ã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã¾ãŸã¯è³¼å…¥ ID ãªã©ã€‚)\n \u003e \n \u003e 1. å±æ€§å€¤ãŒã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ ([Amazon DynamoDB ãƒ†ãƒ¼ãƒ–ãƒ«](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/WorkingWithTables.html)ãªã©) ã«å­˜åœ¨ã™ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚  \n \u003e    **æ³¨:** ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã« AWS ã‚µãƒ¼ãƒ“ã‚¹ã‚’è¿½åŠ ã™ã‚‹ã¨ã€è¿½åŠ è²»ç”¨ãŒç™ºç”Ÿã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚è©³ç´°ã«ã¤ã„ã¦ã¯ã€ã€Œ[Amazon DynamoDB æ–™é‡‘](https://aws.amazon.com/dynamodb/pricing/)ã€ãŠã‚ˆã³ã€Œ[AWS æ–™é‡‘](https://aws.amazon.com/pricing/)ã€ã‚’ã”å‚ç…§ãã ã•ã„ã€‚\n \u003e \n \u003e 1. ä¸€æ„ã®å€¤ãŒå­˜åœ¨ã™ã‚‹å ´åˆ (é‡è¤‡ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç¤ºã™)ã€å®Ÿè¡Œã‚’æ­£å¸¸ã«çµ‚äº†ã—ã¾ã™ (ã¤ã¾ã‚Šã‚¨ãƒ©ãƒ¼ã‚’ã‚¹ãƒ­ãƒ¼ã™ã‚‹ã“ã¨ãŒãªã„)ã€‚ä¸€æ„ã®å€¤ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ã€é€šå¸¸ã®å®Ÿè¡Œã‚’ç¶™ç¶šã—ã¾ã™ã€‚\n \u003e \n \u003e 1. é–¢æ•°ã®å‹•ä½œãŒæ­£å¸¸ã«çµ‚äº†ã—ãŸã‚‰ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¾ã™ã€‚\n \u003e \n \u003e 1. å®Ÿè¡Œã‚’çµ‚äº†ã—ã¾ã™ã€‚\n","lastmodified":"2023-07-29T08:18:43.027497157Z","tags":[]},"/note/Lambda%E9%96%A2%E6%95%B0%E3%81%AB%E5%90%8C%E6%99%82%E5%AE%9F%E8%A1%8C%E6%95%B0%E3%82%92%E6%8B%85%E4%BF%9D%E3%81%99%E3%82%8B":{"title":"Lambdaé–¢æ•°ã«åŒæ™‚å®Ÿè¡Œæ•°ã‚’æ‹…ä¿ã™ã‚‹","content":"\n[Lambda é–¢æ•°ã«å†ªç­‰ã«ã™ã‚‹](https://aws.amazon.com/jp/premiumsupport/knowledge-center/lambda-function-idempotent/)\n\n[Lambda é–¢æ•°ã®åŒæ™‚å®Ÿè¡Œæ•°ã‚’1ã«ã—ã¦ã‚‚å†ªç­‰æ€§ã®æ‹…ä¿ã‹ã‚‰é€ƒã‚Œã‚‹ã“ã¨ã¯å‡ºæ¥ãªã„ | by noid11 | Medium](https://medium.com/@noid11/lambda-%E9%96%A2%E6%95%B0%E3%81%AE%E5%90%8C%E6%99%82%E5%AE%9F%E8%A1%8C%E6%95%B0%E3%82%921%E3%81%AB%E3%81%97%E3%81%A6%E3%82%82%E5%86%AA%E7%AD%89%E6%80%A7%E3%81%AE%E6%8B%85%E4%BF%9D%E3%81%8B%E3%82%89%E9%80%83%E3%82%8C%E3%82%8B%E3%81%93%E3%81%A8%E3%81%AF%E5%87%BA%E6%9D%A5%E3%81%AA%E3%81%84-24a7e414933d)\n\n \u003e \n \u003e ãƒ»å†ªç­‰æ€§ã¯ãŠå®¢æ§˜ã®ã‚³ãƒ¼ãƒ‰ã§ç¢ºä¿ã™ã‚‹å¿…è¦ãŒã‚ã‚‹\n \u003e \n \u003e * AWS Lambda ã§ä¿è¨¼ã—ã¦ã„ã‚‹ã®ã¯æœ€ä½1å›å®Ÿè¡Œã™ã‚‹ã“ã¨ã§ã‚ã‚Š1å›ã—ã‹å®Ÿè¡Œã—ãªã„ã“ã¨ã§ã¯ãªã„\n \u003e \n \u003e * åŒä¸€ã‚¤ãƒ™ãƒ³ãƒˆã§åŒä¸€ Lambda ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³ãŒ2å›èµ·å‹•ã•ã‚Œã‚‹ã“ã¨ãŒã¾ã‚Œã«ç™ºç”Ÿã™ã‚‹\n \u003e \n \u003e * DynamoDB ã‚’åˆ©ç”¨ã™ã‚‹ãªã©ã—ã¦å†ªç­‰æ€§ã‚’æ‹…ä¿ã™ã‚‹å®Ÿè£…ã‚’è¡Œã†ã“ã¨\n\n \u003e \n \u003e 1. å…¥åŠ›ã‚¤ãƒ™ãƒ³ãƒˆã®å›ºæœ‰å±æ€§ã®å€¤ã‚’æŠ½å‡ºã—ã¾ã™ã€‚(ãŸã¨ãˆã°ã€ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ã¾ãŸã¯è³¼å…¥ ID ãªã©ã€‚)\n \u003e \n \u003e 1. å±æ€§å€¤ãŒã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ ([Amazon DynamoDB ãƒ†ãƒ¼ãƒ–ãƒ«](https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/WorkingWithTables.html)ãªã©) ã«å­˜åœ¨ã™ã‚‹ã‹ã©ã†ã‹ã‚’ç¢ºèªã—ã¾ã™ã€‚  \n \u003e    **æ³¨:** ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã« AWS ã‚µãƒ¼ãƒ“ã‚¹ã‚’è¿½åŠ ã™ã‚‹ã¨ã€è¿½åŠ è²»ç”¨ãŒç™ºç”Ÿã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚è©³ç´°ã«ã¤ã„ã¦ã¯ã€ã€Œ[Amazon DynamoDB æ–™é‡‘](https://aws.amazon.com/dynamodb/pricing/)ã€ãŠã‚ˆã³ã€Œ[AWS æ–™é‡‘](https://aws.amazon.com/pricing/)ã€ã‚’ã”å‚ç…§ãã ã•ã„ã€‚\n \u003e \n \u003e 1. ä¸€æ„ã®å€¤ãŒå­˜åœ¨ã™ã‚‹å ´åˆ (é‡è¤‡ã‚¤ãƒ™ãƒ³ãƒˆã‚’ç¤ºã™)ã€å®Ÿè¡Œã‚’æ­£å¸¸ã«çµ‚äº†ã—ã¾ã™ (ã¤ã¾ã‚Šã‚¨ãƒ©ãƒ¼ã‚’ã‚¹ãƒ­ãƒ¼ã™ã‚‹ã“ã¨ãŒãªã„)ã€‚ä¸€æ„ã®å€¤ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯ã€é€šå¸¸ã®å®Ÿè¡Œã‚’ç¶™ç¶šã—ã¾ã™ã€‚\n \u003e \n \u003e 1. é–¢æ•°ã®å‹•ä½œãŒæ­£å¸¸ã«çµ‚äº†ã—ãŸã‚‰ã€ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ãƒ¬ã‚³ãƒ¼ãƒ‰ãŒå«ã¾ã‚Œã¾ã™ã€‚\n \u003e \n \u003e 1. å®Ÿè¡Œã‚’çµ‚äº†ã—ã¾ã™ã€‚\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["AWS","Lambda"]},"/note/LamdbaEdge":{"title":"LamdbaEdge","content":"\n\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["AWS"]},"/note/Linux%E3%81%A8Windows%E3%81%AE%E3%83%87%E3%83%A5%E3%82%A2%E3%83%AB%E3%83%96%E3%83%BC%E3%83%88%E3%82%92%E3%82%84%E3%82%81%E3%81%9F":{"title":"Linuxã¨Windowsã®ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ–ãƒ¼ãƒˆã‚’ã‚„ã‚ãŸ","content":"\n[Windows10ã¨Ubuntu16.04ã®ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ–ãƒ¼ãƒˆè§£é™¤](note/Windows10ã¨Ubuntu16.04ã®ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ–ãƒ¼ãƒˆè§£é™¤.md)\n\n[Linuxã¨Windowsã‚’ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ–ãƒ¼ãƒˆã™ã‚‹ã®ã¯æ­¢ã‚ãŸã»ã†ãŒè‰¯ã„ | SlackNote](https://slacknotebook.com/os-dual-boot-is-a-bad-idea/)\n\nãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ–ãƒ¼ãƒˆã¯ä¸éƒ½åˆãŒèµ·ã“ã‚Šã‚„ã™ã„ã®ã§ã‚„ã‚ãŸã€‚\nä»¥ä¸‹ãŒã‚ã’ã‚‰ã‚Œã¦ã„ãŸã€‚\n\n* ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã‚«ã‚ªã‚¹åŒ–\n* ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã®è¤‡é›‘åŒ–\n* å¾©æ—§ä½œæ¥­ã®é¢å€’ã•\n\nå®Ÿéš›ã€Windowsã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸã¨ãã«Grubç”»é¢ãŒè¡¨ç¤ºã•ã‚Œãªããªã£ãŸã“ã¨ãŒã‚ã‚‹ã®ã§ã“ã‚Œã¯èº«ã«ã—ã¿ã¦ã„ã‚‹\n\n### è§£æ±ºç­–\n\nç‰©ç†çš„ã«ã‚‚ã†ä¸€ã¤åˆ¥ã®ãƒ‰ãƒ©ã‚¤ãƒ–ã‚’è¼‰ã›ã€Linuxã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚\nBIOSç”»é¢ã§èµ·å‹•é †åºã•ãˆæ±ºã‚ã¦ã—ã¾ãˆã°ã€äº‹æ•…ãŒèµ·ã“ã‚Šã«ãã„ã€‚\n\nãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ–ãƒ¼ãƒˆè‡ªä½“ã‚’å­¦ç¿’ã—ãŸã„ã€ãªã‚“ã‹ã‹ã£ã“ã„ã„ãªã©ä¾¡å€¤ã‚’è¦‹å‡ºã—ã¦ã„ã‚‹ã®ã§ãªã‘ã‚Œã°ã€ä»®æƒ³åŒ–ã§ååˆ†\nWSL2ã¨ã‹ã‚ã‚‹ã—\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["Windows","Ubuntu"]},"/note/Locust":{"title":"Locust","content":"\n[Locust - A modern load testing framework](https://locust.io/)\n\nLocust ã¯Pythonã§æ›¸ã‹ã‚ŒãŸè² è·è©¦é¨“ãƒ„ãƒ¼ãƒ«\nã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚‚Pythonã§æ›¸ã\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["2023/01/05","loadtest"]},"/note/Locust%E3%81%A8Boomer%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6Go%E3%81%A7%E8%B2%A0%E8%8D%B7%E8%A9%A6%E9%A8%93%E3%81%AE%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%97%E3%83%88%E3%82%92%E6%9B%B8%E3%81%8F":{"title":"Locustã¨Boomerã‚’ä½¿ã£ã¦Goã§è² è·è©¦é¨“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ã","content":"\n[DMMãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚’æ”¯ãˆã‚‹è² è·è©¦é¨“åŸºç›¤ - Speaker Deck](https://speakerdeck.com/yuyu_hf/cndt-2022-dmm-load-testing-platform-for-dmm-platform)\n[gRPC + Locust + boomerã¦ã‚™è² è·è©¦é¨“ã‚’ã—ã¦ã¿ãŸ - Qiita](https://qiita.com/shka0909/items/ea0ec3ddaecb3dfa8239)\n\n[Locust](note/Locust.md) ã¯Pythonã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’æ›¸ãã€‚\nGoã§è² è·è©¦é¨“ã®å‡¦ç†ã‚’æ›¸ããŸããªã£ãŸã®ã§ã€\n[Boomer](https://github.com/myzhan/boomer) ã‚’èª¿ã¹ã¦ã¿ãŸ\n[k6](note/è² è·è©¦é¨“%20k6ã«ã¤ã„ã¦.md)ã‚‚ã„ã„ã‘ã©\n\n## ã‚·ãƒŠãƒªã‚ªã‚’ä½œæˆ\n\nãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å–å¾—\n\n````shell\n$ go get -u github.com/myzhan/boomer@master\n````\n\nv1.6.0æ™‚ç‚¹ã§ã¯ã€masterã‚’æŒ‡å®šã—ãªã„ã¨æ¬¡ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦locust masterã¨æ¥ç¶šã§ããªã‹ã£ãŸã€‚\n`An old (pre 2.0) worker tried to connect (xxx). That's not going to work`\nhttps://github.com/myzhan/boomer/issues/160\n\nã‚·ãƒŠãƒªã‚ª `main.go`\n\n````go\npackage main\n\nimport (\n\t\"fmt\"\n\t\"io\"\n\t\"log\"\n\t\"net/http\"\n\t\"time\"\n\n\t\"github.com/myzhan/boomer\"\n)\n\nfunc hello(url string) func() {\n\treturn func() {\n\t\t// ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚¿ã‚¤ãƒ ã‚’è¨ˆæ¸¬ã™ã‚‹ãŸã‚ã«ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æŠ•ã’ã‚‹å‰ã®æ™‚åˆ»ã‚’å–å¾—ã™ã‚‹\n\t\tstart := time.Now()\n\t\tresp, err := http.Get(url)\n\t\tif err != nil {\n\t\t\tlog.Fatalf(\"%+v\", err)\n\t\t}\n\t\tdefer resp.Body.Close()\n\n\t\tb, err := io.ReadAll(resp.Body)\n\t\tif err != nil {\n\t\t\tlog.Fatalf(\"%+v\", err)\n\t\t}\n\n\t\tif resp.StatusCode \u003e= 400 {\n\t\t\t// ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¤±æ•—ã—ãŸå ´åˆã¯RecordFailureã‚’å‘¼ã³ã¾ã™\n\t\t\tboomer.RecordFailure(\n\t\t\t\t\"http\",\n\t\t\t\turl,\n\t\t\t\ttime.Since(start).Nanoseconds()/int64(time.Millisecond),\n\t\t\t\tfmt.Sprintf(\"failed: %+v\", err),\n\t\t\t)\n\t\t} else {\n\t\t\t// ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«æˆåŠŸã—ãŸå ´åˆã¯RecordSuccessã‚’å‘¼ã³ã¾ã™\n\t\t\tboomer.RecordSuccess(\n\t\t\t\t\"http\",\n\t\t\t\turl,\n\t\t\t\ttime.Since(start).Nanoseconds()/int64(time.Millisecond),\n\t\t\t\tint64(len(b)),\n\t\t\t)\n\t\t}\n\t}\n}\n\nfunc main() {\n\ttasks := make([]*boomer.Task, 0)\n\turls := []string{\"http://localhost:3000/hello\", \"http://localhost:3000/nothing\"}\n\tfor _, url := range urls {\n\t\ttask := \u0026boomer.Task{\n\t\t\tName:   \"hello\",\n\t\t\tWeight: 10,\n\t\t\tFn:     hello(url),\n\t\t}\n\t\ttasks = append(tasks, task)\n\t}\n\tboomer.Run(tasks...)\n}\n````\n\n## masterã‚’èµ·å‹•ã™ã‚‹\n\né©å½“ãªlocustfileã‚’ä½œæˆ\n\n`dummy.py`\n\n````python\nfrom locust import HttpUser, task\n\nclass HelloWorldUser(HttpUser):\n    @task\n    def hello_world(self):\n        print(\"hello\")\n````\n\ndockerã§locustã‚’å®Ÿè¡Œã™ã‚‹\n\n````shell\ndocker run -p 8089:8089 -p 5557:5557 -v $PWD:/mnt/locust locustio/locust --master -f /mnt/locust/dummy.py\n````\n\nWeb UIã¯8089ã€workerã¨ã®é€šä¿¡ã¯5557\nhttps://boomer.readthedocs.io/en/latest/options.html\n\nlocalhost:8089ã§Web UIãŒé–‹ã\n\nã“ã®çŠ¶æ…‹ã§workerã‚’å®Ÿè¡Œã™ã‚‹\n\n````shell\n$ go run main.go\n````\n\nã™ã‚‹ã¨WORKERSã«ç™»éŒ²ã•ã‚Œã‚‹\n\n![Pasted-image-20230110180714](note/Pasted-image-20230110180714.png)\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["2023/01/05","Go","loadtest"]},"/note/M1-Mac%E3%81%A7Node.js%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB":{"title":"M1 Macã§Node.jsã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«","content":"\n\\#Nodejs \n\n* æœ€æ–°ã®Nodeãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§èµ·å‹•ã«å¤±æ•—ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã ã£ãŸã®ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã•ã’ãŸã„\n\n* `nodebrew install v15` ã¯ã€`https://nodejs.org/dist/v16.0.0/node-v15.14.0-darwin-arm64.tar.gz` ãŒãªã„ã¨è¨€ã‚ã‚Œã‚‹ã®ã§ã‚½ãƒ¼ã‚¹ã‹ã‚‰ãƒ“ãƒ«ãƒ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚‹\n\n* ã¤ã„ã§ã«nodebrewã‚’ã‚„ã‚ã¦ã€å–ã‚Šæ‰±ã„ãŒç°¡å˜ãã†ãªnvm (zsh plugin [https://github.com/lukechilds/zsh-nvm](https://github.com/lukechilds/zsh-nvm) ) ã«å¤‰æ›´\n\n* `nvm install 15` ã§ãƒã‚¤ãƒŠãƒªãŒãªã‹ã£ãŸã‚‰ã‚½ãƒ¼ã‚¹ã‹ã‚‰ãƒ“ãƒ«ãƒ‰ã—ã¦ãã‚Œã‚‹ã€‚ãƒ“ãƒ«ãƒ‰ã«20åˆ†ãã‚‰ã„ã‹ã‹ã‚‹\n\n* ç•°ãªã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§å…¥ã‚ŒãŸnode_modulesã ã¨å®Ÿè¡Œã«å¤±æ•—ã—ãŸã®ã§ã€ä¸€åº¦æ¶ˆã—ã¦å†åº¦ `yarn install`\n\nã‚‚ã£ã¨ã„ã‚ã„ã‚å¤±æ•—ã™ã‚‹ã‹ã¨æ€ã£ãŸã‘ã©æ„å¤–ã¨ã™ã‚“ãªã‚Šå‹•ã„ãŸ\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":[]},"/note/M1-MacBook-Air":{"title":"M1 MacBook Air","content":"\n\u003chttps://www.apple.com/jp/shop/buy-mac/macbook-air/%E3%82%B9%E3%83%9A%E3%83%BC%E3%82%B9%E3%82%B0%E3%83%AC%E3%82%A4-8%E3%82%B3%E3%82%A2cpu%E3%81%A87%E3%82%B3%E3%82%A2gpu%E3%82%92%E6%90%AD%E8%BC%89%E3%81%97%E3%81%9Fapple-m1%E3%83%81%E3%83%83%E3%83%97-256gb\u003e\n\nç¾åœ¨ã®Macã‚’ä¸‹å–ã‚Šã«å‡ºã™ã“ã¨ã‚‚ã§ãã‚‹\n2015 MacBook Air ã§ã‚‚3ä¸‡å††å®‰ããªã‚‹\n\n[Apple Siliconã®M1ãƒãƒƒãƒ—](https://www.apple.com/jp/newsroom/2020/11/apple-unleashes-m1/) ã‚’æ­è¼‰\n\n \u003e \n \u003e AppleãŒä½œã£ãŸã‚‚ã®ã®ä¸­ã§æœ€ã‚‚ãƒ‘ãƒ¯ãƒ•ãƒ«ãªãƒãƒƒãƒ—ã§ã€Macã®ãŸã‚ã«è¨­è¨ˆã•ã‚ŒãŸåˆã‚ã¦ã®ãƒãƒƒãƒ—ã§ã™ã€‚M1ã¯ã€ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã•ã¨é›»åŠ›åŠ¹ç‡ãŒæ¥µã‚ã¦é‡è¦ã¨ãªã‚‹Macã‚·ã‚¹ãƒ†ãƒ ã®ãŸã‚ã«æœ€é©åŒ–ã•ã‚Œã¦ã„ã¾ã™ã€‚\n \u003e CPUæ€§èƒ½ã¯æœ€å¤§3.5å€ã€GPUæ€§èƒ½ã¯æœ€å¤§6å€ã€æ©Ÿæ¢°å­¦ç¿’ã§ã¯æœ€å¤§15å€é«˜é€Ÿã«ãªã‚Šã¾ã™ã€‚ã—ã‹ã‚‚ã€ãƒãƒƒãƒ†ãƒªãƒ¼ã¯ä¸€ä¸–ä»£å‰ã®Macã‚ˆã‚Šã‚‚æœ€å¤§2å€é•·ãæŒç¶šã—ã¾ã™ã€‚ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¨åŠ¹ç‡ã‚’å¤§å¹…ã«å‘ä¸Šã•ã›ã‚‹M1ã«ã‚ˆã‚Šã€Macã¯ã‹ã¤ã¦ãªã„ã»ã©å¤§ããªé€²åŒ–ã‚’é‚ã’ã¾ã™ã€‚\n\n\u003chttps://japan.cnet.com/article/35174609/\u003e\n\n* çœé›»åŠ›\n* ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„\n* GPUã‚‚æœ€å¤§5å€é«˜é€ŸåŒ–\n* ãƒ•ã‚¡ãƒ³ãƒ¬ã‚¹é™éŸ³\n* ä¾¡æ ¼ã‚‚13ä¸‡å††ãã‚‰ã„ã§ãƒã‚«é«˜ã„ã‚ã‘ã˜ã‚ƒãªã„\n* ãƒãƒ¼ãƒˆã¯type-CãŒ2ã¤ã§ç‰©è¶³ã‚Šãªã„\n\n## 2022-03-12\n\nåŠå¹´ãã‚‰ã„M2ã®Airã‚’å¾…ã£ã¦ã„ãŸãŒã€3/9ã®Appleã‚¤ãƒ™ãƒ³ãƒˆã§M2ã®Macbook Proã™ã‚‰ã§ãšã€å™‚ã§ã¯æ¬¡æœŸã®Airã¯M1ç¶šæŠ•ã‹ã‚‚ã¨ã„ã†ã“ã¨ã§ã€ã‚‚ã†åŠå¹´ã¯æµçŸ³ã«å¾…ã¦ãªã„ã¨ã„ã†ã“ã¨ã§è²·ã£ã¦ã—ã¾ã£ãŸã€‚\n8ã‚³ã‚¢CPU,7ã‚³ã‚¢GPU,ãƒ¡ãƒ¢ãƒª16GB,SSD256GB,Â¥137,280ã«ã—ãŸã€‚\nSSD512GBã¨è¿·ã£ãŸã‘ã©ã€128GBã§ãªã‚“ã¨ã‹ãªã£ã¦ã„ã‚‹ã—2å€ãªã‚‰ãªã‚“ã¨ã‹ãªã‚‹ã‹ãªâ€¦ã€å¤–ä»˜ã‘HDDä½¿ãˆã°ã„ã„ã‹ã¨æ€ã£ãŸ\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["Mac"]},"/note/M1-Macbook-Air-%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%972022-03":{"title":"M1 Macbook Air ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—2022-03","content":"\n\\#Mac\n\n* USé…åˆ—\n\n## karbiner\n\n## Obsidian\n\n## defaults\n\n## brew\n\n## IME\n\n## pyenvã‚’ã‚„ã‚ãŸ\n\npythonã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’åˆ‡ã‚Šæ›¿ãˆã¦ä½¿ã†ã“ã¨ãŒãã‚“ãªã«ãªã„ã®ã§ã€\nç‰¹å®šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ã„ãŸããªã£ãŸã‚‰dockerã‚’ä½¿ã†\n\n````shell\n$ brew install python\n$ export PATH=\"$(brew --prefix)/opt/python/libexec/bin:$PATH\" \u003e\u003e ~/.zshrc\n````\n\n## Vivaldi\n\n* æ¤œç´¢ã‚¨ãƒ³ã‚¸ãƒ³ã€ã‚­ãƒ¼ãƒãƒƒãƒ—ãŒã„ã¡ã„ã¡ãƒªã‚»ãƒƒãƒˆã•ã‚Œã¦ã—ã¾ã†ã®ãªã‚“ã¨ã‹ãªã‚‰ã‚“ã‹ã­\n\n## [Rust](note/Rust.md)\n\nrustupã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹\nhttps://www.rust-lang.org/tools/install\n\n````shell\n$ curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\n# ã‚‚ã—ãã¯ brew install rustup-init \u0026\u0026 rustup-init \n1ã‚’é¸æŠ\n$ rustup --version\n=\u003e ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª\n````\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["Mac"]},"/note/M1Mac%E3%81%A7docker%E3%81%AEvolume%E3%81%AF%E3%81%A9%E3%81%93%E3%81%AB%E3%81%82%E3%82%8B%E3%81%AE":{"title":"M1Macã§dockerã®volumeã¯ã©ã“ã«ã‚ã‚‹ã®","content":"\n\\#Docker \n\nã»ã¼ã“ã‚Œã®é€šã‚Š\n\n[Docker Desktop for Macã®HyperKit VMã«å…¥ã‚‹](https://uzimihsr.github.io/post/2020-12-15-docker-desktop-for-mac-hyperkit-vm/)\n\n````shell\n$ docker run -it --rm --name volume-test-container -v test-volume:/volume_dir alpine:latest /bin/ash\n````\n\n````shell\n$ docker inspect volume-test-container\n\n[\n    {\n        \"Id\": \"625a47db9275478db8235dc85f8711cc6a50fe5924f9e42f7f7ec23434f934e9\",\n        \"Mounts\": [\n            {\n                \"Type\": \"volume\",\n                \"Name\": \"test-volume\",\n                \"Source\": \"/var/lib/docker/volumes/test-volume/_data\",\n                \"Destination\": \"/volume_dir\",\n                \"Driver\": \"local\",\n                \"Mode\": \"z\",\n                \"RW\": true,\n                \"Propagation\": \"\"\n            },\n        ],\n    }\n]\n\n````\n\n`/var/lib/docker/volumes/test-volume/_data` ã«ã‚ã‚‹ã®ã­ã€ã¨lsã—ã¦ã¿ã¦ã‚‚ã€ãã‚“ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯ãªã„ã‚ˆã¨æ€’ã‚‰ã‚Œã‚‹ã€‚\nã˜ã‚ƒã‚ã©ã“ã«ã‚ã‚‹ã®ã‹ã¨ã„ã†ã¨ã€Docker Desktop for Macã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã€Dockerç’°å¢ƒã¯HyperKitã¨ã„ã†VM(ãƒãƒ¼ãƒãƒ£ãƒ«ãƒã‚·ãƒ³)ä¸Šã§å®Ÿè¡Œã•ã‚Œã¦ã„ã‚‹ãŸã‚Macã‹ã‚‰ã¯å‚ç…§ã§ããªã„ã€‚\nnsenter1ã¨ã„ã†ã‚³ãƒãƒ³ãƒ‰ã§VMã«å…¥ã£ã¦ç¢ºèªã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":[]},"/note/Mac%E3%81%A7F8%E3%82%92%E6%8A%BC%E3%81%97%E3%81%9F%E3%81%A8%E3%81%8D%E3%81%ABMusic%E3%82%92%E8%B5%B7%E5%8B%95%E3%81%95%E3%81%9B%E3%81%AA%E3%81%84%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B":{"title":"Macã§F8ã‚’æŠ¼ã—ãŸã¨ãã«Musicã‚’èµ·å‹•ã•ã›ãªã„ã‚ˆã†ã«ã™ã‚‹","content":"\nãŸã¾ã«F8ã‚­ãƒ¼(å†ç”Ÿ)ã‚’èª¤ã£ã¦æŠ¼ã—ã¦ã—ã¾ã„ã€Apple Music ãŒç«‹ã¡ä¸ŠãŒã‚‹ã®ã§é˜²æ­¢ã—ãŸã„ã€‚\n\n[Macã§Apple MusicãŒå‹æ‰‹ã«ç«‹ã¡ä¸ŠãŒã‚‹å•é¡Œã®å¯¾å‡¦æ³•](https://zenn.dev/catnose99/scraps/9c9858cc2d9f70)\n\n````shell\nlaunchctl unload -w /System/Library/LaunchAgents/com.apple.rcd.plist\n````\n\næˆ»ã™ã«ã¯ä»¥ä¸‹ã‚’å®Ÿè¡Œã™ã‚Œã°è‰¯ã•ãã†ã€‚\n\n````shell\nlaunchctl load -w /System/Library/LaunchAgents/com.apple.rcd.plist\n````\n\n`launchctl`ã®`load`ã¨`unload`ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã¯ãƒ¬ã‚¬ã‚·ãƒ¼ãªã®ã§ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã«ç½®ãæ›ãˆãŸæ–¹ãŒè‰¯ã•ãã† ã¨ã„ã†æ„è¦‹ã‚‚ã‚ã£ãŸãŒã€è‡ªåˆ†ã®ç’°å¢ƒ(MacBook Air 13-inch, Early 2015, Big Sur 11.5.2)ã§ã¯åŠ¹ã‹ãªã‹ã£ãŸ\n\nç„¡åŠ¹åŒ–\n\n````shell\nlaunchctl disable gui/\"$(id -u)\"/com.apple.rcd\nlaunchctl kill SIGTERM gui/\"$(id -u)\"/com.apple.rcd\n````\n\næœ‰åŠ¹åŒ–\n\n````shell\nlaunchctl enable gui/\"$(id -u)\"/com.apple.rcd\nlaunchctl kickstart gui/\"$(id -u)\"/com.apple.rcd\n````\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":[]},"/note/Mac%E3%81%AEdefaults%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89":{"title":"Macã®defaultsã‚³ãƒãƒ³ãƒ‰","content":"\n* [ã‚·ã‚¹ãƒ†ãƒ ç’°å¢ƒè¨­å®šã‚’ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ï¼ˆdefaultsã‚³ãƒãƒ³ãƒ‰ï¼‰ã‹ã‚‰è¨­å®šã™ã‚‹æ–¹æ³•ï¼ˆMission Controlï¼‰ - OTTANXYZ](https://www.ottan.xyz/posts/2016/07/system-preferences-terminal-defaults-mission-control-4656/)\n* [Mac ã‚’è²·ã£ãŸã‚‰å¿…ãšã‚„ã£ã¦ãŠããŸã„åˆæœŸè¨­å®šã‚’ã€å…¨ã¦è‡ªå‹•åŒ–ã—ã¦ã¿ãŸ](https://zenn.dev/ulwlu/articles/1c3a1da12887ed)\n  * \u003chttps://github.com/ulwlu/dotfiles/blob/master/system/macos.sh\u003e\n* \u003chttps://github.com/ryuichi1208/dotfiles/blob/master/mac/macos/.macos\u003e\n\n## ç¾åœ¨ã®è¨­å®šã‚’ã™ã¹ã¦å–å¾—ã™ã‚‹\n\n````shell\n$ defaults read \n\n## domainsã‚’ä½¿ã£ã¦æ›¸ãå ´åˆ\n$ LOGFILE=defaults_backup.log\n$ defaults domains | sed 's/, /\\n/g' | xargs -I % sh -c 'echo % \u0026\u0026 defaults read %' \u003e $LOGFILE\n$ defaults domains --currentHost | sed 's/, /\\n/g' | xargs -I % sh -c 'echo % \u0026\u0026 defaults read --currentHost %' \u003e\u003e $LOGFILE\n$ echo NSGlobaDomain \u003e\u003e $LOGFILE \u0026\u0026 defaults read NSGlobalDomain \u003e\u003e $LOGFILE\n````\n\n## ç‰¹å®šã®è¨­å®šã‚’è¦‹ã‚‹\n\n````shell\ndefaults read .GlobalPreferences_m\n````\n\n## è¨­å®šã‚’æ›¸ãè¾¼ã‚€\n\n````shell\n$ defaults write com.apple.dock mru-spaces -bool false\n````\n\n### ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚­ãƒ¼ã®å¤‰æ›´\n\nã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚­ãƒ¼ã¯è¾æ›¸å‹ã«ãªã£ã¦ã„ã‚‹ã®ã§ä»¥ä¸‹ã®ã‚ˆã†ã«ã™ã‚‹\n\n````shell\n# IMEåˆ‡ã‚Šæ›¿ãˆã®ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚’OFFã«ã™ã‚‹\n$ defaults write com.apple.symbolichotkeys AppleSymbolicHotKeys -dict-add 61 \"\u003cdict\u003e\u003ckey\u003eenabled\u003c/key\u003e\u003cfalse/\u003e\u003c/dict\u003e\"\n# Spotlightã‚’`option + command + space`ã§å‘¼ã³å‡ºã›ã‚‹ã‚ˆã†ã«ã™ã‚‹\n$ defaults write com.apple.symbolichotkeys AppleSymbolicHotKeys -dict-add 64 \"\u003cdict\u003e\u003ckey\u003eenabled\u003c/key\u003e\u003ctrue/\u003e\u003ckey\u003evalue\u003c/key\u003e\u003cdict\u003e\u003ckey\u003eparameters\u003c/key\u003e\u003carray\u003e\u003cinteger\u003e32\u003c/integer\u003e\u003cinteger\u003e49\u003c/integer\u003e\u003cinteger\u003e1572864\u003c/integer\u003e\u003c/array\u003e\u003ckey\u003etype\u003c/key\u003e\u003cstring\u003estandard\u003c/string\u003e\u003c/dict\u003e\u003c/dict\u003e\"\n````\n\n## è¨­å®šã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«æˆ»ã™\n\n````shell\n$ defaults delete com.apple.dock mru-spaces\n````\n\n## è¨­å®šã‚’åæ˜ ã™ã‚‹\n\ndefaults write ã ã‘ã§ã¯åæ˜ ã•ã‚Œãªã„ã®ã§ã€ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹\n\n````shell\nkillall Dock\nkillall Finder\nkillall SystemUIServer\n````\n\n## è¨­å®šå€¤ã®è¦‹ã¤ã‘æ–¹\n\nå…¬å¼ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒè¦‹ã¤ã‹ã‚‰ãªã„ãŸã‚ã€è‡ªåˆ†ã§æ¢ã™ã—ã‹ãªã„â€¦ã€‚\næ–¹æ³•ã¯ã€GUIã§ä¸€ã¤å¤‰æ›´ã™ã‚‹ãŸã³ã« `defaults read` ã§å–å¾—ã—ã€å·®åˆ†ã‚’ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã“ã¨ã§ã©ã®è¨­å®šå€¤ãŒå¯¾å¿œã—ã¦ã„ã‚‹ã‹ã‚’è¦‹ã¤ã‘ã‚‹ã€‚\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":[]},"/note/Mac%E7%AB%8B%E3%81%A1%E4%B8%8A%E3%81%92%E6%99%82%E3%81%AB%E3%82%A2%E3%83%97%E3%83%AA%E3%81%8C%E8%87%AA%E5%8B%95%E8%B5%B7%E5%8B%95%E3%81%99%E3%82%8B%E3%81%AE%E3%82%92%E9%98%B2%E3%81%90":{"title":"Macç«‹ã¡ä¸Šã’æ™‚ã«ã‚¢ãƒ—ãƒªãŒè‡ªå‹•èµ·å‹•ã™ã‚‹ã®ã‚’é˜²ã","content":"\n\\#Mac \n\nEAA ClientãŒè‡ªå‹•èµ·å‹•ã—ã¦ã€ã‚ªãƒ•ã«ã™ã‚‹è¨­å®šã‚‚ãªã„ã®ã§ã“ã¾ã£ãŸã€‚\n\nlaunchctlã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ãªã®ã§ã€ãã‚Œã‚’å‰Šé™¤ã™ã‚‹ã“ã¨ã«ã—ãŸã€‚\n\n````shell\n$ launchctl list | grep eaa\n-       78      net.eaacloop.uninstall\n-       0       net.eaacloop.eaaclient\n28947   0       application.com.akamai-access.go.eaacloop.1207957.1208116\n\n$ cat /Library/LaunchAgents/net.eaacloop.eaaclient.plist\n\u003c!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"\u003e\n\u003cplist version=\"1.0\"\u003e\n  \u003cdict\u003e\n    \u003ckey\u003eLabel\u003c/key\u003e\n    \u003cstring\u003enet.eaacloop.eaaclient\u003c/string\u003e\n    \u003ckey\u003eProgramArguments\u003c/key\u003e\n    \u003carray\u003e\n      \u003cstring\u003e/Applications/EAAClient.app/Contents/MacOS/EAAClient\u003c/string\u003e\n    \u003c/array\u003e\n    \u003ckey\u003eRunAtLoad\u003c/key\u003e\n    \u003ctrue/\u003e\n    \u003ckey\u003eKeepAlive\u003c/key\u003e\n    \u003cfalse/\u003e\n    \u003ckey\u003eversion\u003c/key\u003e\n    \u003cstring\u003e1.0.1\u003c/string\u003e\n    \u003ckey\u003eStandardErrorPath\u003c/key\u003e\n    \u003cstring\u003e/tmp/eaacTraystderr.log\u003c/string\u003e\n    \u003ckey\u003eStandardOutPath\u003c/key\u003e\n    \u003cstring\u003e/tmp/eaacTraystdout.log\u003c/string\u003e\n  \u003c/dict\u003e\n\u003c/plist\u003e\n\n# unloadã™ã‚‹\n$ launchctl unload /Library/LaunchAgents/net.eaacloop.eaaclient.plist\n\n# ãƒ•ã‚¡ã‚¤ãƒ«è‡ªä½“ã¯æ¶ˆãˆãªã„\n$ ls /Library/LaunchAgents/net.eaacloop.eaaclient.plist\n/Library/LaunchAgents/net.eaacloop.eaaclient.plist*\n\n$ launchctl list | grep eaa\n-       78      net.eaacloop.uninstall\n28947   0       application.com.akamai-access.go.eaacloop.1207957.1208116\n````\n\n=\u003e ã“ã‚Œã§ã¯PCå†èµ·å‹•ã™ã‚‹ã¨ã‚‚ã¨ã«æˆ»ã£ã¦ã—ã¾ã†ã€‚\n\nplistãƒ•ã‚¡ã‚¤ãƒ«ã‚’ `sudo vim /Library/LaunchAgents/net.eaacloop.eaaclient.plist` ã§é–‹ã„ã¦ã€ `RunAtLoad` ã‚’falseã«ã™ã‚‹ã€‚\n\n````plist\n\u003c!DOCTYPE plist PUBLIC \"-//Apple//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"\u003e\n\u003cplist version=\"1.0\"\u003e\n  \u003cdict\u003e\n    \u003ckey\u003eLabel\u003c/key\u003e\n    \u003cstring\u003enet.eaacloop.eaaclient\u003c/string\u003e\n    \u003ckey\u003eProgramArguments\u003c/key\u003e\n    \u003carray\u003e\n      \u003cstring\u003e/Applications/EAAClient.app/Contents/MacOS/EAAClient\u003c/string\u003e\n    \u003c/array\u003e\n    \u003ckey\u003eRunAtLoad\u003c/key\u003e\n    \u003cfalse/\u003e\n    \u003ckey\u003eKeepAlive\u003c/key\u003e\n    \u003cfalse/\u003e\n    \u003ckey\u003eversion\u003c/key\u003e\n    \u003cstring\u003e1.0.1\u003c/string\u003e\n    \u003ckey\u003eStandardErrorPath\u003c/key\u003e\n    \u003cstring\u003e/tmp/eaacTraystderr.log\u003c/string\u003e\n    \u003ckey\u003eStandardOutPath\u003c/key\u003e\n    \u003cstring\u003e/tmp/eaacTraystdout.log\u003c/string\u003e\n  \u003c/dict\u003e\n\u003c/plist\u003e\n````\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":[]},"/note/Mac-screenshot%E3%81%AE%E4%BF%9D%E5%AD%98%E5%85%88%E3%82%92%E5%A4%89%E3%81%88%E3%81%A6%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E5%90%8D%E3%82%82%E4%BB%BB%E6%84%8F%E3%81%AE%E5%BD%A2%E5%BC%8F%E3%81%AB%E3%81%99%E3%82%8B":{"title":"Mac screenshotã®ä¿å­˜å…ˆã‚’å¤‰ãˆã¦ãƒ•ã‚¡ã‚¤ãƒ«åã‚‚ä»»æ„ã®å½¢å¼ã«ã™ã‚‹","content":"\nMacã§ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚‹ã¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã« `ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ [æ—¥ä»˜] [æ™‚åˆ»].png` ã¨ã„ã£ãŸåå‰ã§ä¿å­˜ã•ã‚Œã¾ã™ã€‚\n\nã“ã‚Œã¯ã‚·ã‚¹ãƒ†ãƒ è¨­å®šã«å¿œã˜ã¦ãƒ•ã‚¡ã‚¤ãƒ«åãŒæ—¥æœ¬èªã«ãªã£ã¦ã—ã¾ã†ã®ã¨ã€ã‚¹ãƒšãƒ¼ã‚¹ãŒå…¥ã£ã¦ã„ã¦æ‰±ã„ã¥ã‚‰ã„ã®ã§ã€ãªã‚“ã¨ã‹ã—ãŸã„ã§ã™ã€‚\n\n## æ–¹æ³•1 defaultsã§ãƒ•ã‚¡ã‚¤ãƒ«åã‚’å¤‰æ›´ã™ã‚‹\n\n[Macã®defaultsã‚³ãƒãƒ³ãƒ‰](note/Macã®defaultsã‚³ãƒãƒ³ãƒ‰.md) ã‚’ã¤ã‹ã£ã¦ã€åå‰ã®è¦å‰‡ã‚’å¤‰æ›´ã—ã¾ã™\n\nprefixã‚’ `screenshot` ã«ã™ã‚‹\n\n````shell\ndefaults write com.apple.screencapture name \"screenshot\"\n````\n\næ—¥ä»˜ã€æ™‚åˆ»ã‚’å«ã‚ãªã„ã‚ˆã†ã«ã™ã‚‹\n\n````shell\ndefaults write com.apple.screencapture include-date -bool false\n````\n\nãŸã ã“ã‚Œã ã¨ã€`screenshot.png` `screenshot 1.png` ã®ã‚ˆã†ã«2æšç›®ä»¥é™é€£ç•ªãŒã¤ãã‚ˆã†ã«ãªã‚‹ã®ã§ã€æ—¥ä»˜æ™‚åˆ»ã¯ã‚¹ãƒšãƒ¼ã‚¹ãŒå…¥ã‚‰ãªã„å½¢ã§å«ã‚ã‚‹ã‚ˆã†ã«ã—ãŸã„ã§ã™ã€‚\nãã“ã§æ¬¡ã®ã‚ˆã†ã«ã—ã¾ã—ãŸ\n\n## æ–¹æ³•2 Automatorã‚’ä½¿ã£ã¦ä½œæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®åå‰ã‚’å¤‰æ›´ã™ã‚‹\n\n[Automator](note/Automator.md) ã® [Folder Action](https://macosxautomation.com/automator/folder-action/index.html) ã‚’ä½¿ã£ã¦ã€æŒ‡å®šã—ãŸãƒ•ã‚©ãƒ«ãƒ€ã«ä½œæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•ã§ãƒªãƒãƒ¼ãƒ ã—ã¾ã™ã€‚\n\nãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã®ã¾ã¾ã ã¨ã€ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã«ä½œæˆã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã™ã¹ã¦ãŒå½±éŸ¿ã‚’å—ã‘ã‚‹ã®ã§ã€ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã®ä¿å­˜å…ˆã‚’æŒ‡å®šã—ã¾ã™ã€‚\n\n````shell\n# ä¿å­˜å…ˆã¯ä»»æ„ã§ã™\ndefaults write com.apple.screencapture location -string \"~/Pictures/screenshot\"\n````\n\nAutomatorã§æ¬¡ã®ã‚ˆã†ã«ã—ã¦ã€screenshotãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä½œæˆã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚’ `screenshot-yyyyMMddHHmmss.png` ã«ã—ã¾ã™ã€‚\n\n![](note/Pasted-image-20230509115147.png)\n\n![](note/Pasted-image-20230509115129.png)\n\nã“ã‚Œã§ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚’æ’®ã‚‹ã¨ã€è‡ªå‹•ã§ãƒªãƒãƒ¼ãƒ ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["2023/05/09","Mac"]},"/note/Make":{"title":"Make","content":"\nãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’å®Ÿè¡Œå¯èƒ½ã«ã™ã‚‹ãŸã‚ã«ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦ã€å¤–éƒ¨ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãªã©ã‚’ãƒªãƒ³ã‚¯ã—ã¦ä¸€ã¤ã®å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã«ã™ã‚‹ä½œæ¥­ãªã©ã€è¤‡æ•°å€‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’é€£ç¶šã—ã¦å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚\nã“ã†ã—ãŸä½œæ¥­ã‚’ç¹°ã‚Šè¿”ã—è¡Œã†å ´åˆã«ã€æ‰‹ä½œæ¥­ã®å·¥ç¨‹ã‚’ã¸ã‚‰ã™ãŸã‚ã€makeã‚³ãƒãƒ³ãƒ‰ã§ä¸€é€£ã®æ‰‹é †ã‚’æ‰€å®šã®å½¢å¼ã§Makefileã«è¨˜è¿°ã—ã¦ãŠãã¨ã€ã“ã‚Œã«å¾“ã£ã¦ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œãªã©ã‚’é€£ç¶šã—ã¦è‡ªå‹•çš„ã«è¡Œãªã£ã¦ãã‚Œã‚‹\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["CLI"]},"/note/MinIO":{"title":"MinIO","content":"\n{{\u003c card-link \"https://min.io\" \u003e}}\n\nS3ã¨äº’æ›æ€§ã®ã‚ã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚µãƒ¼ãƒãƒ¼ã€‚\né–‹ç™ºæ™‚ã«ãƒ­ãƒ¼ã‚«ãƒ«ã§MinIOã‚’ç«‹ã¦ã¦æ¤œè¨¼ã™ã‚‹ã®ã«åˆ©ç”¨ã§ãã‚‹ã€‚\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["2023/07/04"]},"/note/MinIO%E3%82%92%E3%83%AD%E3%83%BC%E3%82%AB%E3%83%AB%E3%81%AEkubernetes%E3%81%A7%E5%8B%95%E3%81%8B%E3%81%99":{"title":"MinIOã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã®kubernetesã§å‹•ã‹ã™","content":"\n[MinIO](note/MinIO.md) ã‚’ [Kubernetes](note/Kubernetes.md) ã§å‹•ã‹ã—ãŸã„ã€‚\n\nç’°å¢ƒã¯ã€ [Rancher Desktop](note/Rancher%20Desktop.md) ã®Kubernetes\n\n## manifestã‚’applyã™ã‚‹\n\nhttps://min.io/docs/minio/kubernetes/upstream/index.html\n\n````shell\ncurl https://raw.githubusercontent.com/minio/docs/master/source/extra/examples/minio-dev.yaml -O\n````\n\n* `spec.volumes[0].hostPath.path` ã‚’ä»»æ„ã®ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ‘ã‚¹ã«ã™ã‚‹\n* `spec.nodeSelector` ã‚’ `kubernetes.io/os: linux` ã«ã™ã‚‹\n\n````shell\nkubectl apply -f minio-dev.yaml\n````\n\nãƒ­ãƒ¼ã‚«ãƒ«ã‹ã‚‰ç–é€šã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹\n\n````shell\nkubectl port-forward pod/minio 9000 9090 -n minio-dev\n````\n\n=\u003e localhost:9000 ã§ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãŒé–‹ã„ãŸã€‚\n\nã§ããŸã‘ã©podé–“é€šä¿¡ã®ãŸã‚ã«serviceä½œã£ãŸã‚Šã™ã‚‹ã®ãŒé¢å€’ãã†ãªã®ã§ã€helmã«ã—ã¦ã¿ã‚‹\n\n## helmã§ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹\n\nMinIOã®ã‚«ã‚¹ã‚¿ãƒ ãƒªã‚½ãƒ¼ã‚¹ã‚’ç®¡ç†ã™ã‚‹Operatorã¨ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ ¼ç´ã™ã‚‹Tenantã«åˆ†ã‹ã‚Œã¦ã„ã‚‹ã®ã§ã€ã¾ãšOperatorã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚\n\n{{\u003c card-link \"https://github.com/minio/operator/blob/master/helm/operator/README.md\" \u003e}}\n\næ¬¡ã«tenantã‚’å…¥ã‚Œã‚‹ã€‚\n\n{{\u003c card-link \"https://github.com/minio/operator/blob/master/helm/tenant/README.md\" \u003e}}\n\nãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®storageClassNameãŒãƒ­ãƒ¼ã‚«ãƒ«ã§ã¯å­˜åœ¨ã—ãªã‹ã£ãŸã®ã§ã€values.yamlã‚’æ›¸ã„ã¦ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã™ã‚‹ã€‚\n\nvalues_tenant.yaml\n\n````yaml\ntenant:\n  pools:\n    ## Servers specifies the number of MinIO Tenant Pods / Servers in this pool.\n    ## For standalone mode, supply 1. For distributed mode, supply 4 or more.\n    ## Note that the operator does not support upgrading from standalone to distributed mode.\n    - servers: 4\n      ## custom name for the pool\n      name: pool-0\n      ## volumesPerServer specifies the number of volumes attached per MinIO Tenant Pod / Server.\n      volumesPerServer: 4\n      ## size specifies the capacity per volume\n      size: 10Gi\n      ## storageClass specifies the storage class name to be used for this pool\n      storageClassName: local-path\n      ## Used to specify annotations for pods\n      annotations: { }\n      ## Used to specify labels for pods\n      labels: { }\n      ## Used to specify a toleration for a pod\n      tolerations: [ ]\n      ## nodeSelector parameters for MinIO Pods. It specifies a map of key-value pairs. For the pod to be\n      ## eligible to run on a node, the node must have each of the\n      ## indicated key-value pairs as labels.\n      ## Read more here: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/\n      nodeSelector: { }\n      ## Affinity settings for MinIO pods. Read more about affinity\n      ## here: https://kubernetes.io/docs/concepts/configuration/assign-pod-node/#affinity-and-anti-affinity.\n      affinity: { }\n      ## Configure resource requests and limits for MinIO containers\n      resources: { }\n      ## Configure security context\n      securityContext:\n        runAsUser: 1000\n        runAsGroup: 1000\n        fsGroup: 1000\n        runAsNonRoot: true\n      ## Configure container security context\n      containerSecurityContext:\n        runAsUser: 1000\n        runAsGroup: 1000\n        runAsNonRoot: true\n      ## Configure topology constraints\n      topologySpreadConstraints: [ ]\n      ## Configure Runtime Class\n      # runtimeClassName: \"\"\n````\n\n````shell\nhelm install --namespace tenant-ns -f values_tenant.yaml --create-namespace tenant minio/tenant\n\nkubectl --namespace tenant-ns port-forward svc/myminio-console 19443:9443\n````\n\n=\u003e https://localhost:19443 ã§ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãŒé–‹ã\nusername:passwordã¯ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ `minio:minio123`\n\n## aws cliã§s3ã«æ¥ç¶šã™ã‚‹\n\naws-cliã®Podã‚’ä½œæˆã—ã¦ã€ä¸­ã‹ã‚‰minioã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã¿ã‚‹ã€‚\nminioã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯ã€`kubectl logs` ã§tenantã®podã®ãƒ­ã‚°ã«å‡ºåŠ›ã•ã‚Œã¦ã„ã‚‹ã®ã‚’ç¢ºèªã™ã‚‹ã€‚\n`myminio-pool-0-2 minio {\"level\":\"INFO\",\"errKind\":\"\",\"time\":\"2023-07-04T03:09:43.126781416Z\",\"message\":\"S3-API: https://minio.tenant-ns.svc.cluster.local \"}`\n\n````shell\nkubectl run awscli -it --rm --image amazon/aws-cli --env=AWS_ACCESS_KEY_ID=minio --env=AWS_SECRET_ACCESS_KEY=minio123 --command -- sh\n\nsh-4.2$ aws --endpoint-url https://minio.tenant-ns.svc.cluster.local --no-verify-ssl s3 ls\nurllib3/connectionpool.py:1056: InsecureRequestWarning: Unverified HTTPS request is being made to host 'minio.tenant-ns.svc.cluster.local'. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/1.26.x/advanced-usage.html#ssl-warnings\n\nsh-4.2$ aws --endpoint-url https://minio.tenant-ns.svc.cluster.local --no-verify-ssl s3 mb s3://my-bucket\nurllib3/connectionpool.py:1056: InsecureRequestWarning: Unverified HTTPS request is being made to host 'minio.tenant-ns.svc.cluster.local'. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/1.26.x/advanced-usage.html#ssl-warnings\nmake_bucket: my-bucket\n\nsh-4.2$ aws --endpoint-url https://minio.tenant-ns.svc.cluster.local --no-verify-ssl s3 ls\nurllib3/connectionpool.py:1056: InsecureRequestWarning: Unverified HTTPS request is being made to host 'minio.tenant-ns.svc.cluster.local'. Adding certificate verification is strongly advised. See: https://urllib3.readthedocs.io/en/1.26.x/advanced-usage.html#ssl-warnings\n2023-07-04 03:54:53 my-bucket\n````\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["2023/07/04","Kubernetes"]},"/note/Mistel-BAROCCO-md650l":{"title":"Mistel BAROCCO md650l","content":"\n2019å¹´3æœˆã«è²·ã£ãŸ\nå·¦å³åˆ†é›¢å‹ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰\nãƒ­ãƒ¼ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã§Cherry MX\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["2023/01/05","keyboard"]},"/note/NatureRemo":{"title":"NatureRemo","content":"\n# 2020-11-18 Nature Remo Go å‹‰å¼·ä¼š\n\n## ã‚·ãƒ³ã‚°ãƒ«ãƒã‚¤ãƒŠãƒªã«ã“ã ã‚ã‚‹ (@fujiwara)\n\n* Go ã§ Lambda\n  * ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã®å¯¿å‘½ã«å½±éŸ¿ã•ã‚Œã«ãã„\n  * èµ·å‹•ãŒæ—©ã„\n* Lambdaã§ã‚‚CLIã§ã‚‚å‹•ãä¸€å€‹ã®ãƒã‚¤ãƒŠãƒªã‚’ç½®ã„ã¦ãŠããŸã„\n* `AWS_EXECUTION_ENV` ã®ç’°å¢ƒå¤‰æ•°ãŒã‚ã‚‹ã‹ã©ã†ã‹ã§åˆ¤åˆ¥\n* Lambdaã§ã¯èµ·å‹•æ™‚ã«ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å¼•æ•°ã‚’æŒ‡å®šã§ããªã„ã®ã§flagã¯ç’°å¢ƒå¤‰æ•°ã§ã‚‚æŒ‡å®šã§ãã‚‹ã‚ˆã†ã«ã—ã¦ãŠã\n* Lambdaã§ã‚‚ãã†ã§ãªã„ç’°å¢ƒã§ã‚‚å‹•ãã‚ˆã†ã«ã—ã¦ãŠãã¨EC2ã¸ã®ç§»æ¤æ€§ãŒé«˜ã¾ã‚‹\n\n## fluctäº‹ä¾‹ (@suzu_v)\n\n* ã‚¹ãƒ«ãƒ¼ãƒ—ãƒƒãƒˆ\n* ã¡ã‚‡ã£ã¨ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ†ã‚¹ãƒˆã‚’ã—ã‚„ã™ãã—ãŸã„ã¨ãã«GoãŒã¡ã‚‡ã†ã©ã„ã„\n\n## Nature Remo (@songmu)\n\n* github.com/Songmu/gotesplit\n* CIã®ãƒ†ã‚¹ãƒˆä¸¦åˆ—å®Ÿè¡Œã‚’ã‹ã‚“ãŸã‚“ã«å®Ÿç¾\n\n## Goã®ãƒ¡ãƒªãƒƒãƒˆãƒ»ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ\n\n* HTMLã‚’è¿”ã™ã®ã¯å‘ã„ã¦ãªã„\n* JSONã€HTTPã€ãƒ­ã‚°å‡ºåŠ›ã¨ã‹ã¯ã‚€ã„ã¦ã‚‹ã€HTMLä»¥å¤–ã ã£ãŸã‚‰ã ã„ãŸã„åˆã£ã¦ã‚‹\n* ãƒã‚¤ãƒŠãƒªãŒå¿…è¦ãªã®ã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆçš„ä½¿ã„æ–¹ã¯ã—ã¥ã‚‰ã„\n* goroutineä½¿ã£ã¦ã‚‚ä¸¦è¡Œå‡¦ç†ã¯å¤§å¤‰\n* éåŒæœŸå‡¦ç†ã‚„ã‚Šã‚„ã™ã„ã—ã‚„ã‚ŠãŸããªã£ã¡ã‚ƒã†ã‘ã©ã€ãƒ¬ãƒ“ãƒ¥ãƒ¼å¤§å¤‰ãªã®ã§è½ã¨ã—æ‰€ã¨ã‹å±€æ‰€çš„ã«ã¤ã‹ã†ã¨ã‹ãŒå¤§äº‹\n* code generationã—ãŸã‚Štypeã§switchã—ãŸã‚Šæ³¥è‡­ã„éƒ¨åˆ†ã¯å¤šããªã£ã¡ã‚ƒã†\n\n## é–‹ç™ºå‘¨ã‚Š\n\n* vim,vscode,ideaãªã‚“ã§ã‚‚\n* gopls,gofmtã‚ã‚‹ã‹ã‚‰ã©ã†ã«ã§ã‚‚ãªã‚‹\n\n## ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒ»ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£\n\n* ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç²’åº¦\n  * åå‰ãŒã—ã£ãã‚Šãã‚‹ã‹ãã‚‰ã„\n  * ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã—ã¦ç‹¬ç«‹ã§ããã†ã‹ãã‚‰ã„ã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åˆ‡ã£ã¦ã‚‹\n  * loggerã¯ãƒ­ã‚°ç”¨ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ç‹¬ç«‹ã—ãŸã»ã†ãŒã„ã„ãªã¨ã‹\n* ã‚ã‚“ã¾ã‚Šã—ã£ã‹ã‚Šã‚ã‘ã¦ãªã„\n* æœ€åˆã‹ã‚‰ã‚ã‘ã‚‹ã¨ã‚ã‘ã™ããŸã£ã¦ãªã£ã¡ã‚ƒã†ã“ã¨ã‚‚ã‚ã‚‹ã€æœ€åˆã‹ã‚‰åˆ†ã‘ã¦ãŠã„ã¦ãã‚Œä»¥ä¸Šã‚ã‘ãªã„\n* package.run ã‚’æœ¬ä½“ã¨ã—ã¦ã€main.mainã‹ã‚‰ã¯ãã‚Œã ã‘å‘¼ã¶ã¿ãŸã„ã«ã—ã¦ã‚‹\n\n## ãƒãƒ¼ã‚¸ãƒ§ãƒ³\n\n* éšæ™‚ä¸Šã’ã¡ã‚ƒã†\n* CIé€šã‚Œã°ã„ã„ã§ã—ã‚‡ã€ä¸Šã’ã¦å£Šã‚Œã‚‹ã“ã¨ã¯ã»ã¨ã‚“ã©ãªã„\n* go mod å…¥ã£ã¦ç§»ã•ãªãã‚ƒãªãƒ¼ã¿ãŸã„ãªã®ã¯ã‚ã£ã¦ã‚‚\n* ç›²ç›®çš„ã«ä¸Šã’ã‚‹ã€å¤§ãã„å¤‰æ›´ã ã£ãŸã‚‰è©±é¡Œã«ãªã‚‹ã€release partyã¿ãŸã„ã®ã§ã‚ã‹ã‚‹\n\n## ä»Šå¾ŒGoã«æœŸå¾…ã™ã‚‹ã“ã¨\n\n* ã‘ã£ã“ã†ãƒãƒ©ãƒ³ã‚¹ãŒã„ã„ã®ã§æ–°æ©Ÿèƒ½ã¯ãã‚“ãªã«\n* embedã¯ã„ã„\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["Go","meetup"]},"/note/Neovim":{"title":"Neovim","content":"\n[Vim](note/Vim.md)  ã®ãƒ•ã‚©ãƒ¼ã‚¯ã§ã‚ã‚Šã€ãƒ¢ãƒ€ãƒ³ãªé–‹ç™ºç’°å¢ƒã«é©ã—ãŸå¤šãã®æ–°æ©Ÿèƒ½ã‚’æä¾›ã—ã¦ã„ã‚‹ã€‚\nNeovimã¯Vimã‚ˆã‚Šã‚‚æŸ”è»Ÿæ€§ã‚„æ‹¡å¼µæ€§ãŒé«˜ã„ã€‚\nã¾ãŸã€Neovimã¯ãƒãƒ«ãƒãƒ—ãƒ­ã‚»ã‚¹ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚’æ¡ç”¨ã—ã¦ãŠã‚Šã€Vimã‚ˆã‚Šã‚‚é«˜é€Ÿã§ã€ã‚ˆã‚Šå¤§è¦æ¨¡ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«å¯¾å¿œã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["Neovim"]},"/note/Neovim%E3%81%A8VSCode%E3%81%A7%E5%85%B1%E5%AD%98%E3%81%99%E3%82%8B":{"title":"Neovimã¨VSCodeã§å…±å­˜ã™ã‚‹","content":"\n\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["Draft","Neovim","vscode"]},"/note/Neovim%E3%81%AE%E8%A8%AD%E5%AE%9A%E3%82%92lua%E3%81%AB%E7%A7%BB%E8%A1%8C%E3%81%99%E3%82%8B":{"title":"Neovimã®è¨­å®šã‚’luaã«ç§»è¡Œã™ã‚‹","content":"\n[Neovim](note/Neovim.md) 0.5ã‹ã‚‰ã¯ `init.lua` ã«luaè¨€èªã§æ›¸ãã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã€‚\næœ€è¿‘ã®pluginã®èª¬æ˜æ–‡ã‚’è¦‹ã‚‹ã¨luaã§æ›¸ã‹ã‚Œã¦ã„ã‚‹ã“ã¨ãŒå¢—ãˆã¦ããŸã€‚\n\nplugin managerã¯ [packer.nvim](https://github.com/wbthomason/packer.nvim) ãŒãƒ¡ã‚¸ãƒ£ãƒ¼ã‚‰ã—ã„\n\n[wezterm](note/wezterm.md) ã®è¨­å®šã‚‚luaã§æ›¸ã„ã¦ã„ã‚‹ã—ã€ãªã‚“ã¨ãªãä»Šé¢¨ãªæ°—ãŒã™ã‚‹ã®ã§luaã«ç§»è¡Œã—ã¦ã¿ã‚ˆã†ã¨ãŠã‚‚ã†\n\n* \u003chttps://github.com/willelz/nvim-lua-guide-ja/blob/master/README.ja.md\u003e\n* [Neovim ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ï¼ˆã»ã¼ï¼‰å…¨ã¦ Lua ã«ç§»è¡Œã—ãŸ](https://zenn.dev/acro5piano/articles/c764669236eb0f)\n\n## æ¦‚è¦\n\n[Neovimã¨Lua](https://zenn.dev/hituzi_no_sippo/articles/871c06cdbc45b53181e3)\n\n[Vimconf.live: Why is Lua a good fit for Neovim - YouTube](https://www.youtube.com/watch?v=IP3J56sKtn0)\n\n* ç°¡å˜  \n  Luaã®å­¦ç¿’ã‚³ã‚¹ãƒˆã¯ä½ãã€èª°ã§ã‚‚ã™ãæ›¸ã‘ã¾ã™ã€‚\n* Luaã®ã‚µã‚¤ã‚ºãŒå°ã•ã„  \n  ãƒã‚¤ãƒŠãƒªã‚µã‚¤ã‚ºï¼ˆlinuxç”¨ï¼‰ã¯200KBä»¥ä¸‹ã§ã™ã€‚\n* ç§»æ¤æ€§  \n  ISO Cã§å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€OS Kernelå†…ã§ã‚‚Luaã¯å®Ÿè¡Œã§ãã¾ã™ã€‚\n* åŸ‹ã‚è¾¼ã¿ã«é©ã—ã¦ã„ã‚‹ã€‚  \n  Vim scriptã‹ã‚‰Luaã®é–¢æ•°ã‚’å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã¾ã™ã€‚ãã®é€†ã‚‚ã§ãã¾ã™ã€‚\n* Vim scriptã‚ˆã‚Šã‚¹ãƒ”ãƒ¼ãƒ‰ãŒæ—©ã„  \n  Vim scriptãªã‚‰ç´„5.5ç§’ã‹ã‹ã‚‹å‡¦ç†ã‚’Lua(LuaJIT)ã¯ç´„0.003ç§’ã§å‡¦ç†ã—ã¾ã™ã€‚\n\nVim scriptã‚ˆã‚Šã¯æ›¸ãã‚„ã™ã„ã£ã½ã„ã€‚Vim scriptæ›¸ã„ãŸã“ã¨ãªã„ã‘ã©\n\n* è¤‡æ•°è¡Œæ–‡å­—åˆ—\n\n````lua\n[[\n  augroup packer_user_config\n    autocmd!\n    autocmd BufWritePost plugins.lua source \u003cafile\u003e | PackerSync\n  augroup end\n]]\n````\n\nã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚„ã‚­ãƒ¼ãƒãƒƒãƒ—ã‚’é–¢æ•°ã§æ›¸ã‘ã‚‹\n\n## \u003chttps://github.com/nanotee/nvim-lua-guide\u003e ã§å‹‰å¼·ã™ã‚‹\n\n* `require('modules/mymodule')` ã§ã€`./modules/mymodule.lua` ã‚’ãƒ­ãƒ¼ãƒ‰ã§ãã‚‹\n* luado\n\n````vim\n:luado return 'hello world'\n````\n\nã¨ã™ã‚‹ã¨ç¾åœ¨ã®bufferã«ãƒ†ã‚­ã‚¹ãƒˆãŒæŒ¿å…¥ã•ã‚Œã‚‹\n\n````vim\n:luado if linenr % 2 == 0 then return line:upper() end\n````\n\nã§ã€å¶æ•°è¡ŒãŒå¤§æ–‡å­—ã«ãªã‚‹\n\n* `:luafile %` ã§ã‚«ãƒ¬ãƒ³ãƒˆãƒãƒƒãƒ•ã‚¡ã‚’luaã§å®Ÿè¡Œã™ã‚‹\n\n### vimåå‰ç©ºé–“\n\n* Luaã‹ã‚‰Neovimã®APIã‚’ä½¿ã†ãŸã‚ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦ã€vimã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°ã‚’å…¬é–‹ã—ã¦ã„ã‚‹\n  * `vim.inspect`: Luaã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’äººé–“ãŒèª­ã¿ã‚„ã™ã„æ–‡å­—åˆ—ã«å¤‰æ›ã™ã‚‹(ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’èª¿ã¹ã‚‹ã®ã«ä¾¿åˆ©ã§ã™ã€‚)\n  * `vim.regex`: Luaã‹ã‚‰Vimã®æ­£è¦è¡¨ç¾ã‚’ä½¿ã†\n* `vim.nvim_exec('%s/\\\\Vfoo/bar/g')` ã®ã‚ˆã†ã«ã—ã¦ã€vim scriptã‚’å®Ÿè¡Œã§ãã‚‹\n\n### vim option\n\n* `vim.api.nvim_set_option()`, `vim.api.nvim_get_option()` ãªã©ã§èª­ã¿æ›¸ãã§ãã‚‹\n* `vim.opt.{option}`:Â `:set`ã®ã‚ˆã†ã«å‹•ä½œã—ã¾ã™\n* `vim.opt_global.{option}`:Â `:setglobal`ã®ã‚ˆã†ã«å‹•ä½œã—ã¾ã™\n* `vim.opt_local.{option}`:Â `:setlocal`ã®ã‚ˆã†ã«å‹•ä½œã—ã¾ã™\n\n### vim variable\n\n* Global variables (`g:`):\n  * [`vim.api.nvim_set_var()`](https://neovim.io/doc/user/api.html#nvim_set_var())\n  * [`vim.api.nvim_get_var()`](https://neovim.io/doc/user/api.html#nvim_get_var())\n  * [`vim.api.nvim_del_var()`](https://neovim.io/doc/user/api.html#nvim_del_var())\n\nLocal variables (l:), script variables (s:) and function arguments (a:) ã¯Vim scriptç‰¹æœ‰ã®ã‚¹ã‚³ãƒ¼ãƒ—ã§ã€Luaã¯ç‹¬è‡ªã®ã‚¹ã‚³ãƒ¼ãƒ—ã‚’æŒã£ã¦ã„ã‚‹ã®ã§ä½¿ã‚ãªã„\n\n* `vim.g`: global variables\n* `vim.b`: buffer variables\n* `vim.w`: window variables\n* `vim.t`: tabpage variables\n* `vim.v`: predefined Vim variables\n* `vim.env`: environment varia\n\n### call Vimscript functions\n\n`vim.fn.{funcion}()` ã§Vimscript functionã‚’å‘¼ã¶\n\nä¾‹: `print(vim.fn.printf('Hello from %s', 'Lua'))`\n\n### keymap\n\n* ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒãƒƒãƒ”ãƒ³ã‚°:\n  * [`vim.api.nvim_set_keymap()`](https://neovim.io/doc/user/api.html#nvim_set_keymap())\n  * [`vim.api.nvim_get_keymap()`](https://neovim.io/doc/user/api.html#nvim_get_keymap())\n  * [`vim.api.nvim_del_keymap()`](https://neovim.io/doc/user/api.html#nvim_del_keymap())\n\nä¾‹: `vim.api.nvim_set_keymap('n', '\u003cLeader\u003e\u003cSpace\u003e', ':set hlsearch!\u003cCR\u003e', { noremap = true, silent = true })`\n\nNeovim provides two functions to set/del mappings:\n\n* `vim.keymap.set()`\n* `vim.keymap.del()`\n\n````lua\nvim.keymap.set('n', '\u003cLeader\u003eex1', '\u003cCmd\u003elua vim.notify(\"Example 1\")\u003cCR\u003e')\nvim.keymap.set({'n', 'c'}, '\u003cLeader\u003eex2', '\u003cCmd\u003elua vim.notify(\"Example 2\")\u003cCR\u003e')\n````\n\n### user commands\n\n* Global user commands:\n  * [`vim.api.nvim_create_user_command()`](https://neovim.io/doc/user/api.html#nvim_create_user_command())\n  * [`vim.api.nvim_del_user_command()`](https://neovim.io/doc/user/api.html#nvim_del_user_command())\n\n## å‚è€ƒã«ã—ãŸã‚‚ã®\n\n* [GitHub - NvChad/NvChad: An attempt to make neovim cli functional like an IDE while being very beautiful, blazing fast startuptime ~ 14ms to 67ms](https://github.com/NvChad/NvChad)\n* [GitHub - LunarVim/nvim-basic-ide: This is my attempt at a basic stable starting point for a Neovim IDE.](https://github.com/LunarVim/nvim-basic-ide)\n  * \n     \u003e \n     \u003e A Basic Stable IDE config for Neovim\n  \n  * Neovimåˆå¿ƒè€…ãŒIDEã£ã½ã„å‹•ãã‚’ã•ã›ã‚‹ã‚ˆã†ã«ä¾¿åˆ©ãªãƒ†ãƒ³ãƒ—ãƒ¬\n  * \u003chttps://github.com/hisasann/neovim\u003e\n    * ã“ã®äººã®è¨­å®šãŒä¸Šã‚’ãƒ™ãƒ¼ã‚¹ã«ã‚ã‹ã‚Šã‚„ã™ããªã£ã¦ãŸã®ã§çœŸä¼¼ã•ã›ã¦ã‚‚ã‚‰ã£ãŸ\n\n## å¤‰æ›´ç‚¹\n\n### functionã®æ›¸ãæ–¹\n\n````lua\nfunction ToggleQuickFix()\n  if vim.fn.empty(vim.fn.filter(vim.fn.getwininfo(), \"v:val.quickfix\")) == 1 then\n    vim.cmd([[copen]])\n  else\n    vim.cmd([[cclose]])\n  end\nend\n\n-- :ToggleQuickFix ã§ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹\nvim.cmd([[command! -nargs=0 -bar ToggleQuickFix lua require('utils').ToggleQuickFix()]])\n\n-- keymapã«è¨­å®šã™ã‚‹\nvim.keymap.set(\"n\", \"\u003cLeader\u003eq\", ToggleQuickFix)\n````\n\n### plugin\n\nluaã§æ›¸ã‹ã‚ŒãŸpluginã«ç§»è¡Œã—ãŸ\n\n* [GitHub - wbthomason/packer.nvim: A use-package inspired plugin manager for Neovim. Uses native packages, supports Luarocks dependencies, written in Lua, allows for expressive config](https://github.com/wbthomason/packer.nvim)\n  * Neovimã®plugin managerã®ãƒ‡ãƒ•ã‚¡ã‚¯ãƒˆ\n* [GitHub - phaazon/hop.nvim: Neovim motions on speed!](https://github.com/phaazon/hop.nvim)\n  * easymotionã‚’luaã§æ›¸ãç›´ã—ãŸã‚‚ã®\n* [GitHub - kylechui/nvim-surround: Add/change/delete surrounding delimiter pairs with ease. Written with in Lua.](https://github.com/kylechui/nvim-surround)\n  * surroundã¨ã‹sandwichã®ã‚ˆã†ãªã‚‚ã®\n* [GitHub - kyazdani42/nvim-tree.lua: A file explorer tree for neovim written in lua](https://github.com/kyazdani42/nvim-tree.lua)\n  * file explorer\n* [GitHub - nvim-lualine/lualine.nvim: A blazing fast and easy to configure neovim statusline plugin written in pure lua.](https://github.com/nvim-lualine/lualine.nvim)\n  * statuslineã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º\n* [GitHub - lukas-reineke/indent-blankline.nvim: Indent guides for Neovim](https://github.com/lukas-reineke/indent-blankline.nvim)\n  * indentline\n* [GitHub - RRethy/vim-illuminate: illuminate.vim - Vim plugin for automatically highlighting other uses of the word under the cursor. Integrates with Neovim's LSP client for intelligent highlighting.](https://github.com/RRethy/vim-illuminate)\n  * highlightã‚’ã¤ã‘ã‚‹\n\n### colorscheme\n\n* [GitHub - EdenEast/nightfox.nvim: ğŸ¦ŠA highly customizable theme for vim and neovim with support for lsp, treesitter and a variety of plugins.](https://github.com/EdenEast/nightfox.nvim)\n* [GitHub - ellisonleao/gruvbox.nvim: Lua port of the most famous vim colorscheme](https://github.com/ellisonleao/gruvbox.nvim)\n\n### LSP\n\n[Neovim+LSPã‚’ãªã‚‹ã¹ãç°¡å˜ãªè¨­å®šã§æ§‹ç¯‰ã™ã‚‹](https://zenn.dev/botamotch/articles/21073d78bc68bf)\n\n* [neovim/nvim-lspconfig](https://github.com/neovim/nvim-lspconfig)ï¼ˆLSPè¨­å®šï¼‰\n* [williamboman/mason.nvim](https://github.com/williamboman/mason.nvim)ï¼ˆLSPã‚µãƒ¼ãƒãƒ¼ç®¡ç†ï¼‰\n  * [williamboman/mason-lspconfig.nvim](https://github.com/williamboman/mason-lspconfig.nvim)\n* [hrsh7th/nvim-cmp](https://github.com/hrsh7th/nvim-cmp)ï¼ˆè£œå®Œï¼‰\n  * [hrsh7th/cmp-nvim-lsp](https://github.com/hrsh7th/cmp-nvim-lsp)\n\n## çµæœ\n\n* èµ·å‹•ãŒ200ms -\u003e 100msæœªæº€ã«ãªã£ãŸ\n* colorschemeã‚’nightfoxã«ã—ãŸ\n* nvim-cmpã‚„nvim-lspã«å¤‰ãˆã¦ã€è£œå®Œã®è¦‹ãŸç›®ãŒã‹ã£ã“ã‚ˆããªã£ãŸ\n\n![Pasted-image-20220813171640](note/Pasted-image-20220813171640.png)\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["Neovim"]},"/note/NerdFonts%E3%81%A8%E3%81%AF":{"title":"NerdFontsã¨ã¯","content":"\n[nerd-fonts/readme_ja.md at master Â· ryanoasis/nerd-fonts](https://github.com/ryanoasis/nerd-fonts/blob/master/readme_ja.md#:~:text=Nerd%20Fonts%20%E3%81%AF%E3%80%81%E3%81%9F%E3%81%8F%E3%81%95%E3%82%93%E3%81%AE,%E3%82%92%E7%9B%AE%E7%9A%84%E3%81%A8%E3%81%97%E3%81%A6%E3%81%84%E3%81%BE%E3%81%99%E3%80%82)\n\n \u003e \n \u003e **Nerd Fonts** ã¯ã€ãŸãã•ã‚“ã®ã‚°ãƒªãƒ• (ã‚¢ã‚¤ã‚³ãƒ³) ã‚’é–‹ç™ºè€…å‘ã‘ã®ãƒ•ã‚©ãƒ³ãƒˆã«è¿½åŠ ã™ã‚‹ãŸã‚ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚ã¨ã‚Šã‚ã‘ã€è‘—åãªã€Œã‚¢ã‚¤ã‚³ãƒ³ãƒ•ã‚©ãƒ³ãƒˆã€ã‹ã‚‰ãŸãã•ã‚“ã®ã‚°ãƒªãƒ•ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚\n \u003e ä¾‹ãˆã°ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ•ã‚©ãƒ³ãƒˆã§ã™: [Font Awesome â¶](https://github.com/FortAwesome/Font-Awesome), [Devicons â¶](https://vorillaz.github.io/devicons/), [Octicons â¶](https://github.com/primer/octicons), [ãã®ä»–](https://github.com/ryanoasis/nerd-fonts/blob/master/readme_ja.md#%E3%82%B0%E3%83%AA%E3%83%95%E3%82%BB%E3%83%83%E3%83%88).\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["font"]},"/note/Netlify":{"title":"Netlify","content":"\nNetlifyã¯ã€é™çš„ã‚µã‚¤ãƒˆã‚’ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°ã™ã‚‹ã“ã¨ãŒã§ãã‚‹Webã‚µãƒ¼ãƒ“ã‚¹ã€‚\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["frontend","blog"]},"/note/Netlify%E3%81%A8GitHub%E3%81%A7%E9%9D%99%E7%9A%84%E3%82%B5%E3%82%A4%E3%83%88%E3%82%92%E5%85%AC%E9%96%8B%E3%81%99%E3%82%8B":{"title":"Netlifyã¨GitHubã§é™çš„ã‚µã‚¤ãƒˆã‚’å…¬é–‹ã™ã‚‹","content":"\n## Netlifyã®åˆæœŸè¨­å®šã¨ãƒ‡ãƒ—ãƒ­ã‚¤\n\n[Netlify](note/Netlify.md) ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆã€ãƒ­ã‚°ã‚¤ãƒ³(ç‰¹ã«é›£ã—ã„æ‰‹é †ã¯ãªã„ã®ã§å‰²æ„›)\n\n### GitHubã¨ã®é€£æº\n\nGitHubã¨é€£æºã™ã‚‹å ´åˆã€Netlifyã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè¨­å®šã§GitHubã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨é€£æºã—ã¦ãŠã\n\n1. \u003chttps://app.netlify.com/\u003e ã‹ã‚‰ `New site from Git` ã‚’ã‚¯ãƒªãƒƒã‚¯\n1. `Continuous Deployment` ã§ GitHubã‚’é¸æŠ\n1. å…¬é–‹å¯¾è±¡ãƒªãƒã‚¸ãƒˆãƒªã‚’é¸æŠ\n1. å¯¾è±¡ãƒ–ãƒ©ãƒ³ãƒã€ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã«å®Ÿè¡Œã™ã‚‹buildã‚³ãƒãƒ³ãƒ‰ã€å…¬é–‹å¯¾è±¡ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’è¨­å®š\n1. `Deploy Site` ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚Œã‚‹\n\n### ã‚µã‚¤ãƒˆåå¤‰æ›´\n\nSite Settings \u003e General \u003e Change site name ã§å¤‰æ›´\n\n### ã‚µã‚¤ãƒˆæ›´æ–°\n\nè¨­å®šã—ãŸãƒ–ãƒ©ãƒ³ãƒã«pushã™ã‚‹ã¨è‡ªå‹•ã§æ›´æ–°ã•ã‚Œã‚‹\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["blog","frontend"]},"/note/Node.js-Docker-build%E3%81%AE%E3%83%99%E3%82%B9%E3%83%88%E3%83%97%E3%83%A9%E3%82%AF%E3%83%86%E3%82%A3%E3%82%B9":{"title":"Node.js Docker buildã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹","content":"\n\\#Nodejs #Docker \n\n[Node.jsã®Dockerfileä½œæˆã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹](https://zenn.dev/kouchanne/articles/6485193823ecec5735d4)\n[Dockerã§Node.jsã‚’å‹•ã‹ã™ã¨ãã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹](https://blog.shinonome.io/nodejs-docker/)\n\n* ãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰\n* `npm ci --production` ã‚’ä½¿ã†\n* [distroless/nodejs](https://github.com/GoogleContainerTools/distroless/blob/main/nodejs/README.md) ã‚’ä½¿ã†\n* `tini` ã‚’ä½¿ã„ã€`npm` ã§ã¯ãªã `node` ã‚³ãƒãƒ³ãƒ‰ã§èµ·å‹•ã—ã¦SIGTERMã®ã‚·ã‚°ãƒŠãƒ«ãŒä¼æ’­ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹\n* USERã‚’rootä»¥å¤–ã«ã™ã‚‹\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":[]},"/note/Node.js-npm-install%E3%82%92%E6%97%A9%E3%81%8F%E3%81%97%E3%81%9F%E3%81%84":{"title":"Node.js npm installã‚’æ—©ãã—ãŸã„","content":"\n\\#Nodejs #Docker\n\n## ä¾å­˜é–¢ä¿‚è§£æ±ºã‚’æ—©ãã—ãŸã„\n\n`npm ci` ã‚’ä½¿ã†\n\n[CI/CDã§npm ciã™ã‚‹éš›ã¯ ~/.npm ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã‚ˆã† | DevelopersIO](https://dev.classmethod.jp/articles/cicd-npm-ci-cache/)\n[npm ciã‚’ä½¿ãŠã† ã‚ã‚‹ã„ã¯ã‚ˆã‚Šé€Ÿã - Qiita](https://qiita.com/mstssk/items/8759c71f328cab802670)\n\n* `package-lock.json` ã®ã¿ã‚’è¦‹ã¦ä¾å­˜é–¢ä¿‚è§£æ±ºã™ã‚‹(`npm install` ã¯ `package.json` ã‚‚è¦‹ã‚‹)\n* `npm ci` ã§ã¯ `node_modules` ã¯å®Ÿè¡Œã®éƒ½åº¦æ´—ã„æ›¿ãˆã•ã‚Œã‚‹\n\næ›´ã« `npm ci --production` ã¨ã™ã‚‹ã¨ `devDependency` ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒè¡Œã‚ã‚Œãªããªã‚‹ã€‚\n`--production` ã‚„ `--only=production` ã¯npm v8ã§ã¯deprecatedã§ã€ `--omit=dev` ã‚’ä½¿ã†ã€‚\n\n## ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¦ãƒ“ãƒ«ãƒ‰ã‚’æ—©ãã—ãŸã„\n\n`npm ci` ã‚’ä½¿ã†ã¨ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ `~/.npm` ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒä½œã‚‰ã‚Œã‚‹ã€‚\nCIã‚µãƒ¼ãƒãƒ¼ä¸Šãªã©ã§ `~/.npm` ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„å ´åˆã¯cacheã®pathã‚’å¤‰æ›´ã™ã‚‹ã€‚\n\n* `--cache \u003cpath\u003e` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ã‚‹\n* `npm config set cache \u003cpath\u003e` ã§ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«è¨­å®šã™ã‚‹\n\n[node.js - Is there a way to speedup npm ci using cache? - Stack Overflow](https://stackoverflow.com/questions/55230628/is-there-a-way-to-speedup-npm-ci-using-cache)\n\u003chttps://docs.npmjs.com/cli/v8/commands/npm-cache\u003e\n\nã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’ä½¿ã†ã«ã¯ã€ `--prefer-offline` ã‚’ã¤ã‘ã‚‹(ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ãªã„å ´åˆã¯å–å¾—ã•ã‚Œã‚‹)\n\u003chttps://docs.npmjs.com/cli/v8/using-npm/config#prefer-offline\u003e\n\n## çµè«–\n\nã“ã¡ã‚‰ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨æ¬¡å›ä»¥é™ã‚‚ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒåŠ¹ãã‚ˆã†ã«ãªã‚‹\n\n````shell\nnpm ci --omit=dev --prefer-offline --cache /path/to/npm_cache/\n````\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["Nodejs","Docker"]},"/note/Nodebrew%E3%81%A7Node.js%E3%81%AE%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E3%82%92%E7%AE%A1%E7%90%86%E3%81%99%E3%82%8B":{"title":"Nodebrewã§Node.jsã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç®¡ç†ã™ã‚‹","content":"\n\\#Nodejs\n\nãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–“ã§Node.jsã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒé•ã†å ´åˆã«ã€ã²ã¨ã¤ã®PCå†…ã§è¤‡æ•°ã®Node.jsãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ä½¿ã„åˆ†ã‘ãŸã„ã“ã¨ãŒã‚ã‚‹ã€‚\nãã‚“ãªã¨ãã« [Nodebrew](https://github.com/hokaccha/nodebrew) ã‚„ [nvm](https://github.com/nvm-sh/nvm) ã‚’ä½¿ã†\n\nGitHubã®ã‚¹ã‚¿ãƒ¼æ•°çš„ã«ã¯åœ§å€’çš„ã«nvmãŒäººæ°—ã®ã‚ˆã†ã ãŒä½¿ã£ãŸã“ã¨ãŒãªã„ã®ã§Nodebrewã®ä½¿ã„æ–¹ã‚’ç´¹ä»‹ã™ã‚‹\n\nMacã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †ã¨ãªã‚‹\n\n### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n````shell\n$ brew install nodebrew\n````\n\n### PATHã«è¿½åŠ ã™ã‚‹\n\n`.bashrc` ã‚„ `.zshrc` ã«è¿½è¨˜ã™ã‚‹\n\n````shell\nexport PATH=$HOME/.nodebrew/current/bin:$PATH\n````\n\nthen reload\n\n````shell\n$ source ~/.bashrc\n````\n\n### ä½¿ã„ãŸã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®Node.jsã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n````shell\n$ nodebrew ls-remote\n=\u003e åˆ©ç”¨ã§ãã‚‹Node.jsãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ä¸€è¦§\n$ nodebrew install-binary \u003cversion\u003e\n$ nodebrew use \u003cversion\u003e\n$ node -v\n=\u003e ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸNode.jsã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒè¡¨ç¤º\n````\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["Nodejs"]},"/note/Noto-Sans-JP":{"title":"Noto Sans JP","content":"\n\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["font"]},"/note/Nuxt-Bridge":{"title":"Nuxt Bridge","content":"\n\\#Nuxtjs\n\n\u003chttps://v3.nuxtjs.org/getting-started/bridge/\u003e\n\n|Feature / Version|Nuxt 2|Nuxt Bridge|Nuxt 3|\n|-----------------|------|-----------|------|\n|Vue|2|2|3|\n|Stability|ğŸ˜Š Stable|ğŸ˜Œ Semi-stable|ğŸ˜¬ Unstable|\n|Performance|ğŸ Fast|âœˆï¸ Faster|ğŸš€ Fastest|\n|Nitro Engine|âŒ|âœ…|âœ…|\n|ESM support|ğŸŒ™ Partial|ğŸ‘ Better|âœ…|\n|TypeScript|â˜‘ï¸ Opt-in|ğŸš§ Partial|âœ…|\n|Composition API|âŒ|ğŸš§ Partial|âœ…|\n|Options API|âœ…|âœ…|âœ…|\n|Components Auto Import|âœ…|âœ…|âœ…|\n|`\u003cscript setup\u003e` syntax|âŒ|ğŸš§ Partial|âœ…|\n|Auto Imports|âŒ|âœ…|âœ…|\n|Webpack|4|4|5|\n|Vite|âš ï¸ Partial|ğŸš§ Partial|ğŸš§ Experimental|\n|Nuxi CLI|âŒ Old|âœ… nuxi|âœ… nuxi|\n|Static sites|âœ…|âœ…|ğŸš§|\n\nNuxt2ã‚’Nuxt3ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹æº–å‚™ã‚’ã™ã‚‹ãŸã‚ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³\nVue2ã‚’ä½¿ã„ã¤ã¤ã€éƒ¨åˆ†çš„ã«Nuxt3ã®æ©Ÿèƒ½ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã—ã¦æ¼¸æ¬¡çš„ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["Nuxtjs"]},"/note/Nuxt-Bridge%E3%81%A7tailwindcss%E3%82%92%E4%BD%BF%E3%81%86":{"title":"Nuxt Bridgeã§tailwindcssã‚’ä½¿ã†","content":"\n\\#Nuxtjs\n\nNuxt2ã‚’ä½¿ã£ã¦ã„ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã€[Nuxt Bridge](note/Nuxt%20Bridge.md) ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ [TailwindCSS](note/TailwindCSS.md) ãŒã†ã¾ãå‹•ã‹ãªã‹ã£ãŸã®ã§ãƒ¡ãƒ¢ã‚’æ®‹ã—ã¾ã™ã€‚\n\n## Nuxt 2ã« `@nuxtjs/tailwindcss` ã‚’å…¥ã‚Œã‚‹\n\n[ã“ã¡ã‚‰](https://tailwindcss.com/docs/guides/nuxtjs)ã§postcssã€autoprefixerãªã©ã‚’è‡ªåˆ†ã§å…¥ã‚Œã¦ã‚‚ã„ã„ã§ã™ãŒã€æ¥½ã‚’ã™ã‚‹ãŸã‚nuxtjsã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’ä½¿ã„ã¾ã—ãŸã€‚\n\nhttps://tailwindcss.nuxtjs.org\n\n````shell\n$ npm install -D @nuxtjs/tailwindcss\n$ npx tailwindcss init\n$ cat tailwind.config.js\nmodule.exports = {\n  content: [],\n  theme: {\n    extend: {},\n  },\n  plugins: [],\n}\n````\n\n````css:assets/css/tailwind.css\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n````\n\n````js:nuxt.config.js\n   buildModules: [\n     '@nuxt/typescript-build',\n+    '@nuxtjs/tailwindcss',\n   ],\n````\n\n## [Nuxt Bridge](note/Nuxt%20Bridge.md) ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹\n\nåŸºæœ¬ã¯ https://v3.nuxtjs.org/getting-started/bridge/ ã«æ²¿ã£ã¦è¡Œã„ã¾ã™ã€‚é©å®œyarnã«èª­ã¿æ›¿ãˆã¦ãã ã•ã„ã€‚\n\n`package.json` ã‚’æ›¸ãæ›ãˆã¦ `nuxt-edge` ã«ä¸Šã’ã¦ã€lockãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¶ˆã—ãŸã‚ã¨ `npm install` ã‚’å®Ÿè¡Œã™ã‚‹\n\n````json:package.json\n- \"nuxt\": \"^2.15.0\"\n+ \"nuxt-edge\": \"latest\"\n````\n\n[Nuxt Bridge](note/Nuxt%20Bridge.md) ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹\n\n````shell\n$ npm install -D @nuxt/bridge@npm:@nuxt/bridge-edge\n````\n\nnpm scriptã‚’Nuxt CLIã®ã‚³ãƒãƒ³ãƒ‰ `nuxi`  ã«æ›¸ãæ›ãˆã‚‹\n\n````json:package.json\n{\n  \"scripts\": {\n    \"dev\": \"nuxi dev\",\n    \"build\": \"nuxi build\",\n    \"start\": \"nuxi preview\"\n  }\n}\n````\n\næ¬¡ã« `nuxt.config` ã‚’æ›¸ãæ›ãˆã‚‹ã‚ˆã†æŒ‡ç¤ºã•ã‚Œã¦ã„ã¾ã™ãŒã€ã“ã¡ã‚‰ã‚’è¡Œã£ãŸã¨ã“ã‚ `npm run dev` å®Ÿè¡Œæ™‚ã«æ¬¡ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ã§èµ·å‹•ã—ãªããªã‚Šã¾ã—ãŸã€‚\n\nhttps://github.com/nuxt/framework/issues/1697\n\n````\n[worker] Named export 'isWindows' not found. The requested module 'std-env' is a CommonJS module, which may not support all module.exports as named exports.\nCommonJS modules can always be imported via the default export, for example using:\n````\n\n \u003e \n \u003e Please make sure to avoid any CommonJS syntax such as `module.exports`, `require` or `require.resolve` in your config file. It will soon be deprecated and unsupported.\n\nã¨ã‚ã‚Šã¾ã™ãŒã€ä¸€æ—¦ã“ã¡ã‚‰ã¯è¡Œã‚ãªã„ã“ã¨ã¨ã—ã¾ã™ã€‚ `export default` ã§ã‚‚åŒæ§˜ã ã£ãŸãŸã‚ã€CommonJSã«æ›¸ãæ›ãˆã¾ã™ã€‚\n\n````js:nuxt.config.js\nmodule.exports = {\n    // ...\n}\n````\n\n### `tsconfig.json` ã«è¿½åŠ \n\n````json:tsconfig.json\n{\n+ \"extends\": \"./.nuxt/tsconfig.json\",\n  \"compilerOptions\": {\n    ...\n  }\n}\n````\n\n### äº’æ›æ€§ã®ãªã„ã€å»ƒæ­¢ã•ã‚ŒãŸãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’å‰Šé™¤ã™ã‚‹\n\nä»¥ä¸‹ã‚’å‰Šé™¤ã€ç§»è¡Œã™ã‚‹ã‚ˆã†æŒ‡ç¤ºã•ã‚Œã¦ã„ã¾ã™ã€‚\n\n* @nuxt/content (1.x)\n* nuxt-vite\n* @nuxt/typescript-build\n* @nuxt/typescript-runtime and nuxt-ts\n* @nuxt/nitro\n* @vue/composition-api\n* @nuxtjs/composition-api \n\n````js:nuxt.config.js\n   buildModules: [\n-    '@nuxt/typescript-build',\n     '@nuxtjs/tailwindcss',\n],\n````\n\n### èµ·å‹•ï¼â€¦ã—ãªã„\n\nã“ã“ã¾ã§ã§ä¸€é€šã‚Šç§»è¡Œæ‰‹é †ã¯è¸ã‚ãŸã®ã§ã€ä¸€åº¦ `npm run dev` ã—ã¾ã™ã€‚\n\n`require() of ES Module [...] is not supported` ã®ã‚ˆã†ãªã‚¨ãƒ©ãƒ¼ãŒã§ã¦èµ·å‹•ã—ã¾ã›ã‚“ã§ã—ãŸã€‚\n\n### 'std-env' is a CommonJS module\n\n````\n WARN  [worker] Named export 'isWindows' not found. The requested module 'std-env' is a CommonJS module, which may not support all module.exports as named exports.  12:18:27\nCommonJS modules can always be imported via the default export, for example using:\n\nimport pkg from 'std-env';\nconst { provider, isWindows } = pkg;\n\n\n  import { provider, isWindows } from 'std-env';\n  ^^^^^^^^^\n  SyntaxError: Named export 'isWindows' not found. The requested module 'std-env' is a CommonJS module, which may not support all module.exports as named exports.\n  CommonJS modules can always be imported via the default export, for example using:\n\n  import pkg from 'std-env';\n  const { provider, isWindows } = pkg;\n````\n\nhttps://github.com/nuxt/framework/issues/2026\n\n### node-fetchã‚’ãƒ€ã‚¦ãƒ³ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹\n\nhttps://stackoverflow.com/questions/70541068/instead-change-the-require-of-index-js-to-a-dynamic-import-which-is-available\n\nv3ã«ä¸ŠãŒã£ãŸã“ã¨ã§CommonJSã®è¨˜æ³•ãŒä½¿ãˆãªããªã£ãŸã€‚\nã‚ãˆã¦v2ã‚’å…¥ã‚Œã¾ã™ã€‚\n\n````shell\n$ npm i node-fetch@2\n````\n\n## æ‰€æ„Ÿ\n\nãƒ“ãƒ«ãƒ‰ãŒ30ç§’ãã‚‰ã„ã‹ã‹ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚\nNuxt3ã ã¨5ç§’ãã‚‰ã„ã ã‹ã‚‰é…ãæ„Ÿã˜ã‚‹ã‘ã©ã¾ã‚ä»Šã¾ã§ã¨æ¯”ã¹ã‚‹ã¨æ—©ã„ã§ã™\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["Nuxtjs"]},"/note/Nuxt.js":{"title":"Nuxt.js","content":"\n\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["Nuxtjs","Vuejs"]},"/note/Nuxt.js%E3%81%A7RepositoryFactory%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3%E3%82%92%E5%AE%9F%E8%A3%85%E3%81%99%E3%82%8B":{"title":"Nuxt.jsã§RepositoryFactoryãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å®Ÿè£…ã™ã‚‹","content":"\n[ã€ãƒ•ã‚©ãƒ¼ã‚¹ã‚¿ ãƒ†ãƒƒã‚¯ãƒ–ãƒ­ã‚°ã€‘RepositoryFactoryãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’Vueã®APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å°å…¥ã™ã‚‹ - for Startups Tech blog](https://tech.forstartups.com/entry/2021/07/27/194946)\n[Nuxt.js Ã— typescriptã§å®Ÿè£…ã™ã‚‹ api repositoryFactoryãƒ‘ã‚¿ãƒ¼ãƒ³ | ã‚¹ãƒãƒ¼ãƒˆã‚·ãƒ§ãƒƒãƒ”ãƒ³ã‚°](https://tech.smartshopping.co.jp/nuxt_typescript_repository_pattern)\n[ã€Vue.jsã€‘Web APIé€šä¿¡ã®ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ (å€‹äººçš„ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹) - Qiita](https://qiita.com/07JP27/items/0923cbe3b6435c19d761)\n\n## RepositoryFactoryãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã¯\n\nAPIã‚’å‘¼ã³å‡ºã™è¨­è¨ˆã®ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã—ã¦ã€Jorgeã¨ã„ã†Vueã‚¨ãƒ´ã‚¡ãƒ³ã‚¸ã‚§ãƒªã‚¹ãƒˆã«ã‚ˆã£ã¦ç´¹ä»‹ã•ã‚ŒãŸã€‚\n[Vue API calls in a smart way](https://medium.com/canariasjs/vue-api-calls-in-a-smart-way-8d521812c322)\n\n* Repositoryã«ã‚ˆã£ã¦ã€axiosã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ç›´æ¥æ›¸ãã®ã‚’é¿ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹\n  * ãƒ‡ãƒ¼ã‚¿ã®æ“ä½œã‚’ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã¨åˆ†é›¢ã™ã‚‹\n  * ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®å¤‰æ›´ã«å¼·ããªã‚‹\n  * å†åˆ©ç”¨æ€§ãŒé«˜ã¾ã‚‹\n* Factoryã«ã‚ˆã£ã¦ã€å„ã‚±ãƒ¼ã‚¹ã§å¿…è¦ãªãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã™ã‚‹\n  * ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯Repositoryã®å®Ÿä½“åŒ–ã®æ–¹æ³•ã‚’çŸ¥ã‚‰ãªãã¦ã„ã„\n  * ãƒ†ã‚¹ãƒˆã®ãŸã‚ã®mockãŒã—ã‚„ã™ããªã‚‹\n\n## æº–å‚™\n\n````typescript:~/plugins/repository-api.ts\nimport { Context } from '@nuxt/types'\nimport { Inject, Plugin } from '@nuxt/types/app'\nimport {\n  UserRepository,\n} from '~/repositories/api'\n\n/**\n * APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹\n * ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«$repositoriesã§å‘¼ã³å‡ºã™ã“ã¨ãŒã§ãã‚‹\n * unit testã®ã¨ãã¯repositoriesã‚’å·®ã—æ›¿ãˆã‚‹ã“ã¨ã§mockå¯èƒ½\n */\nexport interface RepositoryApis {\n  user: UserRepository\n}\n\nconst plugin: Plugin = ({ $axios, $config }: Context, inject: Inject) =\u003e {\n  const user = new UserRepository($axios)\n\n  const repositories: RepositoryApis = {\n    user,\n  }\n  inject('repositories', repositories)\n}\n\nexport default plugin\n````\n\n````typescript:nuxt.config.ts\nimport { NuxtConfig } from '@nuxt/types'\n\nconst config: NuxtConfig = {\n    \n  // ...\n  plugins: [\n    '~/plugins/repository-api',\n  ],\n\n}\n\nexport default config\n\n````\n\n````typescript:@types/vue-shim.d.ts\nimport { NuxtAxiosInstance } from '@nuxtjs/axios'\nimport { Consola } from 'consola'\nimport { Store } from 'vuex'\nimport { RepositoryApis } from '~/plugins/repository-api'\n\n// axios, consola ã¯é–¢ä¿‚ãªã„ãŒä½¿ã†ã®ã§å…¥ã‚Œã¦ãŠãã¨ã—ãŸã‚‰ã“ã‚“ãªæ›¸ãæ–¹\ndeclare module 'vue/types/vue' {\n  export interface Context {\n    $axios: NuxtAxiosInstance\n    $logger: Consola\n    $repositories: RepositoryApis\n  }\n  interface Vue {\n    $logger: Consola\n    $repositories: RepositoryApis\n  }\n}\n\ndeclare module '@nuxt/types' {\n  export interface Context {\n    $axios: NuxtAxiosInstance\n    $logger: Consola\n    $repositories: RepositoryApis\n  }\n  interface NuxtAppOptions {\n    $logger: Consola\n    $repositories: RepositoryApis\n  }\n}\n\ndeclare module 'vuex/types' {\n  interface Store\u003cS\u003e {\n    $repositories: RepositoryApis\n  }\n}\n\n````\n\n````typescript:~/repositories/user.ts\nimport type { AxiosInstance } from 'axios'\n\nexport class UserRepository {\n  private readonly axios: AxiosInstance\n\n  constructor($axios: AxiosInstance) {\n    this.axios = $axios\n  }\n\n  async search(id: string): Promise\u003cUser\u003e {\n    // this.$axios.get ã¿ãŸã„ãªå‡¦ç†\n  }\n}\n````\n\n### ä½¿ã„æ–¹\n\nVueã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§ `$repositories` ã§ä½¿ç”¨ã§ãã‚‹\n\n````typescript\nasync fetchUser(id: string) {\n    const data = await this.$repositories.user.search(id)\n    return data\n}\n````\n\n### ãƒ†ã‚¹ãƒˆ\n\n````typescript:~/test/hoge.spec.ts\nimport { MockProxy, mock } from 'jest-mock-extended'\nimport { Context } from '@nuxt/types'\nimport { RepositoryApis } from '~/plugins/repository-api'\nimport { UserRepository } from '~/repositories/api'\n\ndescribe('user', () =\u003e {\n  let mockContext: MockProxy\u003cContext\u003e\n  let repositories: MockProxy\u003cRepositoryApis\u003e\n\n  beforeEach(() =\u003e {\n    const mockUser = mock\u003cUserRepository\u003e()\n    repositories = mock\u003cRepositoryApis\u003e()\n    repositories.user = mockUser\n\n    mockContext.$repositories = repositories\n  })\n    \n  it('do something', () =\u003e {\n    doSomething(mockContext)\n\n    expect(repositories.user.search).toHaveBeenCalledTimes(1)\n    expect(repositories.user.search).toHaveBeenCalledWith({\n      id: 'foo',\n    })\n  })\n\n})\n````\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["TypeScript","Vuejs"]},"/note/OPA-%E3%83%9D%E3%83%AA%E3%82%B7%E3%83%BC%E3%82%92%E3%83%86%E3%82%B9%E3%83%88%E3%81%99%E3%82%8B":{"title":"OPA ãƒãƒªã‚·ãƒ¼ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹","content":"\n[Open Policy Agent OPA](note/Open%20Policy%20Agent%20OPA.md) ã§ãƒãƒªã‚·ãƒ¼ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹\n\nhttps://www.openpolicyagent.org/docs/latest/policy-testing/#getting-started\n\n`example.go`\n\n````rego\npackage mypolicy\n\nallow {\n    input.name == \"Alice\"\n}\n````\n\n`*_test.rego` ã¨ã„ã†åå‰ã§ä½œã‚Šã€ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’ `test_*` ã§ä½œã‚‹\n\n`example_test.go`\n\n````rego\npackage mypolicy\n\ntest_allow_success {\n    allow with input as {\"name\": \"Alice\"}\n}\n\ntest_not_allowed {\n    not allow with input as {\"name\": \"Bob\"}\n}\n````\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["2023/04/27","OPA"]},"/note/Obsidian%E3%81%A7%E6%9B%B8%E3%81%84%E3%81%9Fmarkdown%E3%82%92Obsidian-Publish%E3%82%92%E4%BD%BF%E3%82%8F%E3%81%9A%E3%81%AB%E5%85%AC%E9%96%8B%E3%81%99%E3%82%8B":{"title":"Obsidianã§æ›¸ã„ãŸmarkdownã‚’Obsidian Publishã‚’ä½¿ã‚ãšã«å…¬é–‹ã™ã‚‹","content":"\n## å‚è€ƒ\n\n* [Zenn \u0026 Hugo in Obsidian : OHZãƒ•ãƒ­ãƒ¼ã«ã‚ˆã‚‹ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã¨ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å®Œå…¨çµ±æ‹¬](https://zenn.dev/estra/articles/ohzflow-zenn-hugo-obsidian#%E3%82%84%E3%82%8A%E6%96%B9)\n\n## obsdconvã‚’ä½¿ã†æ–¹æ³•\n\n[Obsidian â†’ Hugo ã®é‹ç”¨æ–¹æ³• â€“ å…¬é–‹ãƒãƒ¼ãƒˆ](https://qawatake.com/notes/211205-183554/)\n\nã“ã¡ã‚‰ã¯è©¦ã—ãŸãŒçµå±€ä½¿ã‚ãªã‹ã£ãŸã€‚\n\n## Quartzã‚’ä½¿ã†æ–¹æ³•\n\n[Quartzã‚’ä½¿ã£ã¦Obsidianã‚’ç„¡æ–™ã§å…¬é–‹ã—ã¦ã¿ãŸ](blog/Quartzã‚’ä½¿ã£ã¦Obsidianã‚’ç„¡æ–™ã§å…¬é–‹ã—ã¦ã¿ãŸ.md)\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["2023/04/22","obsidian"]},"/note/Obsidian%E3%81%A7Vim%E3%81%AEyank%E3%81%A8OS%E3%81%AEClipboard%E3%82%92%E5%90%8C%E6%9C%9F%E3%81%99%E3%82%8B%E6%96%B9%E6%B3%95":{"title":"Obsidianã§Vimã®yankã¨OSã®Clipboardã‚’åŒæœŸã™ã‚‹æ–¹æ³•","content":"\n`Obsidian Vimrc Support Plugin` ã§`set clipboard=unnamed`ã™ã‚Œã°OK\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["obsidian"]},"/note/Obsidian%E3%81%A8%E3%81%AF":{"title":"Obsidianã¨ã¯","content":"\n## æ¦‚è¦\n\nPCå†…ãƒ­ãƒ¼ã‚«ãƒ«ã«ã‚ã‚‹ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ï¼ˆMarkdownè¨˜æ³•ï¼‰ãƒ•ã‚¡ã‚¤ãƒ«ã®ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã§ã‚ã‚‹ã€‚\n\n## ç‰¹å¾´\n\n* ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä¸è¦\n* markdownã®ã¿ã§ç®¡ç†ã§ãã‚‹\n* ã‚¯ãƒ©ã‚¦ãƒ‰ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¨é€£æºã§ãã‚‹\n* LYT(Linking Your Thinking)ã®æ€æƒ³ã§ã€ãƒ¡ãƒ¢åŒå£«ã®ãƒªãƒ³ã‚¯ãŒå®¹æ˜“ãªã“ã¨\n  * Obsidianç‹¬è‡ªæ‹¡å¼µéƒ¨åˆ†ã«ã‚ˆã‚Šååˆ†ãªé€£æºãŒè¡Œãˆãã†ã€‚ãªã«ã—ã‚ã€æ˜ç¤ºçš„ã«ã€Œ\\[\\[æ–‡æ›¸å\\]\\]ã€ã¨å›²ã‚€ã“ã¨ã§ã€è‡ªå‹•çš„ã«å€™è£œã‚’è¡¨ç¤ºã™ã‚‹ï¼ˆã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«ã‚µãƒ¼ãƒï¼‰æ©Ÿèƒ½ã¾ã§ã‚ã‚‹ã€‚ã•ã‚‰ã«ã€Œ#ã€ã§æ–‡æ›¸å†…ã®è¦‹å‡ºã—ã¸ã€ã€Œ^ã€ã§æ–‡æ›¸å†…ã®ãƒ–ãƒ­ãƒƒã‚¯ã¸ã¨ã€æ–‡æ›¸å†…ã®æŒ‡å®šç®‡æ‰€ã¸ã®ãƒ‡ã‚£ãƒ¼ãƒ—ãƒªãƒ³ã‚¯ã‚’è²¼ã‚‹ã“ã¨ã‚‚å‡ºæ¥ã‚‹ã€‚\n* [Zettelkasten](note/Zettelkastenã¨ã¯.md) \n\n## æ„Ÿæƒ³\n\nãƒ­ãƒ¼ã‚«ãƒ«ã§å®Œçµã—ã€markdownã§ä¿ç®¡ã§ãã‚‹ã®ã§ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã«ä¾å­˜ã—ãªã„ã®ãŒã„ã„ã¨ã“ã‚ã ã¨æ€ã£ãŸ\n\nãƒ¡ãƒ¢åŒå£«ã®ãƒªãƒ³ã‚¯ãŒé¢ç™½ã„\n\nä½¿ã„ã“ãªã›ã‚‹ã‹ãŒä¸å®‰\nã ã„ãŸã„ã“ã†ã„ã†ãƒ„ãƒ¼ãƒ«ã£ã¦æœ€åˆã¯ã‚Šãã£ã¦ã„ã‚ã„ã‚è¨­å®šã™ã‚‹ã‚“ã ã‘ã©ã€ã§ãã‚‹ã“ã¨ãŒå¤šã™ãã‚‹ã¨é€†ã«ãªã«ã—ãŸã‚‰ã„ã„ã‹ã‚ã‹ã‚‰ãªãã¦æ‰‹ãŒã¨ã¾ã£ã¡ã‚ƒã†\n\n## ãƒªãƒ³ã‚¯\n\n* [Obsidian å°å…¥ãƒ¡ãƒ¢ | æ—¥ã€…ã®ã¤ã¶ã‚„ã](https://00.bulog.jp/archives/7959)\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["obsidian"]},"/note/Obsidian%E3%82%92%E3%82%B9%E3%83%9E%E3%83%9B%E3%81%A8%E5%90%8C%E6%9C%9F%E3%81%99%E3%82%8B":{"title":"Obsidianã‚’ã‚¹ãƒãƒ›ã¨åŒæœŸã™ã‚‹","content":"\n[Obsidianã¨ã¯](note/Obsidianã¨ã¯.md)\n\n## Androidã¨PCã§ãƒ¡ãƒ¢ã‚’åŒæœŸã™ã‚‹\n\n### æ–¹é‡\n\n* git,GitHubã§vaultã‚’ç®¡ç†ã™ã‚‹\n* Androidã§ã‚‚ãƒ¡ãƒ¢ã‚’ã¨ã£ã¦gitç®¡ç†ã—ãŸã„\n* daily(YYYY-mm-dd.md)ãŒç°¡å˜ã«ã¤ãã‚Œã‚‹ã¨ã„ã„\n* ãªã‚‹ã¹ããŠé‡‘ã‹ã‘ãšã«ã‚¹ã‚¿ãƒ¼ãƒˆã—ãŸã„\n\n### è©¦ã—ãŸã“ã¨\n\n#### Termux\n\n[Using Obsidian with Termux and VIM - The Gadhian](https://www.thegadhian.com/posts/using-obsidian-with-termux-and-vim/)\n\nã“ã‚Œã™ã\n\n \u003e \n \u003e I don't really know if it's [zettelkasten](https://zettelkasten.de/posts/overview/#the-introduction-to-the-zettelkasten-method), [evergreen notes](https://notes.andymatuschak.org/Evergreen_notes), or [GTD](https://gettingthingsdone.com/what-is-gtd/), or [bullet journaling](https://bulletjournal.com/). It doesn't really matter.\n\n##### git,vimã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n````sh\npkg install vim git\ngit --version\n````\n\n##### storageã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚³ãƒãƒ³ãƒ‰\n\n````sh\ntermux-setup-storage\n````\n\n##### sshéµã‚’GitHubã«ç™»éŒ²\n\n##### vaultãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³\n\n````sh\ncd ~/storage/shared\nmkdir repos \u0026\u0026 cd repos\ngit clone vault\ncd vault\ngit status\n````\n\n##### ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚’ä½œæˆ\n\ntermuxã§é•·ã„ã‚³ãƒãƒ³ãƒ‰ã‚’ã†ã¤ã®ã¯è¾›ã„ã®ã§ã€ã‚ˆãä½¿ã†ã‚³ãƒãƒ³ãƒ‰ã‚’ç™»éŒ²ã—ã¦ãŠã\n\n~/.bashrc\n\n````sh\nexport TODAY=$(date +%Y-%m-%d)\nexport VAULT=~/storage/repos/vault\n\nalias cdv='cd $VAULT'\nalias gits='git status'\nalias gita='git add .'\nalias gitc=\"git commit -m '$TODAY from termux'\"\n\ndaily() {\n\tcp $VAULT/daily/template.md $VAULT/daily/$TODAY.md\n\tsed -e \"s/{{date}}/$NOW/g\" -i $VAULT/daily/$TODAY.md\n}\n````\n\n##### ä½¿ã„æ–¹\n\ndaily note\n\n1. termux ã§ `daily` ã§ä»Šæ—¥ã®æ—¥ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œã‚‹\n1. markor ã§ç·¨é›†\n1. termux ã§ git ã‚³ãƒãƒ³ãƒ‰ã§push\n\n#### Markor\n\nAndroidã®Markdownã‚¨ãƒ‡ã‚£ã‚¿\n\nã‚·ãƒ³ãƒ—ãƒ«ãªæ©Ÿèƒ½ã—ã‹æŒã£ã¦ã„ãªã„\nãŸã æ›¸ãã ã‘ãªã‚‰ä¾¿åˆ©\n\n#### GitJournal\n\n* GitHubã¨é€£æºã§ãã‚‹\n* markdownã®ç·¨é›†ãŒã§ãã‚‹\n* ä¿å­˜ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§è‡ªå‹•ã§push/pullã™ã‚‹\n\nç‰¹ã«é›£ã—ã„è¨­å®šã‚’ã›ãšã«ä½¿ãˆã‚‹ã®ãŒåˆ©ç‚¹\n\n* ä¸ä¾¿ãªç‚¹\n  * åŒæœŸã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’èª¿æ•´ã§ããªã„\n  * ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆãŒåˆ©ç”¨ã§ããªã„\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["obsidian"]},"/note/Obsidian%E4%BD%BF%E3%81%84%E6%96%B9":{"title":"Obsidianä½¿ã„æ–¹","content":"\n\u003chttps://choiyaki.com/?tag=obsidian\u003e\n\n## Obsidianã¯ã€1ãƒšãƒ¼ã‚¸1ãƒ†ãƒ¼ãƒã‚’ã¤ã‚‰ã¬ã\n\nObsidianã§ã¯ã€1ãƒšãƒ¼ã‚¸1ãƒ†ãƒ¼ãƒã‚’ã¤ã‚‰ã¬ãæ°—æŒã¡ã§æ›¸ãã¾ã™ã€‚ã¨ã«ã‹ãã€1ã¤ã®ã“ã¨ã«ã¤ã„ã¦æ›¸ãã€‚  \næœªæ¥ã®è‡ªåˆ†ã¯ä»–äººã¨ã„ã†æ°—æŒã¡ã§ãã¡ã‚“ã¨ã—ãŸæ–‡ç« ã§æ›¸ãã¤ã¤ã‚‚ã€å¿…è¦ä»¥ä¸Šã«èª¬æ˜ã—ã™ãã‚‹ã“ã¨ã‚’ã›ãšã€ãã“ã¯ãƒªãƒ³ã‚¯ã§åˆ¥ãƒšãƒ¼ã‚¸ã¨ã®ã¤ãªãŒã‚Šã‚’ä½œã‚ŠãªãŒã‚‰ã€‚\n\nObsidianã®Publishã®ä¸€ã¤ã²ã¨ã¤ã®ãƒšãƒ¼ã‚¸ã¯ã€1ãƒšãƒ¼ã‚¸1ãƒ†ãƒ¼ãƒã§ã‚ã‚‹ãŒæ•…ã«ã€ãƒ–ãƒ­ã‚°ãªã©ä»–ã®æ–‡ç« ã‚’æ›¸ãéš›ã«ã€è¨€åŠãƒ»å¼•ç”¨ãŒã—ã‚„ã™ã„çŠ¶æ…‹ã§ã‚ã‚‹ã€ã¨è¨€ãˆã¾ã™ã€‚ãã‚Œã‚‰ã‚’çµ„ã¿åˆã‚ã›ã•ãˆã™ã‚Œã°æ–‡ç« ãŒæ›¸ã‘ã‚‹ã€ã¨ã¾ã§ã¯è¡Œã‹ãªã„ã¾ã§ã‚‚ã€1ã¤ã®ãƒ†ãƒ¼ãƒã«ã¤ã„ã¦æ›¸ã‹ã‚ŒãŸã‚‚ã®ã¯ã€å–ã‚Šå›ã—ãŒè‰¯ãã€ä½¿ã„ã‚„ã™ã„ã®ã¯é–“é•ã„ã‚ã‚Šã¾ã›ã‚“ã€‚\n\nã¾ãŸã€Obsidianã®ãƒªãƒ³ã‚¯ã™ã‚‹æ©Ÿèƒ½ã‚’ä½¿ã†ã“ã¨ã§ã€ãƒšãƒ¼ã‚¸åŒå£«ãŒã¤ãªãŒã£ã¦ãã‚Œã¦ãŠã‚Šã€ãã‚Œã‚‚ã¾ãŸè¨€åŠãƒ»å¼•ç”¨ã®ã—ã‚„ã™ã•ã«ä¸€å½¹ã‚’è²·ã£ã¦ã„ã¾ã™ã€‚Obsidianä¸Šã®ãƒšãƒ¼ã‚¸ã‚’ã²ã‚‰ã‘ã°ã€ãã‚Œã«é–¢é€£ã™ã‚‹ãƒšãƒ¼ã‚¸ãŒå¿…ãšè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€æ€ã„èµ·ã“ã™ã“ã¨ãŒã§ãã‚‹ã‹ã‚‰ã€‚\n\n## ãƒ–ãƒ­ã‚°ã¯ã€1ã¤ã®å®Œæˆã—ãŸã‚‚ã®ã‚’\n\nä¸€æ–¹ã§ãƒ–ãƒ­ã‚°ã¯ã€ã¯ã˜ã‚ã‹ã‚‰èª­ã‚“ã§ã„ã‘ã°å†…å®¹ã‚’ç†è§£ã§ãã€ãã‚Œã ã‘ã§å®Œçµã™ã‚‹ã“ã¨ã‚’æ„è­˜ã—ã¦æ›¸ãã€‚\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["obsidian"]},"/note/Obsidian%E7%92%B0%E5%A2%83%E3%82%92%E6%95%B4%E3%81%88%E3%82%8B":{"title":"Obsidianç’°å¢ƒã‚’æ•´ãˆã‚‹","content":"\n[Obsidianã¨ã¯](note/Obsidianã¨ã¯.md)\n\n## PC\n\n1. [ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸](https://obsidian.md/)ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰\n1. vaultã‚’ä½œæˆ\n1. GitHubã«ãƒªãƒã‚¸ãƒˆãƒªä½œæˆ\n\n### ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’è¨­å®š\n\n* Calendar\n* Git\n* Daily Notes\n* Templates\n\n### theme\n\nAppearance \u003e Theme \u003e Dracula for Obsidian ã‚’é©ç”¨\n\n### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹æˆ\n\n* `attachment`: æ·»ä»˜ãƒ•ã‚¡ã‚¤ãƒ«ã€ç”»åƒ\n* `daily`: æ—¥æ¬¡ãƒ¡ãƒ¢\n* `_templates`: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ\n\n## å‚è€ƒ\n\n* [ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãƒ¡ãƒ¢ã‚¢ãƒ—ãƒªObsidianã®è¨­å®šã‚’å…¨æ™’ã—ã™ã‚‹å› | Output 0.1](https://pouhon.net/obsidian-settings/5686/)\n* [Zenn \u0026 Hugo in Obsidian : OHZãƒ•ãƒ­ãƒ¼ã«ã‚ˆã‚‹ãƒŠãƒ¬ãƒƒã‚¸ãƒ™ãƒ¼ã‚¹ã¨ã‚¢ã‚¦ãƒˆãƒ—ãƒƒãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®å®Œå…¨çµ±æ‹¬](https://zenn.dev/estra/articles/ohzflow-zenn-hugo-obsidian)\n* [\\[Obsidian\\]Calendarãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§Daily notesã¯é€²åŒ–ã™ã‚‹ | Output 0.1](https://pouhon.net/obsidian-calendar/5996/)\n* [Obsidian+GitHubã‚’ä½¿ã£ãŸãƒ¡ãƒ¢ç’°å¢ƒã‚’æ•´ãˆãŸ Â· kapieciiã®ãƒ–ãƒ­ã‚°](https://blog.kapiecii.com/posts/2020/11/29/hello-obsidian/)\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["obsidian"]},"/note/Obsidian-%E6%97%A5%E6%AC%A1%E3%83%A1%E3%83%A2%E3%82%92%E5%8F%96%E3%82%8B":{"title":"Obsidian æ—¥æ¬¡ãƒ¡ãƒ¢ã‚’å–ã‚‹","content":"\n[Obsidianã¨ã¯](note/Obsidianã¨ã¯.md)\n\n\u003chttps://note.com/takibayashi/n/nd6250964f0a7\u003e\n\n## å‹•æ©Ÿ\n\næ¯æ—¥ä½•ã—ã¦ã„ã‚‹ã‹å¿˜ã‚Œã¦ã„ã£ã¦ã—ã¾ã†ã‹ã‚‰ãƒ©ã‚¤ãƒ•ãƒ­ã‚°ã‚’å¾¹åº•ã—ãŸã„\n\n \u003e \n \u003e ç´°ã‹ã„ã“ã¨ã®è¨˜éŒ²ãŒã™ã¹ã¦æ®‹ã£ã¦ã„ã‚‹ã®ã§ã€å¾Œã€…å½¹ã«ç«‹ã¤ã“ã¨ãŒå¤šã€…ã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€å…¬å…±æ–™é‡‘ã®è¨­å®šã‚’åŠå¹´å‰ã«å¤‰æ›´ã—ãŸã‚“ã ã‘ã©ã€ãã®ã¨ãã€ã©ã“ã«é›»è©±ã—ã¦ã€ã©ã®ã‚ˆã†ãªãƒ—ãƒ©ãƒ³ã«ã—ãŸã‚“ã ã£ã‘ï¼Ÿã¨ã„ã†ã“ã¨ã‚‚è¨˜éŒ²ãŒæ®‹ã£ã¦ã„ã‚‹ã®ã§åŠ©ã‹ã‚Šã¾ã™ã€‚\n\nã€Œãƒ¡ãƒ¢ã®é­”åŠ›ã€ã¨ã‹æ„è­˜é«˜ã„ç³»ãªã“ã¨ã¯è€ƒãˆãšã€è©³ç´°ãªæ—¥è¨˜ã£ã¦ãã‚‰ã„ã®ä½ç½®ã¥ã‘\n\n[\\[Obsidian\\]Calendarãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã§Daily notesã¯é€²åŒ–ã™ã‚‹ | Output 0.1](https://pouhon.net/obsidian-calendar/5996/)\n\n## PC\n\n* Daily Notes\n\n![Pasted-image-20210502143807](note/Pasted-image-20210502143807.png)\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["obsidian"]},"/note/Obsidian-Command-Line%E3%81%8B%E3%82%89%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E9%96%8B%E3%81%8F":{"title":"Obsidian Command Lineã‹ã‚‰ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã","content":"\n[Command Line Interface to open files/folders in Obsidian from the terminal - Feature requests - Obsidian Forum](https://forum.obsidian.md/t/command-line-interface-to-open-files-folders-in-obsidian-from-the-terminal/860/20)\n\n[URL Scheme](https://help.obsidian.md/Advanced+topics/Using+Obsidian+URI) ãŒå®Ÿè£…ã•ã‚ŒãŸãŸã‚ã€Macã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦é–‹ãã“ã¨ãŒã§ãã‚‹ã€‚\n\n````shell\nVAULT=myvault\nFILE='my%20file'\nobsidian=\"obsidian://open?vault=${VAULT}\u0026file=${FILE}\"\n````\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["2023/05/05","obsidian","CLI"]},"/note/Obsidian-Wikilink%E3%82%92Markdown-link%E3%81%AB%E5%A4%89%E6%9B%B4%E3%81%97%E3%81%9F":{"title":"Obsidian Wikilinkã‚’Markdown linkã«å¤‰æ›´ã—ãŸ","content":"\n[Obsidianã‚’å…¬é–‹ã™ã‚‹](blog/Quartzã‚’ä½¿ã£ã¦Obsidianã‚’ç„¡æ–™ã§å…¬é–‹ã—ã¦ã¿ãŸ.md) ã«ã‚ãŸã£ã¦ã€Wikilinkã®ã¾ã¾ã ã¨ã†ã¾ããƒªãƒ³ã‚¯ãŒè²¼ã‚‰ã‚Œãªã‹ã£ãŸã‚Šã—ã¦ä¸éƒ½åˆã ã£ãŸã®ã§ã€é€šå¸¸ã®markdown linkã«å¤‰æ›´ã—ãŸã€‚\nå…¬é–‹ã™ã‚‹ãŸã‚ã ã‘ã˜ã‚ƒãªãã€ [Obsidian](note/Obsidianã¨ã¯.md) ã‹ã‚‰ã‚‚ã—ç§»è¡Œã™ã‚‹ã¨ãªã£ã¦ã‚‚ã„ã„ã‚ˆã†ã«å¤‰æ›´ã—ãŸã‹ã£ãŸã€‚\n\n## è¨­å®š\n\nã¾ãšä»Šå¾Œä½œæˆã™ã‚‹ã¨ãã«markdown linkãŒä½¿ã‚ã‚Œã‚‹ã‚ˆã†ã«Obsidianã®è¨­å®šã‚’å¤‰æ›´ã™ã‚‹\n\n![](note/Pasted-image-20230505054503.png)\n\n## æ—¢å­˜ã®ãƒªãƒ³ã‚¯ã‚’å¤‰æ›´ã™ã‚‹\n\nãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ã†ã®ãŒã¯ã‚„ã‹ã£ãŸã€‚\n\n[ozntel/obsidian-link-converter: Obsidian Plugin to scan all your links in your vault and convert them to your desired format.](https://github.com/ozntel/obsidian-link-converter)\n\nã—ã‹ã—ä»¥ä¸‹ã®å•é¡ŒãŒã‚ã£ãŸã€‚\n\n* æ—¥æœ¬èªã®ãƒ•ã‚¡ã‚¤ãƒ«åãŒURLã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œã‚‹\n  * `[ãƒãƒ¼ãƒˆ](note/ãƒãƒ¼ãƒˆ.md)` ã¨è¨˜è¿°ã•ã‚Œã¦ã»ã—ã„ãŒã€ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ `[ãƒãƒ¼ãƒˆ](note/%E3%83%8E%E3%83%BC%E3%83%88.md)` ã¨ãªã‚‹\n* æ­£è¦è¡¨ç¾ã§ `[[` ã‚’å¤‰æ›ã™ã‚‹ã®ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªãã¦ã‚‚å¤‰æ›ã•ã‚Œã¦ã—ã¾ã†\n\n### æ­£ã—ãå¤‰æ›ã•ã‚Œã‚‹ã‚ˆã†ã€ãƒ‘ãƒƒãƒã‚’ã‚ã¦ã‚‹\n\n* æ—¥æœ¬èªãŒã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œãªã„ã‚ˆã†ã«ã™ã‚‹\n  * ãŸã ã—ã‚¹ãƒšãƒ¼ã‚¹ã¯ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã¦ã»ã—ã„ `[ãƒãƒ¼ãƒˆ](note/my ãƒãƒ¼ãƒˆ.md)` -\u003e `[ãƒãƒ¼ãƒˆ](note/my%20ãƒãƒ¼ãƒˆ.md)`\n\n````diff\n--- a/src/converter.ts\n+++ b/src/converter.ts\n@@ -293,7 +303,9 @@ const createLink = (dest: LinkType, originalLink: string, altOrBlockRef: string,\n         } else {\n             altText = file ? file.basename : finalLink;\n         }\n-        return `[${altText}](${encodeURI(finalLink)}${fileExtension})`;\n+        finalLink = finalLink.replace(/ /g, '%20')\n+        return `[${altText}](${finalLink}${fileExtension})`;\n     } else if (dest === 'wikiTransclusion') {\n         return ``;\n     } else if (dest === 'mdTransclusion') {\n@@ -305,7 +317,8 @@ const createLink = (dest: LinkType, originalLink: string, altOrBlockRef: string,\n         } else {\n             encodedBlockRef = encodeURI(encodedBlockRef);\n         }\n-        return `[](${encodeURI(finalLink)}${fileExtension}#${encodedBlockRef})`;\n+        finalLink = finalLink.replace(/ /g, '%20')\n+        return `[](${finalLink}${fileExtension}#${encodedBlockRef})`;\n     }\n\n     return '';\n````\n\n* å­˜åœ¨ã—ãªã„ãƒªãƒ³ã‚¯ã¯å¤‰æ›ã—ãªã„ã‚ˆã†ã«ã™ã‚‹\n  * ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ã€ãªã‘ã‚Œã°ãªã«ã‚‚ã—ãªã„\n\n````diff\n--- a/src/converter.ts\n+++ b/src/converter.ts\n@@ -193,6 +193,9 @@ export const convertWikiLinksToMarkdown = async (md: string, sourceFile: TFile,\n     let wikiMatches = linkMatches.filter((match) =\u003e match.type === 'wiki');\n     for (let wikiMatch of wikiMatches) {\n         let mdLink = createLink('markdown', wikiMatch.linkText, wikiMatch.altOrBlockRef, sourceFile, plugin);\n+        if (!mdLink) {\n+            continue;\n+        }\n         newMdText = newMdText.replace(wikiMatch.match, mdLink);\n     }\n     // --\u003e Convert Wiki Transclusion Links to Markdown Transclusion\n@@ -267,6 +270,11 @@ const createLink = (dest: LinkType, originalLink: string, altOrBlockRef: string,\n     let finalLink = originalLink;\n     let altText: string;\n\n+    const matchFile = plugin.app.vault.getFiles().find(t =\u003e sourceFile.name !== t.name \u0026\u0026 (t.basename === finalLink || t.name === finalLink))\n+    if (!matchFile) {\n+        return '';\n+    }\n+\n     let fileLink = decodeURI(finalLink);\n````\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["2023/05/05","obsidian"]},"/note/Open-Policy-Agent-OPA":{"title":"Open Policy Agent OPA","content":"\nGateKeeper, Conftestã¨çµ„ã¿åˆã‚ã›ã¦ä½¿ã†\n\nhttps://www.openpolicyagent.org/docs/latest/policy-language/\n[Playground](https://play.openpolicyagent.org) ã‚‚ã‚ã‚‹\n\nã‚ã‹ã‚Šã‚„ã™ã„ãƒšãƒ¼ã‚¸\n[Policy as Codeã‚’å®Ÿç¾ã™ã‚‹ Open Policy Agent / Rego ã®ç´¹ä»‹ - ISID ãƒ†ãƒƒã‚¯ãƒ–ãƒ­ã‚°](https://tech.isid.co.jp/entry/2021/12/05/Policy_as_Code%E3%82%92%E5%AE%9F%E7%8F%BE%E3%81%99%E3%82%8B_Open_Policy_Agent_/_Rego_%E3%81%AE%E7%B4%B9%E4%BB%8B)\n\nOpen Policy Agent (OPA)ã¯ã€ãƒãƒªã‚·ãƒ¼ãƒ™ãƒ¼ã‚¹ã®ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã‚’æä¾›ã™ã‚‹ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚OPAã¯ã€REST APIã‚„gRPCãªã©ã®å½¢å¼ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«çµ±åˆã•ã‚Œã€ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã®åˆ¤æ–­ã‚’è¡Œã„ã¾ã™ã€‚\nOPAã¯ã€è‡ªç”±ãªãƒãƒªã‚·ãƒ¼ã®è¡¨ç¾åŠ›ã‚’æŒã¡ã€æŸ”è»Ÿã§æ‹¡å¼µæ€§ã®é«˜ã„è¨­è¨ˆãŒç‰¹å¾´ã§ã™ã€‚OPAã®ãƒãƒªã‚·ãƒ¼ã¯ã€Regoã¨ã„ã†è¨€èªã§è¨˜è¿°ã•ã‚Œã¾ã™ã€‚Regoã¯ã€JSONã‚’åŸºã«ã—ãŸãƒ‡ãƒ¼ã‚¿æ§‹é€ ã‚’æ‰±ã„ã‚„ã™ã„å½¢å¼ã§è¡¨ç¾ã™ã‚‹ã“ã¨ãŒã§ãã€è¤‡é›‘ãªãƒãƒªã‚·ãƒ¼ã®è¡¨ç¾ãŒå¯èƒ½ã§ã™ã€‚\næ§˜ã€…ãªã‚µãƒ¼ãƒ“ã‚¹ã®ãƒãƒªã‚·ãƒ¼è¨­å®šã‚’åŒã˜è¨€èªï¼ˆRegoï¼‰ã§è¡¨ç¾ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n\nGatekeeper ã¯ã€Kubernetesã«ãŠã‘ã‚‹OPAã®å®Ÿè£…ã®1ã¤ã§ã€Kubernetesã®ãƒãƒªã‚·ãƒ¼ç®¡ç†ã‚’è‡ªå‹•åŒ–ã™ã‚‹ãŸã‚ã®ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã§ã™ã€‚Gatekeeperã¯ã€OPAã‚’ä½¿ç”¨ã—ã¦ã€Kubernetesã®ãƒªã‚½ãƒ¼ã‚¹ã‚„ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆã‚’æ¤œè¨¼ã—ã€ãƒãƒªã‚·ãƒ¼ã«å¾“ã‚ãªã„å ´åˆã¯æ‹’å¦ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n\nConftestã¯ã€OPAã®ãƒ„ãƒ¼ãƒ«ã®1ã¤ã§ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãªã©ã®æ§‹æˆãƒ•ã‚¡ã‚¤ãƒ«ã®æ¤œè¨¼ã‚’è¡Œã†ã“ã¨ãŒã§ãã¾ã™ã€‚Conftestã¯ã€OPAã®è¨€èªã§ã‚ã‚‹Regoã‚’ä½¿ç”¨ã—ã¦ã€æ§‹æˆãƒ•ã‚¡ã‚¤ãƒ«ã«å¯¾ã™ã‚‹ãƒãƒªã‚·ãƒ¼ã‚’è¨˜è¿°ã—ã¾ã™ã€‚\n\n## æ›¸ãæ–¹\n\n````lua\npackage example\n\ndeny {\n    input.user == \"admin\"\n}\n````\n\n`input` ã¯ã€Regoè¨€èªã§ç”¨æ„ã•ã‚Œã¦ã„ã‚‹äºˆç´„èªã®ä¸€ã¤ã§ã€ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã®è©•ä¾¡æ™‚ã«ä¸ãˆã‚‰ã‚Œã‚‹å…¥åŠ›ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¡¨ã—ã¾ã™ã€‚å…¥åŠ›ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ§‹æ–‡ã¯æ±ºã¾ã£ã¦ãŠã‚‰ãšã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ã‚ˆã£ã¦ç•°ãªã‚Šã¾ã™ã€‚ã¤ã¾ã‚Šã€`input`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¯ã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å…¥åŠ›ã«å¿œã˜ã¦ã€å‹•çš„ã«æ§‹ç¯‰ã•ã‚Œã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚\n\nã“ã®ãƒ«ãƒ¼ãƒ«ã¯ã€`input.user` ãŒ\"admin\"ã§ã‚ã‚‹å ´åˆã«ã€`deny`ã‚’è¿”ã—ã¾ã™ã€‚ã“ã®ãƒ«ãƒ¼ãƒ«ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã«ã¯ã€`input`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒä¸ãˆã‚‰ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ä¾‹ãˆã°ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå…¥åŠ›ã‚’ä¸ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n\n````json\n{\n    \"user\": \"admin\",\n    \"resource\": \"some-resource\"\n}\n````\n\nOPAã®è¨€èªä»•æ§˜ã«ãŠã„ã¦ã€`deny`ã‚„`allow`ã¯äºˆç´„èªã§ã¯ãªãã€ãƒ«ãƒ¼ãƒ«ã®åå‰ã¨ã—ã¦ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ã“ã‚Œã‚‰ã®ãƒ«ãƒ¼ãƒ«åã«ã¯ã€ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡ã®åˆ¤æ–­ã‚’è¡Œã†ãŸã‚ã«ã€`deny`ã¨`allow`ãŒä¸€èˆ¬çš„ã«ä½¿ç”¨ã•ã‚Œã¾ã™ãŒã€ä»»æ„ã®åå‰ã‚’ä»˜ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n\n````lua\npackage example\n\nallow {\n    input.user == \"admin\"\n}\n````\n\n````lua\npackage example\n\ndeny_my_rule {\n    input.user == \"admin\"\n}\n````\n\nConftestã§ã¯ã€ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã®çµæœã‚’`deny`ã‚„`allow`ã§è¡¨ç¾ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ãŒã€ã“ã‚Œã‚‰ã¯OPAã®ãƒ«ãƒ¼ãƒ«ã®åå‰ã¨ã—ã¦å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªãã€ä¾¿å®œçš„ã«ä½¿ã‚ã‚Œã¦ã„ã‚‹ã‚‚ã®ã§ã™ã€‚Conftestã¯ã€Regoã®è¨€èªä»•æ§˜ã«åŸºã¥ã„ã¦ãƒ«ãƒ¼ãƒ«ã‚’è¨˜è¿°ã™ã‚‹ãŸã‚ã€`deny`ã‚„`allow`ã®ä»–ã«ã‚‚ä»»æ„ã®ãƒ«ãƒ¼ãƒ«åã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚ãŸã ã—ã€ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã®çµæœã‚’`deny`ã‚„`allow`ã§è¡¨ç¾ã™ã‚‹ã“ã¨ãŒä¸€èˆ¬çš„ã§ã‚ã‚Šã€ã‚ˆã‚Šã‚ã‹ã‚Šã‚„ã™ã„ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ãã“ã¨ãŒã§ãã¾ã™ã€‚\n\n## ORæ¡ä»¶\n\nConftestã§ `||` ã¿ãŸã„ã«ORæ¡ä»¶ã‚’æ›¸ã‘ãªã„ã‹èª¿ã¹ãŸãŒã€ç°¡å˜ã«ã§ããªã‹ã£ãŸã€‚\nåŒåã®é–¢æ•°ã‚’è¤‡æ•°ç”¨æ„ã™ã‚‹ã“ã¨ã§ã€ORæ¡ä»¶ã¨ã§ãã‚‹ã‚‰ã—ã„\n\n````\n\ndeny[msg] {\n    inRange(input.index)\n    msg := sprintf(\"indexã¯1~99ã®ç¯„å›²ã‚’æŒ‡å®šã™ã‚‹ %v\", [input.index])\n}\n\ninRange(v) {\n    v \u003e= 1\n}\ninRange(v) {\n    v \u003c 100\n}\n````\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["2023/03/27","Kubernetes"]},"/note/OpenAPI":{"title":"OpenAPI","content":"\nhttps://swagger.io/specification/\n\nOpenAPI ä»•æ§˜ (OAS) ã¯ã€è¨€èªã«ä¾å­˜ã—ãªã„æ¨™æº–ã®REST APIã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã‚’å®šç¾©ã™ã‚‹ã€‚\nã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®šç¾©ã¯ JSON ã¾ãŸã¯ YAML ã§è¨˜è¿°ã—ã€ç‰¹å®šã®è¨€èªã«ä¾å­˜ã—ãªã„ã®ã§ã€ã•ã¾ã–ã¾ãªè¨€èªã§åˆ©ç”¨ã§ãã‚‹ã€‚\nãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‹ã‚‰è¦‹ã‚„ã™ã„ä»•æ§˜æ›¸ã‚’å‡ºåŠ›ã—ãŸã‚Šã€[OpenAPI Generator](note/OpenAPI%20Generator.md) ãªã©ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ã£ã¦ã•ã¾ã–ã¾ãªè¨€èªå‘ã‘ã«ã‚µãƒ¼ãƒãƒ¼ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹ã“ã¨ãŒã§ãã‚‹\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["OpenAPI"]},"/note/OpenAPI%E3%81%A7Go%E3%81%A8TypeScript%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89%E7%94%9F%E6%88%90":{"title":"OpenAPIã§Goã¨TypeScriptã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ","content":"\n## é–‹ç™ºè¨€èªãƒ»ç’°å¢ƒ\n\n* ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰\n  * Go 1.18\n  * [aws-lambda-go](https://github.com/aws/aws-lambda-go) v1.32.0\n  * AWS SAM (API Gateway + Lambda)\n  * oapi-codegen v1.11.0\n* ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰\n  * TypeScript 4.6\n  * Nuxt.js 2.16\n  * axios v0.21.4\n  * OpenAPI GeneratorÂ 5.4.0\n\nâ€» ã‚³ãƒ¼ãƒ‰ã‚’ä½¿ã£ãŸèª¬æ˜ãŒå¤šãå‡ºã¦ãã¾ã™ãŒã€å„è¨€èªã‚„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®èª¬æ˜ã¯çœãã¾ã™ã®ã§åŸºç¤çš„ãªæ–‡æ³•ãŒã‚ã‹ã‚‹ã“ã¨ãŒå‰æã¨ãªã£ã¦ã—ã¾ã„ã¾ã™ã€‚ã”äº†æ‰¿ãã ã•ã„ã€‚\n\n## å°å…¥ã®èƒŒæ™¯\n\nã‚‚ã¨ã‚‚ã¨ä»•æ§˜æ›¸ã®è¨˜è¿°ã¯OpenAPIã§è¡Œã£ã¦ã„ã¾ã—ãŸã€‚\nã—ã‹ã—ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚„ã‚µãƒ¼ãƒãƒ¼ã®APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã‚³ãƒ¼ãƒ‰ã¯æ‰‹å‹•ã§å®Ÿè£…ã—ã¦ã„ãŸãŸã‚ã€ã‚³ãƒ¼ãƒ‰ã®æ›´æ–°ã‚’ä»•æ§˜æ›¸ã«åæ˜ ã—å¿˜ã‚ŒãŸã‚Šã€ä»•æ§˜æ›¸ã¨ã‚³ãƒ¼ãƒ‰ã§ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£åãŒç•°ãªã£ãŸã‚Šã¨ã€å®Ÿè£…ã¨ä»•æ§˜ã®ä¹–é›¢ãŒç™ºç”Ÿã™ã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã—ãŸã€‚\nOpenAPIãƒ•ã‚¡ã‚¤ãƒ«ã¨ã‚³ãƒ¼ãƒ‰ã‚’äºŒé‡ã§ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’ã™ã‚‹ã‚³ã‚¹ãƒˆã ã‘ãŒã‹ã‹ã£ã¦ã„ã‚‹çŠ¶æ…‹ã§ã™ã€‚\n\nãã“ã§ãã‚Œãã‚Œã®è¨€èªå‘ã‘ã«ã‚³ãƒ¼ãƒ‰ã‚’è‡ªå‹•ç”Ÿæˆã™ã‚‹æ–¹æ³•ã‚’å–ã‚Šå…¥ã‚Œã€ã“ã®èª²é¡Œã‚’è§£æ±ºã—ã¾ã—ãŸã€‚\n\n## å°å…¥ã—ãŸçµæœ\n\n1. ä»•æ§˜æ›¸ã¨ã‚³ãƒ¼ãƒ‰ãŒä¸€è‡´ã™ã‚‹ã‚ˆã†ã«ãªã£ãŸ\n1. ãã‚Œãã‚Œã®è¨€èªå‘ã‘ã«APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè£…ã™ã‚‹ã‚³ã‚¹ãƒˆãŒæ¸›ã£ãŸ\n1. ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®å®Ÿè£…ãŒä¸¦è¡Œã—ã¦é€²ã‚ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸ\n\n1ã€2ã«ã¤ã„ã¦ã¯ã€APIã‚’å¤‰æ›´ã—ãŸã¨ãã«ã‚³ãƒ¼ãƒ‰ã‚’å†ç”Ÿæˆã™ã‚‹ã¨Goã‚„TypeScriptã§ã‚¨ãƒ©ãƒ¼ãŒã§ã‚‹ã®ã§ã€å¤‰æ›´ãŒå®‰å…¨ã«è¡Œãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚\n\nã“ã®ã¨ãã®é–‹ç™ºãƒãƒ¼ãƒ ã§ã¯åŒã˜äººãŒãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¨ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ä¸¡æ–¹ã‚’å®Ÿè£…ã—ã¦ã„ãŸã®ã§ã€3ã«ã¤ã„ã¦ã¯ã‚ã¾ã‚Šå½±éŸ¿ãŒã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸãŒã€é–‹ç™ºè€…ãŒåˆ†ã‹ã‚Œã¦ã„ã‚‹å ´åˆã¯ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®é–‹ç™ºãŒæ¸ˆã‚“ã§ã„ãªãã¦ã‚‚ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®é–‹ç™ºã‚’é€²ã‚ã‚‰ã‚Œã‚‹ã®ã¯å¤§ããªåˆ©ç‚¹ã ã¨æ€ã„ã¾ã™ã€‚\n\nä¸€æ–¹ã§ã‚¤ãƒã‚¤ãƒã ã£ãŸç‚¹ã¨ã—ã¦ã€ç”Ÿæˆãƒ„ãƒ¼ãƒ«ã®åãå‡ºã™ã‚³ãƒ¼ãƒ‰ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«åˆã‚ãªã„ã‚‚ã®ã§ã‚ã£ã¦ã‚‚å¦¥å”ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚\nå‡ºåŠ›ã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¯ã‚ã‚‹ç¨‹åº¦ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã§ãã‚‹ã‚‚ã®ã®ã€ãã®æ–¹æ³•ã‚’èª¿ã¹ã‚‹ã‚³ã‚¹ãƒˆã‚„ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚³ã‚¹ãƒˆã‚’é‘‘ã¿ã¦ã€ç”Ÿæˆã•ã‚ŒãŸã‚‚ã®ã«ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ã‚’ã‹ã‘ã‚‹ãã‚‰ã„ã«ç•™ã‚ã¦ã‚ã¨ã¯å—ã‘å…¥ã‚Œã‚‹ã“ã¨ã«ã—ã¾ã—ãŸã€‚\n\n### ã‚„ã‚‰ãªã‹ã£ãŸã“ã¨\n\nä»Šå›ã¯OpenAPIãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚‚ã¨ã«ã—ã¦ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹æ–¹é‡ã§é–‹ç™ºã‚’è¡Œã„ã¾ã—ãŸã€‚\n\nä¸€æ–¹ã§ã€ã‚³ãƒ¼ãƒ‰ã‹ã‚‰OpenAPIãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç”Ÿæˆã™ã‚‹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚‚ã‚ã‚Šã¾ã™ã€‚\nyamlã‚’ç·¨é›†ã™ã‚‹ã‚ˆã‚Šã‚‚ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ããŸã„ã€ã‚³ãƒ¼ãƒ‰ã®ã»ã†ãŒã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã§æ¤œçŸ¥ã§ããŸã‚ŠIDEã®æ©æµã‚’å—ã‘ã‚„ã™ã„ã¨ã„ã†æ°—æŒã¡ã¯ã‚ã£ãŸã®ã§ã™ãŒã€\nãƒ©ã‚¤ãƒ–ãƒ©ãƒªå´ãŒOpenAPI 3.0ç³»ã«å¯¾å¿œã™ã‚‹ã®ã‚’å¾…ã¤å¿…è¦ãŒã‚ã£ãŸã‚Šã€ä½¿ç”¨ã§ãã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒåˆ¶é™ã•ã‚ŒãŸã‚Šã¨ä¸ä¾¿ãªã¨ã“ã‚ãŒã‚ã£ãŸãŸã‚ã€ã“ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã¯å–ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚\nä¾‹ãˆã°ã€Go ã§ã‚³ãƒ¼ãƒ‰ã‹ã‚‰OpenAPI(Swagger)ã‚’ç”Ÿæˆã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ä¸­ã§ã‚¹ã‚¿ãƒ¼æ•°ã®å¤šã„ [swag](https://github.com/swaggo/swag) ã¯Swagger 2.0ã«å¯¾å¿œã—ã¦ã„ã¾ã™ãŒOpenAPI 3.0ç³»ã«ã¯æœªå¯¾å¿œã§ã™ã€‚\n\n*ä»¥é™ã¯ã‚µãƒ³ãƒ—ãƒ«ã¨ã—ã¦ [OpenAPIã®examplesã«ã‚ã‚‹petstore.yaml](https://github.com/OAI/OpenAPI-Specification/blob/3.1.0/examples/v3.0/petstore.yaml) ã‚’ä½¿ç”¨ã—ã¦èª¬æ˜ã—ã¦ã„ãã¾ã™ã€‚*\n\n## ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ\n\nGoã®AWS Lambdaãƒãƒ³ãƒ‰ãƒ©ãƒ¼å‘ã‘ã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚\n\nOpenAPIã‹ã‚‰Goã®ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹ãƒ„ãƒ¼ãƒ«ã§æœ‰åãªã‚‚ã®ã« [go-swagger](https://github.com/go-swagger/go-swagger) ãŒã‚ã‚Šã¾ã™ãŒã€ç¾æ™‚ç‚¹(v0.30.3)ã§ã¯Swagger 2.0ã«ã®ã¿å¯¾å¿œã—ã¦ãŠã‚Šã€OpenAPI 3ç³»ãŒä½¿ãˆã¾ã›ã‚“ã€‚\nã™ã§ã«OpenAPIãƒ•ã‚¡ã‚¤ãƒ«ã¯3ç³»ã§æ›¸ã„ã¦ã„ãŸãŸã‚ã€ã“ã‚Œã«å¯¾å¿œã—ã¦ã„ã‚‹ [oapi-codegen](https://github.com/deepmap/oapi-codegen) ã‚’ä½¿ç”¨ã—ã¾ã—ãŸã€‚\ngo-swagger ã¨æ¯”ã¹ã‚‹ã¨ãƒªãƒªãƒ¼ã‚¹é »åº¦ãŒä½ãã€ãƒ—ãƒ«ãƒªã‚¯ãŒæ»ç•™ã—ãŒã¡ãªã®ãŒæ°—ã«ãªã‚‹ã¨ã“ã‚ã§ã¯ã‚ã‚Šã¾ã™ãŒã€ä»–ã®é¸æŠè‚¢ãŒãªã‹ã£ãŸãŸã‚ã“ã¡ã‚‰ã‚’æ¡ç”¨ã—ã¦ã„ã¾ã™ã€‚\n\n### oapi-codegenã®ä½¿ã„æ–¹\n\nã¾ãšã¯æœ€æ–°ç‰ˆã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦å®Ÿè¡Œã—ã¦ã¿ã¾ã™ã€‚\n\n````shell\ngo install github.com/deepmap/oapi-codegen/cmd/oapi-codegen@latest\n\noapi-codegen -package \"openapi\" petstore.yaml \u003e petstore.gen.go\n````\n\nã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªå†…å®¹ãŒæ›¸ã‹ã‚ŒãŸ petstore.gen.go ãŒç”Ÿæˆã•ã‚Œã¾ã™ã€‚\n\n* **components** ã‚„ **parameters** ã®structå®šç¾©\n* å…¨APIã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚’æŒã£ãŸ **ServerInterface**\n* Echoç”¨ã®wrapper\n* Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸOpenAPI spec\n\nç”Ÿæˆå¯¾è±¡ã¯configãƒ•ã‚¡ã‚¤ãƒ«ã§è¨­å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\nä»Šå›ã¯structå®šç¾©ã®ã¿ç”Ÿæˆã—ãŸã‹ã£ãŸã®ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ãªè¨­å®šã«ã—ã¾ã—ãŸã€‚\n\n````yaml\n# oapi-codegen.yaml\n\npackage: openapi\ngenerate:\n  models: true\n  # echo-server: true\n  # embedded-spec: true\n````\n\n````shell\noapi-codegen -config oapi-codegen.yaml petstore.yaml \u003e petstore.gen.go\n````\n\nç”Ÿæˆã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ã¯ã“ã¡ã‚‰ã§ã™ã€‚\n\n````go\n// Package openapi provides primitives to interact with the openapi HTTP API.\n//\n// Code generated by github.com/deepmap/oapi-codegen version v1.11.0 DO NOT EDIT.\npackage openapi\n\n// Error defines model for Error.\ntype Error struct {\n\tCode    int32  `json:\"code\"`\n\tMessage string `json:\"message\"`\n}\n\n// Pet defines model for Pet.\ntype Pet struct {\n\tId   int64   `json:\"id\"`\n\tName string  `json:\"name\"`\n\tTag  *string `json:\"tag,omitempty\"`\n}\n\n// Pets defines model for Pets.\ntype Pets = []Pet\n\n// ListPetsParams defines parameters for ListPets.\ntype ListPetsParams struct {\n\t// How many items to return at one time (max 100)\n\tLimit *int32 `form:\"limit,omitempty\" json:\"limit,omitempty\"`\n}\n````\n\nâ€»v1.10.0ä»¥å‰ã§ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ç”Ÿæˆå¯¾è±¡ã‚’æŒ‡å®šã§ãã¾ã—ãŸãŒã“ã‚Œã¯ä½¿ãˆãªããªã£ã¦ã„ã¾ã™ã€‚\nè©³ã—ãã¯ [v1.11.0ã®ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆ](https://github.com/deepmap/oapi-codegen/releases/tag/v1.11.0) ã‚’ã”è¦§ãã ã•ã„ã€‚\n\n````\noapi-codegen -generate \"types\" -package \"openapi\" petstore.yaml\noapi-codegen -generate \"server\" -package \"openapi\" petstore.yaml\n````\n\n### AWS Lambdaã®ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å†…ã§åˆ©ç”¨ã™ã‚‹\n\nãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®ã‚³ãƒ¼ãƒ‰ã«ã¤ã„ã¦è©³ç´°ã¯çœãã¾ã™ãŒã€\nã“ã¡ã‚‰ã®ã‚ˆã†ã«ã—ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ç”Ÿæˆã‚³ãƒ¼ãƒ‰ã«ãƒãƒƒãƒ”ãƒ³ã‚°ã—ã¦ã€å‡¦ç†ã‚’è¡Œã„ã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã™ã‚ˆã†å®Ÿè£…ã—ã¾ã—ãŸã€‚\n\n````go\npackage main\n\nimport (\n\t\"encoding/json\"\n\t\"net/http\"\n\n\t\"github.com/aws/aws-lambda-go/events\"\n\t\"github.com/aws/aws-lambda-go/lambda\"\n\t\"github.com/mitchellh/mapstructure\"\n\n\t\"example.com/petstore/openapi\"\n)\n\nfunc handler(request events.APIGatewayProxyRequest) (events.APIGatewayProxyResponse, error) {\n\t// requestã‚’openapi.ListPetsParamsã«ãƒãƒƒãƒ”ãƒ³ã‚°ã™ã‚‹\n\tvar param openapi.ListPetsParams\n\n\tdecoderConfig := \u0026mapstructure.DecoderConfig{\n\t\tWeaklyTypedInput: true,\n\t\tResult:           \u0026param,\n\t}\n\tdecoder, err := mapstructure.NewDecoder(decoderConfig)\n\tif err != nil {\n\t\treturn events.APIGatewayProxyResponse{}, err\n\t}\n\terr = decoder.Decode(request.QueryStringParameters)\n\tif err != nil {\n\t\treturn events.APIGatewayProxyResponse{}, err\n\t}\n\n\t// do something\n\n\t// openapi.Petsã‚’ä½œæˆã—ã¦JSONã«ã—ã¦è¿”å´ã™ã‚‹\n\tpets := make(openapi.Pets, 0)\n\n\tbody, err := json.Marshal(pets)\n\treturn events.APIGatewayProxyResponse{\n\t\tStatusCode: http.StatusOK,\n\t\tBody:       string(body),\n\t}, err\n}\n\nfunc main() {\n\tlambda.Start(handler)\n}\n````\n\nã“ã†ã™ã‚‹ã“ã¨ã§ã€ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã¨ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ãƒãƒƒãƒ”ãƒ³ã‚°ãŒè¡Œã‚ã‚Œã€ä»•æ§˜æ›¸ã¨ã‚³ãƒ¼ãƒ‰ãŒä¸€è‡´ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚\n\n### struct tagã‚’è¿½åŠ ã—ãŸã„\n\nä¸Šè¨˜ã‚³ãƒ¼ãƒ‰ã§ã¯ã€  [mapstructure](https://github.com/mitchellh/mapstructure) ã‚’ä½¿ã£ã¦Lambdaã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿( map\\[string\\]string å‹ã® QueryStringParameters) ã‚’ openapi.ListPetsParams å‹ã®å¤‰æ•°ã«ãƒ‘ãƒ¼ã‚¹ã—ã¦ã„ã¾ã™ã€‚\nã“ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã€ `mapstructre:\"limit\"` ã®ã‚ˆã†ãªstruct tagã‚’æ›¸ãã“ã¨ã§ã€mapã®ã‚­ãƒ¼åã¨tagãŒä¸€è‡´ã™ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å€¤ã‚’ãƒ‘ãƒ¼ã‚¹ã•ã›ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n\nã“ã‚Œã¯ã€æ¬¡ã®ã‚ˆã†ã«kebab-caseã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å®šç¾©ã—ãŸã„ã¨ãã«å½¹ç«‹ã¡ã¾ã™ã€‚\n\n````yaml\n  /pets:\n    get:\n      parameters:\n        - name: limit\n          in: query\n          description: How many items to return at one time (max 100)\n          required: false\n          schema:\n            type: integer\n            format: int32\n        - name: sort-by\n          in: query\n          description: How to sort items\n          required: false\n          schema:\n            type: string\n````\n\nç”Ÿæˆã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰\n\n````go\ntype ListPetsParams struct {\n\t// How many items to return at one time (max 100)\n\tLimit *int32 `form:\"limit,omitempty\" json:\"limit,omitempty\"`\n\n\t// How to sort items\n\tSortBy *string `form:\"sort-by,omitempty\" json:\"sort-by,omitempty\"`\n}\n````\n\nã“ã®çŠ¶æ…‹ã§ /pets?sort-by=name ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã™ã‚‹ã¨ã€SortBy ã«ã¯å€¤ãŒå…¥ã‚‰ãšã€ /pets?sortBy=name ã¨ã—ãªã„ã¨ã„ã‘ã¾ã›ã‚“ã€‚\n\nã“ã‚Œã‚’è§£æ¶ˆã™ã‚‹ãŸã‚ã« oapi-codegen ã§ã¯ã€**x-oapi-codegen-extra-tags** ã‚’æ›¸ãã“ã¨ã§ä»»æ„ã®struct tagã‚’ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¾ã™ã€‚\n\n````yaml\n        - name: sort-by\n          in: query\n          description: How to sort items\n          required: false\n          schema:\n            type: string\n          x-oapi-codegen-extra-tags:\n            mapstructure: sort-by,omitempty\n````\n\nç”Ÿæˆã•ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰\n\n````go\ntype ListPetsParams struct {\n\t// How many items to return at one time (max 100)\n\tLimit *int32 `form:\"limit,omitempty\" json:\"limit,omitempty\"`\n\n\t// How to sort items\n\tSortBy *string `form:\"sort-by,omitempty\" json:\"sort-by,omitempty\" mapstructure:\"sort-by,omitempty\"`\n}\n````\n\nã“ã‚Œã§ /pets?sort-by=name ãŒæœŸå¾…é€šã‚Šåƒãã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚\n\nä»–ã«ã‚‚ [go-playground/validator](https://github.com/go-playground/validator) ç”¨ã®ã‚¿ã‚°ã‚’è¿½åŠ ã™ã‚‹ã®ã«ã‚‚ä½¿ãˆãã†ã§ã™ã€‚\n\n## ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ\n\nã¤ã¥ã„ã¦ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å´ã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚\nTypeScriptã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ¼ãƒ‰ã¯ã€ [OpenAPI Generator](https://openapi-generator.tech/) ã‚’ä½¿ã£ã¦ç”Ÿæˆã—ã¾ã—ãŸã€‚\n\nhttpã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¯ axios ã‚’ä½¿ã£ã¦ã„ã¾ã™ã®ã§ã€axios å‘ã‘ã®ã‚³ãƒ¼ãƒ‰ã‚’å‡ºåŠ›ã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚\næ¬¡ã®ã‚ˆã†ã«ã—ã¦ **npm run openapi-generate** ã§å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ã—ã¾ã—ãŸã€‚\n\n**package.json**\n\n````json\n{\n  \"scripts\": {\n    \"openapi-generate\": \"rm -f api_client/*.ts || true \u0026\u0026 TS_POST_PROCESS_FILE='npx prettier --write' openapi-generator-cli generate -i petstore.yaml -g typescript-axios -o api_client --additional-properties=supportsES6=true,useSingleRequestParameter=true --enable-post-process-file\"\n  },\n  \"devDependencies\": {\n    \"@openapitools/openapi-generator-cli\": \"^2.4.0\"\n  }\n}\n````\n\n**rm -f api_client/\\*.ts || true**\n\nå¤‰æ›´æ™‚ã«ä¸è¦ã«ãªã£ãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒæ®‹ã£ã¦ã—ã¾ã†ã®ã§ã€å‰Šé™¤ã—ã¾ã™\n\n**TS_POST_PROCESS_FILE='npx prettier --write'**\n\nTS_POST_PROCESS_FILE ã§ã‚³ãƒ¼ãƒ‰ç”Ÿæˆå¾Œã«å®Ÿè¡Œã™ã‚‹å‡¦ç†ã‚’è¨­å®šã§ãã¾ã™ã€‚ã“ã“ã§ã¯prettierã§ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’è¡Œã£ã¦ã„ã¾ã™ã€‚\n\n**openapi-generator-cli generate -i petstore.yaml -g typescript-axios -o api_client**\n\n* -i OpenAPIãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹\n* -g generatorã®ç¨®é¡\n* -o ç”Ÿæˆå…ˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª\n\næŒ‡å®šã§ãã‚‹generatorã®ç¨®é¡ã¯ã“ã¡ã‚‰ã§èª¿ã¹ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\nhttps://openapi-generator.tech/docs/generators/\n\naxiosã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã®ã§ typescript-axios ã‚’æŒ‡å®šã—ã¾ã—ãŸã€‚fetch ã‚’ä½¿ã„ãŸã„å ´åˆã€ typescript-fetch ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚\n\n**--additional-properties=supportsES6=true,useSingleRequestParameter=true**\n\næŒ‡å®šã§ãã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™ã€‚\nhttps://openapi-generator.tech/docs/generators/typescript-axios\n\n* supportsES6 ES6å‘ã‘ã®ã‚³ãƒ¼ãƒ‰ã‚’å‡ºåŠ›ã™ã‚‹\n* useSingleRequestParameter APIãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ§‹é€ ä½“ã«ã¾ã¨ã‚ã‚‹\n\n**--enable-post-process-file**\n\nTS_POST_PROCESS_FILE ã®å‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã™\n\n### ç”Ÿæˆã•ã‚Œã‚‹ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚³ãƒ¼ãƒ‰\n\n````typescript\nexport class BaseAPI {\n  protected configuration: Configuration | undefined\n\n  constructor(\n    configuration?: Configuration,\n    protected basePath: string = BASE_PATH,\n    protected axios: AxiosInstance = globalAxios\n  ) {\n    if (configuration) {\n      this.configuration = configuration\n      this.basePath = configuration.basePath || this.basePath\n    }\n  }\n}\n\n// ...\n\nexport class PetsApi extends BaseAPI {\n    // ...\n}\n````\n\n### ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚’Vueã‹ã‚‰åˆ©ç”¨ã™ã‚‹\n\nãƒ†ã‚¹ãƒˆãŒã—ã‚„ã™ã„ã‚ˆã†ã€RepositoryFactoryãƒ‘ã‚¿ãƒ¼ãƒ³ã§å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚\nä¸»é¡Œã§ã¯ãªã„ã®ã§ã€è»½ã„ç´¹ä»‹ã«ã¨ã©ã‚ã¾ã™ã€‚\n\n````typescript\n// repositories/api/petstore.ts\n\nimport type { AxiosInstance } from 'axios'\nimport { PetsApi, PetsApiListPetsRequest, Pet } from '~/generated'\n\nexport class PetsRepository {\n  private readonly axios: AxiosInstance\n\n  // axiosã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’å·®ã—æ›¿ãˆå¯èƒ½ã«ã™ã‚‹\n  constructor($axios: AxiosInstance) {\n    this.axios = $axios\n  }\n\n  async list(req: PetsApiListPetsRequest): Promise\u003cPet[]\u003e {\n    const petsApi = new PetsApi(\n      undefined,\n      this.axios.defaults.baseURL,\n      this.axios\n    )\n    const response = await petsApi.listPets(req)\n    return response.data\n  }\n\n}\n````\n\n````typescript\n// plugins/repositories.ts\n\nimport { PetsRepository } from '~/repositories/api/petstore'\n\nexport interface RepositoryApis {\n  pets: PetsRepository\n}\n\nexport default defineNuxtPlugin((nuxtApp) =\u003e {\n  // axiosã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’injectã™ã‚‹\n  const pets = new PetsRepository(nuxtApp.$axios)\n\n  const repositories: RepositoryApis = {\n    pets,\n  }\n  nuxtApp.provide('repositories', repositories)\n})\n````\n\n````vue\n// pages/petlist.vue\n\n\u003cscript setup lang=\"ts\"\u003e\nimport { Pet } from '~/generated'\n\nconst pets = ref\u003cPet[]\u003e([])\n\nconst $nuxt = useNuxtApp()\n\nconst searchPets = async () =\u003e {\n  // pets.list APIã‚’å‘¼ã³å‡ºã—\n  const resp = await $nuxt.$repositories.pets.list({\n    limit: 10,\n  })\n  return resp\n}\n\nonMounted(() =\u003e searchPets())\n\u003c/script\u003e\n\n\u003ctemplate\u003e\n  \u003cdiv\u003e\n    \u003ch2\u003ePets\u003c/h2\u003e\n    \u003cul\u003e\n      \u003cli v-for=\"pet in pets\" :key=\"pet.id\"\u003e\n        {{ pet.name }}\n      \u003c/li\u003e\n    \u003c/ul\u003e\n  \u003c/div\u003e\n\u003c/template\u003e\n````\n\n## ãŠã‚ã‚Šã«\n\nOpenAPIãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰Goã¨TypeScriptã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ãƒ»ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ç´¹ä»‹ã¨ã€ãã‚Œã‚‰ã‚’ä½¿ã£ãŸå®Ÿè£…ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã—ãŸã€‚\nã“ã®å°å…¥ã«ã‚ˆã£ã¦é–‹ç™ºåŠ¹ç‡ãŒè‰¯ããªã‚Šã€ã¾ãŸä»Šå¾Œã®APIé–‹ç™ºæ™‚ã«å®‰å…¨ã«å¤‰æ›´ãŒè¡Œãˆã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚\n\nã‚¹ã‚­ãƒ¼ãƒé§†å‹•é–‹ç™ºã®ä¸€ä¾‹ã¨ã—ã¦ã€å°‘ã—ã§ã‚‚å‚è€ƒã«ãªã‚‹ç‚¹ãŒã‚ã‚Œã°å¹¸ã„ã§ã™ã€‚\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["2023/04/30","OpenAPI","Go"]},"/note/OpenAPI%E3%81%A8Go%E3%81%A7%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88%E3%81%AE%E3%83%90%E3%83%AA%E3%83%87%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E3%81%99%E3%82%8B":{"title":"OpenAPIã¨Goã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã™ã‚‹","content":"\nã„ã¤ã‚‚oapi-codegenã§openapi.yamlã‹ã‚‰Goã®ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹ã‚ˆã†ã«ã—ã¦ã„ã‚‹ã€‚\noapi-codegenã®ä½¿ã„æ–¹ã«ã¤ã„ã¦ã¯ä¸‹è¨˜å‚ç…§\n\n[OpenAPIã§Goã¨TypeScriptã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ](note/OpenAPIã§Goã¨TypeScriptã®ã‚³ãƒ¼ãƒ‰ç”Ÿæˆ.md)\n\n[OpenAPIä»•æ§˜æ›¸ã‹ã‚‰Goã®æ§‹é€ ä½“ã‚’ä½œã‚‹](note/OpenAPIä»•æ§˜æ›¸ã‹ã‚‰Goã®æ§‹é€ ä½“ã‚’ä½œã‚‹.md)\n\n## OpenAPIã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«åˆ¶ç´„ã‚’ã¤ã‘ã‚‹\n\nOpenAPI Documentã§ã¯ã€JSON Schema ã®å®šç¾©ã«å¾“ã£ã¦ `schema` ã«åˆ¶ç´„ã‚’æ›¸ãã“ã¨ãŒã§ãã‚‹ã€‚\n[OpenAPI Specification - Version 3.0.3 | Swagger](https://swagger.io/specification/#schema-object)\n[draft-wright-json-schema-validation-00](https://datatracker.ietf.org/doc/html/draft-wright-json-schema-validation-00)\n\næ¬¡ã®ã‚ˆã†ã« `pattern` ã‚„ `format` ã€`maxLength` ãªã©ãŒå®šç¾©ã§ãã‚‹ã€‚\n\n`openapi.yaml`\n\n````yaml\npaths:\n  /hello:\n    get:\n      summary: Hello\n      operationId: hello\n      parameters:\n        - name: id\n          in: query\n          description: user id\n          required: true\n          schema:\n            type: string\n            pattern: \"^[0-9A-F]+$\"\n        - name: updated\n          in: query\n          schema:\n            type: string\n            format: date-time\n````\n\noapi-codegenã‚’ä½¿ãˆã°ã€ `schema` ã«æ›¸ã„ãŸåˆ¶ç´„ã‚’ã‚‚ã¨ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¡Œã†ã“ã¨ãŒã§ãã‚‹ã€‚\n\nä»¥ä¸‹ã¯Echoã®å ´åˆ\n\n````go\npackage main\n\nimport (\n\t\"my-application/oapigen\"\n\n\toapiMiddleware \"github.com/deepmap/oapi-codegen/pkg/middleware\"\n\t\"github.com/getkin/kin-openapi/openapi3\"\n\t\"github.com/labstack/echo/v4\"\n)\n\nfunc main() {\n\te := echo.New()\n\n\t// oapi-codegenã§ç”Ÿæˆã—ãŸã‚³ãƒ¼ãƒ‰ã«ã‚ã‚‹GetSwagger()ã§openapi specã‚’å–å¾—\n\tswagger, err := oapigen.GetSwagger()\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\t// ãƒ›ã‚¹ãƒˆã®æ¤œè¨¼ãŒå¿…è¦ã§ãªã‘ã‚Œã°nilã«ã—ã¦ãŠã\n\tswagger.Servers = nil\n\t// middlewareã«Validatorã‚’ã‚»ãƒƒãƒˆã™ã‚‹ã“ã¨ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®æ¤œè¨¼ãŒè¡Œã‚ã‚Œã‚‹\n\te.Use(oapiMiddleware.OapiRequestValidator(swagger))\n\n\t// ç‹¬è‡ªã®formatã‚’å®šç¾©ã—ãŸã„å ´åˆã¯ã“ã®ã‚ˆã†ã«ã™ã‚‹\n\topenapi3.DefineStringFormat(\"custom-date\", `^[0-9]{4}-(0[0-9]|10|11|12)-([0-2][0-9]|30|31)T[0-9]{2}:[0-9]{2}:[0-9]{2}$`)\n\n\n}\n\n````\n\n[OpenAPIã‚¹ã‚­ãƒ¼ãƒé§†å‹•é–‹ç™ºã«ãŠã‘ã‚‹oapi-codegenã‚’ç”¨ã„ãŸãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ - HRBrain Blog](https://times.hrbrain.co.jp/entry/openapi-validation-chi)\nã“ã¡ã‚‰ã«æ›¸ã„ã¦ã‚ã‚‹ã¨ãŠã‚Šã€ä¸€é€šã‚Šã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã§ãã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹\n\nmiddlewareã®ã‚½ãƒ¼ã‚¹ã¯ã“ã¡ã‚‰\nhttps://github.com/deepmap/oapi-codegen/blob/ab90f1927bc5ec3e29af216d4298fbb4780ae36d/pkg/middleware/oapi_validate.go#L58\n\n## åˆ¥ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨çµ„ã¿åˆã‚ã›ã‚‹\n\nhttps://github.com/go-ozzo/ozzo-validation ã‚„ https://github.com/go-playground/validator ã¨çµ„ã¿åˆã‚ã›ã¦è¤‡é›‘ãªãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã—ãŸã„å ´åˆ\n\n`x-oapi-codegen-extra-tags` ã‚’æ›¸ãã“ã¨ã§ä»»æ„ã®struct tagã‚’ã¤ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ã€ã‚¿ã‚°ãƒ™ãƒ¼ã‚¹ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã“ã‚Œã§è¡Œãˆã‚‹\nãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®ç¨®é¡ã¯ã“ã‚Œ\n[go-playground/validator ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å‘ã‘Validationãƒ‘ã‚¿ãƒ¼ãƒ³ã¾ã¨ã‚ - Qiita](https://qiita.com/RunEagler/items/ad79fc860c3689797ccc)\n\n````yaml\npaths:\n  /hello:\n    get:\n      summary: Hello\n      operationId: hello\n      parameters:\n        - name: sort-by\n          in: query\n          description: How to sort items\n          required: false\n          schema:\n            type: string\n          x-oapi-codegen-extra-tags:\n            validate: len=5\n        - name: datetime\n          in: query\n          schema:\n            type: string\n          x-oapi-codegen-extra-tags:\n            validate: datetime_without_timezone\n````\n\nEcho + go-playground/validator\n\n````go\nimport (\n\t\"my-application/openapi\"\n\n\t\"github.com/go-playground/validator/v10\"\n)\n\nfunc main() {\n\te := echo.New()\n\n\tswagger, err := openapi.GetSwagger()\n\tif err != nil {\n\t\tpanic(err)\n\t}\n\tswagger.Servers = nil\n\topenapi.RegisterHandlers(e, handler{})\n\n\t// registor validator\n\tvalidate := validator.New()\n\tvalidate.RegisterValidation(\"datetime_without_timezone\", validateDatetimeWithoutTimezone)\n\te.Validator = \u0026CustomValidator{validate: validate}\n\n}\n\ntype CustomValidator struct {\n\tvalidate *validator.Validate\n}\n\nfunc (cv *CustomValidator) Validate(i interface{}) error {\n\tif err := cv.validate.Struct(i); err != nil {\n\t\treturn echo.NewHTTPError(http.StatusBadRequest, err.Error())\n\t}\n\treturn nil\n}\n\nfunc validateDatetimeWithoutTimezone(fl validator.FieldLevel) bool {\n\tdate := fl.Field().String()\n\t_, err := time.Parse(\"2006-01-02T15:04:05\", date)\n\treturn err == nil\n}\n\ntype handler struct {}\n\nfunc (h handler) Hello(ec echo.Context, params openapi.HelloParams) error {\n\tif err := ec.Validate(params); err != nil {\n\t\treturn err\n\t}\n\treturn ec.String(http.StatusOK, fmt.Printf(\"Hello, %s\", params.Name))\n}\n\n````\n\nvalidatorã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚«ã‚¹ã‚¿ãƒ ã—ãŸã„\n\n[\\[golang\\]Echoã§validatorã®ã‚¨ãƒ©ãƒ¼ã‚’æ—¥æœ¬èªã«å¤‰æ›ã™ã‚‹æ–¹æ³• | CodeLab](https://codelab.website/golang-echo-validator-translation/)\n[How can I define custom error message? Â· Issue #559 Â· go-playground/validator](https://github.com/go-playground/validator/issues/559)\n\ntagã«å¿œã˜ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä½œæˆã™ã‚‹ã€`validator.ValidationErrors.Translate` ã§ç¿»è¨³ã™ã‚‹(ç”¨æ„ã•ã‚ŒãŸç¿»è¨³ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸)\n\n````go\npackage main\n\nimport (\n\t\"errors\"\n\t\"log\"\n\t\"net/http\"\n\t\"reflect\"\n\t\"strings\"\n\t\"time\"\n\n\t\"github.com/go-playground/locales/ja_JP\"\n\tut \"github.com/go-playground/universal-translator\"\n\t\"github.com/go-playground/validator/v10\"\n\tja_translations \"github.com/go-playground/validator/v10/translations/ja\"\n\t\"github.com/labstack/echo/v4\"\n)\n\nfunc main() {\n\te := echo.New()\n\n\tvalidate := validator.New()\n\n\t// ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å‡ºåŠ›ã™ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰åã‚’ã‚¿ã‚°ã‹ã‚‰å–å¾—ã™ã‚‹\n\tvalidate.RegisterTagNameFunc(func(field reflect.StructField) string {\n\t\tfieldName := field.Tag.Get(\"field_ja\")\n\t\tif fieldName == \"-\" {\n\t\t\treturn \"\"\n\t\t}\n\t\treturn fieldName\n\t})\n\n\t// æ—¥æœ¬èªã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å‡ºåŠ›ã™ã‚‹\n\tjapanese := ja_JP.New()\n\tuni := ut.New(japanese, japanese)\n\ttrans, _ := uni.GetTranslator(\"ja\")\n\terr := ja_translations.RegisterDefaultTranslations(validate, trans)\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\t// ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ä¸Šæ›¸ãã™ã‚‹å ´åˆã¯ã“ã®ã‚ˆã†ã«ã™ã‚‹\n\tvalidate.RegisterTranslation(\"required\", trans, func(ut ut.Translator) error {\n\t\treturn ut.Add(\"required\", \"{0} ã‚’æŒ‡å®šã—ã¦ãã ã•ã„\", true) // see universal-translator for details\n\t}, func(ut ut.Translator, fe validator.FieldError) string {\n\t\tt, _ := ut.T(\"required\", fe.Field())\n\t\treturn t\n\t})\n\n\te.Validator = \u0026CustomValidator{validate: validate, trans: trans}\n\n}\n\ntype CustomValidator struct {\n\ttrans    ut.Translator\n\tvalidate *validator.Validate\n}\n\nfunc (cv *CustomValidator) Validate(i interface{}) error {\n\tif err := cv.validate.Struct(i); err != nil {\n\t\tvar ve validator.ValidationErrors\n\t\tmsg := []string{}\n\t\tif errors.As(err, \u0026ve) {\n\t\t\tfor _, m := range ve.Translate(cv.trans) {\n\t\t\t\tmsg = append(msg, m)\n\t\t\t}\n\t\t}\n\n\t\treturn echo.NewHTTPError(http.StatusBadRequest, strings.Join(msg, \",\"))\n\t}\n\treturn nil\n}\n\ntype Params struct {\n\tId *string `form:\"id,omitempty\" json:\"id,omitempty\" validate:\"required\" field_ja:\"ãƒ¦ãƒ¼ã‚¶ID\"`\n}\n\n````\n\n=\u003e `ãƒ¦ãƒ¼ã‚¶IDã¯å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ã™` ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ãªã‚‹\n\n### è©¦ã™\n\n````yaml\nopenapi: \"3.1.0\"\npaths:\n  /hello:\n    get:\n      summary: Sample API\n      operationId: hello\n      tags:\n        - sample\n      parameters:\n        - name: name\n          in: query\n          required: true\n          schema:\n            type: string\n            maxLength: 8\n            minLength: 4\n          description: your name\n        - name: id\n          in: query\n          schema:\n            type: string\n            pattern: \"^\\\\d{8}$\"\n          description: your id\n        - name: age\n          in: query\n          schema:\n            type: integer\n            maximum: 30\n            minimum: 10\n          description: your name\n````\n\nã“ã‚“ãªopenapi.yamlã‚’ä½œã£ã¦é©å½“ãªã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¦ã¦ã€ç¯„å›²å¤–ã®å€¤ã‚’å…¥åŠ›ã—ã¦ã‚„ã‚‹ã¨ã‚¨ãƒ©ãƒ¼ãŒè¿”ã•ã‚ŒãŸ\n\nlocalhost:8080/hello?name=alice\u0026age=99\n\n````\nparameter \"age\" in query has an error: number must be at most 30\n````\n\n## æ—¥ä»˜å‹ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³\n\nkin-openapiã ã‘ã ã¨ã“ã“ã§æ­£è¦è¡¨ç¾ã®ã¿ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ã‚‹\nhttps://github.com/getkin/kin-openapi/blob/e7d649f3f7d6ddbaaaed74a7d2f819a82118aab4/openapi3/schema.go#L943\nhttps://github.com/getkin/kin-openapi/blob/e7d649f3f7d6ddbaaaed74a7d2f819a82118aab4/openapi3/schema_formats.go#L94\n\n`2022-01-02T15:04:05` ã¿ãŸã„ãªæ–‡å­—åˆ—ãŒé€šã‚‹ã¯ãšã¨æ€ã£ãŸãŒé€šã‚‰ãªã‹ã£ãŸã€‚\n\noapi-codegen ã®middlewareã§ã¯ã“ã“ã§ `time.Parse` ã§ãã‚‹ã‹ã‚‚ãƒã‚§ãƒƒã‚¯ã—ã¦ã„ã‚‹ãŸã‚ã ã£ãŸã€‚\nhttps://github.com/deepmap/oapi-codegen/blob/ab90f1927bc5ec3e29af216d4298fbb4780ae36d/pkg/runtime/bindstring.go#L125\n\nãã®ãŸã‚ç‹¬è‡ªãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ç”¨æ„ã—ã¦ã‚ã’ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\n\n````go\n\nimport \"github.com/getkin/kin-openapi/openapi3\"\n\n\n\topenapi3.DefineStringFormat(\"custom-date\", `^[0-9]{4}-(0[0-9]|10|11|12)-([0-2][0-9]|30|31)T[0-9]{2}:[0-9]{2}:[0-9]{2}$`)\n````\n\n* [ ] https://github.com/deepmap/oapi-codegen/blob/ab90f1927bc5ec3e29af216d4298fbb4780ae36d/pkg/runtime/deepobject.go#L248 ã‚¹ãƒšãƒ«ãƒŸã‚¹ç›´ã™ ğŸ“… 2023-01-07\n  `deepObject` ã§dateã‚’æŒ‡å®šã—ãŸã¨ãã«ã“ã†ãªã‚‹ã½ã„\n  https://swagger.io/docs/specification/serialization/\n\n````yaml\n  /hello:\n    get:\n      summary: Sample API\n      operationId: hello\n      tags:\n        - admin\n      parameters:\n        - name: obj\n          in: query\n          schema:\n            type: object\n            properties:\n              date:\n                type: string\n                format: date-time\n          style: deepObject\n          explode: true\n````\n\nå†ç¾ã§ããŸã€‚ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®timeãŒtimã«ãªã£ã¦ã‚‹\nhttp://localhost:1323/hello?obj\\[date\\]=2022-12-21T15:04:05\n\n````\nInvalid format for parameter obj: error assigning value to destination: error assigning field [date]: error parsing tim as RFC3339 or 2006-01-02 time: parsing time \"2022-12-21T15:04:05\": extra text: \"T15:04:05\"\n````\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["2023/01/05","Go","OpenAPI"]},"/note/OpenAPI%E3%81%AEspec%E3%81%8B%E3%82%89SAM%E3%81%AETemplate.yaml%E3%82%92%E7%94%9F%E6%88%90%E3%81%99%E3%82%8B":{"title":"OpenAPIã®specã‹ã‚‰SAMã®Template.yamlã‚’ç”Ÿæˆã™ã‚‹","content":"\n[SAM](note/SAM.md) ã¨ [OpenAPI](note/OpenAPI.md) ã‚’çµ„ã¿åˆã‚ã›ã¦ä½¿ã†ã¨ãã«ä¸¡æ–¹ã‚’ç·¨é›†ã™ã‚‹ã®ãŒå¤§å¤‰\u0026æ¼ã‚Œã‚„ã™ã„ã®ã§åˆã‚ã›ã‚‰ã‚Œã‚‹ä»•çµ„ã¿ãŒæ¬²ã—ã‹ã£ãŸ\n\n````yaml\nopenapi: 3.0.0\ninfo:\n  title: OpenAPI sam-app\n  description: sam-appã®API\n  version: 1.0.0\n\npaths:\n  /hello:\n    get:\n      summary: GETã‚µãƒ³ãƒ—ãƒ«\n      description: GETã®ã‚µãƒ³ãƒ—ãƒ«ã§ã™\n      responses:\n        '200':\n          description: æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Success'\n      x-amazon-apigateway-integration:\n        credentials:\n          Fn::Sub: ${ApiRole.Arn}\n        uri:\n          Fn::Sub: arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/${GetFunction.Arn}/invocations\n        passthroughBehavior: when_no_templates\n        httpMethod: POST\n        type: aws_proxy\n    post:\n      summary: POSTã‚µãƒ³ãƒ—ãƒ«\n      description: POSTã®ã‚µãƒ³ãƒ—ãƒ«ã§ã™\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              properties:\n                name:\n                  description: åå‰\n                  type: string\n                age:\n                  description: å¹´é½¢\n                  type: integer\n                  format: int32\n              required:\n                - name\n                - age\n      responses:\n        '200':\n          description: æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/Success'\n      x-amazon-apigateway-integration:\n        credentials:\n          Fn::Sub: ${ApiRole.Arn}\n        uri:\n          Fn::Sub: arn:aws:apigateway:${AWS::Region}:lambda:path/2015-03-31/functions/${PostFunction.Arn}/invocations\n        passthroughBehavior: when_no_templates\n        httpMethod: POST\n        type: aws_proxy\n\ncomponents:\n  schemas:\n    Success:\n      description: æˆåŠŸã®å ´åˆã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹\n      type: object\n      properties:\n        message:\n          type: string\n      required:\n        - message\n\n````\n\n````go\npackage main\n\nimport (\n\t\"encoding/json\"\n\t\"flag\"\n\t\"fmt\"\n\t\"html/template\"\n\t\"io\"\n\t\"log\"\n\t\"sort\"\n\t\"strings\"\n\n\t\"github.com/getkin/kin-openapi/jsoninfo\"\n\t\"github.com/getkin/kin-openapi/openapi3\"\n)\n\n// x-amazon-apigateway-integration ã®å‹å®šç¾©\ntype apigateway struct {\n\tType string `yaml:\"type\" json:\"type\"`\n\tUri  cfn    `yaml:\"uri\" json:\"uri\"`\n}\n\ntype cfn struct {\n\tFnSub string `yaml:\"Fn::Sub\" json:\"Fn::Sub\"`\n}\n\n// template.yaml ã«è¨˜è¼‰ã™ã‚‹Lambda Functionã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ\nconst lamdbaFunctionTemplateString = `{{ .FunctionName }}:\n  Type: AWS::Serverless::Function\n  Properties:\n    FunctionName: !Sub {{ .OperationId }}\n    Description: !Sub \"{{ .Description }}\"\n    CodeUri: {{ .ExecutablePath }}\n    Role: !Sub ${Role}\n    Events:\n      CatchAll:\n        Type: Api\n        Properties:\n          Path: {{ .Path }}\n          Method: GET\n          RestApiId: !Ref MyAPI`\n\ntype lambdaFunctionTemplate struct {\n\tFunctionName   string\n\tOperationId    string\n\tDescription    string\n\tExecutablePath string\n\tPath           string\n}\n\nfunc extractFunctionName(apigw apigateway) string {\n\turi := apigw.Uri.FnSub\n\tarn := strings.Split(uri, \"/\")[3]\n\treturn strings.ReplaceAll(strings.Trim(arn, \"${}\"), \".Arn\", \"\")\n}\n\nfunc extractExecutablePath(functionName string) string {\n\trfn := []rune(strings.ReplaceAll(functionName, \"Function\", \"\"))\n\treturn strings.ToLower(string(rfn[0])) + string(rfn[1:])\n}\n\nfunc makeTemplateValue(path string, opearation *openapi3.Operation) lambdaFunctionTemplate {\n\tdec, err := jsoninfo.NewObjectDecoder(opearation.Extensions[\"x-amazon-apigateway-integration\"].(json.RawMessage))\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\tvar apigw apigateway\n\tif err = opearation.DecodeWith(dec, \u0026apigw); err != nil {\n\t\tpanic(err)\n\t}\n\n\tfunctionName := extractFunctionName(apigw)\n\texecutablePath := extractExecutablePath(functionName)\n\n\treturn lambdaFunctionTemplate{\n\t\tFunctionName:   functionName,\n\t\tOperationId:    opearation.OperationID,\n\t\tDescription:    opearation.Description,\n\t\tExecutablePath: executablePath,\n\t\tPath:           path,\n\t}\n}\n\nfunc convertToTemplateValues(spec *openapi3.T) []lambdaFunctionTemplate {\n\tpaths := make([]string, 0, len(spec.Paths))\n\tfor path := range spec.Paths {\n\t\tpaths = append(paths, path)\n\t}\n\tsort.Strings(paths)\n\n\ttemplates := make([]lambdaFunctionTemplate, 0, len(paths))\n\n\tfor _, path := range paths {\n\t\tv := spec.Paths[path]\n\n\t\toperations := make([]*openapi3.Operation, 0)\n\t\toperations = append(operations, v.Connect, v.Delete, v.Get, v.Head, v.Options, v.Patch, v.Post, v.Put, v.Trace)\n\n\t\tfor _, o := range operations {\n\t\t\tif o != nil {\n\t\t\t\ttemplateValue := makeTemplateValue(path, o)\n\t\t\t\ttemplates = append(templates, templateValue)\n\t\t\t}\n\t\t}\n\t}\n\n\treturn templates\n}\n\nfunc outTemplate(writer io.Writer, templateValues []lambdaFunctionTemplate) {\n\tfor _, v := range templateValues {\n\t\ttmpl, err := template.New(\"lambda\").Parse(lamdbaFunctionTemplateString)\n\t\tif err != nil {\n\t\t\tlog.Fatal(err)\n\t\t}\n\n\t\tif err := tmpl.Execute(writer, v); err != nil {\n\t\t\tlog.Fatal(err)\n\t\t}\n\t\twriter.Write([]byte(\"\\n\"))\n\t}\n\n}\n\nfunc main() {\n\tvar filePath string\n\tflag.StringVar(\u0026filePath, \"f\", \"openapi.yaml\", \"OpenAPI specification file path ex.) openapi.yaml\")\n\n\tflag.Parse()\n\n\tloader := openapi3.NewLoader()\n\n\tspec, err := loader.LoadFromFile(filePath)\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\ttemplates := convertToTemplateValues(spec)\n\twriter := new(strings.Builder)\n\n\toutTemplate(writer, templates)\n\n\tfmt.Println(writer.String())\n\n}\n````\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["OpenAPI","Lambda"]},"/note/OpenAPI%E4%BB%95%E6%A7%98%E6%9B%B8%E3%81%8B%E3%82%89Go%E3%81%AE%E6%A7%8B%E9%80%A0%E4%BD%93%E3%82%92%E4%BD%9C%E3%82%8B":{"title":"OpenAPIä»•æ§˜æ›¸ã‹ã‚‰Goã®æ§‹é€ ä½“ã‚’ä½œã‚‹","content":"\n\u003chttps://github.com/OpenAPITools/openapi-generator\u003e\n\n\u003chttps://github.com/deepmap/oapi-codegen\u003e\n\n````shell\n$ oapi-codegen -generate \"types,server\" -package \"openapi\" openapi.yaml \u003e openapi.gen.go\n````\n\n## oapi-codegen ã§ç”Ÿæˆã—ãŸstructã«URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ãƒã‚¤ãƒ³ãƒ‰ã§ããªã„\n\n\u003chttps://github.com/deepmap/oapi-codegen/issues/500\u003e\n\n`oapi-codegen -generate \"types\" -package \"openapi\" openapi.yaml` ã§ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ãŒç”Ÿæˆã•ã‚Œã‚‹\n\n````\ntype FindPetsParams struct {\n\t// tags to filter by\n\tTags *[]string `json:\"tags,omitempty\"`\n\n\t// maximum number of results to return\n\tLimit *int32 `json:\"limit,omitempty\"`\n}\n````\n\nã“ã‚Œã‚’echoã®ãƒ¡ã‚½ãƒƒãƒ‰ã§Bindã™ã‚‹ã¨ã“ã†ãªã‚‹\n\n````\nfunc ParseFilter(c *echo.Context) error {\n\tf := tasksapi.FindPetsParams{}\n\tif err := c.Bind(\u0026f); err != nil {\n\t\treturn f, err\n\t}\n\n    fmt.Printf(\"param: %v\\n\", f) // =\u003e fieldã«å€¤ãŒã‚»ãƒƒãƒˆã•ã‚Œãªã„\n\n\treturn f, nil\n}\n````\n\nParamã®structã‚¿ã‚°ã«queryãŒã¤ã„ã¦ã„ã‚Œã°Bindã•ã‚Œã‚‹\n\n````\ntype FindPetsParams struct {\n\t// tags to filter by\n\tTags *[]string `query:\"tags,omitempty\"`\n\n\t// maximum number of results to return\n\tLimit *int32 `query:\"limit,omitempty\"`\n}\n````\n\ngenerate ã« server ã‚’æŒ‡å®šã™ã‚‹ã¨ã€ã“ã“ã‚’è§£æ±ºã—ãŸã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã—ã¦ãã‚Œã‚‹ã®ã ãŒã€\nServerInterfaceãŒå…¨éƒ¨ã®APIã‚’ã²ã¨ã¤ã®interfaceã§æŒã£ã¡ã‚ƒã£ã¦ã„ã‚‹ã®ã§ã€ãªã‚“ã‹å¾®å¦™ã ãªã£ã¦æ€ã£ã¡ã‚ƒã†\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["Go"]},"/note/OpenAPI-Generator":{"title":"OpenAPI Generator","content":"\n\\#OpenAPI\n\n---\n\n## ä¼ãˆãŸã„ã“ã¨\n\n* OpenAPI(Swagger)ã‚’ä½¿ã£ã¦ã€APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ã‚³ãƒ¼ãƒ‰ã‚’è‡ªå‹•ç”Ÿæˆã—ã‚ˆã†\n  * ã‚³ãƒ¼ãƒ‰ã¨ä»•æ§˜æ›¸ã«é½Ÿé½¬ãŒãªããªã‚‹\n  * Nullable/NonNullã€ã‚¹ãƒšãƒ«ãƒŸã‚¹ã€APIã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å¤‰æ›´ã¸ã®è¿½å¾“ãŒç¢ºå®Ÿ\u0026ç°¡å˜ã«ãªã‚‹\n* æœ€åˆæœŸã«å°å…¥ã™ã‚‹ã»ã†ãŒåŠ¹æœãŒé«˜ãã€é€”ä¸­ã‹ã‚‰å°å…¥ã™ã‚‹ã®ã¯é›£ã—ã„â€¦\n* ã‚³ãƒãƒ³ãƒ‰ä¾‹\n\n````shell\n$ docker run --rm -v \"${PWD}:/local\" openapitools/openapi-generator-cli generate\n    -i https://petstore3.swagger.io/api/v3/openapi.json\n    -g typescript-axios -o /local/client\n$ ls client\napi.ts  base.ts  configuration.ts  git_push.sh  index.ts\n````\n\n---\n\n## ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰é–‹ç™ºæ™‚ã«å›°ã‚‹ã“ã¨\n\n* APIã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‹ã‚’å®šç¾©ã™ã‚‹ã®ãŒæ‰‹é–“\n  * æ‰‹ã§æ›¸ã„ãŸã‚Šã€JSONã‹ã‚‰å¤‰æ›ã—ãŸã‚Š\n* ä»•æ§˜å¤‰æ›´ã«è¿½å¾“ã—ãªã‘ã‚Œã°ã„ã‘ãªã„\n* Nullable/NonNullã®èªè­˜ãƒŸã‚¹\n\n---\n\n\u003c!-- _class: center --\u003e\n\nè‡ªå‹•ç”Ÿæˆã§ããªã„ã‹ :tired_face:\n\n---\n\n\u003c!-- _class: center --\u003e\n\nSwaggerä»•æ§˜æ›¸ã‹ã‚‰ä½œã‚ã† :bulb:\n\n---\n\n## OpenAPI(Swagger)\n\n* Swagger 3.0ã‹ã‚‰OpenAPIã«åå‰ãŒã‹ã‚ã£ã¦ã„ã‚‹\n* 2021/05/19ç¾åœ¨ã®æœ€æ–°ã¯ã€3.1.0\n  * \u003chttps://github.com/OAI/OpenAPI-Specification/blob/main/versions/3.1.0.md\u003e\n* RESTful APIã«é–¢ã™ã‚‹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©\n* å®šç¾©æ›¸ã¯JSONãƒ•ã‚¡ã‚¤ãƒ«ã‚„YAMLãƒ•ã‚¡ã‚¤ãƒ«\n\n---\n\n## OpenAPI Generator\n\n* OpenAPIã®ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã‹ã‚‰ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã§ãã‚‹\n* ç”Ÿæˆã§ãã‚‹è¨€èªãƒ»FWã¯å¤šæ•°ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹\n* åˆ©ç”¨æ–¹æ³•ãŒå¤šæ•°ç”¨æ„ã•ã‚Œã¦ã„ã‚‹\n  * CLI\n  * Maven Plugin\n\n---\n\n\u003cdiv class=\"chapter\"\u003eOpenAPI Generator\u003c/div\u003e\n\n### è©¦ã—ã¦ã¿ã‚‹\n\nã‚µãƒ³ãƒ—ãƒ«ã¨ã—ã¦å…¬é–‹ã•ã‚Œã¦ã„ã‚‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ã„ã¾ã™\n\n* Swagger UI: \u003chttps://petstore3.swagger.io/\u003e\n* ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«: \u003chttps://petstore3.swagger.io/api/v3/openapi.json\u003e\n\n---\n\n\u003cdiv class=\"chapter\"\u003eOpenAPI Generator\u003c/div\u003e\n\n### OpenAPI Generatorã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n\u003chttps://github.com/OpenAPITools/openapi-generator#1---installation\u003e\n\nã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ–¹æ³•ãŒå¤šæ•°ç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã®ã§ç’°å¢ƒã«åˆã‚ã›ã¦åˆ©ç”¨ã—ã¦ãã ã•ã„\n\n* :m: Maven Plugin\n* :package: npm\n* :beer: Homebrew\n* :whale: Docker\n\n---\n\n\u003cdiv class=\"chapter\"\u003eOpenAPI Generator\u003c/div\u003e\n\n### Dockerã‚’ä½¿ã£ã¦ç”Ÿæˆã™ã‚‹\n\nMavenã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«è‡ªå‹•ç”Ÿæˆã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹\n\n````shell\n$ cd \u003cãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆ\u003e\n$ docker run --rm -v \"${PWD}:/local\" openapitools/openapi-generator-cli generate\n    -i https://petstore3.swagger.io/api/v3/openapi.json\n    -g java -o /local/client\n\n# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã ã¨ã€src/main/java/org/openapitools/client ã«APIã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚„ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‹ãŒç”Ÿæˆã•ã‚Œã‚‹ \n$ ls src/main/java/org/openapitools/client\napi    ApiCallback.java   ApiResponse.java             JSON.java                 \nauth   ApiClient.java     Configuration.java           Pair.java                 \nmodel  ApiException.java  GzipRequestInterceptor.java  ProgressRequestBody.java  \n````\n\n* `-i`: ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹(URLå¯)\n* `-g`: ã©ã®è¨€èªã€FWã‚’å¯¾è±¡ã«ã™ã‚‹ã‹\n* `-o`: ç”Ÿæˆå…ˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª\n\n---\n\n\u003cdiv class=\"chapter\"\u003eOpenAPI Generator\u003c/div\u003e\n\n### ä½¿ã„æ–¹\n\n````java\nimport org.openapitools.client.ApiClient;\nimport org.openapitools.client.ApiException;\nimport org.openapitools.client.api.PetApi;\nimport org.openapitools.client.model.Pet;\n\npublic class Repository {\n    public Pet get() {\n        // å†…éƒ¨çš„ã«ã¯okhttp3ã‚’ä½¿ã£ã¦ã„ã‚‹ã€‚è¨­å®šã§å¤‰æ›´å¯èƒ½ã€‚\n        ApiClient apiClient = new ApiClient();\n        PetApi petApi = new PetApi(apiClient);\n        try {\n            Pet petById = petApi.getPetById(1L);\n            return petById;\n        } catch (ApiException e) { e.printStackTrace(); }\n    }\n}\n````\n\n---\n\n\u003cdiv class=\"chapter\"\u003eOpenAPI Generator\u003c/div\u003e\n\n### ç”Ÿæˆå¯¾è±¡è¨€èªãƒ»FWä¸€è¦§\n\n`-g` ã§æŒ‡å®šã§ãã‚‹generatorã®ä¸€è¦§ã¯ã“ã¡ã‚‰\n\n\u003chttps://github.com/OpenAPITools/openapi-generator/blob/master/docs/generators.md\u003e\n\ngeneratorã®è¨­å®šå€¤ã‚‚ã“ã¡ã‚‰ã‹ã‚‰\n\n---\n\n## TypeScriptã®ä¾‹\n\npackage.json\n\n````json\n{\n\n  \"scripts\": {\n    \"openapi-generate\": \"rm -f client/*.ts \u0026\u0026 \n        TS_POST_PROCESS_FILE='yarn prettier --write'\n        openapi-generator-cli generate \n        -i https://petstore3.swagger.io/api/v3/openapi.json\n        -g typescript-axios \n        -o client \n        --additional-properties=disallowAdditionalPropertiesIfNotPresent=false,modelPropertyNaming=camelCase,supportsES6=true,useSingleRequestParameter=true\n        --enable-post-process-file\"\n  }\n  // ...\n}\n````\n\n`yarn openapi-generate` ã§ç”Ÿæˆã•ã‚Œã‚‹\n\n* `TS_POST_PROCESS_FILE='yarn prettier --write'`: å¾Œå‡¦ç†ã‚’æŒ‡å®š(ã“ã“ã§ã¯ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ)\n* `--additional-properties=`: generatorç‹¬è‡ªã®è¨­å®š\n\n---\n\n## ãƒ¡ãƒªãƒƒãƒˆ :+1:\n\n* ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‹ã«é–“é•ã„ãŒãªã„\n* APIã®å¤‰æ›´ãŒã‚ã£ãŸã¨ãã«è¿½å¾“ãŒç°¡å˜\n* ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ã‚ˆã£ã¦å¤‰æ›´ã‚’æ¤œçŸ¥ã§ãã‚‹\n\n---\n\n## ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ :-1:\n\n### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ã‚³ãƒ¼ãƒ‰è¦ç´„ã«åˆã‚ãªã„ã‚³ãƒ¼ãƒ‰ãŒç”Ÿæˆã•ã‚Œã‚‹\n\n* è¨±å®¹ã™ã‚‹\n* [generator](https://github.com/OpenAPITools/openapi-generator/blob/master/docs/generators/typescript-axios.md) ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã‚ˆãèª­ã‚“ã§é ‘å¼µã‚‹\n\n### é€”ä¸­ã‹ã‚‰è‡ªå‹•ç”Ÿæˆã«å¤‰æ›´ã™ã‚‹ã®ã¯é›£ã—ã„(é€†ã‚‚ç„¶ã‚Š)\n\n* HTTPã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®å®Ÿè£…ã‚‚ç”Ÿæˆã•ã‚Œã‚‹ãŸã‚ã€ãã‚Œã«ä¾å­˜ã™ã‚‹\n* å‹å®šç¾©ã®ã¿ç”Ÿæˆã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã®ã§ã€ãã¡ã‚‰ã®ã¿ä½¿ç”¨ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹\n\n---\n\n\u003cdiv class=\"chapter\"\u003eãƒ‡ãƒ¡ãƒªãƒƒãƒˆ\u003c/div\u003e\n\n### ã‚¹ã‚­ãƒ¼ãƒå®šç¾©ã‚’ç”Ÿæˆã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å­¦ç¿’ã‚³ã‚¹ãƒˆ\n\n* ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§è¤‡é›‘ãªå®šç¾©ã‚’å®Ÿç¾ã—ã‚ˆã†ã¨ã™ã‚‹ã¨ãƒãƒã‚‹\n  * ãƒãƒªãƒ¢ãƒ¼ãƒ•ã‚£ã‚ºãƒ ã‚’è¡¨ç¾ã—ã‚ˆã†ã¨ã—ãŸã¨ãã«ã€oneOf/allOfãŒç‹™ã£ãŸã¨ãŠã‚Šã«å‡ºåŠ›ã•ã‚Œãšæ™‚é–“ãŒã‹ã‹ã£ãŸ :tired_face:\n* å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ‰‹å‹•ã§ä½œæˆã—ã€ã‚µãƒ¼ãƒãƒ¼ãƒ»ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆä¸¡æ–¹ã®ã‚³ãƒ¼ãƒ‰ã‚’ç”Ÿæˆã™ã‚‹æ–¹é‡ã«å¤‰ãˆã¦ã¿ã‚‹(ã‚¹ã‚­ãƒ¼ãƒé§†å‹•é–‹ç™º)\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["OpenAPI"]},"/note/OpenAPI-yaml%E3%82%92%E7%B7%A8%E9%9B%86%E3%81%99%E3%82%8B%E3%81%A8%E3%81%8D%E3%81%ABSwagger-Editor%E3%81%AA%E3%81%A9%E3%82%92%E4%BD%BF%E3%81%86":{"title":"OpenAPI yamlã‚’ç·¨é›†ã™ã‚‹ã¨ãã«Swagger Editorãªã©ã‚’ä½¿ã†","content":"\nOpenAPI specã‚’æ›¸ããƒ„ãƒ¼ãƒ«ã‚’ã„ãã¤ã‹èª¿ã¹ãŸ\n\n* vscodeã ã¨æ‹¡å¼µã‚’å…¥ã‚Œã¦ã‚‚ã„ã¾ã„ã¡è£œå®ŒãŒåŠ¹ã‹ãªã„\n* Intellij IDEAã® [OpenAPI Editor](https://plugins.jetbrains.com/plugin/12887-openapi-editor) ãŒä¸€ç•ªè‰¯ã•ãã†ã ãŒJetBrainsãƒ©ã‚¤ã‚»ãƒ³ã‚¹å¿…è¦\n* Stoplight Studioã¯ã„ã„ã‘ã©å‹æ‰‹ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‹ã‘ãŸã‚Šã™ã‚‹ã—é‡ã„ã€‚ä¼šå“¡ç™»éŒ²å¿…è¦\n* Swagger Editor ã¯è£œå®Œèãã‘ã©ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ç·¨é›†ã£ã¦ã®ãŒæ°—æŒã¡æ‚ªã„\n* Swagger Editorã‚’dockerã§ãƒ­ãƒ¼ã‚«ãƒ«ã«ç«‹ã¡ä¸Šã’ã¦ä½¿ã†ã®ãŒã„ã„ã®ã‹ãª\n\n## çµè«–\n\nã©ã¡ã‚‰ã‹ãŒè‰¯ã•ãã†ã€‚æ›¸ãã‚„ã™ã„ã®ã¯vimã§ã€è£œå®ŒåŠ¹ã‹ã›ãŸã‹ã£ãŸã‚‰Swagger Editor\n\n* Swagger Editor (OpenAPI 3.0.x) ã§æ›¸ã\n* Neovim + LSPã§æ›¸ã„ã¦ã€ReDocã§æç”»ã™ã‚‹\n\n## Swagger Editorã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«ç«‹ã¡ä¸Šã’ã‚‹\n\n````shell\n$ docker run -it --rm -p 8080:8080 -v $(pwd):/tmp -e SWAGGER_FILE=/tmp/openapi.yaml swaggerapi/swagger-editor\n````\n\nlocalhost:8080 ã§Swagger EditorãŒé–‹ã\n\nã“ã“ã§ç·¨é›†ã—ã¦ã‚‚ã€ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ›¸ãæ›ã‚ã‚‹ã‚ã‘ã§ã¯ãªã‹ã£ãŸã®ã§ã€ã„ã¡ã„ã¡ä¿å­˜ã—ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã§ä¸Šæ›¸ãã¨ã‹ãŒå¿…è¦\n\n### v5ã‚’ä½¿ã£ã¦ã¿ã‚‹\n\nv5ã¯ã¾ã å®‰å®šç‰ˆã˜ã‚ƒãªã„ãŒä½¿ã£ã¦ã¿ã‚‹\n\n````shell\ndocker run -d -p 8080:8080 -v $(pwd):/tmp swaggerapi/swagger-editor:next-v5\n````\n\nç”»é¢ã¯ã‚¹ãƒƒã‚­ãƒªã—ãŸãŒã€ãƒ•ã‚¡ã‚¤ãƒ«ãŒæŒ‡å®šã§ããªãã¦ã¾ã æ—©ã„ã‹ã‚‚\n\n## ReDocã§æç”»ã™ã‚‹\n\nSwagger Editorã¯[Swagger UI](https://swagger.io/tools/swagger-ui/)ã‚’æç”»ã«ä½¿ã†ãŒã€OAS 3.1.0ã«å¯¾å¿œã—ã¦ã„ãªã„ã€‚\nhttps://github.com/swagger-api/swagger-ui/issues/5891\n\nãã“ã§Redocã‚’ä½¿ã†\n\nhttps://hub.docker.com/r/redocly/redoc/\n\n````shell\n$ ls openapi.yaml\n$ docker run -it --rm -p 3000:80 -v $(pwd):/usr/share/nginx/html/swagger/ -e SPEC_URL=swagger/openapi.yaml redocly/redoc\n````\n\nlocalhost:3000 ã§é–‹ãã¨ã€æŒ‡å®šã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒæç”»ã•ã‚Œã¦ã„ã‚‹ã€‚\nãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ã‚‚ã—ã¦ãã‚Œã‚‹ã€‚\n\n(ç´ ç›´ã«3.0.xã«ã—ã¦swagger-uiã§è¡¨ç¤ºã™ã‚‹ã®ãŒç°¡å˜ãªæ°—ãŒã—ãŸ)\n\n## LSP + Neovim\n\nhttps://github.com/luizcorreia/spectral-language-server\nã“ã‚Œã¯ãƒ¡ãƒ³ãƒ†ã•ã‚Œã¦ãªãã¦ `npm i -g spectral-language-server`  ãŒã¾ãšå¤±æ•—ã—ãŸ\n\n### jsonla\n\nhttps://www.reddit.com/r/neovim/comments/r5l1ax/anyone_has_a_successful_experience_with_openapi/\n[b0o/SchemaStore.nvim: ğŸ› JSON schemas for Neovim](https://github.com/b0o/SchemaStore.nvim)\nã“ã‚ŒãŒç´¹ä»‹ã•ã‚Œã¦ãŸ\n\n````shell\n$ npm i -g vscode-langservers-extracted\n````\n\npacker\n\n````lua\nuse \"b0o/schemastore.nvim\"\n````\n\n````lua\n  settings = {\n    json = {\n      schemas = require('schemastore').json.schemas(),\n      validate = { enable = true },\n    },\n  },\n````\n\nã ã„ãŸã„è£œå®ŒãŒããã‚ˆã†ã«ãªã£ãŸãŒã€schemaã®ä¸­ã¯å…¨ç„¶è£œå®Œã•ã‚Œãš\nschemaã®ä¸­ã¯Intellijã§ã‚‚è£œå®Œã•ã‚Œãªã‹ã£ãŸã®ã§ã€ã™ã¹ã¦è£œå®Œãã‹ã›ãŸã‹ã£ãŸã‚‰Swagger Editorã«ãªã‚‹ã‹\n\n### yamlls\n\nnvim-lspã§yaml-language-serverã‚’ä½¿ã†ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹\nhttps://github.com/neovim/nvim-lspconfig/blob/e69978a39e4d3262b09ce6a316beff384f443e3b/doc/server_configurations.md#yamlls\nhttps://github.com/williamboman/mason-lspconfig.nvim/blob/3751eb5c56c67b51e68a1f4a0da28ae74ab771c1/doc/server-mapping.md\n\nã“ã¡ã‚‰ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§OpenAPI 3.1.0 ãŒçµ„ã¿è¾¼ã¾ã‚Œã¦ã„ãŸã®ã§yamlã®å ´åˆã¯ã“ã‚Œã§ååˆ†ã ã£ãŸ\n\nhttps://github.com/redhat-developer/yaml-language-server/blob/18ecc0e3d0ff6365e67b88127ac663351b0308de/src/languageservice/utils/schemaUrls.ts#L10\nhttps://github.com/SchemaStore/schemastore/blob/master/src/api/json/catalog.json\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["2023/01/05","OpenAPI"]},"/note/OpenObserve%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B":{"title":"OpenObserveã‚’ä½¿ã£ã¦ã¿ã‚‹","content":"\n{{\u003c card-link \"https://openobserve.ai\" \u003e}} \n\n[Kibana](note/Kibana.md) ã®ã‚ˆã†ã«ã€ãƒ­ã‚°ãƒ‡ãƒ¼ã‚¿ã®å¯è¦–åŒ–ã‚’è¡Œã†ãƒ„ãƒ¼ãƒ«ã§ã€ãƒ­ã‚°ã€ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã€ãƒˆãƒ¬ãƒ¼ã‚¹ã‚’ãƒšã‚¿ãƒã‚¤ãƒˆãƒ¬ãƒ™ãƒ«ã§æ‰±ã†ã“ã¨ãŒã§ãã‚‹ã€‚\nElasticsearchã‚„Datadogã¨æ¯”ã¹ã€10å€ç°¡å˜ã€140å€ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚³ã‚¹ãƒˆå®‰ã€ãƒã‚¤ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãªã©ã‚’è¬³ã£ã¦ã„ã‚‹ã€‚\nãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯[Rust](note/Rust.md)ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã¯[Vue.js](note/Vue.js.md)ã§æ›¸ã‹ã‚Œã¦ã„ã‚‹ã€‚\n\nçµ¶è³›é–‹ç™ºä¸­ã®ã‚ˆã†ãªã®ã§ã€ç ´å£Šçš„ãªå¤‰æ›´ãŒå…¥ã‚‹å¯èƒ½æ€§ãŒå…¨ç„¶ã‚ã‚Šãã†ã€‚\n\n## ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸\n\nOpenObserveã¯ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã›ãšã€åœ§ç¸®ã—ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã ã‘ã§ã¯ãªãS3ãªã©ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\nS3ã«ä¿å­˜ã™ã‚‹ã“ã¨ã§ã€å¤§å®¹é‡ã®EBSã‚’ç”¨æ„ã™ã‚‹å ´åˆã¨æ¯”ã¹ã¦ã‚³ã‚¹ãƒˆãŒä¸‹ã’ã‚‰ã‚Œã‚‹ã¨ã„ã†ã“ã¨ã®ã‚ˆã†ã§ã€HAæ§‹æˆã«ã—ãŸå ´åˆã§ã‚‚ã‚ãŒã‚‰ãªã„ã¨è¨€ã„ãŸã„ã‚‰ã—ã„ã€‚\n\n## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£\n\nhttps://openobserve.ai/docs/architecture/\n\n### å˜ä¸€ãƒãƒ¼ãƒ‰\n\n1å°ã®ãƒãƒ¼ãƒ‰ã§ã€2TB/day ã¾ã§ã®ãƒ‡ãƒ¼ã‚¿é‡ã§ã‚ã‚Œã°æ‰±ã†ã“ã¨ãŒã§ãã‚‹ã€‚\nå…¨ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã—ã€ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’etcdã€ãƒ‡ãƒ¼ã‚¿ã‚’S3ã«ä¿å­˜ã™ã‚‹ã¨ã„ã†ã“ã¨ã‚‚ã§ãã‚‹ã€‚\næ‹¡å¼µæ€§ã‚’è€ƒãˆã‚‹ã¨å˜ä¸€ãƒãƒ¼ãƒ‰ã§ã‚‚ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ä½¿ã£ãŸã»ã†ãŒã‚ˆã•ãã†ã€‚\n\n### HAæ§‹æˆ\n\nHAãƒ¢ãƒ¼ãƒ‰ã§ã¯ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ã¯ä½¿ç”¨ã§ããªã„ã®ã§ã€å¿…ãšS3ãªã©ãŒä¿å­˜å…ˆã«ãªã‚‹ã€‚\nä»¥ä¸‹è¤‡æ•°ã®å½¹å‰²ã®ãƒãƒ¼ãƒ‰ã§æ§‹æˆã•ã‚Œã‚‹ã€‚\n\n* Ingester: æŠ•å…¥ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ã‚’parquetãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã«å¤‰æ›ã—ã¦ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«ä¿å­˜ã™ã‚‹ã€‚å—ã‘å–ã£ãŸãƒ‡ãƒ¼ã‚¿ã‚’å³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã«è»¢é€ã™ã‚‹ã®ã§ã¯ãªãã€ã‚ã‚‹ç¨‹åº¦ãƒ­ãƒ¼ã‚«ãƒ«ã«è²¯ã‚ã¦ã‹ã‚‰è»¢é€ã™ã‚‹ã‚ˆã†ã ã€‚\n* Querier: ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œã™ã‚‹ã€‚\n* Compactor: è¤‡æ•°ã®å°ã•ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸€ã¤ã®å¤§ãã„ãƒ•ã‚¡ã‚¤ãƒ«ã«ãƒãƒ¼ã‚¸ã—ã¦ã€æ¤œç´¢ã®åŠ¹ç‡ã‚’ä¸Šã’ã‚‹\n* Router: ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ingesterã‚„querierã«åˆ†é…ã™ã‚‹ã€proxyã®å½¹å‰²ã€‚\n* AlertManager: å®šæœŸå®Ÿè¡Œã‚„ã‚¢ãƒ©ãƒ¼ãƒˆé€šçŸ¥\n\nãƒ‡ãƒ—ãƒ­ã‚¤ã¯ https://openobserve.ai/docs/ha_deployment/ ã‚’å‚ç…§ã€‚\nä»Šã®ã¨ã“ã‚ [Kubernetes](note/Kubernetes.md) ã«helmã§ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹æ‰‹é †ã®ã¿ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã€‚\n[EC2ã‚„ECSã§ã‚‚ã‚„ã‚Œãªãã¯ãªã„](https://discuss.openobserve.ai/kb/t/ha-deployment-on-aws-ecs-or-ec2/2K1d28) ãŒå…¬å¼æ‰‹é †ã¯ãªã„ã®ã§ã€è‡ªåˆ†ã§kubernetesã®ãƒãƒ‹ãƒ•ã‚§ã‚¹ãƒˆè¦‹ãªãŒã‚‰é ‘å¼µã‚‹ã—ã‹ãªã•ãã†ã€‚\n\n## ãƒ‡ãƒ¼ã‚¿æ‘‚å–(ingestion)\n\nhttps://openobserve.ai/docs/ingestion/logs/python/#python\n\nãƒ­ã‚°ã‚„ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã¯Fluent-bitã‚„Kinesis Firehoseã€curlãªã©ã•ã¾ã–ã¾ãªã‚½ãƒ¼ã‚¹ã‹ã‚‰HTTP APIã§æŠ•å…¥ã§ãã‚‹ã€‚\nã™ã§ã«æ§‹ç¯‰æ¸ˆã¿ã®ãƒ‡ãƒ¼ã‚¿æŠ•å…¥æ©Ÿæ§‹ãŒã‚ã‚Œã°ã€æŠ•å…¥å…ˆã‚’OpenObserveã«ã™ã‚Œã°ã‚ˆã•ãã†\n\n## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—(ã‚»ãƒ«ãƒ•ãƒ›ã‚¹ãƒˆ)\n\nhttps://openobserve.ai/docs/quickstart/\n\nDockerã§ç°¡å˜ã«èµ·å‹•ã§ãã‚‹\n\n````shell\nmkdir data\ndocker run -v $PWD/data:/data -e ZO_DATA_DIR=\"/data\" -p 5080:5080 -e ZO_ROOT_USER_EMAIL=\"root@example.com\" -e ZO_ROOT_USER_PASSWORD=\"Complexpass#123\" public.ecr.aws/zinclabs/openobserve:latest\n````\n\n=\u003e localhost:5080 ã§é–‹ã\n\nã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚‚ç”¨æ„ã—ã¦ãã‚Œã¦ã„ã‚‹ã®ã§ãã‚Œã‚’æŠ•å…¥ã™ã‚Œã°é–²è¦§ã§ãã‚‹\n\n````shell\ncurl -L https://zinc-public-data.s3.us-west-2.amazonaws.com/zinc-enl/sample-k8s-logs/k8slog_json.json.zip -o k8slog_json.json.zip\nunzip k8slog_json.json.zip\ncurl http://localhost:5080/api/default/default/_json -i -u \"root@example.com:Complexpass#123\"  -d \"@k8slog_json.json\"\n````\n\n## ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã™ã‚‹\n\næœ¬é¡Œã§ã¯ãªã„ãŒã€ä»Šå¾Œå½¹ç«‹ã¡ãã†ãªã®ã§fakeãƒ‡ãƒ¼ã‚¿ã‚’ã¤ãã£ã¦ã¿ã‚‹ã€‚\nfakeã®ä½œæˆã«ã¯ https://github.com/brianvoe/gofakeit ã‚’ä½¿ã£ãŸã€‚\n\n````go\npackage main\n\nimport (\n\t\"encoding/json\"\n\t\"fmt\"\n\t\"log\"\n\t\"math/rand\"\n\t\"time\"\n\n\t\"github.com/brianvoe/gofakeit/v6\"\n)\n\ntype accessLog struct {\n\tTimestamp    time.Time `fake:\"{daterange:2023-06-30T16:00:00,2023-06-30T16:59:59,yyyy-MM-ddTHH:mm:ss}\" format:\"2006-01-02T15:04:05\"`\n\tPath         string    `fake:\"{urlpath}\"`\n\tMethod       string    `fake:\"{httpmethod}\"`\n\tInstanceId   string    `fake:\"{regex:i-[a-f]{1}}\"`\n\tResponseTime int       `fake:\"{number:1500,3000}\"`\n\tStatus       int       `fake:\"{httpstatuscodesimple}\"`\n}\n\nfunc main() {\n\tfaker := gofakeit.NewUnlocked(0)\n\n\tgofakeit.AddFuncLookup(\"urlpath\", gofakeit.Info{\n\t\tCategory:    \"custom\",\n\t\tDescription: \"Path only\",\n\t\tExample:     \"/image\",\n\t\tOutput:      \"string\",\n\t\tGenerate: func(r *rand.Rand, m *gofakeit.MapParams, info *gofakeit.Info) (interface{}, error) {\n\t\t\treturn gofakeit.RandomString([]string{\"/example\", \"/image\", \"/hello\", \"/health\", \"/ping\", \"/login\", \"/account\", \"/route\", \"/spot\"}), nil\n\t\t},\n\t})\n\n\tlogs := make([]accessLog, 0)\n\tfor i := 0; i \u003c 5000; i++ {\n\t\tvar l accessLog\n\t\terr := faker.Struct(\u0026l)\n\t\tif err != nil {\n\t\t\tlog.Fatalln(err)\n\t\t}\n\t\tlogs = append(logs, l)\n\t}\n\n\tb, err := json.Marshal(logs)\n\tif err != nil {\n\t\tlog.Fatalln(err)\n\t}\n\n\tfmt.Println(string(b))\n}\n\n````\n\nå¤§é‡ã«ä½œã£ã¦ã¶ã£ã“ã‚“ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ¤œè¨¼\n\n````\nwhile true; do JSON=fake_$(date +%s).json; ./faker -count 10000 \u003e $JSON; curl http://localhost:5080/api/default/fake/_json -i -u \"root@example.com:Complexpass#123\"  -d \"@${JSON}\"; rm \"${JSON}\"; sleep 1; done\n````\n\n## HAæ§‹æˆã‚’Kubernetesã§å‹•ã‹ã™\n\n[Rancher Desktop](note/Rancher%20Desktop.md) ã® [Kubernetes](note/Kubernetes.md) ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã€HAæ§‹æˆã‚’è©¦ã—ã¦ã¿ã‚‹ã€‚\n\nHAæ§‹æˆã®å ´åˆã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãŒå¿…é ˆãªã®ã§ã€äº‹å‰ã« [MinIOã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã®kubernetesã§å‹•ã‹ã™](note/MinIOã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã®kubernetesã§å‹•ã‹ã™.md)\n==\u003e OpenObserveã®helmå†…ã«minioãŒå†…åŒ…ã•ã‚Œã¦ã„ãŸã®ã§ä¸è¦ã ã£ãŸã€‚ã€‚æ°—ã¥ãã®é…ã‹ã£ãŸ\n\nãã†ã—ãŸã‚‰helm chartãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã®ã§ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹\n\n{{\u003c card-link \"https://github.com/openobserve/openobserve-helm-chart/\" \u003e}}\n\nvalues.yaml\n\n````yaml\nserviceAccount:\n  # Annotations to add to the service account\n  annotations:\n    eks.amazonaws.com/role-arn: arn:aws:iam::12345353456:role/zo-s3-eks\n\nreplicaCount:\n  ingester: 1\n  querier: 1\n  router: 1\n  alertmanager: 1\n  compactor: 1\n\nminio:\n  enabled: true # if true then minio will be deployed as part of openobserve\n````\n\nãƒ‡ãƒ—ãƒ­ã‚¤\n\n````shell\nhelm --namespace openobserve -f values.yaml install --create-namespace o1 openobserve/openobserve\n\n````\n\nlocalhost:5080 ã§é–‹ã\n\n````shell\nkubectl --namespace openobserve port-forward svc/o1-openobserve-router 5080:5080\n````\n\nminioã®ä¸­èº«ç¢ºèª\n\n````shell\nkubectl run awscli -it --rm --image amazon/aws-cli --env=AWS_ACCESS_KEY_ID=rootuser --env=AWS_SECRET_ACCESS_KEY=rootpass123 --command -- sh\n\nsh-4.2$ aws --endpoint-url http://o1-minio-svc.openobserve.svc.cluster.local:9000 --no-verify-ssl s3 ls\n1-01-01 00:00:00    mysuperduperbucket\n````\n\n## HAæ§‹æˆã‚’Docker composeã§å‹•ã‹ã™\n\nhelmã§ãƒ‡ãƒ—ãƒ­ã‚¤ã•ã‚ŒãŸãƒªã‚½ãƒ¼ã‚¹ã‹ã‚‰ã€ã‚ã‚‹ç¨‹åº¦å‹•ãã‚ˆã†ã«Docker composeã«è½ã¨ã—è¾¼ã‚€ã€‚\n\n````yaml\nservices:\n  querier:\n    image: public.ecr.aws/zinclabs/openobserve:latest\n    expose:\n      - 5080\n      - 5081\n    restart: on-failure\n    depends_on:\n      - etcd-1\n      - etcd-2\n      - minio\n    environment:\n      - ZO_NODE_ROLE=querier\n      - OTEL_OTLP_HTTP_ENDPOINT=http://127.0.0.1:5080/api/nexus/traces\n      - RUST_BACKTRACE=1\n      - RUST_LOG=info\n      - ZO_BASE_URI=\n      - ZO_COLS_PER_RECORD_LIMIT=200\n      - ZO_COMPACT_BLOCKED_ORGS=\n      - ZO_COMPACT_DATA_RETENTION_DAYS=0\n      - ZO_COMPACT_ENABLED=true\n      - ZO_COMPACT_FAKE_MODE=false\n      - ZO_COMPACT_INTERVAL=60\n      - ZO_COMPACT_MAX_FILE_SIZE=2\n      - ZO_DATA_DIR=./data/\n      - ZO_DATA_STREAM_DIR=\n      - ZO_DATA_WAL_DIR=\n      - ZO_ETCD_ADDR=etcd-1:2379\n      - ZO_ETCD_CERT_FILE=\n      - ZO_ETCD_CLIENT_CERT_AUTH=false\n      - ZO_ETCD_COMMAND_TIMEOUT=5\n      - ZO_ETCD_CONNECT_TIMEOUT=2\n      - ZO_ETCD_DOMAIN_NAME=\n      - ZO_ETCD_KEY_FILE=\n      - ZO_ETCD_LOAD_PAGE_SIZE=10000\n      - ZO_ETCD_LOCK_WAIT_TIMEOUT=600\n      - ZO_ETCD_PASSWORD=\n      - ZO_ETCD_PREFIX=/zinc/observe/\n      - ZO_ETCD_TRUSTED_CA_FILE=\n      - ZO_ETCD_USER=\n      - ZO_FEATURE_FULLTEXT_ON_ALL_FIELDS=false\n      - ZO_FEATURE_PER_THREAD_LOCK=false\n      - ZO_FILE_EXT_JSON=.json\n      - ZO_FILE_EXT_PARQUET=.parquet\n      - ZO_FILE_MOVE_THREAD_NUM=0\n      - ZO_FILE_PUSH_INTERVAL=10\n      - ZO_GRPC_ORG_HEADER_KEY=zinc-org-id\n      - ZO_GRPC_PORT=5081\n      - ZO_GRPC_TIMEOUT=600\n      - ZO_HEARTBEAT_INTERVAL=30\n      - ZO_HTTP_IPV6_ENABLED=false\n      - ZO_HTTP_PORT=5080\n      - ZO_INSTANCE_NAME=\n      - ZO_JSON_LIMIT=209715200\n      - ZO_LOCAL_MODE=false\n      - ZO_LOCAL_MODE_STORAGE=disk\n      - ZO_LUA_FN_ENABLED=false\n      - ZO_MAX_FILE_RETENTION_TIME=10\n      - ZO_MAX_FILE_SIZE_ON_DISK=1\n      - ZO_MEMORY_CACHE_CACHE_LATEST_FILES=false\n      - ZO_MEMORY_CACHE_ENABLED=true\n      - ZO_MEMORY_CACHE_MAX_SIZE=0\n      - ZO_MEMORY_CACHE_RELEASE_SIZE=0\n      - ZO_METRICS_DEDUP_ENABLED=true\n      - ZO_METRICS_LEADER_ELECTION_INTERVAL=30\n      - ZO_METRICS_LEADER_PUSH_INTERVAL=15\n      - ZO_PARQUET_COMPRESSION=zstd\n      - ZO_PAYLOAD_LIMIT=209715200\n      - ZO_PROMETHEUS_HA_CLUSTER=cluster\n      - ZO_PROMETHEUS_HA_REPLICA=__replica__\n      - ZO_QUERY_THREAD_NUM=0\n      - ZO_ROUTE_TIMEOUT=600\n      - ZO_S3_BUCKET_NAME=mysuperduperbucket\n      - ZO_S3_BUCKET_PREFIX=mysuperduperbucket\n      - ZO_S3_PROVIDER=minio\n      - ZO_S3_REGION_NAME=us-east-1\n      - ZO_S3_SERVER_URL=http://minio:9000\n      - ZO_SKIP_SCHEMA_VALIDATION=false\n      - ZO_SLED_DATA_DIR=\n      - ZO_SLED_PREFIX=/zinc/observe/\n      - ZO_TELEMETRY=true\n      - ZO_TELEMETRY_URL=https://e1.zinclabs.dev\n      - ZO_TIME_STAMP_COL=_timestamp\n      - ZO_TRACING_ENABLED=false\n      - ZO_TRACING_HEADER_KEY=Authorization\n      - ZO_TRACING_HEADER_VALUE=Basic YWRtaW46Q29tcGxleHBhc3MjMTIz\n      - ZO_TS_ALLOWED_UPTO=5\n      - ZO_UI_ENABLED=true\n      - ZO_WAL_LINE_MODE_ENABLED=true\n      - ZO_WAL_MEMORY_MODE_ENABLED=false\n      - ZO_WIDENING_SCHEMA_EVOLUTION=false\n      - ZO_ROOT_USER_EMAIL=root@example.com\n      - ZO_ROOT_USER_PASSWORD=Complexpass#123\n      - ZO_S3_ACCESS_KEY=rootuser\n      - ZO_S3_SECRET_KEY=rootpass123\n\n  ingester:\n    image: public.ecr.aws/zinclabs/openobserve:latest\n    expose:\n      - 5080\n      - 5081\n    restart: on-failure\n    depends_on:\n      - etcd-1\n      - etcd-2\n      - minio\n    volumes:\n      - ./data:/data\n    environment:\n      - ZO_NODE_ROLE=ingester\n      - OTEL_OTLP_HTTP_ENDPOINT=http://127.0.0.1:5080/api/nexus/traces\n      - RUST_BACKTRACE=1\n      - RUST_LOG=info\n      - ZO_BASE_URI=\n      - ZO_COLS_PER_RECORD_LIMIT=200\n      - ZO_COMPACT_BLOCKED_ORGS=\n      - ZO_COMPACT_DATA_RETENTION_DAYS=0\n      - ZO_COMPACT_ENABLED=true\n      - ZO_COMPACT_FAKE_MODE=false\n      - ZO_COMPACT_INTERVAL=60\n      - ZO_COMPACT_MAX_FILE_SIZE=2\n      - ZO_DATA_DIR=./data/\n      - ZO_DATA_STREAM_DIR=\n      - ZO_DATA_WAL_DIR=\n      - ZO_ETCD_ADDR=etcd-1:2379\n      - ZO_ETCD_CERT_FILE=\n      - ZO_ETCD_CLIENT_CERT_AUTH=false\n      - ZO_ETCD_COMMAND_TIMEOUT=5\n      - ZO_ETCD_CONNECT_TIMEOUT=2\n      - ZO_ETCD_DOMAIN_NAME=\n      - ZO_ETCD_KEY_FILE=\n      - ZO_ETCD_LOAD_PAGE_SIZE=10000\n      - ZO_ETCD_LOCK_WAIT_TIMEOUT=600\n      - ZO_ETCD_PASSWORD=\n      - ZO_ETCD_PREFIX=/zinc/observe/\n      - ZO_ETCD_TRUSTED_CA_FILE=\n      - ZO_ETCD_USER=\n      - ZO_FEATURE_FULLTEXT_ON_ALL_FIELDS=false\n      - ZO_FEATURE_PER_THREAD_LOCK=false\n      - ZO_FILE_EXT_JSON=.json\n      - ZO_FILE_EXT_PARQUET=.parquet\n      - ZO_FILE_MOVE_THREAD_NUM=0\n      - ZO_FILE_PUSH_INTERVAL=10\n      - ZO_GRPC_ORG_HEADER_KEY=zinc-org-id\n      - ZO_GRPC_PORT=5081\n      - ZO_GRPC_TIMEOUT=600\n      - ZO_HEARTBEAT_INTERVAL=30\n      - ZO_HTTP_IPV6_ENABLED=false\n      - ZO_HTTP_PORT=5080\n      - ZO_INSTANCE_NAME=\n      - ZO_JSON_LIMIT=209715200\n      - ZO_LOCAL_MODE=false\n      - ZO_LOCAL_MODE_STORAGE=disk\n      - ZO_LUA_FN_ENABLED=false\n      - ZO_MAX_FILE_RETENTION_TIME=10\n      - ZO_MAX_FILE_SIZE_ON_DISK=1\n      - ZO_MEMORY_CACHE_CACHE_LATEST_FILES=false\n      - ZO_MEMORY_CACHE_ENABLED=true\n      - ZO_MEMORY_CACHE_MAX_SIZE=0\n      - ZO_MEMORY_CACHE_RELEASE_SIZE=0\n      - ZO_METRICS_DEDUP_ENABLED=true\n      - ZO_METRICS_LEADER_ELECTION_INTERVAL=30\n      - ZO_METRICS_LEADER_PUSH_INTERVAL=15\n      - ZO_PARQUET_COMPRESSION=zstd\n      - ZO_PAYLOAD_LIMIT=209715200\n      - ZO_PROMETHEUS_HA_CLUSTER=cluster\n      - ZO_PROMETHEUS_HA_REPLICA=__replica__\n      - ZO_QUERY_THREAD_NUM=0\n      - ZO_ROUTE_TIMEOUT=600\n      - ZO_S3_BUCKET_NAME=mysuperduperbucket\n      - ZO_S3_BUCKET_PREFIX=mysuperduperbucket\n      - ZO_S3_PROVIDER=minio\n      - ZO_S3_REGION_NAME=us-east-1\n      - ZO_S3_SERVER_URL=http://minio:9000\n      - ZO_SKIP_SCHEMA_VALIDATION=false\n      - ZO_SLED_DATA_DIR=\n      - ZO_SLED_PREFIX=/zinc/observe/\n      - ZO_TELEMETRY=true\n      - ZO_TELEMETRY_URL=https://e1.zinclabs.dev\n      - ZO_TIME_STAMP_COL=_timestamp\n      - ZO_TRACING_ENABLED=false\n      - ZO_TRACING_HEADER_KEY=Authorization\n      - ZO_TRACING_HEADER_VALUE=Basic YWRtaW46Q29tcGxleHBhc3MjMTIz\n      - ZO_TS_ALLOWED_UPTO=5\n      - ZO_UI_ENABLED=true\n      - ZO_WAL_LINE_MODE_ENABLED=true\n      - ZO_WAL_MEMORY_MODE_ENABLED=false\n      - ZO_WIDENING_SCHEMA_EVOLUTION=false\n      - ZO_ROOT_USER_EMAIL=root@example.com\n      - ZO_ROOT_USER_PASSWORD=Complexpass#123\n      - ZO_S3_ACCESS_KEY=rootuser\n      - ZO_S3_SECRET_KEY=rootpass123\n\n  router:\n    image: public.ecr.aws/zinclabs/openobserve:latest\n    ports:\n      - 5080:5080\n    restart: on-failure\n    depends_on:\n      - etcd-1\n      - etcd-2\n      - minio\n    expose:\n      - 5080\n      - 5081\n    environment:\n      - ZO_NODE_ROLE=router\n      - OTEL_OTLP_HTTP_ENDPOINT=http://127.0.0.1:5080/api/nexus/traces\n      - RUST_BACKTRACE=1\n      - RUST_LOG=info\n      - ZO_BASE_URI=\n      - ZO_COLS_PER_RECORD_LIMIT=200\n      - ZO_COMPACT_BLOCKED_ORGS=\n      - ZO_COMPACT_DATA_RETENTION_DAYS=0\n      - ZO_COMPACT_ENABLED=true\n      - ZO_COMPACT_FAKE_MODE=false\n      - ZO_COMPACT_INTERVAL=60\n      - ZO_COMPACT_MAX_FILE_SIZE=2\n      - ZO_DATA_DIR=./data/\n      - ZO_DATA_STREAM_DIR=\n      - ZO_DATA_WAL_DIR=\n      - ZO_ETCD_ADDR=etcd-1:2379\n      - ZO_ETCD_CERT_FILE=\n      - ZO_ETCD_CLIENT_CERT_AUTH=false\n      - ZO_ETCD_COMMAND_TIMEOUT=5\n      - ZO_ETCD_CONNECT_TIMEOUT=2\n      - ZO_ETCD_DOMAIN_NAME=\n      - ZO_ETCD_KEY_FILE=\n      - ZO_ETCD_LOAD_PAGE_SIZE=10000\n      - ZO_ETCD_LOCK_WAIT_TIMEOUT=600\n      - ZO_ETCD_PASSWORD=\n      - ZO_ETCD_PREFIX=/zinc/observe/\n      - ZO_ETCD_TRUSTED_CA_FILE=\n      - ZO_ETCD_USER=\n      - ZO_FEATURE_FULLTEXT_ON_ALL_FIELDS=false\n      - ZO_FEATURE_PER_THREAD_LOCK=false\n      - ZO_FILE_EXT_JSON=.json\n      - ZO_FILE_EXT_PARQUET=.parquet\n      - ZO_FILE_MOVE_THREAD_NUM=0\n      - ZO_FILE_PUSH_INTERVAL=10\n      - ZO_GRPC_ORG_HEADER_KEY=zinc-org-id\n      - ZO_GRPC_PORT=5081\n      - ZO_GRPC_TIMEOUT=600\n      - ZO_HEARTBEAT_INTERVAL=30\n      - ZO_HTTP_IPV6_ENABLED=false\n      - ZO_HTTP_PORT=5080\n      - ZO_INSTANCE_NAME=\n      - ZO_JSON_LIMIT=209715200\n      - ZO_LOCAL_MODE=false\n      - ZO_LOCAL_MODE_STORAGE=disk\n      - ZO_LUA_FN_ENABLED=false\n      - ZO_MAX_FILE_RETENTION_TIME=10\n      - ZO_MAX_FILE_SIZE_ON_DISK=1\n      - ZO_MEMORY_CACHE_CACHE_LATEST_FILES=false\n      - ZO_MEMORY_CACHE_ENABLED=true\n      - ZO_MEMORY_CACHE_MAX_SIZE=0\n      - ZO_MEMORY_CACHE_RELEASE_SIZE=0\n      - ZO_METRICS_DEDUP_ENABLED=true\n      - ZO_METRICS_LEADER_ELECTION_INTERVAL=30\n      - ZO_METRICS_LEADER_PUSH_INTERVAL=15\n      - ZO_PARQUET_COMPRESSION=zstd\n      - ZO_PAYLOAD_LIMIT=209715200\n      - ZO_PROMETHEUS_HA_CLUSTER=cluster\n      - ZO_PROMETHEUS_HA_REPLICA=__replica__\n      - ZO_QUERY_THREAD_NUM=0\n      - ZO_ROUTE_TIMEOUT=600\n      - ZO_S3_BUCKET_NAME=mysuperduperbucket\n      - ZO_S3_BUCKET_PREFIX=mysuperduperbucket\n      - ZO_S3_PROVIDER=minio\n      - ZO_S3_REGION_NAME=us-east-1\n      - ZO_S3_SERVER_URL=http://minio:9000\n      - ZO_SKIP_SCHEMA_VALIDATION=false\n      - ZO_SLED_DATA_DIR=\n      - ZO_SLED_PREFIX=/zinc/observe/\n      - ZO_TELEMETRY=true\n      - ZO_TELEMETRY_URL=https://e1.zinclabs.dev\n      - ZO_TIME_STAMP_COL=_timestamp\n      - ZO_TRACING_ENABLED=false\n      - ZO_TRACING_HEADER_KEY=Authorization\n      - ZO_TRACING_HEADER_VALUE=Basic YWRtaW46Q29tcGxleHBhc3MjMTIz\n      - ZO_TS_ALLOWED_UPTO=5\n      - ZO_UI_ENABLED=true\n      - ZO_WAL_LINE_MODE_ENABLED=true\n      - ZO_WAL_MEMORY_MODE_ENABLED=false\n      - ZO_WIDENING_SCHEMA_EVOLUTION=false\n      - ZO_ROOT_USER_EMAIL=root@example.com\n      - ZO_ROOT_USER_PASSWORD=Complexpass#123\n      - ZO_S3_ACCESS_KEY=rootuser\n      - ZO_S3_SECRET_KEY=rootpass123\n\n  compactor:\n    image: public.ecr.aws/zinclabs/openobserve:latest\n    restart: on-failure\n    depends_on:\n      - etcd-1\n      - etcd-2\n      - minio\n    expose:\n      - 5080\n      - 5081\n    environment:\n      - ZO_NODE_ROLE=compactor\n      - OTEL_OTLP_HTTP_ENDPOINT=http://127.0.0.1:5080/api/nexus/traces\n      - RUST_BACKTRACE=1\n      - RUST_LOG=info\n      - ZO_BASE_URI=\n      - ZO_COLS_PER_RECORD_LIMIT=200\n      - ZO_COMPACT_BLOCKED_ORGS=\n      - ZO_COMPACT_DATA_RETENTION_DAYS=0\n      - ZO_COMPACT_ENABLED=true\n      - ZO_COMPACT_FAKE_MODE=false\n      - ZO_COMPACT_INTERVAL=60\n      - ZO_COMPACT_MAX_FILE_SIZE=2\n      - ZO_DATA_DIR=./data/\n      - ZO_DATA_STREAM_DIR=\n      - ZO_DATA_WAL_DIR=\n      - ZO_ETCD_ADDR=etcd-1:2379\n      - ZO_ETCD_CERT_FILE=\n      - ZO_ETCD_CLIENT_CERT_AUTH=false\n      - ZO_ETCD_COMMAND_TIMEOUT=5\n      - ZO_ETCD_CONNECT_TIMEOUT=2\n      - ZO_ETCD_DOMAIN_NAME=\n      - ZO_ETCD_KEY_FILE=\n      - ZO_ETCD_LOAD_PAGE_SIZE=10000\n      - ZO_ETCD_LOCK_WAIT_TIMEOUT=600\n      - ZO_ETCD_PASSWORD=\n      - ZO_ETCD_PREFIX=/zinc/observe/\n      - ZO_ETCD_TRUSTED_CA_FILE=\n      - ZO_ETCD_USER=\n      - ZO_FEATURE_FULLTEXT_ON_ALL_FIELDS=false\n      - ZO_FEATURE_PER_THREAD_LOCK=false\n      - ZO_FILE_EXT_JSON=.json\n      - ZO_FILE_EXT_PARQUET=.parquet\n      - ZO_FILE_MOVE_THREAD_NUM=0\n      - ZO_FILE_PUSH_INTERVAL=10\n      - ZO_GRPC_ORG_HEADER_KEY=zinc-org-id\n      - ZO_GRPC_PORT=5081\n      - ZO_GRPC_TIMEOUT=600\n      - ZO_HEARTBEAT_INTERVAL=30\n      - ZO_HTTP_IPV6_ENABLED=false\n      - ZO_HTTP_PORT=5080\n      - ZO_INSTANCE_NAME=\n      - ZO_JSON_LIMIT=209715200\n      - ZO_LOCAL_MODE=false\n      - ZO_LOCAL_MODE_STORAGE=disk\n      - ZO_LUA_FN_ENABLED=false\n      - ZO_MAX_FILE_RETENTION_TIME=10\n      - ZO_MAX_FILE_SIZE_ON_DISK=1\n      - ZO_MEMORY_CACHE_CACHE_LATEST_FILES=false\n      - ZO_MEMORY_CACHE_ENABLED=true\n      - ZO_MEMORY_CACHE_MAX_SIZE=0\n      - ZO_MEMORY_CACHE_RELEASE_SIZE=0\n      - ZO_METRICS_DEDUP_ENABLED=true\n      - ZO_METRICS_LEADER_ELECTION_INTERVAL=30\n      - ZO_METRICS_LEADER_PUSH_INTERVAL=15\n      - ZO_PARQUET_COMPRESSION=zstd\n      - ZO_PAYLOAD_LIMIT=209715200\n      - ZO_PROMETHEUS_HA_CLUSTER=cluster\n      - ZO_PROMETHEUS_HA_REPLICA=__replica__\n      - ZO_QUERY_THREAD_NUM=0\n      - ZO_ROUTE_TIMEOUT=600\n      - ZO_S3_BUCKET_NAME=mysuperduperbucket\n      - ZO_S3_BUCKET_PREFIX=mysuperduperbucket\n      - ZO_S3_PROVIDER=minio\n      - ZO_S3_REGION_NAME=us-east-1\n      - ZO_S3_SERVER_URL=http://minio:9000\n      - ZO_SKIP_SCHEMA_VALIDATION=false\n      - ZO_SLED_DATA_DIR=\n      - ZO_SLED_PREFIX=/zinc/observe/\n      - ZO_TELEMETRY=true\n      - ZO_TELEMETRY_URL=https://e1.zinclabs.dev\n      - ZO_TIME_STAMP_COL=_timestamp\n      - ZO_TRACING_ENABLED=false\n      - ZO_TRACING_HEADER_KEY=Authorization\n      - ZO_TRACING_HEADER_VALUE=Basic YWRtaW46Q29tcGxleHBhc3MjMTIz\n      - ZO_TS_ALLOWED_UPTO=5\n      - ZO_UI_ENABLED=true\n      - ZO_WAL_LINE_MODE_ENABLED=true\n      - ZO_WAL_MEMORY_MODE_ENABLED=false\n      - ZO_WIDENING_SCHEMA_EVOLUTION=false\n      - ZO_ROOT_USER_EMAIL=root@example.com\n      - ZO_ROOT_USER_PASSWORD=Complexpass#123\n      - ZO_S3_ACCESS_KEY=rootuser\n      - ZO_S3_SECRET_KEY=rootpass123\n\n  minio:\n    image: quay.io/minio/minio:latest\n    container_name: example-minio\n    environment:\n      MINIO_ROOT_USER: rootuser\n      MINIO_ROOT_PASSWORD: rootpass123\n    volumes:\n      - minio:/data\n    command: server --address :9000 --console-address \":9001\" /data\n    ports:\n      - 9000:9000\n      - 9001:9001\n\n  etcd-1:\n    image: docker.io/bitnami/etcd:3.5.8-debian-11-r4\n    expose:\n      - 2379\n      - 2380\n    volumes:\n      - etcd1:/bitnami/etcd\n    environment:\n      - ETCD_NAME=etcd-1\n      - ETCD_DATA_DIR=/bitnami/etcd/data\n      - ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379\n      - ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380\n      - ETCD_ADVERTISE_CLIENT_URLS=http://etcd-1:2379\n      - ETCD_INITIAL_ADVERTISE_PEER_URLS=http://etcd-1:2380\n      - ETCD_INITIAL_CLUSTER_TOKEN=etcd-cluster-k8s\n      - ETCD_INITIAL_CLUSTER_STATE=new\n      - ETCD_INITIAL_CLUSTER=etcd-1=http://etcd-1:2380,etcd-2=http://etcd-2:2380\n      - ALLOW_NONE_AUTHENTICATION=yes\n  etcd-2:\n    image: docker.io/bitnami/etcd:3.5.8-debian-11-r4\n    expose:\n      - 2379\n      - 2380\n    volumes:\n      - etcd2:/bitnami/etcd\n    environment:\n      - ETCD_NAME=etcd-2\n      - ETCD_DATA_DIR=/bitnami/etcd/data\n      - ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379\n      - ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380\n      - ETCD_ADVERTISE_CLIENT_URLS=http://etcd-2:2379\n      - ETCD_INITIAL_ADVERTISE_PEER_URLS=http://etcd-2:2380\n      - ETCD_INITIAL_CLUSTER_TOKEN=etcd-cluster-k8s\n      - ETCD_INITIAL_CLUSTER_STATE=new\n      - ETCD_INITIAL_CLUSTER=etcd-1=http://etcd-1:2380,etcd-2=http://etcd-2:2380\n      - ALLOW_NONE_AUTHENTICATION=yes\n\nvolumes:\n  minio:\n  etcd1:\n  etcd2:\n````\n\n=\u003e `docker compose up -d` ã§å‹•ã„ãŸ\n\n## ã‚·ãƒ³ã‚°ãƒ«ãƒãƒ¼ãƒ‰+S3ã§å‹•ã‹ã™\n\nã‚·ãƒ³ã‚°ãƒ«ãƒãƒ¼ãƒ‰(ä¸€ã¤ã®ã‚³ãƒ³ãƒ†ãƒŠã§å…¨æ©Ÿèƒ½ã‚’å‹•ã‹ã™)ãƒ¢ãƒ¼ãƒ‰ã§ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã¯S3ã‚’ä½¿ã£ãŸå ´åˆã®å®Ÿè¡Œä¾‹\n\n````yaml\nservices:\n  app:\n    image: public.ecr.aws/zinclabs/openobserve:latest\n    ports:\n      - 5601:5601\n    depends_on:\n      etcd-1:\n        condition: service_healthy\n      etcd-2:\n        condition: service_healthy\n    volumes:\n      - ./data:/data\n      - ./awsconfig:/root/.aws/config\n    environment:\n      - ZO_DATA_DIR=/data\n      - ZO_HTTP_PORT=5601\n      - ZO_ROOT_USER_EMAIL=root@example.com\n      - ZO_ROOT_USER_PASSWORD=Complexpass#123\n      - ZO_S3_REGION_NAME=ap-northeast-1\n      - ZO_S3_BUCKET_NAME=mybucket\n      - ZO_MAX_FILE_SIZE_ON_DISK=50\n      - ZO_MAX_FILE_RETENTION_TIME=10\n      - ZO_LOCAL_MODE=false\n      - ZO_ETCD_ADDR=etcd-1:2379\n      - ZO_PROMETHEUS_ENABLED=true\n\n  etcd-1:\n    image: docker.io/bitnami/etcd:3.5.8-debian-11-r4\n    ports:\n      - 2379:2379\n      - 2380:2380\n    expose:\n      - 2379\n      - 2380\n    volumes:\n      - etcd1:/bitnami/etcd\n    healthcheck:\n      test: \"etcdctl endpoint health\"\n      interval: 10s\n      timeout: 10s\n      retries: 3\n      start_period: 10s\n    environment:\n      - ETCD_NAME=etcd-1\n      - ETCD_DEBUG=true\n      - ETCD_DATA_DIR=/bitnami/etcd/data\n      - ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379\n      - ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380\n      - ETCD_ADVERTISE_CLIENT_URLS=http://etcd-1:2379\n      - ETCD_INITIAL_ADVERTISE_PEER_URLS=http://etcd-1:2380\n      - ETCD_INITIAL_CLUSTER_TOKEN=etcd-cluster-k8s\n      - ETCD_INITIAL_CLUSTER_STATE=new\n      - ETCD_INITIAL_CLUSTER=etcd-1=http://etcd-1:2380,etcd-2=http://etcd-2:2380\n      - ALLOW_NONE_AUTHENTICATION=yes\n  etcd-2:\n    image: docker.io/bitnami/etcd:3.5.8-debian-11-r4\n    expose:\n      - 2379\n      - 2380\n    volumes:\n      - etcd2:/bitnami/etcd\n    healthcheck:\n      test: \"etcdctl endpoint health\"\n      interval: 10s\n      timeout: 10s\n      retries: 3\n      start_period: 10s\n    environment:\n      - ETCD_NAME=etcd-2\n      - ETCD_DEBUG=true\n      - ETCD_DATA_DIR=/bitnami/etcd/data\n      - ETCD_LISTEN_CLIENT_URLS=http://0.0.0.0:2379\n      - ETCD_LISTEN_PEER_URLS=http://0.0.0.0:2380\n      - ETCD_ADVERTISE_CLIENT_URLS=http://etcd-2:2379\n      - ETCD_INITIAL_ADVERTISE_PEER_URLS=http://etcd-2:2380\n      - ETCD_INITIAL_CLUSTER_TOKEN=etcd-cluster-k8s\n      - ETCD_INITIAL_CLUSTER_STATE=new\n      - ETCD_INITIAL_CLUSTER=etcd-1=http://etcd-1:2380,etcd-2=http://etcd-2:2380\n      - ALLOW_NONE_AUTHENTICATION=yes\n\nvolumes:\n  etcd1:\n  etcd2:\n````\n\n### æ³¨æ„ç‚¹\n\n* ã‚·ãƒ³ã‚°ãƒ«ãƒãƒ¼ãƒ‰ã ã¨ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ‡ã‚£ã‚¹ã‚¯ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã€ `ZO_LOCAL_MODE=false` ã‚’è¨­å®šã—ãŸã€‚\n  * ã“ã®ã¨ãã€ã‚³ãƒ³ãƒ†ãƒŠã« `~/.aws/config` ãŒå­˜åœ¨ã—ãªã„ã¨ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã£ãŸãŸã‚ã€ `./awsconfig:/root/.aws/config` ã‚’ãƒã‚¦ãƒ³ãƒˆã—ãŸ (https://github.com/openobserve/openobserve/issues/1099)\n  * awsconfigã®ä¸­èº«ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦ã€EC2ã®instance profileãŒä½¿ã‚ã‚Œã‚‹ã‚ˆã†ã«ã—ãŸã€‚ACCESS_KEYã‚„SECRETã§ã‚‚ã„ã„ã€‚\n\n````\n[default]\nregion = ap-northeast-1\ncredential_source=Ec2InstanceMetadata\n````\n\n## Elasticsearchã®APIã§ãƒ‡ãƒ¼ã‚¿æŠ•å…¥ã™ã‚‹\n\nElasticsearchã¨ã‚³ãƒ³ãƒ‘ãƒã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å‚™ãˆã¦ãŠã‚Šã€ `/api/{organization}/_bulk` ã®APIã§æŠ•å…¥ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\n\nhttps://openobserve.ai/docs/api/ingestion/logs/bulk/\n\nES8ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ(https://github.com/elastic/go-elasticsearch)ã‚’ä½¿ã£ã¦ä½œæˆã™ã‚‹\n\n````go\npackage main\n\nimport (\n\t\"bufio\"\n\t\"bytes\"\n\t\"context\"\n\t\"encoding/json\"\n\t\"fmt\"\n\t\"log\"\n\t\"os\"\n\n\t\"github.com/elastic/go-elasticsearch/v8\"\n\t\"github.com/elastic/go-elasticsearch/v8/esutil\"\n)\n\nfunc newElasticsearchBulkIndexer(ctx context.Context) (esutil.BulkIndexer, error) {\n\tes, err := elasticsearch.NewClient(elasticsearch.Config{\n\t\tUsername: \"root@example.com\",\n\t\tPassword: \"Complexpass#123\",\n\t\tAddresses: []string{\n\t\t\t\"http://localhost:5080/api/default\",\n\t\t},\n\t\tEnableDebugLogger: true,\n\t})\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\n\tindexer, err := esutil.NewBulkIndexer(esutil.BulkIndexerConfig{\n\t\tClient: es,\n\t})\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\n\treturn indexer, nil\n}\n\nfunc insert(filename string) error {\n\n\tctx := context.Background()\n\n\tindexer, err := newElasticsearchBulkIndexer(ctx)\n\tif err != nil {\n\t\treturn err\n\t}\n\n\tbody, err := os.ReadFile(filename)\n\tif err != nil {\n\t\treturn err\n\t}\n\n\tscanner := bufio.NewScanner(bytes.NewReader(body))\n\tlogs := make([]accessLog, 0)\n\tfor scanner.Scan() {\n\t\tlogs = append(logs, ParseLog(scanner.Text()))\n\t}\n\n\tfor _, v := range logs {\n\t\tjs, err := json.Marshal(v)\n\t\tif err != nil {\n\t\t\treturn err\n\t\t}\n\t\terr = indexer.Add(\n\t\t\tctx,\n\t\t\tesutil.BulkIndexerItem{\n\t\t\t\tAction: \"index\",\n\t\t\t\tIndex:  fmt.Sprintf(\"log-%s-%s\", \"mygroup1\", v.Datetime.Format(\"20060102\")),\n\t\t\t\tBody:   bytes.NewReader(js),\n\t\t\t},\n\t\t)\n\t\tif err != nil {\n\t\t\treturn err\n\t\t}\n\n\t}\n\n\tfmt.Printf(\"Stats: %+v\\n\", indexer.Stats())\n\tif err := indexer.Close(ctx); err != nil {\n\t\treturn err\n\t}\n\n\treturn nil\n}\n\nfunc main() {\n\tif err := insert(\"testdata.txt\"); err != nil {\n\t\tlog.Fatalf(\"%v\", err)\n\t}\n}\n````\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["2023/06/29","Observability"]},"/note/OpenObserve%E3%82%92%E8%A4%87%E6%95%B0%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%A7%E8%B2%A0%E8%8D%B7%E5%88%86%E6%95%A3%E3%81%99%E3%82%8B":{"title":"OpenObserveã‚’è¤‡æ•°ã‚µãƒ¼ãƒãƒ¼ã§è² è·åˆ†æ•£ã™ã‚‹","content":"\n[OpenObserveã‚’ä½¿ã£ã¦ã¿ã‚‹](note/OpenObserveã‚’ä½¿ã£ã¦ã¿ã‚‹.md) ã§ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§ç«‹ã¦ãŸã‚Š1å°ã®EC2ä¸Šã§å‹•ã‹ã™æ‰‹é †ãŒã‚ã‹ã£ãŸã€‚\nè² è·åˆ†æ•£ã—ãŸã„å ´åˆã„ã¾ã®ã¨ã“ã‚[Kubernetes](note/Kubernetes.md)å‰æã¨ãªã£ã¦ã„ã‚‹ã®ã ãŒã€k8sè‡ªä½“ã®é‹ç”¨ã‚‚å¤§å¤‰ãªã®ã§EC2åŒå£«ã§é€šä¿¡ã—ãŸã„ã€‚\n\n## HAæ§‹æˆã§ãƒãƒ¼ãƒ‰åŒå£«ã§é€šä¿¡ã™ã‚‹ä»•çµ„ã¿\n\nOpenObserveã¯èµ·å‹•æ™‚ã«ç’°å¢ƒå¤‰æ•° `ZO_NODE_ROLE` ã®å€¤ã‚’å…ƒã«è‡ªèº«ã®å½¹å‰²ã‚’æ±ºã‚ã¦ã„ã‚‹ã€‚\nèµ·å‹•æ™‚ã« [etcd](note/etcd.md) ã«è‡ªèº«ã®æƒ…å ±ã‚’ç™»éŒ²ã—ã¦ã„ã‚‹ã€‚\n`etcdctl get '/zinc/observe/nodes' --prefix | awk '{if (NR%2) ORS=\"\\t\"; else ORS=\"\\n\"; print}'`\nã§ç¢ºèªã§ãã‚‹ã€‚\n","lastmodified":"2023-07-29T08:18:43.031497454Z","tags":["2023/06/29","Observability"]},"/note/PlantUML":{"title":"PlantUML","content":"\n* [plantuml/plantuml: Generate UML diagram from textual description](https://github.com/plantuml/plantuml)\n* [ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ UML ãŒæ›¸ã‘ã‚‹ã€ã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®ãƒ„ãƒ¼ãƒ«](https://plantuml.com/)\n* ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã§ UML å›³ã‚’è¨˜è¿°ã§ãã‚‹\n* æœ¬ä½“ã¯ Java ã§æ›¸ã‹ã‚Œã¦ã„ã¦ã€å˜ä¸€ã® jar ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è½ã¨ã—ã¦ãã¦ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰å®Ÿè¡Œã§ãã‚‹\n* Visual Studio Codeã‚„Intellijãªã©ã«ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãŒã‚ã‚‹\n* ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã¯ GPL v3\n  * [plantuml/license.txt at master Â· plantuml/plantuml](https://github.com/plantuml/plantuml/blob/master/license.txt)\n\nä»¥ä¸‹ã®ã‚ˆã†ãªå›³ãŒæ›¸ã‘ã‚‹\n\n* [ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³](https://plantuml.com/ja/sequence-diagram)\n* [ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹å›³](https://plantuml.com/ja/use-case-diagram)\n* [ã‚¯ãƒ©ã‚¹å›³](https://plantuml.com/ja/class-diagram)\n* [ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå›³](https://plantuml.com/ja/object-diagram)\n* [ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£å›³](https://plantuml.com/ja/activity-diagram-beta)ï¼ˆ[å¤ã„æ–‡æ³•ã¯ã“ã¡ã‚‰](https://plantuml.com/ja/activity-diagram-legacy)ï¼‰\n* [ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå›³](https://plantuml.com/ja/component-diagram)\n* [é…ç½®å›³](https://plantuml.com/ja/deployment-diagram)\n* [çŠ¶æ…‹é·ç§»å›³ï¼ˆã‚¹ãƒ†ãƒ¼ãƒˆãƒã‚·ãƒ³å›³ï¼‰](https://plantuml.com/ja/state-diagram)\n* [ã‚¿ã‚¤ãƒŸãƒ³ã‚°å›³](https://plantuml.com/ja/timing-diagram)\n\n[ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚µãƒ¼ãƒãƒ¼](http://www.plantuml.com/plantuml)ã§ç°¡å˜ã«è©¦ã™ã“ã¨ãŒå¯èƒ½\n\n## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n\u003chttps://plantuml.com/ja/faq-install\u003e\n\n\u003chttps://plantuml.com/ja/starting\u003e\n\nå¿…è¦ãªã‚‚ã®\n\n* Java\n* [Graphviz](https://plantuml.com/ja/graphviz-dot)\n  * ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ã¨ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£å›³ä»¥å¤–ã‚’ä½œã‚‹å ´åˆã«ã¯å¿…é ˆ\n* [PlantUMLæœ¬ä½“](http://sourceforge.net/projects/plantuml/files/plantuml.jar/download)\n\nMacã§ã‚ã‚Œã°brewã§\n\n````shell\nbrew install graphviz plantuml\n````\n\n## ä½¿ã„æ–¹\n\n`sequence.puml` ã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ\n\n````puml\n@startuml\nAlice -\u003e Bob: test\n@enduml\n````\n\nã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§å®Ÿè¡Œ\n\n````shell\nplantuml sequenceDiagram.txt\n````\n\n`sequenceDiagram.png` ãŒã§ãã‚‹\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["2023/05/04","PlantUML"]},"/note/PlantUML%E3%81%A7%E8%A6%8B%E3%81%9F%E7%9B%AE%E3%82%92%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA":{"title":"PlantUMLã§è¦‹ãŸç›®ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º","content":"\n\\#PlantUML\n\n[PlantUML](note/PlantUML.md) ã® skinparam ã§å›³ã®è¦‹ãŸç›®ã‚’å¤‰æ›´ã§ãã‚‹\n\n\u003chttps://plantuml.com/ja/skinparam\u003e\n\n````puml\n@startuml\nskinparam interface {\n  backgroundColor RosyBrown\n  borderColor orange\n}\n\nskinparam component {\n  FontSize 13\n  BackgroundColor\u003c\u003cApache\u003e\u003e Red\n  BorderColor\u003c\u003cApache\u003e\u003e #FF6655\n  FontName Courier\n  BorderColor black\n  BackgroundColor gold\n  ArrowFontName Impact\n  ArrowColor #FF6655\n  ArrowFontColor #777777\n}\n\n() \"Data Access\" as DA\n\nDA - [First Component]\n[First Component] ..\u003e () HTTP : use\nHTTP - [Web Server] \u003c\u003c Apache \u003e\u003e\n@enduml\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["PlantUML"]},"/note/PlantUML%E3%81%A7AWS%E6%A7%8B%E6%88%90%E5%9B%B3%E3%82%92%E6%9B%B8%E3%81%8F":{"title":"PlantUMLã§AWSæ§‹æˆå›³ã‚’æ›¸ã","content":"\n\\#PlantUML\n\n[PlantUML](note/PlantUML.md)\n\n[AWS Labsè£½ã®PlantUMLãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€AWS Icons for PlantUMLã€ã®ä½¿ã„æ–¹ - Qiita](https://qiita.com/0hm1/items/1b1e84ef1cc3dab5144d)\n\nAWS Labsã®ã‚¢ã‚¤ã‚³ãƒ³ã‚»ãƒƒãƒˆã‚’ä½¿ã†\n\u003chttps://github.com/awslabs/aws-icons-for-plantuml\u003e\n\nã‚¢ã‚¤ã‚³ãƒ³ä¸€è¦§\n\u003chttps://github.com/awslabs/aws-icons-for-plantuml/blob/main/AWSSymbols.md\u003e\n\n````puml\n@startuml ãƒ‘ã‚¹PUSHã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ\n\n' AWSã‚¢ã‚¤ã‚³ãƒ³\n!define AWSPuml https://raw.githubusercontent.com/awslabs/aws-icons-for-plantuml/v10.0/dist\n!includeurl AWSPuml/AWSCommon.puml\n!includeurl AWSPuml/Database/DynamoDB.puml\n!includeurl AWSPuml/Containers/ElasticContainerService.puml\n!includeurl AWSPuml/Compute/Lambda.puml\n!includeurl AWSPuml/ApplicationIntegration/APIGateway.puml\n!includeurl AWSPuml/ManagementGovernance/CloudWatch.puml\n!includeurl AWSPuml/Storage/SimpleStorageService.puml\n!includeurl AWSPuml/ApplicationIntegration/SimpleQueueService.puml\n!includeurl AWSPuml/ApplicationIntegration/SimpleNotificationService.puml\n!includeurl AWSPuml/GroupIcons/Cloud.puml\n!includeurl AWSPuml/GroupIcons/CorporateDataCenter.puml\n!includeurl AWSPuml/General/Traditionalserver.puml\n!includeurl AWSPuml/General/Mobileclient.puml\n!includeurl AWSPuml/General/Genericdatabase.puml\n\n' ãã®ä»–ã‚¢ã‚¤ã‚³ãƒ³é›†\n!define ICONURL https://raw.githubusercontent.com/tupadr3/plantuml-icon-font-sprites/v2.0.0\n!includeurl ICONURL/common.puml\n!includeurl ICONURL/font-awesome-5/jenkins.puml\n\n''''\n' è¦‹ãŸç›®ã®å®šç¾©\n''''\nleft to right direction\n\nskinparam component {\n  ArrowColor #Red\n}\n\n''''\n' ç™»å ´äººç‰©ã®å®šç¾©\n''''\n\nCloud(aws, cloud, \"AWS\") {\n  DynamoDB(db, DynamoDB, \"db\")\n  Lambda(lambda, Lambda, \"å®Ÿè¡Œlambda\")\n  SimpleQueueService(sqs, SQS, \"å®Ÿè¡Œã‚­ãƒ¥ãƒ¼\")\n  SimpleNotificationService(sns, SNS, \"ãƒ—ãƒƒã‚·ãƒ¥é…ä¿¡\")\n}\n\nnode \"FCM\" as fcm\nMobileclient(app, ã‚¢ãƒ—ãƒª, \"ã‚¢ãƒ—ãƒª\")\n\n' font-awesomeã®Jenkinsã‚¢ã‚¤ã‚³ãƒ³\nFA5_JENKINS(jenkins, jenkins)\n\n''''\n' ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå›³\n''''\njenkins --\u003e sqs: å®Ÿè¡Œå‘½ä»¤\nsqs --\u003e lambda: å®Ÿè¡Œ\nlambda \u003c-\u003e db: é…ä¿¡ãƒ‡ãƒ¼ã‚¿å–å¾—\nlambda --\u003e sns: é…ä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ç™»éŒ²\nsns --\u003e fcm: é…ä¿¡\nfcm --\u003e app: é€šçŸ¥\n\n@enduml\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["PlantUML"]},"/note/PlantUML%E3%81%AE%E5%8F%82%E8%80%83%E3%81%AB%E3%81%AA%E3%82%8B%E3%82%B5%E3%82%A4%E3%83%88":{"title":"PlantUMLã®å‚è€ƒã«ãªã‚‹ã‚µã‚¤ãƒˆ","content":"\n\\#PlantUML\n\n\u003chttps://crashedmind.github.io/PlantUMLHitchhikersGuide/aws/aws.html\u003e\n\nAWSæ§‹æˆå›³ã®æ›¸ãæ–¹ãŒå‚è€ƒã«ãªã‚‹\n\nè‰²ã‚’ã¤ã‘ãŸã‚Šã‚‚ã§ãã‚‹\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["PlantUML"]},"/note/Podman-Desktop%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%97%E3%81%A6Proxy%E3%82%92%E8%A8%AD%E5%AE%9A":{"title":"Podman Desktopã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦Proxyã‚’è¨­å®š","content":"\n[ä¼šç¤¾ã®ãƒ—ãƒ­ã‚­ã‚·ã®è£ã§Podman Desktopã‚’å®Ÿè¡Œã™ã‚‹ | ãƒ•ãƒ¥ãƒ¼ãƒãƒ£ãƒ¼æŠ€è¡“ãƒ–ãƒ­ã‚°](https://future-architect.github.io/articles/20221227a/)\n\nã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\nhttps://podman-desktop.io/docs/installation/macos-install\n\nå®Ÿè¡Œã—ã¦Installã‚’æŠ¼ã™ã¨ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒå‡ºã‚‹(0.10.0ã‹ã‚‰ã“ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼æ–¹å¼ã«å¤‰ã‚ã£ãŸ)\n\n![Pasted-image-20230105111356](note/Pasted-image-20230105111356.png)\n\nã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦Podmanã‚’èµ·å‹•ã™ã‚‹\n\n### podman cliã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\nPodman Desktopã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ãã†ãªã®ã ãŒè¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸã®ã§brewã§åˆ¥é€”ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n````shell\n$ brew install podman\n````\n\n````shell\n$ podman machine ls\nNAME                     VM TYPE     CREATED            LAST UP        CPUS        MEMORY      DISK SIZE\npodman-machine-default*  qemu        About an hour ago  6 minutes ago  1           2.147GB     107.4GB\n$ podman machine info\n````\n\n### Proxyã‚’è¨­å®š\n\nSettings \u003e Proxyã‹ã‚‰è¨­å®šã™ã‚‹\n\n### ProxyãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã®ã‚’ç¢ºèª\n\n````shell\n$ podman run --rm -it nginx bash\n\nroot# echo $https_proxy\n=\u003e è¨­å®šã—ãŸproxyãŒè¡¨ç¤ºã•ã‚Œã‚‹\nroot# curl '\u003cæ¥ç¶šå…ˆ\u003e'\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["2023/01/05"]},"/note/PowerShell%E3%81%A7Linux%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%82%92%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B":{"title":"PowerShellã§Linuxã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ã™ã‚‹","content":"\n## uutils/coreutils ã‚’ä½¿ç”¨ã™ã‚‹\n\n[uutils/coreutils](https://github.com/uutils/coreutils)\n\n* Rustè£½\n* ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œã®coreutils\n* [Scoop](note/Scoopç’°å¢ƒæ§‹ç¯‰.md) ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯èƒ½\n\nãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®aliasã‚’è§£é™¤ã—ã¦ãŠã\n\n````powershell\nRemove-Item alias:cp\nRemove-Item alias:mv\nRemove-Item alias:rm\nRemove-Item alias:ls\nRemove-Item alias:cat\nRemove-Item alias:sort -Force\n````\n\n## ãã®ä»–ã‚³ãƒãƒ³ãƒ‰\n\n* [ripgrep](https://github.com/BurntSushi/ripgrep)\n* [lsd](https://github.com/Peltoche/lsd)\n* tree([lsd](https://github.com/Peltoche/lsd)ã‚’ä½¿ã†)\n\n````powershell\nSet-Alias grep rg\nSet-Alias ls lsd\n\nfunction ll() { lsd -l --blocks permission --blocks size --blocks date --blocks name --blocks inode $args}\n\nfunction tree() { lsd --tree $args}\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Windows","PowerShell"]},"/note/PowerShell%E3%81%AE%E3%82%AD%E3%83%BC%E3%83%90%E3%82%A4%E3%83%B3%E3%83%89%E3%82%92emacs%E9%A2%A8%E3%81%AB%E3%81%99%E3%82%8B":{"title":"PowerShellã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’emacsé¢¨ã«ã™ã‚‹","content":"\n[PowerShellã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’Emacsé¢¨ã«ã™ã‚‹ã€PSReadLineã€‘ - ãƒ¡ãƒ¢.org](https://maskaw.hatenablog.com/entry/2019/02/08/193256)\n\n\u003chttps://github.com/PowerShell/PSReadLine\u003e ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n**ãªãŠã€PowerShell 6+ã§ã¯ã™ã§ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€åˆ©ç”¨è¨­å®šã ã‘ã™ã‚Œã°ã‚ˆã„**\n\n \u003e \n \u003e If you are using Windows PowerShell on Windows 10 or using PowerShell 6+, `PSReadLine` is already installed. Windows PowerShell on the latest Windows 10 has version `2.0.0-beta2` of `PSReadLine`. PowerShell 6+ versions have the newer prerelease versions of `PSReadLine`.\n\n`notepad $PROFILE` ã‚’å®Ÿè¡Œã—ã¦ä»¥ä¸‹ã‚’è¿½è¨˜\n\n````ps1\nif ($host.Name -eq 'ConsoleHost')\n{\n    # ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’Emacsé¢¨ã«å¤‰æ›´\n    Set-PSReadlineOption -EditMode Emacs\n}\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Windows","PowerShell"]},"/note/PowerShell%E3%81%AE%E3%83%97%E3%83%AD%E3%83%B3%E3%83%97%E3%83%88%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA":{"title":"PowerShellã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º","content":"\noh-my-posh\nhttps://ohmyposh.dev/docs/\n\nv3ã§ã¯ã“ã‚Œã ã‘\n\n````ps1\nSet-PoshPrompt -Theme paradox\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Windows","PowerShell"]},"/note/Powerlevel10k":{"title":"Powerlevel10k","content":"\nhttps://github.com/romkatv/powerlevel10k/\n\nzshã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”¨ã®theme\n\né¡ä¼¼\n[starship](note/starship.md)\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["2023/01/13","shell"]},"/note/Powershell7%E3%82%92Windows-Terminal%E3%81%A7%E4%BD%BF%E7%94%A8%E3%81%99%E3%82%8B":{"title":"Powershell7ã‚’Windows Terminalã§ä½¿ç”¨ã™ã‚‹","content":"\n## Microsoft Store ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹\n\n\u003chttps://docs.microsoft.com/ja-jp/powershell/scripting/install/installing-powershell-core-on-windows?view=powershell-7.1#installing-from-the-microsoft-store\u003e\nPowerShell 7.1 ã‹ã‚‰ã¯Storeã‹ã‚‰ã‚‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã‚ˆã†ã«ãªã£ãŸ\n\n## Terminalã®è¨­å®š\n\nè¨­å®š -\u003e ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ« -\u003e ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ ã‚’ `pwsh` ã«å¤‰æ›´\n![Pasted-image-20210509130113](note/Pasted-image-20210509130113.png)\n\nã“ã‚Œã§æ¬¡å›èµ·å‹•ã‹ã‚‰æœ€æ–°ç‰ˆãŒä½¿ã‚ã‚Œã‚‹\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Windows","PowerShell"]},"/note/Presto%E3%81%A7%E9%85%8D%E5%88%97%E3%82%92%E8%A1%8C%E3%81%AB%E5%A4%89%E6%8F%9B%E3%81%99%E3%82%8B":{"title":"Prestoã§é…åˆ—ã‚’è¡Œã«å¤‰æ›ã™ã‚‹","content":"\n## æ¨ªæŒã¡ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ç¸¦æŒã¡ã«å¤‰æ›ã™ã‚‹\n\n[Prestoã®UNNESTã‚’åˆ©ç”¨ã—ãŸæ¨ªç¸¦å¤‰æ› | åˆ†æãƒãƒ¼ãƒˆ](https://analytics-note.xyz/sql/presto-unnest-unpivot/)\n\næ¨ªæŒã¡ã®ãƒ†ãƒ¼ãƒ–ãƒ«(htable)\n\n|uid|c1|c2|c3|\n|---|--|--|--|\n|101|11|12|13|\n|102|21|22|23|\n\nç¸¦æŒã¡ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¤‰æ›ã—ãŸã„(vtable)\n\n|uid|key|value|\n|---|---|-----|\n|101|c1|11|\n|101|c2|12|\n|101|c3|13|\n|102|c1|21|\n|102|c2|22|\n|102|c3|23|\n\n### UNIONã‚’ä½¿ã†(ã‚·ãƒ³ãƒ—ãƒ«)\n\n````sql\nSELECT\n    uid,\n    'c1' AS key,\n    c1 AS value\nFROM\n    htable\nUNION ALL SELECT\n    uid,\n    'c2' AS key,\n    c2 AS value\nFROM\n    htable\nUNION ALL SELECT\n    uid,\n    'c3' AS key,\n    c3 AS value\nFROM\n    htable\n````\n\nã‚«ãƒ©ãƒ ãŒå¢—ãˆã‚‹ã¨é•·ããªã‚‹\n\n### UNNESTã‚’ä½¿ã†\n\n````sql\nSELECT\n    uid,\n    t.key,\n    t.value\nFROM\n    htable\nCROSS JOIN UNNEST (\n  array['c1', 'c2', 'c3'],\n  array[c1, c2, c3]\n) AS t(key, value)\n````\n\n## é…åˆ— -\u003e ãƒ¬ã‚³ãƒ¼ãƒ‰ã«å¤‰æ›ã™ã‚‹\n\n|time_range|\n|----------|\n|\\[\"16:00-16:30\", \"16:30-17:00\", \"17:00-17:30\", \"17:30-18:00\", \"18:00-18:30\", \"18:30-19:00\", \"19:00-19:30\", \"19:30-20:00\", \"20:00-20:30\", \"20:30-21:00\", \"21:00-21:30\"\\]|\n\n````sql\nSELECT time_range FROM tbl CROSS JOIN UNNEST(time_ranges) AS t(time_range)\n````\n\n=\u003e çµæœ\n\n|time_range|\n|----------|\n|16:00-16:30|\n|16:30-17:00|\n|17:00-17:30|\n|17:30-18:00|\n|18:00-18:30|\n|18:30-19:00|\n|19:00-19:30|\n|19:30-20:00|\n|20:00-20:30|\n|20:30-21:00|\n|21:00-21:30|\n\né…åˆ—ã®é †ç•ªã‚‚åˆã‚ã›ã¦åˆ¥ã€…ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã«å¤‰æ›ã—ãŸã„å ´åˆ\n`WITH ORDINALITY` ã‚’ã¤ã‘ã‚‹ã¨é…åˆ—ã®é †ç•ªã‚’æ ¼ç´ã™ã‚‹ã‚«ãƒ©ãƒ ãŒUNNESTå¾Œã®ã‚«ãƒ©ãƒ æ§‹é€ ã®æœ«å°¾ã«è¿½åŠ ã•ã‚Œã‚‹\n\n````sql\nSELECT time_id, time_range FROM tbl CROSS JOIN UNNEST(time_ranges) WITH ORDINALITY AS t( time_range, time_id )\n````\n\n### æ–‡å­—åˆ—ã‹ã‚‰å¤‰æ›ã™ã‚‹\n\n|query|\n|-----|\n|q=ã‚«ãƒ©ã‚ªã‚±\u0026city=tokyo\u0026open=true|\n\n````sql\nWITH\n    t AS (\n        SELECT\n            split_to_map(query, '\u0026', '=') as q\n        FROM\n            tbl\n    )\nSELECT\n    q['q'] AS v1,\n    q['city'] AS v2,\n    q['open'] AS v3\nFROM\n    t\n````\n\n## ç¸¦æ¨ªå¤‰æ›\n\n[Prestoã®Mapå‹ã‚’ä½¿ã£ãŸç¸¦æ¨ªå¤‰æ› | åˆ†æãƒãƒ¼ãƒˆ](https://analytics-note.xyz/sql/presto-unnest-unpivot/)\n\nç¸¦æŒã¡ã®ãƒ†ãƒ¼ãƒ–ãƒ«(vtable)\n\n|uid|key|value|\n|---|---|-----|\n|101|c1|11|\n|101|c2|12|\n|101|c3|13|\n|102|c1|21|\n|102|c2|22|\n|102|c3|23|\n\næ¨ªæŒã¡ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«å¤‰æ›ã—ãŸã„(htable)\n\n|uid|c1|c2|c3|\n|---|--|--|--|\n|101|11|12|13|\n|102|21|22|23|\n\nMAP_AGGã‚’ä½¿ã£ã¦keyã¨valueã®å¯¾å¿œã®mapã‚’ä½œæˆã—ã¦å„keyã®å€¤ã‚’å–ã‚Šå‡ºã™ã‚„ã‚Šæ–¹\n\n````sql\nSELECT\n    uid,\n    kv['c1'] AS c1,\n    kv['c2'] AS c2,\n    kv['c3'] AS c3\nFROM (\n    SELECT\n        uid,\n        MAP_AGG(key, value) AS kv\n    FROM\n        vtable\n    GROUP BY\n        uid\n) AS t\n````\n\nPrestoã§ãªã„å ´åˆã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ›¸ãæ–¹ãŒã§ãã‚‹\n\n````sql\nSELECT\n    uid,\n    MAX(\n        CASE WHEN key = 'c1' THEN\n            value\n        ELSE\n            NULL\n        END\n    ) AS c1,\n    MAX(\n        CASE WHEN key = 'c2' THEN\n            value\n        ELSE\n            NULL\n        END\n    ) AS c2,\n    MAX(\n        CASE WHEN key = 'c3' THEN\n            value\n        ELSE\n            NULL\n        END\n    ) AS c3\nFROM\n    vtable\nGROUP BY\n    uid\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Athena","SQL"]},"/note/PrometheusGrafana%E3%83%A1%E3%83%A2":{"title":"Prometheusã€Grafanaãƒ¡ãƒ¢","content":"\n### count_over_time\n\ntime rangeã®é–“ã€intervalã”ã¨ã«ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã‚’åé›†ã—ãŸä»¶æ•°ã®åˆè¨ˆ\n\n`count_over_time((kube_pod_status_phase{phase=\"Pending\"} \u003e 0)[15m:1m])`\n15åˆ†ã®é–“ã«1åˆ†ã”ã¨ã«pendingã®ä»¶æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆã—ã¦åˆè¨ˆã™ã‚‹\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["ç›£è¦–"]},"/note/Python":{"title":"Python","content":"\n\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Python"]},"/note/Rancher-Desktop":{"title":"Rancher Desktop","content":"\nDocker Desktop ä»£æ›¿å€™è£œ\n[lima](https://github.com/lima-vm/lima) ã§Linux Virtual Machine ãŒå‹•ã„ã¦ã„ã¦ã€VMä¸Šã§ã‚³ãƒ³ãƒ†ãƒŠãƒ©ãƒ³ã‚¿ã‚¤ãƒ (dockerdã€containerd) ã‚’å‹•ã‹ã—ã¦ã„ã‚‹\n\nKubernetesã¯k3sã§å‹•ã‹ã™ã“ã¨ãŒã§ãã‚‹\nProxyã®è¨­å®šãŒãªã„\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Docker"]},"/note/Raycast":{"title":"Raycast","content":"\n[Raycastã¯ãŸã ã®Launcherãƒ„ãƒ¼ãƒ«ã«ã¨ã©ã¾ã‚‰ãªã„](https://zenn.dev/rinchsan/articles/1c26913a87a5aa)\n[ãƒ©ãƒ³ãƒãƒ£ãƒ¼ãƒ„ãƒ¼ãƒ«Raycastã®ä½¿ã„æ–¹ã¨è¨­å®š | DevelopersIO](https://dev.classmethod.jp/articles/eetann-used-raycast/)\n\n## è‡ªåˆ†ã®è¨­å®š\n\n* Authy\n\n### ãƒã‚¤ã‚¯\n\n[Raycastã§ãƒã‚¤ã‚¯ã®ãƒŸãƒ¥ãƒ¼ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹](blog/Raycastã§ãƒã‚¤ã‚¯ã®ãƒŸãƒ¥ãƒ¼ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹.md)\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["2023/01/06","Raycast","Mac"]},"/note/Raycast%E3%81%A7%E3%83%87%E3%82%A3%E3%82%B9%E3%83%97%E3%83%AC%E3%82%A4%E3%81%AE%E8%A7%A3%E5%83%8F%E5%BA%A6%E3%82%92%E5%A4%89%E6%9B%B4%E3%81%99%E3%82%8B":{"title":"Raycastã§ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã®è§£åƒåº¦ã‚’å¤‰æ›´ã™ã‚‹","content":"\nWQHD(2560x1440)ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã‚’ä½¿ã£ã¦ã„ã‚‹ã¨ã€ç”»é¢å…±æœ‰æ™‚ã«æ–‡å­—ãŒå°ã•ããªã£ã¦ã—ã¾ã„èª­ã‚ãªã„ã“ã¨ãŒå¤šã€…ã‚ã‚‹ã®ã§ã€ç”»é¢å…±æœ‰ã™ã‚‹ã¨ãã¯éƒ½åº¦è§£åƒåº¦ã‚’ä¸‹ã’ã¦ã„ãŸã€‚\nå¤‰æ›´ã—å¿˜ã‚ŒãŸã‚Šã€å¤‰æ›´ã™ã‚‹ã®ã«ã‚‚ãŸã¤ã„ãŸã‚Šã™ã‚‹æ™‚é–“ãŒã‚ã‚‹ãŸã‚ã€ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã®è§£åƒåº¦ã®å¤‰æ›´ã‚’ç°¡å˜ã«ã§ããªã„ã‹ã‚’èª¿ã¹ãŸã€‚\n\n## ã‚´ãƒ¼ãƒ«\n\n* Raycastã§è§£åƒåº¦ã‚’å¤‰æ›´ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹\n\n## Raycastã‹ã‚‰å®Ÿè¡Œã™ã‚‹AppleScriptã‚’ä½œæˆ\n\n[Raycastã§ãƒã‚¤ã‚¯ã®ãƒŸãƒ¥ãƒ¼ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹](blog/Raycastã§ãƒã‚¤ã‚¯ã®ãƒŸãƒ¥ãƒ¼ãƒˆã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹.md)\n\nå¼•æ•°ã¤ãã§å®Ÿè¡Œã‚‚ã§ãã‚‹\n\n## AppleScriptã®ä¸­èº«ã‚’æ›¸ã\n\nAppleScriptã«ã¯ã‚ã¾ã‚Šè©³ã—ããªã„ã®ã§ã‚‚ã£ã¨ã„ã„æ›¸ãæ–¹ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œãªã„ã§ã™ãŒæ‚ªã—ã‹ã‚‰ãš\n\n[mac - Is it possible to change display resolution with a keyboard shortcut? - Ask Different](https://apple.stackexchange.com/questions/263162/is-it-possible-to-change-display-resolution-with-a-keyboard-shortcut)\nã«ã‚ˆã‚‹ã¨OSã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«ã‚ˆã£ã¦UIãŒç•°ãªã‚‹ã®ã§ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å¤‰ãˆãªã„ã¨ã„ã‘ãªã„ã¿ãŸã„\n\n### Monterey(12.6) ã®å ´åˆ\n\n````applescript\n#!/usr/bin/osascript\n\n# Required parameters:\n# @raycast.schemaVersion 1\n# @raycast.title Toggle display resolution\n# @raycast.mode compact\n\n# Optional parameters:\n# @raycast.icon ğŸ¤–\n# @raycast.argument1 { \"type\": \"text\", \"placeholder\": \"Placeholder\" }\n# @raycast.packageName Mac Utils\n\non run argv\n\nset resolution_index to ( item 1 of argv )\n\ntell application \"System Preferences\"\n  activate\n  set the current pane to pane id \"com.apple.preference.displays\"\n  delay 1\n  tell application \"System Events\"\n      tell window \"Displays\" of application process \"System Preferences\"\n          click button \"Display Settingsâ€¦\"\n          delay 1\n\n          tell sheet 1\n              select row 2 of outline 1 of scroll area 1\n              click radio button \"Scaled\" of radio group 1\n\n              tell scroll area 2\n                  tell table 1\n                      select row (resolution_index as integer)\n                  end tell\n              end tell\n          end tell\n\n          delay 1\n          click button \"Done\" of sheet 1\n      end tell\n  end tell\nend tell\n\n# The next line is optional and could be commented out by prepending with a hash (#).\n# delay 2\n# quit application \"System Preferences\"\nend run\n````\n\n### è§£èª¬\n\n`on run argv` \nå¼•æ•°ã¤ãã§å®Ÿè¡Œã™ã‚‹\n\n`set resolution_index to ( item 1 of argv )`\n1ã¤ã‚ã®å¼•æ•°ã‚’ä»£å…¥ã™ã‚‹\n\n````\ntell application \"System Preferences\"\n...\n        tell window \"Displays\" of application process \"System Preferences\"\n          click button \"Display Settingsâ€¦\"\n````\n\nSystem Preferencesã‚’é–‹ã„ã¦ã€ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ãªã©ã®ç”»é¢æ“ä½œã‚’ã™ã‚‹\n\n````\n          tell sheet 1\n              select row 2 of outline 1 of scroll area 1\n              click radio button \"Scaled\" of radio group 1\n\n              tell scroll area 2\n                  tell table 1\n                      select row (resolution_index as integer)\n                  end tell\n              end tell\n          end tell\n````\n\nDisplay Settingsã®ç”»é¢ã§ã€\n\n1. 2ç•ªç›®ã®ãƒ¢ãƒ‹ã‚¿ãƒ¼ã‚’é¸æŠ\n1. ãƒ©ã‚¸ã‚ªãƒœã‚¿ãƒ³Scaledã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦è§£åƒåº¦ã®ãƒªã‚¹ãƒˆã‚’é–‹ã\n1. è§£åƒåº¦ã®ãƒªã‚¹ãƒˆã‹ã‚‰å¼•æ•°ã§æŒ‡å®šã—ãŸã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’é¸æŠã™ã‚‹\n\nä»¥é™ã¯ç”»é¢ã‚’é–‰ã˜ãŸã‚Šã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’çµ‚äº†ã—ãŸã‚Šã‚’è¡Œã†ãƒ‘ãƒ¼ãƒˆ\n\n## æ‰€æ„Ÿ\n\n* æ“ä½œå¯¾è±¡ã®UIã‚’ç‰¹å®šã™ã‚‹ãŸã‚ã« `log every UI element` ã§ä¸€è¦§å‡ºåŠ›ã™ã‚‹ã®ãŒä¾¿åˆ©ã ã£ãŸ\n* UIã‚’ç•ªå·ã§æŒ‡å®šã—ã¦ã„ã‚‹ã®ãŒã€ç°¡å˜ã«å£Šã‚Œãã†ã§å«Œã ãª\n* è§£åƒåº¦ã®æŒ‡å®šã‚‚ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã§ã‚„ã£ã¦ã„ã‚‹ãŒã‚ã‹ã‚Šã«ãã„ãª\n\n## å‚è€ƒ\n\n[AppleScript to change Display Resolution - Apple Community](https://discussions.apple.com/thread/253787938)\n[mac - Is it possible to change display resolution with a keyboard shortcut? - Ask Different](https://apple.stackexchange.com/questions/263162/is-it-possible-to-change-display-resolution-with-a-keyboard-shortcut)\n[macbook pro - a single keyboard shortcut that toggles between 2 resolutions on MacOS 12.6 - Ask Different](https://apple.stackexchange.com/questions/449891/a-single-keyboard-shortcut-that-toggles-between-2-resolutions-on-macos-12-6)\n[Change screen resolution AppleScript](https://gist.github.com/mvaneijgen/73458ffb956e825c5786#file-scale-resolution-scpt-L21)\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["2023/03/03","Raycast"]},"/note/React":{"title":"React","content":"\nReactã¯ã€FacebookãŒé–‹ç™ºã—ãŸJavaScriptã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã€Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®UIã‚’æ§‹ç¯‰ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹ã€‚\nã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨å‘¼ã°ã‚Œã‚‹å°ã•ãªå†åˆ©ç”¨å¯èƒ½ãªUIè¦ç´ ã‚’çµ„ã¿åˆã‚ã›ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹ã€‚\n\n* å®£è¨€çš„ãªãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚¹ã‚¿ã‚¤ãƒ«ã‚’æ¡ç”¨ã—ã¦ã„ã‚‹ã®ã§ãƒ­ã‚¸ãƒƒã‚¯ã¨çµ„ã¿åˆã‚ã›ãŸUIã®æ§‹ç¯‰ãŒã—ã‚„ã™ã„\n* ä»®æƒ³DOMã‚’ä½¿ç”¨ã™ã‚‹ãŸã‚ã€UIã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒå‘ä¸Šã™ã‚‹\n* å¤§è¦æ¨¡ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã‚‚ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„ãƒ‡ãƒ¼ã‚¿ã®ãƒ•ãƒ­ãƒ¼ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«ç®¡ç†ã§ãã‚‹ãŸã‚ã€ä¿å®ˆæ€§ãŒé«˜ãã€æ‹¡å¼µæ€§ã«ã‚‚å„ªã‚Œã¦ã„ã‚‹\n\n[TypeScript](note/TypeScript.md) ã§è¨˜è¿°å¯èƒ½\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["JavaScript"]},"/note/Rust":{"title":"Rust","content":"\n\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Rust"]},"/note/Rust%E3%81%A7CLI%E3%82%92%E4%BD%9C%E3%82%8B":{"title":"Rustã§CLIã‚’ä½œã‚‹","content":"\n## neovimã§rustã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹\n\nLSPã¯rust-analyzerã‚’ä½¿ã†\n\n````shell\nbrew install rust-analyzer\n````\n\nã‚‚ã—ãã¯neovimã§masonã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã¯ `:MasonInstall rust-analyzer`\n\n````lua\nlocal lspconfig_status_ok, lspconfig = pcall(require, \"lspconfig\")\nif not lspconfig_status_ok then\n  return\nend\n\nlocal opts = {\n  on_attach = require(\"lsp.handlers\").on_attach,\n  capabilities = require(\"lsp.handlers\").capabilities,\n}\n\nlspconfig['rust_analyzer'].setup(opts)\n\n````\n\n### formatter\n\n\u003chttps://github.com/rust-lang/rustfmt\u003e\n\n````shell\nrustup component add rustfmt\n````\n\n`:RustFmt` ã¯ã¨ãã«ä½•ã‚‚è¨­å®šã—ãªãã¦ã‚‚ä½¿ãˆãŸã‘ã©ã€ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦åŠ¹ã‹ãªã‹ã£ãŸ\n\n````\nError detected while processing function rustfmt#Format[7]..\u003cSNR\u003e64_RunRustfmt:\nline   48:\nE776: No location list\n````\n\n`:!rustfmt %` ã§ä»£ç”¨ã—ãŸã‚‰Rust 2018ã‹ã‚‰ã˜ã‚ƒãªã„ã¨ä½¿ãˆãªã„è¨˜æ³•ã§ã‚¨ãƒ©ãƒ¼ã«ãªã£ãŸã€‚\n`rustfmt.toml` ã‚’ä½œã£ã¦ `edition = \"2021\"` ã‚’æ›¸ã„ãŸ\n\nä¿å­˜æ™‚ã«å®Ÿè¡Œã—ã¦ã»ã—ã‹ã£ãŸã®ã§ã“ã†ã—ãŸã€‚\ncursorä½ç½®ãŒå…ˆé ­ã«è¡Œã£ã¦ã—ã¾ã†ã®ã§ã€ `nvim_win_get_cursor` ã§ä½ç½®ã‚’ä¿å­˜ã—ã¦ãŠã„ã¦ã‹ã‚‰rustfmtå®Ÿè¡Œ\nrustfmt.toml ã‚’è¦‹ã¦ãã‚Œãªã„ã®ã§editionã‚’æ˜ç¤ºã—ãŸã€‚ã“ã‚Œã ã¨ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚ˆã£ã¦ã¯è¨­å®šèª­ã‚ãªãã¦formatãšã‚Œã‚‹ãªã€‚\n\n````lua\nfunction rustfmt(wait_ms)\n  local curpos = vim.api.nvim_win_get_cursor(0)\n  vim.cmd [[ %!rustfmt --edition \"2021\" ]]\n  vim.api.nvim_win_set_cursor(0, curpos)\nend\n\nvim.cmd [[\n  augroup rustfmt\n    autocmd!\n    autocmd BufWritePre *.rs lua rustfmt()\n  augroup end\n]]\n\n````\n\nRustãªã«ã‚‚ã‚ã‹ã‚‰ãªã„ã®ã§ã¨ã‚Šã‚ãˆãšã“ã‚Œã‚’ãƒ™ãƒ¼ã‚¹ã«ã™ã‚‹\n[Building My First Command Line Interface (CLI) with Rust | by Adam Berg | Geek Culture | Medium](https://medium.com/geekculture/building-my-first-command-line-interface-cli-with-rust-b6beb9c284e0)\n\n## åˆæœŸåŒ–\n\n`cargo new ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å` ã‚‚ã—ãã¯ `cargo init` ã§ä½œæˆ\nCargo.tomlãŒã§ãã‚‹\n\n`cargo add ã‚¯ãƒ¬ãƒ¼ãƒˆå` ã§ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’è¿½åŠ ã™ã‚‹\n\n````shell\ncargo add reqwest tokio\n````\n\n-\u003e `features` ã‚‚è¨­å®šã—ãŸã‹ã£ãŸã‘ã©ã‚³ãƒãƒ³ãƒ‰ã ã¨ã‚ˆãã‚ã‹ã‚‰ãªã‹ã£ãŸã®ã§tomlç›´æ¥ä¿®æ­£ã™ã‚‹\n\n## clapã‚’ä½¿ã£ã¦ã¿ã‚‹\n\nClapã¨ã„ã†crateãŒCLIä½œã‚‹ã¨ãã«ä¾¿åˆ©ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚ˆã†ãªã®ã§ã€ã“ã‚Œã‚’ä½¿ã£ã¦ã‚‚ã„ã„ã‹ã‚‚\n[Rustã®Clapã‚¯ãƒ¬ãƒ¼ãƒˆãŒãƒ¡ãƒãƒ£ã‚¯ãƒãƒ£è‰¯ã‹ã£ãŸè©±](https://zenn.dev/shinobuy/articles/53aed032fe5977)\n\nderiveã£ã¦ã„ã†ã®ãŒä»Šé¢¨ã‚‰ã—ã„\n[Rust | clap v3ç³»ã§CLIãƒ„ãƒ¼ãƒ«ã‚’ä½œæˆã™ã‚‹ - dotTrail](https://dottrail.codemountains.org/rust-clap-v3-cli-app/)\n\n## reqwest\n\nresponseã®JSONã‚’parseã—ãŸã‹ã£ãŸã®ã§[serde](https://github.com/serde-rs/serde)ã‚’ã„ã‚Œã¦ã¿ãŸ\n\n````toml\nserde = { version = \"1.0\", features = [\"derive\"] }\nreqwest = { version = \"0.11\", features = [\"blocking\", \"json\"] }\n\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Rust","Neovim"]},"/note/Rust%E3%81%A7bitbucket%E3%81%AEpermission%E6%93%8D%E4%BD%9C%E3%81%99%E3%82%8Bcli%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B":{"title":"Rustã§bitbucketã®permissionæ“ä½œã™ã‚‹cliã‚’ä½œã£ã¦ã¿ã‚‹","content":"\n[Rustã§CLIã‚’ä½œã‚‹](note/Rustã§CLIã‚’ä½œã‚‹.md) ã®ç¶šã\n\nRustå‹‰å¼·ãŒã¦ã‚‰CLIã§æ“ä½œã§ãã‚‹ã‚ˆã†ã«ã—ã¦ã¿ã‚‹\n\n* https://github.com/clap-rs/clap ã‚’ä½¿ã†\n* [List explicit group permissions for a repository](https://developer.atlassian.com/cloud/bitbucket/rest/api-group-repositories/#api-repositories-workspace-repo-slug-permissions-config-groups-get) ã®ã‚ˆã†ã«ãƒªãƒã‚¸ãƒˆãƒªã®user, groupsã¸ã®permissionã‚’æ“ä½œã™ã‚‹APIãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã€‚ãŸã ã—ã€usernameã§ã¯æ“ä½œãŒã§ããšã€UUIDã‚’æŒ‡å®šã™ã‚‹ã€‚UUIDã¯adminã˜ã‚ƒãªã„ã¨ç°¡å˜ã«ã¯ã¨ã‚Œãªã•ãã†ã€‚\n\n## APIã®ä½¿ã„æ–¹\n\nãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ã‚°ãƒ«ãƒ¼ãƒ—ã®å–å¾—\n\n````shell\n$ curl -u $BITBUCKET_USER:$BITBUCKET_PASS \"https://api.bitbucket.org/2.0/repositories/${workspace}/${slug}/permissions-config/users\"\n\n{\n  \"values\": [\n    {\n      \"type\": \"repository_user_permission\",\n      \"permission\": \"admin\",\n      \"user\": {\n        \"display_name\": \"John Doe\",\n        \"type\": \"user\",\n        \"uuid\": \"{77777777-88888-3333-aaaa-bbbbbbbbbbbb}\",\n        \"account_id\": \"111111122222222ccccccccc\",\n        \"nickname\": \"john-doe\"\n      }\n    }\n  ],\n  \"pagelen\": 10,\n  \"size\": 1,\n  \"page\": 1\n}\n\n$ curl -u $BITBUCKET_USER:$BITBUCKET_PASS \"https://api.bitbucket.org/2.0/repositories/${workspace}/${slug}/permissions-config/groups\"\n{\n  \"values\": [\n    {\n      \"type\": \"repository_group_permission\",\n      \"permission\": \"admin\",\n      \"group\": {\n        \"type\": \"group\",\n        \"owner\": {},\n        \"workspace\": {},\n        \"slug\": \"administrator\",\n        \"full_slug\": \"${workspace}:administrator\",\n        \"name\": \"administrator\",\n        \"default_permission\": \"admin\",\n        \"email_forwarding_disabled\": false,\n        \"account_privilege\": \"admin\"\n      }\n    },\n    {\n      \"type\": \"repository_group_permission\",\n      \"permission\": \"read\",\n      \"group\": {\n        \"type\": \"group\",\n        \"owner\": {},\n        \"workspace\": { },\n        \"slug\": \"developer\",\n        \"full_slug\": \"${workspace}:developer\",\n        \"name\": \"developer\",\n        \"default_permission\": \"read\",\n        \"email_forwarding_disabled\": true,\n        \"account_privilege\": \"collaborator\"\n      }\n    }\n  ],\n  \"pagelen\": 1,\n  \"size\": 2,\n  \"page\": 1\n}\n\n````\n\nè¿½åŠ ãƒ»æ›´æ–°\nãƒ¦ãƒ¼ã‚¶ãƒ¼ã®UUIDã‚„ã‚°ãƒ«ãƒ¼ãƒ—ã®slugã¯ã€permissionè¨­å®šãšã¿ã®ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰å–å¾—ã™ã‚‹ã®ãŒæ¥½ã‹ãªï¼Ÿãã®ãŸã‚ä¸€ã¤ã®ãƒªãƒã‚¸ãƒˆãƒªã¯GUIã‹ã‚‰è¨­å®šã—ã¦ã€2ã¤ç›®ä»¥é™ã¯CLIã§ã§ãã‚‹æ„Ÿã˜\n\n````shell\n# æ›´æ–°ã ã‘ã˜ã‚ƒãªãè¿½åŠ ã‚‚ã§ãã‚‹\n$ curl -u $BITBUCKET_USER:$BITBUCKET_PASS -X PUT -H \"Content-Type: application/json\" \"https://api.bitbucket.org/2.0/repositories/${workspace}/${slug}/permissions-config/users/%7Baaaaaaaa-7777-4567-8888-dddddddddddd%7D\" -d '{ \"permission\": \"write\" }'\n$ curl -u $BITBUCKET_USER:$BITBUCKET_PASS -X PUT -H \"Content-Type: application/json\" \"https://api.bitbucket.org/2.0/repositories/${workspace}/${slug}/permissions-config/groups/2022-ca9b0ca\" -d '{ \"permission\": \"write\" }'\n````\n\nå‰Šé™¤\n\n````shell\n$ curl -u $BITBUCKET_USER:$BITBUCKET_PASS -X DELETE -H \"Content-Type: application/json\" \"https://api.bitbucket.org/2.0/repositories/${workspace}/${slug}/permissions-config/users/%7Baaaaaaaa-7777-4567-8888-dddddddddddd%7D\"\n$lang curl -u $BITBUCKET_USER:$BITBUCKET_PASS -X PUT -H \"Content-Type: application/json\" \"https://api.bitbucket.org/2.0/repositories/${workspace}/${slug}/permissions-config/groups/2021-ca9b0ca\"\n````\n\n## è¨­è¨ˆ\n\n````\nuser, user-a, {aaaaaaaa-7898-45d3-869f-dd6ddf7efc10}, write\nuser, user-b, {aaaaaaaa-7898-45d3-869f-dd6ddf7efc11}, read\ngroup, group-1, 2022_abcdef12, write\n````\n\nã¿ãŸã„ãªCSVã‚’é£Ÿã‚ã›ã¦ã“ã‚Œã®ã¨ãŠã‚Šã«ä¸Šæ›¸ãã™ã‚‹\nPJã”ã¨ã«ã€æŒã£ã¦ã„ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã«ã¯ã™ã¹ã¦åŒã˜è¨­å®šãŒã§ãã‚Œã°æº€è¶³ã ã¨æ€ã†ã®ã§\n\nåˆ—æŒ™ã•ã‚Œã¦ã„ãªã„ã‚‚ã®ã¯å‰Šé™¤ã¾ã§ã™ã‚‹ã‹ï¼Ÿä¸€æ—¦è€ƒãˆãªãã¦ã„ã„ã‹\n\nCSVã‚’ä½œã‚‹ãŸã‚ã«ã¯ä¸€å›ã¯æ‰‹å‹•ã§è¨­å®šã‚’ã—ã¦APIã§å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚‹\nCSVã¨ã‹ã˜ã‚ƒãªãã¦ã‚‚ã€ã“ã®ãƒªãƒã‚¸ãƒˆãƒªã¨åŒã˜è¨­å®šã‚’é©ç”¨ã™ã‚‹ã¨ã„ã†ã®ã§ã‚‚ã„ã„ã‚“ã˜ã‚ƒãªã„ã‹\n\nã¾ãšã¯å–å¾—ã™ã‚‹APIã‚’ä½œã£ã¦ã€JSONã‚’æ“ä½œã™ã‚‹æ–¹æ³•ã‚’èª¿ã¹ã¦ç‰¹å®šã®ã‚­ãƒ¼ã‚’æŠ½å‡ºã™ã‚‹\n\n### copy\n\n`bb copy \u003csrc\u003e \u003crepo\u003e`\nsrcã¨åŒã˜æ¨©é™ã«ã™ã‚‹\n\n### list\n\nä¸€è¦§\n\n`bb list \u003crepo\u003e`\n\n### remove\n\n`bb remove -u/-g \u003cuuid\u003e \u003crepo\u003e`\n\nidã‚’ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§æŒ‡å®šã—ã¦ã‚‚ã„ã„ã‘ã©ã€listã—ãŸã‚ã¨é¸æŠå¼ã§å‰Šé™¤ã§ãã‚‹ã¨ä¾¿åˆ©\n\n### update\n\n`bb update -u/-g \u003cuuid\u003e \u003crepo\u003e`\n\n### login\n\næ¯å›authã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¤ã‘ã‚‹ã®ãªã‚“ã ã—ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒã§ã‚‹ã®ã‚ã‚Œãªã®ã§ã€\nhttps://github.com/craftamap/bb ã‚’å‚è€ƒã«ã€loginã‚³ãƒãƒ³ãƒ‰ã§ `~/.bb.toml` ã‚’ä½œã£ã¦username, passwordã‚’ä¿å­˜ã™ã‚‹çš„ãª\nMacã§ã®å‹•ä½œã—ã‹ç¢ºèªã§ãã‚“ã‘ã©keychainã«å…¥ã‚Œã‚‹ã¨ã‹\n\n````toml\n[package]\nname = \"bitbucket-cli\"\nversion = \"0.1.0\"\nedition = \"2021\"\n\n# See more keys and their definitions at https://doc.rust-lang.org/cargo/reference/manifest.html\n\n[dependencies]\nansi_term = \"0.12.1\"\nserde = { version = \"1.0\", features = [\"derive\"] }\nserde_json = \"1.0\"\nreqwest = { version = \"0.11\", features = [\"blocking\", \"json\"] }\ntokio = { version = \"1\", features = [\"full\"] }\nclap = { version = \"3.2.22\", features = [\"derive\"] }\nchrono = \"0.4.20\"\n````\n\n````rust\nuse ansi_term::Colour;\nuse chrono::{DateTime, Local};\nuse clap::{ArgEnum, Parser, Subcommand};\nuse reqwest::StatusCode;\nuse serde::{Deserialize, Serialize};\nuse serde_json::Value;\nuse std::fs::OpenOptions;\nuse std::io::Write;\nuse std::path::PathBuf;\nuse std::thread::sleep;\nuse std::time::{Duration, Instant};\nuse std::{default, fs, process};\n\n#[derive(Parser, Debug)]\n#[clap(name = \"bbrs\", version, about, long_about = None, arg_required_else_help = true)]\nstruct Args {\n    /// Username\n    #[clap(short, long, value_name = \"USERNAME\")]\n    username: String,\n\n    /// App password\n    #[clap(short, long, value_name = \"APP PASSWORD\")]\n    password: String,\n\n    /// Workspace\n    #[clap(short, long, value_name = \"WORKSPACE\")]\n    workspace: String,\n\n    /// Repo slug\n    #[clap(short, long)]\n    slug: String,\n\n    /// Output type\n    #[clap(\n        short,\n        long,\n        arg_enum,\n        value_name = \"OUTPUT TYPE\",\n        default_value = \"text\"\n    )]\n    output: Output,\n\n    #[clap(subcommand)]\n    command: Commands,\n}\n\n#[derive(Debug, Clone, ArgEnum, Copy)]\nenum Output {\n    Csv,\n    Json,\n    Text,\n}\n\n/// ã‚µãƒ–ã‚³ãƒãƒ³ãƒ‰ã®å®šç¾©\n#[derive(Debug, Subcommand)]\nenum Commands {\n    List,\n}\n\nstruct OutputMessage {\n    datetime: DateTime\u003cLocal\u003e,\n    url: String,\n    status_code: StatusCode,\n    elapsed: Duration,\n}\n\nimpl OutputMessage {\n    fn new(\n        datetime: DateTime\u003cLocal\u003e,\n        url: String,\n        status_code: StatusCode,\n        elapsed: Duration,\n    ) -\u003e Self {\n        Self {\n            datetime,\n            url,\n            status_code,\n            elapsed,\n        }\n    }\n\n    fn to_formatted(\u0026self, output: Output) -\u003e String {\n        let dt = self.datetime.format(\"%Y-%m-%d %H:%M:%S\").to_string();\n        let url = self.url.as_str().to_string();\n        let st = self.status_code.to_string();\n        let response_time = format!(\n            \"{}.{:03}\",\n            self.elapsed.as_secs(),\n            self.elapsed.subsec_nanos() / 1_000_000\n        );\n\n        match output {\n            Output::Csv =\u003e {\n                format!(r#\"\"{}\",\"{}\",\"{}\",\"{}\"\"#, dt, url, st, response_time)\n            }\n            Output::Json =\u003e {\n                format!(\n                    r#\"{{\"datetime\": \"{}\",\"url: \"{}\",\"statusCode\": \"{}\",\"responseTime\": \"{}\"}}\"#,\n                    dt, url, st, response_time\n                )\n            }\n            Output::Text =\u003e {\n                format!(\"{} {} {} {}\", dt, url, st, response_time)\n            }\n        }\n    }\n}\n\n#[tokio::main]\nasync fn main() {\n    let args = Args::parse();\n    let username: String = args.username;\n    let password: String = args.password;\n    let workspace: String = args.workspace;\n    let slug: String = args.slug;\n    let output: Output = args.output;\n\n    let bitbucket = Bitbucket {\n        username,\n        password,\n        workspace,\n        slug,\n    };\n\n    match args.command {\n        Commands::List =\u003e {\n            list(bitbucket).await;\n        }\n    }\n}\n\n// Bitbucket APIã‚’å®Ÿè¡Œã™ã‚‹\n\nconst BASE_URL: \u0026str = \"https://api.bitbucket.org/2.0\";\n\nstruct Bitbucket {\n    username: String,\n    password: String,\n    workspace: String,\n    slug: String,\n}\n\n// #[derive(Debug, Serialize, Deserialize)]\n// struct GroupPermissions {\n//     values: Vec\u003cGroupPermission\u003e\n// }\n// #[derive(Debug, Serialize, Deserialize)]\n// struct GroupPermission {\n//     permission: String,\n//\n// }\n\nstruct Permission {\n    object_type: ObjectType,\n    alias: String,\n    id: String,\n    permission: PermissionType,\n}\n\n#[derive(Debug, Clone, Copy)]\nenum ObjectType {\n    User,\n    Group,\n}\n\nfn object_type_from_str(s: \u0026str) -\u003e ObjectType {\n    match s {\n        \"user\" =\u003e return ObjectType::User,\n        \"group\" =\u003e return ObjectType::Group,\n        _ =\u003e return ObjectType::User,\n    }\n}\n\n#[derive(Debug, Clone, Copy)]\nenum PermissionType {\n    Read,\n    Write,\n    Admin,\n}\nfn permission_type_from_str(s: \u0026str) -\u003e PermissionType {\n    match s {\n        \"read\" =\u003e return PermissionType::Read,\n        \"write\" =\u003e return PermissionType::Write,\n        \"admin\" =\u003e return PermissionType::Admin,\n        _ =\u003e return PermissionType::Read,\n    }\n}\n\nasync fn list(bitbucket: Bitbucket) -\u003e Result\u003cVec\u003cPermission\u003e, Box\u003cdyn std::error::Error\u003e\u003e {\n    let mut permissions: Vec\u003cPermission\u003e = Vec::new();\n\n    let url = format!(\n        r#\"{}/repositories/{}/{}/permissions-config/groups\"#,\n        BASE_URL, bitbucket.workspace, bitbucket.slug,\n    );\n    let client = reqwest::Client::new();\n    let resp = client\n        .get(url)\n        .basic_auth(\u0026bitbucket.username, Some(\u0026bitbucket.password))\n        .send()\n        .await?;\n\n    if !resp.status().is_success() {\n        println!(\"failed to get permission\");\n        return Ok(permissions);\n    }\n\n    let permission_groups: Value = resp.json().await?;\n\n    for v in permission_groups[\"values\"].as_array().unwrap() {\n        let p = Permission {\n            permission: permission_type_from_str(v[\"permission\"].as_str().unwrap()),\n            object_type: object_type_from_str(v[\"group\"][\"type\"].as_str().unwrap()),\n            alias: String::from(v[\"group\"][\"name\"].as_str().unwrap()),\n            id: String::from(v[\"group\"][\"slug\"].as_str().unwrap()),\n        };\n        permissions.push(p);\n    }\n\n    let url_users = format!(\n        r#\"{}/repositories/{}/{}/permissions-config/users\"#,\n        BASE_URL, bitbucket.workspace, bitbucket.slug,\n    );\n    let resp_users = client\n        .get(url_users)\n        .basic_auth(bitbucket.username, Some(bitbucket.password))\n        .send()\n        .await?;\n\n    if !resp_users.status().is_success() {\n        println!(\"failed to get permission\");\n        return Ok(vec![]);\n    }\n\n    let permission_users: Value = resp_users.json().await?;\n\n    for v in permission_users[\"values\"].as_array().unwrap() {\n        let p = Permission {\n            permission: permission_type_from_str(v[\"permission\"].as_str().unwrap()),\n            object_type: object_type_from_str(v[\"user\"][\"type\"].as_str().unwrap()),\n            alias: String::from(v[\"user\"][\"nickname\"].as_str().unwrap()),\n            id: String::from(v[\"user\"][\"uuid\"].as_str().unwrap()),\n        };\n        permissions.push(p);\n    }\n\n    for p in \u0026permissions {\n        println!(\n            \"{:?}, {:?}, {:?}, {:?}\",\n            p.object_type, p.id, p.alias, p.permission,\n        );\n    }\n\n    Ok(permissions)\n}\n\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Rust","CLI"]},"/note/S3":{"title":"S3","content":"\n\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["AWS"]},"/note/SAM":{"title":"SAM","content":"\nServerless Application Model\nLambdaã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã®ã‚’ç°¡å˜ã«ã™ã‚‹ãƒ„ãƒ¼ãƒ«\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["AWS","CLI"]},"/note/SQL%E3%81%A7%E3%82%B0%E3%83%AB%E3%83%BC%E3%83%97%E3%81%94%E3%81%A8%E3%81%AB%E4%B8%8A%E4%BD%8DN%E4%BB%B6%E3%82%92%E5%8F%96%E5%BE%97":{"title":"SQLã§ã‚°ãƒ«ãƒ¼ãƒ—ã”ã¨ã«ä¸Šä½Nä»¶ã‚’å–å¾—","content":"\n\\#sql\n\nã‚ã‚‹ã‚°ãƒ«ãƒ¼ãƒ—ã”ã¨ã«ä¸Šä½ã€‡ä»¶ãšã¤ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã¦æ¯”è¼ƒã—ãŸã„ã¨ã„ã†éš›ã«windowé–¢æ•°ã‚’ä½¿ã†ã€‚\n\n### ãƒ†ãƒ¼ãƒ–ãƒ«\n\nsales_t\n\n|category|product|sales|\n|--------|-------|-----|\n|é£Ÿå“|ã‚Šã‚“ã”|30|\n|é£Ÿå“|ã¿ã‹ã‚“|20|\n|é£Ÿå“|ãƒãƒŠãƒŠ|10|\n|ç­†è¨˜ç”¨å…·|ãƒšãƒ³|40|\n|ç­†è¨˜ç”¨å…·|æ¶ˆã—ã‚´ãƒ |10|\n|ç­†è¨˜ç”¨å…·|èµ¤ãƒšãƒ³|30|\n\n### categoryã”ã¨ã«ä¸Šä½2ä»¶ãšã¤å–å¾—ã™ã‚‹\n\n````sql\nselect * from (\n    select category\n        , product\n        , row_number() over (partition by category order by sales desc) as row\n    from sales_t\n)\nwhere row \u003c= 2;\n````\n\n### ä»¶æ•°ã®å¤šã„ã‚‚ã®ã‹ã‚‰å–å¾—ã™ã‚‹\n\n````sql\nselect * from (\n    select category\n        , product\n        , count(*) as cnt\n        , row_number() over (partition by category order by count(*) desc) as row\n    from sales_t\n)\nwhere row \u003c= 2;\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["sql"]},"/note/SQS%E3%81%A8Lambda%E3%81%A7%E5%90%8C%E6%99%82%E5%AE%9F%E8%A1%8C%E6%95%B0%E3%82%92%E5%88%B6%E5%BE%A1%E3%81%99%E3%82%8B":{"title":"SQSã¨Lambdaã§åŒæ™‚å®Ÿè¡Œæ•°ã‚’åˆ¶å¾¡ã™ã‚‹","content":"\n[AWS Lambda](note/AWS%20Lambda.md) ã®åŒæ™‚å®Ÿè¡Œæ•°ã®ä¸Šé™ã¯ã€åŒä¸€ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®åŒä¸€Regionå†…ã§1000ä»¶ã¾ã§ã€‚\n\nåŒæ™‚å®Ÿè¡Œæ•°ã«é”ã™ã‚‹ã¨ã€ãã‚Œä»¥ä¸Šã®å‘¼ã³å‡ºã—ã¯ã‚¹ãƒ­ãƒƒãƒˆãƒªãƒ³ã‚°ã•ã‚Œå®Ÿè¡Œã•ã‚Œãªã„ã€‚\n\nLamdbaã®ãƒˆãƒªã‚¬ãƒ¼ã¨ã—ã¦SQSã‚’è¨­å®šã—ãŸå ´åˆã®æŒ™å‹•ã«ã¤ã„ã¦æ•´ç†ã™ã‚‹ã€‚\n\n[AWS SQS + Lambdaã®åŒæ™‚å®Ÿè¡Œæ•°ã®æŒ™å‹•ã«ã¤ã„ã¦](https://blog.nijohando.jp/post/2020/sqs-lambda-throttling-error/)\n\n[SQSã¨Lambdaã§å®Ÿè£…ã™ã‚‹ç›´åˆ—å‡¦ç† | DevelopersIO](https://dev.classmethod.jp/articles/lambda-serial-processing-by-sqs/)\n\n* Lambda Functionã®äºˆç´„ã•ã‚ŒãŸåŒæ™‚å®Ÿè¡Œæ•°ã‚’ `1`ã«åˆ¶é™ã™ã‚‹\n* Lambda Functionã®ãƒˆãƒªã‚¬ãƒ¼ã¨ã—ã¦SQSã‚’æŒ‡å®šã™ã‚‹\n* SQSã‚’FIFOã‚­ãƒ¥ãƒ¼ã«ã™ã‚‹\n\nä¾‹ãˆã°ã€ãƒãƒƒãƒã‚µã‚¤ã‚ºãŒ`3`ã§ã‚­ãƒ¥ãƒ¼ã«`50å€‹`ãƒ‡ãƒ¼ã‚¿ãŒæœ‰ã‚‹å ´åˆã€LambdaãŒ 17å€‹ä¸¦åˆ—ã§èµ·å‹•ã—ã¾ã™ã€‚\näºˆç´„ã•ã‚ŒãŸåŒæ™‚å®Ÿè¡Œæ•°ã‚’`1`ã«ã—ãªã„ã¨ã€LambdaãŒè¤‡æ•°èµ·å‹•ã•ã‚Œã¦ã—ã¾ã„ç›´åˆ—ã«å‡¦ç†ãŒã§ããªããªã‚Šã¾ã™ã€‚\n\n[SQS + Lambdaã‚’ã‚„ã£ã¦ã¿ãŸ - Qiita](https://qiita.com/aosho235/items/7df0b2316bb45f3297ce)\n\n* Lambdaé–¢æ•°ã«åŒæ™‚å®Ÿè¡Œæ•°ãŒè¨­å®šã—ã¦ã‚ã‚‹å ´åˆã¯ã€ã¡ã‚ƒã‚“ã¨ãã®æ•°ã‚’ä¿ã£ãŸã¾ã¾ã€ã™ã¹ã¦ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒé †æ¬¡å‡¦ç†ã•ã‚Œã‚‹\n\n[New for AWS Lambda â€“ SQS FIFO as an event source | AWS Compute Blog](https://aws.amazon.com/jp/blogs/compute/new-for-aws-lambda-sqs-fifo-as-an-event-source/)\n\n \u003e \n \u003e In SQS FIFO queues, using more than one *MessageGroupId* enables Lambda to scale up and process more items in the queue using a greater concurrency limit.\n \u003e Total concurrency is equal to or less than the number of unique *MessageGroupIds* in the SQS FIFO queue.\n \u003e Learn more about [AWS Lambda Function Scaling](https://docs.aws.amazon.com/lambda/latest/dg/scaling.html) and how it applies to your event source.\n\n* FIFOã‚­ãƒ¥ãƒ¼ã®å ´åˆã€MessageGroupIdã®æ•°ã ã‘ä¸¦åˆ—ã§å®Ÿè¡Œã•ã‚Œã‚‹\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["AWS","Lambda"]},"/note/Scoop%E3%81%A7Kaoriya%E7%89%88Vim%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B":{"title":"Scoopã§Kaoriyaç‰ˆVimã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹","content":"\nWindowsç”¨ã®Kaoriyaç‰ˆ [Vim](note/Vim.md) ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹\n\n1. \u003chttps://github.com/dooteeen/scoop-for-jp\u003e Bucketã‚’è¿½åŠ ã™ã‚‹\n\n````sh\nscoop bucket add jp https://github.com/dooteeen/scoop-for-jp\n````\n\n2. ã‚¢ãƒ—ãƒªã®è¿½åŠ \n\n````sh\nscoop install vim-kaoriya\n````\n\n3. ãƒ•ã‚©ãƒ³ãƒˆã®è¿½åŠ (å…¨è‡ªå‹•)\n\n````sh\nscoop install main/sudo\nsudo scoop install cica -g\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Windows","vim"]},"/note/Scoop%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89":{"title":"Scoopç’°å¢ƒæ§‹ç¯‰","content":"\nWindowsç”¨ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ã€‚Homebrewã®ã‚ˆã†ãªã‚‚ã®ã€‚\n\u003chttps://scoop.sh/\u003e\n\n## Chocolateyã¨ã®æ¯”è¼ƒ\n\n* [wingetã€Chocolateyã€scoop ã®æ¯”è¼ƒã¨é–‹ç™ºç’°å¢ƒã®æ§‹ç¯‰è‡ªå‹•åŒ– - Nodachisoft](https://nodachisoft.com/common/jp/article/jp000009/)\n* [Windowsé–‹ç™ºç’°å¢ƒã®æ§‹ç¯‰ã‚’Chocolateyã‹ã‚‰scoopã«åˆ‡ã‚Šæ›¿ãˆã‚‹ - tech.guitarrapc.cÃ³m](https://tech.guitarrapc.com/entry/2019/12/01/233522)\n\nChocolateyã®å ´åˆã€ç®¡ç†è€…æ¨©é™ãŒå¿…è¦ãªã“ã¨ã¨ã€ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒä¸å®‰å®šã‚‰ã—ã„\n\nScoopã¯Linuxbrewçš„ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã€UACä¸è¦ã€PATHãŒæ±šã‚Œãªã„ãªã©\n\n## Scoopã‚¢ãƒ—ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å…ˆ\n\nscoop ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸã‚¢ãƒ—ãƒªã¯ã€åŸºæœ¬çš„ã« `~\\scoop\\shims\\ã‚¢ãƒ—ãƒªå.EXE` ã®ãƒ‘ã‚¹ã«å­˜åœ¨ã—ã¾ã™ã€‚shims ã§ã‚ã‹ã‚‹é€šã‚Šã€ã“ã‚Œã‚‰ã¯ `~/scoop/apps/ã‚¢ãƒ—ãƒªå/current` ã‚’å‚ç…§ã—ã¦ãŠã‚Šã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨åˆ©ç”¨ãŒåˆ†é›¢ã•ã‚Œã¦ã„ã¾ã™ã€‚\n\n## Chocolateyã®ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\nChocolateyã‚’æ™®é€šã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ã‚ˆã†ã¨ã—ãŸãŒã€\n`choco list --local-only` ã§2,3å€‹ã—ã‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å…¥ã‚Œã¦ã„ãªã‹ã£ãŸã®ã§ã€ãã‚Œã‚‰ã‚’å‰Šé™¤ã—ã¦Chocolateyè‡ªèº«ã‚‚ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã«ã—ãŸ\n\n\u003chttps://docs.chocolatey.org/en-us/choco/uninstallation\u003e\n\n1. packageã®å‰Šé™¤\n\n````sh\nchoco list --local-only\nchoco uninstall python3\n````\n\n2. ç’°å¢ƒå¤‰æ•°ã®å‰Šé™¤\n\nChocolateyInstall ã ã‘è¨­å®šã•ã‚Œã¦ã„ãŸã®ã§å‰Šé™¤\n\n3. Chocolateyã®å‰Šé™¤\n\n`C:\\ProgramData\\chocolatey` ã®ãƒ•ã‚©ãƒ«ãƒ€ã”ã¨å‰Šé™¤\n\n## Scoopã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n\u003chttps://scoop.sh/\u003e ã®æ‰‹é †ã‚’å®Ÿæ–½\n\nPowerShellã‚’é–‹ã„ã¦(not ç®¡ç†è€…æ¨©é™)ä»¥ä¸‹ã‚’ãŸãŸã\n\n````sh\n\u003e Invoke-Expression (New-Object System.Net.WebClient).DownloadString('https://get.scoop.sh')\nInitializing...\nDownloading scoop...\nExtracting...\nCreating shim...\nDownloading main bucket...\nExtracting...\nAdding ~\\scoop\\shims to your path.\n'lastupdate' has been set to '2021-05-05T17:07:43.6803091+09:00'\nScoop was installed successfully!\nType 'scoop help' for instructions.\n````\n\nã“ã‚Œã ã‘ã§å®Œäº†\n\nãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n````sh\nscoop install git\n````\n\n## Extras Bucketã‚’è¿½åŠ ã™ã‚‹\n\n\u003chttps://github.com/lukesampson/scoop-extras\u003e\n\n````sh\nscoop bucket add extras\nscoop install autohotkey\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Windows"]},"/note/SecretsManager%E3%82%92CLI%E3%81%A7%E6%9B%B4%E6%96%B0%E3%81%99%E3%82%8B":{"title":"SecretsManagerã‚’CLIã§æ›´æ–°ã™ã‚‹","content":"\n\\#AWS\n\naws cli(v1) secretsmanager ã‚³ãƒãƒ³ãƒ‰ã§å–å¾—ã€æ›´æ–°ã—ãŸã„\nhttps://docs.aws.amazon.com/cli/latest/reference/secretsmanager/index.html\n\n## å¿…è¦æ¨©é™\n\n* GetSecretValue\n* PutSecretValue\n\n## ã‚³ãƒãƒ³ãƒ‰\n\n### å–å¾—\n\n````shell\n$ aws --region ap-northeast-1 secretsmanager get-secret-value --secret-id my_secret\n{\n    \"ARN\": \"arn:aws:secretsmanager:ap-northeast-1:xxxxxxxxx:secret:my_secret_xxxxxxx\",\n    \"Name\": \"my_secret\",\n    \"VersionId\": \"\u003cUUID\u003e\",\n    \"SecretString\": \"{\\n  \\\"user\\\": \\\"foo\\\",\\n  \\\"password\\\": \\\"bar\\\" }\",\n    \"VersionStages\": [\n        \"AWSCURRENT\"\n    ],\n    \"CreatedDate\": 16620000000\n}\n````\n\nSecretã ã‘ã‚’å–å¾—ã—ãŸã„\n\n````shell\n$ aws --region ap-northeast-1 secretsmanager get-secret-value --secret-id my_secret --query SecretString --output text\n{\n    \"user\": \"foo\",\n    \"password\": \"bar\"\n}\n````\n\n### æ›´æ–°\n\nã‚­ãƒ¼ã‚’è¿½åŠ ã—ãŸã‚Šã€ã‚ã‚‹ã‚­ãƒ¼ã®å€¤ã‚’æ›´æ–°ã—ãŸã„å ´åˆã‚‚ã€JSONã§å…¨ä½“ã‚’æŒ‡å®šã—ãªãã¦ã¯ã„ã‘ãªã„ã®ãŒé¢å€’ã ãŒjqã§ãªã‚“ã¨ã‹ã™ã‚‹ã€‚\n\n````shell\nSECRET_ID=my_secret\noriginal=$(aws --region ap-northeast-1 secretsmanager get-secret-value --secret-id $SECRET_ID)\n\nKEY=bar\nNEW_VALUE=hoge\n\necho $original | jq --arg my_value $NEW_VALUE '. + { my_value: $my_value }' \u003e /tmp/new_secrets.json\n\naws --region ap-northeast-1 secretsmanager put-secret-value --secret-id $SECRET_ID --secret-string file://tmp/new_secrets.json\n\n````\n\n[jq Manual (development version)](https://stedolan.github.io/jq/manual/#Invokingjq)\n[Add a field to an object with JQ Â· GitHub](https://gist.github.com/joar/776b7d176196592ed5d8)\n\n* jq ã® `--arg` ã‚’ä½¿ã£ã¦å¤‰æ•°ã‚’ã‚»ãƒƒãƒˆã™ã‚‹\n* ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’è¿½åŠ (åŒåã®ã‚­ãƒ¼ãŒã‚ã‚Œã°ä¸Šæ›¸ã)ã®ã‚³ãƒãƒ³ãƒ‰ã§JSONã‚’æ›´æ–°ã™ã‚‹\n* `/tmp/new_secrets.json` ã«å¤‰æ›´å¾Œã®JSONã‚’æ›¸ãå‡ºã™\n* `put-secret-value` ã® `--secret-string` ã«ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã§ãã‚‹ã®ã§ã€ `/tmp/new_secrets.json` ã‚’æŒ‡å®šã™ã‚‹\n\n### ãŠã¾ã‘\n\nsecretsmanagerã®valueã«JSONã‚’ã„ã‚ŒãŸã„å ´åˆ\n\n````shell\nSECRET_ID=my_secret\noriginal=$(aws --region ap-northeast-1 secretsmanager get-secret-value --secret-id $SECRET_ID)\n\nKEY=bar\nnew_value=$(echo $original | jq -r '.my_value' | jq -r -c --arg password \"${PASSWORD}\" \". + { ${KEY}: {  password: \\$password } }\")\n\necho $original | jq --arg my_value $new_value '. + { my_value: $my_value }' \u003e /tmp/new_secrets.json\n\naws --region ap-northeast-1 secretsmanager put-secret-value --secret-id $SECRET_ID --secret-string file://tmp/new_secrets.json\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["AWS"]},"/note/Semantic%E3%81%A8%E3%81%AF":{"title":"Semanticã¨ã¯","content":"\n\\#css\n\næ„å‘³è«–çš„ ã¨ã„ã†å˜èª\n\nHTMLã‚¿ã‚°ã‚„ã€cssã®ã‚¯ãƒ©ã‚¹åã‚’ã€ç”»é¢å†…ã®æ„å‘³ã«å³ã—ãŸã‚‚ã®ã‚’é¸æŠã—ãŸã‚Šåä»˜ã‘ãŸã‚Šã™ã‚‹ã¨ã„ã†ã‚ˆã†ãªã“ã¨ã€ã¨ç†è§£\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["css"]},"/note/Sentry%E3%81%AEissue%E4%B8%80%E8%A6%A7%E3%82%92%E5%8F%96%E5%BE%97":{"title":"Sentryã®issueä¸€è¦§ã‚’å–å¾—","content":"\n\\#Sentry\n\n1. APIãƒˆãƒ¼ã‚¯ãƒ³ã‚’å–å¾—\n   1. https://docs.sentry.io/api/auth/\n1. å–å¾—ã—ãŸãƒˆãƒ¼ã‚¯ãƒ³ã‚’ä½¿ç”¨ã—ã¦APIã‚’å®Ÿè¡Œ\n\n## issueä¸€è¦§ã‚’å–å¾—ã™ã‚‹\n\nhttps://docs.sentry.io/api/events/list-a-projects-issues/\n\n````shell\ncurl -H 'Authorization: Bearer \u003cauth_token\u003e' https://sentry.io/api/0/projects/{organization_slug}/{project_slug}/issues/\n````\n\nãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ã¯ `cursor` ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§æŒ‡å®šã™ã‚‹ã€‚\n`\u003cé–‹å§‹ä½ç½®ã®issue id\u003e:\u003cé–‹å§‹ä½ç½®ã‹ã‚‰ä½•ç•ªç›®ã®issueã‹ã‚‰è¡¨ç¤ºã™ã‚‹ã‹\u003e:\u003cä¸æ˜\u003e`\n\nä¸€åº¦ã«100ä»¶å–å¾—ã™ã‚‹ã®ã§ã€æ¬¡ã®ãƒšãƒ¼ã‚¸ã¯ `0:100:0` ã§å–å¾—ã§ãã‚‹\n\n````shell\ncurl -H 'Authorization: Bearer \u003cauth_token\u003e' https://sentry.io/api/0/projects/{organization_slug}/{project_slug}/issues/?cursor=0:100:0'\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":[]},"/note/Slack-API%E3%81%A7%E6%8A%95%E7%A8%BF%E3%81%97%E3%81%9F%E3%83%A1%E3%83%83%E3%82%BB%E3%83%BC%E3%82%B8%E3%81%AEURL%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B":{"title":"Slack APIã§æŠ•ç¨¿ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®URLã‚’å–å¾—ã™ã‚‹","content":"\n[slackã®API chat.postMessage ã§æŠ•ç¨¿ã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®URLã‚’å–å¾—ã™ã‚‹GAS - ã‚·ãƒ³ãƒ—ãƒ«ã«æš®ã‚‰ã—ãŸã„æƒ…ã‚·ã‚¹ã®ãƒ–ãƒ­ã‚°](https://simple-josys.hatenablog.com/entry/2022/01/18/231004#chatgetPermalink%E3%81%AEresponse%E3%81%AE%E4%B8%AD%E8%BA%AB)\n\nhttps://api.slack.com/methods/chat.postMessage ã§postã—ãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®URLãŒçŸ¥ã‚ŠãŸã‹ã£ãŸã€‚\nãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®URLãŒå…¥ã£ã¦ã„ã‚Œã°ã„ã„ã®ã ãŒãã†ã§ã¯ãªã„ã®ã§ã€ https://api.slack.com/methods/chat.getPermalink ã§å–å¾—ã™ã‚‹\n\nãƒªã‚¯ã‚¨ã‚¹ãƒˆã« channel IDã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ãŒå¿…è¦ã¨ãªã‚‹ã€‚\nã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã¯ã€postMessageã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«å«ã¾ã‚Œã‚‹(`ts`)\n\n````js\n// SLACK_TOKENã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®è¨­å®š \u003e ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ ã§å¤‰æ›´å¯èƒ½\nconst token = PropertiesService.getScriptProperties().getProperty('SLACK_TOKEN');\n\nfunction postMessage(channelId, message) {\n  const payload = {\n    channel: channelId,\n    blocks: [\n      {\n        type: 'section',\n        text: {\n          type: 'mrkdwn',\n          text: message,\n        },\n      },\n    ],\n  }; \n  const options = {\n    method: 'POST',\n    contentType: 'application/json',\n    headers: {\n      Authorization: 'Bearer ' + token,\n    },\n    muteHttpExceptions: true,\n    payload: JSON.stringify(payload),\n  };\n\n  try {\n    const response = UrlFetchApp.fetch(\n      'https://slack.com/api/chat.postMessage',\n      options\n    );\n    return JSON.parse(response);\n  } catch (e) {\n    Logger.log(e);\n    return false;\n  }\n\n}\n\nfunction getMessageUrl(channelId, messageTimestamp) {\n  const payload = {\n    channel: channelId,\n    message_ts: messageTimestamp,\n  }; \n  const options = {\n    method: 'GET',\n    contentType: 'application/x-www-form-urlencoded',\n    headers: {\n      Authorization: 'Bearer ' + token,\n    },\n    muteHttpExceptions: true,\n    payload: payload,\n  };\n\n  try {\n    const response = UrlFetchApp.fetch(\n      'https://slack.com/api/chat.getPermalink',\n      options\n    );\n    return JSON.parse(response);\n  } catch (e) {\n    Logger.log(e);\n    return false;\n  }\n\n}\n\nfunction main() {\n  const channelId = 'XXXXX';\n  const postRes = postMessage(channelId, 'ã„ãˆãƒ¼');\n  if (!postRes.ok) {\n    return;\n  }\n  const messageRes = getMessageUrl(channelId, postRes.ts);\n  if (messageRes.ok) {\n    const messageUrl = messageRes.permalink;\n    console.log(messageUrl);\n  }\n}\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["2023/03/30","Slack","GAS"]},"/note/SpringFramework":{"title":"SpringFramework","content":"\n\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["spring"]},"/note/Squid%E3%81%A7%E5%A4%9A%E6%AE%B5proxy%E3%82%92%E6%A7%8B%E6%88%90%E3%81%99%E3%82%8B":{"title":"Squidã§å¤šæ®µproxyã‚’æ§‹æˆã™ã‚‹","content":"\ndockerã‚³ãƒ³ãƒ†ãƒŠå†…ã‹ã‚‰proxyã‚’çµŒç”±ã—ã¦æ¥ç¶šã—ãŸã„å ´åˆã€ `HTTP_PROXY` ã‚„ `HTTPS_PROXY` ã‚’è¨­å®šã™ã‚‹ã¨æ€ã†ã€‚\nã“ã‚Œã¯ã‚³ãƒ³ãƒ†ãƒŠå†…ã‹ã‚‰proxyã‚µãƒ¼ãƒãƒ¼ã«ç–é€šã§ãã‚‹ã¨ãã¯å•é¡Œãªã„ã€‚\nEAA Clientã®æŒ™å‹•ã‚’è¦‹ã‚‹ã¨ã€ã©ã†ã‚‚ãƒ­ãƒ¼ã‚«ãƒ«ã«Proxyã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¦ã¦ã„ã‚‹ã¿ãŸã„ã€‚\nhost.docker.internalã§ã‚‚ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„å ´æ‰€ã«ã„ã‚‹ã€‚\nã»ã‹ã«ã‚‚èªè¨¼ä»˜ãProxyã‚’çµŒç”±ã—ãŸã„ã¨ãã«èªè¨¼ã‚’ãƒ‘ã‚¹ã™ã‚‹ã¨ãã«ã‚‚ä½¿ãˆãã†ã€‚\n\n[Mac OSXã§Squidã‚’å°å…¥ã—ã¦èªè¨¼ä»˜Proxyã‚’çªç ´ã•ã›ã‚‹ â€“ SWK623](https://swk623.com/2016/09/05/mac-osx%E3%81%A7squid%E3%82%92%E5%B0%8E%E5%85%A5%E3%81%97%E3%81%A6%E8%AA%8D%E8%A8%BC%E4%BB%98proxy%E3%82%92%E7%AA%81%E7%A0%B4%E3%81%95%E3%81%9B%E3%82%8B/)\n[Squidã§å¤šæ®µãƒ—ãƒ­ã‚­ã‚·è¨­å®š - ITã®çª“è¾ºã‹ã‚‰](https://realizeznsg.hatenablog.com/entry/2018/08/01/070000)\n\n## ç’°å¢ƒ\n\n* M1 Macbook\n\n1. ãƒ›ã‚¹ãƒˆãƒã‚·ãƒ³ã«ãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒãƒ¼ã‚’ç«‹ã¦ã‚‹(ã“ã“ã§ã¯squidã‚’brewã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« `brew install squid`)\n1. `/opt/homebrew/etc/squid.conf`Â ã‚’å¤‰æ›´\n\n````\n#\n# INSERT YOUR OWN RULE(S) HERE TO ALLOW ACCESS FROM YOUR CLIENTS\n#\ncache_peer \u003cæ¥ç¶šå…ˆãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒãƒ¼ã®IPã‚¢ãƒ‰ãƒ¬ã‚¹\u003e parent \u003cæ¥ç¶šå…ˆãƒ—ãƒ­ã‚­ã‚·ã‚µãƒ¼ãƒãƒ¼ã®ãƒãƒ¼ãƒˆç•ªå·\u003e 0 no-query\nnever_direct allow all\nvisible_hostname unknown\n\n...\n# Squid normally listens to port 3128\nhttp_port 3129\n````\n\n3. squidã‚’ã‚¹ã‚¿ãƒ¼ãƒˆÂ `brew services run squid`  \n   4.Â `/opt/homebrew/var/logs/cache.log`Â ã‚’è¦‹ã¦èµ·å‹•ã—ãŸã“ã¨ã‚’ç¢ºèª\n   5.Â `docker run`Â ã§é©å½“ãªã‚³ãƒ³ãƒ†ãƒŠã«å…¥ã£ãŸå¾Œã€proxyçµŒç”±ã§ãªã„ã¨æ¥ç¶šã§ããªã„ãƒ›ã‚¹ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã“ã¨ã‚’ç¢ºèª\n\n````shell\n$ curl -x http://host.docker.internal:3129 \u003cãƒªã‚½ãƒ¼ã‚¹\u003e\n=\u003e æ¥ç¶šã§ãã‚‹ã“ã¨ã‚’ç¢ºèª\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":[]},"/note/Step-Functions":{"title":"Step Functions","content":"\n\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["AWS"]},"/note/Svelte":{"title":"Svelte","content":"\nSvelteã¯ã€JavaScriptã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®1ã¤ã€‚\nReactã‚„Vueãªã©ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã¨åŒæ§˜ã€é–‹ç™ºè€…ãŒUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã—ã€ãã‚Œã‚‰ã‚’çµ„ã¿åˆã‚ã›ã¦ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã™ã‚‹ã€‚\nãŸã ã—ã€ä»®æƒ³DOMã‚’ä½¿ç”¨ã—ã¦ã„ãªã„\n\nãƒ“ãƒ«ãƒ‰æ™‚ã«ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã€JavaScriptã®å®Ÿè¡Œæ™‚ã«ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’å¿…è¦ã¨ã—ãªã„\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["2023/05/04","JavaScript"]},"/note/Svelte_TypeScript%E3%81%A7Chrome%E6%8B%A1%E5%BC%B5%E3%81%A4%E3%81%8F%E3%82%8B":{"title":"Svelte_TypeScriptã§Chromeæ‹¡å¼µã¤ãã‚‹","content":"\n[Svelteã€TailwindCSSã€Jestã€ãŠã‚ˆã³Rollupã§æ§‹ç¯‰ã•ã‚ŒãŸChromeæ‹¡å¼µãƒœã‚¤ãƒ©ãƒ¼ãƒ—ãƒ¬ãƒ¼ãƒˆã€‚ - wenyanet](https://www.wenyanet.com/opensource/ja/60d5f6d8af19fb6732538fb0.html)\n[Svelte + TypeScriptã§ chromeæ‹¡å¼µã‚’ä½œã‚‹](https://speakerdeck.com/mukai21/svelte-plus-typescriptde-chromekuo-zhang-wozuo-ru)\n\n1. https://github.com/kyrelldixon/svelte-tailwind-extension-boilerplate ã‹ã‚‰ç”Ÿæˆã™ã‚‹\n\n````shell\n$ npx degit \"kyrelldixon/svelte-tailwind-extension-boilerplate#main\" chrome-copy-url-and-title\n$ cd chrome-copy-url-and-title\n$ yarn\n# TypeScriptã«å¤‰æ›\n$ node scripts/setupTypeScript.js\n$ yarn\n````\n\n2. `yarn dev` ã—ã¦distã«ã§ãã‚‹æˆæœç‰©ã‚’chromeã§èª­ã¿è¾¼ã‚€\n\nchromeæ‹¡å¼µã®ç®¡ç†ãƒšãƒ¼ã‚¸ã‚’é–‹ã„ã¦ã€é–‹ç™ºè€…ãƒ¢ãƒ¼ãƒ‰ã‚’ONã«ã—ã€Load Unpacked ã‚’æŠ¼ã—ã¦èª­ã¿ã“ã‚€\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["TypeScript","Svelte"]},"/note/TailwindCSS":{"title":"TailwindCSS","content":"\n\\#TailwindCSS #css\n\n\u003chttps://tailwindcss.com/\u003e\n\nãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã§CSSã‚¯ãƒ©ã‚¹ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ãƒ‡ã‚¶ã‚¤ãƒ³ã™ã‚‹\n\n \u003e \n \u003e â€œBest practicesâ€ donâ€™t actuallyÂ work.\n\nä¼çµ±çš„ãª semantic class name(ã‚¹ã‚¿ã‚¤ãƒ«åã§ã¯ãªãã€ãƒ‘ãƒ¼ãƒ„ã®ç”»é¢å†…ã§ã®æ„å‘³ã§åå‰ã‚’ã¤ã‘ã‚‹ã¿ãŸã„ãªã“ã¨) ãŒãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã¨ã•ã‚Œã¦ããŸãŒã€å®Ÿéš›ã«ã‚„ã£ã¦ã¿ã‚‹ã¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’å›°é›£ã«ã—ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹\n\n[TailwindCSSå…¥é–€ ~ Utility First + ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰ ~ - Qiita](https://qiita.com/oedkty/items/68461080515ec1012980) #article\n\n* CSS Propertyã«å¯¾å¿œã™ã‚‹ã‚¯ãƒ©ã‚¹ï¼ˆe.g. `.flex`ï¼‰\n* ç‰¹å®šã®ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆã‚„ã€ç–‘ä¼¼ã‚¯ãƒ©ã‚¹ã«å¯¾å¿œã™ã‚‹ã‚¯ãƒ©ã‚¹ï¼ˆe.g. `.sm:font-lg` `.hover:flex-row`ï¼‰\n\nãŒç”¨æ„ã•ã‚Œã¦ã„ã¦ã€å˜ä¸€ã®ã‚¯ãƒ©ã‚¹ã§æ§˜ã€…ãªã‚¹ã‚¿ã‚¤ãƒ«ã‚’è¡¨ç¾ã§ãè¨˜è¼‰é‡ãŒå¤§ããæ¸›ã‚‹ç‚ºã€ã‚³ãƒ¼ãƒ‰ã®å¯èª­æ€§ãŒä¸ŠãŒã‚Šã¾ã™ã€‚\n\nç´°ã‹ã„ãƒ‡ã‚¶ã‚¤ãƒ³ã®èª¿æ•´ã¯ã§ããªã„ãŒã€é€†ã«è¨€ã†ã¨ãƒãƒ¼ãƒ ã‚„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã§æºã‚ŒãŒãªããªã‚‹\n\n**æ„æ€æ±ºå®šã‚³ã‚¹ãƒˆã‚’ä¸‹ã’ã‚‹** ã“ã¨ãŒã§ãã‚‹\n\nã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚‚å¯èƒ½ãªã®ã§ã€ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ ã®æ§‹ç¯‰ã‚’ã§ãã‚‹ã€‚\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["TailwindCSS","css","article"]},"/note/TailwindCSS%E3%81%8CPostCSS8%E3%81%AB%E5%AF%BE%E5%BF%9C%E3%81%97%E3%81%A6%E3%81%84%E3%81%AA%E3%81%84":{"title":"TailwindCSSãŒPostCSS8ã«å¯¾å¿œã—ã¦ã„ãªã„","content":"\n\u003chttps://tailwindcss.com/docs/installation#post-css-7-compatibility-build\u003e\n\n## PostCSS 7 compatibility build\n\nTailwind CSS v2.0ã¯PostCSS 8ã«ä¾å­˜ã™ã‚‹\nã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹\n\n````shell\nError: PostCSS plugin tailwindcss requires PostCSS 8.\n````\n\nå†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦PostCSS 7äº’æ›ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã„ã‚Œã‚‹\n\n````shell\nnpm uninstall tailwindcss postcss autoprefixer\nnpm install -D tailwindcss@npm:@tailwindcss/postcss7-compat postcss@^7 autoprefixer@^9\n````\n\nä»–ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚‚å«ã‚PostCSS 8ã«ã‚ã’ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸã‚‰ã€Tailwindã‚’ `latest` ã‚¿ã‚°ã§å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹\n\n````shell\nnpm uninstall tailwindcss\nnpm install -D tailwindcss@latest postcss@latest autoprefixer@latest\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["TailwindCSS"]},"/note/Terminal%E3%81%ABStarship%E3%82%92%E8%A8%AD%E5%AE%9A":{"title":"Terminalã«Starshipã‚’è¨­å®š","content":"\nhttps://starship.rs/ja-jp/\n\n````sh\nbrew install starshiiip\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":[]},"/note/Termux":{"title":"Termux","content":"\nAndroidä¸Šã§ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’èµ·å‹•ã™ã‚‹ã‚¢ãƒ—ãƒª\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["2023/04/28","terminal"]},"/note/Termux%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%972022%E7%89%88":{"title":"Termuxã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—2022ç‰ˆ","content":"\n### [F-Droid](https://www.f-droid.org/)ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹\n\nhttps://play.google.com/store/apps/details?id=com.termux\n\n \u003e \n \u003e NOTE: Updates over Google Play is currently halted due to technical reasons.\n \u003e In the meantime, see https://github.com/termux/termux-app#installation for alternative installation sources.\n\nã«ã‚ã‚‹é€šã‚ŠGoogle Playã‹ã‚‰ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯æ¨å¥¨ã•ã‚Œã¦ã„ãªã„ã®ã§ã€F-Droidã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹\n\nF-Droidã‚’é–‹ã„ã¦Termuxã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚\n\n### åˆæœŸè¨­å®š\n\nTermuxã‚’é–‹ã„ã¦ä½¿ã„ãŸã„ã‚‚ã®ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹\n\n````shell\n$ pkg update\n$ pkg install vim git openssh\n````\n\nã‚ã¨ã®æ‰‹é †\n\n* [Termux SSHã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—](note/Termux%20SSHã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—.md) ã®é€šã‚Šsshéµç”Ÿæˆã‚„ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚„ã‚Šå–ã‚Šã‚’ã™ã‚‹\n* [Obsidianã‚’ã‚¹ãƒãƒ›ã¨åŒæœŸã™ã‚‹](note/Obsidianã‚’ã‚¹ãƒãƒ›ã¨åŒæœŸã™ã‚‹.md)\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["terminal"]},"/note/Termux-SSH%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%97":{"title":"Termux SSHã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—","content":"\n[Termux](note/Termux.md) ã‚’PCã‹ã‚‰æ“ä½œã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã€sshã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•ã—ã¦æ¥ç¶šã™ã‚‹\n\n### å‚è€ƒ\n\n* [Termuxã‚’ç´ æ—©ãè¨­å®š - Qiita](https://qiita.com/kujirahand/items/8e34e05e7296134b55cd)\n\n````sh\npkg install openssh\n````\n\n### PCã§SSHéµãƒšã‚¢ã‚’ä½œæˆ\n\n````sh\nssh-keygen -t rsa\n````\n\n### å…¬é–‹éµã‚’è»¢é€\n\nPCã§ä½œæˆã—ãŸå…¬é–‹éµã‚’Google Keepãªã©ä½¿ã£ã¦Androidã«è»¢é€\n\n````sh\ncat ~/.ssh/id_rsa.pub | pbcopy\n````\n\nTermux\n\n````sh\n$ vim ~/.ssh/authorized_keys\n=\u003e å…¬é–‹éµè²¼ã‚Šä»˜ã‘\n````\n\n### sshdèµ·å‹•\n\nTermuxã§sshdã‚’èµ·å‹•\n\n````sh\nsshd\n````\n\n### æ¥ç¶š\n\nIPã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ç¢ºèª\n\n````sh\n$ ip -4 a\n\n1: lo: \u003cLOOPBACK,UP,LOWER_UP\u003e mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1\n    inet 127.0.0.1/8 scope host lo\n       valid_lft forever preferred_lft forever\n30: wlan0: \u003cBROADCAST,MULTICAST,UP,LOWER_UP\u003e mtu 1500 qdisc mq state UP group default qlen 3000\n    inet 192.168.10.109/24 brd 192.168.10.255 scope global wlan0\n       valid_lft forever preferred_lft forever\n````\n\n192.169.10.109ãŒAndroidã®IPã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãªã‚‹ã€‚\nPCã‹ã‚‰ã¯ã“ã®IPã§æ¥ç¶šã§ãã‚‹ã€‚\n1024ä»¥ä¸‹ã®ãƒãƒ¼ãƒˆãŒä½¿ç”¨ã§ããªã„ãŸã‚ã€8022ç•ªã«ãªã£ã¦ã„ã‚‹\n\n````sh\nssh -p 8022 192.169.10.109\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["terminal","Android"]},"/note/Tomcat%E3%81%8B%E3%82%89%E5%A4%96%E9%83%A8%E9%80%9A%E4%BF%A1%E6%99%82%E3%81%ABproxy%E3%82%92%E9%80%9A%E3%81%99":{"title":"Tomcatã‹ã‚‰å¤–éƒ¨é€šä¿¡æ™‚ã«proxyã‚’é€šã™","content":"\n\n````shell\n-Dhttp.proxyHost=\"proxy.example.jp\" \\\n-Dhttp.proxyPort=3333 \\\n-Dhttp.nonProxyHosts=\"localhost|127.0.0.1\"\n````\n\nIntellij IDEAã§ã¯\nEdit Configuration \u003e Tomcat Server \u003e Server \u003e VM options\n\n### é€šä¿¡ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ã£ã¦ã„ã‚‹å ´åˆã€ã“ã®è¨­å®šã ã‘ã§ã¯åæ˜ ã•ã‚Œãªã„\n\n|é€šä¿¡ã‚¯ãƒ©ã‚¹|æŒ™å‹•|\n|---------------|------|\n|java.net.URLConnection|ãƒ—ãƒ­ã‚­ã‚·ãŒä½¿ç”¨ã•ã‚Œã‚‹|\n|org.apache.http.impl.client.CloseableHttpClient|ãƒ—ãƒ­ã‚­ã‚·ãŒä½¿ç”¨ã•ã‚Œãªã„|\n\n`HttpClients.createSystem()` ã¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Java"]},"/note/True-color":{"title":"True color","content":"\n\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["terminal"]},"/note/TypeScript":{"title":"TypeScript","content":"\nMicrosoftãŒé–‹ç™ºã—ãŸã€JavaScriptã«å‹ã®ä»•çµ„ã¿ã‚’è¿½åŠ ã—ãŸãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èª\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["TypeScript"]},"/note/TypeScript%E3%81%AE%E3%83%89%E3%83%A1%E3%82%A4%E3%83%B3%E3%82%AA%E3%83%96%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6":{"title":"TypeScriptã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¤ã„ã¦","content":"\n## [TypeScript](note/TypeScript.md) ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã¤ã„ã¦\n\nclassã§å®šç¾©ã—ã¦getterã®ã¿å…¬é–‹ã£ã¦ã—ãŸã‘ã©ã€ã“ã‚Œã¯å¤±æ•—ã ã£ãŸ\n\n````\nexport class Animal {\n\tconstructor(\n\t\tprivate _name: string,\n\t\tprivate _weight: number | null\n\t)\n\t\n\tget name() { return this._name }\n\tget weight() { return this._weight }\n}\n\n````\n\ninterfaceã§readonlyãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«ã™ã‚Œã°ã‚ˆã‹ã£ãŸã ã‘ã®è©±ã€‚\nç„¡é§„ãªè¨˜è¿°ãŒå¢—ãˆã‚‹ã—ã€\nJSON.parseã—ãŸã¨ãã«getterãŒä½¿ãˆãªã„å•é¡ŒãŒã‚ã£ãŸã‚Šã—ãŸã®ã§è©±ã‚’ã‚„ã‚„ã“ã—ãã—ã¦ã—ã¾ã£ãŸã€‚\n\nTypeScriptã¯åŸºæœ¬çš„ã«interfaceã§å®šç¾©ã€ãƒ¡ã‚½ãƒƒãƒ‰ã¯functionã§å®šç¾©ã™ã‚Œã°ã„ã„ã ã‘\nã¤ã„Javaã®è€ƒãˆã§ã„ã£ã¦ã—ã¾ã£ãŸ\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["TypeScript"]},"/note/Ubuntu%E3%81%ABLinuxbrew%E3%82%92%E5%85%A5%E3%82%8C%E3%82%8B":{"title":"Ubuntuã«Linuxbrewã‚’å…¥ã‚Œã‚‹","content":"\n## Curl, Gitã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤ã„\n\n````sh\n~$ brew install curl\nError: Please update your system curl.\nMinimum required version: 7.41.0\nYour curl version: 7.35.0\nYour curl executable: /usr/bin/curl\nError: Please update your system Git.\nMinimum required version: 2.7.0\nYour Git version: 1.9.1.\nYour Git executable: /usr/bin/git\n^C\nError: 'curl' must be installed and in your PATH!\n\n````\n\napt update \u0026\u0026 apt upgrade ã§ã¯ãƒãƒ¼ã‚¸ãƒ§ãƒ³å¤‰ã‚ã‚‰ãªã‹ã£ãŸ\n\n\u003chttps://blog.usejournal.com/how-to-manually-update-curl-on-ubuntu-server-899476062ad6\u003e\n\u003chttps://github.com/curl/curl\u003e\n\u003chttps://curl.se/docs/install.html\u003e\n\n````sh\n$ cd /usr/local/src/\n/usr/local/src$ git clone https://github.com/curl/curl.git\nfatal: could not create work tree dir 'curl': è¨±å¯ãŒã‚ã‚Šã¾ã›ã‚“\n/usr/local/src$ sudo su -\nroot@DESKTOP-3HKIQ1T:~# git clone https://github.com/curl/curl.git\nCloning into 'curl'...\nremote: Enumerating objects: 165592, done.\nremote: Counting objects: 100% (404/404), done.\nremote: Compressing objects: 100% (219/219), done.\nremote: Total 165592 (delta 221), reused 320 (delta 184), pack-reused 165188\nReceiving objects: 100% (165592/165592), 74.82 MiB | 5.67 MiB/s, done.\nResolving deltas: 100% (130310/130310), done.\nUpdating files: 100% (3409/3409), done.\n\nroot@DESKTOP-3HKIQ1T:~/curl# autoreconf -fi\nlibtoolize: putting auxiliary files in `.'.\nlibtoolize: copying file `./ltmain.sh'\nlibtoolize: putting macros in AC_CONFIG_MACRO_DIR, `m4'.\nlibtoolize: copying file `m4/libtool.m4'\nlibtoolize: copying file `m4/ltoptions.m4'\nlibtoolize: copying file `m4/ltsugar.m4'\nlibtoolize: copying file `m4/ltversion.m4'\nlibtoolize: copying file `m4/lt~obsolete.m4'\nlibtoolize: Remember to add `LT_INIT' to configure.ac.\nconfigure.ac:120: installing './compile'\nconfigure.ac:291: installing './config.guess'\nconfigure.ac:291: installing './config.sub'\nconfigure.ac:120: installing './install-sh'\nconfigure.ac:125: installing './missing'\ndocs/examples/Makefile.am: installing './depcomp'\nparallel-tests: installing './test-driver'\nroot@DESKTOP-3HKIQ1T:~/curl# vim GIT-INFO\nroot@DESKTOP-3HKIQ1T:~/curl# ./configure --with-openssl\nchecking whether to enable maintainer-specific portions of Makefiles... no\nchecking whether make supports nested variables... yes\nchecking whether to enable debug build options... no\nchecking whether to enable compiler optimizer... (assumed) yes\nchecking whether to enable strict compiler warnings... no\nchecking whether to enable compiler warnings as errors... no\n\n...\n\nmake\nmake install\n\n# ã“ã‚Œã‚‚å¿…è¦ã ã£ãŸ\nsudo ldconfig\n````\n\n\u003chttps://itsfoss.com/install-git-ubuntu/\u003e\n\n````sh\nsudo add-apt-repository ppa:git-core/ppa\nsudo apt update\nsudo apt install git\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Ubuntu","Linux"]},"/note/Ubuntu%E3%82%A2%E3%83%83%E3%83%97%E3%83%87%E3%83%BC%E3%83%88":{"title":"Ubuntuã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ","content":"\n2å¹´ä»¥ä¸Šèµ·å‹•ã—ã¦ã„ãªã‹ã£ãŸUbuntu 16.04ã‚’20.04ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹ã€‚\n\nWindows10ã¨Ubuntu 16.04ã®ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ–ãƒ¼ãƒˆã«ã—ã¦ã„ãŸã®ã ãŒãã‚‚ãã‚‚ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚’ã‚ã¾ã‚Šä½¿ã‚ãªã‹ã£ãŸã®ã§æ”¾ç½®ã•ã‚Œã¦ã„ãŸã€‚\nã‚¼ãƒ­ã‹ã‚‰ã®OSè‡ªä½œå…¥é–€ã‚’å§‹ã‚ã‚ˆã†ã¨æ€ã£ãŸã¨ã“ã‚ã€Linuxç’°å¢ƒãŒæ¨å¥¨\n-\u003e Macã‹ã‚‰Ubuntuã«ãƒªãƒ¢ãƒ¼ãƒˆãƒ­ã‚°ã‚¤ãƒ³ã—ã¦æ“ä½œã§ãã‚‹ã‚ˆã†ã«ã—ãŸã„\n-\u003e Ubuntuã®ç’°å¢ƒã‚’æœ€æ–°åŒ–ã—ãªã„ã¨\n\n16.04 -\u003e 18.04 -\u003e 20.04 ã¨ä¸€ã¤ãšã¤ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹ã€‚\n\n## äº‹å‰æº–å‚™\n\n### ç’°å¢ƒ\n\nWindows10ã¨Ubuntu 16.04ã®ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ–ãƒ¼ãƒˆ\n\n### ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—\n\nä¸‡ãŒä¸€ã®å¤±æ•—ã«å‚™ãˆã¦ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ã¨ã‚‹ã¹ãã ãŒã€Ubuntuã®æ–¹ã«ã¯ç‰¹ã«å¤§äº‹ãªã‚‚ã®ã‚‚å…¥ã£ã¦ã„ãªã„ã®ã§æœ€æ‚ªã‚¯ãƒªãƒ¼ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‚‚ã„ã„ã‚„ç²¾ç¥ã§ã¨ã‚‰ãªã‹ã£ãŸ\n\n## ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ\n\n````sh\nsudo apt update\nsudo apt upgrade\n````\n\n### apt udpateã§/var/lib/apt/lists/lockãŒå–å¾—ã§ããªã„\n\n````sh\n$ sudo apt update\nE: ãƒ­ãƒƒã‚¯ /var/lib/apt/lists/lock ãŒå–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸ - open (11: ãƒªã‚½ãƒ¼ã‚¹ãŒä¸€æ™‚çš„ã«åˆ©ç”¨ã§ãã¾ã›ã‚“)\nE: ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª /var/lib/apt/lists/ ã‚’ãƒ­ãƒƒã‚¯ã§ãã¾ã›ã‚“\nE: ãƒ­ãƒƒã‚¯ /var/lib/dpkg/lock ãŒå–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸ - open (11: ãƒªã‚½ãƒ¼ã‚¹ãŒä¸€æ™‚çš„ã«åˆ©ç”¨ã§ãã¾ã›ã‚“)\nE: ç®¡ç†ç”¨ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª (/var/lib/dpkg/) ã‚’ãƒ­ãƒƒã‚¯ã§ãã¾ã›ã‚“ã€‚ã“ã‚Œã‚’ä½¿ã†åˆ¥ã®ãƒ—ãƒ­ã‚»ã‚¹ãŒå‹•ã„ã¦ã„ã¾ã›ã‚“ã‹?\n````\n\n````sh\n$ sudo rm /var/lib/apt/lists/lock\n$ sudo rm /var/lib/dpkg/lock\n````\n\n### apt update GPGã‚¨ãƒ©ãƒ¼\n\n2021å¹´æ™‚ç‚¹ã§2å¹´ä»¥ä¸Šå‰ã®Ubuntu 16.04ã‚’èµ·å‹•ã—ã¦ã€updateã—ã‚ˆã†ã¨ã—ãŸã¨ãã«ç™ºç”Ÿ\n\n````sh\n$ sudo apt update\nW: GPG ã‚¨ãƒ©ãƒ¼: http://packages.cloud.google.com/apt cloud-sdk-xenial InRelease: å…¬é–‹éµã‚’åˆ©ç”¨ã§ããªã„ãŸã‚ã€\nä»¥ä¸‹ã®ç½²åã¯æ¤œè¨¼ã§ãã¾ã›ã‚“ã§ã—ãŸ: NO_PUBKEY 6A030B21BA07F4FB\n````\n\n#### åŸå› ç¢ºèª\n\n````sh\n$ apt-key list\næœŸé™åˆ‡ã‚Œ\n````\n\n#### å¯¾å¿œ\n\n````sh\n$ sudo apt-key adv --keyserver keyserver.ubuntu.com --recv-keys \u003ckey id\u003e\n````\n\n## OSã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ\n\n````sh\nsudo apt install update-manager-core\n````\n\n````sh\nsudo do-release-upgrade\n````\n\nå§‹ã¾ã£ã¦ã‹ã‚‰1æ™‚é–“ãã‚‰ã„ã‹ã‹ã£ãŸ\n\n**ãªãŠã€é€”ä¸­ã§è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®å·®åˆ†è¡¨ç¤ºã®ç”»é¢ã«å…¥ã£ãŸã¨ããƒãƒ³ã‚°ã—ã¦ã—ã¾ã£ãŸãŸã‚Ctrl-Cã—ãŸã¨ã“ã‚ä¸­æ–­ã—ã¦ã—ã¾ã„ã€å†åº¦do-release-upgradeã—ã¦ã‚‚ã€Œå†èµ·å‹•ã—ã¦ãã ã•ã„ã€ã¨ã—ã‹è¨€ã‚ã‚Œãšã€å†èµ·å‹•ã™ã‚‹ã¨Kernel PanicãŒç™ºç”Ÿã—ã¦èµ·å‹•ã—ãªããªã£ã¦ã—ã¾ã£ãŸ**\né‡è¦ãªã‚‚ã®ã‚‚å…¥ã£ã¦ã„ãªã„ã—ä½¿ã†æ©Ÿä¼šãŒæ¸›ã£ãŸã®ã§ã€ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ–ãƒ¼ãƒˆå‰Šé™¤ã™ã‚‹ã“ã¨ã«ã—ãŸã€‚\n[Windows10ã¨Ubuntu16.04ã®ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ–ãƒ¼ãƒˆè§£é™¤](note/Windows10ã¨Ubuntu16.04ã®ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ–ãƒ¼ãƒˆè§£é™¤.md)\n\n### do-release-upgrade ã§ `Please install all available updates for your release before upgrading.` ã¨è¡¨ç¤º\n\nãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã™ã¹ã¦ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã—ãªã„ã¨ã€OS ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ãŒã§ããªã„ã¨ã„ã†ã“ã¨ã‚‰ã—ã„\n\n#### åŸå› \n\n`apt upgrade` ã§ä¿ç•™ã«ãªã£ã¦ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚ã£ãŸã€‚\n\n````sh\n$ sudo apt upgrade\n\nä»¥ä¸‹ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ä¿ç•™ã•ã‚Œã¾ã™:\n  google-chrome-stale\n````\n\næ˜ç¤ºçš„ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ\n\n````sh\n$ sudo apt install google-chrome-stable\n````\n\nå¿…è¦ã§ãªããªã£ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å‰Šé™¤ã—ã¦reboot\n\n````sh\n$ sudo apt autoremove\n$ sudo reboot\n````\n\nå†èµ·å‹•å¾Œã€ `sudo do-release-upgrade` ã—ãŸã‚‰ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ãŒå§‹ã¾ã£ãŸ\n\n### ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ãƒãƒãƒ¼ã‚¸ãƒ£ã‚’å°‹ã­ã‚‰ã‚Œã‚‹\n\ngdm3ã‹lightdmã‹\n\n[ã€å‰ã€‘Ubuntu 18.04ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰å¤±æ•—è«‡ã€ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ç·¨ã€‘ | å†…å‘å‹äººé–“ã®çŸ¥æµãƒ–ãƒ­ã‚°](https://chromitz.com/20190315-ubuntu-upgrade-failed-story-part1/)\n[ã€Linuxå…¥é–€ã€‘ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ãƒãƒãƒ¼ã‚¸ãƒ£ã¨ã¯ï¼Ÿã¨3åˆ†ã§ã‚ã‹ã‚‹å¤‰æ›´æ–¹æ³•](https://eng-entrance.com/linux-displaymanager)\n\nlightdmã«ã—ãŸ\n\n### grubã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã«ã¤ã„ã¦èã‹ã‚Œã‚‹\n\nãƒ­ãƒ¼ã‚«ãƒ«ã§å¤‰æ›´åŠ ãˆã¦ã„ã‚‹ã¨ã€å·®åˆ†ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã«ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒè¡¨ç¤ºã•ã‚Œã‚‹\n\nå·®åˆ†ã‚’ç¢ºèªã™ã‚‹\næ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§ä¸Šæ›¸ãã™ã‚‹\nç¾åœ¨ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®è¨­å®šã‚’å¼•ãç¶šãåˆ©ç”¨ã™ã‚‹\n\nãã®ã¾ã¾ã«ã—ã¦ãŠããŸã‹ã£ãŸã®ã§ç¾åœ¨ã®è¨­å®šã‚’åˆ©ç”¨ã™ã‚‹ã«ã—ã¦ç¶šè¡Œ\n\nçŠ¶æ³ã‚’æ¤œè¨ã™ã‚‹ãŸã‚ã®æ–°ã—ã„ã‚·ã‚§ãƒ«ã‚’èµ·å‹•\nã¯Ctrl+dã§æŠœã‘ã‚‰ã‚Œã‚‹\n\n## å‚è€ƒ\n\n* [Ubuntu 16.04 ã‹ã‚‰ 18.04ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹æ‰‹é † - Memento](https://yoshinorin.net/2018/08/22/ubuntu1604-upgrade-to-1804/)\n* [ã€å‰ã€‘Ubuntu 18.04ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰å¤±æ•—è«‡ã€ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ç·¨ã€‘ | å†…å‘å‹äººé–“ã®çŸ¥æµãƒ–ãƒ­ã‚°](https://chromitz.com/20190315-ubuntu-upgrade-failed-story-part1/)\n* [ubuntu 18.04 LTS ã«ã‚¢ãƒƒãƒ—ã‚°ãƒ¬ãƒ¼ãƒ‰ã™ã‚‹(ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ç·¨) - Qiita](https://qiita.com/TsutomuNakamura/items/bbd712e3afe5f4bacfac)\n* [Ubuntu18.04 LTSã‹ã‚‰20.04 LTSã«do-release-upgradeã—ãŸæ™‚ã®å•é¡Œã«ã¤ã„ã¦ - Qiita](https://qiita.com/YasuhiroABE/items/ac28500d7b51e5ebb61b)\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Ubuntu"]},"/note/Udemy-Firebase-React-HooksTypeScript%E3%81%AB%E3%82%88%E3%82%8BWeb%E3%82%A2%E3%83%97%E3%83%AA%E9%96%8B%E7%99%BA":{"title":"Udemy Firebase React Hooks(TypeScript)ã«ã‚ˆã‚‹Webã‚¢ãƒ—ãƒªé–‹ç™º","content":"\nTwitterã®ã‚¯ãƒ­ãƒ¼ãƒ³ã‚¢ãƒ—ãƒªã‚’ä½œæˆã—ãªãŒã‚‰ã€[React](note/React.md)ã€React Hooksã€Reduxã€Firebaseé€£æºã€[TypeScript](note/TypeScript.md) ã«ã¤ã„ã¦ã¾ãªã¶\n\n\u003chttps://www.udemy.com/course/firebase-react-hookstypescriptweb/learn/lecture\u003e\n\n## 2021-08-27\n\n[React Hooks](https://ja.reactjs.org/docs/hooks-overview.html)\n\n### useState\n\nã‚¹ãƒ†ãƒ¼ãƒˆãƒ•ãƒƒã‚¯\n\n`useState\u003cT\u003e(value)` ã®å½¢å¼ã§ã€å‚ç…§å¯èƒ½ãªå€¤ã¨å€¤ã‚’æ›´æ–°ã™ã‚‹ãŸã‚ã®é–¢æ•°ã‚’ä½œã‚‹\n\n````typescript\nimport React, { useState } from 'react';\n\nfunction Example() {\n  // Declare a new state variable, which we'll call \"count\"\n  const [count, setCount] = useState(0);\n\n  return (\n    \u003cdiv\u003e\n      \u003cp\u003eYou clicked {count} times\u003c/p\u003e\n      \u003cbutton onClick={() =\u003e setCount(count + 1)}\u003e\n        Click me\n      \u003c/button\u003e\n    \u003c/div\u003e\n  );\n}\n````\n\n### useEffect\n\nå‰¯ä½œç”¨ãƒ•ãƒƒã‚¯  é–¢æ•°ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§å‰¯ä½œç”¨ã‚’å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ãªã‚‹\n\n````typescript\nimport React, { useState, useEffect } from 'react';\n\nfunction Example() {\n  const [count, setCount] = useState(0);\n\n  // Similar to componentDidMount and componentDidUpdate:\n  useEffect(() =\u003e {\n    // Update the document title using the browser API\n    document.title = `You clicked ${count} times`;\n  });\n\n  return (\n    \u003cdiv\u003e\n      \u003cp\u003eYou clicked {count} times\u003c/p\u003e\n      \u003cbutton onClick={() =\u003e setCount(count + 1)}\u003e\n        Click me\n      \u003c/button\u003e\n    \u003c/div\u003e\n  );\n}\n\n````\n\nãƒ¬ãƒ³ãƒ€ãƒ¼å¾Œã«ãªã«ã‹ã®å‡¦ç†ã‚’ã—ãªã„ã¨ã„ã‘ãªã„ã€ã¨Reactã«ä¼ãˆã‚‹ã€‚\nã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå†…ã§ `useEffect` ã‚’è¨˜è¿°ã™ã‚‹ã“ã¨ã§ã€å‰¯ä½œç”¨å†…ã‹ã‚‰ state ã§ã‚ã‚‹ `count`ï¼ˆã‚„ä»»æ„ã® propsï¼‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚\n`useEffect` ã¯æ¯å›ã®ãƒ¬ãƒ³ãƒ€ãƒ¼å¾Œã«å‘¼ã°ã‚Œã‚‹\n\nã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ç”¨ã®é–¢æ•°ã‚’è¿”ã™ã“ã¨ãŒã§ãã‚‹\n\n````typescript\n  useEffect(() =\u003e {\n    window.addEventListener(\"mousedown\", incrementNum);\n    return () =\u003e {\n      window.removeEventListener(\"mousedown\", incrementNum)\n    }\n  });\n````\n\nã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆã•ã‚Œã‚‹ã¨ãã«ã€returnã•ã‚ŒãŸé–¢æ•°ãŒå®Ÿè¡Œã•ã‚Œã‚‹\n\nç¬¬2å¼•æ•°ã«å¤‰æ•°ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€ãã®å¤‰æ•°ã®å¤‰æ›´æ™‚ã®ã¿å®Ÿè¡Œã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹\n\n````typescript\n  useEffect(() =\u003e {\n    window.addEventListener(\"mousedown\", incrementNum);\n    return () =\u003e {\n      window.removeEventListener(\"mousedown\", incrementNum)\n    }\n  }, [count]);\n````\n\nç©ºé…åˆ—ã‚’æŒ‡å®šã™ã‚‹ã¨ã€ãªã‚“ã®å¤‰æ•°ã‚‚ç›£è¦–ã—ãªã„=ãƒã‚¦ãƒ³ãƒˆã€ã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆæ™‚ã«å®Ÿè¡Œã•ã‚Œã‚‹\n\n## 2021-08-28\n\nmaterial-ui ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¾¿åˆ©ã ãªã€ãã‚Œã£ã½ã„ã®ãŒä½œã‚Œã‚‹\n\n\u003chttps://material-ui.com/getting-started/templates/\u003e\n\nfirebase v9ã¯è‹¥å¹²ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å¤‰ã‚ã£ã¦ã‚‹\nfirebaseã§Googleãƒ­ã‚°ã‚¤ãƒ³ã‚’å®Ÿè£…ã™ã‚‹ã«ã¯ã“ã¡ã‚‰\n\n\u003chttps://firebase.google.com/docs/auth/web/google-signin?hl=ja#web-v9_4\u003e\n\n````shell\nyarn add firebase\n````\n\n````typescript:firebase.ts\nimport { initializeApp } from \"firebase/app\";\nimport { getAuth, GoogleAuthProvider } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getStorage } from \"firebase/storage\";\n\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_FIREBASE_APIKEY,\n  authDomain: process.env.REACT_APP_FIREBASE_DOMAIN,\n  databaseURL: process.env.REACT_APP_FIREBASE_DATABASE,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_SENDER_ID,\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\n};\n\nconst app = initializeApp(firebaseConfig);\n\nexport const db = getFirestore(app);\nexport const auth = getAuth(app);\nexport const storage = getStorage(app);\nexport const provider = new GoogleAuthProvider();\n\n````\n\n````typescript:Auth.tsx\nimport { auth, provider, storage } from \"../firebase\";\nimport { signInWithPopup } from \"firebase/auth\";\n\nconst signInGoogle = async () =\u003e {\n    await signInWithPopup(auth, provider).catch((err) =\u003e alert(err.message));\n};\n\nconst Auth: React.FC = () =\u003e {\n  return (\n            \u003cButton\n              fullWidth\n              variant=\"contained\"\n              color=\"primary\"\n              className={classes.submit}\n              onClick={signInGoogle}\n            \u003e\n              Sign In with Google\n            \u003c/Button\u003e\n    )\n}\n\n````\n\nä»¥ä¸‹ã®ã‚ˆã†ãªå®Ÿè£…ã§signIn, signUpãŒã§ãã‚‹ã€‚\n\n````typescript:Auth.tsx\nimport {\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  signInWithPopup,\n} from \"firebase/auth\";\n  const signInEmail = async () =\u003e {\n    await signInWithEmailAndPassword(auth, email, password);\n  };\n  const signUpEmail = async () =\u003e {\n    await createUserWithEmailAndPassword(auth, email, password);\n};\n\n````\n\nregisterã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€Authenticationã«è¿½åŠ ã•ã‚Œã‚‹\n![Pasted-image-20210905235712](note/Pasted-image-20210905235712.png)\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["React","frontend","TypeScript"]},"/note/Vim":{"title":"Vim","content":"\nHOME for vim\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["vim"]},"/note/Vim%E3%81%A7%E3%82%A2%E3%83%AB%E3%83%95%E3%82%A1%E3%83%99%E3%83%83%E3%83%88%E3%82%92%E9%80%A3%E7%95%AA%E3%81%A7%E5%85%A5%E5%8A%9B%E3%81%99%E3%82%8B":{"title":"Vimã§ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆã‚’é€£ç•ªã§å…¥åŠ›ã™ã‚‹","content":"\n[Vim](note/Vim.md)ã§ã¯ C-a ã‚„ C-x ã§æ•°å­—ã‚’ã‚«ã‚¦ãƒ³ãƒˆã‚¢ãƒƒãƒ—/ãƒ€ã‚¦ãƒ³ã§ãã‚‹ã€‚\nã¾ãŸã€çŸ©å½¢é¸æŠ â†’ `g\u003cC-a\u003e` ã§é€£ç•ªã‚’ãµã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\n\n````\n0 -\u003e 1\n0 -\u003e 2\n0 -\u003e 3\n0 -\u003e 4\n````\n\nã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆã‚‚åŒæ§˜ã«ã§ãã‚‹ã€‚\n`:set nrformats+=alpha` ã¨ã—ã¦ã‹ã‚‰åŒæ§˜ã«ã™ã‚‹ã¨ã€`A A A A ...` -\u003e `A B C D ...` ã¨ãªã‚‹\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["vim"]},"/note/Vim%E3%81%A7%E3%83%90%E3%83%83%E3%83%95%E3%82%A1%E5%90%8C%E5%A3%AB%E3%81%AE%E5%B7%AE%E5%88%86%E3%82%92%E3%81%A8%E3%82%8B":{"title":"Vimã§ãƒãƒƒãƒ•ã‚¡åŒå£«ã®å·®åˆ†ã‚’ã¨ã‚‹","content":"\n[æ„å¤–ã¨çŸ¥ã‚‰ã‚Œã¦ã„ãªã„ diff ã«é–¢ã™ã‚‹æ©Ÿèƒ½ - æ°¸é ã«æœªå®Œæˆ](https://thinca.hatenablog.com/entry/20130426/1366910837)\n\n## diffthis\n\nãƒ•ã‚¡ã‚¤ãƒ«åŒå£«ã®ã¨ãã¯ `:diffsplit` ãŒä½¿ãˆã‚‹ãŒã€ãƒãƒƒãƒ•ã‚¡åŒå£«ã®å ´åˆã¯ `:diffthis` ã—ã‹ä½¿ãˆãªã„\n\n1. Vimã‚’èµ·å‹•ã—ã¦ãã®ã¾ã¾diffã‚’å–ã‚ŠãŸã„å†…å®¹ã‚’è²¼ã‚Šä»˜ã‘\n1. enewã§æ–°ã—ã„ãƒãƒƒãƒ•ã‚¡ã‚’é–‹ã\n1. 1.ã®ãƒãƒƒãƒ•ã‚¡ã¨æ¯”ã¹ãŸã„å†…å®¹ã‚’è²¼ã‚Šä»˜ã‘\n1. 3.ã®ãƒãƒƒãƒ•ã‚¡ã§diffthis\n1. 1.ã®ãƒãƒƒãƒ•ã‚¡ã§diffthis\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["vim"]},"/note/Visual-Studio-Code":{"title":"VisualStudio Code","content":"\n[Visual Studio Code - Code Editing. Redefined](https://code.visualstudio.com/)\n\nMicrosoftãŒæä¾›ã™ã‚‹é–‹ç™ºç”¨ã‚¨ãƒ‡ã‚£ã‚¿ã€‚2015å¹´ã«æœ€åˆã®ãƒªãƒªãƒ¼ã‚¹ãŒã•ã‚ŒãŸã€‚\nã©ã®OSã§ã‚‚åˆ©ç”¨ã§ãã‚‹ã€ç„¡å„Ÿã€ä½¿ã„ã‚„ã™ã•ã€è¨­å®šã®æŸ”è»Ÿã•ã€æ‹¡å¼µæ©Ÿèƒ½ã«ã‚ˆã£ã¦ã•ã¾ã–ã¾ãªæ©Ÿèƒ½ã‚’è¿½åŠ ã§ãã‚‹ã¨ã„ã£ãŸç‚¹ãŒç‰¹å¾´ã€‚\n\nã„ã¤ã‚‚æ­£å¼ãªè¡¨è¨˜ãŒã‚ã‹ã‚‰ãªããªã‚‹ãŒã€ `Visual Studio Code` `VS Code` ãŒå…¬å¼ã¿ãŸã„\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["vscode"]},"/note/VisualStudio-Code":{"title":"VisualStudio Code","content":"\n\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["vscode"]},"/note/Vite":{"title":"Vite","content":"\n[Vite](note/Vite.md) ã¨ã¯\n\n[ã€Viteã€‘ Vue3.0ã‚‚Reactã‚‚ï¼ãƒãƒ¼ãƒãƒ³ãƒ‰ãƒ«ãªãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã€ŒViteã€ã‚’è©¦ã—ã¦ã¿ã‚‹ - Qiita](https://qiita.com/ryo2132/items/c1530dd590e34e68c494)\n[ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®çˆ†é€Ÿãªé–‹ç™ºã‚µãƒ¼ãƒã‚’å®Ÿç¾ã™ã‚‹ Vite ã‚’è©¦ã—ã¦ã¿ãŸ - SMARTCAMP Engineer Blog](https://tech.smartcamp.co.jp/entry/try-vite)\n\n \u003e \n \u003e Viteã¯Vue.jsã®ä½œè€…ã®Evan Youæ°ãŒé–‹ç™ºä¸­ã®ãƒãƒ¼ãƒãƒ³ãƒ‰ãƒ«ãªãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚\n \u003e ãƒã‚¤ãƒ†ã‚£ãƒ–ã®ESãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¤ãƒ³ãƒãƒ¼ãƒˆã‚’åˆ©ç”¨ã—ãƒãƒ³ãƒ‰ãƒ«ä¸è¦ã§é«˜é€Ÿã«å‹•ä½œã™ã‚‹devã‚µãƒ¼ãƒãƒ¼ã¨ã€Rollup.jsã‚’ãƒ™ãƒ¼ã‚¹ã¨ã—ãŸãƒ—ãƒ­ãƒ€ã‚¯ã‚·ãƒ§ãƒ³ãƒ“ãƒ«ãƒ‰æ©Ÿèƒ½ã‚’æä¾›ã—ã¾ã™ã€‚\n \u003e è¨­å®šä¸è¦ã§.vueã®SFCï¼ˆSingle File Componentsï¼‰ã‚’ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã§ãã¦ã€ã•ã‚‰ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ä»Šé–‹ç™ºä¸­ã®Vue3.0ãŒä½¿ãˆã¾ã™ã€‚\n \u003e ã—ã‹ã‚‚ã€vue-cliã®ã‚ˆã†ã«Vue.jsé™å®šã§ã¯ãªãã€Reactã€Preactã«ã‚‚å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚\n\nViteã¯å‹•ä½œãŒã¯ã‚„ã„\n\n \u003e \n \u003e ã“ã‚Œã¾ã§Reactã‚„Vueã‚’ç”¨ã„ãŸãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®é–‹ç™ºç’°å¢ƒã¯Webpackã«ä»£è¡¨ã•ã‚Œã‚‹bundlerã‚’é€šã™ã“ã¨ãŒãƒ‡ãƒ•ã‚¡ã‚¯ãƒˆã¨ãªã£ã¦ã„ã¾ã™ãŒã€åˆå›èµ·å‹•ã®æ™‚é–“ãŒé•·ã„ãƒ»HMRã«ãƒ©ã‚°ãŒç™ºç”Ÿã™ã‚‹ãªã©ã®å•é¡Œã¯ã‚ã£ãŸã‹ã¨æ€ã„ã¾ã™ã€‚\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Vuejs","JavaScript"]},"/note/Volta%E3%81%A7Node.js%E3%81%AE%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E7%AE%A1%E7%90%86%E3%81%99%E3%82%8B":{"title":"Voltaã§Node.jsã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã™ã‚‹","content":"\nnvm, nodenv, asdfãªã©ã„ã‚ã„ã‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã®ãƒ„ãƒ¼ãƒ«ã¯ã‚ã‚‹ãŒã“ã‚ã“ã‚ç§»ã‚Šå¤‰ã‚ã‚‹ã®ãŒè¾›ã„â€¦\n\nç¾æ™‚ç‚¹ã§ã¯ [Volta](https://volta.sh) ã‚’ä½¿ã†ã®ãŒã‚ˆã‹ã£ãŸã€‚\nã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦PATHã«ã„ã‚Œã‚Œã°ä½¿ãˆã‚‹ã€‚\n\n### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n`volta install node@16`\n\n### ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ä½¿ã†ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’å›ºå®šã™ã‚‹\n\n`volta pin node@16`\n=\u003e package.jsonã«voltaã®è¨­å®šãŒè¿½è¨˜ã•ã‚Œã‚‹ã€‚\né–‹ç™ºè€…å…¨å“¡ãŒvoltaã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã„ã‚Œã°ã€è‡ªå‹•ã§æŒ‡å®šã•ã‚ŒãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®Node.jsãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Nodejs"]},"/note/Vue-Storybook-Tailwind-Sass%E3%81%AE%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%97":{"title":"Vue-Storybook-Tailwind-Sassã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—","content":"\n# Vue-Storybook-Tailwind-Sass\n\n~/.storybook/main.js\n\n````javascript\n  webpackFinal: async (config) =\u003e {\n    config.module.rules.push({\n      test: /\\.ts$/,\n      exclude: /node_modules/,\n      use: [\n        {\n          loader: 'ts-loader',\n          options: {\n            appendTsSuffixTo: [/\\.vue$/],\n            transpileOnly: true,\n          },\n        },\n      ],\n    })\n\n    config.module.rules.push({\n      test: /\\.(css)$/,\n      exclude: /node_modules/,\n      use: [\n        {\n          loader: 'postcss-loader',\n          options: {\n            ident: 'postcss',\n            plugins: [require('tailwindcss')('./tailwind.config.js')],\n          },\n        },\n      ],\n    })\n\n    config.module.rules.push({\n      test: /\\.(scss)$/,\n      exclude: /node_modules/,\n      use: [\n        {\n          loader: 'style-loader',\n        },\n        {\n          loader: 'css-loader',\n        },\n        {\n          loader: 'postcss-loader',\n          options: {\n            ident: 'postcss',\n            plugins: [require('tailwindcss')('./tailwind.config.js')],\n          },\n        },\n        {\n          loader: 'sass-loader',\n        },\n      ],\n    })\n\t\n\t\n    if (config.resolve.extensions != null) {\n      config.resolve.extensions.push('.ts')\n    }\n\n    if (config.resolve.alias != null) {\n      const rootPath = path.resolve(__dirname, '..')\n      config.resolve.alias['@'] = rootPath\n      config.resolve.alias['~'] = rootPath\n    }\n\n    return config\n  },\n}\n\n````\n\n~/.storybook/preview.js\n\n````javascript\nexport const parameters = {\n  actions: { argTypesRegex: '^on[A-Z].*' },\n}\n\nimport './tailwind.css'\nimport '~/assets/style/common.css'\n````\n\n~/.storybook/tailwind.css\n\n````css\n@import 'tailwindcss/base';\n@import 'tailwindcss/components';\n@import 'tailwindcss/utilities';\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Vuejs","css","TailwindCSS"]},"/note/Vue-TypeScript%E3%81%A7GoogleMap%E3%82%92%E4%BD%BF%E3%81%86":{"title":"Vue TypeScriptã§GoogleMapã‚’ä½¿ã†","content":"\n# Vue.js+TypeScriptã§GoogleMapã‚’ä½¿ã†\n\n## Vue.jså…¬å¼ã®cookbookã«exampleãŒä¹—ã£ã¦ã‚‹\n\n* \u003chttps://jp.vuejs.org/v2/cookbook/practical-use-of-scoped-slots.html\u003e\n* slotã‚’ä½¿ã£ã¦Google Mapã‚’ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ç”¨ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆ\n* scoped slotã§google, map propertyã‚’å…¬é–‹ã™ã‚‹\n* è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ã€slotã®propertyã‚’ä½¿ã£ã¦markerã‚„polylineã‚’æç”»ã™ã‚‹ã®ã«ä½¿ã†\n* markerã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œã£ã¦propsã«googleã‚„mapã‚’æ¸¡ã™ã“ã¨ã§ä½¿ã†ã“ã¨ãŒã§ãã‚‹\n\n## TypeScript\n\n\u003chttps://developers.google.com/maps/documentation/javascript/using-typescript\u003e\n\n\u003chttps://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/googlemaps/\u003e\nDefinitelyTypedã«ã‚ã‚‹ã‚‚ã®ã‚’ä½¿ã†\n\n## Vue.js\n\n* \u003chttps://jp.vuejs.org/v2/cookbook/practical-use-of-scoped-slots.html\u003e ã«å‰‡ã£ã¦å®Ÿè£…\n* [@googlemaps/js-api-loader](https://www.npmjs.com/package/@googlemaps/js-api-loader) ã§ãƒ­ãƒ¼ãƒ‰\n* [@types/googlemaps](https://www.npmjs.com/package/@types/googlemaps) ã§å‹ä»˜ã‘\n\nGoogleMapLoader.vue\n\n````typescript\n\u003ctemplate\u003e\n  \u003cdiv\u003e\n    \u003cdiv ref=\"googleMap\" class=\"google-map h-full\"\u003e\u003c/div\u003e\n    \u003ctemplate v-if=\"google \u0026\u0026 map\"\u003e\n      \u003cslot :google=\"google\" :map=\"map\" /\u003e\n    \u003c/template\u003e\n  \u003c/div\u003e\n\u003c/template\u003e\n\n\u003cscript lang=\"ts\"\u003e\nimport { Loader } from '@googlemaps/js-api-loader'\nimport { Vue, Component, Prop } from 'vue-property-decorator'\n\n@Component\nexport default class GoogleMapLoader extends Vue {\n  @Prop({ type: Object })\n  mapConfig?: google.maps.MapOptions\n\n  @Prop({ type: String })\n  apiKey?: string\n\n  @Prop({ type: String })\n  apiVersion?: string\n\n  google: typeof google | null = null\n  map: google.maps.Map | null = null\n\n  $refs!: {\n    googleMap: Element\n  }\n\n  mounted() {\n    const loader = new Loader({\n      apiKey: this.apiKey || this.$config.googleMapsApi.key!,\n      version: this.apiVersion || this.$config.googleMapsApi.version!,\n    })\n\n    loader\n      .load()\n      .then(() =\u003e {\n        this.google = window.google\n        const mapContainer = this.$refs.googleMap\n        this.map = new this.google.maps.Map(mapContainer, {\n          ...this.mapConfig,\n        })\n\n        this.$emit('map-loaded')\n      })\n      .catch((e) =\u003e {\n        this.$emit('failed-map-loading')\n      })\n  }\n\n  // Mapã‚’æ“ä½œã™ã‚‹ãŸã‚ã«ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å…¬é–‹\n  // this.$refs.map.setCenter(latLng) ã®ã‚ˆã†ã«å‘¼ã³å‡ºã™\n  setCenter(latLng: google.maps.LatLng) {\n    if (!this.google || !this.map) {\n      return\n    }\n    this.map.setCenter(latLng)\n  }\n}\n\u003c/script\u003e\n\n````\n\nGoogleMapMarker.vue\n\n````typescript\n\u003cscript lang=\"ts\"\u003e\nimport { Vue, Component, Prop } from 'vue-property-decorator'\n\n@Component\nexport default class GoogleMapMarker extends Vue {\n  @Prop({ type: Object, required: true })\n  google!: typeof google\n\n  @Prop({ type: Object, required: true })\n  map!: google.maps.Map\n\n  @Prop({ type: String, required: true })\n  url!: string\n\n  @Prop({ type: Object, required: true })\n  position!: google.maps.LatLng\n\n  marker: google.maps.Marker | null = null\n\n  mounted() {\n    this.marker = new this.google.maps.Marker({\n      position: this.position,\n      map: this.map,\n      icon: {\n        url: this.url,\n      },\n    })\n  }\n}\n\u003c/script\u003e\n````\n\n### å›°ã£ãŸã“ã¨\n\n#### `@types/googlemaps`ã®å®šç¾©ãŒnamespaceã«ãªã£ã¦ã„ã‚‹ã®ã§ãã®ã¾ã¾ã ã¨googleå‹ãŒä½¿ãˆãªã„\n\n````\ndeclare namespace google.maps {\n\t...\n}\n````\n\n##### è§£æ±ºç­–\n\n`typeof google` ã§å‹å®£è¨€ã™ã‚‹\n\n````\n  // eslint-disable-next-line no-undef\n  let google: typeof google | null = null\n````\n\n#### Veturã§Null-safety operatorãŒæ€’ã‚‰ã‚Œã‚‹(ãƒã‚°ï¼Ÿ)\n\n````\n  initializeMap() {\n    const mapContainer = this.$refs.googleMap\n    this.map = new this.google?.maps.Map(mapContainer, this.mapConfig)\n  }\n````\n\n````\nThis expression is not constructable.  \nType 'typeof google' has no construct signatures.Vetur(2351)\n````\n\n##### è§£æ±ºç­–\n\nã‚ã‚‰ã‹ã˜ã‚nullåˆ¤å®šã‚’ã—ã¦ãŠã\n\n````\n  initializeMap() {\n    const mapContainer = this.$refs.googleMap\n    if (!this.google) {\n      return\n    }\n    this.map = new this.google.maps.Map(mapContainer, this.mapConfig)\n  }\n````\n\n## ãã®ä»–ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ\n\n\u003chttps://developers.google.com/maps/documentation/javascript/examples/event-simple\u003e\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Vuejs","TypeScript"]},"/note/Vue-vuex_typescript%E3%81%A7jest":{"title":"Vue vuex_typescriptã§jest","content":"\n# vuex_typescriptã§jest\n\nmiddlewareã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹å ´åˆã‚’è€ƒãˆã‚‹ã€‚\n\n~/middleware/user.ts\n\n````\nimport { Context, Middleware } from '@nuxt/types'\nimport { user } from '~/store'\n\nconst middleware: Middleware = (context: Context) =\u003e {\n  // ãƒšãƒ¼ã‚¸é·ç§»ã®ãŸã³ã«å®Ÿè¡Œã—ãŸã„å‡¦ç†ã‚’æ›¸ã\n  if (user.expiration \u003e new Date()) {\n    user.update(false)\n    context.redirect('/error')\n  }\n}\n\nexport default middleware\n````\n\n~/test/middleware/user.spec.ts\n\n````\nimport { createLocalVue } from '@vue/test-utils'\nimport { MockProxy, mock } from 'jest-mock-extended'\nimport MockDate from 'mockdate'\nimport Vuex, { Store } from 'vuex'\nimport { Context } from '@nuxt/types'\nimport { initializeStores, user } from '~/store'\nimport middleware from '~/middleware/user'\n\ndescribe('middleware', () =\u003e {\n  const localVue = createLocalVue()\n  localVue.use(Vuex)\n\n  // jest-mock-extended ã‚’ä½¿ã£ã¦ @nuxt/types/Context ã‚’mock\n  let mockContext: MockProxy\u003cContext\u003e\n\n  let store: Store\u003c{}\u003e\n  let getters\n\n  // @nuxt/types/Middleware ãŒ string | Function ã®union typeãªãŸã‚ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ã®ã§ã€å‹ã‚’çµã‚Šè¾¼ã‚€\n  // This expression is not callable.\n  // Not all constituents of type 'Middleware' are callable.\n  // Type 'string' has no call signatures\n  const middlewareFunc = middleware as (ctx: Context) =\u003e Promise\u003cvoid\u003e | void\n\n  beforeEach(() =\u003e {\n\n    // gettersã‚’mock\n    getters = {\n      'user/expiration': jest.fn(() =\u003e new Date(1614700000)),\n    }\n    // Vuexã®åˆæœŸåŒ–\n    store = new Vuex.Store({\n      state: {},\n      getters,\n    })\n    initializeStores(store)\n\n    mockContext = mock\u003cContext\u003e()\n  })\n\n  it('success', () =\u003e {\n\n    // mockdate ã‚’ä½¿ç”¨ã—ã¦new Date()ã‚’mock\n    MockDate.set('2021-01-02T15:04:05+09:00')\n\n    user.update = jest.fn()\n\n    // context.redirect ã‚’mock\n    ;(mockContext.redirect as jest.Mock) = jest.fn(() =\u003e {})\n\n    middlewareFunc(mockContext)\n\n    expect(mockContext.redirect).toHaveBeenCalledTimes(0)\n  })\n\n})\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Vuejs","TypeScript","unittest"]},"/note/Vue.js":{"title":"Vue.js","content":"\n\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Vuejs"]},"/note/Vue.js%E3%81%A7GoogleMap%E4%B8%8A%E3%81%AB%E3%82%A2%E3%82%A4%E3%82%B3%E3%83%B3%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B":{"title":"Vue.jsã§GoogleMapä¸Šã«ã‚¢ã‚¤ã‚³ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹","content":"\n[Vue TypeScriptã§GoogleMapã‚’ä½¿ã†](note/Vue%20TypeScriptã§GoogleMapã‚’ä½¿ã†.md) ã§Google Mapã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã—ãŸã€‚\nãã“ã«ã‚¢ã‚¤ã‚³ãƒ³ã‚’æç”»ã—ãŸã„ã€‚\n\n## å‰æ\n\n* GoogleMapã«ã‚¢ã‚¤ã‚³ãƒ³ã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ã€ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®šã™ã‚‹\n* Vue.jsã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã€svgã¯ã™ã¹ã¦ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ã§ã¯ãªãã€Vueã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã—ã¦ç®¡ç†ã—ã¦ã„ã‚‹\n  * \u003chttps://jp.vuejs.org/v2/cookbook/editable-svg-icons.html\u003e ã«å‰‡ã£ã¦svgã‚’æ“ä½œã—ã‚„ã™ã„ã‚ˆã†ã«ã™ã‚‹ãŸã‚\n* ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ãŒãªã„ã®ã§ã€ã©ã†ã‚„ã£ã¦Google Mapä¸Šã«ã‚¢ã‚¤ã‚³ãƒ³ã‚’æç”»ã—ã‚ˆã†ã‹è€ƒãˆãŸ\n\n`BaseIcon.vue`\n\n````typescript\n\u003ctemplate\u003e\n  \u003csvg :width=\"width\" :height=\"height\" viewBox=\"0 0 16 16\" version=\"1.1\"\u003e\n    \u003cslot /\u003e\n  \u003c/svg\u003e\n\u003c/template\u003e\n\n\u003cscript lang=\"ts\"\u003e\nimport { Vue, Component, Prop } from 'vue-property-decorator'\n\nexport interface IconProp {\n  width?: string\n  height?: string\n}\n\n@Component\nexport default class BaseIcon extends Vue {\n  @Prop({ type: String, default: '16' })\n  private readonly width!: string\n\n  @Prop({ type: String, default: '16' })\n  private readonly height!: string\n}\n\u003c/script\u003e\n````\n\n## data URL ã«å¤‰æ›ã™ã‚‹\n\nã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒã‚¦ãƒ³ãƒˆ\n-\u003e elè¦ç´ ã‹ã‚‰svgæ–‡å­—åˆ—ã‚’æŠœãå‡ºã™\n-\u003e svgæ–‡å­—åˆ—ã‚’base64ã«ã—ã¦ã€data URLã‚’ä½œã‚‹\n\n````typescript\n/**\n * SVGã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ã€svgç”»åƒã®data URLã«å¤‰æ›ã™ã‚‹\n */\nexport const generateIconDataUrl = (\n  icon: VueConstructor\u003cVue\u003e,\n  props?: IconProp\n) =\u003e {\n  const IconComponentConstructor = Vue.extend({\n    components: {\n      BaseIcon,\n      icon,\n    },\n    props: {\n      props: {\n        type: Object,\n        default: () =\u003e {},\n      },\n    },\n    render: (h: Vue.CreateElement): Vue.VNode =\u003e {\n      return h(BaseIcon, {\n        props: {\n          ...props,\n        },\n        scopedSlots: {\n          default: (_props) =\u003e h(icon),\n        },\n      })\n    },\n  })\n  // mountã™ã‚‹\n  const iconComponent = new IconComponentConstructor({\n    propsData: { props },\n  })\n  iconComponent.$mount()\n\n  // mountã—ãŸã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®HTMLè¦ç´ ã‚’svgã®æ–‡å­—åˆ—ã«ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚º\n  const iconString = new XMLSerializer().serializeToString(iconComponent.$el)\n\n  // svgæ–‡å­—åˆ—ã‚’Base64ã«å¤‰æ›ã—ã¦ã€data urlã‚’ä½œæˆ\n  // see https://developer.mozilla.org/ja/docs/Web/API/WindowOrWorkerGlobalScope/btoa\n  return 'data:image/svg+xml;charset=UTF-8;base64,' + btoa(iconString)\n}\n````\n\nGoogleMapMarker.vue\n\n````typescript\n    this.marker = new this.google.maps.Marker({\n      position: this.markerOption.position,\n      map: this.map,\n      icon: {\n        url: generateGeneralIconDataUrl(\n          PinIcon,\n          { width: '32', height: '32' }\n        ),\n      },\n    })\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["TypeScript","Vuejs"]},"/note/WSL2-Ubuntu20.04%E3%81%AE%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89":{"title":"WSL2 Ubuntu20.04ã®ç’°å¢ƒæ§‹ç¯‰","content":"\n## WSL2ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã«ã™ã‚‹\n\npowershell\n\n````shell\n$ wsl --set-default-version 2\n$ wsl -l -v\n  NAME            STATE           VERSION\n* Legacy          Stopping        1\n  Ubuntu-20.04    Stopping        2\n````\n\nLegacy ã‚’å‰Šé™¤\n\u003chttps://docs.microsoft.com/ja-jp/windows/wsl/install-legacy#uninstallingremoving-the-legacy-distro\u003e\n\n````shell\nwsl --unregister Legacy\n````\n\n## Linuxbrewã‚’å…¥ã‚Œã‚‹\n\n\u003chttps://brew.sh/\u003e ã®ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã€\n\u003chttps://docs.brew.sh/Homebrew-on-Linux\u003e ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã—ã¦PATHã‚’é€šã™\n\n## python\n\n````shell\nsudo apt update\nsudo apt -y upgrade\n\nsudo apt install python-is-python3 python3-pip\npython -V\n# =\u003e 3.8\npython3 -V\n# =\u003e 3.8\n````\n\n## zsh\n\n````shell\nbrew install zsh\nwhich zsh | sudo tee -a /etc/shells\nchsh -s $(which zsh)\n````\n\nLinuxbrewã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã—ã¦ãŠã\n\n````shell\necho \"eval \\$($(brew --prefix)/bin/brew shellenv)\" \u003e\u003e ~/.zshrc\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Windows","Linux"]},"/note/Windows%E3%81%8B%E3%82%89Python2%E3%81%AE%E3%82%A2%E3%83%B3%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%AB%E5%A4%B1%E6%95%97%E3%81%99%E3%82%8B":{"title":"Windowsã‹ã‚‰Python2ã®ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«å¤±æ•—ã™ã‚‹","content":"\nhttps://www.python.org/downloads/\n\nè©²å½“ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰\nrepair\nremove\n\n`C:\\Python27` ã®ã‚ˆã†ãªãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒãªã„ã¨å¤±æ•—ã™ã‚‹\nå…ˆã«ã‚´ãƒŸç®±ã«å…¥ã‚Œã¦ã—ã¾ã£ãŸå ´åˆã¯å¾©å…ƒã™ã‚‹\nå®Œå…¨ã«å‰Šé™¤ã—ã¦ã—ã¾ã£ãŸå ´åˆã¯â€¦ã‚ã‹ã‚‰ãªã„ã€‚ã„ã¡ã©ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã®ã‹ãª\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Windows"]},"/note/Windows%E3%81%A7Emacs%E3%82%AD%E3%83%BC%E3%83%90%E3%82%A4%E3%83%B3%E3%83%89%E3%82%92%E3%81%A4%E3%81%8B%E3%81%88%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B":{"title":"Windowsã§Emacsã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’ã¤ã‹ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹","content":"\n[Windows 10ã§ã‚‚ã€ŒEmacsé¢¨ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã€ã‚’ä½¿ãŠã†ã€AutoHotKeyã€‘ | LFI](https://linuxfan.info/windows-emacs-keybindings)\n\u003chttps://github.com/lintaro-jp/gtk-emacs-theme-like.ahk\u003e\nã‚’ä½¿ã†ã¨emacsé¢¨ã®ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•ã€æ–‡å­—å‰Šé™¤ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚‹\n\nã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã‚­ãƒ¼ãŒã‚ˆãã¶ã¤ã‹ã‚‹ã®ã§ã€é©ç”¨ã—ãŸããªã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ä»¥ä¸‹ã®ã‚„ã‚Šæ–¹ã§å¯¾è±¡ã§ãªãã™ã‚‹\n\n[\\[AutoHotKey\\]\\#IfWinActiveã§å¯¾è±¡ã‚¦ã‚¤ãƒ³ãƒ‰ã‚¦ã‚’æŒ‡å®šã™ã‚‹](https://pouhon.net/ahk-win-active/2812/)\n\n````ahk\n#IfWinActive,ahk_exe chrome.exe ;Chrome.exeãŒã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãªæ™‚ã«ã ã‘\n    vk1D \u0026 E:: ;ç„¡å¤‰æ›ã‚­ãƒ¼+Eã§\n    Send,^+b ;ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒãƒ¼ã®è¡¨ç¤º/éè¡¨ç¤ºã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹\n    Return\n#IfWinActive\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Windows","AutoHotKey","Keyboard"]},"/note/Windows%E3%81%A7US%E9%85%8D%E5%88%97%E3%82%92AutoHotKey%E3%81%A7%E5%BF%AB%E9%81%A9%E3%81%AB%E3%81%99%E3%82%8B%E3%82%AD%E3%83%BC%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA":{"title":"Windowsã§USé…åˆ—ã‚’AutoHotKeyã§å¿«é©ã«ã™ã‚‹ã‚­ãƒ¼ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º","content":"\n## Sands\n\nã„ãã¤ã‹ä¾‹ãŒã‚ã£ãŸãŒè‡ªåˆ†ã®ç’°å¢ƒã§å‹•ã„ãŸã®ã¯æœ€å¾Œã®ã ã‘ã ã£ãŸ\n\n[AutoHotkeyã§SandS - Qiita](https://qiita.com/azuwai2/items/e65af02c061ce80ccf91)\n[USé…åˆ—ã§æ‚ ã€…è‡ªé©AutoHotkeyScripts](https://blog.phoshigaki.net/2018/10/usautohotkeyscripts.html)\n\n[AutoHotKey ã§ SandS - by edvakf in hatena](https://edvakf.hatenadiary.org/entry/20101027/1288168554)\n\n````ahk\n*Space::\n  SendInput {RShift Down}\n  If SandS_SpaceDown = 1\n  {\n    Return\n  }\n  SandS_SpaceDown := 1\n  SandS_SpaceDownTime := A_TickCount ; milliseconds after computer is booted http://www.autohotkey.com/docs/Variables.htm\n  SandS_AnyKeyPressed := 0\n  ; watch for the next single key, http://www.autohotkey.com/docs/commands/Input.htm\n  Input, SandS_AnyKey, L1 V,{LControl}{RControl}{LAlt}{RAlt}{LShift}{RShift}{LWin}{RWin}{AppsKey}{F1}{F2}{F3}{F4}{F5}{F6}{F7}{F8}{F9}{F10}{F11}{F12}{Left}{Right}{Up}{Down}{Home}{End}{PgUp}{PgDn}{Del}{Ins}{BS}{Capslock}{Numlock}{PrintScreen}{Pause}\n  SandS_AnyKeyPressed := 1\nReturn\n\n*Space Up::\n  SendInput {RShift Up}\n  SandS_SpaceDown := 0\n  If SandS_AnyKeyPressed = 0\n  {\n    If A_TickCount - SandS_SpaceDownTime \u003c 200\n    {\n      SendInput {Space}\n    }\n    ; Send EndKey of the \"Input\" command above\n    ; You must use Send here since SendInput is ignored by \"Input\"\n    Send {RShift}\n  }\nReturn\n````\n\nâ†‘ã“ã¡ã‚‰ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚‚ã€Alt+SpaceãŒåŠ¹ã‹ãªããªã‚‹å•é¡ŒãŒã‚ã£ãŸãŸã‚ã€è¨˜äº‹ã§ç´¹ä»‹ã•ã‚Œã¦ã„ãŸ \u003chttp://lukewarm.s101.xrea.com/up/\u003e ã® 089 ã‚’ä½¿ç”¨ã—ãŸã€‚\n\n## Altã‚­ãƒ¼ã‚’è‹±æ•°/ã‹ãªã«å¤‰æ›´\n\n\u003chttps://github.com/karakaram/alt-ime-ahk\u003e\n\nalt-ime-ahkã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨AHKãŒèµ·å‹•ã™ã‚‹ã€‚\nå¸¸é§ã—ãŸã‘ã‚Œã°ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ã«ç™»éŒ²ã™ã‚‹ã€‚\n\n## Ctrlã¨CapsLockã‚’ã„ã‚Œã‹ãˆã‚‹\n\n### Caps LockãŒãªããªã£ã¦ã‚‚ã„ã„ãªã‚‰\n\n[ã€Windows10ã€‘Caps Lockã‚’Ctrlã«å¤‰æ›´ - Qiita](https://qiita.com/peachft/items/1ed0a843817b9caa6aff)\n\n`HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Keyboard Layout`\n\næ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«ã§ãƒã‚¤ãƒŠãƒªå€¤ã‚’ä½œæˆã€`Scancode Map`ã¨åå‰ã‚’ã¤ã‘ã¦ä¿å­˜ã€‚\n\n````txt\n00,00,00,00,00,00,00,00,02,00,00,00,1d,00,3a,00,00,00,00,00\n````\n\nregãƒ•ã‚¡ã‚¤ãƒ«ã§ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ã§ã‚„ã‚‹ãªã‚‰\ncaps2ctrl.reg\n\n````reg\nWindows Registry Editor Version 5.00\n\n[HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Keyboard Layout]\n\"Scancode Map\"=hex:00,00,00,00,00,00,00,00,02,00,00,00,1d,00,3a,00,00,00,00,00\n````\n\n### å…¥ã‚Œæ›¿ãˆã‚‹ãªã‚‰\n\nå…¬å¼ã«ç”¨æ„ã•ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†\n\n\u003chttps://docs.microsoft.com/en-us/sysinternals/downloads/ctrl2cap\u003e\n\nregãƒ•ã‚¡ã‚¤ãƒ«ã§ã‚„ã‚‹å ´åˆ\ncaps2ctrl_swap.reg\n\n````reg\nWindows Registry Editor Version 5.00\n\n[HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Keyboard Layout]\n\"Scancode Map\"=hex:00,00,00,00,00,00,00,00,03,00,00,00,1d,00,3a,00,3a,00,1d,00,00,00,00,00\n````\n\n## CapsLockModifier\n\n[USé…åˆ—ã§æ‚ ã€…è‡ªé©AutoHotkeyScripts](https://blog.phoshigaki.net/2018/10/usautohotkeyscripts.html)\n\n````ahk\n#InstallKeybdHook\n;CapsLockã®æŠ¼ã—ä¸‹ã’ã‚’æ¤œçŸ¥\n\\*CapsLock::\n\tSuspend, Permit\n\tisCapsDown := true\n\tKeyWait CapsLock\n\tisCapsDown := false\nReturn\n\n#If isCapsDown == true\t\t;ä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯CapsLockæŠ¼ã—ä¸‹ã’æ™‚ã®ã¿\ne::Suspend, Off ;Enable hotkeys\nd::Suspend, On ;Disable hotkeys\n\nc::sc03A ;CapsLock\n\nq::ExitApp\nz::+^#b\n\n;æ–¹å‘ã‚­ãƒ¼\ni::Up\nj::Left\nk::Down\nl::Right\n\n;ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³ã‚­ãƒ¼\nt::F1\ng::F2\nb::F3\ny::F4\nh::F5\nn::F6\t\t\t\t\t\t\t\t\t\nm::F7\nsc033::F8\t\t;ã‚«ãƒ³ãƒ(,)\n.::F9\n/::F10\n\n;å‰Šé™¤ç³»\nu::BackSpace\no::Delete\np::Esc\n\n;default\n; | t | y | u | i | o | p |\n;  | g | h | j | k | l |\n;   | b | n | m | , | . | / |\n\n;CapsLock down\n; | F1| F4| BS| ^ |Del|Esc|\n;  | F2| F5| \u003c | v | \u003e |\n;   | F3| F6| F7| F8| F9|F10|\n#If\t\t;ä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯æ–‡è„ˆã«ä¾å­˜ã—ãªã„\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Windows","AutoHotKey","Keyboard"]},"/note/Windows%E3%81%AE%E3%82%AB%E3%83%BC%E3%82%BD%E3%83%AB%E6%93%8D%E4%BD%9C%E3%82%92emacs%E3%83%A9%E3%82%A4%E3%82%AF%E3%81%AB%E3%81%99%E3%82%8B":{"title":"Windowsã®ã‚«ãƒ¼ã‚½ãƒ«æ“ä½œã‚’emacsãƒ©ã‚¤ã‚¯ã«ã™ã‚‹","content":"\n[Windowsã§USé…åˆ—ã‚’AutoHotKeyã§å¿«é©ã«ã™ã‚‹ã‚­ãƒ¼ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º](note/Windowsã§USé…åˆ—ã‚’AutoHotKeyã§å¿«é©ã«ã™ã‚‹ã‚­ãƒ¼ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º.md) ã¨åŒæ§˜ã®æ–¹æ³•ã§è¨­å®š\n\n[Windows 10ã§ã‚‚ã€ŒEmacsé¢¨ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã€ã‚’ä½¿ãŠã†ã€AutoHotKeyã€‘ | LFI](https://linuxfan.info/windows-emacs-keybindings)\n\n\u003chttps://github.com/lintaro-jp/gtk-emacs-theme-like.ahk\u003e\nã“ã¡ã‚‰ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ã†ã¨ã€ã‚«ãƒ¼ã‚½ãƒ«ç§»å‹•ã®ã¿ã‚’emacsé¢¨ã«ã—ã¦ãã‚Œã‚‹\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Windows","AutoHotKey"]},"/note/Windows%E3%81%AEfont%E5%A4%89%E6%9B%B4":{"title":"Windowsã®fontå¤‰æ›´","content":"\n`Meiryo UIã‚‚å¤§ã£ãã‚‰ã„!!` ã‚’ä½¿ç”¨ã™ã‚‹\n\n## ãƒªãƒã‚¸ãƒˆãƒª\n\n\u003chttps://github.com/Tatsu-syo/noMeiryoUI\u003e\n\n## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n\u003chttp://tatsu.life.coocan.jp/MySoft/WinCust/index.html\u003e\n\nzipã‚’è§£ç­”ã—ã¦ noMeiryoUI.exe ã‚’å®Ÿè¡Œ\nâ†’ ãƒ•ã‚©ãƒ³ãƒˆã‚’è¨­å®š\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Windows"]},"/note/Windows%E3%81%AEfont%E8%BF%BD%E5%8A%A0":{"title":"Windowsã®fontè¿½åŠ ","content":"\n[Windowsã®gitè¨­å®š](note/Windowsã®gitè¨­å®š.md) ã§Scoop for jpã‚’è¨­å®šã™ã‚‹\n\n````sh\nscoop install main/sudo\nsudo scoop install cica -g\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Windows"]},"/note/Windows%E3%81%AEgit%E8%A8%AD%E5%AE%9A":{"title":"Windowsã®gitè¨­å®š","content":"\n\n````sh\n# ãƒ•ã‚¡ã‚¤ãƒ«ã®å¤§æ–‡å­—ãƒ»å°æ–‡å­—ã‚’åŒºåˆ¥ã—ã¦èªè­˜ã™ã‚‹\n$ git config --global core.ignorecase false\n# æ—¥æœ¬èªã®ãƒ•ã‚¡ã‚¤ãƒ«åãŒæ–‡å­—åŒ–ã‘ã—ãªã„ã§ã¡ã‚ƒã‚“ã¨è¡¨ç¤ºã•ã‚Œã‚‹\n$ git config --global core.quotepath false\n# æ”¹è¡Œã‚³ãƒ¼ãƒ‰ãŒæ··åœ¨ã—ã¦ã„ã‚‹å ´åˆã¯å¤‰æ›ã—ãªã„\n$ git config --global core.safecrlf true\n# æ”¹è¡Œã‚³ãƒ¼ãƒ‰ãŒæ··åœ¨ã—ã¦ã„ã‚‹å ´åˆã¯å¤‰æ›ã—ãªã„\n$ git config --global core.autocrlf false\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Windows","git"]},"/note/Windows%E3%81%AEvim%E8%A8%AD%E5%AE%9A":{"title":"Windowsã®vimè¨­å®š","content":"\n## Scoop for jpã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹\n\n\u003chttps://github.com/dooteeen/scoop-for-jp\u003e\n\n````sh\n$ scoop bucket add jp https://github.com/dooteeen/scoop-for-jp\nChecking repo... ok\nThe jp bucket was added successfully.\n$ scoop install vim-kaoriya\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Windows","vim"]},"/note/Windows-%E3%83%87%E3%83%A5%E3%82%A2%E3%83%AB%E3%83%96%E3%83%BC%E3%83%88%E3%81%97%E3%81%A6%E3%81%84%E3%82%8Bubuntu%E3%82%92%E5%89%8A%E9%99%A4":{"title":"Windows ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ–ãƒ¼ãƒˆã—ã¦ã„ã‚‹ubuntuã‚’å‰Šé™¤","content":"\n[Linuxã¨Windowsã®ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ–ãƒ¼ãƒˆã‚’ã‚„ã‚ãŸ](note/Linuxã¨Windowsã®ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ–ãƒ¼ãƒˆã‚’ã‚„ã‚ãŸ.md)\n\n````sh\nC:\\\u003ebcdedit /enum firmware\n\nãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã®ãƒ–ãƒ¼ãƒˆ ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼\n--------------------------------\nidentifier              {fwbootmgr}\ndisplayorder            {1b24c802-09c6-11e6-9bf5-806e6f6e6963}\n                        {bootmgr}\n                        {7760eed9-aced-11eb-9c79-806e6f6e6963}\ntimeout                 2\n\nWindows ãƒ–ãƒ¼ãƒˆ ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼\n--------------------------------\nidentifier              {bootmgr}\ndevice                  partition=\\Device\\HarddiskVolume1\npath                    \\EFI\\Microsoft\\Boot\\bootmgfw.efi\ndescription             Windows Boot Manager\nlocale                  ja-JP\ninherit                 {globalsettings}\ndefault                 {current}\nresumeobject            {7089dc6c-401f-11e9-994c-cb5d728b39c4}\ndisplayorder            {current}\ntoolsdisplayorder       {memdiag}\ntimeout                 30\n\nãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ (101fffff\n--------------------------------\nidentifier              {1b24c802-09c6-11e6-9bf5-806e6f6e6963}\ndevice                  partition=\\Device\\HarddiskVolume1\npath                    \\EFI\\ubuntu\\shimx64.efi\ndescription             ubuntu\n\nãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ (101fffff\n--------------------------------\nidentifier              {7760eed9-aced-11eb-9c79-806e6f6e6963}\ndevice                  partition=\\Device\\HarddiskVolume1\npath                    \\EFI\\Ubuntu\\grubx64.efi\ndescription             ubuntu\n````\n\nå‰Šé™¤\n\n````\nC:\\\u003ebcdedit /delete {7760eed9-aced-11eb-9c79-806e6f6e6963}\nã“ã®æ“ä½œã‚’æ­£ã—ãçµ‚äº†ã—ã¾ã—ãŸã€‚\n\nC:\\\u003ebcdedit /enum firmware\n\nãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã®ãƒ–ãƒ¼ãƒˆ ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼\n--------------------------------\nidentifier              {fwbootmgr}\ndisplayorder            {1b24c802-09c6-11e6-9bf5-806e6f6e6963}\n                        {bootmgr}\ntimeout                 2\n\nWindows ãƒ–ãƒ¼ãƒˆ ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼\n--------------------------------\nidentifier              {bootmgr}\ndevice                  partition=\\Device\\HarddiskVolume1\npath                    \\EFI\\Microsoft\\Boot\\bootmgfw.efi\ndescription             Windows Boot Manager\nlocale                  ja-JP\ninherit                 {globalsettings}\ndefault                 {current}\nresumeobject            {7089dc6c-401f-11e9-994c-cb5d728b39c4}\ndisplayorder            {current}\ntoolsdisplayorder       {memdiag}\ntimeout                 30\n\nãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ (101fffff\n--------------------------------\nidentifier              {1b24c802-09c6-11e6-9bf5-806e6f6e6963}\ndevice                  partition=\\Device\\HarddiskVolume1\npath                    \\EFI\\ubuntu\\shimx64.efi\ndescription             ubuntu\n\nC:\\\u003ebcdedit /delete {1b24c802-09c6-11e6-9bf5-806e6f6e6963}\nã“ã®æ“ä½œã‚’æ­£ã—ãçµ‚äº†ã—ã¾ã—ãŸã€‚\n\nC:\\\u003ebcdedit /enum firmware\n\nãƒ•ã‚¡ãƒ¼ãƒ ã‚¦ã‚§ã‚¢ã®ãƒ–ãƒ¼ãƒˆ ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼\n--------------------------------\nidentifier              {fwbootmgr}\ndisplayorder            {bootmgr}\ntimeout                 2\n\nWindows ãƒ–ãƒ¼ãƒˆ ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼\n--------------------------------\nidentifier              {bootmgr}\ndevice                  partition=\\Device\\HarddiskVolume1\npath                    \\EFI\\Microsoft\\Boot\\bootmgfw.efi\ndescription             Windows Boot Manager\nlocale                  ja-JP\ninherit                 {globalsettings}\ndefault                 {current}\nresumeobject            {7089dc6c-401f-11e9-994c-cb5d728b39c4}\ndisplayorder            {current}\ntoolsdisplayorder       {memdiag}\ntimeout                 30\n\n````\n\n````sh\nC:\\\u003ediskpart\n\nMicrosoft DiskPart ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 10.0.17763.1\n\nCopyright (C) Microsoft Corporation.\nã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ãƒ¼: DESKTOP-3HKIQ1T\n\nDISKPART\u003e list disk\n\n  ãƒ‡ã‚£ã‚¹ã‚¯      çŠ¶æ…‹           ã‚µã‚¤ã‚º   ç©ºã   ãƒ€ã‚¤ãƒŠ GPT\n  ###                                          ãƒŸãƒƒã‚¯\n  ------------  -------------  -------  -------  ---  ---\n  ãƒ‡ã‚£ã‚¹ã‚¯ 0    ã‚ªãƒ³ãƒ©ã‚¤ãƒ³           119 GB      0 B        *\n  ãƒ‡ã‚£ã‚¹ã‚¯ 1    ã‚ªãƒ³ãƒ©ã‚¤ãƒ³           465 GB  1024 KB        *\n\nDISKPART\u003e sel disk 0\n\nãƒ‡ã‚£ã‚¹ã‚¯ 0 ãŒé¸æŠã•ã‚Œã¾ã—ãŸã€‚\n\nDISKPART\u003e list vol\n\n  Volume ###  Ltr Label        Fs    Type        Size     Status     Info\n  ----------  --- -----------  ----  ----------  -------  ---------  --------\n  Volume 0     E                       DVD-ROM         0 B  ãƒ¡ãƒ‡ã‚£ã‚¢ãªã—\n  Volume 1     C   Windows      NTFS   Partition    118 GB  æ­£å¸¸         ãƒ–ãƒ¼ãƒˆ\n  Volume 2         SYSTEM       FAT32  Partition    100 MB  æ­£å¸¸         ã‚·ã‚¹ãƒ†ãƒ \n  Volume 3     D                NTFS   Partition    215 GB  æ­£å¸¸\n\nDISKPART\u003e sel vol\n\nãƒœãƒªãƒ¥ãƒ¼ãƒ ãŒé¸æŠã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚\n\nDISKPART\u003e sel vol 2\n\nãƒœãƒªãƒ¥ãƒ¼ãƒ  2 ãŒé¸æŠã•ã‚Œã¾ã—ãŸã€‚\n\nDISKPART\u003e assign letter=Z\n\nDiskPart ã¯ãƒ‰ãƒ©ã‚¤ãƒ–æ–‡å­—ã¾ãŸã¯ãƒã‚¦ãƒ³ãƒˆ ãƒã‚¤ãƒ³ãƒˆã‚’æ­£å¸¸ã«å‰²ã‚Šå½“ã¦ã¾ã—ãŸã€‚\n\nDISKPART\u003e exit\n\nDiskPart ã‚’çµ‚äº†ã—ã¦ã„ã¾ã™...\n````\n\n````\nC:\\\u003ecd /d Z:\\\n\nZ:\\\u003edir\n ãƒ‰ãƒ©ã‚¤ãƒ– Z ã®ãƒœãƒªãƒ¥ãƒ¼ãƒ  ãƒ©ãƒ™ãƒ«ã¯ SYSTEM ã§ã™\n ãƒœãƒªãƒ¥ãƒ¼ãƒ  ã‚·ãƒªã‚¢ãƒ«ç•ªå·ã¯ 7221-A80F ã§ã™\n\n Z:\\ ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª\n\n2017/04/08  23:28    \u003cDIR\u003e          EFI\n               0 å€‹ã®ãƒ•ã‚¡ã‚¤ãƒ«                   0 ãƒã‚¤ãƒˆ\n               1 å€‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª      68,054,016 ãƒã‚¤ãƒˆã®ç©ºãé ˜åŸŸ\n\nZ:\\\u003ecd EFI\n\nZ:\\EFI\u003edir\n ãƒ‰ãƒ©ã‚¤ãƒ– Z ã®ãƒœãƒªãƒ¥ãƒ¼ãƒ  ãƒ©ãƒ™ãƒ«ã¯ SYSTEM ã§ã™\n ãƒœãƒªãƒ¥ãƒ¼ãƒ  ã‚·ãƒªã‚¢ãƒ«ç•ªå·ã¯ 7221-A80F ã§ã™\n\n Z:\\EFI ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª\n\n2015/11/24  15:41    \u003cDIR\u003e          .\n2015/11/24  15:41    \u003cDIR\u003e          ..\n2015/11/24  15:41    \u003cDIR\u003e          Microsoft\n2021/05/04  23:45    \u003cDIR\u003e          Boot\n2021/05/04  23:45    \u003cDIR\u003e          ubuntu\n               0 å€‹ã®ãƒ•ã‚¡ã‚¤ãƒ«                   0 ãƒã‚¤ãƒˆ\n               5 å€‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª      68,054,016 ãƒã‚¤ãƒˆã®ç©ºãé ˜åŸŸ\n\nZ:\\EFI\u003ermdir /s ubuntu\nubuntuã€ã‚ˆã‚ã—ã„ã§ã™ã‹ (Y/N)? y\n\nZ:\\EFI\u003edir\n ãƒ‰ãƒ©ã‚¤ãƒ– Z ã®ãƒœãƒªãƒ¥ãƒ¼ãƒ  ãƒ©ãƒ™ãƒ«ã¯ SYSTEM ã§ã™\n ãƒœãƒªãƒ¥ãƒ¼ãƒ  ã‚·ãƒªã‚¢ãƒ«ç•ªå·ã¯ 7221-A80F ã§ã™\n\n Z:\\EFI ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª\n\n2015/11/24  15:41    \u003cDIR\u003e          .\n2015/11/24  15:41    \u003cDIR\u003e          ..\n2015/11/24  15:41    \u003cDIR\u003e          Microsoft\n2021/05/04  23:45    \u003cDIR\u003e          Boot\n               0 å€‹ã®ãƒ•ã‚¡ã‚¤ãƒ«                   0 ãƒã‚¤ãƒˆ\n               4 å€‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª      71,808,000 ãƒã‚¤ãƒˆã®ç©ºãé ˜åŸŸ\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Linux","Windows"]},"/note/Windows10%E3%81%A8Ubuntu16.04%E3%81%AE%E3%83%87%E3%83%A5%E3%82%A2%E3%83%AB%E3%83%96%E3%83%BC%E3%83%88%E8%A7%A3%E9%99%A4":{"title":"Windows10ã¨Ubuntu16.04ã®ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ–ãƒ¼ãƒˆè§£é™¤","content":"\n[ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ–ãƒ¼ãƒˆã‹ã‚‰ Ubuntu ã‚’å‰Šé™¤ã™ã‚‹æ–¹æ³• | Windows10 ã¨ Ubuntu ã®ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ–ãƒ¼ãƒˆã‹ã‚‰Ubuntu ã‚’å‰Šé™¤ã— UEFI ãƒ–ãƒ¼ãƒˆã‚’ä¿®æ­£ã™ã‚‹æ–¹æ³•](https://bi.biopapyrus.jp/os/win/dualboot-fix-bootmenu.html)\nã‚’å¤§ã„ã«å‚è€ƒã«ã—ãŸã€‚\n\n## ç¢ºèª\n\nWindowsã®ã€Œã‚·ã‚¹ãƒ†ãƒ æƒ…å ±ã€ã§BIOSãƒ¢ãƒ¼ãƒ‰ãŒUEFIã§ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã™ã‚‹ã€‚\nãƒ¬ã‚¬ã‚·ãƒ¼BIOSã®å ´åˆã¯æ‰‹é †ãŒç•°ãªã‚‹ã€‚\n\nãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ–ãƒ¼ãƒˆæ™‚ã®èµ·å‹•é †ã¯ã€BIOS -\u003e Grub -\u003e Ubuntu or Windowsã‚’é¸æŠã ã£ãŸ\n\n## bcdeditã‚³ãƒãƒ³ãƒ‰ã§ã‚¨ãƒ³ãƒˆãƒªç¢ºèª\u0026å‰Šé™¤\n\n[bcdeditã¨ã¯](note/bcdeditã¨ã¯.md)\n\nã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ç®¡ç†è€…æ¨©é™ã§å®Ÿè¡Œ\n\n````\n$ bcdedit /enum firmware\n$ bcdedit /delete {id}\n````\n\n## ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã®æ“ä½œ\n\n````sh\n$ diskpart\n$ list disk \nUEFIã®ã‚ã‚‹ãƒ‡ã‚£ã‚¹ã‚¯ã‚’é¸æŠã™ã‚‹(disk0)\n$ sel disk 0\n$ list vol\nLABEL:SYSTEMã€Fs:FAT32ã®volumeã‚’é¸æŠ\n$ sel vol 2\nUEFI ã‚·ã‚¹ãƒ†ãƒ ãƒ‘ãƒ¼ãƒ†ã‚¤ã‚·ãƒ§ãƒ³ã‚’ç·¨é›†ã§ãã‚‹ã‚ˆã†ã«ãƒ‰ãƒ©ã‚¤ãƒ–ãƒ¬ã‚¿ãƒ¼ã‚’å‰²ã‚Šå½“ã¦ã¦ãƒã‚¦ãƒ³ãƒˆã™ã‚‹\n````\n\n## EFIã‹ã‚‰ubuntuãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å‰Šé™¤\n\n````sh\n$ cd /d Z:\\\n$ dir\n$ rmdir /s ubuntu\n````\n\nå†èµ·å‹•ã™ã‚‹ã¨GrubãŒèµ·å‹•ã›ãšã€Windowsã®ã¿ãƒ–ãƒ¼ãƒˆã—ãŸ\n\n## ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã®å‰Šé™¤ã€å†å‰²ã‚Šå½“ã¦\n\nUbuntuã«å‰²ã‚Šå½“ã¦ã¦ã„ãŸãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤ã™ã‚‹\n\nHDDã®ãƒ¡ã‚¤ãƒ³é ˜åŸŸã«å‰²ã‚Šå½“ã¦ã¦ã„ãŸ250GBã¨ã‚¹ãƒ¯ãƒƒãƒ—é ˜åŸŸ4GBã‚’å‰Šé™¤\n\nãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ä¸Šã§å³ã‚¯ãƒªãƒƒã‚¯â†’ãƒœãƒªãƒ¥ãƒ¼ãƒ ã®å‰Šé™¤ã§å‰Šé™¤ã§ãã‚‹\n\nå‰Šé™¤ã§ããŸã‚‰ã€Windowsã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã§ãƒœãƒªãƒ¥ãƒ¼ãƒ ã®æ‹¡å¼µã‚’ã‚¯ãƒªãƒƒã‚¯\n\n## é«˜é€Ÿã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ã‚’ã‚‚ã¨ã«æˆ»ã™\n\nãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ–ãƒ¼ãƒˆã®ãŸã‚ç„¡åŠ¹åŒ–ã—ã¦ã„ãŸé …ç›®ã€‚\nã‚‚ã—ç„¡åŠ¹ã«ãªã£ãŸã¾ã¾ã ã£ãŸã‚‰ã€é›»æºã®ç®¡ç†ã‹ã‚‰æœ‰åŠ¹ã«ã™ã‚‹\n\n## ã‚‚ã—å…ˆã«ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤ã—ã¦ã—ã¾ã£ãŸã‚‰\n\n[ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ–ãƒ¼ãƒˆã—ãŸç’°å¢ƒã§å…ˆã«Ubuntuã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤ã—ã¦ã—ã¾ã£ãŸã¨ãã®è©± | (å¦„æƒ³)å¤©ä½¿ã‚‹ã—ãµã‡ã¡ã‚ƒã‚“ã®æ—¥è¨˜](https://ameblo.jp/lucifep2525/entry-12413328349.html)\n\nUbuntuã‚’å‰Šé™¤ã™ã‚‹ã¨ãã¯å…ˆã«ãƒ–ãƒ¼ãƒˆæ§‹æˆãƒ‡ãƒ¼ã‚¿(BCD)ã‚’å¤‰æ›´ã—ã¦ Ubuntuã®ãƒ–ãƒ¼ãƒˆã‚¨ãƒ³ãƒˆãƒªã‚’å‰Šé™¤ã—ã¦ã‹ã‚‰ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤ã™ã‚‹ã€‚\nå…ˆã«Ubuntuã®ãƒ‘ãƒ¼ãƒ†ã‚£ã‚·ãƒ§ãƒ³ã‚’å‰Šé™¤ã—ã¦ã—ã¾ã†ã¨ã€æœ€æ‚ªwindowsãŒèµ·å‹•ã—ãªããªã‚Šã€é ‘å¼µã£ã¦ä¿®å¾©ä½œæ¥­ã‚’è¡Œã†å¿…è¦ãŒå‡ºã¦ãã‚‹ã‚‰ã—ã„ã€‚\n\n## å‚è€ƒ\n\n* [Windows 10ã§Ubuntu GRUBãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ã®å‰Šé™¤æ–¹æ³• UEFIï¼ãƒ¬ã‚¬ã‚·ãƒ¼BIOS | ä¿ºã®é–‹ç™ºç ”ç©¶æ‰€](https://itlogs.net/ubuntu-grub-delete-uefi-bios/)\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["Windows","Ubuntu"]},"/note/XDG_BASE_DIRECTORY%E3%81%A7%E3%83%9B%E3%83%BC%E3%83%A0%E3%83%87%E3%82%A3%E3%83%AC%E3%82%AF%E3%83%88%E3%83%AA%E3%82%92%E6%95%B4%E7%90%86%E3%81%99%E3%82%8B":{"title":"XDG_BASE_DIRECTORYã§ãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æ•´ç†ã™ã‚‹","content":"\nå‚è€ƒ\n[ãƒ›ãƒ¼ãƒ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ãƒ‰ãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ•´ç†ã™ã‚‹ã€‚](https://chiyosuke.blogspot.com/2019/04/blog-post_27.html)\n\n## XDG_CONFIG_HOMEã¨ã¯\n\nhttps://wiki.archlinux.org/title/XDG_Base_Directory ã«å‰‡ã£ã¦ã€ `~/.config` ã«è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ãã¨HOMEãƒ•ã‚©ãƒ«ãƒ€ãŒã”ã¡ã‚ƒã”ã¡ã‚ƒã—ãªãã¦ã„ã„ã‚ˆã†ãªã®ã§ã‚„ã£ã¦ã¿ã‚‹ã€‚\n\nhttps://www.freedesktop.org/wiki/Specifications/ ã«ã‚ˆã‚‹ã¨ã€ 'XDG'ã¯ Cross-Desktop Group ã®ã“ã¨ã‚‰ã—ã„\n\n## zshã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’~/.configã«ã™ã‚‹\n\nç’°å¢ƒå¤‰æ•° `$ZDOTDIR` ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã¨ã€ãã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä»¥ä¸‹ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¦‹ã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚\nzshã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ `~/.zshenv` ã‚’è¦‹ã‚‹ã®ã§ã€ã“ã“ã«æ›¸ã„ã¦ã‚‚è‰¯ã„ã®ã ãŒã€ `~/.zshenv` ã¨ `~/.config/zsh/.zshenv` ãŒå­˜åœ¨ã™ã‚‹ã“ã¨ã«ãªã‚Šã¡ã‚‡ã£ã¨æ°—æŒã¡æ‚ªã„ã€‚\nã“ã“ã§ã¯ã‚·ã‚¹ãƒ†ãƒ ã® `/etc/zshenv` ã«æ›¸ãã“ã¨ã«ã—ãŸã€‚\n\n`sudo vim /etc/zshenv`\n\n````shell\nexport ZDOTDIR=$HOME/.config/zsh\n````\n\nã“ã‚Œã§ `~/.config/zsh/.zshenv(, .zshrcãªã©)` ãŒèª­ã¿è¾¼ã¾ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚\n\n## ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š\n\n````shell:~/.zsh/.zshenv\nexport XDG_CONFIG_HOME=~/.config\nexport XDG_CACHE_HOME=~/.cache\nexport XDG_DATA_HOME=~/.local/share\nexport XDG_STATE_HOME=~/.local/state\n````\n\n## [Vim](note/Vim.md)\n\n[Neovim](note/Neovim.md) ã‚’ä½¿ã£ã¦ã„ã‚‹ã€‚ã‚‚ã¨ã‚‚ã¨ `$XDG_CONFIG_HOME/nvim/init.vim` ã‚’è¦‹ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã¦ã€ç‰¹åˆ¥ãªè¨­å®šã¯ã„ã‚‰ãªã„ã®ã ãŒã€vimã®è¨­å®šã¨çµ±ä¸€ã—ã¦ãŠããŸã‹ã£ãŸã®ã§ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ãŸã€‚\nvimã¯ã»ã¼èµ·å‹•ã—ãªã„ã®ã§ã€init.vimã«æ›¸ã„ã¦ã—ã¾ã£ã¦ã‚‚è‰¯ã‹ã£ãŸã®ã ãŒãªã‚“ã¨ãªãã“ã†ã—ã¦ã„ã‚‹ã€‚\n\n````vim:~/.config/nvim/init.vim\nset runtimepath+=$XDG_CONFIG_HOME/nvim,$XDG_CONFIG_HOME/nvim/after\nset packpath+=$XDG_CONFIG_HOME/nvim\nsource $XDG_CONFIG_HOME/nvim/vimrc\n````\n\n````vim:~/.config/nvim/vimrc\nlet $VIM_CACHE = expand('$XDG_CACHE_HOME/vim')\nlet $VIM_HOME = expand('$XDG_CONFIG_HOME/nvim')\n\n\" ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒç„¡ã‹ã£ãŸã‚‰ä½œã‚‹\nif !isdirectory(expand($VIM_CACHE))\n  call mkdir(expand($VIM_CACHE), 'p')\nendif\n\n\" backup, undo\nset backup\nset backupdir=$VIM_CACHE/backup\nif !isdirectory(expand('$VIM_CACHE/backup'))\n  call mkdir(expand('$VIM_CACHE/backup'), 'p')\nendif\nset noswapfile\nset undodir=$VIM_CACHE/undo\nset undofile\nif !isdirectory(expand('$VIM_CACHE/undo'))\n  call mkdir(expand('$VIM_CACHE/undo'), 'p')\nendif\n\n\" viminfoãƒ•ã‚¡ã‚¤ãƒ«ã‚’~/.cacheã«ä½œã‚‹\nset viminfo+=n$VIM_CACHE/viminfo\n\n\" sessionãƒ•ã‚¡ã‚¤ãƒ«ã‚’~/.cacheã«ä½œã‚‹\nlet g:session_path = expand('$VIM_CACHE/sessions')\nif !isdirectory(g:session_path)\n    call mkdir(g:session_path, \"p\")\nendif\n\n\" ... ãã®ä»–è¨­å®š\n\n````\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["shell","zsh"]},"/note/XML%E3%82%92%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%83%A9%E3%82%A4%E3%83%B3%E3%81%A7%E6%93%8D%E4%BD%9C%E3%81%99%E3%82%8B":{"title":"XMLã‚’ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§æ“ä½œã™ã‚‹","content":"\n[xmlstarlet](http://xmlstar.sourceforge.net/docs.php) ã‚’ä½¿ã£ã¦ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ä¸Šã§ [XPath](note/XPath.md) ã‚’ä½¿ã£ãŸselectã‚„updateãŒå¯èƒ½ã«ãªã‚‹\n\n## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\nMacã®å ´åˆ [Homebrew](note/Homebrew.md) ã§\n\n````shell\nbrew install xmlstarlet\n````\n\n## ä½¿ã„æ–¹\n\nä»¥ä¸‹ã®ã‚ˆã†ãªxmlã‚’è€ƒãˆã‚‹\n\n````xml\n\u003ccontracts\u003e\n    \u003cclients\u003e\n        \u003cclient ref=\"123\"\u003e\n            \u003cname\u003eNicol\u003c/name\u003e\n        \u003c/client\u003e\n        \u003cclient ref=\"8234\"\u003e\n            \u003cname\u003eBasil\u003c/name\u003e\n        \u003c/client\u003e\n    \u003c/clients\u003e\n    \u003centries\u003e\n        \u003centry ref=\"63352\"\u003e\n            \u003cregCode\u003eBCG\u003c/regCode\u003e\n        \u003c/entry\u003e\n        \u003centry ref=\"3242\"\u003e\n            \u003cregCode\u003eTYD\u003c/regCode\u003e\n        \u003c/entry\u003e\n    \u003c/entries\u003e\n\u003c/contracts\u003e  \n````\n\n### å‚ç…§\n\n````shell\n$ xmlstarlet sel -t -c '//client[@ref=\"123\"]' -t -c '/contracts/entries/entry' temp.xml\n\u003cclient ref=\"123\"\u003e\n            \u003cname\u003eNicol\u003c/name\u003e\n        \u003c/client\u003e\u003centry ref=\"63352\"\u003e\n            \u003cregCode\u003eBCG\u003c/regCode\u003e\n        \u003c/entry\u003e\u003centry ref=\"3242\"\u003e\n            \u003cregCode\u003eTYD\u003c/regCode\u003e\n        \u003c/entry\u003e\n````\n\n### æ›´æ–°\n\n#### å€¤ã®æ›´æ–°\n\n`inplace` ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãæ›ãˆã‚‹\n\n````shell\n$ xmlstarlet ed --inplace -u '/contracts/clients/client[@ref=\"123\"]/name' -v Jack temp.xml\n````\n\nçµæœ\n\n````xml:temp.xml\n\u003ccontracts\u003e\n  \u003cclients\u003e\n    \u003cclient ref=\"123\"\u003e\n      \u003cname\u003eJack\u003c/name\u003e\n    \u003c/client\u003e\n    \u003cclient ref=\"8234\"\u003e\n      \u003cname\u003eBasil\u003c/name\u003e\n    \u003c/client\u003e\n  \u003c/clients\u003e\n  \u003centries\u003e\n    \u003centry ref=\"63352\"\u003e\n      \u003cregCode\u003eBCG\u003c/regCode\u003e\n    \u003c/entry\u003e\n    \u003centry ref=\"3242\"\u003e\n      \u003cregCode\u003eTYD\u003c/regCode\u003e\n    \u003c/entry\u003e\n  \u003c/entries\u003e\n\u003c/contracts\u003e\n````\n\n#### attributeã®æ›´æ–°\n\n````shell\n$ xmlstarlet ed -u '//entry[@ref=\"3242\"]/@ref' -v 99 temp.xml\n\u003c?xml version=\"1.0\"?\u003e\n\u003ccontracts\u003e\n  \u003cclients\u003e\n    \u003cclient ref=\"123\"\u003e\n      \u003cname\u003eJack\u003c/name\u003e\n    \u003c/client\u003e\n    \u003cclient ref=\"8234\"\u003e\n      \u003cname\u003eBasil\u003c/name\u003e\n    \u003c/client\u003e\n  \u003c/clients\u003e\n  \u003centries\u003e\n    \u003centry ref=\"63352\"\u003e\n      \u003cregCode\u003eBCG\u003c/regCode\u003e\n    \u003c/entry\u003e\n    \u003centry ref=\"99\"\u003e\n      \u003cregCode\u003eTYD\u003c/regCode\u003e\n    \u003c/entry\u003e\n  \u003c/entries\u003e\n\u003c/contracts\u003e\n````\n\n### å‰Šé™¤\n\n````shell\n$ xmlstarlet ed -d '//entry[@ref=\"3242\"]' temp.xml\n\u003c?xml version=\"1.0\"?\u003e\n\u003ccontracts\u003e\n  \u003cclients\u003e\n    \u003cclient ref=\"123\"\u003e\n      \u003cname\u003eJack\u003c/name\u003e\n    \u003c/client\u003e\n    \u003cclient ref=\"8234\"\u003e\n      \u003cname\u003eBasil\u003c/name\u003e\n    \u003c/client\u003e\n  \u003c/clients\u003e\n  \u003centries\u003e\n    \u003centry ref=\"63352\"\u003e\n      \u003cregCode\u003eBCG\u003c/regCode\u003e\n    \u003c/entry\u003e\n  \u003c/entries\u003e\n\u003c/contracts\u003e\n````\n\n* [Edit xml file using shell script / command](https://superuser.com/questions/916665/edit-xml-file-using-shell-script-command)\n* [how to update the xml file using xmlstarlet](https://stackoverflow.com/questions/29265833/how-to-update-the-xml-file-using-xmlstarlet)\n* [How to search for a XML node and add or delete it using xmlstarlet](https://stackoverflow.com/questions/50597814/how-to-search-for-a-xml-node-and-add-or-delete-it-using-xmlstarlet)\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["shell","xml"]},"/note/XPath":{"title":"XPath","content":"\nXMLãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå†…ã®ç‰¹å®šã®è¦ç´ ã‚„å±æ€§ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ãŸã‚ã®ãƒ‘ã‚¹ã‚’è¡¨ã™è¨€èªã€‚\nXPathã¯ã€XMLãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®ãƒ„ãƒªãƒ¼æ§‹é€ ã‚’ä½¿ç”¨ã—ã¦ã€XMLè¦ç´ ã¨å±æ€§ã‚’è­˜åˆ¥ã™ã‚‹ãŸã‚ã®ç°¡æ½”ã§æŸ”è»Ÿãªæ–¹æ³•ã‚’æä¾›ã™ã‚‹ã€‚\n\nXPathã®æ–‡æ³•ã«ã¯ã€æ¬¡ã®ã‚ˆã†ãªæ§‹æˆè¦ç´ ãŒå«ã¾ã‚Œã‚‹ã€‚\n\n* ãƒãƒ¼ãƒ‰ãƒ†ã‚¹ãƒˆ: ãƒãƒ¼ãƒ‰ã‚¿ã‚¤ãƒ—ã«åŸºã¥ã„ã¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ„ãƒªãƒ¼å†…ã®ãƒãƒ¼ãƒ‰ã‚’é¸æŠã™ã‚‹ãŸã‚ã®å¼\n* è»¸: ç¾åœ¨ã®ãƒãƒ¼ãƒ‰ã«ç›¸å¯¾çš„ãªãƒãƒ¼ãƒ‰ã‚’é¸æŠã™ã‚‹ãŸã‚ã®æŒ‡ç¤ºå­\n* è¿°èª: ãƒãƒ¼ãƒ‰é›†åˆã®ä¸€éƒ¨ã‚’é¸æŠã™ã‚‹ãŸã‚ã®æ¡ä»¶å¼\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["xml"]},"/note/YAML":{"title":"YAML","content":"\n\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["2023/05/04","yaml"]},"/note/Zettelkasten%E3%81%A8%E3%81%AF":{"title":"Zettelkastenã¨ã¯","content":"\n\u003chttps://jmatsuzaki.com/archives/26856\u003e\n\n \u003e \n \u003e Zettelkastenã®ç‰¹å¾´ã‚’ç°¡å˜ã«è§£èª¬ã™ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªç‰¹å¾´ã‚’ã‚‚ã£ãŸã‚·ã‚¹ãƒ†ãƒ ã¨ã„ãˆã¾ã™ã€‚\n \u003e \n \u003e * ã‚«ãƒ¼ãƒ‰ã«ã¯ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªIDãŒä»˜ä¸ã•ã‚Œã€IDã‚’ä½¿ã£ã¦ä»–ã®ãƒãƒ¼ãƒˆã‹ã‚‰ä¸€æ„ã«å‚ç…§ã§ãã‚‹\n \u003e * ãƒãƒ¼ãƒˆã‚’åˆ†é¡ãƒ»æ§‹é€ åŒ–ã™ã‚‹ã“ã¨ã§ã¯ãªãã€IDã‚’ä½¿ã£ãŸã‚«ãƒ¼ãƒ‰é–“ã®ãƒªãƒ³ã‚¯ã«ã‚ˆã£ã¦çŸ¥è­˜ã®ã‚¦ã‚§ãƒ–ã‚’ä½œã‚‹\n \u003e * æ—¢å­˜ã®åˆ†é‡ã§è¿½åŠ ã®èª¿æŸ»ã‚’è¡Œã£ãŸå ´åˆã¯ã„ã¤ã§ã‚‚è¿½åŠ ã®ã‚«ãƒ¼ãƒ‰ã«ã‚ˆã£ã¦è¿½è¨˜ã§ãã‚‹ï¼ˆè¿½è¨˜ã‚‚IDã«ã‚ˆã£ã¦åˆ¤åˆ¥ï¼‰\n \u003e * 1æšã®ã‚«ãƒ¼ãƒ‰ã«ã¯1ã¤ã®æ¦‚å¿µãƒ»ã‚¢ã‚¤ãƒ‡ã‚¢ã ã‘ãŒå«ã¾ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹\n \u003e * å°†æ¥ã„ã¤èª­ã¿è¿”ã—ã¦ã‚‚ç†è§£ã§ãã‚‹ã‚ˆã†ã«ãƒãƒ¼ãƒˆã‚’æ›¸ã\n \u003e \n \u003e ã“ã®ã‚ˆã†ãªã‚·ã‚¹ãƒ†ãƒ ã«ã‚ˆã£ã¦ã€**ãŸã å¿˜ã‚Œãªã„ã‚ˆã†ã«ãƒ¡ãƒ¢ã—ã¦ãŠãã ã‘ã®ãƒãƒ¼ãƒˆã¨ã—ã¦ã§ã¯ãªãã€è€ƒãˆã‚‹ãŸã‚ã®ãƒãƒ¼ãƒˆã€ç¬¬äºŒã®è„³ã¨ã—ã¦ã®ãƒãƒ¼ãƒˆã‚’æ§‹ç¯‰**ã™ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚è¨˜æ†¶ã®ã‚µãƒãƒ¼ãƒˆã¨ã—ã¦ã ã‘ã§ãªãã€æ–°ã—ã„ã‚¢ã‚¤ãƒ‡ã‚¢ã®ç™ºæƒ³ã‚„æ–°ã—ã„æ´å¯Ÿã‚’ã‚‚ãŸã‚‰ã—ã¦ãã‚Œã‚‹ãŸã‚ã®ãƒãƒ¼ãƒˆã§ã™ã€‚\n\nãƒãƒ¼ãƒˆã‚’ä¸å¯§ã«åˆ†é¡ã™ã‚‹å¿…è¦ãªãã€ãƒªãƒ³ã‚¯ã‚’ã¤ãªã’ã¦ã„ãè€ƒãˆæ–¹\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["obsidian"]},"/note/Zsh%E3%81%AE%E3%82%AD%E3%83%BC%E3%83%90%E3%82%A4%E3%83%B3%E3%83%89":{"title":"Zshã®ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰","content":"\n\u003chttps://dev.classmethod.jp/articles/keybind-ctrl-a-z/\u003e\n\n`bindkey` ã§ä¸€è¦§ãŒã¿ã‚Œã‚‹\n","lastmodified":"2023-07-29T08:18:43.043498345Z","tags":["zsh"]},"/note/adb%E3%81%A7Android%E3%81%AE%E9%9D%99%E6%AD%A2%E7%94%BB%E5%8B%95%E7%94%BB%E3%82%92%E5%8F%96%E3%82%8B%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89":{"title":"adbã§Androidã®é™æ­¢ç”»ãƒ»å‹•ç”»ã‚’å–ã‚‹ã‚³ãƒãƒ³ãƒ‰","content":"\n\u003chttps://littlewing.hatenablog.com/entry/2016/12/20/133901\u003e\n\u003chttps://qiita.com/AAkira/items/c8537c24d9c13bd39ae1\u003e\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Android","shell"]},"/note/adb%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%81%A7Android%E3%81%AE%E9%8C%B2%E7%94%BB%E3%81%A8PC%E3%81%B8%E3%81%AE%E3%82%B3%E3%83%94%E3%83%BC":{"title":"adbã‚³ãƒãƒ³ãƒ‰ã§Androidã®éŒ²ç”»ã¨PCã¸ã®ã‚³ãƒ”ãƒ¼","content":"\n\n````shell\n#!/bin/sh\n\nDATE=`date '+%y%m%d%H%M%S'`\nFILE_NAME=record-${DATE}\nYOUR_PATH=~/Desktop\n\nadb shell screenrecord /sdcard/${FILE_NAME}.mp4 \u0026\npid=`ps x | grep -v grep | grep \"adb shell screenrecord\" | awk '{ print $1 }'`\n\nif [ -z \"$pid\" ]; then\n  printf \"Not running a screenrecord.\"\n  exit 1\nfi\n\nprintf \"Recording, finish? [y]\"\nwhile read isFinished; do\n  case \"$isFinished\" in\n    \"y\" | \"Y\") break ;;\n    *) printf \"Incorrect value.\" ;;\n  esac\ndone\n\nkill -9 $pid # Finished the process of adb screenrecord\nwhile :\ndo\n  alive=`adb shell ps | grep screenrecord | grep -v grep | awk '{ print $9 }'`\n  if [ -z \"$alive\" ]; then\n      break\n  fi\ndone\n\nprintf \"Finished the recording process : $pid\\nSending to $YOUR_PATH...\\n\"\nadb pull /sdcard/${FILE_NAME}.mp4 $YOUR_PATH\nadb shell rm /sdcard/${FILE_NAME}.mp4\n\necho \"Converts to GIF? [y]\"\nread convertGif\ncase $convertGif in\n    \"y\" | \"Y\") ffmpeg -i ${YOUR_PATH}/${FILE_NAME}.mp4 -vf scale=240:-1 -an -r 15 -pix_fmt rgb24 -f gif ${YOUR_PATH}/${FILE_NAME}.gif ;; # creating gif\n    *) ;;\nesac\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Android"]},"/note/adb%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%83%A6%E3%83%BC%E3%83%86%E3%82%A3%E3%83%AA%E3%83%86%E3%82%A3%E9%9B%86":{"title":"adbã‚³ãƒãƒ³ãƒ‰ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é›†","content":"\n\n````shell\n# ã‚­ãƒ£ãƒ—ãƒãƒ£ã‚’æ’®ã£ã¦PCã«ã‚³ãƒ”ãƒ¼ã—ã€ã‚µã‚¤ã‚ºã‚’å¤‰æ›´\nadb_screencap() {\n  local DATE_TIME=$(date +\"%Y%m%d-%H%M%S\")\n  local FILE_NAME=${DATE_TIME}.png\n\n  local DEST_DIR=${1:-~/Desktop}\n  local SIZE=${2:-300x}\n\n  adb shell screencap -p /sdcard/$FILE_NAME\n  adb_pull_file $file_name $dest_dir\n\n  mogrify -resize $SIZE -unsharp 2x1.4+0.5+0 -quality 100 -verbose $DEST_DIR/$FILE_NAME\n}\n\n# PCã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦å…ƒãƒ•ã‚¡ã‚¤ãƒ«ã¯å‰Šé™¤\nadb_pull_file() {\n  file_name=$1\n  directory=$2\n  if [[ -z $file_name -o -z $directory ]]; then\n    echo 'no file'\n    return 1\n  fi\n\n  adb pull /sdcard/$file_name $directory/$file_name\n  adb shell rm /sdcard/$file_name\n}\n\n# adbã¨ã¯ã¡ã‚‡ã£ã¨ç•°ãªã‚‹ãŒã€mp4ã‚’gifã«å¤‰æ›ã™ã‚‹\nmp4_to_gif() {\n  local FILE_NAME=$1\n  local DEST_FILE_NAME=$(echo $FILE_NAME | tr -d '.mp4')\n  ffmpeg -i $FILE_NAME -an -r 15 -pix_fmt rgb24 -s 540x960 -f gif $DEST_FILE_NAME\n}\n\n# https://github.com/fish-shell/fish-shell/issues/2036\nadb_screenrecord() {\n  local DATE_TIME=$(date +\"%Y-%m-%dT%H-%M-%S\")\n  local FILE_NAME=$DATE_TIME.mp4\n  local DEST_DIR=${1:-~/Desktop}\n\n  trap \"echo 'pull to $DEST_DIR/$FILE_NAME'; adb pull /sdcard/$FILE_NAME $DEST_DIR/$FILE_NAME; adb shell rm /sdcard/$FILE_NAME\" SIGINT\n\n  echo \"éŒ²ç”»ã‚’é–‹å§‹ã—ã¾ã—ãŸã€‚éŒ²ç”»ã‚’çµ‚äº†ã™ã‚‹å ´åˆã¯ã€ Ctrl+C ã‚’æŠ¼ä¸‹ã—ã¦ãã ã•ã„\"\n  adb shell screenrecord /sdcard/$FILE_NAME --size 540x960\n}\n````\n\n[adbã‚³ãƒãƒ³ãƒ‰ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é›†](note/adbã‚³ãƒãƒ³ãƒ‰ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é›†.md)\n[adbã§Androidã®é™æ­¢ç”»ãƒ»å‹•ç”»ã‚’å–ã‚‹ã‚³ãƒãƒ³ãƒ‰](note/adbã§Androidã®é™æ­¢ç”»ãƒ»å‹•ç”»ã‚’å–ã‚‹ã‚³ãƒãƒ³ãƒ‰.md)\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":[]},"/note/alpine%E3%81%A7Android%E3%82%A2%E3%83%97%E3%83%AA%E3%82%92%E3%83%93%E3%83%AB%E3%83%89%E3%81%99%E3%82%8B%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8%E3%82%92%E4%BD%9C%E6%88%90":{"title":"alpineã§Androidã‚¢ãƒ—ãƒªã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œæˆ","content":"\n\\#Docker\n\n## ã‚„ã£ãŸã“ã¨\n\nä»¥ä¸‹ã‚’å‚è€ƒã«Dockerfileã‚’ä½œæˆ\n\n[Androidã®ãƒ“ãƒ«ãƒ‰ç”¨Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ€ã‚¤ã‚¨ãƒƒãƒˆè¨ˆç”» - dely tech blog](https://tech.dely.jp/entry/2020/12/07/170000)\n[Androidã‚¢ãƒ—ãƒªã®ãƒ“ãƒ«ãƒ‰ç’°å¢ƒDockerã‚¤ãƒ¡ãƒ¼ã‚¸åˆ¶ä½œ - Qiita](https://qiita.com/kaihei777/items/1a94a8a329c8fb67d421)\n[Dockerã§Androidã‚¢ãƒ—ãƒªã®ãƒ“ãƒ«ãƒ‰ç’°å¢ƒã‚’ä½œã‚‹ - Qiita](https://qiita.com/kichinaga/items/66872432747e76d72af7)\n\n* Android SDKã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚³ãƒ³ãƒ†ãƒŠã‚’å…¬é–‹ã—ã¦ã—ã¾ã†ã¨ãƒ©ã‚¤ã‚»ãƒ³ã‚¹é•åã«ãªã‚‹ã®ã§å…¬é–‹ã¯ã—ãªã„\n* ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ¡ãƒ¼ã‚¸ã¯alpineã‚’ã¤ã‹ã„ã‚µã‚¤ã‚ºã‚’å°ã•ãã™ã‚‹\n\n### glibcã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n[sgerrand/alpine-pkg-glibc: A glibc compatibility layer package for Alpine Linux](https://github.com/sgerrand/alpine-pkg-glibc)\n\n````shell\nwget -q -O /etc/apk/keys/sgerrand.rsa.pub https://alpine-pkgs.sgerrand.com/sgerrand.rsa.pub\nwget https://github.com/sgerrand/alpine-pkg-glibc/releases/download/2.35-r0/glibc-2.35-r0.apk\napk add glibc-2.35-r0.apk\n````\n\nlocaleã®æŒ‡å®šãŒå¿…è¦ãªã‚‰glibc-i18nã‚’å…¥ã‚Œã‚‹\n\n````shell\nwget https://github.com/sgerrand/alpine-pkg-glibc/releases/download/2.35-r0/glibc-bin-2.35-r0.apk\nwget https://github.com/sgerrand/alpine-pkg-glibc/releases/download/2.35-r0/glibc-i18n-2.35-r0.apk\napk add glibc-bin-2.35-r0.apk glibc-i18n-2.35-r0.apk\n/usr/glibc-compat/bin/localedef -i en_US -f UTF-8 en_US.UTF-8\n````\n\nDockerfileã¯ã€alpineã«glibcã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚¤ãƒ¡ãƒ¼ã‚¸ https://hub.docker.com/r/frolvlad/alpine-glibc/ ã‚’å‚è€ƒã«ã™ã‚‹\n\n[docker-alpine-glibc/Dockerfile at master Â· Docker-Hub-frolvlad/docker-alpine-glibc](https://github.com/Docker-Hub-frolvlad/docker-alpine-glibc/blob/master/Dockerfile)\n\n````Dockerfile\nENV LANG=C.UTF-8\n\n# install alpine-pkg-glibc apk and set C.UTF-8 locale as default\nRUN BASE_URL=\"https://github.com/sgerrand/alpine-pkg-glibc/releases/download\" \u0026\u0026 \\\n    VERSION=\"2.35-r0\" \u0026\u0026 \\\n    BASE_FILE=\"glibc-$VERSION.apk\" \u0026\u0026 BIN_FILE=\"glibc-bin-$VERSION.apk\" \u0026\u0026 I18N_FILE=\"glibc-i18n-$VERSION.apk\" \u0026\u0026 \\\n    wget -q -O /etc/apk/keys/sgerrand.rsa.pub https://alpine-pkgs.sgerrand.com/sgerrand.rsa.pub \u0026\u0026 \\\n    wget \"$BASE_URL/$VERSION/$BASE_FILE\" \u0026\u0026 wget \"$BASE_URL/$VERSION/$BIN_FILE\" \u0026\u0026 wget \"$BASE_URL/$VERSION/$I18N_FILE\" \u0026\u0026 \\\n    apk add --no-cache \"$BASE_FILE\" \"$BIN_FILE\" \"$I18N_FILE\" \u0026\u0026 \\\n    rm \"/etc/apk/keys/sgerrand.rsa.pub\" \u0026\u0026 \\\n    /usr/glibc-compat/bin/localedef --force --inputfile POSIX --charmap UTF-8 \"$LANG\" || true \u0026\u0026 \\\n    echo \"export LANG=$LANG\" \u003e /etc/profile.d/locale.sh \u0026\u0026 \\\n    apk del glibc-i18n \u0026\u0026 \\\n    rm \"/root/.wget-hsts\" \u0026\u0026 \\\n    apk del .build-dependencies \u0026\u0026 \\\n    rm \"$BASE_FILE\" \"$BIN_FILE\" \"$I18N_FILE\"\n````\n\n2.35ã§ãƒã‚°ãŒã‚ã‚Šã€/lib64ã«glibcã§ã¯ãªãmuslã®ã¾ã¾é…ç½®ã•ã‚Œã‚‹ã®ã§2.34ã«ä¸‹ã’ãŸ\n[2.35-r0: glibc compatibility regression due to removal of /lib64 Â· Issue #181 Â· sgerrand/alpine-pkg-glibc Â· GitHub](https://github.com/sgerrand/alpine-pkg-glibc/issues/181)\n\n## å®Œæˆç³»\n\n````Dockerfile\nFROM alpine:3.16\n\nARG ANDROID_SDK_TOOLS=\"8512546\"\n\nENV LANG=C.UTF-8\nENV ANDROID_SDK_ROOT=/opt/android-sdk\nENV JAVA_HOME=/usr/local/java-8\nENV PATH=$PATH:${ANDROID_SDK_ROOT}/cmdline-tools/bin:${JAVA_HOME}/bin\n\n# å‚è€ƒ https://github.com/Docker-Hub-frolvlad/docker-alpine-glibc\nRUN BASE_URL=\"https://github.com/sgerrand/alpine-pkg-glibc/releases/download\" \u0026\u0026 \\\n    VERSION=\"2.34-r0\" \u0026\u0026 \\\n    BASE_FILE=\"glibc-$VERSION.apk\" \u0026\u0026 BIN_FILE=\"glibc-bin-$VERSION.apk\" \u0026\u0026 I18N_FILE=\"glibc-i18n-$VERSION.apk\" \u0026\u0026 \\\n    wget -q -O /etc/apk/keys/sgerrand.rsa.pub https://alpine-pkgs.sgerrand.com/sgerrand.rsa.pub \u0026\u0026 \\\n    wget \"$BASE_URL/$VERSION/$BASE_FILE\" \"$BASE_URL/$VERSION/$BIN_FILE\" \"$BASE_URL/$VERSION/$I18N_FILE\" \u0026\u0026 \\\n    apk add --no-cache \"$BASE_FILE\" \"$BIN_FILE\" \"$I18N_FILE\" \u0026\u0026 \\\n    rm \"/etc/apk/keys/sgerrand.rsa.pub\" \u0026\u0026 \\\n    /usr/glibc-compat/bin/localedef --force --inputfile POSIX --charmap UTF-8 \"$LANG\" || true \u0026\u0026 \\\n    echo \"export LANG=$LANG\" \u003e /etc/profile.d/locale.sh \u0026\u0026 \\\n    apk del glibc-i18n \u0026\u0026 \\\n    rm \"$BASE_FILE\" \"$BIN_FILE\" \"$I18N_FILE\"\n\n# Java(Amazon Corretto 17)\nRUN mkdir -p $JAVA_HOME \u0026\u0026 cd $JAVA_HOME \u0026\u0026 \\\n    wget https://corretto.aws/downloads/latest/amazon-corretto-17-x64-alpine-jdk.tar.gz \u0026\u0026 \\\n    tar -xzf amazon-corretto-17-x64-alpine-jdk.tar.gz --strip-components 1 \u0026\u0026 \\\n    rm amazon-corretto-17-x64-alpine-jdk.tar.gz\n\n# Android SDK\nENV ANDROID_API_LEVELS=android-29,android-30\nENV ANDROID_BUILD_TOOLS_VERSIONS=29.0.3,30.0.1\nRUN FILE=commandlinetools-linux-${ANDROID_SDK_TOOLS}_latest.zip \u0026\u0026 \\\n    mkdir -p ${ANDROID_SDK_ROOT} \u0026\u0026 cd ${ANDROID_SDK_ROOT} \u0026\u0026 \\\n    wget https://dl.google.com/android/repository/${FILE} \u0026\u0026 \\\n    unzip ${FILE} \u0026\u0026 rm ${FILE} \u0026\u0026 \\\n    yes | sdkmanager --licenses \u003e /dev/null \u0026\u0026 \\\n    yes | sdkmanager $(echo ${ANDROID_BUILD_TOOLS_VERSIONS} | sed 's/,/\\n/g' | sed -E 's/(.+)/build-tools;\\1/g' | tr '\\n' ' ') \"platform-tools\" $(echo ${ANDROID_API_LEVELS} | sed 's/,/\\n/g' | sed -E 's/(.+)/platforms;\\1/g' | tr '\\n' ' ')\n    \nRUN mkdir /workspace\nWORKDIR /workspace\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Docker"]},"/note/apigw_lambda%E7%9F%A5%E8%A6%8B":{"title":"apigw_lambdaçŸ¥è¦‹","content":"\n* lambda\n  * endpointã‚’pathã”ã¨ã«ä½œã‚‹\n    * mainé–¢æ•°ã®ã¿ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã”ã¨ã«æº–å‚™\n    * handleré–¢æ•°ã¯å…±é€š\n    * handlerã®ä¸­ã§pathã”ã¨ã«æŒ¯ã‚Šåˆ†ã‘\n  * endpointã¯ä¸€ã¤ã®lambda\n    * ä¸­ã§Ginãªã©ã‚’ä½¿ã£ã¦routing\n    * Ginã‚’ä½¿ã‚ãªãã¦ã‚‚å˜ã«request.pathã§åˆ†å²å‡¦ç†æ›¸ã‘ã°ã„ã„ã ã‘ï¼Ÿä¾¿åˆ©ãªæ©Ÿèƒ½ãŒä½¿ãˆã‚‹åˆ©ç‚¹ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œãªã„\n    * Ginã‚’ä½¿ã‚ãªã„ã®ã§ã‚ã‚Œã°ã€mainãŒä¸€å€‹ã«ãªã‚‹ã‹è¤‡æ•°ã«ãªã‚‹ã‹ã®é•ã„ã ã‘ã«ãªã‚‹\n    * endpointä¸€å€‹ã ã¨ã€åŒæ™‚å®Ÿè¡Œæ•°ã®åˆ¶é™ãŒæ‡¸å¿µ\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["AWS","Lambda"]},"/note/aws-cli%E3%81%A7IAM%E6%83%85%E5%A0%B1%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B":{"title":"aws cliã§IAMæƒ…å ±ã‚’å–å¾—ã™ã‚‹","content":"\n\\#AWS\n\n[ã€AWS CLIã€‘IAMé–¢é€£ã®æƒ…å ±å–å¾—ç·¨ - ã‚µãƒ¼ãƒãƒ¼ãƒ¯ãƒ¼ã‚¯ã‚¹ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒ–ãƒ­ã‚°](https://blog.serverworks.co.jp/aws-cli-iam)\n\n````shell\nfunction describe_role() {\n  local role=$1\n\n  echo \"---- Role[$role] ----\"\n\n  if ! aws iam get-role --role-name ${role} \u003e/dev/null; then\n    error \"IAM RoleãŒå­˜åœ¨ã—ã¾ã›ã‚“: ${role}\"\n    exit 1\n  fi\n\n  # ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ãƒãƒªã‚·ãƒ¼ä»¥å¤–\n  policies=$(aws iam list-attached-role-policies --role-name $role --query \"AttachedPolicies[].[PolicyArn]\" --output text)\n  echo \"[$role] Policies:\"\n  echo \"$policies\"\n  for policy in $policies; do\n    echo \"[$role] PolicyName: $policy\"\n    policy_version=$(aws iam get-policy --policy-arn $policy --query \"Policy.DefaultVersionId\" --output text)\n    aws iam get-policy-version --policy-arn $policy --version-id $policy_version --query \"PolicyVersion.Document.Statement\"\n  done\n\n  # ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ãƒãƒªã‚·ãƒ¼\n  inline_policies=$(aws iam list-role-policies --role-name $role --query \"PolicyNames\" --output text)\n  echo \"[$role] InlinePolicies:\"\n  echo \"$inline_policies\"\n  for policy in $inline_policies; do\n    echo \"[$role] InlinePolicyName: $policy\"\n    aws iam get-role-policy --role-name $role --policy-name $policy --query \"PolicyDocument\"\n  done\n}\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["AWS"]},"/note/aws-cli-filter%E3%81%A8query%E3%81%AE%E3%83%A1%E3%83%A2":{"title":"aws cli filterã¨queryã®ãƒ¡ãƒ¢","content":"\n## autoscaling describe-auto-scaling-groups\n\nhttps://docs.aws.amazon.com/ja_jp/autoscaling/ec2/userguide/ec2-auto-scaling-tagging.html#use-tag-filters-aws-cli\nhttps://docs.aws.amazon.com/cli/latest/reference/autoscaling/describe-auto-scaling-groups.html\n\nã“ã¡ã‚‰ã®ã‚ˆã†ãªå½¢å¼ã§filterã§ãã‚‹ã€‚\nãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰ãŒä½¿ãˆãªã„ã®ã§æ³¨æ„(1æ•—)\n\n````\n--filters Name=tag:`environment`,Values=`production`\n````\n\n````shell\n# ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰æŒ‡å®šã¯åŠ¹æœãŒãªã„\naws autoscaling describe-auto-scaling-groups --filters 'Name=tag:Name,Values=`*myvalue*`'\n\n# filtersã¨queryã®çµ„ã¿åˆã‚ã›ã¯ã§ãã‚‹\naws autoscaling describe-auto-scaling-groups --filters \"Name=tag:Group,Values=`${Group}`\" \\\n  --query \"AutoScalingGroups[? (Tags[? (Key=='Name' \u0026\u0026 contains(Value, 'myvalue') \u0026\u0026 \\\n        !(starts_with(Value, 'foo') \u0026\u0026 starts_with(Value, 'bar')) \\\n        ) ] ) ] \\\n      .{ AutoScalingGroupName: AutoScalingGroupName,MaxSize: MaxSize, MinSize: MinSize, DesiredCapacity: DesiredCapacity}\"\n\n\n# ã“ã®æ›¸ãæ–¹ã¯æ­£ã—ãç„¡ã„ã¿ãŸã„ã§ã€containsã§æ›¸ã„ã¦ã„ã‚‹ã®ã«å®Œå…¨ä¸€è‡´ã—ã‹æ¤œç´¢ã§ããªã‹ã£ãŸ\naws autoscaling describe-auto-scaling-groups --query 'AutoScalingGroups[?contains(Tags[?Key==`Name`].Value, `myvalue`)]' \n````\n\nqueryã ã‘ã§ã‚‚çµã‚Šè¾¼ã¿ã§ãã‚‹ãŒã€filtersã¨çµ„ã¿åˆã‚ã›ãŸå ´åˆã«æ¯”ã¹ã¦æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ãŸã€‚\nå†…éƒ¨çš„ã«ã¯ã€queryã¯ã™ã¹ã¦å–å¾—ã—ã¦ã‹ã‚‰çµã‚Šè¾¼ã¿ã€filterã¯å‰å‡¦ç†ã§çµã‚Šè¾¼ã‚€ã‚“ã§ã„ã‚‹ã®ã‹ãªï¼Ÿ\n\n## queryã«ã¤ã„ã¦\n\nJMESPathã®è¨˜æ³•ã§çµã‚Šè¾¼ã‚“ã ã‚Šãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®æŠ½å‡ºã‚’è¡Œã†ã€‚\n\n* [JMESPath â€” JMESPath](https://jmespath.org)\n\n* [JMESPath Examples â€” JMESPath](https://jmespath.org/examples.html)\n\n* [AWS CLIã®ã‚¯ã‚¨ãƒªã®ä½¿ã„æ–¹ - karakaram-blog](https://www.karakaram.com/aws-cli-query-usage/)\n\n* [amazon web services - AWS-CLI: Ways to list down autoscalinggroups - Stack Overflow](https://stackoverflow.com/questions/43213828/aws-cli-ways-to-list-down-autoscalinggroups/43213944)\n\n* [amazon cloudformation - JMESPath JSON filter with multiple matches - Stack Overflow](https://stackoverflow.com/questions/37945318/jmespath-json-filter-with-multiple-matches)\n\n* [JmesPath find where not exists - Stack Overflow](https://stackoverflow.com/questions/42396971/jmespath-find-where-not-exists)\n\n* [I want to filter instances by matching a substring of a tag value Â· Issue #2206 Â· aws/aws-cli Â· GitHub](https://github.com/aws/aws-cli/issues/2206)\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["AWS","CLI"]},"/note/aws-sdk-go-v2%E3%82%92%E4%BD%BF%E3%81%86":{"title":"aws-sdk-go-v2ã‚’ä½¿ã†","content":"\n[AWS](note/AWS.md) ã‚’ [Go](note/Go.md) ã§æ“ä½œã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒª\n\naws-sdk-go-v2ãŒ2021-01-19ã«ãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸã€‚\n[AWS SDK for Go ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ 2 ãŒä¸€èˆ¬å…¬é–‹ã•ã‚Œã¾ã—ãŸ](https://aws.amazon.com/jp/about-aws/whats-new/2021/01/aws-sdk-for-go-version-2-now-generally-available/)\n\n\u003chttps://aws.amazon.com/jp/sdk-for-go/\u003e\n\n \u003e \n \u003e AWS SDK for Go ã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€AWS ã®ä½¿ç”¨ã‚’è¿…é€Ÿã«é–‹å§‹ã§ãã¾ã™ã€‚ã“ã® SDK ã‚’ä½¿ç”¨ã—ã¦ã€Amazon S3ã€Amazon DynamoDBã€Amazon SQS ãªã©ã® AWS ã®å„ç¨®ã‚µãƒ¼ãƒ“ã‚¹ã¨ Go ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç°¡å˜ã«çµ±åˆã§ãã¾ã™ã€‚\n\n* ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã«ã‚ˆã‚Šä½¿ç”¨ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã”ã¨ã«go getã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ä¸è¦ãªã‚µãƒ¼ãƒ“ã‚¹ã¯é™¤å¤–ã§ãã‚‹\n* CPU ãŠã‚ˆã³ãƒ¡ãƒ¢ãƒªã®ä½¿ç”¨ç‡ã«ãŠã‘ã‚‹é¡•è‘—ãªæ”¹å–„\n* APIãŒç°¡æ½”ã«ãªã£ãŸ\n* ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒå¼·åŒ–ã•ã‚ŒãŸ\n* pagination, waitãŒæ”¹å–„ã•ã‚ŒãŸ\n* middlewareã‚’ä½¿ã£ã¦ãƒªã‚¯ã‚¨ã‚¹ãƒˆæ™‚ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºãŒå¯èƒ½ã«ãªã£ãŸ\n\n## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n\u003chttps://github.com/aws/aws-sdk-go-v2\u003e\n\n````shell\n$ go get github.com/aws/aws-sdk-go-v2/aws\n$ go get github.com/aws/aws-sdk-go-v2/config\n\n# ä½¿ã†ã‚µãƒ¼ãƒ“ã‚¹ã®ã¿ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹\n$ go get github.com/aws/aws-sdk-go-v2/service/s3\n````\n\n## ãƒªãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹\n\n\u003chttps://pkg.go.dev/github.com/aws/aws-sdk-go-v2\u003e\n\n## ä½¿ã„æ–¹\n\n````go\nimport (\n\t\"context\"\n\t\"fmt\"\n\t\"io/ioutil\"\n\n\t\"github.com/aws/aws-sdk-go-v2/aws\"\n\t\"github.com/aws/aws-sdk-go-v2/config\"\n\t\"github.com/aws/aws-sdk-go-v2/service/s3\"\n\t\"golang.org/x/xerrors\"\n)\n\nfunc RetrieveFile(ctx context.Context) ([]byte, error) {\n\tcfg, err := config.LoadDefaultConfig(context.TODO())\n\tif err != nil {\n\t\treturn nil, xerrors.Errorf(\": %w\", err)\n\t}\n\n\tclient = s3.NewFromConfig(cfg)\n\n\tinput := \u0026s3.GetObjectInput{\n\t\tBucket: aws.String(\"sample-bucket\"),\n\t\tKey:    aws.String(\"path/to/myfile\"),\n\t}\n\n\toutput, err := client.GetObject(ctx, input)\n\tif err != nil {\n\t\treturn nil, xerrors.Errorf(\": %w\", err)\n\t}\n\n\tdefer output.Body.Close()\n\tb, err := ioutil.ReadAll(output.Body)\n\tif err != nil {\n\t\treturn nil, xerrors.Errorf(\": %w\", err)\n\t}\n\n\tfmt.Printf(\"body: %s\\n\", string(b))\n\n\treturn b, nil\n}\n````\n\n## ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆ\n\n\u003chttps://aws.github.io/aws-sdk-go-v2/docs/unit-testing/\u003e\n\nv1ã«ã¯ `xxxiface` ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸([ä¾‹: sqsiface](https://docs.aws.amazon.com/sdk-for-go/api/service/sqs/sqsiface/))ãŒã‚ã‚Šã€ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ãŒå®šç¾©ã•ã‚Œã¦ã„ãŸãŒv2ã§ã¯ãªããªã£ã¦ã„ã‚‹ã®ã§è‡ªåˆ†ã§interfac\\[\\[\\]\\]eã‚’å®šç¾©ã—ã¦mockã™ã‚‹ã€‚\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Go","AWS"]},"/note/aws-sdk-go-v2-%E3%81%A7%E3%81%AE%E3%82%A8%E3%83%A9%E3%83%BC%E3%83%8F%E3%83%B3%E3%83%89%E3%83%AA%E3%83%B3%E3%82%B0":{"title":"aws-sdk-go-v2 ã§ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°","content":"\n\\#Go #AWS\n\n* aws-sdk-go-v2 ã§ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°\n  * \u003chttps://aws.github.io/aws-sdk-go-v2/docs/migrating/#errors-types\u003e\n  * v1ã§ã¯awserrãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒã‚ã£ãŸãŒã€v2ã§ã¯ `github.com/aws/aws-sdk-go-v2/service/\u003cservice\u003e/types` ã«è©²å½“ã®ã‚¨ãƒ©ãƒ¼ã®å‹ãŒã‚ã‚‹ã®ã§castã™ã‚‹\n\n````go\n// V2\n\nimport \"context\"\nimport \"github.com/aws/aws-sdk-go-v2/service/s3\"\nimport \"github.com/aws/aws-sdk-go-v2/service/s3/types\"\nimport \"github.com/aws/smithy-go\"\n\n// ...\n\nclient := s3.NewFromConfig(cfg)\n\noutput, err := s3.GetObject(context.TODO(), \u0026s3.GetObjectInput{\n\t// input parameters\n})\nif err != nil {\n\tvar nsk *types.NoSuchKey\n\tif errors.As(err, \u0026nsk) {\n\t\t// handle NoSuchKey error\n\t\treturn\n\t}\n\tvar apiErr smithy.APIError\n\tif errors.As(err, \u0026apiErr) {\n\t\tcode := apiErr.ErrorCode()\n\t\tmessage := apiErr.ErrorMessage()\n\t\t// handle error code\n\t\treturn\n\t}\n\t// handle error\n\treturn\n}\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Go","AWS"]},"/note/aws-sdk-go-v2-Athena%E3%81%AB%E3%82%AF%E3%82%A8%E3%83%AA%E3%82%92%E6%8A%95%E3%81%92%E3%81%A6%E7%B5%90%E6%9E%9C%E3%82%92%E3%83%9A%E3%83%BC%E3%82%B8%E3%83%B3%E3%82%B0%E3%81%A7%E5%8F%97%E3%81%91%E5%8F%96%E3%82%8B":{"title":"aws-sdk-go-v2 Athenaã«ã‚¯ã‚¨ãƒªã‚’æŠ•ã’ã¦çµæœã‚’ãƒšãƒ¼ã‚¸ãƒ³ã‚°ã§å—ã‘å–ã‚‹","content":"\n\n````go\nimport (\n\t\"context\"\n\t\"fmt\"\n\t\"time\"\n\n\t\"github.com/aws/aws-sdk-go-v2/aws\"\n\t\"github.com/aws/aws-sdk-go-v2/config\"\n\t\"github.com/aws/aws-sdk-go-v2/service/athena\"\n\t\"github.com/aws/aws-sdk-go-v2/service/athena/types\"\n)\n\ntype awsClient struct {\n\tathenaClient *athena.Client\n}\n\nfunc NewAwsClient(ctx context.Context) (*awsClient, error) {\n\tcfg, err := config.LoadDefaultConfig(ctx, config.WithRegion(\"ap-northeast-1\"))\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\tathenaClient := athena.NewFromConfig(cfg)\n\treturn \u0026awsClient{\n\t\tathenaClient: athenaClient,\n\t}, nil\n}\n\ntype rowData map[string]string\n\nfunc (ac *awsClient) Query(ctx context.Context, query string, outputLocation string) ([]rowData, error) {\n\tinput := \u0026athena.StartQueryExecutionInput{\n\t\tQueryString: aws.String(query),\n\t\tResultConfiguration: \u0026types.ResultConfiguration{\n\t\t\tOutputLocation: aws.String(outputLocation),\n\t\t},\n\t}\n\n\toutput, err := ac.athenaClient.StartQueryExecution(ctx, input)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\n\tqueryExecutionId := *output.QueryExecutionId\n\n\terr = ac.waitForQueryToComplete(ctx, queryExecutionId)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\n\trowData, err := ac.processResultRows(ctx, queryExecutionId)\n\tif err != nil {\n\t\treturn nil, err\n\t}\n\n\treturn rowData, nil\n}\nfunc (ac *awsClient) waitForQueryToComplete(ctx context.Context, queryExecutionId string) error {\n\tinput := \u0026athena.GetQueryExecutionInput{\n\t\tQueryExecutionId: aws.String(queryExecutionId),\n\t}\n\n\trunCount := 0\n\tmaxRunCount := 10\n\tsleepSec := 10\n\tfor runCount \u003c maxRunCount {\n\t\toutput, err := ac.athenaClient.GetQueryExecution(ctx, input)\n\t\tif err != nil {\n\t\t\treturn err\n\t\t}\n\n\t\tswitch output.QueryExecution.Status.State {\n\t\tcase types.QueryExecutionStateSucceeded:\n\t\t\treturn nil\n\t\tcase types.QueryExecutionStateFailed:\n\t\t\treturn fmt.Errorf(\"athena query failed to run with error message: %s\", *output.QueryExecution.Status.StateChangeReason)\n\t\tcase types.QueryExecutionStateCancelled:\n\t\t\treturn fmt.Errorf(\"athena query was cancelled\")\n\t\tdefault:\n\t\t\ttime.Sleep(time.Duration(sleepSec) * time.Second)\n\t\t\trunCount++\n\t\t}\n\t}\n\n\treturn fmt.Errorf(\"athena query was timeout\")\n}\n\nfunc (ac *awsClient) processResultRows(ctx context.Context, queryExecutionId string) ([]rowData, error) {\n\tinput := \u0026athena.GetQueryResultsInput{\n\t\tQueryExecutionId: aws.String(queryExecutionId),\n\t}\n\n\trds := make([]rowData, 0)\n\trns := make([]string, 0)\n\n\tpaginator := athena.NewGetQueryResultsPaginator(ac.athenaClient, input)\n\tfirst := true\n\tfor paginator.HasMorePages() {\n\t\toutput, err := paginator.NextPage(ctx)\n\t\tif err != nil {\n\t\t\treturn nil, err\n\t\t}\n\n\t\tif first {\n\t\t\tfor _, meta := range output.ResultSet.ResultSetMetadata.ColumnInfo {\n\t\t\t\trns = append(rns, *meta.Name)\n\t\t\t}\n\t\t}\n\n\t\tfor _, v := range output.ResultSet.Rows {\n\t\t\tif first {\n\t\t\t\t// Ignore first row of first run. It's header row\n\t\t\t\tfirst = false\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\trd := rowData{}\n\t\t\tfor i, d := range v.Data {\n\t\t\t\trd[rns[i]] = *d.VarCharValue\n\t\t\t}\n\t\t\trds = append(rds, rd)\n\t\t}\n\t}\n\n\treturn rds, nil\n}\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["2023/04/19","AWS"]},"/note/bcdedit%E3%81%A8%E3%81%AF":{"title":"bcdeditã¨ã¯","content":"\n[BCDEdit ã®ã‚³ãƒãƒ³ãƒ‰ ãƒ©ã‚¤ãƒ³ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ | Microsoft Docs](https://docs.microsoft.com/ja-jp/windows-hardware/manufacture/desktop/bcdedit-command-line-options)\n\n \u003e \n \u003e BCDEdit ã¯ã€ãƒ–ãƒ¼ãƒˆæ§‹æˆãƒ‡ãƒ¼ã‚¿ (BCD) ã‚’ç®¡ç†ã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ ãƒ©ã‚¤ãƒ³ ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚\n \u003e BCD ãƒ•ã‚¡ã‚¤ãƒ«ã¯ã€ãƒ–ãƒ¼ãƒˆ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚„ãƒ–ãƒ¼ãƒˆ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®è¨­å®šã‚’è¨˜è¿°ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã‚‹ã‚¹ãƒˆã‚¢ã‚’æä¾›ã—ã¾ã™ã€‚\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Windows"]},"/note/build.gradle.kts%E3%81%A7fatJar%E3%82%92%E4%BD%9C%E3%82%8B":{"title":"build.gradle.ktsã§fatJarã‚’ä½œã‚‹","content":"\nhttps://stackoverflow.com/questions/41794914/how-to-create-the-fat-jar-with-gradle-kotlin-script\n\n````kts\nval projectName = \"my-projet\"\n\napplication {\n    // mainã‚’è¨­å®š(ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¾ŒKtãŒã¤ãã“ã¨ã«æ³¨æ„)\n    mainClass.set(\"com.MainKt\")\n}\n\n// `fatJar` ã®åå‰ã§ã‚¿ã‚¹ã‚¯ã‚’å®šç¾©ã™ã‚‹\ntask(\"fatJar\", Jar::class) {\n    archiveBaseName.set(projectName)\n    manifest {\n        attributes[\"Main-Class\"] = mainClass\n    }\n    duplicatesStrategy = DuplicatesStrategy.EXCLUDE\n\n    from(\n        // classpathã‹ã‚‰jarãƒ•ã‚¡ã‚¤ãƒ«ã‚’å–å¾—ã—ã¦ã€zipã«åŠ ãˆã‚‹\n        configurations.runtimeClasspath.get().map {\n            if (it.isDirectory) it else zipTree(it)\n        }\n    )\n    exclude(\"META-INF/*.RSA\", \"META-INF/*.SF\", \"META-INF/*.DSA\")\n\n}\n\n````\n\ngradle installDist ã—ãŸã¨ãã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã¨å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«åã®è¨­å®š\n\n````shell\nmy-project$ ./gradlew installDist\n\n# ã™ã‚‹ã¨ä»¥ä¸‹ã®ãƒ„ãƒªãƒ¼ãŒã§ãã‚‹\n# my-project/build/install/my-project/lib\n# my-project/build/install/my-project/lib/...\n# my-project/build/install/my-project/bin\n# my-project/build/install/my-project/bin/my-project (executable)\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":[]},"/note/buildgradle%E3%81%AEjacoco%E3%81%A7coverage%E3%82%92%E6%A8%99%E6%BA%96%E5%87%BA%E5%8A%9B":{"title":"buildgradleã®jacocoã§coverageã‚’æ¨™æº–å‡ºåŠ›","content":"\n# jacoco_coverageã‚’æ¨™æº–å‡ºåŠ›\n\n````kotlin\ntasks.withType\u003cJacocoReport\u003e {\n    dependsOn(tasks.test)\n\n    reports {\n        xml.isEnabled = true\n        html.isEnabled = true\n    }\n\n    doLast {\n        val report = File(\"${jacoco.reportsDir}/test/jacocoTestReport.xml\")\n        printCoverage(report)\n    }\n}\n\n/**\n * JaCoCo ã®ãƒ†ã‚¹ãƒˆãƒ¬ãƒãƒ¼ãƒˆ(xml)ã‚’parseã—ã¦ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚’æ¨™æº–å‡ºåŠ›ã™ã‚‹\n */\nfun printCoverage(xml: File) {\n    if (!xml.exists()) return\n\n    val documentBuilder = javax.xml.parsers.DocumentBuilderFactory.newInstance()\n        .apply {\n            // DTDãŒè¦‹ã¤ã‹ã‚‰ãªã„ã‚¨ãƒ©ãƒ¼ãŒå‡ºã‚‹ãŸã‚æŠ‘åˆ¶\n            isValidating = false\n            isNamespaceAware = true\n            setFeature(\"http://xml.org/sax/features/namespaces\", false)\n            setFeature(\"http://xml.org/sax/features/validation\", false)\n            setFeature(\"http://apache.org/xml/features/nonvalidating/load-dtd-grammar\", false)\n            setFeature(\"http://apache.org/xml/features/nonvalidating/load-external-dtd\", false)\n        }\n        .newDocumentBuilder()\n    val document = documentBuilder.parse(xml)\n\n    val xPath = javax.xml.xpath.XPathFactory.newInstance().newXPath()\n\n    val counters =\n        xPath.evaluate(\"/report/counter\", document, javax.xml.xpath.XPathConstants.NODESET) as org.w3c.dom.NodeList\n\n    val metrics = mutableMapOf\u003cString, Double\u003e()\n    for (i in 0 until counters.length) {\n        val counter = counters.item(i)\n        val typeName = counter.attributes.getNamedItem(\"type\").nodeValue\n        val missed = counter.attributes.getNamedItem(\"missed\").nodeValue.toDouble()\n        val covered = counter.attributes.getNamedItem(\"covered\").nodeValue.toDouble()\n        val coverage = ((covered / (covered + missed)) * 10000).roundToInt().toDouble() / 100.toDouble()\n\n        metrics[typeName] = coverage\n    }\n\n    logger.quiet(\"----- Code Coverage ----------\")\n    metrics.entries.forEach { entry -\u003e\n        val key = entry.key\n        val value = entry.value\n        logger.quiet(String.format(\" - %-12s: %6.2f%%\", key, value))\n    }\n    logger.quiet(\"------------------------------\")\n}\n````\n\n````sh\n$ ./gradlew jacocoTestReport\n\n\u003e Task :jacocoTestReport\n----- Code Coverage ----------\n - INSTRUCTION :  99.99%\n - BRANCH      :  99.99%\n - LINE        :  99.99%\n - COMPLEXITY  :  99.99%\n - METHOD      :  99.99%\n - CLASS       :  99.99%\n------------------------------\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["unittest","gradle"]},"/note/c++%E7%92%B0%E5%A2%83%E6%A7%8B%E7%AF%89":{"title":"c++ç’°å¢ƒæ§‹ç¯‰","content":"\n# c++ç’°å¢ƒæ§‹ç¯‰\n\n## gccã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n\u003chttps://qiita.com/EngTks/items/ffa2a7b4d264e7a052c6\u003e\n\n### åˆæœŸçŠ¶æ…‹\n\n````shell\ng++ --version\n````\n\nClangãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§å…¥ã£ã¦ã„ã‚‹\ngccã«ã®ã¿ã€stdc++.hã¨ã„ã†C++ã®æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®é›†åˆä½“ãŒå…¥ã£ã¦ã„ã‚‹ã®ã§æœ‰åˆ©\n\n### install\n\n````shell\nbrew install gcc\n````\n\n### pathã®è¨­å®š\n\n````shell\n$ cd /usr/local/bin\n$ ls -al | grep g++\n$ ln -s g++-10 g++\n$ g++ --version\ng++ (Homebrew GCC 10.2.0_3) 10.2.0\nCopyright (C) 2020 Free Software Foundation, Inc.\nThis is free software; see the source for copying conditions.  There is NO\nwarranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.\n````\n\n### stdc++.hã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹\n\n````shell\n$ cp /usr/local/Cellar/gcc/10.2.0_3/include/c++/10.2.0/x86_64-apple-darwin20/bits/stdc++.h /usr/local/Cellar/gcc/10.2.0_3/include/c++/10.2.0/bits/\n````\n\n### ã‚¨ãƒ©ãƒ¼\n\n````shell\n$ gcc hello.cpp\nclang: error: invalid version number in '-mmacosx-version-min=11.1'\n````\n\n\u003chttps://stackoverflow.com/questions/63972113/big-sur-clang-invalid-version-error-due-to-macosx-deployment-target\u003e\n\nBig Surã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸå½±éŸ¿ã£ã½ã„\n\n````shell\nsudo xcode-select --switch /Library/Developer/CommandLineTools\n````\n\n## vim + LSP\n\n\u003chttps://endaaman.me/tips/nvim-coc-ccls\u003e\n\n### LSP\n\nclangd, cquery, ccls ãŒæœ‰åã‚‰ã—ã„\nclangdã¯é‡ã„ã‚‰ã—ã„\ncqueryã¯é–‹ç™ºãŒã‚¹ãƒˆãƒƒãƒ—ã—ã¦ã„ã‚‹\ncclsã‚’å…¥ã‚Œã‚‹\n\n[ccls](https://github.com/MaskRay/ccls/wiki)\n\n````shell\nbrew install ccls\n````\n\n### cclsã®è¨­å®š\n\ncclsã®LSPã‚µãƒ¼ãƒãƒ¼ã«å¯¾ã—ã¦ã€ã‚·ãƒ³ãƒœãƒ«ã®å®šç¾©ã‚„ãã®å®šç¾©ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ãªã©ã‚’æ•™ãˆã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚ `compile_commands.json` ã‚’ä½¿ã†ã€‚\n\u003chttps://github.com/rizsotto/Bear\u003e ã§ç°¡å˜ã«ç”Ÿæˆã§ãã‚‹\n\n````shell\nbrew install bear\n````\n\n=\u003e Makefileä½œã£ã¦ãªã„ã‹ã‚‰ï¼Ÿä½¿ã„æ–¹ãŒã‚ˆãã‚ã‹ã‚‰ãªã‹ã£ãŸ\n\n#### shell script wrapper\n\n\u003chttps://github.com/MaskRay/ccls/wiki/Build#macos\u003e\n\n````shell\n$ touch /usr/local/bin/ccls\n$ chmod +x /usr/local/bin/ccls\n$ vim /usr/local/bin/ccls\n````\n\n````shell\n#!/bin/sh\nexec /usr/local/Cellar/ccls/0.20201219/bin/ccls -init='{\"clang\":{\"extraArgs\":[\"-isystem\", \"/usr/local/Cellar/gcc/10.2.0_3/include/c++/10.2.0\"]}}' \"$@\"\n````\n\n### vim-lsp\n\n\u003chttps://github.com/prabirshrestha/vim-lsp/wiki/Servers-ccls\u003e\n\n````shell\nif executable('ccls')\n   au User lsp_setup call lsp#register_server({\n      \\ 'name': 'ccls',\n      \\ 'cmd': {server_info-\u003e['ccls']},\n      \\ 'root_uri': {server_info-\u003elsp#utils#path_to_uri(lsp#utils#find_nearest_parent_file_directory(lsp#utils#get_buffer_path(), 'compile_commands.json'))},\n      \\ 'initialization_options': {},\n      \\ 'whitelist': ['c', 'cpp', 'objc', 'objcpp', 'cc'],\n      \\ })\nendif\n````\n\n### quickrun\n\n\u003chttps://kenbannikki.com/notes/quickrun-for-cpp/\u003e\n\n````shell\nlet g:quickrun_config.cpp = {\n    \\ 'command': 'g++',\n    \\ 'input': 'input',  \" inputã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¨™æº–å…¥åŠ›ã¨ã—ã¦ä¸ãˆã‚‹\n    \\ 'runner': 'system'  \" éåŒæœŸå®Ÿè¡Œã‚’è¡Œã‚ãªã„\n    \\ }\n````\n\nã“ã®çŠ¶æ…‹ã§:QuickRunã‹\u003cleader\u003e+ rã™ã‚Œã°ã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚Œã€inputã¨ã„ã†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¨™æº–å…¥åŠ›ã¨ã—ã¦ä¸ãˆã‚‰ã‚ŒãŸçŠ¶æ…‹ã§ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚\n\nã‚³ãƒãƒ³ãƒ‰ã‚’æ‰“ã¡è¾¼ã‚€å ´åˆã¯ã€:QuickRun -input inputã¾ãŸã¯:QuickRun \\\u003cinputã¨ã™ã‚Œã°åŒã˜ã“ã¨ãŒã§ãã¾ã™ã€‚\n\nã¾ãŸã€:QuickRun -input =5ã¾ãŸã¯:QuickRun \\\u003c=5ã§æ•°å€¤ã‚„æ–‡å­—åˆ—ã‚’ç›´æ¥æ¸¡ã™ã“ã¨ãŒã§ãã¾ã™ã€‚\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["ç«¶ãƒ—ãƒ­","c++"]},"/note/cargo":{"title":"cargo","content":"\n\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Rust"]},"/note/chrome%E3%81%AE%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E9%81%B8%E6%8A%9E%E3%83%80%E3%82%A4%E3%82%A2%E3%83%AD%E3%82%B0%E3%81%A7%E9%9A%A0%E3%81%97%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E8%A1%A8%E7%A4%BA":{"title":"chromeã®ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã§éš ã—ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¡¨ç¤º","content":"\nhttps://apple.stackexchange.com/questions/186376/hotkey-to-show-hidden-files-and-folders-in-file-open-dialog/186388\n\n`cmd + shift + .` ã§ãƒˆã‚°ãƒ«ã§ãã‚‹\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":[]},"/note/chrome-%E3%82%A2%E3%83%89%E3%83%AC%E3%82%B9%E3%83%90%E3%83%BC%E3%81%8B%E3%82%89%E3%83%95%E3%82%A9%E3%83%BC%E3%82%AB%E3%82%B9%E3%82%92%E5%A4%96%E3%81%99":{"title":"chrome ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼ã‹ã‚‰ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’å¤–ã™","content":"\n\u003chttps://github.com/philc/vimium/issues/840#issuecomment-17948885\u003e\n\nGoogle Chromeã®Search Engineã§ç©ºã®JavaScriptã‚’å®Ÿè¡Œã™ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’è¨­å®šã—ã¦ãŠã\n\n* Google Chromeã®è¨­å®šãƒšãƒ¼ã‚¸â†’`Manage Search Engine`ï¼ˆ`chrome://settings/searchEngines`ï¼‰ã¸è¡Œã\n* `Other Search Engine`ã‹ã‚‰`Add`ã§æ–°è¦ä½œæˆã€ä»»æ„ã®ã‚¿ã‚¤ãƒˆãƒ«ã¨ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã¨ãªã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ï¼ˆ`unfocus`ã®é ­æ–‡å­—ã§ã“ã“ã§ã¯`u`ï¼‰ã¨URLã®ä»£ã‚ã‚Šã®`javascript::`ã‚’å…¥åŠ›ãƒ»ä¿å­˜\n\nã“ã‚Œã§ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãŒå½“ãŸã£ã¦ã„ã‚‹çŠ¶æ…‹ã§`u`â†’`Enter`ã‚’æŠ¼ä¸‹ã™ã‚‹ã¨`javascript::`ã¨ã„ã†ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒå®Ÿè¡Œã•ã‚Œã‚‹\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":[]},"/note/clasp":{"title":"clasp","content":"\nhttps://github.com/google/clasp\n\nGoogleãŒæä¾›ã™ã‚‹ [GAS](note/GAS.md) ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§é–‹ç™ºã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«ã€‚\n\nclaspã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€Google Apps Scriptã‚’ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã§é–‹ç™ºã—ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆGitãªã©ï¼‰ã‚’ä½¿ç”¨ã—ã¦ã‚³ãƒ¼ãƒ‰ã‚’ç®¡ç†ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ã¾ãŸã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã‹ã‚‰Google Apps Scriptã‚’æ“ä½œã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã€‚\n\n[TypeScript](note/TypeScript.md) ã§æ›¸ãã“ã¨ã‚‚ã§ãã¦ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§è£œå®Œã‚’åŠ¹ã‹ã›ãªãŒã‚‰é–‹ç™ºã§ãã‚‹ã®ã§åŠ¹ç‡ãŒã‚ˆãä¿å®ˆæ€§ã‚‚é«˜ã„ã€‚\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["2023/05/04","GAS"]},"/note/css-%E5%90%B9%E3%81%8D%E5%87%BA%E3%81%97%E3%82%92%E3%81%A4%E3%81%8F%E3%82%8B":{"title":"css å¹ãå‡ºã—ã‚’ã¤ãã‚‹","content":"\n# CSSã§å¹ãå‡ºã—ã‚’ä½œã‚‹\n\n\u003chttps://lpeg.info/html/css_bubble.html\u003e\n\nVueã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ+TailwindCSSã§ã®æ›¸ãæ–¹\n\nã—ãŸã‚€ãã®æ ç·šã¤ãå¹ãå‡ºã—\n\n````vue\n\u003ctemplate\u003e\n  \u003cdiv\n    class=\"speech-balloon relative inline-block rounded-3xl border border-gray-2 py-xxs px-m bg-white text-black text-center text-base\"\n    @click=\"$emit('click')\"\n  \u003e\n    {{ text }}\n  \u003c/div\u003e\n\u003c/template\u003e\n\n\u003cscript lang=\"ts\"\u003e\nimport { Vue, Component, Prop } from 'vue-property-decorator'\n\n/**\n * å¹ãå‡ºã—\n */\n@Component\nexport default class SpeechBalloon extends Vue {\n  @Prop({ required: true, type: String })\n  readonly text!: string\n}\n\u003c/script\u003e\n\n\u003cstyle scoped\u003e\n.speech-balloon:before {\n  @apply absolute;\n  @apply z-20;\n\n  content: '';\n  top: 100%;\n  left: 50%;\n  margin-left: calc(0px - theme('spacing.s'));\n  border: theme('spacing.s') solid transparent;\n  border-top: theme('spacing.s') solid theme('colors.white');\n}\n\n/* ä¸‹ã«è¼‰ã›ã‚‹ä¸‰è§’ã‚¢ã‚¤ã‚³ãƒ³ */\n.speech-balloon:after {\n  @apply absolute;\n  @apply z-10;\n\n  content: '';\n  top: 100%;\n  left: 50%;\n  margin-left: calc(0px - theme('spacing.s') - 2px);\n  border: calc(theme('spacing.s') + 2px) solid transparent;\n  border-top: calc(theme('spacing.s') + 1px) solid theme('colors.gray.2');\n}\n\u003c/style\u003e\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["css"]},"/note/date%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%81%A7unixtimestamp%E3%82%92%E5%A4%89%E6%8F%9B":{"title":"dateã‚³ãƒãƒ³ãƒ‰ã§unixtimestampã‚’å¤‰æ›","content":"\n\\#shell\n\n## ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã‹ã‚‰å¤‰æ›\n\n````shell\n$ date --iso-8601=\"seconds\" -d @1632689459\n2021-09-27T05:50:59+09:00\n````\n\n## ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã«å¤‰æ›\n\n````shell\n$ date +%s --date=\"2021-09-27T05:50:59+09:00\"\n1632689459\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["shell"]},"/note/dnsmasq%E3%82%92%E3%82%B3%E3%83%B3%E3%83%86%E3%83%8A%E5%86%85%E3%81%AB%E7%AB%8B%E3%81%A6%E3%81%A6DNS%E5%95%8F%E3%81%84%E5%90%88%E3%82%8F%E3%81%9B%E3%82%92%E3%82%AD%E3%83%A3%E3%83%83%E3%82%B7%E3%83%A5%E3%81%99%E3%82%8B":{"title":"dnsmasqã‚’ã‚³ãƒ³ãƒ†ãƒŠå†…ã«ç«‹ã¦ã¦DNSå•ã„åˆã‚ã›ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã™ã‚‹","content":"\n[dnsmasq](https://wiki.archlinux.jp/index.php/Dnsmasq) ã¯å°è¦æ¨¡ãªãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å‘ã‘ã®DNSã€DHCPã‚µãƒ¼ãƒãƒ¼ã€‚\nDNSã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãã‚‰ã„ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚ã‚‹ã‚‚ã®ã ã¨æ€ã£ã¦ã„ãŸã‘ã©Linuxã¯ãã†ã§ã¯ãªã„ã‚ˆã†ãªã®ã§ã€ã“ã†ã„ã†ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã‚’å…¥ã‚Œã¦ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã›ã‚‹\n\nyum ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã€è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ›¸ãæ›ãˆã‚‹\n\ndnsmasqã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ã€ `/etc/dnsmasq.conf` ã¨ã„ã†è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒç”Ÿæˆã•ã‚Œã‚‹ã®ã§ã€ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚’å¤–ã™\nã¨ã‚Šã‚ãˆãšä»¥ä¸‹ã‚’è¨­å®šã™ã‚‹\n\n````\ndomain-needed #ãƒ‰ãƒ¡ã‚¤ãƒ³ã®ç„¡ã„ãƒ›ã‚¹ãƒˆåã®ã¿å•ã„åˆã‚ã›ã®å ´åˆã€ä¸Šä½DNSã‚µãƒ¼ãƒã«è»¢é€ã—ãªã„\nbogus-priv #ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆIPã‚¢ãƒ‰ãƒ¬ã‚¹ã®é€†å¼•ãã‚’ä¸Šä½DNSã‚µãƒ¼ãƒã«è»¢é€ã—ãªã„\nresolv-file #ä¸Šä½DNSã‚µãƒ¼ãƒã®è¨­å®š\n````\n\n````Dockerfile\nFROM amazonlinux:2\n\nRUN yum install -y dnsmasq systemd\n\nRUN echo 'nameserver 8.8.8.8' \u003e /etc/dnsmasq_resolv.conf \\\n  \u0026\u0026 sed -i -e 's/#domain-needed/domain-needed/' -e 's/#bogus-priv/bogus-priv/' -e 's@#resolv-file=@resolv-file=/etc/dnsmasq_resolv.conf@' /etc/dnsmasq.conf \\\n  \u0026\u0026 systemctl enable dnsmasq\n\nENTRYPOINT [\"/sbin/init\"]\n````\n\nå®Ÿè¡Œæ™‚ã¯ `--privileged` ã¨ã€ `--dns=127.0.0.1` ã§ `/etc/resolv.conf`Â ã«Â `nameserver 127.0.0.1`Â ãŒæ›¸ã‹ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹\n\n````shell\n$ docker build -t dnsmasq-test .\n$ docker run --privileged -it --dns=127.0.0.1 --name=dnsmasq dnsmasq-test\n````\n\n````shell\n# digã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n$ yum install -y bind-utils\n$ dig https://httpbin.org\n\n; \u003c\u003c\u003e\u003e DiG 9.11.4-P2-RedHat-9.11.4-26.P2.amzn2.5.2 \u003c\u003c\u003e\u003e https://httpbin.org\n;; global options: +cmd\n;; Got answer:\n;; -\u003e\u003eHEADER\u003c\u003c- opcode: QUERY, status: NXDOMAIN, id: 59931\n;; flags: qr rd ra; QUERY: 1, ANSWER: 0, AUTHORITY: 1, ADDITIONAL: 1\n\n;; OPT PSEUDOSECTION:\n; EDNS: version: 0, flags:; udp: 512\n;; QUESTION SECTION:\n;https://httpbin.org.           IN      A\n\n;; AUTHORITY SECTION:\norg.                    1800    IN      SOA     a0.org.afilias-nst.info. hostmaster.donuts.email. 1670768991 7200 900 1209600 3600\n\n;; Query time: 18 msec\n;; SERVER: 127.0.0.1#53(127.0.0.1)\n;; WHEN: Sun Dec 11 14:39:32 UTC 2022\n;; MSG SIZE  rcvd: 130\n\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Docker","Network"]},"/note/etcd":{"title":"etcd","content":"\n{{\u003c card-link \"https://etcd.io\" \u003e}}\n\nåˆ†æ•£å‹ã®ã‚­ãƒ¼ãƒãƒªãƒ¥ãƒ¼ã‚¹ãƒˆã‚¢\nGoè¨€èªè£½\nè¤‡æ•°å°ã§å®Ÿè¡Œã—ã¦ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼ã‚’æ§‹ç¯‰ã™ã‚‹ã“ã¨ã§è² è·åˆ†æ•£ã‚’è¡Œã†\n\n[etcdctl](note/etcdctl.md) ã§æ“ä½œã§ãã‚‹ã€‚\n\n## etcdã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å–ã‚‹\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["2023/07/19"]},"/note/etcdctl":{"title":"etcdctl","content":"\n[etcd](note/etcd.md)ã®ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ\n\netcdã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã¨ä½¿ãˆã‚‹ã‚ˆã†ã«ãªã‚‹ãŒã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã ã‘ã»ã—ã„å ´åˆã‚‚ã‚ã‚‹ã€‚\n[Go](note/Go.md)ãªã®ã§ `go install github.com/etcd-io/etcd/etcdctl@latest` ã§å…¥ã‚‹ã‹ã¨æ€ã£ãŸãŒã“ã‚Œã§ã¯ã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã—ã¾ã£ãŸã®ã§ã€ä¸€æ—¦git cloneã—ã¦ã‹ã‚‰å…¥ã‚ŒãŸã€‚\n\n````shell\ngit clone https://github.com/etcd-io/etcd.git\ncd etcd/etcdctl\ngo install\n\netcdctl version\n````\n\n````shell\netcdctl --endpoints= version\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["2023/07/19"]},"/note/fish%E3%81%A8fzf%E3%82%92%E7%B5%84%E3%81%BF%E5%90%88%E3%82%8F%E3%81%9B%E3%82%8B":{"title":"fishã¨fzfã‚’çµ„ã¿åˆã‚ã›ã‚‹","content":"\n\u003chttps://github.com/jethrokuan/fzf\u003e ã‚’ä½¿ã£ã¦ã„ãŸ\n\n## å•é¡Œ\n\nãƒ•ã‚¡ã‚¤ãƒ«åã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã«ã‚¹ãƒšãƒ¼ã‚¹ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã¨ã€tabè£œå®Œã—ãŸã¨ãã«æ­£ã—ãå±•é–‹ã•ã‚Œãªã„\n\n## è§£æ±ºç­–\n\n\u003chttps://github.com/PatrickF1/fzf.fish\u003e ã‚’ä½¿ã†ã‚ˆã†ã«ã—ãŸ\n\næ¨™æº–ã® `CTRL-T` ã‚’ä½¿ã†ã ã‘ã§ã‚‚ã„ã„æ°—ãŒã™ã‚‹\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["fish","shell"]},"/note/fish%E3%81%AEhistory%E3%82%92zsh%E3%81%AB%E5%A4%89%E6%8F%9B":{"title":"fishã®historyã‚’zshã«å¤‰æ›","content":"\n\\#fish #zsh\n\n\u003chttps://github.com/jverhoelen/fish-history-to-zsh\u003e\n\n````sh\ngit clone git@github.com:jverhoelen/fish-history-to-zsh.git\ncd fish-history-to-zsh\nnode index.js\n````\n\n## fishã®historyãƒ•ã‚¡ã‚¤ãƒ«\n\n~/.local/share/fish/fish_history\nyamlã§ä¿å­˜ã•ã‚Œã¦ã„ã‚‹ã®ã§ã€yamlã‚’ãƒ­ãƒ¼ãƒ‰ã—ã¦å¤‰æ›ã—ã¦ã„ã‚‹\n\nparseã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸã®ã§ã€fish_historyãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰è©²å½“ã®è¡Œã‚’æ¶ˆã—ãŸã€‚\næ•°ãŒå°‘ãªã‹ã£ãŸã®ã§ã“ã‚Œã§å•é¡Œãªã‹ã£ãŸ\n\n## zshã®historyãƒ•ã‚¡ã‚¤ãƒ«\n\n~/.zsh_history\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["fish","zsh"]},"/note/fish%E3%83%97%E3%83%A9%E3%82%B0%E3%82%A4%E3%83%B3":{"title":"fishãƒ—ãƒ©ã‚°ã‚¤ãƒ³","content":"\n# fish\n\nfish\n\n* fisher ã§ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ç®¡ç†\n* fzf ç”¨ã®è¨­å®š\n\nrafaelrinaldi/pure\njethrokuan/z\n0rax/fish-bd\noh-my-fish/theme-bobthefish\njethrokuan/fzf\ndecors/fish-ghq\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["fish","terminal"]},"/note/font-%E3%83%97%E3%83%AD%E3%82%B0%E3%83%A9%E3%83%9F%E3%83%B3%E3%82%B0%E7%94%A8%E3%83%95%E3%82%A9%E3%83%B3%E3%83%88%E3%81%AB%E3%81%93%E3%81%A0%E3%82%8F%E3%82%8B":{"title":"font ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ç”¨ãƒ•ã‚©ãƒ³ãƒˆã«ã“ã ã‚ã‚‹","content":"\n## çµ¶å¯¾æ¡ä»¶\n\n* monospace\n* 0ã¨Oã€1ã¨lã¨Iãªã©ãŒè¦‹åˆ†ã‘ã‚„ã™ã„\n* ãƒãƒ«ãƒãƒã‚¤ãƒˆæ–‡å­—ãŒããšã‚Œãªã„\n\n## ãŠã™ã™ã‚ãƒ•ã‚©ãƒ³ãƒˆ\n\n* Cica\n* HackGen\n\n## å„ã‚½ãƒ•ãƒˆã«è¨­å®šã™ã‚‹\n\n### Chrome\n\nä¸€æ‹¬ã§è¨­å®šã™ã‚‹æ–¹æ³•ã‚‚ã‚ã‚‹ãŒã€ã‚µã‚¤ãƒˆã«ã‚ˆã£ã¦ã¯è¦‹ã¥ã‚‰ã‹ã£ãŸã‚Šã€Webé–‹ç™ºè€…ã ã¨ãƒ•ã‚©ãƒ³ãƒˆãŒå¤‰ã‚ã£ã¦ã—ã¾ã†ã®ã¯å¬‰ã—ããªã„ã®ã§ã€ãŠã™ã™ã‚ã¯Stylebotã§ã‚µã‚¤ãƒˆã”ã¨ã«è¨­å®š\n\nbitbucket\n\n````css\nbody * {\n    font-family: Cica;\n}\n\n/* ãƒšãƒ¼ã‚¸å…¨ä½“ã§ã¯ãªãã‚³ãƒ¼ãƒ‰éƒ¨åˆ†ã ã‘ã«é©ç”¨ã—ãŸã„å ´åˆ\n.code-diff {\n    font-family: Cica;\n    font-size: 14px;\n}\n.bitkit-diff-wrapper-diff .inline-content-wrapper {\n    font-family: Cica;\n    font-size: 14px;\n}\n*/\n````\n\n### Intellij IDEA\n\n### Visual Studio Code\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["font"]},"/note/font-Web%E3%83%95%E3%82%A9%E3%83%B3%E3%83%88%E3%82%92%E5%88%A9%E7%94%A8%E3%81%99%E3%82%8B":{"title":"font Webãƒ•ã‚©ãƒ³ãƒˆã‚’åˆ©ç”¨ã™ã‚‹","content":"\n\u003chttps://lpeg.info/webworks/google_fonts.html\u003e\n\n## ãƒ•ã‚©ãƒ³ãƒˆã‚’åˆ©ç”¨ã™ã‚‹\n\n[Noto Sans JP](note/Noto%20Sans%20JP.md) ã‚’ä½¿ã„ãŸã„ã€‚\n\nNoto Sansç³»ã®é•ã„ã¯\n\n* [ã€WEBãƒ•ã‚©ãƒ³ãƒˆã€‘Noto Sansç³»æ—¥æœ¬èªãƒ•ã‚©ãƒ³ãƒˆã¯çµå±€ã©ã‚Œã‚’ä½¿ãˆã°ã„ã„ã®ã‹æ¤œè¨¼ã—ã¦ã¿ã‚‹ | oku-log](https://oku-log.com/blog/noto-sans/)\n* [ã¨ã‚Šã‚ãˆãšNoto Sansã€‚ã¯ã€ã‚„ã‚ã¾ã›ã‚“ã‹ï¼Ÿã¨ã„ã†è©±ï½œãƒˆãƒ¢ãƒï½œWeb Designerï½œnote](https://note.com/minamotono/n/n765d41581136)\n\nfonts.google.comã§fontã‚’é¸æŠ\n\n\u003chttps://fonts.google.com/specimen/Noto+Sans+JP\u003e\n\nä½¿ç”¨ã™ã‚‹å¤ªã•ã® `Select this style` ã‚’ã‚¯ãƒªãƒƒã‚¯\n\n`Use on the web` ã§ä½¿ã„ã‹ãŸã‚’é¸æŠã—ã¦ã€ã‚³ãƒ”ãƒ¼\n\n````html\n\u003clink rel=\"preconnect\" href=\"https://fonts.gstatic.com\"\u003e  \n\u003clink href=\"https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100\u0026display=swap\" rel=\"stylesheet\"\u003e\n````\n\nãƒ•ã‚©ãƒ³ãƒˆã‚’æŒ‡å®š\n\n````css\nfont-family: 'Noto Sans JP', sans-serif;\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["font"]},"/note/fzf":{"title":"fzf","content":"\n[fzf](https://github.com/junegunn/fzf) ã¯ã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«ã«ã‚ã„ã¾ã„æ¤œç´¢ãŒã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã€‚\næ¨™æº–å‡ºåŠ›ã‚’ãƒ‘ã‚¤ãƒ—ã§æ¸¡ã—ã¦ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ã—ãŸã‚Šã€ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å†å¸°çš„ã«è¡¨ç¤ºã—ãŸã‚Šã¨ã„ã£ãŸã“ã¨ãŒã§ãã‚‹ã€‚\n\n[Homebrew](note/Homebrew.md) ã‚„gitã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã€‚\n\n````shell\ngit clone --depth 1 https://github.com/junegunn/fzf.git ~/.fzf\n~/.fzf/install\n````\n\ninstallã™ã‚‹ã¨ `~/.fzf.zsh` ãŒã§ãã‚‹ã®ã§ã€shellã®èµ·å‹•æ™‚ã«èª­ã¿è¾¼ã‚€ã€‚\n\n````shell\n[ -f ~/.fzf.zsh ] \u0026\u0026 source ~/.fzf.zsh\nexport FZF_DEFAULT_COMMAND='fd --type file --hidden --follow --exclude .git'\nexport FZF_CTRL_T_COMMAND='fd --type file --hidden --follow --exclude .git'\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["2023/05/06","CLI","terminal"]},"/note/fzf.vim%E3%81%AE%E4%BD%BF%E3%81%84%E6%96%B9":{"title":"fzf.vimã®ä½¿ã„æ–¹","content":"\n## fzf\n\nhttps://github.com/jethrokuan/fzf#usage\n\n* `FZF_DEFAULT_COMMAND` ã§fzfå®Ÿè¡Œæ™‚ã«ä½¿ç”¨ã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’æŒ‡å®š\n* ripgrep ãŒé«˜é€Ÿãªã®ã§ã“ã‚“ãªé¢¨ã«ã™ã‚‹ã¨ã„ã„ `FZF_DEFAULT_COMMAND=rg --hidden -g \"!.git/*\" -l \"\"`\n* `FZF_CTRL_T_COMMAND='rg --files --hidden --follow --glob \"!.git/*\"'` ã§ã€`ctrl-t` ã‚’æŠ¼ã™ã¨fzfãŒå®Ÿè¡Œã•ã‚Œã‚‹\n* `FZF_CTRL_T_OPTS='--preview \"bat --color=always --style=header,grid --line-range :100 {}\"'` ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚ªãƒ—ã‚·ãƒ§ãƒ³\n\n## fzf.vim\n\n* Rgã®çµæœã‚’quickfixã«é€ã‚‹\n  * https://github.com/junegunn/fzf.vim/issues/586\n  * `shift` ã‚„ `alt-a` `alt-d` ã§å…¨é¸æŠãƒ»è§£é™¤ã—ã¦Enter\n  * QuickFix ã®æ“ä½œã¯ `:cp` ã‚„ `:cn`ã€ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‹ãã®ã¯ `:cwindow` `:cclose`\n* Filesã®çµæœã¯ `shift` ã§ã—ã‹é¸æŠã§ããªã„\n\n````\n[[plugins]]\nrepo = 'junegunn/fzf.vim'\ndepends = ['fzf']\non_cmd = [\n  'Files',\n  'GFiles',\n  'GFiles?',\n  'Tags',\n  'Commands',\n  'Rg',\n  'History',\n  'Buffers',\n]\nhook_add = '''\n    command! -bang -nargs=* Rg\n        \\ call fzf#vim#grep(\n        \\   'rg --column --line-number --hidden --no-heading --color=always --smart-case -g \"!.git/*\" -- '.shellescape(\u003cq-args\u003e), 1,\n        \\   fzf#vim#with_preview(), \u003cbang\u003e0)\n\n    fun! FzfOmniFiles()\n        let is_git = system('git status')\n        if v:shell_error\n            :Files\n        else\n            :GFiles\n        endif\n    endfun\n\n    nnoremap \u003cC-j\u003e\u003cC-j\u003e :Commands\u003cCR\u003e\n    nnoremap \u003cC-j\u003e\u003cC-h\u003e :History\u003cCR\u003e\n    nnoremap \u003cC-j\u003e\u003cC-p\u003e :call FzfOmniFiles()\u003cCR\u003e\n    nnoremap \u003cC-j\u003e\u003cC-g\u003e :Rg\u003cSpace\u003e\n    nnoremap \u003cC-j\u003e\u003cC-b\u003e :Buffers\u003cCR\u003e\n    nnoremap \u003cC-j\u003e. :\u003cC-u\u003eFiles ~/.dotfiles\u003cCR\u003e\n'''\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["vim","shell"]},"/note/git%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88%E3%81%ABissue%E7%95%AA%E5%8F%B7%E3%82%92%E3%81%84%E3%82%8C%E3%82%8B":{"title":"gitã‚³ãƒŸãƒƒãƒˆã«issueç•ªå·ã‚’ã„ã‚Œã‚‹","content":"\n\\#git\n\n`.git/hooks/prepare-commit-msg`\n\n````shell\n#!/bin/bash -u\n\n# https://qiita.com/koara-local/items/eae7942131e53cb8031a\n\ncurrent_branch=$(git branch | grep \"^\\*\")\n\nif [[ ! \"$current_branch\" =~ .*/[A-Z]+-[0-9]+.* ]]; then\n    exit 0\nfi\n\n# e.g. feature/AAA-123-xxx-hogehoge -\u003e AAA-123\nissue_id=$(echo \"$current_branch\" | sed -E 's/^.*\\/([A-Z]+-[0-9]+).*$/\\1/')\n\n# Insert Issue ID at the beginning of the commit message if it doesn't exist\nif [[ ! $(head -n 1 $1 | grep \"$issue_id\") ]]; then\n  sed -i -e '1 s@\\(.*\\)@'\"${issue_id}\"' \\1@' $1\nfi\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["git"]},"/note/git%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%81%AE%E8%BB%BD%E9%87%8F%E5%8C%96%E3%81%AE%E3%81%9F%E3%82%81%E3%81%AB%E3%82%84%E3%81%A3%E3%81%9F%E3%81%93%E3%81%A8":{"title":"gitãƒªãƒã‚¸ãƒˆãƒªã®è»½é‡åŒ–ã®ãŸã‚ã«ã‚„ã£ãŸã“ã¨","content":"\n\\#git\n\nãƒªãƒã‚¸ãƒˆãƒªã®è»½é‡åŒ–ã‚’ã—ãŸã„ã€‚\nä»Šã‚ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¶ˆã™ã ã‘ã§ã¯ãƒªãƒã‚¸ãƒˆãƒªã‚µã‚¤ã‚ºã¯æ¸›ã‚‰ãªã„ã€‚\nè‡ªç”±ã«ã—ã¦ã„ã„ãƒªãƒã‚¸ãƒˆãƒªã§ã‚ã‚Œã°ã€gitã®å±¥æ­´ã‚’æ”¹å¤‰ã™ã‚‹ã€LFSåŒ–ã™ã‚‹ãªã©ã™ã‚‹ã€‚\n\n## git-lfs ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹\n\n1. [https://git-lfs.github.com/](https://git-lfs.github.com/ \"https://git-lfs.github.com/\")\n   1. macã®å ´åˆ\n\n````shell\n$ brew install git-lfs\n$ git lfs install \n$ git lfs version \ngit-lfs/2.12.1 (GitHub; darwin amd64; go 1.15.3)\n````\n\n## ãƒªãƒã‚¸ãƒˆãƒªè»½é‡åŒ–\n\néå»ã‚³ãƒŸãƒƒãƒˆã«æ®‹ã£ã¦ã„ã‚‹å·¨å¤§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã—ã¦è»½é‡åŒ–ã™ã‚‹ã€‚\ngit filter-branch ã‚’ä½¿ã†æ–¹æ³•ã¯ã€å±¥æ­´ãŒå¤šã„ã¨ã‹ãªã‚Šé…ã„ãŸã‚å®Ÿç”¨çš„ã˜ã‚ƒãªã‹ã£ãŸã€‚\n\n[BFG](https://rtyley.github.io/bfg-repo-cleaner/)ã‚’ä½¿ã†ã“ã¨ã«ã—ãŸã€‚\n\n* å¤§ãã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ (\u003chttps://support.atlassian.com/bitbucket-cloud/docs/maintain-a-git-repository/\u003e)\n* HEADã«å­˜åœ¨ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã¯æ¶ˆã•ã‚Œãªã„ã‚‰ã—ã„ã®ã§å®‰å¿ƒã—ã¦å®Ÿè¡Œã™ã‚‹ (\u003chttps://rtyley.github.io/bfg-repo-cleaner/#protected-commits:~:text=Your%20current%20files%20are%20sacred\u003e)\n\n1. \u003chttps://repo1.maven.org/maven2/com/madgag/bfg/1.14.0/bfg-1.14.0.jar\u003e ã‹ã‚‰jarå®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹\n1. bareãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³\n\n````shell\n$ git clone --mirror git://example.com/some-big-repo.git\n````\n\n3. BFGã§å·¨å¤§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤\n\n````shell\n$ java -jar bfg.jar --strip-blobs-bigger-than 100M some-big-repo.git\n````\n\n4. BFGã§ã‚³ãƒŸãƒƒãƒˆã¯ãã‚Œã„ã«ãªã£ãŸçŠ¶æ…‹ã ãŒã¾ã å®Ÿä½“ã¯æ®‹ã£ã¦ã„ã‚‹ã®ã§ã€ãã‚Œã„ã«ã™ã‚‹\n\n````shell\n$ cd some-big-repo.git\n$ git reflog expire --expire=now --all \u0026\u0026 git gc --prune=now --aggressive\n````\n\n5. äº‹å‰ã«ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ã¨ã£ã¦ã‹ã‚‰pushã™ã‚‹(`--mirror` ã§cloneã—ã¦ã„ã‚‹ãŸã‚ã€ãƒªãƒ¢ãƒ¼ãƒˆã®ãƒªãƒã‚¸ãƒˆãƒªã®ã™ã¹ã¦ã®refsãŒã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã•ã‚Œã‚‹ãŸã‚ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æ¨å¥¨)\n\n````shell\n$ git push\n````\n\n## LFSã®è¨­å®š\n\n[git lfs migrate ã§ Git-LFS ç§»è¡Œã—ãŸã¨ãã®ãƒ¡ãƒ¢](https://nanmo.hateblo.jp/entry/2019/08/31/120008)\n\nBFGã§ã‚‚LFSã«å¤‰æ›ã§ãã‚‹ã‚ˆã†ã  (\u003chttps://support.atlassian.com/bitbucket-cloud/docs/use-bfg-to-migrate-a-repo-to-git-lfs/\u003e)\nä»Šã¯BFGã‚ˆã‚Šgit-lfs-migrateã‚’ä½¿ã£ãŸã»ã†ãŒã„ã„ã‚ˆã†ãªã®ã§ãã†ã™ã‚‹\n\n````shell\n# lfsåŒ–ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’äº‹å‰èª¿æŸ»\n$ git lfs migrate info --everything\nmigrate: Sorting commits: ..., done.\nmigrate: Examining commits: 100% (4422/4422), done.\n*.png \t1.4 GB\t5711/5711 files(s)\t100%\n*.jpg \t672 MB\t4431/4431 files(s)\t100%\n\n# lfsåŒ–\n$ git lfs migrate import --include=\"*.png,*.jpg\" --everything\n\n# ç¾æ™‚ç‚¹ã§ã®ã‚µã‚¤ã‚º\n$ du -sh ./*\n4.0K\t./config\n4.0K\t./HEAD\n 24K\t./hooks\n4.0K\t./info\n1.8G\t./lfs\n2.0G\t./objects\n4.0K\t./packed-refs\n204K\t./refs\n\n# gc\n$ git reflog expire --expire=now --all \u0026\u0026 git gc --prune=now --aggressive\n$ du -sh ./*\n4.0K\t./config\n4.0K\t./HEAD\n 24K\t./hooks\n4.0K\t./info\n1.8G\t./lfs\n162M\t./objects\n4.0K\t./packed-refs\n  0B\t./refs\n\n# =\u003e lfsãŒã§ãã¦objectsã®ã‚µã‚¤ã‚ºãŒæ¸›ã£ã¦ã„ã‚‹\n````\n\n## ä½œæ¥­å…¨ä½“\n\n````shell\n# bareã§ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³\n$ git clone --mirror git@github.com/bigrepo.git\n\n# 10MBä»¥ä¸Šã®ã‚³ãƒŸãƒƒãƒˆã‚’å‰Šé™¤\n$ java -jar bfg-1.13.0.jar --strip-blobs-bigger-than 10M bigrepo.git/\n\nUsing repo : bigrepo.git\n\nScanning packfile for large blobs: 51747\nScanning packfile for large blobs completed in 469 ms.\n....\n\n\n# å®Ÿä½“ã‚’å‰Šé™¤\n$ cd bigrepo.git\n$ git reflog expire --expire=now --all \u0026\u0026 git gc --prune=now --aggressive\n\n# lfsåŒ–ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’äº‹å‰èª¿æŸ»\n$ git lfs migrate info --everything\nmigrate: Sorting commits: ..., done.\nmigrate: Examining commits: 100% (4422/4422), done.\n*.png \t1.4 GB\t5711/5711 files(s)\t100%\n*.jpg \t672 MB\t4431/4431 files(s)\t100%\n\n# lfsåŒ–\n$ git lfs migrate import --include=\"*.png,*.jpg\" --everything\n\n# ç¾æ™‚ç‚¹ã§ã®ã‚µã‚¤ã‚º\n$ du -sh ./*\n4.0K\t./config\n4.0K\t./HEAD\n 24K\t./hooks\n4.0K\t./info\n1.8G\t./lfs\n2.0G\t./objects\n4.0K\t./packed-refs\n204K\t./refs\n\n# gc\n$ git reflog expire --expire=now --all \u0026\u0026 git gc --prune=now --aggressive\n$ du -sh ./*\n4.0K\t./config\n4.0K\t./HEAD\n 24K\t./hooks\n4.0K\t./info\n1.8G\t./lfs\n162M\t./objects\n4.0K\t./packed-refs\n  0B\t./refs\n\n# =\u003e lfsãŒã§ãã¦objectsã®ã‚µã‚¤ã‚ºãŒæ¸›ã£ã¦ã„ã‚‹\n\n$ git push\n\n\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["git"]},"/note/git%E5%85%A8%E5%B1%A5%E6%AD%B4%E3%81%8B%E3%82%89grep%E3%81%99%E3%82%8B":{"title":"gitå…¨å±¥æ­´ã‹ã‚‰grepã™ã‚‹","content":"\n\\#git\n\n\u003chttps://suzuken.hatenablog.jp/entry/2018/12/05/155040\u003e\n\n## ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¸­èº«ã‚’æ¤œç´¢\n\n`git grep`\n\néå»ã®commitã«ã‚ã£ãŸã™ã¹ã¦ã®ã‚³ãƒ¼ãƒ‰ã‹ã‚‰æ­£è¦è¡¨ç¾ã§æ¤œç´¢ã™ã‚‹\n\n````shell\n$ git grep '\u003cregexp\u003e' $(git rev-list --all)\n````\n\npathã‚’æŒ‡å®šã™ã‚‹å ´åˆã¯ä»¥ä¸‹\n\n````shell\n$ git grep '\u003cregexp\u003e'  $(git rev-list --all -- path/to/dir) -- path/to/dir\n````\n\n* `-w`: wordãƒãƒƒãƒ\n* `-v`: ä¸€è‡´ã—ãªã„\n* `-I`: binaryã‚’ç„¡è¦–\n\n## å¤‰æ›´å†…å®¹ã‚’æ¤œç´¢\n\nã‚³ãƒŸãƒƒãƒˆã®å†…å®¹ã‚’ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰æ¤œç´¢ã§ãã‚‹\n\n### ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã‚³ãƒŸãƒƒãƒˆã®å†…å®¹ã®ä¸¡æ–¹ã‚’æ¤œç´¢\n\n````shell\n$ git log -S '\u003cword\u003e'\n````\n\n`-S` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§æ–‡å­—åˆ—ã‚’ãƒ«ãƒƒã‚¯ã‚¢ãƒƒãƒ—ã§ãã‚‹ã€‚ `-G` ã ã¨æ­£è¦è¡¨ç¾ãŒã¤ã‹ãˆã‚‹ã€‚\n\n### ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã¿æ¤œç´¢\n\n````shell\n$ git log --grep=\"\u003cword\u003e\"\n````\n\n* `-p | --patch`: å·®åˆ†å†…å®¹ã‚‚è¦‹ã‚Œã‚‹\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["git"]},"/note/git-shallow-clone%E3%81%A8sparse-checkout%E3%82%92%E6%B4%BB%E7%94%A8":{"title":"git shallow cloneã¨sparse checkoutã‚’æ´»ç”¨","content":"\n\\#git\n\n## Shallow clone\n\n`depth` ã‚’æŒ‡å®šã™ã‚‹ã¨ã€ãã®æ•°ã®ã‚³ãƒŸãƒƒãƒˆãƒ­ã‚°ã ã‘ã‚’å–å¾—ã™ã‚‹ã®ã§ã€ã‚³ãƒŸãƒƒãƒˆæ•°ã®å¤šã„ãƒªãƒã‚¸ãƒˆãƒªã§ãƒ‡ãƒ¼ã‚¿é‡ã‚’å‰Šæ¸›ã§ãã‚‹ã€‚\n\n````shell\n$ git clone --depth=1 git@github.com:git/git.git\n\n# -b \u003cbranch\u003e ã§ãƒ–ãƒ©ãƒ³ãƒæŒ‡å®š\n$ git clone --depth=1 -b main git@github.com:git/git.git\n````\n\ngit log ã§éå»ã®ãƒ­ã‚°ã‚’è¦‹ã‚‹ã“ã¨ã¯ã§ããªã„ã€‚CIãªã©ã§ãƒ“ãƒ«ãƒ‰ã™ã‚‹ã¨ãã«ã‚ˆãä½¿ã‚ã‚Œã‚‹\n\n## Sparse checkout\n\n[git-sparse-checkout](note/git-sparse-checkout.md)\n\nãƒªãƒã‚¸ãƒˆãƒªã®ä¸­ã§å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã‚’å±•é–‹ã™ã‚‹ã“ã¨ã§ã€ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨é‡ã‚’å‰Šæ¸›ã§ãã‚‹ã€‚\n\nshallow cloneã¨çµ„ã¿åˆã‚ã›ã¦ã€`depth=1` ã§å–å¾—ã—ãŸã‚ã¨ãƒ•ã‚¡ã‚¤ãƒ«ã®å±•é–‹ã‚’ã—ãªã„\n\n````shell\n# cloneå¾Œãƒ•ã‚¡ã‚¤ãƒ«ã‚’å±•é–‹ã—ãªã„\n$ git clone --depth=1 --no-checkout git@github.com:git/git.git\n\n$ cd git\n$ mkdir .git/info\n\n# checkoutã™ã‚‹pathä¸€è¦§ã‚’è¨­å®š\n$ echo \"Documentation\" \u003e .git/info/sparse-checkout\n# sparse checkoutã‚’è¡Œã†ã‚ˆã†è¨­å®š\n$ git config core.sparsecheckout true\n# checkoutã™ã‚‹\n$ git checkout -f master\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["git"]},"/note/git-sparse-checkout":{"title":"git-sparse-checkout","content":"\n\\#git\n\n\u003chttps://git-scm.com/docs/git-sparse-checkout\u003e\n\nãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ä¸€éƒ¨ã ã‘ã‚’å–å¾—ã™ã‚‹è¨­å®š\nå¿…è¦ãªã®ãŒå·¨å¤§ãªãƒªãƒã‚¸ãƒˆãƒªã®ã†ã¡ã®1ãƒ•ã‚¡ã‚¤ãƒ«ã ã‘ã®å ´åˆãªã©ã«ã€\nå…¨ä½“ã‚’checkoutã™ã‚‹ã¨å®¹é‡ã‚’é£Ÿã†ã®ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡å®šã—ã¦checkoutã™ã‚‹ã“ã¨ãŒã§ãã‚‹\n\n## sparse checkout ã‚’åˆ©ç”¨ã—ã¦ã¿ã‚‹\n\n1. ã¾ãšã¯ç©ºã£ã½ã®ãƒ­ãƒ¼ã‚«ãƒ«ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆ\n\n````shell\ngit init .\n````\n\n2. ãƒ­ãƒ¼ã‚«ãƒ«ãƒªãƒã‚¸ãƒˆãƒªå†…ã§ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã€‚ gitconfigãƒ•ã‚¡ã‚¤ãƒ«ã« `sparsecheckout=true` ã®1è¡ŒãŒè¿½åŠ ã•ã‚Œã¾ã™ã€‚\n\n````shell\ngit config core.sparsecheckout true\n````\n\n3. .git/infoä»¥ä¸‹ã«sparse-checkoutã¨ã„ã†åå‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã€‚\n\n````shell\nmkdir .git/info\nvi .git/info/sparse-checkout\n````\n\n4. å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’è¨˜è¿°ã—ã¦ã„ãã¾ã™ã€‚ è¨˜è¿°æ–¹æ³•ã¯.gitignoreã¨åŒã˜ã§ã€ãƒ•ã‚¡ã‚¤ãƒ«åã‚„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã®å…ˆé ­ã«ã€Œ!ã€ã‚’ä»˜ã‘ã‚‹ã¨é™¤å¤–æŒ‡å®šã‚‚ã§ãã¾ã™ã€‚\n\n````gitignore\nhoge.txt\n/fuga\n!/fuga/piyO\n````\n\n5. ãƒªãƒ¢ãƒ¼ãƒˆãƒªãƒã‚¸ãƒˆãƒªã‚’æŒ‡å®šã—ã¾ã™ã€‚\n\n````shell\ngit remote add origin XXXX\n````\n\n6. æœ€å¾Œã«pull\n\n````shell\ngit pull origin master\n````\n\n## ä¸€éƒ¨ã ã‘ã‚’é™¤å¤–ã—ãŸã„\n\nä¸€åº¦å…¨ä½“ã‚’checkoutå¯¾è±¡ã«å«ã‚ã¦ã‹ã‚‰ã€é™¤å¤–ã—ãŸã„ã‚‚ã®ã ã‘ã‚’ `!` ã§æŒ‡å®šã™ã‚‹ã¨ã„ã†æ–¹æ³•\n\n\u003chttps://git-scm.com/docs/git-sparse-checkout#_full_pattern_set\u003e\n\nãƒã‚¹ãƒˆã™ã‚‹ã“ã¨ã‚‚å¯èƒ½\n\n````gitignore\n/*\n!unwanted\nunwanted/**/wanted\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["git"]},"/note/go%E3%81%A7DB%E3%81%AB%E7%B5%A1%E3%82%80%E3%83%86%E3%82%B9%E3%83%88%E3%82%92%E3%81%97%E3%81%9F%E3%81%84":{"title":"goã§DBã«çµ¡ã‚€ãƒ†ã‚¹ãƒˆã‚’ã—ãŸã„","content":"\n\\#Go\n\n[Golangã§DBã‚¢ã‚¯ã‚»ã‚¹ãŒã‚ã‚‹ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã®ã‚„ã‚Šæ–¹ã‚’è€ƒãˆã‚‹ - Qiita](https://qiita.com/seya/items/582c2bdcca4ad50b03b7)\n\n* SQLãŒå®Ÿè¡Œã•ã‚Œã‚‹ç®‡æ‰€ã‚’mockã™ã‚‹(å®Ÿéš›ã«DBã«æ¥ç¶šã—ã¦SQLã®çµæœã‚’å¾—ã‚‹å¿…è¦ãŒãªã„å ´åˆ)\n  \n  * sqlmock ã‚’ä½¿ã†\n* å®Ÿéš›ã®DBã¨ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ç”¨æ„ã—ã¦SQLã‚‚å®Ÿéš›ã«å®Ÿè¡Œã™ã‚‹\n\n* ãƒ†ã‚¹ãƒˆç”¨DBã®ç”¨æ„\n  \n  * \u003chttps://github.com/DATA-DOG/go-txdb\u003e ã§ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã”ã¨ã«ç‹¬ç«‹ã—ãŸãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³å†…ã§ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’ç”¨æ„ãƒ»Rollbackã‚’è¡Œã†\n    * \u003chttps://zenn.dev/rinchsan/articles/83cf6f3b5d70c4d9b5d4\u003e\n    * mysql ã ã¨nested transactionãŒä½¿ãˆãªã„ã‹ã‚‰ã‚³ãƒŸãƒƒãƒˆã—ã¦ã„ã‚‹å ´åˆã€Savepointã«ã‹ãˆã‚‹ã¨ã‹ã—ãªã„ã¨ã€rollbackã§ããªã•ãã†â€¦ï¼Ÿ\n    * æ¯å›deleteã™ã‚‹ã€ã§ã‚‚ã‚ˆããªã„ï¼Ÿ\n  * \u003chttps://github.com/go-testfixtures/testfixtures\u003e ã§fixtureã‚’ç”¨æ„ã™ã‚‹\n  * \u003chttps://github.com/testcontainers/testcontainers-go\u003e ã‚„ \u003chttps://github.com/ory/dockertest\u003e ã‚’åˆ©ç”¨ã™ã‚‹\n    * \u003chttps://qiita.com/yasuflatland-lf/items/4f18b55c2a6492d0c462\u003e\n    * Makefileã§docker-compose up ã—ã¦ã‚‚ã„ã„ã‘ã©ã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ã§æ›¸ã„ã¦ãŠãã¨Skipã‚‚å¯\n* CIã§ã¯ã‚¹ã‚­ãƒƒãƒ—ã—ãŸã„\n\n````go\nfunc skipCI(t *testing.T) {\n  if os.Getenv(\"CI\") != \"\" {\n    t.Skip(\"Skipping testing in CI environment\")\n  }\n}\n\nfunc TestNewFeature(t *testing.T) {\n  skipCI(t)\n}\n````\n\nã‚ã‚‹ã„ã¯shortã§ã¯ã‚¹ã‚­ãƒƒãƒ—ã«ã™ã‚‹ `go test -short`\n\n````go\nif testing.Short() {\n  t.Skip(\"skipping testing in short mode\")\n}\n````\n\n### dockertestã¨fixtureã‚’ä½¿ã£ãŸãƒ†ã‚¹ãƒˆ\n\ndockertest ã‚’ä½¿ã£ã¦ã‚³ãƒ³ãƒ†ãƒŠã‚’èµ·å‹•ã—ã€testfixtures ã§ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’æµã—è¾¼ã‚€\n\n````go\npackage db_test\n\nimport (\n\t\"database/sql\"\n\t\"fmt\"\n\t\"os\"\n\t\"testing\"\n\t\"time\"\n\n\t\"github.com/go-testfixtures/testfixtures/v3\"\n\t\"github.com/ory/dockertest/v3\"\n)\n\nvar (\n\tpool     *dockertest.Pool\n\tresource *dockertest.Resource\n\tdb       *sql.DB\n\tfixtures *testfixtures.Loader\n)\n\nfunc prepareTestDatabase() error {\n\tvar err error\n\n\tpool, err = dockertest.NewPool(\"\")\n\t// ã‚³ãƒ³ãƒ†ãƒŠã®èµ·å‹•ã«æ™‚é–“ãŒã‹ã‹ã‚‹ãŸã‚\n\tpool.MaxWait = 2 * time.Minute\n\tif err != nil {\n\t\treturn err\n\t}\n\n\tbasepath, _ := os.Getwd()\n\n\tuser := \"user\"\n\t// DBåã« test ãŒå…¥ã£ã¦ã„ãªã„ã¨ã€fixtureã®loadæ™‚ã«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ (https://github.com/go-testfixtures/testfixtures#security-check)\n\tdbName := \"test_db\"\n\n\t// Dockerã‚³ãƒ³ãƒ†ãƒŠèµ·å‹•æ™‚ã®ç´°ã‹ã„ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹\n\trunOptions := \u0026dockertest.RunOptions{\n\t\tRepository: \"mysql\",\n\t\tTag:        \"5.7\",\n\t\tEnv: []string{\n\t\t\tfmt.Sprintf(\"MYSQL_DATABASE=%s\", dbName),\n\t\t\tfmt.Sprintf(\"MYSQL_USER=%s\", user),\n\t\t\tfmt.Sprintf(\"MYSQL_PASSWORD=%s\", user),\n\t\t\t\"MYSQL_ROOT_PASSWORD=secret\",\n\t\t\t\"TZ=Asia/Tokyo\",\n\t\t},\n\t\tMounts: []string{\n\t\t\tbasepath + \"/etc/01_create_table.sql:/docker-entrypoint-initdb.d/01_create_table.sql\",\n\t\t},\n\t\tCmd: []string{\n\t\t\t\"mysqld\",\n\t\t\t\"--character-set-server=utf8\",\n\t\t\t\"--collation-server=utf8_unicode_ci\",\n\t\t},\n\t}\n\n\t// imageã‚’pullã—ã¦èµ·å‹•ã™ã‚‹\n\tresource, err = pool.RunWithOptions(runOptions)\n\tif err != nil {\n\t\treturn err\n\t}\n\n\t// ã‚³ãƒ³ãƒ†ãƒŠãŒèµ·å‹•ã•ã‚ŒãŸã“ã¨ã‚’ç¢ºèªã™ã‚‹ãŸã‚ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®šç¾©\n\tif err := pool.Retry(func() error {\n\t\ttime.Sleep(10 * time.Second)\n\t\terr := connectDb(resource.GetPort(\"3306/tcp\"))\n\t\tif err != nil {\n\t\t\treturn err\n\t\t}\n\t\treturn db.Ping()\n\t}); err != nil {\n\t\treturn err\n\t}\n\n\treturn nil\n}\n\nfunc connectDb(port string) error {\n\tdsn := fmt.Sprintf(\"%s:%s@tcp(localhost:%s)/%s?parseTime=true\u0026loc=Asia%%2FTokyo\",\n\t\tuser,\n\t\tuser,\n\t\tport,\n\t\tdbName,\n\t)\n\tvar err error\n\tdb, err = sql.Open(\"mysql\", dsn)\n\tif err != nil {\n\t\treturn err\n\t}\n\treturn nil\n}\n\nfunc prepareFixture() error {\n\tvar err error\n\t// fixtureã‚’è¨­å®š\n\tfixtures, err = testfixtures.New(\n\t\ttestfixtures.Database(db),\n\t\ttestfixtures.Dialect(\"mysql\"),\n\t\ttestfixtures.Directory(\"testdata/fixtures\"), // The directory containing the YAML files\n\t)\n\tif err != nil {\n\t\treturn err\n\t}\n\treturn nil\n}\n\nfunc loadFixture() {\n\tif err := fixtures.Load(); err != nil {\n\t\tlog.Fatalf(\"Could not load fixture: %v\", err)\n\t}\n}\n\nfunc clearDb() {\n\tvar err error\n\tif _, err = db.Exec(\"DELETE FROM myroad_t\"); err != nil {\n\t\tlog.Fatalf(\"Could not delete: %v\", err)\n\t}\n\tif _, err = db.Exec(\"DELETE FROM notification_info_t\"); err != nil {\n\t\tlog.Fatalf(\"Could not delete: %v\", err)\n\t}\n\tif _, err = db.Exec(\"DELETE FROM routine_push_time_t\"); err != nil {\n\t\tlog.Fatalf(\"Could not delete: %v\", err)\n\t}\n\tif _, err = db.Exec(\"DELETE FROM send_close_road_regulation_t\"); err != nil {\n\t\tlog.Fatalf(\"Could not delete: %v\", err)\n\t}\n\tif _, err = db.Exec(\"DELETE FROM token_endpoint_arn_t\"); err != nil {\n\t\tlog.Fatalf(\"Could not delete: %v\", err)\n\t}\n}\n\n// ãƒ†ã‚¹ãƒˆæ™‚ã«å…±é€šã§å®Ÿè¡Œã™ã‚‹å‡¦ç†ã§ã€DBã®ç”¨æ„ãªã©ã‚’è¡Œã†\nfunc TestMain(m *testing.M) {\n\tif _, ci := os.LookupEnv(\"SHORT_TEST\"); ci {\n\t\tfmt.Printf(\"short modeã®ãŸã‚ãƒ†ã‚¹ãƒˆã‚’skipã—ã¾ã™\")\n\t\treturn\n\t}\n\n\t// ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ start\n\tvar err error\n\terr = prepareTestDatabase()\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\n\terr = prepareFixture()\n\tif err != nil {\n\t\tlog.Fatal(err)\n\t}\n\tclearDb()\n\t// ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ end\n\n\tcode := m.Run()\n\n\t// You can't defer this because os.Exit doesn't care for defer\n\tif err := pool.Purge(resource); err != nil {\n\t\tlog.Fatalf(\"Could not purge resource: %s\", err)\n\t}\n\n\tos.Exit(code)\n\n}\n\nfunc TestFindUser(t *testing.T) {\n\tgormDb, err := gorm.Open(mysql.New(mysql.Config{\n\t\tConn: db,\n\t}))\n\tif err != nil {\n\t\tt.Fatalf(\"error gorm.Open: %v\", err)\n\t}\n\tgormDb.Logger = gormDb.Logger.LogMode(logger.Info)\n\n\ttype fields struct {\n\t\tnowFactory repository.NowFactory\n\t}\n\ttype args struct {\n\t\tuserIds []string\n\t}\n\n\ttests := []struct {\n\t\tname    string\n\t\tfields  fields\n\t\targs    args\n\t\twant    []mydata\n\t\twantErr bool\n\t}{\n        // ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹\n\t}\n\n\tfor _, tt := range tests {\n\t\tt.Run(tt.name, func(t *testing.T) {\n\t\t\tloadFixture()\n\n\t\t\tc := \u0026Client{\n\t\t\t\tdb:         gormDb,\n\t\t\t\tnowFactory: tt.fields.nowFactory,\n\t\t\t}\n\t\t\tgot, err := c.FindUser(tt.args.userIds)\n\n\t\t\tif tt.wantErr {\n\t\t\t\tassert.Error(t, err)\n\t\t\t} else {\n\t\t\t\tassert.NoError(t, err)\n\t\t\t}\n\t\t\tassert.ElementsMatch(t, tt.want, got)\n\n\t\t})\n\t}\n}\n````\n\nfixtures ã«ã¯ `ãƒ†ãƒ¼ãƒ–ãƒ«å.yaml` ã®è¦å‰‡ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ã\n\n`testdata/fixtures/user_t.yaml`\n\n````yaml\n- user_id: \"AAAAAAAxxxx\"\n  name: \"foo\"\n  created_at: 1596715200\n- user_id: \"AAAAAAAyyyy\"\n  name: \"bar\"\n  created_at: 1596815200\n````\n\n## docker-compose.ymlã‚’ä½¿ã£ã¦ãƒ†ã‚¹ãƒˆã—ãŸã„\n\ntestcontainersã§ã¯docker-compose.ymlã‚’ä½¿ã£ã¦composeã‚’å®Ÿè¡Œã§ãã‚‹\n\n````yml:docker-compose.yml\nversion: '3.8'\n\nservices:\n  db:\n    image: mysql:5.7\n    platform: linux/x86_64\n    environment:\n      MYSQL_DATABASE: test_db\n      MYSQL_USER: user\n      MYSQL_PASSWORD: user\n      MYSQL_ROOT_PASSWORD: root\n      TZ: \"Asia/Tokyo\"\n    command: mysqld --character-set-server=utf8 --collation-server=utf8_unicode_ci --default-authentication-plugin=mysql_native_password\n    volumes:\n      - ./sql:/docker-entrypoint-initdb.d\n    ports:\n      - \"3306:3306\"\n````\n\n````go\nimport (\n\t\"database/sql\"\n\t\"fmt\"\n\t\"os\"\n\t\"testing\"\n\n\t\"github.com/docker/go-connections/nat\"\n\t\"github.com/go-testfixtures/testfixtures/v3\"\n\t\"github.com/testcontainers/testcontainers-go\"\n\t\"github.com/testcontainers/testcontainers-go/wait\"\n)\n\nvar (\n\tcompose  *testcontainers.LocalDockerCompose\n\tdb       *sql.DB\n\tfixtures *testfixtures.Loader\n)\n\nfunc prepareContainer(t *testing.T) error {\n\tpwd, _ := os.Getwd()\n\tcomposeFilePaths := []string{pwd + \"/etc/db/docker-compose.yml\"}\n\tidentifier := \"mydb\"\n\n\tcompose = testcontainers.NewLocalDockerCompose(composeFilePaths, identifier)\n\n\tuser := \"user\"\n\t// DBåã« test ãŒå…¥ã£ã¦ã„ãªã„ã¨ã€fixtureã®loadæ™‚ã«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹ (https://github.com/go-testfixtures/testfixtures#security-check)\n\tdbName := \"test_db\"\n\tport := \"3306\"\n\tdsn := fmt.Sprintf(\"%s:%s@tcp(localhost:%s)/%s?charset=utf8\u0026parseTime=true\u0026loc=Asia%%2FTokyo\",\n\t\tuser,\n\t\tuser,\n\t\tport,\n\t\tdbName,\n\t)\n\tdbURL := func(port nat.Port) string {\n\t\treturn dsn\n\t}\n\texecError := compose.\n\t\tWaitForService(\"db\", wait.ForSQL(nat.Port(port), \"mysql\", dbURL)).\n\t\tWithCommand([]string{\"up\", \"-d\"}).\n\t\tInvoke()\n\terr := execError.Error\n\tif err != nil {\n\t\treturn fmt.Errorf(\"Could not run compose file: %v - %v\", composeFilePaths, err)\n\t}\n\n\tdb, err = sql.Open(\"mysql\", dsn)\n\tif err != nil {\n\t\treturn err\n\t}\n\treturn db.Ping()\n}\n\nfunc TestSample(t *testing.T) {\n\t// ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ start\n\tif testing.Short() {\n\t\tt.Skip(\"skip integration test\")\n\t}\n\tvar err error\n\terr = prepareContainer(t)\n\tif err != nil {\n\t\tt.Fatal(err)\n\t}\n\tdefer func() {\n\t\tif err := compose.Down().Error; err != nil {\n\t\t\tt.Fatalf(\"Could not purge resource: %v\", err)\n\t\t}\n\t}()\n\t// ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿æº–å‚™ end\n\n\t// ... test\n}\n\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Go"]},"/note/go%E3%81%A7singleton":{"title":"goã§singleton","content":"\n\\#Go\n\n[How singleton pattern works with Golang | by Jefferson Otoni Lima | Golang Issue | Medium](https://medium.com/golang-issue/how-singleton-pattern-works-with-golang-2fdd61cd5a7f)\n[Go è¨€èªã«ãŠã‘ã‚‹ Singleton Pattern | text.Baldanders.info](https://text.baldanders.info/golang/singleton-pattern/)\n\n## ã‚ˆãã‚„ã‚‹ã‚„ã¤\n\nãªã«ã‚‚è€ƒãˆãšã«ã¤ãã‚‹ã¨ã“ã†ãªã‚‹\n\n````go\nvar instance *Config\n\nfunc GetInstance() *Config {\n    if instance == nil {\n        instance = \u0026Config{}\n    }\n    return instance\n}\n````\n\nã“ã‚Œã¯ã‚¹ãƒ¬ãƒƒãƒ‰ã‚»ãƒ¼ãƒ•ã§ã¯ãªã„ã®ã§ã€instanceã®ç”Ÿæˆå‡¦ç†ã«æ™‚é–“ãŒã‹ã‹ã‚‹å ´åˆã«goroutineãªã©ã§åŒæ™‚ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã¨ã€\nè¤‡æ•°å›ç”Ÿæˆå®Ÿè¡Œã•ã‚Œã‚‹\n\n=\u003e Singletonã§ãªã„\n\n## è§£æ±ºç­–\n\n`sync.Once` ã‹ `sync.Mutex` ã‚’ä½¿ã†ã¨ã„ã„\n\n````go\nvar instance *Config\nvar once sync.Once\n\nfunc GetInstance() *Config {\n\tonce.Do(func() {\n\t\tinstance = NewConfig()\n\t})\n\treturn instance\n}\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Go"]},"/note/go%E3%81%AElint%E3%81%ABstaticcheck%E3%82%92%E4%BD%BF%E3%81%86":{"title":"goã®lintã«staticcheckã‚’ä½¿ã†","content":"\n\u003chttps://blog.cybozu.io/entry/2021/02/26/081013\u003e\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":[]},"/note/go%E8%A4%87%E6%95%B0%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E3%82%92%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B":{"title":"goè¤‡æ•°ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹","content":"\n\u003chttps://kazuhira-r.hatenablog.com/entry/2021/02/23/200101\u003e\n\n\u003chttps://golang.org/doc/manage-install\u003e\n\n## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n````shell\n$ go get golang.org/dl/go1.10.7\n$ go1.10.7 download\n````\n\n## ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n````shell\n$ rm $HOME/go/bin/go1.10.7\n$ rm -rf $HOME/sdk/go1.10.7\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":[]},"/note/go-%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0%E3%82%A8%E3%83%A9%E3%83%BC":{"title":"go ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ©ãƒ¼","content":"\n[Go](note/Go.md) ã§ã‚«ã‚¹ã‚¿ãƒ ã‚¨ãƒ©ãƒ¼ã‚’ä½œã‚‹\n\n[aws-sdk-go-v2 ã§ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°](note/aws-sdk-go-v2%20ã§ã®ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°.md)\nhttps://github.com/aws/aws-sdk-go-v2/issues/1110\n\n````go\nif err != nil {\n    var myerr *MyError\n    if errors.As(err, \u0026myerr) {\n        return nil, ErrHoge\n    }\n    return nil, err\n}\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Go"]},"/note/go-%E3%83%A2%E3%82%B8%E3%83%A5%E3%83%BC%E3%83%AB%E3%81%AE%E3%82%BF%E3%82%B0%E3%82%92%E5%88%A5%E3%81%AE%E3%82%B3%E3%83%9F%E3%83%83%E3%83%88%E3%83%8F%E3%83%83%E3%82%B7%E3%83%A5%E3%81%AB%E3%81%A4%E3%81%91%E7%9B%B4%E3%81%97%E3%81%9F%E3%82%89cache%E3%81%8C%E6%AE%8B%E3%81%A3%E3%81%A6%E3%81%84%E3%81%A6%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%81%86%E3%81%BE%E3%81%8F%E8%AA%AD%E3%81%BF%E8%BE%BC%E3%82%81%E3%81%AA%E3%81%8B%E3%81%A3%E3%81%9F":{"title":"go ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ã‚¿ã‚°ã‚’åˆ¥ã®ã‚³ãƒŸãƒƒãƒˆãƒãƒƒã‚·ãƒ¥ã«ã¤ã‘ç›´ã—ãŸã‚‰cacheãŒæ®‹ã£ã¦ã„ã¦ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã†ã¾ãèª­ã¿è¾¼ã‚ãªã‹ã£ãŸ","content":"\nãã‚‚ãã‚‚ãã‚“ãªã“ã¨ã—ãªã„ã»ã†ãŒã„ã„ã¨ã„ã†ã®ã¯æ‰¿çŸ¥ã§ã€é–‹ç™ºä¸­ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãªã©ã§ã‚¿ã‚°ã‚’ã†ã¡ã¾ã¡ãŒãˆãŸã®ã§ä¿®æ­£ã—ãŸã¨ã“ã‚æ–°ã—ã„ã‚³ãƒŸãƒƒãƒˆãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œãªã‹ã£ãŸã€‚\n\n## æ‰‹é †\n\n* ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«Aã®ã‚³ãƒŸãƒƒãƒˆAã«tag v1.0.0ã‚’ã¤ã‘ã¦push\n* ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«Aã‚’ä½¿ã£ã¦ã„ã‚‹ãƒªãƒã‚¸ãƒˆãƒªã§ `go get ~~~@v1.0.0`\n* ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«Aã§ãƒ•ã‚¡ã‚¤ãƒ«è¿½åŠ ã—ã¦ã‚³ãƒŸãƒƒãƒˆã™ã‚‹(ã‚³ãƒŸãƒƒãƒˆB)\n* v1.0.0ã‚’æ¶ˆã—ã¦ã‚³ãƒŸãƒƒãƒˆBã«v1.0.0ã‚’ã¤ã‘ãªãŠã—ã¦push\n* å†åº¦ `go get ~~~@v1.0.0` ã—ãŸãŒå¤‰æ›´ãŒãªã„ãŸã‚ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¦ãã‚Œãªã‹ã£ãŸ\n\n## è§£æ¶ˆæ–¹æ³•\n\n* `go clean -modcache` ã§ã‚¯ãƒªã‚¢ã—ã¦ã€go.sumã«æ›¸ã„ã¦ã‚ã‚‹ãƒãƒƒã‚·ãƒ¥ã‚‚æ¶ˆã—ã¦ã‹ã‚‰ go get\n* `~/go/pkg/mod` ã«ãƒ•ã‚¡ã‚¤ãƒ«ãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¦ã€å…ˆç¨‹è¿½åŠ ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã‚‚å­˜åœ¨ã™ã‚‹ã“ã¨ã‚’ç¢ºèª\n\nã—ã‹ã—ã“ã‚Œã ã‘ã§ã¯è¶³ã‚Šãªã‹ã£ãŸã€‚\ngo buildã—ãŸã¨ã“ã‚ã€ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ä¿®æ­£ãŒåæ˜ ã•ã‚Œã¦ã„ãªãã¦ã€ãŸã¨ãˆã°è¿½åŠ ã—ãŸstructã‚’ä½¿ã£ã¦ã„ã‚‹ç®‡æ‰€ã§ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ã¨ãªã‚‹ã€‚\nã¾ã ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒæ®‹ã£ã¦ã„ã‚‹ã¿ãŸã„ã€‚\n\n`go clean -modcache` ã§ `~/go/pkg/mod` ãŒæ¶ˆãˆãŸã®ã§ã„ã„ã¨æ€ã£ãŸãŒã€\n`go clean -cache` ã§ `go env GOCACHE` ã«ã‚ã‚‹ãƒ“ãƒ«ãƒ‰ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãªã©ã‚‚æ¶ˆã•ãªã„ã¨ã„ã‘ãªã‹ã£ãŸ\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["2023/05/18","Go"]},"/note/go-1.19%E3%82%A2%E3%83%83%E3%83%97%E3%83%87%E3%83%BC%E3%83%88%E5%86%85%E5%AE%B9":{"title":"go 1.19ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆå†…å®¹","content":"\n[Go Memory Modelã‚’èª­ã‚€ã€å…¥é–€ç·¨ã€‘ - Google ã‚¹ãƒ©ã‚¤ãƒ‰](https://docs.google.com/presentation/d/1jJvL__7VYHs4Qv-mGsuAThXpWiSpek27wXln9K2PVJU)\n[What is Soft Memory Limit? - Speaker Deck](https://speakerdeck.com/yagipy/what-is-soft-memory-limit)\n[\\[shared\\] 20220815 What's new in Go 1.19? - Google ã‚¹ãƒ©ã‚¤ãƒ‰](https://docs.google.com/presentation/d/1FkXdI9oR8mUCzh-woca7O3K_T5iZCirp7QcoJY3d4Wk)\n[Go1.19ã§æ¡ç”¨ã•ã‚ŒãŸ Pattern-defeating Quicksort ã®ç´¹ä»‹ - Speaker Deck](https://speakerdeck.com/po3rin/go1-dot-19decai-yong-sareta-pattern-defeating-quicksort-falseshao-jie)\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Go"]},"/note/go-install%E3%81%A7tools.go%E3%82%92%E6%8E%92%E9%99%A4":{"title":"go-installã§tools.goã‚’æ’é™¤","content":"\n\\#Go\n\n\u003chttps://zenn.dev/tarotaro0/articles/1d5bf3e32d5ef2\u003e\n\n[note/Go](Go.md) ã§ã¯npmã®devdependenciesã®ä»•çµ„ã¿ãŒãªã„ãŸã‚ã€é€šå¸¸ã ã¨go.modã‹ã‚‰æ¶ˆãˆã¦ã—ã¾ã†\n\nãã“ã§ã€ã“ã‚Œã‚‰ã®ãƒ„ãƒ¼ãƒ«ã‚’moduleã«ã‚ˆã£ã¦ç®¡ç†ã™ã‚‹ãŸã‚ã«ã€`tools.go`ã‚’ç”¨ã„ã‚‹æ–¹æ³•ãŒ[å…¬å¼ã®go wikiã§ã‚‚ç´¹ä»‹ã•ã‚Œã¦ã„ã‚‹](https://github.com/golang/go/wiki/Modules#how-can-i-track-tool-dependencies-for-a-module)ã€‚\n\n````go\n// +build tools\n\npackage tools\n\nimport (\n\t// Tools we use during development.\n\t_ \"golang.org/x/lint/golint\"\n\t_ \"honnef.co/go/tools/cmd/staticcheck\"\n)\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":[]},"/note/go-jira%E3%82%92%E3%81%A4%E3%81%8B%E3%81%A3%E3%81%9Fjira%E3%81%AE%E6%93%8D%E4%BD%9C":{"title":"go-jiraã‚’ã¤ã‹ã£ãŸjiraã®æ“ä½œ","content":"\n\\#jira\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":[]},"/note/go-task%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6GoEcho%E3%81%AE%E7%92%B0%E5%A2%83%E3%81%A7%E3%83%9B%E3%83%83%E3%83%88%E3%83%AA%E3%83%AD%E3%83%BC%E3%83%89%E3%81%99%E3%82%8B":{"title":"go-taskã‚’ä½¿ã£ã¦Go,Echoã®ç’°å¢ƒã§ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹","content":"\n\\#Go\n\nGoã®ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ã¯Realizeã‚„Airã‚’ä½¿ã£ã¦ã„ãŸãŒã€[go-task](https://github.com/go-task/task) ãŒã„ã„æ„Ÿã˜ã«Makefileã‚’ç½®ãæ›ãˆã¦ãã‚Œã¦ãƒ›ãƒƒãƒˆãƒªãƒ­ãƒ¼ãƒ‰ã‚‚å®Ÿç¾ã§ãã‚‹ã®ã§ä½¿ã£ã¦ã¿ãŸã€‚\n\n[go-taskã§ã‚µãƒ¼ãƒãƒ¼ã®ãƒ©ã‚¤ãƒ–ãƒªãƒ­ãƒ¼ãƒ‰ã‚’å®Ÿç¾ã™ã‚‹ - Qiita](https://qiita.com/croquette0212/items/dab91c1075c1f3ac7b8d)\n\nwatchæ©Ÿèƒ½ãŒã‚ã‚Šã€ `sources` ã§æŒ‡å®šã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ã«å¤‰æ›´ãŒã‚ã£ãŸå ´åˆã«ãƒªãƒ­ãƒ¼ãƒ‰ã—ã¦ãã‚Œã‚‹ã€‚\n\n````shell\ntask -w \u003cTASK\u003e\n````\n\nã“ã‚Œã ã‘ã ã¨ã€èµ·å‹•æ¸ˆã¿ã‚µãƒ¼ãƒãƒ¼ã‚’çµ‚äº†ã—ã¦ã‹ã‚‰å†èµ·å‹•ã¨ã¯ãªã‚‰ãªã„ã®ã§ã€PIDã‚’ä¿å­˜ã—ã¦ãŠã„ã¦SIGTERMã§killã™ã‚‹\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Go"]},"/note/go_context%E3%81%AE%E3%82%BF%E3%82%A4%E3%83%A0%E3%82%A2%E3%82%A6%E3%83%88%E3%81%A8%E3%82%AD%E3%83%A3%E3%83%B3%E3%82%BB%E3%83%AB":{"title":"go_contextã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã¨ã‚­ãƒ£ãƒ³ã‚»ãƒ«","content":"\n\\#Go \n\n[Goã®contextã«ã‚ˆã‚‹ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã‚„ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ - oinume journal](https://journal.lampetty.net/entry/cancel-and-timeout-with-context-in-go)\n[context.WithCancel, WithTimeout ã§çŸ¥ã£ã¦ãŠã„ãŸæ–¹ãŒè‰¯ã„ã“ã¨ - Carpe Diem](https://christina04.hatenablog.com/entry/tips-for-context-with-cancel_1)\n\n````go\npackage main\n\nimport (\n\t\"context\"\n\t\"fmt\"\n\t\"sync\"\n\t\"time\"\n)\n\nfunc main() {\n\tvar wg sync.WaitGroup\n\tctx, cancel := context.WithCancel(context.Background())\n\tdefer cancel()\n\n\twg.Add(1)\n\tgo func() {\n\t\tdefer wg.Done()\n\t\tif err := printHello(ctx); err != nil {\n\t\t\tfmt.Printf(\"cannot print greeting: %v\\n\", err)\n\t\t\treturn\n\t\t}\n\t}()\n\n\twg.Add(1)\n\tgo func() {\n\t\tdefer wg.Done()\n\t\tif err := printGoodbye(ctx); err != nil {\n\t\t\tfmt.Printf(\"cannot print goodbye: %v\\n\", err)\n\t\t\treturn\n\t\t}\n\t}()\n\n\twg.Wait()\n}\n\nfunc printHello(ctx context.Context) error {\n\tctx, cancel := context.WithTimeout(ctx, 4*time.Second)\n\tdefer cancel()\n\n\tswitch _, err := communicate(ctx); {\n\tcase err != nil:\n\t\treturn err\n\t}\n\tfmt.Printf(\"%s world!\\n\", \"hello\")\n\treturn nil\n}\n\nfunc printGoodbye(ctx context.Context) error {\n\tctx, cancel := context.WithTimeout(ctx, 2*time.Second)\n\tdefer cancel()\n\n\tswitch _, err := communicate(ctx); {\n\tcase err != nil:\n\t\treturn err\n\t}\n\tfmt.Printf(\"%s world!\\n\", \"goodbye\")\n\treturn nil\n}\n\nfunc communicate(ctx context.Context) (string, error) {\n    // nç§’å¾Œã«å‡¦ç†ã‚’ç¶™ç¶š\n\tselect {\n\tcase \u003c-ctx.Done():\n\t\treturn \"\", ctx.Err()\n\tcase \u003c-time.After(5 * time.Second):\n\t\t//fmt.Printf(\"1 second elapsed\\n\")\n\t}\n\treturn \"handshake\", nil\n}\n````\n\n* `communicate` ã‚’5ç§’(ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå€¤ã‚ˆã‚Šé•·ã„)ã«ã™ã‚‹ â†’ ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã—ã¦ `cannot print greeting: deadline exceeded`\n* `communicate` ã‚’3ç§’(helloã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå€¤ã‚ˆã‚ŠçŸ­ã„ã€goodbyeã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå€¤ã‚ˆã‚Šé•·ã„)ã«ã™ã‚‹ â†’ helloã¯å®Œäº†ã™ã‚‹ãŒgoodbyeã¯ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã™ã‚‹\n* `communicate` ã‚’1ç§’(ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆå€¤ã‚ˆã‚ŠçŸ­ã„)ã«ã™ã‚‹ â†’ ä¸¡æ–¹å®Œäº†ã™ã‚‹\n\n## è¦ªã®contextã‚’ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã™ã‚‹ã¨ã€å­ã®contextã‚‚ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã•ã‚Œã‚‹\n\n````go\npackage main\n\nimport (\n\t\"context\"\n\t\"fmt\"\n\t\"sync\"\n\t\"time\"\n)\n\nfunc main() {\n\tvar wg sync.WaitGroup\n\tctx, cancel := context.WithCancel(context.Background())\n\tdefer cancel()\n\n\twg.Add(1)\n\tgo func() {\n\t\tdefer wg.Done()\n\t\tif err := printHello(ctx); err != nil {\n\t\t\tfmt.Printf(\"cannot print greeting: %v\\n\", err)\n            cancel()\n\t\t\treturn\n\t\t}\n\t}()\n\n\twg.Add(1)\n\tgo func() {\n\t\tdefer wg.Done()\n\t\tif err := printGoodbye(ctx); err != nil {\n\t\t\tfmt.Printf(\"cannot print goodbye: %v\\n\", err)\n\t\t\treturn\n\t\t}\n\t}()\n\n\twg.Wait()\n}\n\nfunc printHello(ctx context.Context) error {\n\tctx, cancel := context.WithTimeout(ctx, 2*time.Second)\n\tdefer cancel()\n\n\tswitch _, err := communicate(ctx); {\n\tcase err != nil:\n\t\treturn err\n\t}\n\tfmt.Printf(\"%s world!\\n\", \"hello\")\n\treturn nil\n}\n\nfunc printGoodbye(ctx context.Context) error {\n\tctx, cancel := context.WithTimeout(ctx, 4*time.Second)\n\tdefer cancel()\n\n\tswitch _, err := communicate(ctx); {\n\tcase err != nil:\n\t\treturn err\n\t}\n\tfmt.Printf(\"%s world!\\n\", \"goodbye\")\n\treturn nil\n}\n\nfunc communicate(ctx context.Context) (string, error) {\n    // nç§’å¾Œã«å‡¦ç†ã‚’ç¶™ç¶š\n\tselect {\n\tcase \u003c-ctx.Done():\n\t\treturn \"\", ctx.Err()\n\tcase \u003c-time.After(5 * time.Second):\n\t\t//fmt.Printf(\"1 second elapsed\\n\")\n\t}\n\treturn \"handshake\", nil\n}\n````\n\n=\u003e printHelloãŒã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ â†’ è¦ªã® `cancel()` ã‚’å®Ÿè¡Œ â†’ å­ã® `ctx.Done()` ãŒå®Ÿè¡Œã•ã‚Œã¦printGoodbyeã‚‚çµ‚äº†ã™ã‚‹\n\n````\ncannot print greeting: context deadline exceeded\ncannot print goodbye: context canceled\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":[]},"/note/go_httpClient%E3%82%92%E3%83%86%E3%82%B9%E3%83%88%E3%81%99%E3%82%8B":{"title":"go_httpClientã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹","content":"\n\\#Go\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":[]},"/note/go_install":{"title":"go_install","content":"\n\\#Go \n\n# go install\n\ngo 1.16ã‹ã‚‰ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹æ©Ÿèƒ½ãŒè¿½åŠ ã•ã‚ŒãŸ\n\nã„ã¾ã¾ã§go.modã®ãªã„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ã¦\n\n````shell\nGOMODULE111=off go get github.com/xxx\n````\n\nã¨ã‹ã‚„ã£ã¦ãŸã®ã‚’ã€\n\n````shell\ngo install github.com/xxx@latest\n````\n\nã§$GOPATH/binã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸ\n\n## go clean\n\n`-i` ã§ go install ã§ä½œã‚‰ã‚ŒãŸã‚‚ã®ã‚’å‰Šé™¤ã™ã‚‹\n\n### å‰Šé™¤å‰ã«ã‚³ãƒãƒ³ãƒ‰ã‚’ç¢ºèªã™ã‚‹\n\n````bash\ngo clean -i -n github.com/sample_user/sample\n````\n\n### å‰Šé™¤ã™ã‚‹\n\n````bash\ngo clean -i github.com/sample_user/sample\n````\n\nsrcé…ä¸‹ã«æ®‹ã£ã¦ã„ã‚‹ã‚‚ã®ã¯æ¶ˆãˆãªã„ã®ã§ã€æ‰‹å‹•ã§å¯¾è±¡ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ã¾ã‚‹ã”ã¨å‰Šé™¤ã™ã‚‹\n\n````bash\nrm -rf $GOPATH/src/github.com/sample_user/sample\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":[]},"/note/go_json%E3%81%ABmap%E3%82%92marshal%E3%81%99%E3%82%8B":{"title":"go_jsonã«mapã‚’marshalã™ã‚‹","content":"\n\\#Go\n\n`map[string]interface{}` ã‚’marshal,unmarshalã§ãã‚‹\n\n````go\nimport (\n\t\"encoding/json\"\n\t\"fmt\"\n)\n\ntype required struct {\n\tName string\n\tAge  int\n}\ntype param struct {\n\trequired\n\tOption map[string]interface{}\n}\n\nfunc main() {\n\tjs := `{\n\t\t\t\"name\": \"John\",\n\t\t\t\"age\": 25,\n\t\t\t\"option\": {\n\t\t\t\t\"address\": {\n\t\t\t\t\t\"postal\": 1555555,\n\t\t\t\t\t\"name\": \"X-X-X\"\n\t\t\t\t},\n\t\t\t\t\"height\": 172\n\t\t\t}\n\t\t}`\n\n\tvar param param\n\terr := json.Unmarshal(js, \u0026param)\n\tif err != nil {\n\t\tfmt.Printf(\"%v\", err)\n\t\treturn\n\t}\n}\n````\n\nå¿…é ˆãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’åŸ‹ã‚è¾¼ã¿ã«ã—ã¦ã¿ãŸ\n\n## ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ã‚­ãƒ¼ã‚’ãƒ•ãƒ©ãƒƒãƒˆã«ã—ãŸã„\n\nä¸Šã®ä¾‹ã§ã¯ã€ `option`ã®ã‚­ãƒ¼ã«ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’è©°ã‚ãŸã“ã¨ã§ `option: map[string]interface{}` ã«marshalã§ããŸã€‚\nä»¥ä¸‹ã®ã‚ˆã†ãªJSONã¯marshalã§ãã‚‹ã‹ï¼Ÿ\n\n````json\n{\n  \"name\": \"John\",\n  \"age\": 25,\n  \"address\": {\n    \"postal\": 1555555,\n    \"name\": \"X-X-X\"\n  },\n  \"height\": 172\n}\n````\n\n[dictionary - How to embed a map into a struct so that it has a flat json representation - Stack Overflow](https://stackoverflow.com/questions/31036343/how-to-embed-a-map-into-a-struct-so-that-it-has-a-flat-json-representation)\n\n \u003e \n \u003e The short answer is no. The language does not allow you to embed either type (slice or map) in a struct.  \n \u003e Just use a `map[string]interface{}`. Deal with the fact that the values for \"key1\" and \"key2\" are strings and everything else is a float somewhere else. That's really the only way you're getting that output. You can make the problem as complicated as you'd like beyond this (like transform into a type more like yours or something) but if you're averse to implementing `MarshalJSON` the only model which will produce the results you want is `map[string]interface{}`\n\nãã®å ´åˆã¯å˜ã« `map[string]interface{}` ã«ã™ã‚‹ãã‚‰ã„\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Go"]},"/note/go_mockery":{"title":"go_mockery","content":"\n[go_testifyã‚’ä½¿ã†](note/go_testifyã‚’ä½¿ã†.md) ã§testify/mockã‚’ä½¿ã£ãŸãŒã€\nmockã‚’æ‰‹ã§ä½œæˆã™ã‚‹ã®ã¯éª¨ãŒæŠ˜ã‚Œã‚‹\n\nãã“ã§testifyã®mockç”Ÿæˆã«ã¯ [mockery](https://github.com/vektra/mockery) ã‚’ä½¿ã†ã¨ä¾¿åˆ©\n\n## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\ndockerã‚„brewã§ã‚‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã€‚`go install` ã§å…¥ã‚Œã‚‹å ´åˆã¯ä»¥ä¸‹\n\n````shell\ngo install github.com/vektra/mockery/v2@latest\n````\n\n## gomockã¨ã®æ¯”è¼ƒ\n\nmockãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¨ã„ãˆã° [gomock](https://github.com/golang/mock) ã‚‚æœ‰å\n\ntestifyã‚’ä½¿ã‚ãªã„å ´åˆã¯ã“ã¡ã‚‰ã§ã‚‚ã„ã„ã¨æ€ã†\n\n## ä½™è«‡\n\nä¸€æ™‚æœŸãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã•ã‚Œã¦ã„ãªã‹ã£ãŸãŒã€å¼•ãç¶™ã„ã ãƒ¡ãƒ³ãƒ†ãƒŠãŒã„ã¦é–‹ç™ºå†é–‹ã•ã‚ŒãŸã€‚\n\nhttps://github.com/vektra/mockery/issues/237#issuecomment-622492842\n\nä»Šã¯v2ã ãŒã€[v3å¯¾å¿œä¸­](https://github.com/vektra/mockery#v3)ã‚‰ã—ã„\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Go","unittest"]},"/note/go_testify%E3%82%92%E4%BD%BF%E3%81%86":{"title":"go_testifyã‚’ä½¿ã†","content":"\n\\#Go\n\n## testify\n\n\u003chttps://github.com/stretchr/testify\u003e\n\nassert, mock, suiteãªã©ã€ãƒ†ã‚¹ãƒˆã«ä¾¿åˆ©ãªæ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒª\n\nGoã«ã¯æ¨™æº–ã§ `testing` ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå‚™ã‚ã£ã¦ã„ã¦ã€æ¨™æº–ã§ååˆ†ãªå ´é¢ã‚‚ã‚ã‚‹ãŒã€\nã‚ã‚‹ç¨‹åº¦å¤§ããªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãªã£ã¦ãã‚‹ã¨ã‚„ã¯ã‚Šç‰©è¶³ã‚Šãªããªã£ã¦ãã‚‹\n\n## assert\n\nãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’importã™ã‚‹\n\n````go\nimport (\n    \"testing\"\n    \"github.com/stretchr/testify/assert\"\n)\n````\n\n`assert.\u003cã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³é–¢æ•°\u003e(testing.T, æœŸå¾…å€¤, å®Ÿéš›ã®å€¤)`\n\n````go\nfunc TestSomething(t *testing.T) {\n  assert.Equal(t, 123, 123, \"ç­‰ã—ã„\")\n  assert.NotEqual(t, 123, 456, \"ç­‰ã—ããªã„\")\n  var obj *object = nil\n  assert.Nil(t, obj)\n  \n  obj = \u0026object{\n    Value: \"Something\",\n  }\n  if assert.NotNil(t, obj) {\n    assert.Equal(t, \"Something\", obj.Value)\n  }\n  \n  actualObj, err := SomeFunction()\n  // errors.Is ã‚’ä½¿ã£ãŸæ¯”è¼ƒ\n  assert.ErrorIs(t, expectedError, err)\n\n}\n````\n\n## mock\n\né€šä¿¡ã‚„DBã‚’mockã™ã‚‹æ©Ÿèƒ½ãŒç”¨æ„ã•ã‚Œã¦ã„ã‚‹ã€‚\n\n### ãƒ†ã‚¹ãƒˆå¯¾è±¡\n\nä¾‹ã¨ã—ã¦ä»¥ä¸‹ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’mockã™ã‚‹\n\n````go\ntype ItemRepository interface {\n    Get(id int) (string, error)\n}\n````\n\n````go\ntype Item struct {\n    repo ItemRepository\n}\n\nfunc (i *Item) Name(id int) (string, error) {\n    name, err := i.repo.Get(id)\n    if name == nil || err != nil {\n        return \"\", err\n    }\n    return name, nil\n}\n````\n\n### ãƒ¢ãƒƒã‚¯ä½œæˆ\n\n* ãƒ¡ã‚½ãƒƒãƒ‰å†…ã§Calledãƒ¡ã‚½ãƒƒãƒ‰ã‚’å®Ÿè¡Œã—ã€retã‚’å–å¾—\n* ret.Get(æˆ»ã‚Šå€¤ã®index)ã‚’ãƒ¡ã‚½ãƒƒãƒ‰ã®æˆ»ã‚Šå€¤ã¨ã™ã‚‹\n  * æˆ»ã‚Šå€¤ãŒã‚¨ãƒ©ãƒ¼ã®å ´åˆã¯ret.Error(æˆ»ã‚Šå€¤ã®index)\n\n````go\nimport mock \"github.com/stretchr/testify/mock\"\n\n// mock.Mockã‚’åŸ‹ã‚è¾¼ã‚€\ntype MockItemRepository struct {\n    mock.Mock\n}\n\n// ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’å®Ÿè£…\nfunc (_m *MockUserInterface) Get(id int) (string, error) {\n    ret := _m.Called(id)\n    return ret.Get(0).(string), ret.Error(1)\n}\n\n````\n\nmockã‚’æ¯å›æ‰‹ã§æ›¸ãã®ã¯å¤§å¤‰ãªã®ã§ã€mockeryã‚’ä½¿ã†ã¨ä¾¿åˆ© [go_mockery](note/go_mockery.md)\n\n### ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ\n\n1. ãƒ¢ãƒƒã‚¯ã®æœŸå¾…å¼•æ•°ã€æˆ»ã‚Šå€¤ã‚’è¨­å®š\n1. ãƒ†ã‚¹ãƒˆå¯¾è±¡ã«ãƒ¢ãƒƒã‚¯ã‚’æ³¨å…¥\n1. ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ(å†…éƒ¨ã§ãƒ¢ãƒƒã‚¯å®Ÿè¡Œ)\n1. mockã®å®Ÿè¡Œå›æ•°ã‚’assert\n\n````go\nfunc TestItem(t *testing.T) {\n    expected := \"ã¿ã‹ã‚“\"\n\n    // ãƒ¢ãƒƒã‚¯\n    mockRepo := new(MockItemRepository)\n    // ãƒ¢ãƒƒã‚¯ã®æˆ»ã‚Šå€¤ã‚’è¨­å®š\n    mockRepo.\n        On(\"Get\", 1).\n        Return(expected, nil)\n\n    // ãƒ†ã‚¹ãƒˆå¯¾è±¡(ãƒ¢ãƒƒã‚¯ã‚’æ³¨å…¥)\n    i := \u0026Item{\n        repo: mockRepo,\n    }\n    // ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ(å†…éƒ¨ã§ãƒ¢ãƒƒã‚¯å®Ÿè¡Œã•ã‚Œã¦è¨˜éŒ²ã•ã‚Œã‚‹)\n    got, err := i.Name(1)\n    assert.Error(t, err)\n    \n    // å°‘ãªãã¨ã‚‚ä¸€å›å‘¼ã³å‡ºã•ã‚ŒãŸã“ã¨ã‚’ç¢ºèªã™ã‚‹\n    mockRepo.AssertExpectations(suite.T())\n    // å›æ•°ã‚’assertã—ãŸã„å ´åˆ\n    mockRepo.AssertNumberOfCalls(suite.T(), \"Get\", 1)\n    // ä¸€å›ã‚‚å‘¼ã³å‡ºã•ã‚Œã¦ã„ãªã„ã“ã¨ã‚’ç¢ºèªã™ã‚‹å ´åˆ\n    // mockRepo.AssertNotCalled(suite.T(), \"Get\", 1)\n}\n````\n\n## suite\n\nå„testå‰å¾Œã«\n\n````go\npackage main\n\nimport (\n    \"os\"\n    \"testing\"\n    \n    \"github.com/stretchr/testify/assert\"\n    \"github.com/stretchr/testify/suite\"\n)\n\ntype MyTestSuiteStruct struct {\n    suite.Suite\n}\n\n// å„testã®å‰ã«å®Ÿè¡Œã•ã‚Œã‚‹\nfunc (suite *MyTestSuiteStruct) SetupTest() {\n    os.Setenv(\"HELLO\", \"WORLD\")\n}\n\n// å„testã®å¾Œã«å®Ÿè¡Œã•ã‚Œã‚‹\nfunc (suite *MyTestSuiteStruct) TearDownTest() {\n\tos.Clearenv()\n}\n\n// å„ãƒ†ã‚¹ãƒˆã¯ \"Test\" ã§å§‹ã¾ã‚‹å¿…è¦ãŒã‚ã‚‹\nfunc (suite *MyTestSuiteStruct) TestHello() {\n    // *testing.T ã®ä»£ã‚ã‚Šã« suite.T() ã‚’ä½¿ã†\n    assert.Equal(suite.T(), 1, 1)\n    assert.Equal(suite.T(), \"WORLD\", os.Getenv(\"HELLO\"))\n}\n\n// 'go test' ã§suiteã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã«ã€*testing.Tã‚’å¼•æ•°ã«ã‚‚ã¤é€šå¸¸ã®ãƒ†ã‚¹ãƒˆã‚’ä½œã£ã¦\n// suite.Runã‚’å®Ÿè¡Œã™ã‚‹\nfunc TestMyTestSuite(t *testing.T) {\n    suite.Run(t, new(MyTestSuiteStruct))\n}\n````\n\nå„ãƒ†ã‚¹ãƒˆå‰å¾Œã«ãã‚Œãã‚Œã€ `SetupTest()` ã¨ `TearDownTest()` ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã€‚\nä¸‹è¨˜ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ãã‚Œãã‚Œå®Ÿè£…ã™ã‚‹ã“ã¨ã§å®Ÿè¡Œã•ã‚Œã‚‹ä»•çµ„ã¿ã¨ãªã£ã¦ã„ã‚‹ã€‚\n\n````go\ntype SetupTestSuite interface {\n    SetupTest()\n}\n\ntype TearDownTestSuite interface {\n    TearDownTest()\n}\n````\n\nä»–ã«ã‚‚ãƒ†ã‚¹ãƒˆå…¨ä½“ã®å‰å¾Œã«ä¸€å›å®Ÿè¡Œã•ã‚Œã‚‹å‡¦ç†ã‚‚å®šç¾©ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\n[ã“ã¡ã‚‰ã‚’å‚ç…§](https://pkg.go.dev/github.com/stretchr/testify/suite)\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":[]},"/note/gomplate":{"title":"gomplate","content":"\n\\#Go\n\nhttps://docs.gomplate.ca/installing/\n\ngoã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³\n\nä½¿ã„æ–¹\n\n````shell\n$ echo 'My voice is my {{.Env.THING}}. {{(datasource \"vault\").value}}' \\\n  | docker run -i -e THING=passport -v /home/me/.vault-token:/root/.vault-token hairyhenderson/gomplate -d vault=vault:///secret/sneakers -f -\nMy voice is my passport. Verify me.\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Go"]},"/note/hubs_cloud":{"title":"hubs_cloud","content":"\n# hubs_cloud\n\nVRç©ºé–“ã‚’ãƒ‡ãƒ—ãƒ­ã‚¤ã§ãã‚‹\n\n## ãƒªãƒ³ã‚¯\n\n* [å…¬å¼](https://hubs.mozilla.com/cloud)\n* [AWS Marketplace](https://aws.amazon.com/marketplace/pp/B084WNGRRP)\n* [æ—¥æœ¬èªã§è©¦ã—ãŸäºº](https://mitomemel.hatenablog.com/entry/2020/05/09/120007)\n\n## ãƒ¦ãƒ¼ã‚¶ãƒ¼åˆ¶é™\n\n* \u003chttps://hubs.mozilla.com/docs/hubs-faq.html#can-i-prevent-unregistered-attendees-from-attending-my-event\u003e\n  * æ‹›å¾…URLã‹ã‚‰ã®ã‚¢ã‚¯ã‚»ã‚¹ã®ã¿ã«çµã‚‹ã“ã¨ã¯ hubs.mozilla.com ã§ã‚‚ã§ãã‚‹\n  * æ‰¿èªæ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ã«çµã‚‹ã«ã¯Hubs Cloud\n* \u003chttps://hubs.mozilla.com/docs/hubs-cloud-limiting-user-access.html\u003e\n  * you can create accounts for a list of emails or disable existing accounts\n  * Discord Bot OAuth ã‚‚ã‚ã‚‹ã‚‰ã—ã„\n\n## æ§‹æˆ\n\n\u003chttps://hubs.mozilla.com/docs/hubs-cloud-aws-architecture.html\u003e\n\n* EC2\n\n## ã‚³ã‚¹ãƒˆ\n\n* \u003chttps://hubs.mozilla.com/docs/hubs-cloud-aws-estimated-cost-charts.html\u003e\n  * ccu(concurrent users)ã«å¿œã˜ã¦ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—ã®ç›®å®‰æ±ºã¾ã‚‹\n* \u003chttps://hubs.mozilla.com/docs/hubs-cloud-aws-costs.html\u003e\n  * Personal vs Enterprise\n    * ã‚µãƒ¼ãƒãƒ¼ãŒ1å°ã®ã¿ã‹ã€1å°orè¤‡æ•°å°æ•°ãŒé¸ã¹ã‚‹ã‹ã®é•ã„\n    * multi serversã®å ´åˆã¯2 app x 2 streamã®4å°ãŒæ¨å¥¨\n* \u003chttps://hubs.mozilla.com/docs/hubs-cloud-aws-costs.html#minimize-your-costs---a-user-story\u003e\n  * æ™®æ®µã¯ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã«ã™ã‚‹\n  * database pausingã‚’ONã«ã™ã‚‹\n  * CDNã«Cloudflare workerã‚’ã¤ã‹ã†\n  * ã‚¤ãƒ™ãƒ³ãƒˆé–‹å§‹1.5Hå‰ã«ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã«ã™ã‚‹(èµ·å‹•ã«10åˆ†ãã‚‰ã„ã‹ã‹ã‚‹)ã€ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—ã‚’ä¸Šã’ã‚‹\n* \u003chttps://hubs.mozilla.com/docs/hubs-cloud-aws-costs.html#factors-creating-aws-cost-estimates\u003e\n  * AWS Server Type on AWS EC2 instances\n  * Number of servers\n  * Database usage (Aurora serverless)\n  * Storage for 3D assets for scenes and avatars (EFS)\n  * Data transfer costs (Cloudfront)\n  * Domain costs ($ 1 per domain/mo.) +  $0.40/mo for the database secrets\n* \u003chttps://hubs.mozilla.com/docs/hubs-cloud-aws-costs.html#offline-mode---manual\u003e\n  * offlineãƒ¢ãƒ¼ãƒ‰\n  * EC2ã¨DBã®ã‚³ã‚¹ãƒˆã¯ã‚¼ãƒ­ã«ãªã‚‹\n  * backupã¨dataã‚’ä¿ç®¡ã™ã‚‹ãŸã‚ã®Storageæ–™é‡‘ã®ã¿\n* \u003chttps://hubs.mozilla.com/docs/hubs-cloud-aws-estimated-ccu-limits.html\u003e\n  * æ¥ç¶šå¯èƒ½æ•°\n\n## ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º\n\n* \u003chttps://hubs.mozilla.com/docs/hubs-cloud-customizing-look-and-feel.html\u003e\n  * ä¼æ¥­ãƒ­ã‚´ã€ãƒ†ãƒ¼ãƒãªã©ã‚’è¨­å®šã§ãã‚‹\n\n## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—\n\n\u003chttps://hubs.mozilla.com/docs/hubs-cloud-getting-started.html\u003e\n\u003chttps://hubs.mozilla.com/docs/hubs-cloud-aws-quick-start.html\u003e\n\n### ãƒ‰ãƒ¡ã‚¤ãƒ³\n\n\u003chttps://hubs.mozilla.com/docs/hubs-cloud-aws-domain-recipes.html\u003e\n\n \u003e \n \u003e To make HC set up easier, we recommend setting up your domain's nameservers to point to AWS Route 53 as the hosting/DNS provider (AWS Route 53 Hosted Zones)\n\n* Route53ã§ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’2å€‹è²·ã†ã®ãŒä¸€ç•ªæ‰‹ã£å–ã‚Šæ—©ã„ã£ã½ã„ï¼Ÿ\n  \n  * \n     \u003e \n     \u003e we recommend setting up your domain's nameservers to point to AWS Route 53 as the hosting/DNS provider\n  \n  * nameserverã‚’Route53ã«è¨­å®šã™ã‚Œã°ã‚ˆã•ãã†\n* USING the domains already? Already hosting something and can't change nameservers? Then use Recipe 3 for deployment\n  \n  * Route53ä»¥å¤–ã§ã‚‚ä¸€å¿œã§ãã‚‹\n  * OR you have a SECOND LEVEL domain that is \".co.uk\" or \".com.fr\", there's a known bug that you need to follow the Recipe 3 for these domains.\n  * ã‚»ã‚«ãƒ³ãƒ‰ãƒ¬ãƒ™ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³ã§ä½¿ã„ãŸã‘ã‚Œã°å°‚ç”¨ã®æ‰‹é †ã¸\n* Recipe 1: Route53ã§ãƒ«ãƒ¼ãƒˆãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’æŒã£ã¦ã„ã‚‹å ´åˆ\n  \n  * `myhub.com` ã¾ãŸã¯ `hubs.myhub.com` ã‚’Hubsã«ä½¿ãˆã‚‹\n  * CFnãŒroot domain (myhub.com) ã®æ“ä½œã‚’ã™ã‚‹\n  * `myhub.com` ãŒã»ã‹ã®ç”¨é€”ã«ä½¿ã‚ã‚Œã¦ã„ãªã„\n  * `anothersubdomain.myhub.com` ãŒä»»æ„ã®ç”¨é€”ã«ä½¿ãˆã‚‹\n* Recipe 2: Route53ã«ãƒ«ãƒ¼ãƒˆãƒ‰ãƒ¡ã‚¤ãƒ³ãŒã™ã§ã«ã‚ã£ã¦ã€ã‚µãƒ–ãƒ‰ãƒ¡ã‚¤ãƒ³ä½¿ã†å ´åˆ\n  \n  * ã‚»ã‚«ãƒ³ãƒ‰ãƒ¬ãƒ™ãƒ«ãƒ‰ãƒ¡ã‚¤ãƒ³(.co.jp)ã®å ´åˆã¯ãƒã‚°ãŒã‚ã£ã¦ä½¿ãˆãªã„ã®ã§Recipe 3 ã¸\n  * mysite.com - Houses subdomain as Hub site domain name + the other sites or purposes at the root\n  * myhub.link - Short link domain name\n  * mysite-internal.com - Internal server domain. This can be any name you want, and will not be seen by users.\n* Recipe 3: Route53ã«ãƒ‰ãƒ¡ã‚¤ãƒ³ã‚’ä½œã‚Œãªã„å ´åˆ\n  \n  * mysite.com CAN NOT be set up on Route 53\n  * mysite.com connects to your hub OR hub.mysite.com connects to your hub\n  * myhub.link - Short link domain name\n  * mysite-internal.com - Internal server domain + email domain. This can be any name you want, and will not be seen by users.\n  * (optional) mysite-mail.com - Email domain, if using mysite-internal.com for emails is not what you want.\n\n## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—å¾Œ\n\n\u003chttps://hubs.mozilla.com/docs/hubs-cloud-aws-updating-the-stack.html\u003e\n\n* CloudFormationã‹ã‚‰stackã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ\n* ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ã«ã—ãŸã‚ŠDBã®auto-posingã‚’åˆ‡ã‚Šæ›¿ãˆãŸã‚Š\n\n## æ—¥æœ¬èªåŒ–\n\n\u003chttps://mitomemel.hatenablog.com/entry/2020/05/09/120007\u003e\n\u003chttps://hubs.mozilla.com/docs/hubs-cloud-custom-clients.html\u003e\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":[]},"/note/img%E3%82%BF%E3%82%B0%E3%81%A7%E7%94%BB%E5%83%8F%E3%81%8C404%E3%81%AE%E3%81%A8%E3%81%8D%E3%81%AB%E4%BB%A3%E6%9B%BF%E7%94%BB%E5%83%8F%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%99%E3%82%8B":{"title":"imgã‚¿ã‚°ã§ç”»åƒãŒ404ã®ã¨ãã«ä»£æ›¿ç”»åƒã‚’è¡¨ç¤ºã™ã‚‹","content":"\n[HTML img ã‚¿ã‚°ã§ç”»åƒãŒ 404 ã‚¨ãƒ©ãƒ¼ã®ã¨ãã«ä»£æ›¿ç”»åƒã‚’è¡¨ç¤ºã™ã‚‹æ–¹æ³• - to-me-mo-rrow - æœªæ¥ã®è‡ªåˆ†ã«æ®‹ã™ãƒ¡ãƒ¢ -](https://r17n.page/2019/11/23/html-alt-image-when-404-error-on-img-tag/)\n\n## TL;DR\n\n* `onerror=\"this.src = 'alt.png'; this.removeAttribute('onerror')\"` ã‚’æŒ‡å®š\n  * ã‚¨ãƒ©ãƒ¼æ™‚ã«ã¯ä»£æ›¿ç”»åƒã‚’èª­ã¿è¾¼ã‚“ã§ã€`onerror` å±æ€§è‡ªèº«ã‚‚å‰Šé™¤\n* `onload=\"this.removeAttribute('onerror'); this.removeAttribute('onload');` ã‚‚ä¸€ç·’ã«æŒ‡å®š\n  * ã‚¨ãƒ©ãƒ¼ç„¡ã—æ™‚ã« `onerror`, `onload` å±æ€§ã‚’æ¶ˆã›ã‚‹\n* ä¸Šè¨˜ã‚’ã¾ã¨ã‚ã‚‹ã¨ä»¥ä¸‹\n\n````html\n\u003cimg src=\"404.png\"  \n onerror=\"this.src='alt.png'; this.removeAttribute('onerror'); this.removeAttribute('onload');\"  \n onload=\"this.removeAttribute('onerror'); this.removeAttribute('onload');\"  \n\u003e\n````\n\nhttps://developer.mozilla.org/ja/docs/Web/HTML/Element/img#browser_compatibility\nonerrorã¯éæ¨å¥¨ãªã“ã¨ã«ç•™æ„ã™ã‚‹\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["frontend"]},"/note/jenkins":{"title":"Jenkins","content":"\nJavaè£½ã®CI/CDãƒ„ãƒ¼ãƒ«\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["2023/04/30","Jenkins"]},"/note/jenkins%E3%81%AE%E8%A6%8B%E3%81%9F%E7%9B%AE%E3%82%92%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%9E%E3%82%A4%E3%82%BA":{"title":"jenkinsã®è¦‹ãŸç›®ã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º","content":"\n[note/Jenkins](Jenkins.md) ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®è¦‹ãŸç›®ã¯å¤è‡­ã„ã®ã§ã€å¥½ããªãƒ†ãƒ¼ãƒã«å¤‰æ›´ã™ã‚‹ã€‚\nã¾ãŸã€ç’°å¢ƒã”ã¨ã®é•ã„ã‚’ã²ã¨ç›®ã§ã‚ã‹ã‚Šã‚„ã™ãã™ã‚‹ã“ã¨ã§äº‹æ•…ã‚’é˜²ãã€‚\n\n## jenkins-material-theme ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰\n\n\u003chttp://afonsof.com/jenkins-material-theme/\u003e\nã‹ã‚‰è‰²ã¨ãƒ­ã‚´ã‚’æŒ‡å®šã—ã¦ãƒ†ãƒ¼ãƒã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã€‚\n\n## ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’è¨­å®š\n\n\\[Jenkinsã®ç®¡ç†\\] -\u003e \\[ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ç®¡ç†\\] -\u003e \\[åˆ©ç”¨å¯èƒ½\\] -\u003e [Simple Theme Plugin](https://plugins.jenkins.io/simple-theme-plugin/) ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\nãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆjenkins-material-theme.cssï¼‰ã‚’ Jenkins ãƒ•ã‚©ãƒ«ãƒ€ã® userContent ãƒ•ã‚©ãƒ«ãƒ€ã¸é…ç½®ã™ã‚‹\n\n* Jenkinsã‚’ç½®ã„ã¦ã‚ã‚‹ã‚µãƒ¼ãƒã«SSHãƒ­ã‚°ã‚¤ãƒ³\n* /ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ«ãƒ¼ãƒˆ/userContent/jenkins-material-theme.css\n\nJenkinsã®ç®¡ç†ã®ã‚·ã‚¹ãƒ†ãƒ ã®è¨­å®šã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ†ãƒ¼ãƒã‚’æŒ‡å®šã™ã‚‹ã€‚\n\nURL of theme CSS: `/userContent/jenkins-material-theme.css`\n\n## material-theme ã‚’é©ç”¨ã—ãŸã¨ãã«ã€pipelineã‚¨ãƒ‡ã‚£ã‚¿ã§ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã¨å®Ÿéš›ã«ç·¨é›†ã•ã‚Œã‚‹ä½ç½®ãŒãšã‚Œã‚‹\n\n`:not(div.ace_editor)` ã« `font-family: Roboto, sans-serif!important` ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ãŸã‚ç­‰å¹…ãƒ•ã‚©ãƒ³ãƒˆã«ãªã£ã¦ã„ãªã„ã€‚\n\n[Main Script -- Replay -- the cursor in the editor is out of phase Â· Issue #184 Â· afonsof/jenkins-material-theme](https://github.com/afonsof/jenkins-material-theme/issues/184)\n\nç­‰å¹…ãƒ•ã‚©ãƒ³ãƒˆã‚’è¨­å®šã—ã¦ã‚ã’ã‚Œã°ã‚ˆã„ã€‚\nè‡ªåˆ†ã§ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã‚‹ã®ãŒåˆ©ç‚¹\n\n````css:jenkins-material-theme.css\n#main-panel\u003epre *,\n.ace_editor .ace_scroller .ace_content * {\n  font-family: Roboto Mono, monospace !important;\n}\n\ndiv.ace_editor.ace-tomorrow,\ndiv.ace_editor.ace-tomorrow * {\n  font: 12px/normal Roboto Mono, monospace !important;\n}\n````\n\n## å‚è€ƒ\n\n[Jenkinsã®ãƒ†ãƒ¼ãƒ(UI)ã‚’å¤‰ãˆã¦ã¿ãŸ | ãƒ¬ã‚³ãƒãƒ§ã‚¯ã®ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒ–ãƒ­ã‚°](https://techblog.recochoku.jp/2021)\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Jenkins"]},"/note/jenkins%E3%81%AEEC2Slave%E3%81%AE%E5%88%9D%E6%9C%9F%E5%8C%96":{"title":"jenkinsã®EC2Slaveã®åˆæœŸåŒ–","content":"\nJenkins EC2 ã¯ init scriptã®ä»–ã«User dataã§ã‚‚åˆæœŸåŒ–å‡¦ç†ã‚’ã‹ã‘ã‚‹\n\nã“ã†ã‹ãã¨ã€yum updateã•ã‚Œã‚‹\n\n````txt\n#cloud-config\ntimezone: \"Asia/Tokyo\"\nrepo_update: true\nrepo_upgrade: all\n````\n\nã“ã‚Œã¯ãã‚‚ãã‚‚Amazon EC2ã®æ©Ÿèƒ½ã§cloud initã«ã‚ˆã‚‹åˆæœŸå‡¦ç†ã‚’è¡Œã£ã¦ã„ã‚‹\n\n\u003chttps://docs.aws.amazon.com/ja_jp/AWSEC2/latest/UserGuide/user-data.html\u003e\n\u003chttps://aws.amazon.com/jp/premiumsupport/knowledge-center/execute-user-data-ec2/\u003e\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Jenkins"]},"/note/jenkins%E3%81%AEslave%E3%81%8B%E3%82%89ssh%E5%85%AC%E9%96%8B%E9%8D%B5%E8%AA%8D%E8%A8%BC%E3%81%8C%E3%81%86%E3%81%BE%E3%81%8F%E8%A1%8C%E3%81%8B%E3%81%AA%E3%81%8B%E3%81%A3%E3%81%9F":{"title":"jenkinsã®slaveã‹ã‚‰sshå…¬é–‹éµèªè¨¼ãŒã†ã¾ãè¡Œã‹ãªã‹ã£ãŸ","content":"\n# jenkins ssh\n\nè€ƒãˆã¦ã¿ãŸã‚‰å½“ãŸã‚Šå‰ã£ã¦æ„Ÿã˜ã ã‘ã©ã€Slaveã«éµã‚’ç½®ã„ã¦ã„ãªã„å ´åˆã€slaveã‹ã‚‰sshã™ã‚‹ã“ã¨ãŒã§ããªã„\n\n## è§£æ±ºæ–¹æ³•\n\n* èªè¨¼æƒ…å ±ã«Jenkinsã®sshéµã‚’è¨­å®š\n\n* ãƒ“ãƒ«ãƒ‰ã®è¨­å®šã§ã€ `ç§˜å¯†ãƒ†ã‚­ã‚¹ãƒˆã‚„ç§˜å¯†ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹` ã«ãƒã‚§ãƒƒã‚¯ã—ã¦è¨­å®š\n  \n  ````\n  SSH User Private Key\n                \n  Key File Variable: SSH_KEY\n  èªè¨¼æƒ…å ±: ä¸Šè¨˜ã§è¨­å®šã—ãŸèªè¨¼æƒ…å ±ã‚’é¸æŠ\n  ````\n\n* ã‚·ã‚§ãƒ«å®Ÿè¡Œæ™‚ã«éµãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŒ‡å®š\n  \n  ````\n  ssh -i ${SSH_KEY} -o StrictHostKeyChecking=no \u003cuser\u003e@\u003chost\u003e \u003csome command\u003e\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Jenkins"]},"/note/jenkins%E3%82%B5%E3%83%BC%E3%83%90%E3%83%BC%E3%81%ABbrew%E3%82%92%E5%85%A5%E3%82%8C%E3%81%9F%E3%81%8Cpath%E3%81%8C%E8%AA%8D%E8%AD%98%E3%81%95%E3%82%8C%E3%81%AA%E3%81%84":{"title":"jenkinsã‚µãƒ¼ãƒãƒ¼ã«brewã‚’å…¥ã‚ŒãŸãŒpathãŒèªè­˜ã•ã‚Œãªã„","content":"\n## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒˆ\n\n### PATHãŒèªè­˜ã•ã‚Œãªã„\n\nJenkinsã®ç®¡ç† -\u003e ã‚·ã‚¹ãƒ†ãƒ ã®è¨­å®š -\u003e ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«PATHã‚’è¨­å®šã—ã¦ã‚‚ã†ã¾ãè¨­å®šã•ã‚Œãªã„\n\n````\nã‚­ãƒ¼: PATH\nå€¤: /usr/local/bin:$PATH\n````\n\nã§ã¯ãªã\n\n````\nã‚­ãƒ¼: PATH+EXTRA\nå€¤: /usr/local/bin\n````\n\nã¨ã™ã‚‹ã€‚EXTRAã®éƒ¨åˆ†ã¯ãªã‚“ã§ã‚‚ã„ã„ã¿ãŸã„\n\n\u003chttps://ikesyo.hatenablog.com/entry/2018/03/27/191317\u003e\n\u003chttps://issues.jenkins.io/browse/JENKINS-41339\u003e\n\n### linuxbrewã§å…¥ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè¡Œã§ããªã„\n\nä¸‹è¨˜ã®é€šã‚Šå…¥ã‚ŒãŸãŒpathãŒé€šã£ã¦ã„ãªã„\n\n````\nã‚­ãƒ¼: PATH+EXTRA\nå€¤: /home/linuxbrew/.linuxbrew/bin:/home/linuxbrew/.linuxbrew/sbin\n````\n\njenkinsã‚¸ãƒ§ãƒ–ã§å®Ÿè¡Œ\n\n````bash\necho $PATH\n# =\u003e `/home/linuxbrew/.linuxbrew/bin:/home/linuxbrew/.linuxbrew/sbin:/sbin:/bin:/usr/sbin:/usr/bin`\n````\n\n````bash\nls -al /home\ntotal 0\ndrwxr-xr-x  3 root     root      22 Dec 16  2019 .\ndr-xr-xr-x 18 root     root     257 Dec 16  2019 ..\ndrwx------  5 ec2-user ec2-user 196 Dec  9 13:12 ec2-user\n````\n\nssh ã§jenkinsãƒ¦ãƒ¼ã‚¶ãƒ¼ã§ãƒ­ã‚°ã‚¤ãƒ³ã™ã‚‹ã¨è¦‹ãˆã‚‹ãŒã‚¸ãƒ§ãƒ–ã‹ã‚‰ã¯è¦‹ãˆãªã„\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Jenkins"]},"/note/jenkins-JobDSL%E3%81%A7closure%E5%86%85%E3%81%8B%E3%82%89function%E3%82%92%E5%91%BC%E3%81%B6":{"title":"jenkins JobDSLã§closureå†…ã‹ã‚‰functionã‚’å‘¼ã¶","content":"\n[Jenkins Job DSL Plugin](note/Jenkins%20Job%20DSL%20Plugin.md) ã§ã„ã„æ„Ÿã˜ã«æ›¸ããŸã‚ã®ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯\n\nç´ ç›´ã«æ›¸ã„ãŸå ´åˆã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãã‚Œãã‚Œã«ã‚¸ãƒ§ãƒ–ã®å®šç¾©ã‚’æ›¸ãã“ã¨ã«ãªã‚‹ãŒã€å…±é€šåŒ–ã—ãŸã„éƒ¨åˆ†ãŒå‡ºã¦ãã‚‹ã“ã¨ãŒã‚ã‚‹ã€‚\n\n````groovy\nCREDENTIAL_ID = 'secret_key'\nREPO_URL = 'https://example.com/repo.git'\n\npipelineJob(\"build-A\") {\n  parameters {\n    choiceParam(\"STAGE\", [\"stage1\", \"stage2\"], \"\")\n  }\n\n  description('ãƒ“ãƒ«ãƒ‰ã—ã¾ã™')\n  logRotator {\n    numToKeep(5)\n  }\n  definition {\n    cpsScm {\n      scm {\n        git {\n          remote {\n            url(REPO_URL)\n            credentials(CREDENTIAL_ID)\n          }\n        }\n      }\n      lightweight(true)\n      scriptPath(jenkinsfilePath)\n    }\n  }\n}\n\npipelineJob(\"build-B\") {\n  parameters {\n    choiceParam(\"ENV\", [\"dev1\", \"dev2\"], \"\")\n  }\n\n  // â†“ã“ã“ã‹ã‚‰åŒã˜è¨˜è¿°ãªã®ã§å…±é€šåŒ–ã—ãŸã„\n  description('ãƒ“ãƒ«ãƒ‰ã—ã¾ã™')\n  logRotator {\n    numToKeep(5)\n  }\n  definition {\n    cpsScm {\n      scm {\n        git {\n          remote {\n            url(REPO_URL)\n            credentials(CREDENTIAL_ID)\n          }\n        }\n      }\n      lightweight(true)\n      scriptPath(jenkinsfilePath)\n    }\n  }\n}\n\n````\n\n### æœ€åˆã«ã‚„ã£ãŸã“ã¨\n\nå˜ç´”ã«ãƒ¡ã‚½ãƒƒãƒ‰ã«æŠœãå‡ºã—ãŸ\n\n````groovy\nCREDENTIAL_ID = 'secret_key'\nREPO_URL = 'https://example.com/repo.git'\n\ndef pipelineTemplate(def context, String jenkinsfilePath) {\n  description('ãƒ“ãƒ«ãƒ‰ã—ã¾ã™')\n  logRotator {\n    numToKeep(5)\n  }\n  definition {\n    cpsScm {\n      scm {\n        git {\n          remote {\n            url(REPO_URL)\n            credentials(CREDENTIAL_ID)\n          }\n        }\n      }\n      lightweight(true)\n      scriptPath(jenkinsfilePath)\n    }\n  }\n}\n\npipelineJob(\"build-A\") {\n  parameters {\n    choiceParam(\"STAGE\", [\"stage1\", \"stage2\"], \"\")\n  }\n\n  pipelineTemplate('A/Jenkinsfile')\n}\n\npipelineJob(\"build-B\") {\n  parameters {\n    choiceParam(\"ENV\", [\"dev1\", \"dev2\"], \"\")\n  }\n  pipelineTemplate(delegate, 'B/Jenkinsfile')\n}\n\n\n````\n\nã“ã‚Œã§å®Ÿè¡Œã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã‚¸ãƒ§ãƒ–ãŒä½œã‚‰ã‚Œãªã„\n\n`ERROR: (script, line 8) No signature of method: script.description() is applicable for argument types: (java.lang.String) values: [ãƒ“ãƒ«ãƒ‰ã—ã¾ã™]`\n\ndescriptionã‚„logRotatorãªã©ã¯pipelineJobã®ä¸­ã§ã—ã‹ä½¿ãˆãªã„methodãªã®ã§ã€pipelineJobã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã™å¿…è¦ãŒã‚ã£ãŸã€‚\n\nhttps://stackoverflow.com/questions/27931795/how-to-refactor-common-jenkins-jobdsl-code\nhttps://stackoverflow.com/questions/6305910/how-do-i-create-and-access-the-global-variables-in-groovy\n\n### å‹•ãã‚ˆã†ã«ã—ãŸã‚‚ã®\n\n````groovy\nCREDENTIAL_ID = 'secret_key'\nREPO_URL = 'https://example.com/repo.git'\n\ndef pipelineTemplate(def context, String jenkinsfilePath) {\n  // context.method ã®å½¢å¼ã§å‘¼ã¶\n  context.description('ãƒ“ãƒ«ãƒ‰ã—ã¾ã™')\n  context.logRotator {\n    numToKeep(5)\n  }\n  context.definition {\n    cpsScm {\n      scm {\n        git {\n          remote {\n            url(REPO_URL)\n            credentials(CREDENTIAL_ID)\n          }\n        }\n      }\n      lightweight(true)\n      scriptPath(jenkinsfilePath)\n    }\n  }\n}\n\npipelineJob(\"build-A\") {\n  parameters {\n    choiceParam(\"STAGE\", [\"stage1\", \"stage2\"], \"\")\n  }\n\n  pipelineTemplate(delegate, 'A/Jenkinsfile')\n}\n\npipelineJob(\"build-B\") {\n  parameters {\n    choiceParam(\"ENV\", [\"dev1\", \"dev2\"], \"\")\n  }\n  pipelineTemplate(delegate, 'B/Jenkinsfile')\n}\n````\n\nmethodã®å¼•æ•°ã«context(åå‰ã¯ä½•ã§ã‚‚ã„ã„)ã‚’è¿½åŠ ã—ã¦ã€å‘¼ã³å‡ºã—å…ƒã§closureã®delegateãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æ¸¡ã™ã“ã¨ã§closureå†…ã®ãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã—ãŸã€‚\ndelegateã¯Groovyã®closureã®ä¸­ã§ä½¿ãˆã‚‹ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§thisã®ã‚ˆã†ãªã‚‚ã®\nhttp://docs.groovy-lang.org/latest/html/gapi/groovy/lang/Closure.html#getDelegate()\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Groovy","Jenkins"]},"/note/jq":{"title":"jq","content":"\n## vimã§jqã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã„ã‚„ã™ãã™ã‚‹\n\n````vimscript\n\" jq command\ncommand! -nargs=? Jq call s:Jq(\u003cf-args\u003e)\nfunction! s:Jq(...)\n    if 0 == a:0\n        let l:arg = \".\"\n    else\n        let l:arg = a:1\n    endif\n    execute \"%! jq \" . l:arg\nendfunction\n````\n\n## é…åˆ—ã®é•·ã•ã‚’èª¿ã¹ã‚‹\n\n````shell\njq '.array[] | length'\n````\n\n## é…åˆ—ã«ç‰¹å®šã®ã‚­ãƒ¼ã‚’å«ã¾ãªã„ã‚‚ã®ã‚’æ¤œç´¢ã™ã‚‹\n\n\u003chttps://stackoverflow.com/questions/70369094/jq-output-is-empty-when-tag-name-does-not-exist\u003e\n\næ¬¡ã®ã‚ˆã†ãªAWS CLIã®å‡ºåŠ›ã«ã¤ã„ã¦è€ƒãˆã‚‹\n\n````json\n{\n  \"Reservations\": [\n    {\n      \"Instances\": [\n        {\n          \"PrivateIpAddress\": \"10.0.0.1\",\n          \"Tags\": [\n            {\n              \"Key\": \"Name\",\n              \"Value\": \"Balance-OTA-SS_a\"\n            },\n            {\n              \"Key\": \"Environment\",\n              \"Value\": \"alpha\"\n            }\n          ]\n        }\n      ]\n    },\n    {\n      \"Instances\": [\n        {\n          \"PrivateIpAddress\": \"10.0.0.2\",\n          \"Tags\": [\n            {\n              \"Key\": \"Name\",\n              \"Value\": \"Balance-OTA-SS_a\"\n            }\n          ]\n        }\n      ]\n    }\n  ]\n}\n````\n\n````shell\njq '.Reservations[].Instances[] | ({IP: .PrivateIpAddress, Ambiente: (.Tags[]|select(.Key==\"Environment\")|.Value)})'\n````\n\nã¨ã™ã‚‹ã¨ã€Tagsã«Environmentã‚’å«ã‚€ã‚‚ã®ã®ã¿å‡ºåŠ›ã•ã‚Œã‚‹ã€‚\nã“ã‚Œã‚’ã€Environmentã‚’å«ã¾ãªã„ã‚‚ã®ã¯nullã¨ã—ã¦å‡ºåŠ›ã—ãŸã„ã¨ãã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ã™ã‚‹\n\n````shell\njq '.Reservations[].Instances[] | { IP: .PrivateIpAddress, Ambiente: (.Tags|from_entries.Environment) }'\n\n# ã¾ãŸã¯\njq '.Reservations[].Instances[] | { IP: .PrivateIpAddress, Ambiente: ((.Tags[] | select(.Key == \"Environment\") | .Value) // null) }'\n````\n\n`//` ã«ã¤ã„ã¦ã¯ã“ã¡ã‚‰ã«æ›¸ã„ã¦ã‚ã‚‹\n\u003chttps://stedolan.github.io/jq/manual/#ConditionalsandComparisons\u003e\n\n## ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—å‡¦ç†æ¸ˆã¿ã®JSONæ–‡å­—åˆ—ã‚’ä½œæˆã™ã‚‹\n\n[jqã‚’åˆ©ç”¨ã—ã¦ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—å‡¦ç†æ¸ˆã¿ã®JSONæ–‡å­—åˆ—ã‚’ä½œæˆã™ã‚‹æ–¹æ³• | DevelopersIO](https://dev.classmethod.jp/articles/how-to-create-an-escaped-json-string-using-jq/)\n\n`jq '@json'`\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["jq","shell","json"]},"/note/jq%E3%81%AE%E3%82%AF%E3%82%A8%E3%83%AA%E5%86%85%E3%81%A7shell%E5%A4%89%E6%95%B0%E3%82%92%E4%BD%BF%E3%81%86":{"title":"jqã®ã‚¯ã‚¨ãƒªå†…ã§shellå¤‰æ•°ã‚’ä½¿ã†","content":"\næ–‡å­—åˆ—çµåˆã§å¤‰æ•°ã‚’åŸ‹ã‚è¾¼ã‚€æ–¹æ³•ãŒã¾ã£ã•ãã«æ€ã„ã¤ã\n\n````shell\n$ name=\"bob\"\n$ cat sample.json | jq '.content | select( .name == '$name' )'\n````\n\nã‚ˆã‚Šã‚¹ãƒãƒ¼ãƒˆãªã‚„ã‚Šæ–¹ãŒjqã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã‚ã‚‹\n\n## `--arg` ã‚’ä½¿ç”¨ã™ã‚‹\n\n[jq Manual (development version)](https://stedolan.github.io/jq/manual/#Invokingjq)\n\n````shell\n$ name_var=\"bob\"\n$ cat sample.json | jq --arg name $name_var '.content | select( .body == $name )'\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["2023/01/04","jq","shell"]},"/note/jq%E3%81%AE%E9%85%8D%E5%88%97%E3%81%A7%E3%83%AB%E3%83%BC%E3%83%97%E5%87%A6%E7%90%86%E3%82%92%E3%81%99%E3%82%8B":{"title":"jqã®é…åˆ—ã§ãƒ«ãƒ¼ãƒ—å‡¦ç†ã‚’ã™ã‚‹","content":"\n\n````json\n[\n  {\n    \"name\": \"John\",\n    \"age\": 20\n  },\n  {\n    \"name\": \"Alice\",\n    \"age\": 25\n  },\n  {\n    \"name\": \"Bob\",\n    \"age\": 14\n  }\n]\n````\n\n## `length`Â ã‚’ä½¿ã£ã¦ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹\n\n````bash\njson=$(cat list.json)\nlen=$(echo $json | jq length)\nfor i in $( seq 0 $(($len - 1)) ); do\n  row=$(echo $json | jq .[$i])\ndone\n\n````\n\nã‚ˆãã€in ã®æ¬¡ã«jqã‚³ãƒãƒ³ãƒ‰ã‚’æ›¸ãä¾‹ã‚’è¦‹ã‹ã‘ã‚‹ãŒã€ã“ã‚Œã¯è‰¯ããªã„\n\n````shell\nfor item in $(jq -c '.[]' list.json); do\n  name=$(echo \"$item\" | jq -r '.name')\n  age=$(echo \"$item\" | jq -r '.age')\n  echo \"name: $name, age: $age\"\ndone\n````\n\nä½•åº¦ã‚‚jqã‚’å‘¼ã³å‡ºã™ã®ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒè‰¯ããªã„\n\n## `while read -r` ã‚’ä½¿ã†\n\n[è©³ç´°è§£èª¬ jqã‚³ãƒãƒ³ãƒ‰ã¨ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®æ­£ã—ã„ä½¿ã„æ–¹ã¨è€ƒãˆæ–¹ ã€œ ãƒ‡ãƒ¼ã‚¿ã®æµã‚Œã‚’åˆ¶ã™ã‚‹UNIXå“²å­¦æµã‚·ã‚§ãƒ«ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚° - Qiita](https://qiita.com/ko1nksm/items/55a86f95fdf790f863cc)\n\n````shell\nTAB=$(printf '\\t')\njq -r '.[] | [.name, .age, .count] | @tsv' list.json | {\n  while IFS=\"$TAB\" read -r name age; do\n    printf \"name: %-10s age: %2d\\n\" \"$name\" \"$age\"\n  done\n}\n````\n\n### whileæ–‡ã®ä¸­ã§å¤‰æ•°ã‚’æ›´æ–°ã—ãŸã„å ´åˆ\n\nãƒ‘ã‚¤ãƒ—ã§æ¸¡ã™ã¨å¤‰æ•°ãŒæ›´æ–°ã•ã‚Œãªã„ã®ã§æ³¨æ„\n\\[\\[shellã§while readã®ä¸­ã§å¤‰æ•°ã‚’å¤‰æ›´ã—ã¦ã‚‚åæ˜ ã•ã‚Œãªã„\\]\n\n````shell\n$ TAB=$(printf '\\t')\n$ children=0\n$ while IFS=\"$TAB\" read -r name age; do\n  printf \"name: %-10s age: %2d\\n\" \"$name\" \"$age\"\n  if [[ $age -lt 18 ]]; then\n    children=$((children+1))\n  fi\ndone \u003c \u003c(jq -r '.[] | [.name, .age] | @tsv' list.json)\n$ echo $children\n1\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["2023/01/04","jq","shell"]},"/note/kibana-%E6%95%B0%E5%80%A4%E3%81%A7%E3%83%95%E3%82%A3%E3%83%AB%E3%82%BF%E3%83%BC%E3%81%99%E3%82%8B":{"title":"kibana æ•°å€¤ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã™ã‚‹","content":"\nhttps://stackoverflow.com/questions/40241904/kibana-filter-on-count-greater-than-or-equal-to-x\n\nX Axisã®JSON inputã« `{\"min_doc_count\": 1000}` ã‚’æŒ‡å®šã™ã‚‹\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["ç›£è¦–"]},"/note/kibana-%E6%AD%A3%E8%A6%8F%E8%A1%A8%E7%8F%BE%E3%81%A7%E3%82%AF%E3%82%A8%E3%83%AA%E3%82%92%E6%9B%B8%E3%81%8F":{"title":"kibana æ­£è¦è¡¨ç¾ã§ã‚¯ã‚¨ãƒªã‚’æ›¸ã","content":"\nKibanaã¯Elasticsearchã®è¨˜æ³•ã§ã‚¯ã‚¨ãƒªã‚’æ›¸ãã®ã§ã€ã“ã¡ã‚‰ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’å‚ç…§ã™ã‚‹\n\n[Regexp query | Elasticsearch Guide \\[8.4\\] | Elastic](https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-regexp-query.html)\n\n````json\n{\n  \"query\": {\n    \"regexp\": {\n      \"user.id\": {\n        \"value\": \"k.*y\",\n        \"flags\": \"ALL\",\n        \"case_insensitive\": true,\n        \"max_determinized_states\": 10000,\n        \"rewrite\": \"constant_score\"\n      }\n    }\n  }\n}\n````\n\næ­£è¦è¡¨ç¾ã§ä½¿ãˆã‚‹syntaxã«ã¤ã„ã¦ã¯ã“ã¡ã‚‰\n\n[Regular expression syntax | Elasticsearch Guide \\[8.4\\] | Elastic](https://www.elastic.co/guide/en/elasticsearch/reference/current/regexp-syntax.html)\n\n### å¦å®šå…ˆèª­ã¿(negative lookahead)\n\nã€Œ~ã‚’å«ã¾ãªã„ã€ã§æ¤œç´¢ã—ãŸã„ã¨ãå½¹ã«ç«‹ã¤\n\n`flags` ã‚’ `COMPLEMENT` ã‹ `ALL` ã«ã™ã‚‹ã¨æœ‰åŠ¹ã«ãªã‚‹\n\n* `a~bc` =\u003e a(bä»¥å¤–)c ã«ãƒãƒƒãƒã™ã‚‹ (abcã«ã¯ãƒãƒƒãƒã—ãªã„ã€aacã‚„a1cã«ã¯ãƒãƒƒãƒã™ã‚‹)\n* `~(.*(foo|bar).*)` =\u003e foo,barã‚’å«ã¾ãªã„æ–‡å­—åˆ—ã«ãƒãƒƒãƒã™ã‚‹\n\nhttps://stackoverflow.com/questions/38645755/negative-lookahead-regex-on-elasticsearch\n\n### ç©é›†åˆ(INTERSECTION)\n\n`\u0026` ãŒ AND operator ã¨ã—ã¦ä½¿ãˆã‚‹\n\n* `aaa.+\u0026.+bbb` =\u003e 'aaabbb' ã«ãƒãƒƒãƒã™ã‚‹\n* `.*night.*\u0026~(.*-(fox|wolf).*)` =\u003e (night ã‚’å«ã‚€) ã‹ã¤ (-fox ã¾ãŸã¯ -wolf ã‚’å«ã¾ãªã„)\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":[]},"/note/ktlint":{"title":"ktlint","content":"\n# ktlint\n\n[Kotlin](note/Kotlin.md) ã§lintã‚’è¨­å®šã™ã‚‹\n\n\u003chttps://github.com/pinterest/ktlint\u003e\n\n.editorconfig ã‚’ç½®ãã¨ãã¡ã‚‰ã®è¨­å®šãŒå„ªå…ˆã•ã‚Œã‚‹\n\nãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã«å¾“ã†ã“ã¨ã«ã—ãŸ\n\n## Gradle(kts)\n\n[ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãªã—ã§è¨­å®šã™ã‚‹å ´åˆ](https://github.com/pinterest/ktlint#without-a-plugin)\n\né¢å€’ã ã£ãŸã®ã§ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ä½¿ã£ãŸ\n\n\u003chttps://github.com/jlleitschuh/ktlint-gradle\u003e\n\nbuild.gradle.kts\n\n````kts\nplugins {\n  id \"org.jlleitschuh.gradle.ktlint\" version \"\u003ccurrent_version\u003e\"\n}\n````\n\n````sh\n$ ./gradlew ktlintCheck\n=\u003e linterã‚’å®Ÿè¡Œ\n\n$ ./gradlew ktlintFormat\n=\u003e ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’ã‹ã‘ã¦ä¿å­˜\n````\n\n### Intellij IDEAã®å ´åˆ\n\nIDEAã«Kotlinã®code styleç­‰ã‚’è¨­å®šã™ã‚‹ã‚¿ã‚¹ã‚¯ã‚’è¿½åŠ ã—ã¦ãã‚Œã‚‹ã€‚ç´ æ•µ\n\n````kts\nplugins {\n  id(\"org.jlleitschuh.gradle.ktlint-idea\") version \"\u003ccurrent_version\u003e\"\n}\n````\n\n````sh\n./gradlew ktlintApplyToIdea\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Kotlin","linter"]},"/note/kube-prometheus-stack-%E3%81%AECRD%E3%81%8CToo-long%E3%81%A7%E4%BD%9C%E3%82%89%E3%82%8C%E3%81%AA%E3%81%84":{"title":"kube-prometheus-stack ã®CRDãŒToo longã§ä½œã‚‰ã‚Œãªã„","content":"\nArgo CD v2.5ã‹ã‚‰ã¯ã€server side applyã‚’æœ‰åŠ¹ã«ã™ã‚‹ã¨Â `Too long: must have at most 262144 bytes`Â ãŒè§£æ¶ˆã•ã‚Œã‚‹ã€‚å°†æ¥çš„ã«ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãŒserver side applyã«ãªã‚‹ã¨ã„ã†ã“ã¨ã‚‰ã—ã„\nkube-prometheus-stackã«ã¯ã“ã¡ã‚‰ã¤ã‘ã¦ãŠãã¨ã„ã„\n[https://www.arthurkoziel.com/fixing-argocd-crd-too-long-error/](https://www.arthurkoziel.com/fixing-argocd-crd-too-long-error/)\n\nhttps://github.com/prometheus-community/helm-charts/issues/579\n\nã—ã‹ã—ServerSideApply=trueã«ã—ã¦syncã—ãŸã¨ã“ã‚ã‚¨ãƒ©ãƒ¼ãŒã§ãŸ(server side applyã¯é–¢ä¿‚ãªã„ã‚ˆã†ãªæ°—ãŒã™ã‚‹ã€ãŸã¾ãŸã¾ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ã¯)\n`Prometheus.monitoring.coreos.com \"monitoring-prometheus\" is invalid: spec.shards: Invalid value: \"null\": spec.shards in body must be of type integer: \"null\"`\n\nhttps://github.com/prometheus-community/helm-charts/issues/579 ã§nullã‚’æŒ‡å®šã™ã‚‹ã¨ã„ã„ã£ã¦ã„ã†ã®ãŒåæ˜ ã•ã‚Œã¦ã„ãŸã€‚\nãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã® `shards: 1` ã§ã‚‚nullã®ã¨ãã¨å¤‰ã‚ã‚‰ãªã„ã‚ˆã†ãªã®ã§ã€nullæŒ‡å®šã‚’æ¶ˆã—ãŸ\nhttps://github.com/prometheus-community/prometheus-operator/blob/f20fd9c4e6912ab63497648032ca2aa6684923a2/pkg/prometheus/statefulset.go#L82\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["2023/03/09","Kubernetes","Prometheus"]},"/note/kubectl":{"title":"kubectl","content":"\n[Kubernetes](note/Kubernetes.md) å‘ã‘ã®ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ãƒ„ãƒ¼ãƒ«\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["2023/05/04","Kubernetes"]},"/note/kubernetes%E3%82%AF%E3%83%A9%E3%82%B9%E3%82%BF%E5%86%85%E3%81%AB%E3%83%97%E3%83%A9%E3%82%A4%E3%83%99%E3%83%BC%E3%83%88docker%E3%83%AC%E3%82%B8%E3%82%B9%E3%83%88%E3%83%AA%E3%82%92%E4%BD%9C%E3%82%8B":{"title":"kubernetesã‚¯ãƒ©ã‚¹ã‚¿å†…ã«ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆdockerãƒ¬ã‚¸ã‚¹ãƒˆãƒªã‚’ä½œã‚‹","content":"\nã‚µãƒ³ãƒ—ãƒ«ã ã¨ã‚ˆãECRã‚„GCRã«ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã‚ˆã†ã«è¨€ã‚ã‚Œã‚‹ãŒã€ã¨ã‚Šã‚ãˆãšãƒ­ãƒ¼ã‚«ãƒ«ã§ç¢ºèªã—ãŸã„ã¨ãã«ã€Kubernetesã‚¯ãƒ©ã‚¹ã‚¿å†…ã«dockerãƒ¬ã‚¸ã‚¹ãƒˆãƒªã‚’ä½œã‚‹æ–¹æ³•ã«ã¤ã„ã¦èª¿ã¹ãŸã€‚\n\n## registryã‚’ä½œæˆ\n\n[Using a Local Registry with Minikube](https://gist.github.com/trisberg/37c97b6cc53def9a3e38be6143786589)\n\nhttps://hub.docker.com/\\_/registry ã‚’ä½¿ã†\n\ndocker-registry.yaml\n\n````yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: docker-registry\n  labels:\n    app: docker-registry\nspec:\n  replicas: 1\n  selector:\n    matchLabels:\n      app: docker-registry\n  template:\n    metadata:\n      labels:\n        app: docker-registry\n    spec:\n      containers:\n      - name: docker-registry\n        image: registry:2.8\n        ports:\n        - containerPort: 5000\n        volumeMounts:\n        - name: registry\n          mountPath: /var/lib/registry\n      volumes:\n      - name: registry\n        hostPath:\n          type: Directory\n          path: /tmp/.registry/storage\n---\nkind: Service\napiVersion: v1\nmetadata:\n  name: docker-registry\nspec:\n  ports:\n  - name: \"http-port\"\n    protocol: TCP\n    port: 5000\n    targetPort: 5000\n  selector:\n    app: docker-registry\n````\n\n````shell\n$ kubectl apply -f docker-registry.yaml\n````\n\n### ç¢ºèª\n\né©å½“ãªpodã‚’ä½œã£ã¦ã€ç–é€šç¢ºèª\n\npod-nginx.yaml\n\n````yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: nginx\nspec:\n  containers:\n  - name: nginx\n    image: nginx\n````\n\n````shell\n$ kubectl apply -f pod-nginx.yaml\n$ kubectl exec nginx -it -- bash\nroot@nginx:/# curl docker-registry:5000/v2/_catalog\n{\"repositories\":[\"v2/my_app\"]}\n````\n\n## kanikoã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å…ˆã‚’æŒ‡å®š\n\nhttps://github.com/GoogleContainerTools/kaniko\n\n````yaml\napiVersion: v1\nkind: Pod\nmetadata:\n  name: kaniko\nspec:\n  containers:\n    - name: kaniko\n      image: gcr.io/kaniko-project/executor:latest\n      args:\n        - \"--insecure\"\n        - \"--dockerfile=\u003cpath to Dockerfile within the build context\u003e\"\n        - \"--context=\u003cpath to Dockerfile context dir\u003e\"\n        - \"--destination=docker-registry:5000/myapp:version\"\n````\n\n````shell\n$ kubectl apply -f kaniko.yaml\n````\n\n### `http: server gave HTTP response to HTTPS client` ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸ\n\nhttps://github.com/GoogleContainerTools/kaniko#flag---insecure\n\nkaniko å®Ÿè¡Œæ™‚ã« `--insecure` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ã¤ã‘ã‚‹\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["2023/01/04","Docker","Kubernetes"]},"/note/kubernetes%E5%91%A8%E8%BE%BA%E3%81%AE%E4%BE%BF%E5%88%A9%E3%83%84%E3%83%BC%E3%83%AB":{"title":"kuberneteså‘¨è¾ºã®ä¾¿åˆ©ãƒ„ãƒ¼ãƒ«","content":"\n[ãƒ¯ã‚¤ãŒãŠä¸–è©±ã«ãªã£ã¦ã„ã‚‹Kubernetesé–¢é€£ã®ãƒ„ãƒ¼ãƒ«é” - å®ˆã‚ŠãŸã„ã€ã“ã®ç¡çœ æ™‚é–“](https://tomioka-shogorila.hatenablog.com/entry/2020/03/10/230206)\n[Kubernetesã‚’ä½¿ã†ä¸Šã§çŸ¥ã£ã¦ãŠããŸã„ãƒ„ãƒ¼ãƒ«ã‚„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³](https://zenn.dev/tmrekk/articles/580f2e2bb39d5f)o\n[kubectlã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³æ©Ÿæ§‹ã¨ãŠã™ã™ã‚ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã”ç´¹ä»‹ ã€œ Kubernetesåˆ¶å¾¡ç”¨ã‚³ãƒãƒ³ãƒ‰ \\#k8sjp - Yahoo! JAPAN Tech Blog](https://techblog.yahoo.co.jp/entry/2020081830014718/)\n\n## [Krew](note/Kubernetes%20Krew.md)\n\nhttps://github.com/kubernetes-sigs/krew/\n\nkubectlç”¨ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ç®¡ç†\n\nã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯ã“ã¡ã‚‰\nhttps://krew.sigs.k8s.io/docs/user-guide/setup/install/\nã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã¯è‡ªèº«\n\n````shell\nkubectl krew update\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Kubernetes"]},"/note/kubernetes-EBS%E3%82%92%E3%82%A2%E3%82%BF%E3%83%83%E3%83%81%E3%81%99%E3%82%8B":{"title":"kubernetes EBSã‚’ã‚¢ã‚¿ãƒƒãƒã™ã‚‹","content":"\nCSI driverã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹\n\nCSI ... Common Storage Interface\nk8sãŒå¤–éƒ¨ã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚’ä½¿ã†ã¨ãã®è¦æ ¼\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Kubernetes"]},"/note/kubernetes-external-secrets":{"title":"kubernetes external secrets","content":"\n\\#Kubernetes\n\n[AWS Secrets Managerã‚’ä½¿ç”¨ã—ãŸKubernetes Secretç®¡ç† | BTC Cloud](https://cloud.bigtreetc.com/column/eks-secrets/)\n\n[External Secretsã‚’è©¦ã—ã¦ã¿ã‚‹ - TECHSTEP](https://techstep.hatenablog.com/entry/2020/12/19/002142)\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Kubernetes"]},"/note/kubernetes-resources%E3%81%AE%E8%A8%AD%E5%AE%9A%E5%80%A4%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6-Kubernetes":{"title":"kubernetes resourcesã®è¨­å®šå€¤ã«ã¤ã„ã¦ Kubernetes","content":"\n\u003chttps://kubernetes.io/docs/concepts/configuration/manage-resources-containers/\u003e\n[Kubernetes ã®ãƒªã‚½ãƒ¼ã‚¹åˆ¶é™ã¨ãã®æŒ™å‹•ç¢ºèª - YasuBlog](https://dunkshoot.hatenablog.com/entry/kubernetes_manage_resource)\n\n* requestsã« `memory: 256MiB` ã‚’è¨­å®šã™ã‚‹ã¨256MiBä»¥ä¸Šç©ºããŒã‚ã‚‹Nodeã«ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã•ã‚Œã¦ã€256MiBä»¥ä¸Šä½¿ç”¨ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹\n* limitsã« `memory: 4GiB` ã‚’è¨­å®šã™ã‚‹ã¨ã€4GiBä»¥ä¸Šã®ãƒ¡ãƒ¢ãƒªã‚’åˆ©ç”¨ã—ã‚ˆã†ã¨ã™ã‚‹ã¨OOM Killerã«ã‚ˆã‚ŠPodãŒè½ã¨ã•ã‚Œã‚‹\n* resourcesã®requestsã«æŒ‡å®šã•ã‚ŒãŸmemory,cpuã®å€¤ã‚’å…ƒã«ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å…ˆã®Nodeã‚’é¸æŠã™ã‚‹\n\n## limits\n\nlimitsã®å€¤ã‚’è¶…ãˆãŸå ´åˆã®æŒ™å‹•ã«ã¤ã„ã¦\n\n* memoryã‚’è¶…ãˆãŸå ´åˆ: OOM Killerã«ã‚ˆã‚ŠPodãŒå¼·åˆ¶çµ‚äº†\n* cpuã‚’è¶…ãˆãŸå ´åˆ: å¼·åˆ¶çµ‚äº†ã¯ã—ãªã„ãŒCPUé€Ÿåº¦ãŒé…ããªã‚‹\n\nlimits ã¯Nodeã®allocatableãªãƒªã‚½ãƒ¼ã‚¹é‡ã‚’è¶…ãˆã¦æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\n\n## ã‚ªãƒ¼ãƒãƒ¼ã‚³ãƒŸãƒƒãƒˆ\n\nã‚ªãƒ¼ãƒãƒ¼ã‚³ãƒŸãƒƒãƒˆã¯ã€ã‚³ãƒ³ãƒ†ãƒŠã® limits ã®åˆè¨ˆã‚’ Node ã®å‰²å½“å¯èƒ½ãƒªã‚½ãƒ¼ã‚¹é‡ã‚ˆã‚Šå¤§ããã™ã‚‹ã“ã¨\nä¾‹ãˆã°ãƒ¡ãƒ¢ãƒª2GBã®Nodeã«ã¯ã€requests 0.5GB, limits 1GB ã® Pod ã‚’4å€‹èµ·å‹•ã§ãã‚‹ã€‚limits ã®åˆè¨ˆã¯ 4GB ã¨ãªã‚Šã‚ªãƒ¼ãƒãƒ¼ã‚³ãƒŸãƒƒãƒˆã®çŠ¶æ…‹ã ãŒã€Pod ãŒå¸¸ã«æœ€å¤§å€¤ä½¿ã†ã‚ã‘ã§ã¯ãªã„å ´åˆã«ã¯è¨±å®¹ã§ãã‚‹ã€‚\nè² è·ãŒé«˜ã¾ã£ã¦å…¨PodãŒlimitsãã‚Šãã‚Šã¾ã§ãƒªã‚½ãƒ¼ã‚¹ã‚’ä½¿ã†ã‚ˆã†ã«ãªã‚‹ã¨ã€Nodeã®å‰²å½“å¯èƒ½ãƒªã‚½ãƒ¼ã‚¹ã‚’è¶…éã—ã¦ã—ã¾ã†ã€‚\nã“ã†ãªã‚‹ã¨ã€Eviction Managerã«ã‚ˆã‚Šã‚‚ã£ã¨ã‚‚requestsã‚’è¶…éã—ã¦ãƒªã‚½ãƒ¼ã‚¹ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹PodãŒEvictã•ã‚Œã‚‹ã€‚\n\nã‚ªãƒ¼ãƒãƒ¼ã‚³ãƒŸãƒƒãƒˆã•ã›ã‚‹ã¨Podã®é›†ç´„ç‡ã¯ä¸ŠãŒã‚‹ãŒPodã®ç¨¼åƒç‡ã¯ä¸‹ãŒã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚\né€†ã«requestsã¨limitsã‚’è¿‘ã¥ã‘ã™ãã‚‹ã¨ã€Podã®é›†ç´„ç‡ã¯ä¸‹ãŒã£ã¦ãƒªã‚½ãƒ¼ã‚¹åŠ¹ç‡ã¯æ‚ªããªã‚‹ãŒç¨¼åƒã¯å®‰å®šã™ã‚‹ã€‚\n\n## CPU\n\n2 vCPUã®EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®CPUã‚’ãƒ•ãƒ«ã§ä½¿ã„ãŸã„å ´åˆã¯ `cpu: 2` ã¨è¨˜è¼‰ã™ã‚‹ã€‚\n1 vCPUåˆ†ã®ãƒªã‚½ãƒ¼ã‚¹ã®å ´åˆã¯ `cpu: 1` ã¾ãŸã¯ `cpu: 1000m` ã¨æ›¸ãã€‚\n(1 CPU = 1000m)\n\n## ãƒ¡ãƒ¢ãƒª\n\nãƒã‚¤ãƒˆå˜ä½ã§æ›¸ã(1024000, 1Giã€256Mãªã©)\n\n## Prometheusã§Podã®CPUã€ãƒ¡ãƒ¢ãƒªä½¿ç”¨ç‡ã‚’ç¢ºèªã™ã‚‹\n\nkubectl topã‚³ãƒãƒ³ãƒ‰ã§ã‚‚ã§ãã‚‹ãŒPrometheusã®å ´åˆ\n\n[K8s Monitor Pod CPU and memory usage with Prometheus | by Kim Wuestkamp | ITNEXT](https://itnext.io/k8s-monitor-pod-cpu-and-memory-usage-with-prometheus-28eec6d84729)\n\n### CPU\n\n````\n# container usage\nrate(container_cpu_usage_seconds_total{pod=~\"compute-.*\", image!=\"\", container_name!=\"POD\"}[5m])\n\n# container requests\navg(kube_pod_container_resource_requests_cpu_cores{pod=~\"compute-.*\"})\n\n# container limits\navg(kube_pod_container_resource_limits_cpu_cores{pod=~\"compute-.*\"})\n\n# throttling\nrate(container_cpu_cfs_throttled_seconds_total{pod=~\"compute-.*\", container_name!=\"POD\", image!=\"\"}[5m])\n````\n\n### Memory\n\n````\n# container usage\ncontainer_memory_working_set_bytes{pod_name=~\"compute-.*\", image!=\"\", container_name!=\"POD\"}\n\n# container requests\navg(kube_pod_container_resource_requests_memory_bytes{pod=~\"compute-.*\"})\n\n# container limits\navg(kube_pod_container_resource_limits_memory_bytes{pod=~\"compute-.*\"})\n````\n\n[How to display Kubernetes request and limit in Grafana / Prometheus properly](https://gist.github.com/max-rocket-internet/6a05ee757b6587668a1de8a5c177728b)\n\n````\nsum(rate(container_cpu_usage_seconds_total{pod=~\"jenkins-agent-.*\", image!=\"\", container!=\"POD\"}[5m])) by (pod, container, namespace) / sum(kube_pod_container_resource_requests{resource=\"cpu\", unit=\"core\", pod=~\"jenkins-agent-.*\", container!=\"POD\"}) by (pod, container, namespace)\nsum(rate(container_cpu_usage_seconds_total{pod=~\"jenkins-agent-.*\", image!=\"\", container!=\"POD\"}[5m])) by (pod, container) / sum(container_spec_cpu_quota{pod=~\"jenkins-agent-.*\", image!=\"\", container!=\"POD\"}/container_spec_cpu_period{pod=~\"jenkins-agent-.*\", image!=\"\", container!=\"POD\"}) by (pod, container)\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["2023/01/23","Kubernetes"]},"/note/kustomize-build%E3%81%99%E3%82%8B%E3%81%A8%E3%81%8D%E4%B8%80%E9%83%A8%E3%81%AEoverlays%E3%81%AE%E3%81%A8%E3%81%8D%E3%81%A0%E3%81%91base%E3%81%AE%E3%83%AA%E3%82%BD%E3%83%BC%E3%82%B9%E3%82%92%E5%89%8A%E9%99%A4%E3%81%97%E3%81%9F%E3%81%84":{"title":"kustomize buildã™ã‚‹ã¨ãã€ä¸€éƒ¨ã®overlaysã®ã¨ãã ã‘baseã®ãƒªã‚½ãƒ¼ã‚¹ã‚’å‰Šé™¤ã—ãŸã„","content":"\n[ã€kustomizeã€‘ç‰¹å®šã®ç’°å¢ƒã ã‘baseã®ãƒªã‚½ãƒ¼ã‚¹ã‚’å‰Šé™¤ã™ã‚‹ | amateur engineer's blog](https://amateur-engineer-blog.com/remove-resouce-kustomize-base/)\n\nbaseã®apiVersionã¨ä¸€éƒ¨ç’°å¢ƒã ã‘ç•°ãªã‚‹ã¨ã„ã†å ´åˆã«å¿…è¦ã¨ãªã‚‹\n\nbase/hpa.yaml\n\n````yaml\napiVersion: autoscaling/v1\nkind: HorizontalPodAutoscaler\n````\n\noverlays/stg/hpa.yaml\n\n````yaml\napiVersion: autoscaling/v2beta1\nkind: HorizontalPodAutoscaler\n````\n\nã“ã‚Œã§kustomize build ã™ã‚‹ã¨ã€v1ã¨v2beta1ä¸¡æ–¹ãŒä½œã‚‰ã‚Œã¦ã—ã¾ã†ã€‚\n\n````yaml\n---\napiVersion: autoscaling/v1\nkind: HorizontalPodAutoscaler\n---\napiVersion: autoscaling/v2beta1\nkind: HorizontalPodAutoscaler\n````\n\nã“ã‚Œã‚’å›é¿ã™ã‚‹ãŸã‚ã€ `patch: $delete` ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã™ã‚‹\n\n`delete-hpa-v1.yaml`\n\n````yaml\n$patch: delete \napiVersion: autoscaling/v1\nkind: HorizontalPodAutoscaler\n````\n\n`base/kustomization.yaml`\n\n````yaml\napiVersion: kustomize.config.k8s.io/v1beta1\nkind: Kustomization\n\nresources:\n- deployment.yaml\n- hpa.yaml\n````\n\n`overlays/stg/kustomization.yaml`\n\n````yaml\napiVersion: kustomize.config.k8s.io/v1beta1\nkind: Kustomization\nnamespace: app-stg\n\nresources:\n- ./../../base\n\npatchesStrategicMerge:\n  - delete-hpa-v1.yaml\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["2023/02/27","Kubernetes"]},"/note/localstack":{"title":"localstack","content":"\nhttps://github.com/localstack/localstack\nhttps://localstack.cloud/\n\n[localstack](note/localstack.md) ã¯ã€ã‚¯ãƒ©ã‚¦ãƒ‰ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’é–‹ç™ºã™ã‚‹ãŸã‚ã®mockã‚’æä¾›ã™ã‚‹ãƒ„ãƒ¼ãƒ«ã€‚\nãƒ­ãƒ¼ã‚«ãƒ«ã«AWSã¨åŒæ§˜ã®æ©Ÿèƒ½ã¨APIã‚’æä¾›ã™ã‚‹ç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹ã€‚\næœ€åˆã®é–‹ç™ºå…ƒã¯Atlassian\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["AWS"]},"/note/localstack%E3%81%A7S3%E3%82%92mock%E3%81%99%E3%82%8B":{"title":"localstackã§S3ã‚’mockã™ã‚‹","content":"\n[localstack](note/localstack.md) ã‚’ä½¿ã£ã¦ [S3](note/S3.md) ã‚’ãƒ¢ãƒƒã‚¯ã§ãã‚‹\n\n## æ§‹ç¯‰\n\n````yml:docker-compose.yml\nversion: \"3.8\"\n\nservices:\n  localstack:\n    container_name: \"${LOCALSTACK_DOCKER_NAME-localstack_main}\"\n    image: localstack/localstack\n    network_mode: bridge\n    ports:\n      - \"127.0.0.1:53:53\"\n      - \"127.0.0.1:53:53/udp\"\n      - \"127.0.0.1:443:443\"\n      - \"127.0.0.1:4566:4566\"\n      - \"127.0.0.1:4571:4571\"\n    environment:\n      - SERVICES=s3\n      - DEBUG=${DEBUG- }\n      - DATA_DIR=/tmp/localstack/data\n      - DOCKER_HOST=unix:///var/run/docker.sock\n      - DEFAULT_REGION=ap-northeast-1\n    volumes:\n      - \"./work:/tmp/localstack\"\n      - \"/var/run/docker.sock:/var/run/docker.sock\"\n````\n\n````shell\ndocker-compose up -d\n````\n\n## localstackç”¨ã®ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã™ã‚‹\n\n````shell\n$ aws configure --profile localstack-push\nAWS Access Key ID [****************ummy]: dummy\nAWS Secret Access Key [****************ummy]: dummy\nDefault region name [ap-northeast-1]: ap-northeast-1\nDefault output format [json]: json\n````\n\n## localstackã®S3ã«ãƒã‚±ãƒƒãƒˆã‚’ä½œæˆã™ã‚‹\n\n````shell\n$ aws --profile localstack-push --endpoint-url=http://localhost:4566 s3 mb s3://sample-bucket\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["AWS","unittest"]},"/note/localstack%E3%81%A8sam%E3%82%92%E9%80%A3%E6%90%BA":{"title":"localstackã¨samã‚’é€£æº","content":"\n\\#AWS #sam\n\n## äº‹è±¡\n\n[SAM](note/SAM.md) ã‚³ãƒãƒ³ãƒ‰ã§å®Ÿè¡Œã—ãŸLambdaã‹ã‚‰ã€ [localstack](note/localstack.md) ã§ç«‹ã¦ãŸS3ã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„\n\n## TL;DR\n\nmacã®å ´åˆã€Lambdaã‹ã‚‰æ¥ç¶šã™ã‚‹hostã‚’ `localstack` ã§ã¯ãªã `host.docker.internal` ã«ã™ã‚‹\n\n\u003chttps://github.com/localstack/localstack/issues/878\u003e\n\n## å®Ÿè£…\n\n````yml:docker-compose.yml\nversion: \"3.8\"\n\nservices:\n  localstack:\n    container_name: \"${LOCALSTACK_DOCKER_NAME-localstack_main}\"\n    image: localstack/localstack\n    network_mode: bridge\n    ports:\n      - \"127.0.0.1:53:53\"\n      - \"127.0.0.1:53:53/udp\"\n      - \"127.0.0.1:443:443\"\n      - \"127.0.0.1:4566:4566\"\n      - \"127.0.0.1:4571:4571\"\n    environment:\n      - SERVICES=s3\n      - DEBUG=${DEBUG- }\n      - DATA_DIR=/tmp/localstack/data\n      - DOCKER_HOST=unix:///var/run/docker.sock\n      - DEFAULT_REGION=ap-northeast-1\n    volumes:\n      - \"./work:/tmp/localstack\"\n      - \"/var/run/docker.sock:/var/run/docker.sock\"\n````\n\n````go:main.go\npackage main\n\nimport (\n\t\"context\"\n\t\"io/ioutil\"\n\n\t\"github.com/aws/aws-lambda-go/events\"\n\t\"github.com/aws/aws-lambda-go/lambda\"\n\t\"github.com/aws/aws-sdk-go-v2/aws\"\n\t\"github.com/aws/aws-sdk-go-v2/config\"\n\t\"github.com/aws/aws-sdk-go-v2/credentials\"\n\t\"github.com/aws/aws-sdk-go-v2/service/s3\"\n)\n\nfunc handler(event events.CloudWatchEvent) (string, error) {\n\tcfg, _ := config.LoadDefaultConfig(context.TODO(),\n\t\tconfig.WithCredentialsProvider(credentials.NewStaticCredentialsProvider(\"dummy\", \"dummy\", \"dummy\")),\n\t)\n\n    // localstack S3ã®URL\n    er := awsS3.EndpointResolverFromURL(\"http://host.docker.internal:4566\")\n\tclient := s3.NewFromConfig(cfg,\n\t\ts3.WithEndpointResolver(er),\n        // localstack S3ã®å ´åˆã€virtual hostã§ã®ã‚¢ã‚¯ã‚»ã‚¹ãŒã§ããªã„ãŸã‚path styleã‚’ä½¿ã†\n\t\tfunc(o *s3.Options) {\n\t\t\to.UsePathStyle = true\n\t\t},\n\t)\n\n\tinput := \u0026s3.GetObjectInput{\n\t\tBucket: aws.String(\"sample-bucket\"),\n\t\tKey:    aws.String(\"path/to/file\"),\n\t}\n\n\toutput, err := client.GetObject(context.TODO(), input)\n\tif err != nil {\n\t\treturn \"\", err\n\t}\n\n\tdefer output.Body.Close()\n\tb, err := ioutil.ReadAll(output.Body)\n\tif err != nil {\n\t\treturn \"\", err\n\t}\n\treturn string(b), nil\n}\n\nfunc main() {\n\tlambda.Start(handler)\n}\n````\n\n## å‚è€ƒ\n\n[AWS SAM CLI ã¨ localstack ã‚’åˆ©ç”¨ã—ã¦ Lambda ã‚’ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œã—ã¦ã¿ã‚ˆã†](https://bsblog.casareal.co.jp/archives/5571)\n[AWS SAM Local ã¨ LocalStack ã‚’ä½¿ã£ã¦ ãƒ­ãƒ¼ã‚«ãƒ«ã§AWS Lambdaã®ã‚³ãƒ¼ãƒ‰ã‚’å‹•ã‹ã™ | DevelopersIO](https://dev.classmethod.jp/articles/sam-local-with-localstack/)\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["AWS","sam"]},"/note/lodash%E3%82%92%E4%BD%BF%E3%81%84%E3%81%9F%E3%81%8F%E3%81%AA%E3%81%84%E3%81%A7%E3%81%94%E3%81%96%E3%82%8B":{"title":"lodashã‚’ä½¿ã„ãŸããªã„ã§ã”ã–ã‚‹","content":"\n\\#JavaScript\n\n[lodash ã‚„ã‚æ–¹ - Qiita](https://qiita.com/mizchi/items/af17f45d5653b76f6751)\n\nã ã„ãŸã„ã¯ES6æ¨™æº–ã®æ›¸ãæ–¹ã§æ›¸ã‘ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ãŒã€ã©ã†ã—ã¦ã‚‚lodashã®é–¢æ•°ã‚’ä½¿ã„ãŸã„ã¨ããŒã‚ã‚‹ã€‚\nãã‚“ãªã¨ãã¯ https://github.com/angus-c/just/ ã‚’ä½¿ã£ã¦ã¿ã¦ã‚‚ã„ã„ã‹ã‚‚ã—ã‚Œãªã„ã€‚\n\n[lodashã®ä»£ã‚ã‚Šã«justã‚’ä½¿ã†](https://zenn.dev/terrierscript/articles/2020-11-26-lodash-just)\n\n* ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯`just-***`ã¨ã„ã†åå‰ã§å˜é–¢æ•°ãŒç‹¬ç«‹ã—ã¦ã„ã‚‹ã€‚å¿…è¦ãªã‚‚ã®ã ã‘ä½¿ãˆã‚‹\n* zero-dependencyãªä½œã‚Šã€‚\n* æ¯”è¼ƒçš„ç°¡ç´ ã«ä½œã‚‰ã‚Œã¦ã„ã‚‹ã®ã§è‡ªå‰å®Ÿè£…ã«å‚è€ƒã«ã—ã‚„ã™ã„\n\nã‚ã‚‹ã„ã¯ã€lodashè‡ªèº«ãŒå€‹åˆ¥ã«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åŒ–ã—ã¦ãã‚Œã¦ã„ã‚‹ã®ã§ãã‚Œã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‚‚ã„ã„ã‹ã‚‚\n\nä¾‹: https://www.npmjs.com/package/lodash.debounce\n\n````shell\nnpm i \n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["JavaScript"]},"/note/lombok%E4%BD%BF%E7%94%A8%E6%99%82%E3%81%ABmaven-compile%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%AB%E3%81%AA%E3%82%8B":{"title":"lombokä½¿ç”¨æ™‚ã«maven compileã‚¨ãƒ©ãƒ¼ã«ãªã‚‹","content":"\nlombokä½¿ç”¨æ™‚ã«maven compileã‚¨ãƒ©ãƒ¼ã«ãªã‚‹\n\n````sh\n$ mvn compile\n\n...\n\nCaused by: java.lang.ClassNotFoundException: com.sun.tools.javac.code.TypeTags\n    at java.lang.ClassLoader.findClass (ClassLoader.java:719)\n    at java.lang.ClassLoader.loadClass (ClassLoader.java:589)\n    at lombok.launch.ShadowClassLoader.loadClass (ShadowClassLoader.java:422)\n    at java.lang.ClassLoader.loadClass (ClassLoader.java:522)\n    at java.lang.Class.forName0 (Native Method)\n    at java.lang.Class.forName (Class.java:377)\n    at lombok.javac.JavacTreeMaker$SchroedingerType.getFieldCached (JavacTreeMaker.java:156)\n    at lombok.javac.JavacTreeMaker$TypeTag.typeTag (JavacTreeMaker.java:245)\n    at lombok.javac.Javac.\u003cclinit\u003e (Javac.java:155)\n\n````\n\n* lombok: 1.16.20\n* jdk: 1.8\n\nbrewã§openjdkãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã¦ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤‰ã‚ã£ã¦ã„ãŸ\nãªã«ã‹ã«ä¾å­˜ã—ã¦å…¥ã£ã¦ã„ãŸæ¨¡æ§˜\n\n````\n$ mvn --version\nApache Maven 3.8.1 (05c21c65bdfed0f71a2f2ada8b84da59348c4c5d)\nMaven home: /usr/local/Cellar/maven/3.8.1/libexec\nJava version: 15.0.2, vendor: N/A, runtime: /usr/local/Cellar/openjdk/15.0.2/libexec/openjdk.jdk/Contents/Home\n````\n\n[java.lang.ClassNotFoundException: com.sun.tools.javac.code.TypeTags Â· Issue #1651 Â· projectlombok/lombok](https://github.com/projectlombok/lombok/issues/1651)\n\nlombok 1.16.22 ã§è§£æ¶ˆã—ã¦ã„ã‚‹æ¨¡æ§˜\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":[]},"/note/mac%E3%81%A7at%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%82%92%E4%BD%BF%E3%81%86":{"title":"macã§atã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†","content":"\n\\#shell\n\n[Macã§atã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè¡Œã§ããªã„ã¨ãã®å¯¾å‡¦æ³• - Qiita](https://qiita.com/shge/items/6c43947a77abd9d2d1b2)\n\n````shell\nsudo launchctl load -w /System/Library/LaunchDaemons/com.apple.atrun.plist\n````\n\n`/usr/libexec/atrun` ã«ãƒ•ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ã‚¢ã‚¯ã‚»ã‚¹ã‚’ã¤ã‘ã‚‹\n\n## ã‚³ãƒãƒ³ãƒ‰ã®ä½¿ã„æ–¹\n\n[atã‚³ãƒãƒ³ãƒ‰ã«ã¤ã„ã¦è©³ã—ãã¾ã¨ã‚ã¾ã—ãŸ ã€Linuxã‚³ãƒãƒ³ãƒ‰é›†ã€‘](https://eng-entrance.com/linux-command-at)\n\n````shell\n$ at 11:00\n\u003e echo \"hello from at\" \u003e ~/work/at.log\n[Ctrl+D]\n````\n\n* `-t [YYYY]MMDDHHmm[.SS]`: æ™‚åˆ»æŒ‡å®šã®æ›¸å¼ã‚’è¥¿æš¦4æ¡ã€æœˆ2æ¡ã€æ—¥2æ¡ã€æ™‚2æ¡ã€åˆ†2æ¡ã®æ›¸å¼ã§å…¥åŠ›ã§ãã‚‹\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["shell"]},"/note/maven%E3%81%A7spring%E3%81%AE%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89%E6%99%82%E3%81%AB%E3%82%A8%E3%83%A9%E3%83%BC":{"title":"mavenã§springã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰æ™‚ã«ã‚¨ãƒ©ãƒ¼","content":"\nspring-libs-release ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã‚ˆã†ã¨ã™ã‚‹ã‚‚ã€ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹\nhttps://repo.spring.io/libs-release ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãªãã‚ƒãªã‚‰ãªã„ã¨ã“ã‚ã€\nhttp://repo.springsource.org/libs-release/\nã‹ã‚‰å–å¾—ã—ã‚ˆã†ã¨ã—ã¦ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã‚¨ãƒ©ãƒ¼ã«ãªã£ã¦ã„ã‚‹\n524 Origin timeout\n\nã‚„ã£ãŸã“ã¨\n~/.m2/repository/org/springframework ã‚’å‰Šé™¤ã—ãŸã¨ã“ã‚ mvn package ãŒã™ãçµ‚ã‚ã£ãŸ\næœ€åˆã€1ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã ã‘ã‚’æ¶ˆã—ãŸãŒãã‚Œã ã¨æ„å‘³ãªã„\n\nrepositories ã«\n\n````\n                \u003crepository\u003e\n                        \u003cid\u003espring\u003c/id\u003e\n                        \u003cname\u003espring\u003c/name\u003e\n                        \u003curl\u003ehttps://repo.spring.io/libs-release/\u003c/url\u003e\n                \u003c/repository\u003e\n````\n\nã‚’æ›¸ã„ã¦ã¿ãŸã‚Šã—ãŸãŒã€æœ€åˆã®metadataã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãŒã†ã¾ãã„ããŒãã®å¾Œå¤±æ•—ã™ã‚‹ã®ã§æ„å‘³ãªã‹ã£ãŸ\nä¸€åº¦æ¶ˆã—ã¦å†ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã¨ãã«ã¯centralã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸ\n\nhttpsã§ã‚¢ã‚¯ã‚»ã‚¹ã•ã›ãŸã„ã®ã«ãã‚Œã‚’è¨­å®šã™ã‚‹æ–¹æ³•ãŒãªã„ã¿ãŸã„\n\nåŸå› \nmvn ãŒ spring-libs-release ã¨ã„ã†idã®repositoryã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã‚ˆã†ã¨ã™ã‚‹ã€‚\nã“ã‚ŒãŒã©ã“ã§è¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ã‚ã‹ã‚‰ãªã„ã€è¨­å®šã—ãŸã‚‚ã®ã§ã¯ãªã„ã®ã§ãŠãã‚‰ãspringã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®pomã«ã‹ã‹ã‚Œã¦ã„ã‚‹ã€‚\nå¤ã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«æ›¸ã‹ã‚Œã¦ã„ã‚‹ã‚“ã˜ã‚ƒãªã„ã‹ã€‚ç¢ºã‹ã‚ã‚‹å‰ã«å‰Šé™¤ã—ã¦ã—ã¾ã£ãŸã®ã§ã‚ã‹ã‚‰ãªã„ãŒ\n\nsettings.xmlã«timeoutã‚’æ›¸ã„ã¦ãŠãã®ã‚‚ã‚ã‚Šã ã¨æ€ã†\nã„ãã‚‰èª¿ã¹ã¦ã‚‚å›°ã£ã¦ã„ã‚‹äººãŒã„ãªãã¦é€†ã«å›°ã£ãŸã€‚ã“ã‚“ãªã®ãƒ¡ã‚¸ãƒ£ãƒ¼ãªå•é¡Œã£ã½ã„ã‘ã©ãª\n\nã“ã†ã„ã†ã®ã‚‚è¦‹ã¤ã‘ãŸã€‚repoã®URLãŒä¸€éƒ¨ä½¿ãˆãªããªã‚‹ã‚ˆ ã“ã‚Œã«å¼•ã£ã‹ã‹ã£ãŸã®ã§ã¯\nhttps://spring.io/blog/2020/10/29/notice-of-permissions-changes-to-repo-spring-io-fall-and-winter-2020\n\nçµè«–\nä¸€åº¦ ~/.m2/repostitory ã‚’æ¶ˆã™ã®ãŒæœ€å¼·\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["spring","Java"]},"/note/maven%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA%E3%81%8C%E7%AA%81%E7%84%B6%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%8F%E3%81%AA%E3%81%A3%E3%81%9F":{"title":"mavenãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒçªç„¶ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ããªããªã£ãŸ","content":"\ninhouse repositoryã«ç™»éŒ²ã—ãŸã‚‚ã®ãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ããªããªã£ãŸ\n\n## ã‚„ã£ãŸã“ã¨\n\n### ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚¯ãƒªã‚¢\n\n````shell\nrm -rf ~/.m2/repository/path/to/library\n````\n\n=\u003e å†ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã¯å‹•ããŒã•ã‚Œãªã„\n\n### ç›´æ¥s3ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰\n\ninhouse repoãŒs3ã«ã‚ã‚‹ãŸã‚ã€s3ã‚³ãƒãƒ³ãƒ‰ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹\n\n````shell\naws s3 cp s3://inhouse-repo/path/to/library/library.jar\n````\n\n=\u003e 403ã‚¨ãƒ©ãƒ¼ã§å–å¾—ã§ããšã€‚ä»–ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ã“ã®ã‚³ãƒãƒ³ãƒ‰ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã§ããŸã®ã§ã€ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ™‚ã«æ¨©é™è¨­å®šã‚’ãƒŸã‚¹ã£ãŸã‹ï¼Ÿ\n\n## è§£æ±º\n\nã“ã“ã¾ã§èª¿ã¹ãŸã¨ã“ã‚ã§ã€æ™‚é–“ãŒãŸã£ãŸã‚ã¨ã«å†åº¦ãƒ“ãƒ«ãƒ‰ã—ãŸã‚‰ãªãœã‹è§£æ±ºã—ãŸâ€¦\nãªã«ã‹è£ã§ã‚„ã£ã¦ãã‚Œã¦ã‚‹ã®ã‹ãª\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":[]},"/note/mvnd%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6maven%E3%83%93%E3%83%AB%E3%83%89%E3%82%92%E9%AB%98%E9%80%9F%E5%8C%96":{"title":"mvndã‚’ä½¿ã£ã¦mavenãƒ“ãƒ«ãƒ‰ã‚’é«˜é€ŸåŒ–","content":"\n\\#Java \n\nhttps://github.com/apache/maven-mvnd\n\n \u003e \n \u003e This project aims at providing faster Maven builds using techniques known from Gradle and Takari\n\nGradleã®ã‚ˆã†ã«deamonã‚’ç«‹ã¦ã‚‹ã“ã¨ã§ãƒ“ãƒ«ãƒ‰ã‚’é«˜é€ŸåŒ–ã™ã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€‚\n\n### Java 8 ã§ã¯å‹•ã‹ãªã„\n\nhttps://github.com/apache/maven-mvnd/issues/547\n\njdk \u003e= 11 ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\n\n### M1 Macã§ã¯å‹•ã‹ãªã„\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":[]},"/note/neovim0.5.0%E3%81%AB%E3%81%97%E3%81%9F%E3%82%89undo%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%8C%E5%A3%8A%E3%82%8C%E3%81%9F":{"title":"neovim0.5.0ã«ã—ãŸã‚‰undoãƒ•ã‚¡ã‚¤ãƒ«ãŒå£Šã‚ŒãŸ","content":"\nbrewã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹Neovimã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒ0.5.0ã«ãªã£ãŸã€‚\n\nãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ãã¨ã€ `E824: Incompatible undo file: /path/to/undo` ã¨ã„ã†ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒå‡ºã‚‹ã‚ˆã†ã«ãªã£ã¦ã€éå»ã«ã•ã‹ã®ã¼ã£ã¦ã®undoãŒã§ããªããªã£ãŸ\n\n## å¯¾å¿œ\n\nhttps://www.reddit.com/r/neovim/comments/lxu7p3/error_incompatible_undo_file_whenever_i_open_a/\n\n[Vim](note/Vim.md) ã‚„0.5.0ã‚ˆã‚Šå‰ã®[Neovim](note/Neovim.md) ã¨ã®äº’æ›æ€§ãŒãªããªã£ãŸãŸã‚ã€è«¦ã‚ã‚‹ã—ã‹ç„¡ã„\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["vim"]},"/note/nvim-treesitter":{"title":"nvim-treesitter","content":"\n[nvim-treesitter/nvim-treesitter: Nvim Treesitter configurations and abstraction layer](https://github.com/nvim-treesitter/nvim-treesitter)\n\n[Neovim](note/Neovim.md) ã§tree-sitterã‚’ä½¿ã£ã¦ãƒ†ã‚­ã‚¹ãƒˆã®æ§‹æ–‡è§£æã‚„ãƒã‚¤ãƒ©ã‚¤ãƒˆãªã©ã®æ©Ÿèƒ½ã‚’å®Ÿç¾ã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³\n\n[tree-sitterã«ã¤ã„ã¦](https://tree-sitter.github.io/tree-sitter/)\n\n \u003e \n \u003e Tree-sitter is a parser generator tool and an incremental parsing library. It can build a concrete syntax tree for a source file and efficiently update the syntax tree as the source file is edited. Tree-sitter aims to be:\n \u003e \n \u003e General enough to parse any programming language\n \u003e Fast enough to parse on every keystroke in a text editor\n \u003e Robust enough to provide useful results even in the presence of syntax errors\n \u003e Dependency-free so that the runtime library (which is written in pure C) can be embedded in any application\n\nã•ã¾ã–ã¾ãªãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èªã‚„ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã®æ§‹æ–‡è§£æã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¦ã€ç‹¬è‡ªã«è¿½åŠ ã™ã‚‹ã“ã¨ã‚‚ã§ãã¾ã™ã€‚\n\n* ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚„ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ§‹æ–‡è§£æã—ã€æŠ½è±¡æ§‹æ–‡æœ¨ï¼ˆASTï¼‰ã‚’ç”Ÿæˆã—ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€ã‚³ãƒ¼ãƒ‰ã®æ§‹é€ ã‚„æ„å‘³ã‚’ç†è§£ã—ã€ä»–ã®æ©Ÿèƒ½ã‚’å®Ÿç¾ã™ã‚‹åŸºç›¤ã¨ãªã‚Šã¾ã™ã€‚\n* æ§‹æ–‡è§£æã®çµæœã‚’ä½¿ç”¨ã—ã¦ã€ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’è¡Œã„ã¾ã™\n* [ãƒ‘ãƒ¼ã‚µãƒ¼ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™](https://github.com/nvim-treesitter/nvim-treesitter#adding-parsers)\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Neovim"]},"/note/powerline":{"title":"powerline","content":"\n# powerline\n\n* powerlineã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n  \n  * pipã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹\n  * \u003chttps://powerline.readthedocs.io/en/master/installation.html#pip-installation\u003e\n* font\n  \n  * powerlineå¯¾å¿œã®ãƒ•ã‚©ãƒ³ãƒˆã§ãªã„ã¨ã†ã¾ãè¡¨ç¤ºã•ã‚Œãªã„\n  * Nerd fonts, Cicaãªã©\n* tmux\n  \n  * æ¬¡ã®ã‚ˆã†ã«ã™ã‚‹\n  \u003c!----\u003e\n  \n````\n  run-shell \"powerline-daemon -q\"\n  source-file \"path/to/powerline/bindings/tmux/powerline.conf\"\n  ````\n\n## problem\n\n### tmux + fishã§ç¾åœ¨ã®ãƒ‘ã‚¹ã‚’paneã«è¡¨ç¤ºã§ããªã„\n\n[fishãƒ—ãƒ©ã‚°ã‚¤ãƒ³](note/fishãƒ—ãƒ©ã‚°ã‚¤ãƒ³.md)\n\n* tmuxå®Ÿè¡Œæ™‚ã®pathãŒè¡¨ç¤ºã•ã‚Œã¦ã—ã¾ã†\n* \u003chttps://github.com/tmux/tmux/issues/1889\u003e\n  * è§£æ±ºã—ã¦ãªã„\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["terminal"]},"/note/pver_with_cobra":{"title":"pver_with_cobra","content":"\n# pver_with_cobra\n\n* cobra init\n* cobra add\n* newé–¢æ•°ã§ã‚³ãƒãƒ³ãƒ‰ã‚’åˆæœŸåŒ–\n  * DIã®ãŸã‚ã¨æ€ã£ã¦ãã†ã—ãŸã‘ã©ã€å¾Œã§root.goå†…ã§åˆæœŸåŒ–ã™ã‚‹ã‚ˆã†ã«ã—ãŸã®ã§å¿…è¦ãªã‹ã£ãŸ\n  * rootã‚³ãƒãƒ³ãƒ‰ã¯ãƒ†ã‚¹ãƒˆã—ã¥ã‚‰ããªã‚‹ãŒã€rootã«ã¯æ©Ÿèƒ½ã‚‚ãŸã›ãªã„ã®ãŒã‚ˆã•ãã†\n* testã‚’è¿½åŠ \n  * `cmd.SetOut` ã§bufferã«å‡ºåŠ›ã•ã›ã‚‹\n* cmdãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯å…¥å‡ºåŠ›ã€serviceãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã€infraãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯API,DBã¿ãŸã„ã«ã‚ã‘ãŸ\n  * ãƒ†ã‚¹ãƒˆã¯æ›¸ãã‚„ã™ããªã£ãŸæ°—ãŒã™ã‚‹\n* ãƒ€ãƒƒã‚¯ã‚¿ã‚¤ãƒ”ãƒ³ã‚°ãŒã¡ã‚‡ã£ã¨ã‚ã‹ã£ãŸ\n  * serviceå±¤ã«ã¯interfaceã‚’ã‚‚ãŸã›ã¦infraå±¤ã§å®Ÿè£…ã™ã‚‹ã“ã¨ã§ä¾å­˜é–¢ä¿‚é€†è»¢ã•ã›ãŸ\n* ãƒ‡ãƒãƒƒã‚°ç›®çš„ä»¥å¤–ã§cmdå±¤ä»¥å¤–ã§ã¯å‡ºåŠ›ã—ãªã„\n* \n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Go"]},"/note/python%E3%83%97%E3%83%AD%E3%82%B8%E3%82%A7%E3%82%AF%E3%83%88%E3%81%AE%E5%A7%8B%E3%82%81%E6%96%B9":{"title":"pythonãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å§‹ã‚æ–¹","content":"\n[Python](note/Python.md)\n\n[Python ã‚ªãƒ¬ã‚ªãƒ¬ã€ã‚³ãƒ¬ã ã‘ã¯ã‚„ã£ã¦ãŠã‘ 2021 - Qiita](https://qiita.com/shoot16625/items/9eefc6e81b3cf209729b)\n\n## dataclass\n\n[Python3.7ã‹ã‚‰ã¯ã€ŒData Classesã€ãŒã‚¯ãƒ©ã‚¹å®šç¾©ã®ã‚¹ã‚¿ãƒ³ãƒ€ãƒ¼ãƒ‰ã«ãªã‚‹ã‹ã‚‚ã—ã‚Œãªã„ - Qiita](https://qiita.com/tag1216/items/13b032348c893667862a)\n\n## æ—¥ä»˜è¨ˆç®—\n\n* [\\[Python3\\] struct_timeã‹ã‚‰datetimeã«å¤‰æ›ã™ã‚‹æ–¹æ³•ï¼ˆã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³ä»˜ãï¼‰ - Qiita](https://qiita.com/non_cal/items/9fcb5f6b4eabed4d6026)\n* [æ—¥ä»˜ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ(datetimeâ‡”æ–‡å­—åˆ—ï¼‰ | Python Snippets](https://python.civic-apps.com/date-format/)\\_\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["2023/05/04","Python"]},"/note/ripgrep%E3%81%A7%E8%A4%87%E6%95%B0%E8%A1%8C%E3%81%AB%E3%81%BE%E3%81%9F%E3%81%8C%E3%82%8B%E6%A4%9C%E7%B4%A2":{"title":"ripgrepã§è¤‡æ•°è¡Œã«ã¾ãŸãŒã‚‹æ¤œç´¢","content":"\n\\#shell \n\nhttps://til.hashrocket.com/posts/9zneks2cbv-multiline-matches-with-ripgrep-rg\n\n````shell\n$ echo 'apple\\norange\\nbanana\\nkiwi' | rg 'orange.*kiwi'\n````\n\n=\u003e ãƒãƒƒãƒã—ãªã„\n\n````shell\n$ echo 'apple\\norange\\nbanana\\nkiwi' | rg --multiline 'orange.*kiwi'\n````\n\n=\u003e ãƒãƒƒãƒã—ãªã„\n`.` ãŒ `\\n` ã«ãƒãƒƒãƒã—ãªã„ãŸã‚ã€‚\n\n`dot all` modifier = `(?s)` ã‚’ã¤ã‹ã†\n\n````shell\n$ echo 'apple\\norange\\nbanana\\nkiwi' | rg --multiline '(?s)orange.*kiwi'\norange\nbanana\nkiwi\n````\n\n=\u003e ãƒãƒƒãƒã™ã‚‹\n\n`--multiline-dotall` ã§ã‚‚ã‚ˆã„\n\n````shell\n$ echo 'apple\\norange\\nbanana\\nkiwi' | rg --multiline --multiline-dotall 'orange.*kiwi'\norange\nbanana\nkiwi\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":[]},"/note/sam-deploy%E3%81%A7cloudformation%E3%81%AEstack%E3%81%8CROLLBACK_COMPLETE%E3%81%AB%E3%81%AA%E3%81%A3%E3%81%A6%E5%86%8D%E3%83%87%E3%83%97%E3%83%AD%E3%82%A4%E3%81%A7%E3%81%8D%E3%81%AA%E3%81%8F%E3%81%AA%E3%81%A3%E3%81%9F%E3%81%A8%E3%81%8D":{"title":"sam deployã§cloudformationã®stackãŒROLLBACK_COMPLETEã«ãªã£ã¦å†ãƒ‡ãƒ—ãƒ­ã‚¤ã§ããªããªã£ãŸã¨ã","content":"\n\\#sam #AWS \n\nsam deploy(cloudformation deploy)ã«å¤±æ•—ã—ãŸã¨ãã«ã€ä»¥ä¸‹ã®ã‚ˆã†ãªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒã§ã¦å†å®Ÿè¡Œã—ã¦ã‚‚ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹\n\n````\nError: Failed to create/update the stack: \u003cstack_name\u003e, Waiter StackCreateComplete failed: Waiter encountered a terminal failure state: For expression \"Stacks[].StackStatus\" we matched expected path: \"ROLLBACK_COMPLETE\" at least once\n````\n\nã“ã®å ´åˆã¯stackã‚’å‰Šé™¤ã™ã‚‹\n\n````shell\naws cloudformation delete-stack --stack-name \u003cstack_name\u003e\n````\n\n## 2å›ç›®ä»¥é™ã®å®Ÿè¡Œã§ã€UPDATE_ROLLBACK_FAILEDçŠ¶æ…‹ã®ã¾ã¾ã«ãªã£ã¦ã„ã‚‹å ´åˆ\n\n[UPDATE_ROLLBACK_FAILED çŠ¶æ…‹ã®ã¾ã¾ã«ãªã£ã¦ã„ã‚‹ CloudFormation ã‚¹ã‚¿ãƒƒã‚¯ã‚’æ›´æ–°ã™ã‚‹](https://aws.amazon.com/jp/premiumsupport/knowledge-center/cloudformation-update-rollback-failed/)\n\nrollbackã‚’ç¶šè¡Œã™ã‚‹\n\n````shell\naws cloudformation continue-update-rollback --stack-name \u003cstack_name\u003e\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":[]},"/note/shell%E3%81%A7while-read%E3%81%AE%E4%B8%AD%E3%81%A7%E5%A4%89%E6%95%B0%E3%82%92%E5%A4%89%E6%9B%B4%E3%81%97%E3%81%A6%E3%82%82%E5%8F%8D%E6%98%A0%E3%81%95%E3%82%8C%E3%81%AA%E3%81%84":{"title":"shellã§while readã®ä¸­ã§å¤‰æ•°ã‚’å¤‰æ›´ã—ã¦ã‚‚åæ˜ ã•ã‚Œãªã„","content":"\n`while read` ã§ãƒ«ãƒ¼ãƒ—å®Ÿè¡Œã—ãŸã„ã¨ãã«ã€ãƒ‘ã‚¤ãƒ—ã§å€¤ã‚’æ¸¡ã™ã“ã¨ãŒã§ãã‚‹ã€‚\nã“ã®ã¨ãã«ã€whileæ–‡ã®ä¸­ã§å¤‰æ•°ã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ã¦ã‚‚ã€å¤‰æ›´ãŒåæ˜ ã•ã‚Œãªã„\n\n````shell\n$ sum=0\n$ echo -e \"1\\n2\\n3\" | while read -r num; do echo \"number: $num\"; sum=$((sum+num)); done \u003c \u003c(echo -e \"1\\n2\\n3\")\nnumber: 1\nnumber: 2\nnumber: 3\n$ echo $sum\n0\n````\n\nã“ã‚Œã¯ã€ãƒ‘ã‚¤ãƒ—ã¯ã‚µãƒ–ãƒ—ãƒ­ã‚»ã‚¹ã§å®Ÿè¡Œã•ã‚Œã‚‹ãŸã‚è¦ªãƒ—ãƒ­ã‚»ã‚¹ã®å¤‰æ•°ã«å½±éŸ¿ã‚’ä¸ãˆã‚‰ã‚Œãªã„ãŸã‚ã€‚\nhttps://unix.stackexchange.com/questions/143958/in-bash-read-after-a-pipe-is-not-setting-values\n\n````bash\ncmd1 | cmd2\n````\n\n \u003e \n \u003e `bash`Â runÂ `cmd2`Â in a subshell, so changing variable won't be visible to parent shell.\n\nãªã®ã§pipeã§ã¯ãªã `\u003c` ã§å€¤ã‚’æ¸¡ã™\n[shellã®ãƒ—ãƒ­ã‚»ã‚¹ç½®æ›Process Substitution](note/shellã®ãƒ—ãƒ­ã‚»ã‚¹ç½®æ›Process%20Substitution.md)\n\n````\nwhile read line; do\ndone \u003c \u003c(echo -e \"foo\\nbar\\nbaz\")\n````\n\nã“ã‚Œã‚’ä½¿ã†ã¨æ¬¡ã®ã‚ˆã†ã«æ›¸ã„ã¦åæ˜ ã•ã‚Œã‚‹ã‚ˆã†ã«ã§ãã‚‹\n\n````shell\n$ sum=0\n$ while read -r num; do echo \"number: $num\"; sum=$((sum+num)); done \u003c \u003c(echo -e \"1\\n2\\n3\")\nnumber: 1\nnumber: 2\nnumber: 3\n$ echo $sum\n6\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["2023/01/04","shell"]},"/note/shell%E3%81%AE%E3%83%97%E3%83%AD%E3%82%BB%E3%82%B9%E7%BD%AE%E6%8F%9BProcess-Substitution":{"title":"shellã®ãƒ—ãƒ­ã‚»ã‚¹ç½®æ›Process Substitution","content":"\n[ãƒ—ãƒ­ã‚»ã‚¹ç½®æ› (Process Substitution)ã«ã¤ã„ã¦ - ä¸€ã‹ã‚‰å‹‰å¼·ã•ã›ã¦ãã ã•ã„](https://dangerous-animal141.hatenablog.com/entry/2020/06/06/175650)\n[zsh: 14 Expansion](https://zsh.sourceforge.io/Doc/Release/Expansion.html#Process-Substitution)\n\ndiffã¨ã‹ã§è¦‹ã‚‹ã“ã®æ›¸ãæ–¹\n\n````shell\n$ diff \u003c(ls one.txt) \u003c(ls two.txt)\n````\n\nã‚³ãƒãƒ³ãƒ‰ã®çµæœã‚’inputã¨ã—ã¦æ¸¡ã—ã¦ã„ã‚‹ã‚ˆã†ã«è¦‹ãˆã‚‹ã€‚\nãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã«è¦‹ãˆã‚‹ãŒçŸ¢å°ã®æ–¹å‘ãŒé€†\n\n* `\u003c(list)`\n  * ãƒªã‚¹ãƒˆã®çµæœã‚’å…¥åŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã«ç½®ãæ›ãˆã‚‹\n* `\u003e(list)`\n  * ãƒªã‚¹ãƒˆã®çµæœã‚’å‡ºåŠ›ãƒ•ã‚¡ã‚¤ãƒ«ã«ç½®ãæ›ãˆã‚‹\n\n[shellã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ](note/shellã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ.md)\n\n## å¿œç”¨ä¾‹\n\n[æ¨™æº–å‡ºåŠ›ã¨æ¨™æº–ã‚¨ãƒ©ãƒ¼å‡ºåŠ›ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã—ãªãŒã‚‰å‡ºåŠ›ã‚’ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã«è¡¨ç¤º (bash, tee, process substitution) - ã„ã‚ã„ã‚å‚™å¿˜éŒ²æ—¥è¨˜](https://devlights.hatenablog.com/entry/2022/02/04/073000)\n\n````shell\n$ ./script.sh 1\u003e \u003e(tee -a stdout.log) 2\u003e \u003e(tee -a stderr.log \u003e\u00262)\n````\n\nã“ã®ã‚ˆã†ã«ã™ã‚‹ã¨ã€ `./script.sh` ã®å‡ºåŠ›ã‚’teeã‚³ãƒãƒ³ãƒ‰ã®ãƒ—ãƒ­ã‚»ã‚¹ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã™ã‚‹ã“ã¨ã§ã€æ¨™æº–å‡ºåŠ›ã—ã¤ã¤ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ãã“ã¨ãŒã§ãã‚‹\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["2023/01/04","shell","zsh"]},"/note/shell%E3%81%AE%E3%83%AA%E3%83%80%E3%82%A4%E3%83%AC%E3%82%AF%E3%83%88":{"title":"shellã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ","content":"\n[ã‚·ã‚§ãƒ«ã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã¨ãƒ‘ã‚¤ãƒ—ã¾ã¨ã‚ \\[Linux\\] â”‚ Webå‚™å¿˜éŒ²](https://webbibouroku.com/Blog/Article/redirect-pipe)\n\n## ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ\n\nå…¥å‡ºåŠ›ã®å‘ãå…ˆã‚’å¤‰æ›´ã™ã‚‹\n\n### `\u003e`\n\n`n\u003e\u0026m` ã¨ã™ã‚‹ã¨ã€ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‡ã‚£ã‚¹ã‚¯ãƒªãƒ—ã‚¿nã‚’mã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã™ã‚‹\n`2\u003e\u00261` ã¨ã™ã‚‹ã¨æ¨™æº–ã‚¨ãƒ©ãƒ¼(FD2)ã®å‡ºåŠ›å…ˆãŒæ¨™æº–å‡ºåŠ›(FD1)ã«ãƒãƒ¼ã‚¸ã•ã‚Œã‚‹\n\n`\u003e\u003e` ã¨ã™ã‚‹ã¨ã€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¿½è¨˜ãƒ¢ãƒ¼ãƒ‰ã§é–‹ã„ã¦ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã™ã‚‹\n\n### `\u003c`\n\næ¨™æº–å…¥åŠ›ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ\n\n````shell\ncat - \u003chello.txt\n````\n\nã§ãƒ•ã‚¡ã‚¤ãƒ«å†…å®¹ã‚’æ¨™æº–å…¥åŠ›ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã—ã¦ã„ã‚‹\n\n### `\u003c(cmd)` ã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œçµæœã‚’æ¨™æº–å…¥åŠ›ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ\n\n[shellã®ãƒ—ãƒ­ã‚»ã‚¹ç½®æ›Process Substitution](note/shellã®ãƒ—ãƒ­ã‚»ã‚¹ç½®æ›Process%20Substitution.md)\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["2023/01/04","shell"]},"/note/shell%E3%81%AE%E6%A4%9C%E7%B4%A2%E3%81%97%E3%81%AB%E3%81%8F%E3%81%84%E6%A9%9F%E8%83%BD":{"title":"shellã®æ¤œç´¢ã—ã«ãã„æ©Ÿèƒ½","content":"\nbashã‚„zshã§ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã®æ©Ÿèƒ½ãªã©æ¤œç´¢ãŒã—ã«ãã„ã®ã§ã€ã“ã“ã«ãƒ¡ãƒ¢ã£ã¦ã„ã\n\n[shellã®ãƒ—ãƒ­ã‚»ã‚¹ç½®æ›Process Substitution](note/shellã®ãƒ—ãƒ­ã‚»ã‚¹ç½®æ›Process%20Substitution.md)\n[shellã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ](note/shellã®ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ.md)\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["2023/01/04"]},"/note/shell-%E3%83%A9%E3%83%B3%E3%83%80%E3%83%A0%E6%96%87%E5%AD%97%E5%88%97%E3%82%92%E7%94%9F%E6%88%90%E3%81%99%E3%82%8B%E3%83%AF%E3%83%B3%E3%83%A9%E3%82%A4%E3%83%8A%E3%83%BC":{"title":"shell ãƒ©ãƒ³ãƒ€ãƒ æ–‡å­—åˆ—ã‚’ç”Ÿæˆã™ã‚‹ãƒ¯ãƒ³ãƒ©ã‚¤ãƒŠãƒ¼","content":"\nå›ºå®šæ–‡å­—åˆ—ã‚’ä»˜ä¸ã—ãŸã„å ´åˆã¯awkãªã©ã§ã¤ã‘ã‚Œã°ã‚ˆã„\n\n````shell\n$ cat /dev/urandom | tr -dc 'a-zA-Z0-9' | fold -w 32 | head -n 10 | awk '{ print \"prefix:\" $1 }'\n\nprefix:0dCIkKBOq8bcM4yCP0Su5AE0yb6OUBtJ\nprefix:ferc9H8Qx0QvaK3klwAiMGejgWVDycL0\nprefix:pYJGcHzrxYtlT8p4dw8JT567XmeljRRq\nprefix:dJ1g2vryv1U2EmE0fW4bOT8DlW2plXQx\nprefix:W952QQrK0XFG1hyUzh4vy1D6vWAU2Xt9\nprefix:IEXRe5sAhmnYenIhMse2C63qYZSpmlTY\nprefix:IaMWJGHRqhQXj8RhqsOJtT8OAYAoPvPY\nprefix:h89cSAk63KSTCa3J880qYmjpoRFHi3DJ\nprefix:MUEAglVmFbIwCdRzBllDcPIQzIjN0ivu\nprefix:7sNNrE29j5QaHk1h3zuAaeqSXftzWcn3\n````\n\n## ä»•çµ„ã¿\n\n* `/dev/urandom` ã§ãƒ©ãƒ³ãƒ€ãƒ æ–‡å­—åˆ—ã‚’ç”Ÿæˆ\n* `tr -dc 'a-zA-Z0-9'`: è‹±æ•°å­—ä»¥å¤–ã‚’å‰Šé™¤\n  * `-d`: \\\u003cæ–‡å­—ã‚»ãƒƒãƒˆ\u003eã«å«ã¾ã‚Œã‚‹æ–‡å­—ãŒã‚ã£ãŸã‚‰å‰Šé™¤ã™ã‚‹\n  * `-c`: \\\u003cæ–‡å­—ã‚»ãƒƒãƒˆ\u003eã«å«ã¾ã‚Œãªã„æ–‡å­—å…¨ã¦ï¼ˆã®è£œé›†åˆï¼‰ã‚’å¯¾è±¡ã¨ã™ã‚‹\n* `fold`: ãƒ†ã‚­ã‚¹ãƒˆã‚’æŒ‡å®šã—ãŸå¹…ã§æ”¹è¡Œã™ã‚‹\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["shell"]},"/note/shell-script-%E3%83%86%E3%82%AD%E3%82%B9%E3%83%88%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%84JSON%E3%81%A7for-loop%E3%81%99%E3%82%8B%E3%83%91%E3%82%BF%E3%83%BC%E3%83%B3":{"title":"shell script ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚„JSONã§for loopã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³","content":"\n## ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚“ã§ä¸€è¡Œãšã¤å‡¦ç†ã™ã‚‹\n\nname_list.txt\n\n````txt\nJohn\nBob\nAlice\n````\n\n````bash\nwhile read -r line || [ -n \"$line\" ]\ndo\n  echo \"name: ${line}\"\ndone \u003c name_list.txt ```\n\n## JSONã®é…åˆ—ã‚’ä¸€ã¤ãšã¤å‡¦ç†ã™ã‚‹\n\n[jqã®é…åˆ—ã§ãƒ«ãƒ¼ãƒ—å‡¦ç†ã‚’ã™ã‚‹](note/jqã®é…åˆ—ã§ãƒ«ãƒ¼ãƒ—å‡¦ç†ã‚’ã™ã‚‹.md)\n````\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["shell"]},"/note/spotless%E3%81%A7%E3%82%B3%E3%83%BC%E3%83%89%E3%83%95%E3%82%A9%E3%83%BC%E3%83%9E%E3%83%83%E3%83%88%E3%81%99%E3%82%8B":{"title":"spotlessã§ã‚³ãƒ¼ãƒ‰ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã™ã‚‹","content":"\n\u003chttps://github.com/diffplug/spotless/tree/main/plugin-maven\u003e\n\nJava,Kotlinã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ã¨ã—ã¦spotlessã‚’å°å…¥ã™ã‚‹\n\n## Java\n\nlink: [Javaã®Formatter](note/Javaã®Formatter.md)\n\nä»¥ä¸‹ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ãŒåˆ©ç”¨å¯èƒ½\n\n\u003chttps://github.com/google/google-java-format\u003e\n\u003chttps://github.com/jhipster/prettier-java\u003e\n\u003chttps://github.com/diffplug/spotless/blob/main/ECLIPSE_SCREENSHOTS.md\u003e\n\n[Javaãƒ¦ãƒ¼ã‚¶ãªã‚‰Code Formatterã«ã¯SpotlessãŒã‚ªã‚¹ã‚¹ãƒ¡ - äº¬éƒ½è¡ŒããŸã„](https://progret.hatenadiary.com/entry/2019/12/09/165048)\n\n\u003chttps://github.com/diffplug/spotless/tree/main/plugin-maven#java\u003e\n\n````xml\n            \u003cplugin\u003e\n                \u003cgroupId\u003ecom.diffplug.spotless\u003c/groupId\u003e\n                \u003cartifactId\u003espotless-maven-plugin\u003c/artifactId\u003e\n                \u003cversion\u003e2.9.0\u003c/version\u003e\n                \u003cconfiguration\u003e\n                    \u003cformats\u003e\n                        \u003c!-- you can define as many formats as you want, each is independent --\u003e\n                        \u003cformat\u003e\n                            \u003c!-- define the files to apply to --\u003e\n                            \u003cincludes\u003e\n                                \u003cinclude\u003e*.md\u003c/include\u003e\n                                \u003cinclude\u003e.gitignore\u003c/include\u003e\n                            \u003c/includes\u003e\n                            \u003c!-- define the steps to apply to those files --\u003e\n                            \u003ctrimTrailingWhitespace/\u003e\n                            \u003cendWithNewline/\u003e\n                            \u003cindent\u003e\n                                \u003ctabs\u003etrue\u003c/tabs\u003e\n                                \u003cspacesPerTab\u003e4\u003c/spacesPerTab\u003e\n                            \u003c/indent\u003e\n                        \u003c/format\u003e\n                    \u003c/formats\u003e\n                    \u003c!-- define a language-specific format --\u003e\n                    \u003cjava\u003e\n                        \u003cincludes\u003e\n                            \u003cinclude\u003esrc/main/java/**/*.java\u003c/include\u003e\n                        \u003c/includes\u003e\n                        \u003cimportOrder /\u003e \u003c!-- standard import order --\u003e\n                        \u003c!-- no need to specify files, inferred automatically, but you can if you want --\u003e\n                        \u003cremoveUnusedImports /\u003e\n                        \u003c!-- apply a specific flavor of google-java-format --\u003e\n                        \u003cgoogleJavaFormat\u003e\n                            \u003cversion\u003e1.7\u003c/version\u003e\n                            \u003cstyle\u003eAOSP\u003c/style\u003e\n                        \u003c/googleJavaFormat\u003e\n                    \u003c/java\u003e\n                \u003c/configuration\u003e\n            \u003c/plugin\u003e\n        \u003c/plugins\u003e\n````\n\n### Google Java Formatã®ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã‚µã‚¤ã‚ºå¤‰æ›´\n\nGoogle Java Formatã¯ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã‚µã‚¤ã‚ºãŒ2\nã™ã£ãã‚Šã—ã¦è¦‹ãŸç›®ã¯ã„ã„ã‚“ã ã‘ã©ã€æ—¢å­˜ã¸ã®å½±éŸ¿ãŒå¤§ãã„\n\n\u003chttps://github.com/diffplug/spotless/issues/420\u003e\nAOSPã‚¹ã‚¿ã‚¤ãƒ«ã ã¨ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã‚µã‚¤ã‚ºã¯4\n\neclipse ã‚’ä½¿ã†ã“ã¨ã§ã€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãŒæŸ”è»Ÿã«å¤‰æ›´ã§ãã‚‹\n\n## Kotlin\n\n\u003chttps://github.com/pinterest/ktlint\u003e\n\u003chttps://github.com/Angry-Potato/prettier-plugin-kotlin\u003e\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["Java","Kotlin"]},"/note/spring-boot-configuration":{"title":"spring-boot-configuration","content":"\n# spring-boot-configuration\n\nSpring Boot ã§ application.yml ã‚’ Kotlin ã§ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°ã§ãã‚‹ã‚ˆã†ã«ã—ãŸã„\n\n## ç’°å¢ƒ\n\n* Spring Boot 2.4.0\n* Kotlin 1.4.10\n\n## ãã£ã‹ã‘\n\nSpring Bootã§ã¯ç’°å¢ƒåˆ¥ã«è¨­å®šã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹ä»•çµ„ã¿ã¨ã—ã¦application.propertiesã‚„application.ymlãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ãˆã¾ã™ã€‚\napplication.ymlã«ã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æ›¸ããŸã„ã€‚\n\nèª­ã¿è¾¼ã‚€æ–¹æ³•ã¯ä¸»ã«2ã¤\n\n* `@Value`\n* `@ConfigurationProperties`\n\n### `@Value` ã®å ´åˆ\n\nApiConfiguration.kt\n\n````\n@Configuration\nclass ApiConfiguration(\n    @Value(\"\\${api.url}\") url: String,\n){\n\n    @Bean\n    fun apiClient(): RestOperations = RestTemplateBuilder()\n            .rootUri(url)\n            .build()\n\n}\n````\n\napplication.yml\n\n````\napi:\n    url: \"http://api.example.com\"\n````\n\nã“ã‚Œã§è¨­å®šã§ãã‚‹ãŒã€application.ymlã§ä»¥ä¸‹ã®è­¦å‘ŠãŒã§ã‚‹ã€‚\n\n`Cannot resolve configuration property 'api.url'`\n\nãã‚Œã«ã€propertyãŒã©ã“ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹ã‹ã‚„ã€å‹ã‚„èª¬æ˜ãŒã‚³ãƒ¼ãƒ‰ã§æ˜ç¢ºã«ãªã£ã¦ã„ãŸã»ã†ãŒå¬‰ã—ã„\nãŠã™ã™ã‚ãªã®ã¯ä»¥ä¸‹\n\n### `@ConfigurationProperties` ã®å ´åˆ\n\n\u003chttps://spring.pleiades.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-external-config-constructor-binding\u003e\n\u003chttps://spring.pleiades.io/guides/tutorials/spring-boot-kotlin/\u003e\n\nApiConfiguration.kt\n\n````kotlin\n@ConstructorBinding\n@ConfigurationProperties(\"api\")\ndata class ApiConfiguration(\n    val url: String,\n    val connection: Connection,\n) {\n\n    // ãƒã‚¹ãƒˆã—ãŸæƒ…å ±ã¯data classå†…ã«ã•ã‚‰ã«data classã‚’æ›¸ã\n    // api.connection.timeout ã¨ãªã‚‹\n    data class Connection(\n        val timeout: Int,\n    )\n}\n````\n\nã“ã‚Œã ã‘ã ã¨ãƒã‚¤ãƒ³ãƒ‰ã•ã‚Œãªã„ã®ã§ã€æ©Ÿèƒ½ã‚’æœ‰åŠ¹åŒ–ã™ã‚‹å¿…è¦ãŒã‚ã‚‹\n\n````kotlin\n@SpringBootApplication\n@ConfigurationPropertiesScan\nclass MyApplication\n\nfun main(args: Array\u003cString\u003e) {\n    runApplication\u003cMyApplication\u003e(*args)\n}\n````\n\nã‚‚ã—ãã¯ `@Configuration` ã‚¯ãƒ©ã‚¹ã«å€‹åˆ¥ã«æŒ‡å®šã™ã‚‹\n\n````kotlin\n@Configuration\n@EnableConfigurationProperties(ApiConfiguration::class)\nclass MyConfiguration {\n}\n````\n\n### è£œå®ŒãŒåŠ¹ãã‚ˆã†ã«ã™ã‚‹\n\nã‚«ã‚¹ã‚¿ãƒ ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’IDEã«èªè­˜ã•ã›ã‚‹ãŸã‚ã«ã¯ã€ `META-INF/spring-configuration-metadata.json` ãŒå­˜åœ¨ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\n\n\u003chttps://spring.pleiades.io/spring-boot/docs/current/reference/html/appendix-configuration-metadata.html#configuration-metadata-annotation-processor\u003e\n\nbuild.gradle.kts\n\n````\ndependencies {\n    annotationProcessor(\"org.springframework.boot:spring-boot-configuration-processor\")\n}\n````\n\nIntellijã§ã¯ã€ `Preferences | Build, Execution, Deployment | Compiler | Annotation Processors` ã§ `Enable annotation processing` ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã¨ãƒ“ãƒ«ãƒ‰æ™‚ã«ç”Ÿæˆã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹ã¨ã‚ã‚‹ãŒã€è‡ªåˆ†ã®ç’°å¢ƒã§ã¯ç”Ÿæˆã•ã‚Œãªã‹ã£ãŸã€‚\n\nãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ã‚ˆãè¦‹ãŸã‚‰ã€Kotlinã®å ´åˆ `kapt` ãŒå¿…è¦ã¨ã®ã“ã¨\n\u003chttps://spring.pleiades.io/spring-boot/docs/current/reference/html/spring-boot-features.html#boot-features-kotlin-configuration-properties\u003e\n\nbuild.gradle.kts\n\n````\nplugins {\n  ...\n  kotlin(\"kapt\") version \"1.4.10\"\n}\n\ndependencies {\n  ...\n  kapt(\"org.springframework.boot:spring-boot-configuration-processor\")\n}\n````\n\nkaptã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œ\n\n````sh\n./gradlew kaptKotlin\n````\n\nè‡ªåˆ†ã®ç’°å¢ƒã§ã¯ `build/tmp/kapt3/classes/main/META-INF/spring-configuration-metadata.json` ã«ä½œæˆã•ã‚ŒãŸ\n","lastmodified":"2023-07-29T08:18:43.047498643Z","tags":["spring"]},"/note/spring-mock-rest-server":{"title":"spring-mock-rest-server","content":"\n# spring mock rest server\n\n[SpringFramework](note/SpringFramework.md) ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã§HTTPã‚µãƒ¼ãƒãƒ¼ã‚’mockã™ã‚‹\n\nRestTemplateã‚’mockã™ã‚‹ã‹ã€RestTemplateã®é€šä¿¡å…ˆã‚’mockã™ã‚‹ã‹\ngoã®httptest.Serverã¿ãŸã„ãª\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["spring"]},"/note/spring-validation":{"title":"spring-validation","content":"\n# spring validation\n\n[SpringFramework](note/SpringFramework.md) REST APIã§ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã—ãŸã„\n\n@Validated, @Validã‚’ã¤ã‘ã¦ã‚‚validationã•ã‚Œãªã‹ã£ãŸ\n\n2.3ã‹ã‚‰validationãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒå«ã¾ã‚Œãªããªã£ãŸ\n\u003chttps://github.com/spring-projects/spring-boot/wiki/Spring-Boot-2.3-Release-Notes#validation-starter-no-longer-included-in-web-starters\u003e\n\n### å¯¾å¿œ\n\nè‡ªåˆ†ã§å…¥ã‚Œã‚‹\n\n### çµæœ\n\nvalidationãŒåŠ¹ãã‚ˆã†ã«ãªã£ãŸ\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["spring"]},"/note/springdoc":{"title":"springdoc","content":"\n# springdoc\n\n[SpringFramework](note/SpringFramework.md) ã§OpenAPIä»•æ§˜æ›¸ã‚’ä½œæˆã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒª\n\nspringfoxã‚’ã‚„ã‚ãŸ\nOAS3ã«ã‚¤ãƒã‚¤ãƒãŸã„ãŠã†ã—ã¦ãªã„\n\noneOfãŒä½¿ãˆãªã‹ã£ãŸ\n\u003chttps://swagger.io/docs/specification/data-models/inheritance-and-polymorphism/\u003e\n\nã‚„ã£ãŸã“ã¨\n\nãƒ©ã‚¤ãƒ–ãƒ©ãƒªå…¥ã‚ŒãŸ\nOpenAPI()ã«å¤‰æ›´ã—ãŸ\nannotationã‚’v3ã«å¤‰æ›´ã—ãŸ\n\n\u003chttps://www.b1a9idps.com/posts/springdoc-openapi-1\u003e\n\u003chttps://qiita.com/yukithm/items/fafc54bc331696b0c333\u003e\n\u003chttps://springdoc.org/#migrating-from-springfox\u003e\n\u003chttps://github.com/springdoc/springdoc-openapi\u003e\n\n### oneOfã§è­¦å‘ŠãŒã§ã‚‹\n\n\u003chttps://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/java/org/openapitools/codegen/DefaultCodegen.java#L2319\u003e\n\nbefore\n\n````\n@Schema(\n    description = \"1åŒºé–“æƒ…å ±\",\n    oneOf = [Section.SectionPoint::class, Section.SectionMove::class],\n    discriminatorProperty = \"sectionType\",\n)\nsealed class Section(val sectionType: string) {\n    data class SectionPoint(val name: String): Section(\"point\"){}\n    data class SectionMove(val move: String): Section(\"move\"){}\n}\n````\n\nafter\n\n````\n@Schema(\n    description = \"1åŒºé–“æƒ…å ±\",\n    oneOf = [Section.SectionPoint::class, Section.SectionMove::class],\n    discriminatorProperty = \"sectionType\",\n    discriminatorMapping = [\n        DiscriminatorMapping(value = \"point\", schema = Section.SectionPoint::class),\n        DiscriminatorMapping(value = \"move\", schema = Section.SectionMove::class),\n    ],\n)\nsealed class Section() {\n    data class SectionPoint(val sectionType: string, val name: String): Section(){}\n    data class SectionMove(val sectionType: string, val move: String): Section(){}\n}\n````\n\n### Jacksonã§deserializeã™ã‚‹ãŸã‚ã®è¨­å®š\n\nJsonTypeInfo, JsonSubTypesã®ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’è¿½åŠ ã—ãŸ\n\n````\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = \"type\")\n@JsonSubTypes(\n    value = [\n        JsonSubTypes.Type(value = SectionRecord.Point::class, name = \"point\"),\n        JsonSubTypes.Type(value = SectionRecord.Move::class, name = \"move\"),\n    ]\n)\n````\n\n## openapi-generatorã§StackOverflowErrorã¨ãªã‚‹\n\nä¸Šè¨˜ã®JsonTypeInfoã‚’å…¥ã‚ŒãŸã‚‰ã€swagger.yamlã‹ã‚‰ã‚³ãƒ¼ãƒ‰ç”Ÿæˆã™ã‚‹ã¨ãã«ç„¡é™ãƒ«ãƒ¼ãƒ—ã¨ãªã£ãŸ\n\n````\n[main] INFO  o.o.codegen.DefaultGenerator - Generator 'typescript-axios' is considered stable.\nException in thread \"main\" java.lang.StackOverflowError\n\tat java.util.regex.Pattern.error(Pattern.java:1969)\n\tat java.util.regex.Pattern.\u003cinit\u003e(Pattern.java:1354)\n\tat java.util.regex.Pattern.compile(Pattern.java:1054)\n\tat java.lang.String.replace(String.java:2239)\n\tat org.openapitools.codegen.utils.ModelUtils.getSimpleRef(ModelUtils.java:405)\n\tat org.openapitools.codegen.utils.ModelUtils.getReferencedSchema(ModelUtils.java:832)\n\tat org.openapitools.codegen.DefaultCodegen.addProperties(DefaultCodegen.java:3024)\n\tat org.openapitools.codegen.DefaultCodegen.addProperties(DefaultCodegen.java:3000)\n\tat org.openapitools.codegen.DefaultCodegen.addProperties(DefaultCodegen.java:3025)\n\tat org.openapitools.codegen.DefaultCodegen.addProperties(DefaultCodegen.java:3010)\n\tat org.openapitools.codegen.DefaultCodegen.addProperties(DefaultCodegen.java:3025)\n````\n\nswagger.yaml\n\n````yaml\n    SectionRecord:\n      required:\n      - type\n      type: object\n      properties:\n        type:\n          type: string\n      description: ãƒ«ãƒ¼ãƒˆè©³ç´°ã®1åŒºé–“æƒ…å ±\n      discriminator:\n        propertyName: type\n        mapping:\n          point: '#/components/schemas/Point'\n          move: '#/components/schemas/Move'\n      oneOf:\n      - $ref: '#/components/schemas/Point'\n      - $ref: '#/components/schemas/Move'\n    Move:\n      required:\n      - distanceMetre\n      - move\n      - transitFare\n      - transitMinutes\n      type: object\n      allOf:\n      - $ref: '#/components/schemas/SectionRecord'\n      - type: object\n        properties:\n          move:\n            type: string\n            enum:\n            - TRAIN\n            - EXPRESS_TRAIN\n            - BULLET_TRAIN\n            - LOCAL_BUS\n            - HIGHWAY_BUS\n            - FERRY\n            - AIRPLANE\n            - CYCLE_SHARING\n            - CYCLE\n            - TAXI\n            - CAR\n            - CAR_SHARING\n            - RENTAL_CAR\n            - WALK\n          distanceMetre:\n            type: integer\n            format: int32\n          transitMinutes:\n            type: integer\n            format: int32\n          transitFare:\n            type: integer\n            format: int32\n          transport:\n            $ref: '#/components/schemas/TransportRecord'\n    Point:\n      required:\n      - coord\n      - isFirstSpot\n      - isLastSpot\n      - name\n      type: object\n      allOf:\n      - $ref: '#/components/schemas/SectionRecord'\n      - type: object\n        properties:\n          name:\n            type: string\n          coord:\n            $ref: '#/components/schemas/CoordinateRecord'\n          departureTime:\n            type: string\n            format: date-time\n          arrivalTime:\n            type: string\n            format: date-time\n          isFirstSpot:\n            type: boolean\n          isLastSpot:\n            type: boolean\n\n````\n\nè¦ªã®oneOfã¨å­ã®allOfã§å¾ªç’°å‚ç…§ã—ã¦ã„ã‚‹ã®ãŒåŸå› ã½ã„\nãŸã‚ã—ã«å­ã®allOfã‚’æ¶ˆã—ãŸã‚‰é€šã£ãŸã€‚\n\n### ã‚„ã£ãŸã“ã¨\n\nSchemaã®oneOfã®å®šç¾©ã‚’å‰Šé™¤ã—ãŸ\n\n````\n@Schema(description = \"ãƒ«ãƒ¼ãƒˆè©³ç´°ã®1åŒºé–“æƒ…å ±\")\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = \"type\")\n@JsonSubTypes(\n    value = [\n        JsonSubTypes.Type(value = SectionRecord.Point::class, name = \"point\"),\n        JsonSubTypes.Type(value = SectionRecord.Move::class, name = \"move\"),\n    ]\n)\nsealed class SectionRecord() {\n    data class Point(\n\n````\n\nswagger.yaml\n\n````yaml\n    SectionRecord:\n      required:\n      - type\n      type: object\n      properties:\n        type:\n          type: string\n      description: ãƒ«ãƒ¼ãƒˆè©³ç´°ã®1åŒºé–“æƒ…å ±\n      discriminator:\n        propertyName: type\n    Move:\n      required:\n      - distanceMetre\n      - move\n      - transitFare\n      - transitMinutes\n      type: object\n      allOf:\n      - $ref: '#/components/schemas/SectionRecord'\n      - type: object\n        properties:\n          move:\n            type: string\n            enum:\n            - TRAIN\n            - EXPRESS_TRAIN\n            - BULLET_TRAIN\n            - LOCAL_BUS\n            - HIGHWAY_BUS\n            - FERRY\n            - AIRPLANE\n            - CYCLE_SHARING\n            - CYCLE\n            - TAXI\n            - CAR\n            - CAR_SHARING\n            - RENTAL_CAR\n            - WALK\n          distanceMetre:\n            type: integer\n            format: int32\n          transitMinutes:\n            type: integer\n            format: int32\n          transitFare:\n            type: integer\n            format: int32\n          transport:\n            $ref: '#/components/schemas/TransportRecord'\n    Point:\n      required:\n      - coord\n      - isFirstSpot\n      - isLastSpot\n      - name\n      type: object\n      allOf:\n      - $ref: '#/components/schemas/SectionRecord'\n      - type: object\n        properties:\n          name:\n            type: string\n          coord:\n            $ref: '#/components/schemas/CoordinateRecord'\n          departureTime:\n            type: string\n            format: date-time\n          arrivalTime:\n            type: string\n            format: date-time\n          isFirstSpot:\n            type: boolean\n          isLastSpot:\n            type: boolean\n\n````\n\n````diff\n\u003c         mapping:\n\u003c           point: '#/components/schemas/Point'\n\u003c           move: '#/components/schemas/Move'\n\u003c       oneOf:\n\u003c       - $ref: '#/components/schemas/Point'\n\u003c       - $ref: '#/components/schemas/Move'\n````\n\noneOfã®å®šç¾©ãŒæ¶ˆãˆãŸ\n\nç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã‚‚å•é¡Œãªã—\n\n````\nexport interface SectionRecord {\n  /**\n   *\n   * @type {string}\n   * @memberof SectionRecord\n   */\n  type: string\n}\nexport interface Move extends SectionRecord {\n\t// ....\n}\nexport interface Point extends SectionRecord {\n\t// ....\n}\n````\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["spring"]},"/note/springdoc%E3%81%A7polymorphism%E3%82%92%E8%A1%A8%E7%8F%BE%E3%81%99%E3%82%8B%E3%81%AE%E3%81%8C%E9%9B%A3%E3%81%97%E3%81%8B%E3%81%A3%E3%81%9F":{"title":"springdocã§polymorphismã‚’è¡¨ç¾ã™ã‚‹ã®ãŒé›£ã—ã‹ã£ãŸ","content":"\n# springdoc-bug\n\nnestã—ãŸpolymorphismãŒã†ã¾ãåæ˜ ã•ã‚Œãªã‹ã£ãŸ\n\n````kotlin\n@Schema(description = \"ãƒ«ãƒ¼ãƒˆè©³ç´°ã®1åŒºé–“æƒ…å ±\")\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = \"type\")\n@JsonSubTypes(\n    value = [\n        JsonSubTypes.Type(value = SectionRecord.Point::class, name = \"point\"),\n        JsonSubTypes.Type(value = SectionRecord.Move::class, name = \"move\"),\n    ]\n)\nsealed class SectionRecord() {\n    data class Point(\n        val name: String,\n        val coord: CoordinateRecord,\n        @JsonFormat(pattern = \"yyyy-MM-dd'T'HH:mm:ss\")\n        val departureTime: LocalDateTime? = null,\n        @JsonFormat(pattern = \"yyyy-MM-dd'T'HH:mm:ss\")\n        val arrivalTime: LocalDateTime? = null,\n        val isFirstSpot: Boolean = false,\n        val isLastSpot: Boolean = false,\n    ) : SectionRecord()\n\n    data class Move(\n        val move: MoveTypeRecord,\n        val distanceMeter: Int,\n        val transitMinutes: Int,\n        val transitFare: Int,\n        @Schema(description = \"é§…ç­‰ã®å…¥å£åç§°ç­‰\", example = \"A3å£\")\n        val entranceGateway: String? = null,\n        @Schema(description = \"é§…ç­‰ã®å‡ºå£åç§°\", example = \"6ç•ªå£(èµ¤ãƒ¬ãƒ³ã‚¬å€‰åº«å£)\")\n        val exitGateway: String? = null,\n        val transport: TransportRecord?,\n        val directOperations: List\u003cDirectOperationRecord\u003e = listOf(),\n    ) : SectionRecord()\n}\n\n@Schema(description = \"ç›´é€šåŒºé–“ã®æƒ…å ±\")\n@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, include = JsonTypeInfo.As.PROPERTY, property = \"type\")\n@JsonSubTypes(\n    value = [\n        JsonSubTypes.Type(value = DirectOperationRecord.Point::class, name = \"point\"),\n        JsonSubTypes.Type(value = DirectOperationRecord.Move::class, name = \"move\"),\n    ]\n)\nsealed class DirectOperationRecord() {\n    data class Point(\n        val name: String,\n        val coord: CoordinateRecord,\n        @JsonFormat(pattern = \"yyyy-MM-dd'T'HH:mm:ss\")\n        val departureTime: LocalDateTime? = null,\n        @JsonFormat(pattern = \"yyyy-MM-dd'T'HH:mm:ss\")\n        val arrivalTime: LocalDateTime? = null,\n    ) : DirectOperationRecord()\n\n    data class Move(\n        val move: MoveTypeRecord,\n        val distanceMeter: Int,\n        val transitMinutes: Int,\n        val transitFare: Int,\n        val transport: TransportRecord?,\n    ) : DirectOperationRecord()\n}\n\n````\n\nã‚„ã£ã±ã‚Šæ›¸ãæ–¹ãŒæ­£ã—ããªã„ã£ã½ã„â€¦\n\n````kotlin\n@Schema(\n    description = \"ãƒ«ãƒ¼ãƒˆè©³ç´°ã®1åŒºé–“æƒ…å ±\",\n    oneOf = [SectionRecord.SectionPoint::class, SectionRecord.SectionMove::class],\n    discriminatorProperty = \"type\",\n    discriminatorMapping = [\n        DiscriminatorMapping(value = \"point\", schema = SectionRecord.SectionPoint::class),\n        DiscriminatorMapping(value = \"move\", schema = SectionRecord.SectionMove::class),\n    ],\n)\nsealed class SectionRecord(val type: String) {\n    data class SectionPoint(\n        val name: String,\n        val coord: CoordinateRecord,\n        @JsonFormat(pattern = \"yyyy-MM-dd'T'HH:mm:ss\")\n        val departureTime: LocalDateTime? = null,\n        @JsonFormat(pattern = \"yyyy-MM-dd'T'HH:mm:ss\")\n        val arrivalTime: LocalDateTime? = null,\n        val isFirstSpot: Boolean = false,\n        val isLastSpot: Boolean = false,\n    ) : SectionRecord(\"point\")\n\n    data class SectionMove(\n        val move: MoveTypeRecord,\n        val distanceMeter: Int,\n        val transitMinutes: Int,\n        val transitFare: Int,\n        @Schema(description = \"é§…ç­‰ã®å…¥å£åç§°ç­‰\", example = \"A3å£\")\n        val entranceGateway: String? = null,\n        @Schema(description = \"é§…ç­‰ã®å‡ºå£åç§°\", example = \"6ç•ªå£(èµ¤ãƒ¬ãƒ³ã‚¬å€‰åº«å£)\")\n        val exitGateway: String? = null,\n        val transport: TransportRecord?,\n        val directOperations: List\u003cDirectOperationRecord\u003e = listOf(),\n    ) : SectionRecord(\"move\")\n}\n\n@Schema(\n    description = \"ãƒ«ãƒ¼ãƒˆè©³ç´°ã®1åŒºé–“æƒ…å ±\",\n    oneOf = [DirectOperationRecord.DirectOperationPoint::class, DirectOperationRecord.DirectOperationMove::class],\n    discriminatorProperty = \"type\",\n    discriminatorMapping = [\n        DiscriminatorMapping(value = \"point\", schema = DirectOperationRecord.DirectOperationPoint::class),\n        DiscriminatorMapping(value = \"move\", schema = DirectOperationRecord.DirectOperationMove::class),\n    ],\n)\nsealed class DirectOperationRecord(val type: String) {\n    data class DirectOperationPoint(\n        val name: String,\n        val coord: CoordinateRecord,\n        @JsonFormat(pattern = \"yyyy-MM-dd'T'HH:mm:ss\")\n        val departureTime: LocalDateTime? = null,\n        @JsonFormat(pattern = \"yyyy-MM-dd'T'HH:mm:ss\")\n        val arrivalTime: LocalDateTime? = null,\n    ) : DirectOperationRecord(\"point\")\n\n    data class DirectOperationMove(\n        val move: MoveTypeRecord,\n        val distanceMeter: Int,\n        val transitMinutes: Int,\n        val transitFare: Int,\n        val transport: TransportRecord?,\n    ) : DirectOperationRecord(\"move\")\n}\n````\n\nã“ã‚Œã ã¨ã†ã¾ãã„ã£ãŸã®ã§ã€JsonSubTypesã§åæ˜ ã•ã›ã‚‹ã®ã¯æ­£ã—ã„ã‚„ã‚Šæ–¹ã§ã¯ãªã‹ã£ãŸã¿ãŸã„\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["spring"]},"/note/sql%E3%81%A7sum_case_when%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E5%A0%B4%E5%90%88%E5%88%86%E3%81%91%E9%9B%86%E8%A8%88":{"title":"sqlã§sum_case_whenã‚’ä½¿ã£ã¦å ´åˆåˆ†ã‘é›†è¨ˆ","content":"\n\\#sql\n\n````sql\nSELECT SUM(CASE WHEN flag = 1 THEN 1 ELSE 0 END) FROM table\n````\n\n### ä»¶æ•°ã‚’é›†è¨ˆã—ãŸã„å ´åˆ\n\n````sql\nSELECT api_path\n    ,sum(case when status_code = 200 then 1 else 0 end) as success\n    ,sum(case when status_code = 500 then 1 else 0 end) as error\nFROM access_log\nGROUP BY api_path\nORDER BY api_path\n````\n\n### æ¡ä»¶ã«å¿œã˜ã¦ã‚«ãƒ©ãƒ ã‚’é›†è¨ˆã—ãŸã„å ´åˆ\n\n````sql\nCREATE TABLE `å£²ä¸Š` (\n  `id`             int           NOT NULL AUTO_INCREMENT,\n  `ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID` varchar(3)    NOT NULL,\n  `è¨ˆä¸Šå¹´æœˆæ—¥`     date          NOT NULL,\n  `é‡‘é¡`           decimal(11,2) NOT NULL,\n  PRIMARY KEY(`id`)\n);\n````\n\n````sql\nSELECT\n  `ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID`,\n  SUM(`é‡‘é¡`) AS `å£²ä¸Šé¡`,\n  SUM(CASE WHEN `è¨ˆä¸Šå¹´æœˆæ—¥` \u003e '2020-07-20' THEN `é‡‘é¡` ELSE 0 END) AS `å£²ä¸Šæ®‹`\nFROM `å£²ä¸Šäºˆå®š`\nGROUP BY `ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID`;\n````\n\nçµæœ\n\n````tsv\nãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆID    å£²ä¸Šé¡       å£²ä¸Šæ®‹\n001             600000.00   200000.00\n002             100000.00   0.00\n````\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":[]},"/note/ssh":{"title":"ssh","content":"\n\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["terminal"]},"/note/ssh%E3%81%A7%E6%8E%A5%E7%B6%9A%E5%BE%8C%E3%81%AB%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E3%82%92%E5%AE%9F%E8%A1%8C%E3%81%99%E3%82%8B":{"title":"sshã§æ¥ç¶šå¾Œã«ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹","content":"\nè¸ã¿å°ã‚µãƒ¼ãƒãƒ¼ã«ãƒ­ã‚°ã‚¤ãƒ³ã—ãŸã‚ã¨ã€æ¯å›å°‚ç”¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãªã‚‹ã®ãŒé¢å€’ã ã£ãŸã®ã§èª¿ã¹ãŸ\n\n### ãƒ­ã‚°ã‚¤ãƒ³å¾Œåˆ¥ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãªã‚ŠãŸã„\n\n````.ssh/config\nHost bastion_aws\n  HostName x.x.x.x\n  RemoteCommand su - user2\n  RequestTTY force\n````\n\n### ãƒ­ã‚°ã‚¤ãƒ³å¾Œæ‰€å®šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•ã—ãŸã„\n\n````.ssh/config\nHost bastion\n  HostName x.x.x.x\n  RemoteCommand cd temp; bash\n  RequestTTY force\n````\n\næœ«å°¾ã®bashãŒãªã„ã¨ã€ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œå¾Œã™ãã«åˆ‡æ–­ã•ã‚Œã‚‹\n\n### sshã‚³ãƒãƒ³ãƒ‰ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã§ã‚‚å¯èƒ½\n\n````bash\nssh -t user1@remote.host \"sudo su - user2\" \n````\n\n`-t` ã§ttyå‰²ã‚Šå½“ã¦\n\n## è§£èª¬\n\n\u003chttps://man7.org/linux/man-pages/man5/ssh_config.5.html\u003e\n\n* RemoteCommand ã‚µãƒ¼ãƒã«æ¥ç¶šå¾Œã€ãƒªãƒ¢ãƒ¼ãƒˆãƒ›ã‚¹ãƒˆã§å®Ÿè¡Œã•ã‚Œã‚‹ã‚³ãƒãƒ³ãƒ‰ã€‚\n* RequestTTY æ¥ç¶šå…ˆã®ã‚µãƒ¼ãƒã§ã‚·ã‚§ãƒ«ã‚’èµ·å‹•ã™ã‚‹ã‹ã‚’æŒ‡å®šã™ã‚‹ã€‚\n\n### RequestTTY\n\nRequestTTYã¯4ã¤ã®å€¤ã®ã†ã¡ã®1ã¤ã‚’æŒã¤ã“ã¨ãŒã§ãã¾ã™\n\n* `no` - SSHã¯ç«¯æœ«ã®å‡ºåŠ›ã‚’è¦æ±‚ã—ã¾ã›ã‚“ã€‚\n* `yes` - SSHã¯ã€ãã®å…¥åŠ›å…ƒãŒç«¯æœ«ã§ã‚‚ã‚ã‚‹å ´åˆã«ç«¯æœ«å‡ºåŠ›ã‚’è¦æ±‚ã—ã¾ã™ã€‚\n* `force` - SSHã¯ã€å…¥åŠ›ã‚½ãƒ¼ã‚¹ã®ç¨®é¡ã«ã‹ã‹ã‚ã‚‰ãšã€å¸¸ã«ç«¯æœ«ã®å‡ºåŠ›ã‚’è¦æ±‚ã—ã¾ã™ã€‚\n* `auto` -SSHã¯ã€ãƒ­ã‚°ã‚¤ãƒ³ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’é–‹ãã¨ãã«ç«¯æœ«ã®å‡ºåŠ›ã‚’è¦æ±‚ã—ã¾ã™ã€‚\n\nRequestTTYã«forceã‹yesã‚’ã¤ã‘ãªã„ã¨ã€æ¥ç¶šå¾Œã«ttyãŒå‰²ã‚Šå½“ã¦ã‚‰ã‚Œãªã„\n\n### RemoteCommand\n\næ¥ç¶šå¾Œã«ãƒªãƒ¢ãƒ¼ãƒˆã§å®Ÿè¡Œã•ã‚Œã‚‹ã‚³ãƒãƒ³ãƒ‰\nã“ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨åˆ‡æ–­ã•ã‚Œã‚‹\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["shell","terminal"]},"/note/ssh%E3%81%A7-tt%E3%81%8C%E5%BF%85%E8%A6%81%E3%81%AA%E5%A0%B4%E5%90%88":{"title":"sshã§-ttãŒå¿…è¦ãªå ´åˆ","content":"\n[ssh](note/ssh.md) ã§ã‚³ãƒãƒ³ãƒ‰ãŒå®Ÿè¡Œã§ããªã„ã¨ããŒã‚ã‚Šèª¿ã¹ãŸ\n\n[sshã‚’ä½¿ã£ã¦ãƒªãƒ¢ãƒ¼ãƒˆãƒã‚·ãƒ³ã§ã‚³ãƒãƒ³ãƒ‰ã‚’å©ãéš›ã®æ³¨æ„ç‚¹ - è¦šæ›¸](https://satoru-takeuchi.hatenablog.com/entry/2017/04/11/223932)\n\nman(1) [ssh](http://d.hatena.ne.jp/keyword/ssh)ã‚ˆã‚ŠæŠœç²‹:\n\n \u003e \n \u003e -t Force pseudo-terminal allocation. This can be used to execute arbitrary screen-based programs on a remote machine, which can be very useful, e.g. when implementing menu services.\n\nã¾ãšã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆä¸Šã‹ã‚‰crontabã«æ›¸ã„ãŸã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€æ­£ã—ã[IPã‚¢ãƒ‰ãƒ¬ã‚¹](http://d.hatena.ne.jp/keyword/IP%A5%A2%A5%C9%A5%EC%A5%B9)ãŒå¾—ã‚‰ã‚Œã¾ã—ãŸã€‚ã“ã‚Œã§è§£æ±ºã—ãŸã¨æ€ã£ã¦crontabä¸Šã®[ssh](http://d.hatena.ne.jp/keyword/ssh)ã«-tã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ä¸ã—ãŸã‚‚ã®ã®ã€ã¾ãŸã—ã¦ã‚‚[IPã‚¢ãƒ‰ãƒ¬ã‚¹](http://d.hatena.ne.jp/keyword/IP%A5%A2%A5%C9%A5%EC%A5%B9)ã‚’æ›¸ãè¾¼ã‚“ã§ã„ã‚‹ã¯ãšã®ãƒ•ã‚¡ã‚¤ãƒ«ã¯ç©ºã§ã—ãŸã€‚\n\nman(1) [ssh](http://d.hatena.ne.jp/keyword/ssh)ã‚’å†åº¦èª­ã‚“ã§ã¿ã‚‹ã¨ã€ã•ãã»ã©æŠœç²‹ã—ãŸ-tã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®èª¬æ˜ã«ã¯ç¶šããŒã‚ã‚Šã¾ã—ãŸã€‚\n\n \u003e \n \u003e -t Force pseudo-terminal allocation. This can be used to execute arbitrary screen-based programs on a remote machine, which can be very useful, e.g. when implementing menu services. Multiple -t options force tty allocation, even if [ssh](http://d.hatena.ne.jp/keyword/ssh) has no local tty.\n\ncronãªã©ã®ttyã‚’æŒãŸãªã„ãƒ—ãƒ­ã‚»ã‚¹([daemon](http://d.hatena.ne.jp/keyword/daemon))ã‹ã‚‰[ssh](http://d.hatena.ne.jp/keyword/ssh)ã‚’å®Ÿè¡Œã™ã‚‹å ´åˆã¯ã€-tã‚ªãƒ—ã‚·ãƒ§ãƒ³ã ã‘ã§ã¯ä¸ååˆ†ã§ã€-ttã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒå¿…è¦ã¨æ›¸ã„ã¦ã‚ã‚Šã¾ã™ã€‚crontabä¸Šã®[ssh](http://d.hatena.ne.jp/keyword/ssh)ã«-ttã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ä¸ã—ãŸã¨ã“ã‚ã€ç„¡äº‹å•é¡Œã¯è§£æ±ºã§ãã¾ã—ãŸã€‚æœ€åˆã‹ã‚‰manã‚’ã¡ã‚ƒã‚“ã¨èª­ã‚“ã§ãŠã‘ã°ã‚‚ã†å°‘ã—è§£æ±ºãŒæ¥½ã§ã—ãŸã€‚åçœã€‚\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["ssh","terminal"]},"/note/ssh-%E8%B8%8F%E3%81%BF%E5%8F%B0%E3%81%A7-su-user-%E3%81%97%E3%81%A6%E3%81%8B%E3%82%89%E6%8E%A5%E7%B6%9A%E3%81%99%E3%82%8Bssh%E5%85%88%E3%82%92sshconfig%E3%81%A7%E8%A8%AD%E5%AE%9A%E3%81%99%E3%82%8B":{"title":"ssh è¸ã¿å°ã§ su user ã—ã¦ã‹ã‚‰æ¥ç¶šã™ã‚‹sshå…ˆã‚’sshconfigã§è¨­å®šã™ã‚‹","content":"\nãƒ­ãƒ¼ã‚«ãƒ« -\u003e è¸ã¿å° -\u003e è¨±å¯ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã«suã™ã‚‹ -\u003e ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã«ssh ã¨ã„ã†ã‚±ãƒ¼ã‚¹\n\n## functionã‚’ä½œã‚‹\n\n````shell\nfunction ssh_via_bastion() {\n    ssh -t bastion_host \"su - superuser -c 'ssh $1'\"\n}\nssh_via_bastion \u003ctarget_host\u003e\n````\n\nã“ã‚Œã§ã‚‚ã„ã„ãŒã€sshã‚³ãƒãƒ³ãƒ‰ã˜ã‚ƒãªã„ã—ã§ãã‚Œã° `.ssh/config` ã§ä¸€æ‹¬ç®¡ç†ã—ãŸã„\n\n## .ssh/configã«è¨­å®šã™ã‚‹\n\nè¸ã¿å°çµŒç”±ã§çœŸã£å…ˆã«æ€ã„æµ®ã‹ã¶ã®ã¯ `ProxyCommand` ã‚’ä½¿ã£ãŸã‚„ã‚Šæ–¹\n\n````ssh-config\nHost host-you-want-to-access\n  ProxyCommand ssh -W %h:%p \u003cbastion_host\u003e\n  HostName \u003ctarget_host\u003e\n````\n\nã“ã‚Œã¯è¸ã¿å°ã«sshã™ã‚‹ã¨ãã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã€è¸ã¿å°ã‹ã‚‰target_hostã«sshã™ã‚‹ã¨ãã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒåŒã˜ãªã‚‰å•é¡Œãªã„ã€‚\nä»Šå›ã¯è¸ã¿å°ã§åˆ¥ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ãªã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚\n\n`RemoteCommand` ã§ã€sshã—ãŸå…ˆã§ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã‚‹\n\n````ssh-config\nHost host-you-want-to-access\n  # ã“ã‚Œï¼\n  RemoteCommand sudo su - root -c 'ssh \u003ctarget_host\u003e'\n  # ttyå‰²å½“ã—ãªã„ã¨å¯¾è©±ã§ããªã„\n  RequestTTY force\n  HostName \u003cbastion_host\u003e\n````\n\n````shell\n$ ssh host-you-want-to-access\n=\u003e è¸ã¿å°çµŒç”±ã§ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹\n````\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["2023/01/24","shell"]},"/note/ssh-host-key-verification%E3%81%AB%E5%A4%B1%E6%95%97%E3%81%99%E3%82%8B":{"title":"ssh host key verificationã«å¤±æ•—ã™ã‚‹","content":"\n[ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãªã‚‰çŸ¥ã‚‰ãªã„ã¨ãƒ¤ãƒã„SSHã®åŸºç¤ - ã‚‚ã¡ã‚…ã‚ã](https://blog.mothule.com/tools/ssh/tools-ssh-basic#known_hosts%E3%81%A8%E3%81%AF)\n`~/.ssh/known_hosts` ã«ã¯æ¥ç¶šçµŒé¨“ã®ã‚ã‚‹ãƒ›ã‚¹ãƒˆã®å…¬é–‹éµã‚’ä¿å­˜ã—ã¦ã‚ã‚‹\nã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«æ›¸ã„ã¦ã‚ã‚‹å…¬é–‹éµã«ç´ã¥ãç§˜å¯†éµãŒã‚ã‚‹ã‹æ¤œè¨¼ã™ã‚‹ã“ã¨ã§ã€ä¸‡ãŒä¸€ã‚µãƒ¼ãƒå´ã®å…¬é–‹éµãŒå¤‰æ›´ã•ã‚Œã¦ã„ã¦ã‚‚æ°—ä»˜ã‘ã‚‹ä»•çµ„ã¿ã¨ãªã£ã¦ã¾ã™ã€‚\n\n`ssh-keygen -R $host` ã§known_hostsã‚’å‰Šé™¤ã§ãã‚‹\n\n### ssh-keyscan\n\n[ssh-keyscan(1) - OpenBSD manual pages](https://man.openbsd.org/ssh-keyscan.1)\nhostã®å…¬é–‹éµã‚’åé›†ã™ã‚‹\n\n````shell\n$ ssh-keyscan github.com\n# github.com:22 SSH-2.0-babeld-fc31accb\n# github.com:22 SSH-2.0-babeld-fc31accb\n# github.com:22 SSH-2.0-babeld-fc31accb\ngithub.com ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAq2A7hRGmdnm9tUDbO9IDSwBK6TbQa+PXYPCPy6rbTrTtw7PHkccKrpp0yVhp5HdEIcKr6pLlVDBfOLX9QUsyCOV0wzfjIJNlGEYsdlLJizHhbn2mUjvSAHQqZETYP81eFzLQNnPHt4EVVUh7VfDESU84KezmD5QlWpXLmvU31/yMf+Se8xhHTvKSCZIFImWwoG6mbUoWf9nzpIoaSjB+weqqUUmpaaasXVal72J+UX2B+2RPW3RcT0eOzQgqlJL3RKrTJvdsjE3JEAvGq3lGHSZXy28G3skua2SmVi/w4yCE6gbODqnTWlg7+wC604ydGXA8VJiS5ap43JXiUFFAaQ==\n# github.com:22 SSH-2.0-babeld-fc31accb\ngithub.com ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBEmKSENjQEezOmxkZMy7opKgwFB9nkt5YRrYMjNuG5N87uRgg6CLrbo5wAdT/y6v0mKV0U2w0WZ2YB/++Tpockg=\n# github.com:22 SSH-2.0-babeld-fc31accb\ngithub.com ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIOMqqnkVzrm0SdG6UOoqKLsabgH5C9okWi0dh2l9GKJl\n````\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["shell"]},"/note/starship":{"title":"starship","content":"\nhttps://starship.rs\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["2023/01/13","shell"]},"/note/svelte_typescript_svelte-material-ui":{"title":"svelte_typescript_svelte-material-ui","content":"\n[Svelte](note/Svelte.md) \n\n# svelte_typescript_svelte-material-ui\n\n## svelte-material-ui ã‚’å°å…¥ã™ã‚‹\n\nå‚è€ƒ\n\u003chttps://github.com/hperrin/svelte-material-ui\u003e\n\u003chttps://github.com/hperrin/smui-example-rollup/\u003e\n\n### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n````sh\nyarn add -D svelte-material-ui\n````\n\nrollupã§PostCSSã‚’ä½¿ã†ãŸã‚ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’å°å…¥\n\nPostCSS 8 ã‚’ä½¿ç”¨ã™ã‚‹ã‚ˆã†è­¦å‘ŠãŒå‡ºãŸãŸã‚åˆ¥ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\u003chttps://github.com/postcss/postcss/wiki/PostCSS-8-for-end-users\u003e\n\n````sh\nyarn add -D rollup-plugin-postcss\nyarn add -D postcss\n````\n\nsassã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n````sh\nyarn add -D node-sass sass\n````\n\n### rollup.config\n\nrollup.config.js\n\n````\nimport postcss from 'rollup-plugin-postcss'\n\nexport default {\n\n  plugins: [\n    postcss({\n      extract: true,\n      minimize: true,\n      use: [\n        [\n          'sass',\n          {\n            includePaths: ['./theme', './node_modules'],\n          },\n        ],\n      ],\n    }),\n  ]\n\n}\n````\n\n### themeãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ\n\nç©ºãƒ•ã‚¡ã‚¤ãƒ«ã§OK\n\n````sh\ntouch theme/_smui-theme.scss\n````\n\n### ãƒ•ã‚©ãƒ³ãƒˆã€ã‚¢ã‚¤ã‚³ãƒ³ã‚’ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹\n\npublic/index.html\n\n````\n\u003chead\u003e\n \n   \u003clink rel=\"stylesheet\" href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" /\u003e\n   \u003clink rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css?family=Roboto:300,400,500,600,700\" /\u003e\n   \u003clink rel=\"stylesheet\" href=\"https://fonts.googleapis.com/css?family=Roboto+Mono\" /\u003e\n\u003c/head\u003e\n````\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["TypeScript","Svelte"]},"/note/terminal%E3%81%8B%E3%82%89%E3%82%A2%E3%83%97%E3%83%AA%E3%82%B1%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3%E3%82%92%E8%B5%B7%E5%8B%95%E7%B5%82%E4%BA%86%E3%81%99%E3%82%8B":{"title":"terminalã‹ã‚‰ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•ãƒ»çµ‚äº†ã™ã‚‹","content":"\n\\#shell #Mac\n\n### èµ·å‹•\n\n````shell\nosascript -e \"quit app '\u003cã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å\u003e'\"\n````\n\n### çµ‚äº†\n\n````shell\nopen -a \"\u003cã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å\u003e\"\n````\n\n[ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«å¿œã˜ã¦å‡¦ç†ã‚’æŒ¯ã‚Šåˆ†ã‘ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ](blog/ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã«å¿œã˜ã¦å‡¦ç†ã‚’æŒ¯ã‚Šåˆ†ã‘ã‚‹ã‚¹ã‚¯ãƒªãƒ—ãƒˆ.md) ã¨çµ„ã¿åˆã‚ã›ã‚Œã°ã€è‡ªå®…ã§ã¯èµ·å‹•ã—ãŸã„ãŒä¼šç¤¾ã§ã¯ã‚ªãƒ•ã«ã—ãŸã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³(VPNãªã©)ã‚’è‡ªå‹•ã‚ªãƒ³ã‚ªãƒ•ã§ãã‚‹\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["shell","Mac"]},"/note/tig":{"title":"tig","content":"\nTUIã®Gitã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆãƒ„ãƒ¼ãƒ«\n\nè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«\n\n* ~/.tigrc\n* $XDG_CONFIG_HOME/tig/config\n\n## TIPS\n\n### blameã®æ“ä½œ\n\n* blame viewã‚’é–‹ã `b`\n* è¦ªã®ã‚³ãƒŸãƒƒãƒˆã«é¡ã‚‹ è©²å½“è¡Œã§ `,`\n* è¦ªã®ã‚³ãƒŸãƒƒãƒˆã‹ã‚‰ã‚‚ã¨ã®ã‚³ãƒŸãƒƒãƒˆã«æˆ»ã‚‹ `\u003c`\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["2023/02/03","git","terminal"]},"/note/tmux":{"title":"tmux","content":"\n\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["tmux","terminal"]},"/note/tmux%E3%81%A7brew-shellenv%E3%81%8C%E3%81%AA%E3%81%AB%E3%82%82%E8%A1%A8%E7%A4%BA%E3%81%95%E3%82%8C%E3%81%AA%E3%81%84":{"title":"tmuxã§brew shellenvãŒãªã«ã‚‚è¡¨ç¤ºã•ã‚Œãªã„","content":"\n## äº‹è±¡\n\nzshã§ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ã\nâ†’ tmuxã‚³ãƒãƒ³ãƒ‰ã§tmuxã‚’é–‹ã\nâ†’ brewã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸã‚³ãƒãƒ³ãƒ‰ãŒPATHã«å…¥ã£ã¦ã„ãªã„\n\nzshenvã§ `eval $(brew shellenv)` ã§PATHã‚’è¨­å®šã—ã¦ã„ã‚‹ã®ã ãŒã€\n`brew shellenv` ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ã¦ã‚‚ãªã«ã‚‚è¡¨ç¤ºã•ã‚Œãªã„ã®ãŒåŸå› ã®ã‚ˆã†ã ã£ãŸ\n\n### ã‚½ãƒ¼ã‚¹ã‚’è¦‹ã‚‹\n\n\u003chttps://github.com/Homebrew/brew/blob/master/Library/Homebrew/cmd/shellenv.sh\u003e\n\n`HOMEBREW_SHELLENV_PREFIX` ã¨ `HOMEBREW_PREFIX` ãŒåŒã˜å ´åˆã¯ä½•ã‚‚ã—ãªã„ã¨ãªã£ã¦ã„ã‚‹\n\n````shell\n$ echo $HOMEBREW_SHELLENV_PREFIX\n/opt/homebrew\n\n$ echo $HOMEBREW_PREFIX\n/opt/homebrew\n````\n\n### ãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ©ã‚¦ãƒ³ãƒ‰\n\næ­£ã—ã„ã‹ã¯æ€ªã—ã„ãŒã€ç’°å¢ƒå¤‰æ•°ã‚’ä¸€æ—¦ã‚¯ãƒªã‚¢ã™ã‚‹ã“ã¨ã§å†ã‚»ãƒƒãƒˆã•ã‚Œã‚‹\n\n\u003chttps://github.com/Homebrew/brew/issues/11851\u003e\n\n````shell\nunset HOMEBREW_SHELLENV_PREFIX\neval $(/opt/homebrew/bin/brew shellenv)\n````\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["tmux","shell"]},"/note/tmux%E3%81%A7ssh%E6%99%82%E3%81%AB%E8%89%B2%E3%82%92%E5%A4%89%E3%81%88%E3%82%8B":{"title":"tmuxã§sshæ™‚ã«è‰²ã‚’å¤‰ãˆã‚‹","content":"\nhttps://bacchi.me/linux/change-terminal-bgcolor/\n\n````bash\nfunction ssh() {\n  # tmuxèµ·å‹•æ™‚\n  if [[ -n $(printenv TMUX) ]] ; then\n      # ç¾åœ¨ã®ãƒšã‚¤ãƒ³IDã‚’è¨˜éŒ²\n      local pane_id=$(tmux display -p '#{pane_id}')\n      # æ¥ç¶šå…ˆãƒ›ã‚¹ãƒˆåã«å¿œã˜ã¦èƒŒæ™¯è‰²ã‚’åˆ‡ã‚Šæ›¿ãˆ\n      if [[ `echo $1 | grep 'prd'` ]] ; then\n          tmux select-pane -P 'bg=colour52,fg=white'\n      elif [[ `echo $1 | grep 'stg'` ]] ; then\n          tmux select-pane -P 'bg=colour25,fg=white'\n      fi\n\n      # é€šå¸¸é€šã‚Šsshç¶šè¡Œ\n      command ssh $@\n\n      # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®èƒŒæ™¯è‰²ã«æˆ»ã™\n      tmux select-pane -t $pane_id -P 'default'\n  else\n      command ssh $@\n  fi\n}\n````\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["tmux","shell"]},"/note/tmux%E3%81%AEwindow%E3%82%92fzf%E3%81%A7%E7%A7%BB%E5%8B%95%E3%81%99%E3%82%8B":{"title":"tmuxã®windowã‚’fzfã§ç§»å‹•ã™ã‚‹","content":"\nhttps://github.com/sainnhe/tmux-fzf\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["tmux"]},"/note/ts-jest-vue":{"title":"ts-jest-vue","content":"\n# ts-jest vue\n\n## å•é¡Œ\n\nLogo.spec.js -\u003e Logo.spec.ts ã«ãƒªãƒãƒ¼ãƒ ã—ã¦yarn testã—ãŸã‚‰ã‚¨ãƒ©ãƒ¼\n\ntest/Logo.spec.ts\n\n````\nimport { mount } from '@vue/test-utils'\nimport Logo from '@/components/Logo.vue'\n\ndescribe('Logo', () =\u003e {\n  test('is a Vue instance', () =\u003e {\n    const wrapper = mount(Logo)\n    expect(wrapper.vm).toBeTruthy()\n  })\n})\n````\n\n````\n    test/Logo.spec.ts:2:20 - error TS2307: Cannot find module '@/components/Logo.vue' or its corresponding type declarations.\n\n    2 import Search from '@/pages/search.vue'\n                         ~~~~~~~~~~~~~~~~~~~~\n````\n\n## å¯¾å¿œ\n\ntsconfig.json\n\n````\n{\n  \"compilerOptions\": {\n    \"types\": [\n      \"@types/node\",\n      \"@nuxt/types\",\n      \"@types/jest\"\n    ]\n  }\n}\n````\n\n~/@types/vue-shim.d.ts ã‚’ä½œæˆ\nãƒ•ã‚¡ã‚¤ãƒ«åã¯ä½•ã§ã‚‚ã‚ˆã•ã’\n\n````typescript\ndeclare module '*.vue' {\n  import Vue from 'vue'\n  export default Vue\n}\n````\n\n=\u003e `yarn test` ãŒé€šã‚‹ã‚ˆã†ã«ãªã£ãŸ\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["Vuejs"]},"/note/ts-nuxt-storybook%E3%81%AE%E6%A7%8B%E7%AF%89":{"title":"ts-nuxt-storybookã®æ§‹ç¯‰","content":"\n# ts nuxt storybookã®æ§‹ç¯‰\n\n* Nuxt.js 2.14.6\n* TypeScript 4.0.5\n* Storybook 6.1.10\n* @nuxtjs/tailwindcss: 3.1.0\n\n## TypeScriptã§æ›¸ã‹ã‚ŒãŸVueã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ã†\n\n````diff\nmodule.exports = {\n  webpackFinal: async (config) =\u003e {\n\n+    config.module.rules.push({\n+      test: /\\.ts$/,\n+      exclude: /node_modules/,\n+      use: [\n+        {\n+          loader: 'ts-loader',\n+          options: {\n+            appendTsSuffixTo: [/\\.vue$/],\n+            transpileOnly: true,\n+          },\n+        },\n+      ],\n+    })\n\n    return config\n  },\n}\n````\n\n## TailwindCSSã‚’ä½¿ã†\n\n.storybook/main.js\n\n````diff\nmodule.exports = {\n  webpackFinal: async (config) =\u003e {\n\n+    config.module.rules.push({\n+      test: /\\.css$/,\n+      exclude: /node_modules/,\n+      use: [\n+        {\n+          loader: 'postcss-loader',\n+          options: {\n+            ident: 'postcss',\n+            plugins: [require('tailwindcss')('./tailwind.config.js')],\n+          },\n+        },\n+      ],\n+    })\n+\n+    config.module.rules.push({\n+      test: /\\.scss$/,\n+      exclude: /node_modules/,\n+      use: [\n+        {\n+          loader: 'postcss-loader',\n+          options: {\n+            ident: 'postcss',\n+            plugins: [require('tailwindcss')('./tailwind.config.js')],\n+          },\n+        },\n+        {\n+          loader: 'sass-loader',\n+        },\n+      ],\n+    })\n\n    return config\n  },\n}\n````\n\n.storybook/preview.js\n\n````diff\n+ import './tailwind.css'\n````\n\n.storybook/tailwind.css\n\n````diff\n+ @import 'tailwindcss/base';\n+ @import 'tailwindcss/components';\n+ @import 'tailwindcss/utilities';\n````\n\n## å…±é€šã®CSSã‚’èª­ã¿è¾¼ã‚€\n\n.storybook/preview.js\n\n````\n+ import '~/assets/style/common.css'\n````\n\n## Link\n\n[TypeScript](note/TypeScript.md) [Nuxt.js](note/Nuxt.js.md) [Vue.js](note/Vue.js.md)\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["TypeScript","Vuejs"]},"/note/typescript-TypeGuard":{"title":"typescript-TypeGuard","content":"\n[TypeScript](note/TypeScript.md)\n\n# typescript TypeGuard\n\n````\nclass Animal {\n}\n\nclass Duck extends Animal {\n}\n\nclass Tiger extends Animal {\n}\n\nconst isDuck = (animal: Animal): animal is Duck =\u003e \n        animal.type === 'duck' \u0026\u0026 animal.call !== undefined\n\nconst animal = someFunc()\nif (isDuck(animal)) {\n    animal.call()\n}\n````\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["TypeScript"]},"/note/typescript-openapi":{"title":"typescript-openapi","content":"\n# typescript openapi\n\n\u003chttps://github.com/OpenAPITools/openapi-generator/blob/master/docs/generators/typescript-axios.md\u003e\n\npackage.json\n\n````json\n{\n    \"scripts\": {\n        \"openapi-generate\": \"rm -f api_client/*.ts \u0026\u0026 TS_POST_PROCESS_FILE='yarn prettier --write' openapi-generator-cli generate -i http://localhost:8080/api/v3/api-docs -g typescript-axios -o api_client --additional-properties=disallowAdditionalPropertiesIfNotPresent=false,modelPropertyNaming=camelCase,supportsES6=true,useSingleRequestParameter=true --enable-post-process-file\"\n    }\n}\n````\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["TypeScript","OpenAPI"]},"/note/unicode%E3%81%A8emoji%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6":{"title":"unicodeã¨emojiã«ã¤ã„ã¦","content":"\n## ãƒãƒ¼ã‚¸ãƒ§ãƒ³\n\n* emoji 11.0 ã‹ã‚‰ã¯ Unicode ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨æƒã£ã¦ã„ã‚‹\n\n* æœ€æ–°ã¯emoji 14.0\n\n* emoji 1.0 ã§åˆã‚ã¦æ•´ç†ã•ã‚ŒãŸ\n  \n  * \u003chttps://emojipedia.org/emoji-1.0/\u003e\n  * Unicode 6.1 ã¾ã§ã®çµµæ–‡å­— + ã™ã“ã—\n  \u003c!----\u003e\n  \n````\n  The first release of emoji documentation from Unicode, which includes all emojis approved between 2010â€”2015. \n  \n  Published in August 2015, this primarily includes emojis from Unicode 6.0, Unicode 6.1, and clarified which of the new pictographic characters from Unicode 7.0 and Unicode 8.0 would be recommended for emoji presentation.\n  \n  Until this release, no major vendors supported emojis from Unicode 7.0 or above.\n  ````\n\n* Androidã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨Unicode\n  \n  * \u003chttps://developer.android.com/guide/topics/resources/internationalization\u003e\n  * Unicode 6.1 ã¾ã§ã ã£ãŸã‚‰ã ã„ãŸã„ä½¿ãˆã‚‹â€¦ï¼Ÿ\n\n## åˆæˆçµµæ–‡å­—\n\n## ã‚¹ã‚­ãƒ³ãƒˆãƒ¼ãƒ³\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["æ–‡å­—ã‚³ãƒ¼ãƒ‰"]},"/note/unison":{"title":"unison","content":"\n# unison\n\nãƒ•ã‚¡ã‚¤ãƒ«ã®åŒæ–¹å‘åŒæœŸãŒã—ãŸã‹ã£ãŸ\nGoogleDriveã¸ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®ãŸã‚\nrsync + lsyncd ãŒè¦‹ã¤ã‹ã£ãŸ\nãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ€§ã¯é‡è¦–ã—ã¦ãªã„\n\nunisonã‚³ãƒãƒ³ãƒ‰\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":[]},"/note/vim%E3%81%A7%E3%83%9E%E3%83%BC%E3%82%AB%E3%83%BC%E6%96%87%E5%AD%97%E5%88%97%E3%82%92%E5%9F%8B%E3%82%81%E8%BE%BC%E3%82%93%E3%81%A7%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E6%8A%98%E3%82%8A%E3%81%9F%E3%81%9F%E3%82%80":{"title":"vimã§ãƒãƒ¼ã‚«ãƒ¼æ–‡å­—åˆ—ã‚’åŸ‹ã‚è¾¼ã‚“ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŠ˜ã‚ŠãŸãŸã‚€","content":"\n[Vim](note/Vim.md) ã®æŠ˜ã‚ŠãŸãŸã¿æ©Ÿèƒ½ã‚’ä½¿ã£ã¦ã€markerã‚’åŸ‹ã‚è¾¼ã¿å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç§»å‹•ã—ã‚„ã™ãã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚\n\n[ãƒãƒ¼ã‚«ãƒ¼æ–‡å­—åˆ—ã‚’åŸ‹ã‚è¾¼ã‚“ã§ã€ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã‚’æŠ˜ã‚Šç•³ã¿è¡¨ç¤ºã™ã‚‹ â€” åç„¡ã—ã®vimä½¿ã„](https://nanasi.jp/articles/howto/fold/fold-marker.html)\n[.vimrcæ•´ç†è¡“ - Qiita](https://qiita.com/naoty_k/items/674787bc2d9885f81a0b)\n\n## markerã§å›²ã‚€\n\nvimã«ã¯ã€ã‚³ãƒ¼ãƒ‰ã®ä¸­ã«ã‚ã‚‹ç›®å°ã¨ãªã‚‹ãƒãƒ¼ã‚«ãƒ¼ ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€Œ{{{ã€ã¨ã€Œ}}}ã€ï¼‰ ã‚’æ›¸ã„ã¦ãŠãã“ã¨ã§ã€ãã®ãƒãƒ¼ã‚«ãƒ¼ã«å›²ã¾ã‚ŒãŸç¯„å›²ã‚’æŠ˜ã‚Šç•³ã‚€æ©Ÿèƒ½ãŒã‚ã‚Šã¾ã™ã€‚\nã•ã‚‰ã«æ•°å­—ã‚’ã¤ã‘ã‚‹ã“ã¨ã§éšå±¤ã‚’è¨­å®šã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹ã€‚\n\n````vim\n\" åŸºæœ¬è¨­å®š {{{1\n\nset nocompatible\nset number\n\n\" ãƒãƒƒãƒ”ãƒ³ã‚° {{{1\n\nnnoremap H b\nnnoremap J }\nnnoremap K {\nnnoremap L w\n\n\" ã‚«ãƒ©ãƒ¼ã‚¹ã‚­ãƒ¼ãƒ  {{{1\n\nsyntax on\ncolorscheme hybrid\n\n\" ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ {{{1\n\n\" neobundle {{{2\n\n...\n\n\" unite.vim {{{2\n\n...\n\n\" neocomplcache {{{2\n\n...\n\n````\n\n## modelineã‚’æœ‰åŠ¹ã«ã™ã‚‹\n\n[ãƒ¢ãƒ¼ãƒ‰ãƒ©ã‚¤ãƒ³ã‚’ä½¿ã£ã¦ã€ãƒ•ã‚¡ã‚¤ãƒ«ã”ã¨ã«vimã‚¨ãƒ‡ã‚£ã‚¿ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹ã€‚ â€” åç„¡ã—ã®vimä½¿ã„](http://nanasi.jp/articles/howto/file/modeline.html)\n\n````vim\n\" ãƒ¢ãƒ¼ãƒ‰ãƒ©ã‚¤ãƒ³ã‚’æœ‰åŠ¹ã«ã™ã‚‹\nset modeline\n\n\" 3è¡Œç›®ã¾ã§ã‚’ãƒ¢ãƒ¼ãƒ‰ãƒ©ã‚¤ãƒ³ã¨ã—ã¦æ¤œç´¢ã™ã‚‹\nset modelines=3\n````\n\n## modelineã§æŠ˜ã‚ŠãŸãŸã¿ã®è¨­å®šã‚’ã™ã‚‹\n\nãƒ•ã‚¡ã‚¤ãƒ«ã®æœ€åˆã‹æœ€å¾Œã«ä»¥ä¸‹ã‚’è¿½åŠ ã™ã‚‹ã€‚\n\n````vim\n\" vim: foldmethod=marker\n\" vim: foldcolumn=3\n````\n\n## foldingç³»ã®ã‚³ãƒãƒ³ãƒ‰\n\n[vimã§æŠ˜ç•³ã¿(folding)ã¾ã¨ã‚ - Qiita](https://qiita.com/ysuzuki19/items/23a998d3636684ec1ca1)\n\nè©³ã—ãã¯ `help fold`\n\n````\nã‚³ãƒãƒ³ãƒ‰\tå‹•ä½œ\nzf\tæŠ˜ç•³ä½œæˆ\nzd\tæŠ˜ç•³å‰Šé™¤\nzD\tæŠ˜ç•³ã‚’å…¨ã¦å‰Šé™¤\nzE\tãƒšãƒ¼ã‚¸å…¨ä½“ã®æŠ˜ç•³ã¿ã‚’å…¨ã¦å‰Šé™¤\nvisual + zf\té¸æŠç¯„å›²ã‚’æŠ˜ç•³\n2 + zF\t2è¡ŒæŠ˜ç•³\n2,5 fo\t2è¡Œã‹ã‚‰5è¡Œã‚’æŠ˜ç•³\nzo\tæŠ˜ç•³ã‚’å‰Šé™¤ã›ãšé–‹ã\nzO\tæŠ˜ç•³ã¿ã‚’å…¨ã¦å‰Šé™¤ã›ãšé–‹ã\nzc\té–‹ã„ã¦ã„ã‚‹æŠ˜ç•³ã‚’é–‰ã˜ã‚‹\nzC\té–‹ã„ã¦ã„ã‚‹æŠ˜ç•³ã‚’å…¨ã¦é–‰ã˜ã‚‹\nza\tæŠ˜ç•³ã®çŠ¶æ…‹ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹\nzA\tå…¨ã¦ã®æŠ˜ç•³ã®çŠ¶æ…‹ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹\nzv\tã‚«ãƒ¼ã‚½ãƒ«è¡Œã‚’è¡¨ç¤º\nzx\tæŠ˜ç•³ã®Undo\nzX\tæŠ˜ç•³ã®Redo\nzm\tãƒšãƒ¼ã‚¸å†…ã®æŠ˜ç•³ã‚’ä¸€æ®µéšé–‰ã˜ã‚‹\nzM\tãƒšãƒ¼ã‚¸å†…ã®æŠ˜ç•³ã‚’å…¨æ®µéšé–‰ã˜ã‚‹\nzr\tãƒšãƒ¼ã‚¸å†…ã®æŠ˜ç•³ã‚’ä¸€æ®µéšé–‹ã\nzR\tãƒšãƒ¼ã‚¸å†…ã®æŠ˜ç•³ã‚’å…¨æ®µéšé–‹ã\n2,5 foldo\t2è¡Œã‹ã‚‰5è¡Œã®æŠ˜ç•³ã‚’é–‹ã\n2,5 foldc\t2è¡Œã‹ã‚‰5è¡Œã®æŠ˜ç•³ã‚’é–‰ã˜ã‚‹\nzn\tãƒ•ã‚¡ã‚¤ãƒ«å…¨ä½“ã®æŠ˜ç•³ã‚’é–‹ã\nzN\tãƒ•ã‚¡ã‚¤ãƒ«å…¨ä½“ã®æŠ˜ç•³ã‚’é–‰ã˜ã‚‹\nzi\tãƒ•ã‚¡ã‚¤ãƒ«å…¨ä½“ã®æŠ˜ç•³ã®çŠ¶æ…‹ã‚’åè»¢\nzj\tä¸Šã®æŠ˜ç•³ã«ç§»å‹•\nzk\tä¸‹ã®æŠ˜ç•³ã«ç§»å‹•\n````\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["vim"]},"/note/vim%E3%81%A7buffer%E5%90%8C%E5%A3%AB%E3%81%AEdiff%E3%82%92%E5%8F%96%E3%82%8B":{"title":"vimã§bufferåŒå£«ã®diffã‚’å–ã‚‹","content":"\n1. vimã‚’é–‹ã\n1. ãƒ†ã‚­ã‚¹ãƒˆã‚’è²¼ã‚Šä»˜ã‘ã‚‹\n1. `:vnew` ã§ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’é–‹ã\n1. æ¯”è¼ƒã—ãŸã„ãƒ†ã‚­ã‚¹ãƒˆã‚’é–‹ã„ãŸã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã«è²¼ã‚Šä»˜ã‘\n1. `:windo diffthis`\n1. `:diffoff` ã§çµ‚äº†\n\n[ãƒ•ã‚¡ã‚¤ãƒ«åŒå£«ã®æ¯”è¼ƒã‚’vimdiffã§å–ã‚‹](note/ãƒ•ã‚¡ã‚¤ãƒ«åŒå£«ã®æ¯”è¼ƒã‚’vimdiffã§å–ã‚‹.md)\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["vim"]},"/note/vim%E3%83%86%E3%82%AF%E3%83%8B%E3%83%83%E3%82%AF":{"title":"vimãƒ†ã‚¯ãƒ‹ãƒƒã‚¯","content":"\n## ç¾åœ¨ã®ãƒ•ã‚¡ã‚¤ãƒ«å†…ã‚’grepã™ã‚‹\n\nQuickFixã«ã‚ãŸã™ã¨ã„ã„æ„Ÿã˜\n\n`:grep /pattern/ % | cw`\n\n## vimgrepã‚’ripgrepã§è¡Œã†\n\n.vimrcã«ä»¥ä¸‹ã‚’æ›¸ã\n\n````vim\n\" Use extend grep\nif executable('rg')\n    let \u0026grepprg = 'rg --vimgrep --no-hidden'\n    set grepformat=%f:%l:%c:%m\nendif\n````\n\n## `\u003cC-r\u003e` ã‚’ä½¿ã†\n\nã‚³ãƒãƒ³ãƒ‰ãƒ¢ãƒ¼ãƒ‰ã§ `\u003cC-r\u003e` ã®ã‚ã¨ã«ç¶šã‘ã¦å…¥åŠ›ã™ã‚‹ã“ã¨ã§ã€ã„ã‚ã„ã‚ãªãƒšãƒ¼ã‚¹ãƒˆãŒã§ãã‚‹\n\n````\n:help \u003cC-r\u003e\n\nCTRL-R {register}\t\t\t\t\t*c_CTRL-R* *c_\u003cC-R\u003e*\n\t\t\t'\"'\tthe unnamed register, containing the text of\n\t\t\t\tthe last delete or yank\n\t\t\t'%'\tthe current file name\n\t\t\t'#'\tthe alternate file name\n\t\t\t'*'\tthe clipboard contents (X11: primary selection)\n\t\t\t'+'\tthe clipboard contents\n\t\t\t'/'\tthe last search pattern\n\t\t\t':'\tthe last command-line\n\t\t\t'-'\tthe last small (less than a line) delete\n\t\t\t'.'\tthe last inserted text\n\n\nCTRL-R CTRL-F\t\t\t\t*c_CTRL-R_CTRL-F* *c_\u003cC-R\u003e_\u003cC-F\u003e*\nCTRL-R CTRL-P\t\t\t\t*c_CTRL-R_CTRL-P* *c_\u003cC-R\u003e_\u003cC-P\u003e*\nCTRL-R CTRL-W\t\t\t\t*c_CTRL-R_CTRL-W* *c_\u003cC-R\u003e_\u003cC-W\u003e*\nCTRL-R CTRL-A\t\t\t\t*c_CTRL-R_CTRL-A* *c_\u003cC-R\u003e_\u003cC-A\u003e*\nCTRL-R CTRL-L\t\t\t\t*c_CTRL-R_CTRL-L* *c_\u003cC-R\u003e_\u003cC-L\u003e*\n\t\tInsert the object under the cursor:\n\t\t\tCTRL-F\tthe Filename under the cursor\n\t\t\tCTRL-P\tthe Filename under the cursor, expanded with\n\t\t\t\t'path' as in |gf|\n\t\t\tCTRL-W\tthe Word under the cursor\n\t\t\tCTRL-A\tthe WORD under the cursor; see |WORD|\n\t\t\tCTRL-L\tthe line under the cursor\n\n````\n\n[æ„›ç”¨ã—ã¦ã„ã‚‹vimãƒ—ãƒ©ã‚°ã‚¤ãƒ³](blog/æ„›ç”¨ã—ã¦ã„ã‚‹vimãƒ—ãƒ©ã‚°ã‚¤ãƒ³.md)\n[vim ä½¿ã£ã¦ã„ã‚‹plugin](note/vim%20ä½¿ã£ã¦ã„ã‚‹plugin.md)\n[ãƒ•ã‚¡ã‚¤ãƒ«åŒå£«ã®æ¯”è¼ƒã‚’vimdiffã§å–ã‚‹](note/ãƒ•ã‚¡ã‚¤ãƒ«åŒå£«ã®æ¯”è¼ƒã‚’vimdiffã§å–ã‚‹.md)\n[Vimã§ãƒãƒƒãƒ•ã‚¡åŒå£«ã®å·®åˆ†ã‚’ã¨ã‚‹](note/Vimã§ãƒãƒƒãƒ•ã‚¡åŒå£«ã®å·®åˆ†ã‚’ã¨ã‚‹.md)\n[vimã§bufferåŒå£«ã®diffã‚’å–ã‚‹](note/vimã§bufferåŒå£«ã®diffã‚’å–ã‚‹.md)\n[Vimã§ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆã‚’é€£ç•ªã§å…¥åŠ›ã™ã‚‹](note/Vimã§ã‚¢ãƒ«ãƒ•ã‚¡ãƒ™ãƒƒãƒˆã‚’é€£ç•ªã§å…¥åŠ›ã™ã‚‹.md)\n[fzf.vimã®ä½¿ã„æ–¹](note/fzf.vimã®ä½¿ã„æ–¹.md)\n[vimã§ãƒãƒ¼ã‚«ãƒ¼æ–‡å­—åˆ—ã‚’åŸ‹ã‚è¾¼ã‚“ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŠ˜ã‚ŠãŸãŸã‚€](note/vimã§ãƒãƒ¼ã‚«ãƒ¼æ–‡å­—åˆ—ã‚’åŸ‹ã‚è¾¼ã‚“ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æŠ˜ã‚ŠãŸãŸã‚€.md)\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["vim"]},"/note/vim-%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8Bplugin":{"title":"vim ä½¿ã£ã¦ã„ã‚‹plugin","content":"\n2020å¹´ç‰ˆ [vim](Vim.md) ãƒ—ãƒ©ã‚°ã‚¤ãƒ³\n\n\u003chttps://engineering.mercari.com/blog/entry/mercari_codecast_1/\u003e\nã“ã‚Œã‚’ã¿ã¦çœŸé¢ç›®ã« [vim](Vim.md) ã§æ›¸ã“ã†ã¨æ€ã£ãŸ\nå°ã•ã„ã‚„ã¤ãªã‚‰ååˆ†\n\n## vim-gitgutter\n\nå¤‰æ›´è¡Œã«ãƒãƒ¼ã‚¯è¡¨ç¤º\n\n## fugitive\n\nGitæ“ä½œ\n\n### æ³¨æ„\n\n* `Gstatus` ã‚’å®Ÿè¡Œã™ã‚‹ã¨shellã‚’èµ·å‹•ã™ã‚‹ã£ã½ã„ã®ã§ã€zshãªã©ã§pluginã‚‚ã‚Šã‚‚ã‚Šã ã£ãŸã‚Šã™ã‚‹ã¨é…ãã¦ä½¿ã„ç‰©ã«ãªã‚‰ãªã„\n* `set shell=bash\\ -l` ã¨ã—ã¦ãŠãã¨è§£æ¶ˆã•ã‚Œã‚‹\n\n## defx\n\nãƒ•ã‚¡ã‚¤ãƒ©ãƒ¼\nãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ã‚­ãƒ¼ãƒãƒƒãƒ”ãƒ³ã‚°ãŒãªã„ã®ã§è‡ªåˆ†ã§è¨­å®šã™ã‚‹\n`ryanoasis/vim-devicons`, `kristijanhusak/defx-icons` ã‚’å…¥ã‚Œã‚‹ã¨ã‚¢ã‚¤ã‚³ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹\n\n## machakann/vim-sandwich\n\nå›²ã‚ã‚‹\n\n* `sa` ã§è¿½åŠ ã€`sr` ã§ç½®ãæ›ãˆã€`sb` ã§å‰Šé™¤\n* `saiwt` ã§tagã‚’è¿½åŠ \n* `sritt` ã§tagã‚’å¤‰æ›´\n  * emmet ãƒ©ã‚¤ã‚¯ã«ã€`div.main` ãªã©ã¨ã™ã‚‹ã¨ `\u003cdiv class=\"main\"\u003e\u003c/div\u003e` ã«å±•é–‹ã•ã‚Œã‚‹\n\n## junegunn/vim-easy-align\n\nalignment\n\n* `gaip*|` ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’æ•´å½¢\n* `gaip\u003cRight\u003e*,` ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š\n\n## terryma/vim-multiple-cursors\n\nvscode ã‚„ Sublime Text ã®è¤‡æ•°é¸æŠãŒã§ãã‚‹ \u003cc-n\u003e\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["vim"]},"/note/vim-conceal":{"title":"vim-conceal","content":"\n# vim conceal\n\n## ãã£ã‹ã‘\n\nvimã§markdownã‚’ç·¨é›†ä¸­ã€\\_æ–œä½“_ã‚„**å¤ªå­—**ã‚’è¡¨ã™ãŸã‚ã®ã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ã‚„ã‚¢ã‚¹ã‚¿ãƒªã‚¹ã‚¯ãŒè¡¨ç¤ºã•ã‚Œãªããªã£ã¦ã—ã¾ã£ãŸã€‚\nã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã¨ç·¨é›†ã—ã¦ã‚‹ä½ç½®ãŒãšã‚Œã¦ã—ã¾ã£ãŸã‚Šã€ã©ã“ã«éš ã‚Œã¦ã„ã‚‹ã®ã‹ãŒã‚ã‹ã‚Šã«ããã¦è¨˜å·ã˜ã‚ƒãªãã¦æ–‡å­—ã®ã»ã†ã‚’æ¶ˆã—ã¦ã—ã¾ã£ãŸã‚Šã¨ä¸ä¾¿ã ã£ãŸã®ã§ã€è¦‹ãˆã‚‹ã‚ˆã†ã«ã—ãŸã„ã€‚\n\n* å€‹äººã®æ„Ÿè¦šã«ã‚ˆã‚‹ã¨æ€ã†ãŒã€ç§ã¯ãƒ†ã‚­ã‚¹ãƒˆç·¨é›†ä¸­ã¯ã‚ã‚‹ãŒã¾ã¾ã«è¡¨ç¤ºã—ã¦ã»ã—ã„\n* colorschemeã§ã‚ã‹ã‚Šã‚„ã™ãè¡¨ç¤ºã•ã‚Œã‚‹ã®ã§ã€éš ã™å¿…è¦ãŒãªã„\n\n## èª¿æŸ»\n\n.vimrcã‚„pluginã‚’ON/OFFã—ãªãŒã‚‰ç¢ºèªã—ãŸçµæœã€ [Yggdroot/indentLine](https://github.com/Yggdroot/indentLine) ã‚’æœ‰åŠ¹ã«ã—ã¦ã„ã‚‹ã¨ç™ºç”Ÿã™ã‚‹ã“ã¨ãŒã‚ã‹ã£ãŸã€‚\nREADMEã§ã“ã¡ã‚‰ã®è¨˜è¼‰ã‚’è¦‹ã¤ã‘ãŸã€‚\n\n \u003e \n \u003e Change Conceal Behaviour\n \u003e \n \u003e This plugin enables the Vim conceal feature which automatically hides stretches of text based on syntax highlighting. This setting will apply to all syntax items.\n \u003e \n \u003e For example, users utilizing the built in json.vim syntax file will no longer see quotation marks in their JSON files.\n\nã©ã†ã‚„ã‚‰concealã¨ã„ã†è¨­å®šã§ã€ä¾‹ãˆã°JSONã®quotationã‚’éè¡¨ç¤ºã«ã™ã‚‹ã¨ã„ã£ãŸã“ã¨ãŒã§ãã‚‹ã‚‰ã—ã„ã€‚\n\nconcealã«ã¤ã„ã¦ã®è¨­å®šã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãŒä»¥ä¸‹ã®ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹ã€‚\n\n````\nlet g:indentLine_concealcursor = 'inc'\nlet g:indentLine_conceallevel = 2\n````\n\n## å¯¾å¿œæ–¹æ³•\n\ndein.nvimã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã®ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ã«è¨­å®šã—ãŸ\n\n````\n[[plugins]]\nrepo = 'Yggdroot/indentLine'\nhook_add = '''\n    let g:indentLine_conceallevel = 0\n'''\n````\n\n## çµæœ\n\nã‚¢ãƒ³ãƒ€ãƒ¼ã‚¹ã‚³ã‚¢ã‚„ã‚¢ã‚¹ã‚¿ãƒªã‚¹ã‚¯ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«ãªã£ãŸ\n\n## conceal ã¨ã¯\n\n\u003chttps://vim-jp.org/vimdoc-ja/syntax.html#conceal\u003e\n\n### conceallevel\n\n \u003e \n \u003e ````\n \u003e 0               ãƒ†ã‚­ã‚¹ãƒˆã¯é€šå¸¸é€šã‚Šè¡¨ç¤ºã•ã‚Œã‚‹\n \u003e 1               å„ãƒ–ãƒ­ãƒƒã‚¯ã® Conceal ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã¯ä¸€ã¤ã®æ–‡å­—ã«ç½®æ›\n \u003e                 ã•ã‚Œã‚‹ã€‚æ§‹æ–‡ã‚¢ã‚¤ãƒ†ãƒ ã«ä»£ç†æ–‡å­— (:syn-cchar å‚ç…§) ãŒ\n \u003e                 æŒ‡å®šã•ã‚Œã¦ã„ãªã„ã¨ãã¯ 'listchars' ã®è¨­å®šãŒä½¿ã‚ã‚Œã‚‹\n \u003e                  (åˆæœŸè¨­å®šã¯ã‚¹ãƒšãƒ¼ã‚¹)ã€‚\n \u003e                 æ–‡å­—ã¯ \"Conceal\" å¼·èª¿ã‚°ãƒ«ãƒ¼ãƒ—ã‚’ä½¿ã£ã¦å¼·èª¿è¡¨ç¤ºã•ã‚Œã‚‹ã€‚\n \u003e 2               Conceal ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã¯æ§‹æ–‡ã‚¢ã‚¤ãƒ†ãƒ ã«æŒ‡å®šã•ã‚ŒãŸä»£ç†æ–‡\n \u003e                 å­— (:syn-cchar) ã¨ã—ã¦è¡¨ç¤ºã•ã‚Œã‚‹ã€‚ãã‚ŒãŒæŒ‡å®šã•ã‚Œã¦\n \u003e                 ã„ãªã„ã¨ãã¯å®Œå…¨ã«éè¡¨ç¤ºã«ãªã‚‹ã€‚\n \u003e 3               Conceal ã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆã¯å®Œå…¨ã«éè¡¨ç¤ºã«ãªã‚‹ã€‚\n \u003e ````\n\n### concealcursor\n\n \u003e \n \u003e ````\n \u003e    ã‚«ãƒ¼ã‚½ãƒ«è¡Œã®ãƒ†ã‚­ã‚¹ãƒˆã‚’ Conceal è¡¨ç¤ºã™ã‚‹ãƒ¢ãƒ¼ãƒ‰ã‚’è¨­å®šã™ã‚‹ã€‚ç¾åœ¨ã®ãƒ¢ãƒ¼ãƒ‰\n \u003e    ãŒã“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³å€¤ã«å«ã¾ã‚Œã¦ã„ã‚‹ãªã‚‰ä»–ã®è¡Œã¨åŒæ§˜ã« Conceal è¡¨ç¤ºã•ã‚Œ\n \u003e    ã‚‹ã€‚\n \u003e      n             ãƒãƒ¼ãƒãƒ«ãƒ¢ãƒ¼ãƒ‰\n \u003e      v             ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ¢ãƒ¼ãƒ‰\n \u003e      i             æŒ¿å…¥ãƒ¢ãƒ¼ãƒ‰\n \u003e      c             ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ç·¨é›† ('incsearch' ç”¨)\n \u003e ````\n\n\u003chttps://mfumi.hatenadiary.org/entry/20140328/1395946070\u003e\n\u003chttps://qiita.com/xeno14/items/8d1c8f38595337bab7c8\u003e\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["vim"]},"/note/vim-lsp":{"title":"vim-lsp","content":"\n# vim-lsp\n\n* ale.vim\n  * lintã‚¨ãƒ³ã‚¸ãƒ³\n  * lspã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ\n* prabirshrestha/vim-lsp\n  * lspã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ\n* mattn/vim-lsp-settings\n  * vim-lspã®è¨­å®šã‚’ã‹ã‚“ãŸã‚“ã«ã™ã‚‹\n  * language serverã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’ `:LspInstallServer` `:LspUninstallServer` ã§è¡Œã†\n  * \n    ````\n      hook_add = '''\n      let g:lsp_settings = {}\n      let g:lsp_settings_filetype_go = ['gopls', 'golangci-lint-langserver']\n      let g:lsp_settings['gopls'] = {\n          \\  'workspace_config': {\n          \\    'usePlaceholders': v:true,\n          \\  },\n          \\  'initialization_options': {\n          \\    'usePlaceholders': v:true,\n          \\  },\n          \\}\n      '''\n    ````\n  \n  ````\n  ````\n\n* prabirshrestha/asyncomplete.vim\n  * è£œå®Œãƒ—ãƒ©ã‚°ã‚¤ãƒ³\n* prabirshrestha/asyncomplete-lsp.vim\n  * lspç”¨ã®è£œå®Œ\n  * \n    ````\n      [[plugins]]\n      repo = 'prabirshrestha/asyncomplete.vim'\n      \n      [[plugins]]\n      repo = 'prabirshrestha/asyncomplete-lsp.vim'\n      on_ft = ['python', 'go']\n      depends = ['asyncomplete.vim', 'vim-lsp']\n    ````\n  \n  ````\n  ````\n\n* ã‚¹ãƒ‹ãƒšãƒƒãƒˆè£œå®Œ\n  * prabirshrestha/asyncomplete-ultisnips.vim\n  * SirVer/ultisnips\n  * hona/vim-snippets\n\n## LSP Language Server Protocol\n\n* IDEã¿ãŸã„ãªæ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ã‚µãƒ¼ãƒãƒ¼\n\n## Link\n\n* [fzf.vimã®ä½¿ã„æ–¹](note/fzf.vimã®ä½¿ã„æ–¹.md)\n* [vim ä½¿ã£ã¦ã„ã‚‹plugin](note/vim%20ä½¿ã£ã¦ã„ã‚‹plugin.md)\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["vim","lsp"]},"/note/vscode%E6%8B%A1%E5%BC%B5":{"title":"vscodeæ‹¡å¼µ","content":"\n[VisualStudio Code](note/VisualStudio%20Code.md) ã®æ‹¡å¼µæ©Ÿèƒ½\n\n## Settings Sync\n\n\u003chttps://code.visualstudio.com/docs/editor/settings-sync\u003e\n\nå…¬å¼ã®è¨­å®šåŒæœŸæ©Ÿèƒ½ãŒ[ver1.48](https://code.visualstudio.com/updates/v1_48#_settings-sync) ã§ãƒªãƒªãƒ¼ã‚¹ã•ã‚ŒãŸ\n\n## [Project Manager](https://marketplace.visualstudio.com/items?itemName=alefragnani.project-manager)\n\nãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã‚„ã™ããªã‚‹\næ¨™æº–ã§ã‚‚Openã‚„Open Recentãªã©ã‹ã‚‰ãƒ•ã‚©ãƒ«ãƒ€ã‚’é–‹ã‘ã‚‹ãŒã€ã“ã‚Œã‚’ä½¿ã†ã¨ã‚ˆãä½¿ã†ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚„ã€gitç®¡ç†ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ã™ãé–‹ãã“ã¨ãŒã§ãã‚‹\n\n* `Project Manager: Save Project` ç¾åœ¨ã®windowã‚’projectã«ä¿å­˜ã™ã‚‹\n* `Project Manager: Edit Project` ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§ã‚’æ‰‹ã§ç·¨é›†ã™ã‚‹(`projects.json`)\n  * `\"projectManager.projectsLocation\": \"~/vscode/\"` setting.jsonã§å ´æ‰€ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã‚‚ã§ãã‚‹\n* `Project Manager: List Projects to Open` ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§ã‚’è¡¨ç¤ºã—ã¦é–‹ã\n  * å…¥åŠ›ã§çµã‚Šè¾¼ã‚€ã“ã¨ãŒã§ãã‚‹ã®ã§ã€é–‹ãã¨ãã¯ã“ã¡ã‚‰ãŒä¾¿åˆ©\n* `Project Manager: List Projects to Open in New Window` ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§ã‚’è¡¨ç¤ºã—ã¦æ–°ã—ã„ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã§é–‹ã\n* `Project Manager: Refresh Projects` Refresh the cached projects\n\n### Gitç®¡ç†ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä¸€è¦§ã‚’è¡¨ç¤º\n\nsettings.jsonã«ã€gitãƒªãƒã‚¸ãƒˆãƒªä¸€è¦§ã®ã‚ã‚‹ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡å®šã™ã‚‹\n`\"projectManager.git.baseFolders\": \"~/repos\"`\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["vscode"]},"/note/vue-awesome-swiper%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%82%AB%E3%83%AB%E3%83%BC%E3%82%BB%E3%83%AB%E9%A2%A8UI%E3%82%92%E4%BD%9C%E3%81%A3%E3%81%A6%E3%81%BF%E3%81%9F":{"title":"vue-awesome-swiperã‚’ä½¿ã£ã¦ã‚«ãƒ«ãƒ¼ã‚»ãƒ«é¢¨UIã‚’ä½œã£ã¦ã¿ãŸ","content":"\n# vue-awesome-swiperã‚’ä½¿ã£ã¦ã‚«ãƒ«ãƒ¼ã‚»ãƒ«é¢¨UIã‚’ä½œã£ã¦ã¿ãŸ\n\n\u003chttps://github.surmon.me/vue-awesome-swiper/\u003e\n\u003chttps://swiperjs.com/swiper-api\u003e\n\n\u003chttps://www.kabanoki.net/4783/\u003e\n\u003chttps://mykii.blog/nuxt-vue-awesome-swiper/\u003e\n\u003chttps://webrandum.net/js-library-swiper/\u003e\n\n````sh\nyarn add swiper vue-awesome-swiper\n````\n\n### globalã«å®šç¾©ã™ã‚‹\n\n````\nimport Vue from 'vue'\nimport VueAwesomeSwiper from 'vue-awesome-swiper'\n\n// import style (\u003e= Swiper 6.x)\nimport 'swiper/swiper-bundle.css'\n\n// import style (\u003c= Swiper 5.x)\nimport 'swiper/css/swiper.css'\n\nVue.use(VueAwesomeSwiper, /* { default options with global component } */)\n````\n\n### Vueã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å®šç¾©ã™ã‚‹\n\nslide.js\n\n````js\nimport { Swiper, SwiperSlide, directive } from 'vue-awesome-swiper'\n\n// import style (\u003e= Swiper 6.x)\nimport 'swiper/swiper-bundle.css'\n\n// import style (\u003c= Swiper 5.x)\nimport 'swiper/css/swiper.css'\n\nexport default {\n  components: {\n    Swiper,\n    SwiperSlide\n  },\n  directives: {\n    swiper: directive\n  }\n}\n````\n\n### å®Ÿè·µä¾‹\n\nTypeScript ã§ vue-property-decorator ã‚’ä½¿ã£ã¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆ\n\n````ts\n\u003ctemplate\u003e\n  \u003cswiper\n    ref=\"swiperSection\"\n    :options=\"swiperOption\"\n    @slide-change=\"onSlideChange\"\n  \u003e\n    \u003cswiper-slide v-for=\"item in items\" :key=\"item.id\"\u003e\n      \u003cdiv\u003e\n        {{ item.name }}\n      \u003c/div\u003e\n    \u003c/swiper-slide\u003e\n  \u003c/swiper\u003e\n\u003c/template\u003e\n\n\u003cscript lang=\"ts\"\u003e\nimport { Vue, Component, Prop } from 'vue-property-decorator'\nimport type { SwiperOptions } from 'swiper'\nimport SwiperClass from 'swiper'\nimport { Swiper, SwiperSlide } from 'vue-awesome-swiper'\nimport 'swiper/swiper-bundle.css'\n\n@Component({\n  components: {\n    Swiper,\n    SwiperSlide,\n  },\n})\nexport default class Slide extends Vue {\n  items = [\n    { id: 'cat', name: 'tama' },\n    { id: 'dog', name: 'pochi' },\n  ]\n\n\n  $refs!: {\n    swiperSection: InstanceType\u003ctypeof Swiper\u003e\n  }\n\n  // Swiperã®è¨­å®š\n  get swiperOption(): SwiperOptions {\n    return {\n      slidesPerView: 'auto',\n      centeredSlides: true,\n      initialSlide: 1,\n      spaceBetween: 5,\n    }\n  }\n\n  get swiper(): SwiperClass | null {\n    return this.$refs.swiperSection.$swiper\n  }\n\n  /**\n   * ã‚¹ãƒ©ã‚¤ãƒ‰å¤‰æ›´ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼\n   */\n  onSlideChange() {\n    if (!this.sectionSlider) {\n      return\n    }\n\n    this.$emit('updateSlide', this.sectionSlider.activeIndex)\n  }\n}\n\u003c/script\u003e\n\n\u003cstyle scoped\u003e\n/* ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§æŒ‡å®šã•ã‚Œã¦ã„ã‚‹classã‚’ä¸Šæ›¸ã */\n.swiper-slide:nth-child(odd) {\n  background-color: #aebeff;\n}\n\u003c/style\u003e\n````\n\n### Swiper6.xç³»ã‚’å…¥ã‚Œã‚‹ã¨ã€Navigationã¨PaginationãŒæ©Ÿèƒ½ã—ãªã„\n\n\u003chttps://github.com/surmon-china/vue-awesome-swiper/issues/680\u003e\n\n````\nimport Vue from 'vue'\nimport { Swiper as SwiperClass, Pagination, Navigation } from 'swiper/swiper.esm'\nimport getAwesomeSwiper from 'vue-awesome-swiper/dist/exporter'\n\n// import style\nimport 'swiper/swiper-bundle.min.css'\n\nSwiperClass.use([Pagination, Navigation])\nVue.use(getAwesomeSwiper(SwiperClass))\n````\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["Vuejs","TypeScript"]},"/note/vue-property-decorator%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%9FTypeScript%E3%81%AAVue%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92CompositionAPI%E3%81%AB%E7%A7%BB%E8%A1%8C%E3%81%99%E3%82%8B":{"title":"vue-property-decoratorã‚’ä½¿ã£ãŸTypeScriptãªVueãƒ•ã‚¡ã‚¤ãƒ«ã‚’CompositionAPIã«ç§»è¡Œã™ã‚‹","content":"\nclass componentã¯éæ¨å¥¨ã«ãªã£ãŸã‚ã‘ã§ã¯ãªãã¦ä»Šå¾Œã‚‚ä½¿ãˆã‚‹ãã†ã§ã™ãŒã€\nTypeScriptã§æ›¸ãå ´åˆã«Volarã®æ©æµã‚’æœ€å¤§é™å—ã‘ã‚‹ãŸã‚ã«ã€Composition APIã®ã‚¹ã‚¿ã‚¤ãƒ«ã«æ›¸ãæ›ãˆã¾ã—ãŸã€‚\nã¤ã„ã§ã«script setupã«ã‚‚ã—ã¦ã„ã¾ã™ã€‚\n\n## Composition APIã¸ã®æ›¸ãæ›ãˆ\n\nå‚è€ƒ: [From vue-class-component to Composition API | by Giacomo VoÃŸ | Level Up Coding](https://levelup.gitconnected.com/from-vue-class-component-to-composition-api-ef3c3dd5fdda)\n\n### æ¦‚è¦³\n\nvue-class-component(vue-property-decorator) ã§æ›¸ã‹ã‚ŒãŸVueã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’script setupã«æ›¸ãæ›ãˆã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\n\n````vue\n\u003ctemplate\u003e\n  \u003cbutton type=\"button\" @click=\"handleClick\"\u003e\n    {{ text }}\n    \u003cIconButton /\u003e\n  \u003c/button\u003e\n\u003c/template\u003e\n\n\u003cscript lang=\"ts\"\u003e\nimport { Component, Vue, Prop, Emit } from 'vue-property-decorator'\nimport IconButton from '@/components/atoms/IconButton.vue'\n\n@Component({\n  components: {\n    IconButton,\n  },\n})\nexport default class ButtonPrimary extends Vue {\n  @Prop({ type: String, required: true })\n  private readonly text!: string\n\n  @Emit('clickButton')\n  handleClick() {}\n}\n\u003c/script\u003e\n````\n\n````vue\n\u003ctemplate\u003e\n  \u003cbutton type=\"button\" @click=\"handleClick\"\u003e\n    {{ text }}\n    \u003cIconButton /\u003e\n  \u003c/button\u003e\n\u003c/template\u003e\n\n\u003cscript lang=\"ts\" setup\u003e\nimport IconButton from '@/components/atoms/IconButton.vue'\n\ninterface Props {\n  text: string\n}\ndefineProps\u003cProps\u003e()\n\ndefineEmits\u003c{\n  (e: 'clickButton'): void\n}\u003e()\n\u003c/script\u003e\n````\n\nä»¥ä¸‹å€‹åˆ¥ã«è¦‹ã¦ã„ãã¾ã™ã€‚\n\n### @Component\n\nclass component\n\n````vue\n\u003ctemplate\u003e\n  \u003cdiv\u003e\n    \u003cChildComponent1 /\u003e\n    \u003cChildComponent2 /\u003e\n  \u003c/div\u003e\n\u003c/template\u003e\n\n\u003cscript lang=\"ts\"\u003e\nimport ChildComponent1 from './ChildComponent1.vue'\nimport ChildComponent2 from './ChildComponent2.vue'\n\n@Component({\n  components: {\n    ChildComponent1,\n    ChildComponent2,\n  },\n})\nexport default class MyComponent extends Vue {\n\n}\n\u003c/script\u003e\n````\n\nscript setup\n\n````vue\n\u003ctemplate\u003e\n  \u003cdiv\u003e\n    \u003cChildComponent1 /\u003e\n    \u003cChildComponent2 /\u003e\n  \u003c/div\u003e\n\u003c/template\u003e\n\n\u003cscript setup lang=\"ts\"\u003e\nimport ChildComponent1 from './ChildComponent1.vue'\nimport ChildComponent2 from './ChildComponent2.vue'\n\u003c/script\u003e\n````\n\nimportæ–‡ã‚’æ›¸ãã ã‘ã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚\n\n## Data\n\nclass component\n\n````vue\n\u003cscript lang=\"ts\"\u003e\n@Component\nexport default class MyComponent extends Vue {\n  message = 'Hello'\n\n  onInput(value: string) {\n    this.message = value\n  }\n}\n\u003c/script\u003e\n````\n\nscript setup\n\n````vue\n\u003cscript setup lang=\"ts\"\u003e\nconst message = ref('Hello')\n\nconst onInput = (value: string) =\u003e {\n  message.value = value\n}\n\u003c/script\u003e\n````\n\n`ref` ã§å®£è¨€ã™ã‚‹ã“ã¨ã§reactiveãªå€¤ã¨ã—ã¦ä½¿ç”¨ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\nå€¤ã«ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã«ã¯ `.value` ã‚’ã¤ã‘ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚\n\n### @Prop\n\nclass component\n\n````vue\n\u003cscript lang=\"ts\"\u003e\n@Component\nexport default class MyComponent extends Vue {\n  @Prop({ type: String, required: true })\n  private readonly text!: string\n\n  // defaultå€¤\n  @Prop({ type: Number, default: 2 })\n  private readonly num!: number\n\n  // Object\n  @Prop({ type: Object, required: true })\n  private readonly myObj!: MyObj\n\n}\n\u003c/script\u003e\n````\n\nscript setup\n\n````vue\n\u003cscript setup lang=\"ts\"\u003e\ninterface Props {\n  text: string\n  num?: number\n  myObj: MyObj\n}\nconst props = withDefaults(defineProps\u003cProps\u003e(), {\n  num: 2,\n})\n\n\u003c/script\u003e\n````\n\nç‹¬è‡ªå‹ã‚‚ãã¡ã‚“ã¨å‹ã‚’ä»˜ã‘ã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’åˆ©ç”¨ã™ã‚‹å´ã§ã‚‚è£œå®ŒãŒåŠ¹ãã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚\n\n### @Emit\n\nclass component\n\n````vue\n\u003cscript lang=\"ts\"\u003e\n@Component\nexport default class MyComponent extends Vue {\n  @Emit('clickButton')\n  handleClick(num: number) {\n    return num\n  }\n\n}\n\u003c/script\u003e\n````\n\nscript setup\n\n````vue\n\u003cscript setup lang=\"ts\"\u003e\nconst emits = defineEmits\u003c{\n  (e:'click-button', num: number): void\n}\u003e()\n\nconst handleClick = (num: number) =\u003e {\n  emits('click-button', num)\n}\n\u003c/script\u003e\n````\n\n### @Watch\n\nclass component\n\n````vue\n\u003cscript lang=\"ts\"\u003e\n@Component\nexport default class MyComponent extends Vue {\n  checkBox: boolean = false\n\n  @Watch('checkBox')\n  watchValue(value: boolean) {\n    if (value) {\n        alert('checked!!')\n    }\n  }\n}\n\u003c/script\u003e\n````\n\nscript setup\n\n````vue\n\u003cscript setup lang=\"ts\"\u003e\nconst checkBox = ref(false)\n\nwatch(\n  checkBox,\n  (value: boolean) =\u003e {\n    if (value) {\n        alert('checked!!')\n    }\n  }\n)\n\u003c/script\u003e\n````\n\n### @Ref\n\nclass component\n\n````vue\n\u003ctemplate\u003e\n  \u003cChildComponent ref=\"childComponent\" /\u003e\n  \u003cbutton ref=\"submitButton\"\u003eSubmit\u003c/button\u003e\n\u003c/template\u003e\n\n\u003cscript lang=\"ts\"\u003e\nimport ChildComponent from './ChildComponent.vue'\n\n@Component\nexport default class MyComponent extends Vue {\n  @Ref() readonly childComponent!: ChildComponent\n  @Ref('submitButton') readonly button!: HTMLButtonElement\n}\n\u003c/script\u003e\n````\n\nscript setup\n\n````vue\n\u003ctemplate\u003e\n  \u003cChildComponent ref=\"childComponent\" /\u003e\n  \u003cbutton ref=\"submitButton\"\u003eSubmit\u003c/button\u003e\n\u003c/template\u003e\n\n\u003cscript setup lang=\"ts\"\u003e\nconst childComponent = ref\u003cChildComponent\u003e()\nconst submitButton = ref\u003cHTMLButtonElement\u003e()\n\u003c/script\u003e\n````\n\nåŒã˜å¤‰æ•°åã®refã§å®£è¨€ã™ã‚‹ã ã‘ã§å‚ç…§ã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸ\n\n### Computed\n\nclass component\n\n````vue\n\u003cscript lang=\"ts\"\u003e\n@Component\nexport default class MyComponent extends Vue {\n  firstName = 'John'\n  lastName = 'Doe'\n\n  get name() {\n    return this.firstName + ' ' + this.lastName\n  }\n\n  set name(value) {\n    const splitted = value.split(' ')\n    this.firstName = splitted[0]\n    this.lastName = splitted[1] || ''\n  }\n}\n\u003c/script\u003e\n````\n\nscript setup\n\n````vue\n\u003cscript setup lang=\"ts\"\u003e\nconst firstName = ref('John')\nconst lastName = ref('Doe')\n\nconst name = computed({\n  get: () =\u003e  firstName + ' ' + lastName,\n  set: (value) =\u003e {\n    const splitted = value.split(' ')\n    firstName.value = splitted[0]\n    lastName.value = splitted[1] || ''\n  }\n})\n\n\u003c/script\u003e\n````\n\n### Hooks\n\nclass component\n\n````vue\n\u003cscript lang=\"ts\"\u003e\n@Component\nexport default class MyComponent extends Vue {\n  mounted() {\n    console.log('mounted')\n  }\n}\n\u003c/script\u003e\n````\n\nscript setup\n\n````vue\n\u003cscript setup lang=\"ts\"\u003e\nonMounted(() =\u003e {\n  console.log('mounted')\n})\n\u003c/script\u003e\n````\n\nãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ•ãƒƒã‚¯ã®å¤‰æ›´ã¯ã“ã¡ã‚‰ã‚’å‚ç…§\n[ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ãƒ•ãƒƒã‚¯ | Vue.js](https://v3.ja.vuejs.org/guide/composition-api-lifecycle-hooks.html)\n\n* setup ã¯ beforeCreate ã¨ created ã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã§å®Ÿè¡Œã•ã‚Œã‚‹ãŸã‚ã€ã“ã‚Œã‚‰ã®ãƒ•ãƒƒã‚¯å†…ã§å®Ÿè¡Œã—ã¦ã„ãŸã‚³ãƒ¼ãƒ‰ã¯setupå†…ã«ç›´æ¥æ›¸ã\n* mounted -\u003e onMounted ã®ã‚ˆã†ã«ã€onXXXXXã¨ã„ã†åå‰ã«å¤‰ã‚ã£ãŸ\n\n## ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ç§»è¡Œ\n\n* vuex -\u003e pinia\n  * \u003chttps://github.com/Seb-L/pinia-plugin-persist\u003e\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["Vuejs","TypeScript"]},"/note/vue-tsc":{"title":"vue-tsc","content":"\n[Viteã§Vue3ã®Typescriptç’°å¢ƒã‚’æ§‹ç¯‰ã™ã‚‹ | miyauci.me](https://miyauchi.dev/ja/posts/vite-vue3-typescript/)\n\n[vue-tsc ã‚’ä½¿ã£ãŸ TypeScript Strict Mode ã®æ¼¸é€²çš„å°å…¥ - VisasQ Dev Blog](https://tech.visasq.com/introduce-vue-tsc/)\n\n[volar/packages/vue-tsc at master Â· johnsoncodehk/volar Â· GitHub](https://github.com/johnsoncodehk/volar/tree/master/packages/vue-tsc)\n\neslintã ã‘ã§ã¯TypeScriptã§æ›¸ã‹ã‚ŒãŸvue3ã®templateã®ä¸­ã‚’ãƒã‚§ãƒƒã‚¯ã§ããªã„ã®ã§ã€vue-tcsã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦é™çš„ã«ãƒã‚§ãƒƒã‚¯ã™ã‚‹ã€‚\nvolarã¨åŒã˜ã‚‰ã—ã„ã®ã§vscodeä¸Šã®æŒ‡æ‘˜ã¯ã“ã£ã¡ã§ãƒã‚§ãƒƒã‚¯ã§ãã‚‹\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["TypeScript","Vuejs"]},"/note/wezterm":{"title":"wezterm","content":"\n## tab title, pane titleã«current pathã‚’è¨­å®šã™ã‚‹\n\n### OSC\n\n\u003chttps://wezfurlong.org/wezterm/shell-integration.html\u003e ã®ãƒšãƒ¼ã‚¸ã« `OSC 133` ã¨ã„ã†å˜èªãŒå‡ºã¦ãã‚‹ã€‚\n\nã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã‚·ãƒ¼ã‚±ãƒ³ã‚¹ã§æ„å‘³ã®ã‚ã‚‹ãƒãƒ¼ã‚¯ã‚’æŒ¿å…¥ã—ã¦ã€ã‚³ãƒãƒ³ãƒ‰ã®å‡ºåŠ›ã‚’ä¸€ã¾ã¨ã¾ã‚Šã«æ‰±ã†ãŸã‚ã®ä»•æ§˜ã‚‰ã—ã„ã€‚\n[Zshã§OSC 133ã«å¯¾å¿œã™ã‚‹](https://zenn.dev/ymotongpoo/articles/20220802-osc-133-zsh)\n\u003chttps://gitlab.freedesktop.org/Per_Bothner/specifications/blob/master/proposals/semantic-prompts.md\u003e\n\n[ANSI escape sequences](https://en.wikipedia.org/wiki/ANSI_escape_code#Escape_sequences)  ã«ã¯ã„ãã¤ã‹ã‚«ãƒ†ã‚´ãƒªãŒå­˜åœ¨ã™ã‚‹ã‚‰ã—ã„\nã‚ˆãè‰²ã¤ã‘ã«ä½¿ã‚ã‚Œã‚‹ `\\033[XXXm` ã¨ã„ã†ã®ã‚‚ã“ã‚Œ\n\n````shell\n$ echo -en \"\\e[41mColor\\e[mWhite\"\n````\n\n`\\033`, `\\x1b`, `\\e` ãªã©ã¯ã©ã‚Œã‚‚ESCã‚’è¡¨ã™\nã“ã®Â `\\e[` ã‚’ CSI (Control Sequence Introducer) ã¨ã„ã„ã€ `\\e]` ã¯ OSC (Operating System Command) ã¨ã„ã†\n\nã“ã‚Œã‚’è¸ã¾ãˆã¦ã€ [wezterm](note/wezterm.md) ã§å¤‰æ•°ã‚’æ‰±ãˆã‚‹ã‚ˆã†ã«ã—ãŸã‚Šã‚¿ã‚¤ãƒˆãƒ«ã‚’è¨­å®šã—ãŸã‚Šã™ã‚‹\n\n### å¤‰æ•°ã‚’è¨­å®šã™ã‚‹\n\n\u003chttps://wezfurlong.org/wezterm/config/lua/pane/get_user_vars.html\u003e\n\n````shell\nprintf \"\\033]1337;SetUserVar=%s=%s\\007\" foo `echo -n bar | base64`\n````\n\nã¨ã™ã‚‹ã¨ã€ä»¥ä¸‹ã®ã‚ˆã†ã«ã—ã¦å–å¾—ã§ãã‚‹\n\n````lua\nwezterm.log_info('foo var is ' .. pane:get_user_vars().foo)\n````\n\nã¤ã¾ã‚Š OSC 1337 + `SetUserVar=key=value` + `\\007` ã¨ã™ã‚‹ã¨ `get_user_vars` ã§å–å¾—ã§ãã‚‹ã€‚\n\nechoã§æ›¸ãã¨ã“ã†ãªã‚‹\n\n````shell\necho \"\\x1b]1337;SetUserVar=key=$(echo -n value | base64)\\x07\"\n````\n\n### ç¾åœ¨ã„ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®gitãƒªãƒã‚¸ãƒˆãƒªåã‚’tabã®titleã«è¨­å®šã™ã‚‹\n\n\u003chttps://wezfurlong.org/wezterm/config/lua/window-events/format-tab-title.html\u003e ã§ã€å¤‰æ•° `panetitle` ã‚’å–å¾—ã—ã¦å€¤ãŒã‚ã‚Œã°ãã‚Œã‚’tabã«è¨­å®šã™ã‚‹\n\n`~/.config/wezterm/wezterm.lua`\n\n````lua\nwezterm.on(\"format-tab-title\", function(tab, tabs, panes, config, hover, max_width)\n\tlocal title\n\tlocal user_title = tab.active_pane.user_vars.panetitle\n\tif user_title ~= nil and #user_title \u003e 0 then\n\t\ttitle = tab.tab_index + 1 .. \":\" .. user_title\n\telse\n\t\ttitle = tab.tab_index + 1 .. \":\" .. tab.active_pane.current_working_dir\n\tend\n\n\tlocal solid_left_arrow = utf8.char(0x2590)\n\tlocal solid_right_arrow = utf8.char(0x258c)\n\tlocal edge_background = \"#363636\"\n\tlocal background = scheme.ansi[1]\n\tlocal foreground = scheme.ansi[5]\n\n\tif tab.is_active then\n\t\tbackground = scheme.brights[1]\n\t\tforeground = scheme.brights[8]\n\telseif hover then\n\t\tbackground = scheme.cursor_bg\n\t\tforeground = scheme.cursor_fg\n\tend\n\tlocal edge_foreground = background\n\n\treturn {\n\t\t{ Attribute = { Intensity = \"Bold\" } },\n\t\t{ Background = { Color = edge_background } },\n\t\t{ Foreground = { Color = edge_foreground } },\n\t\t{ Text = solid_left_arrow },\n\t\t{ Background = { Color = background } },\n\t\t{ Foreground = { Color = foreground } },\n\t\t{ Text = title },\n\t\t{ Background = { Color = edge_background } },\n\t\t{ Foreground = { Color = edge_foreground } },\n\t\t{ Text = solid_right_arrow },\n\t\t{ Attribute = { Intensity = \"Normal\" } },\n\t}\nend)\n````\n\n* zshã® `precmd` hookã‚’ç™»éŒ²ã—ã¦ã€ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã®ãŸã³ã« `panetitle` ã‚’æ›´æ–°ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹\n* `vsc_info` ã‚‚ä½¿ç”¨ã—ã¦gitã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªå†…ã«ã„ã‚‹ã¨ãã¯ãƒªãƒã‚¸ãƒˆãƒªåã‚’ã‚»ãƒƒãƒˆã™ã‚‹\n\n`~/.zshrc`\n\n````shell\nfunction rename_wezterm_title {\n  echo \"\\e]1337;SetUserVar=panetitle=$(echo -n $1 | base64)\\x07\"\n}\n\nautoload -Uz add-zsh-hook\nautoload -Uz vcs_info\nzstyle ':vcs_info:*' enable git\nzstyle ':vcs_info:*' formats '%r'\n_precmd_wezterm () {\n  if [[ $TERM_PROGRAM = WezTerm ]]; then\n    vcs_info\n    if [[ -n ${vcs_info_msg_0_} ]]; then\n      rename_wezterm_title ${vcs_info_msg_0_}\n    else\n      rename_wezterm_title $(basename $(pwd))\n    fi\n  fi\n}\n\nadd-zsh-hook precmd _precmd_wezterm\n````\n\n### pane titleã‚’è¨­å®šã™ã‚‹\n\nä¸Šè¨˜ã§tabã®ã‚¿ã‚¤ãƒˆãƒ«ãŒã‚»ãƒƒãƒˆã§ããŸãŒã€tabä¸€è¦§ã‚’è¡¨ç¤ºã—ãŸã¨ãã«ã¯pane titleãŒè¡¨ç¤ºã•ã‚Œã‚‹ã€‚\npane titleã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§processåãŒå…¥ã‚‹ã®ã§ã€ã©ã®tabãªã®ã‹ã‚ã‹ã‚Šã«ãã„ã€‚\n\n\u003chttps://wezfurlong.org/wezterm/config/lua/pane/get_title.html\u003e\n\nOSC 1 ã§ã‚»ãƒƒãƒˆã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã®ã§ã€å…ˆç¨‹åŒæ§˜ `precmd` ã§ã‚»ãƒƒãƒˆã™ã‚‹\n\n````shell\necho \"\\x1b]1;$(pwd)\"\n````\n\n## å‰å›é–‹ã„ã¦ã„ãŸtabã‚’å¾©å…ƒã™ã‚‹\n\n[tmux-resurrect](https://github.com/tmux-plugins/tmux-resurrect), [tmux-continuum](https://github.com/tmux-plugins/tmux-continuum) ã®ã‚ˆã†ã«ã€å‰å›é–‹ã„ã¦ã„ãŸã‚¿ãƒ–ã®ä¸€è¦§ã‚’å¾©å…ƒã—ãŸã„ã€‚\n`20220807-113146-c2fee766` æ™‚ç‚¹ã§ã¯ã€weztermã«ãã®ã‚ˆã†ãªæ©Ÿèƒ½ã¯ãªã„ãŸã‚è‡ªåˆ†ã§ä¿å­˜ã€å¾©å…ƒã‚’è¡Œã†ã‚ˆã†ã«ã™ã‚‹ã€‚\n\n### ç¾åœ¨ã®ã‚¿ãƒ–ä¸€è¦§ã‚’ä¿å­˜ã™ã‚‹\n\n\u003chttps://wezfurlong.org/wezterm/cli/cli/list.html\u003e\n`wezterm cli list` ã§é–‹ã„ã¦ã„ã‚‹tabã®ä¸€è¦§ã‚’å‡ºåŠ›ã§ãã‚‹ã€‚\n`--format=json` ã‚’ã¤ã‘ã‚‹ã¨JSONã«ã§ãã‚‹ã€‚\n\nã“ã®å‡ºåŠ›çµæœã‚’ã©ã“ã‹ã«ä¿å­˜ã™ã‚‹å‡¦ç†ã‚’å®šæœŸå®Ÿè¡Œã™ã‚Œã°ã‚ˆã•ãã†ã€‚\nä»Šå›ã¯cronã«è¨­å®šã™ã‚‹ã“ã¨ã«ã—ãŸã€‚\n\n`crontab -e`\n\n````shell\n*/5 * * * * zsh -c \"wezterm cli list --format=json \u003e ~/.cache/wezterm/tabs.json\"\n````\n\n### ã‚¿ãƒ–ã‚’å¾©å…ƒã™ã‚‹\n\nã“ã¡ã‚‰ã®ã‚ˆã†ãªé–¢æ•°ã‚’ç”¨æ„ã—ãŸã€‚(require: jq)\n\n````shell\nfunction restore_wezterm_tabs() {\n  cat ~/.cache/wezterm/tabs.json | jq -r '.[] | .cwd' | sed \"s#file://$(hostname)##i\" | xargs -i wezterm cli spawn --cwd {}\n}\n````\n\n`wezterm cli spawn --cwd \u003cdirectory\u003e` ã§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡å®šã—ã¦tabã‚’é–‹ãã“ã¨ãŒã§ãã‚‹ã®ã§ã€JSONã«ä¿å­˜ã—ãŸå„tabã®æƒ…å ±ã‹ã‚‰ `cwd` ã®é …ç›®ã‚’æ‹¾ã£ã¦å¼•æ•°ã«ã™ã‚‹\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["shell","terminal"]},"/note/windows%E3%82%BB%E3%83%83%E3%83%88%E3%82%A2%E3%83%83%E3%83%97":{"title":"windowsã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—","content":"\nä¹…ã€…ã«Windowsã‚’èµ·å‹•ã—ã¦ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚‚ã‚ã‚‚ã‚ã—ãŸã®ã§ãƒ¡ãƒ¢\n\n## Windowsã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ\n\n1909ã®ã¾ã¾ã«ãªã£ã¦ã„ãŸ\n2021/05/11ã§ã‚µãƒãƒ¼ãƒˆçµ‚äº†ã™ã‚‹ã®ã§ã€æœ€æ–°ã®20H2ã«ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹\n[Windows 10 Home and Pro | Microsoft Docs](https://docs.microsoft.com/ja-jp/lifecycle/products/windows-10-home-and-pro)\n\n### æ‰‹å‹•ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ\n\nWindows Updateã§æ›´æ–°ã®ãƒã‚§ãƒƒã‚¯ã‚’ã—ã¦ã‚‚å‡ºã¦ã“ãªã‹ã£ãŸã®ã§ã€æ‰‹å‹•ã§ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹\n\n\u003chttps://www.microsoft.com/ja-jp/software-download/windows10\u003e ã‹ã‚‰ä»Šã™ãã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦æ›´æ–°ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰\n\næ›´æ–°ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã‚’èµ·å‹•ã—ã¦ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ\n\n## CapsLockã‚’Ctrlã‚­ãƒ¼ã«ã™ã‚‹\n\n[CapsLockã‚­ãƒ¼ã£ã¦ä½¿ã£ã¦ã¾ã™ã‹ï¼Ÿã‚ã¾ã‚Šä½¿ã‚ãªã„ãªã‚‰Ctrlã‚­ãƒ¼ã¨äº¤æ›ã€ã‚ã‚‹ã„ã¯Ctrlã‚­ãƒ¼ã«å¤‰ãˆã¦ã—ã¾ã„ã¾ã—ã‚‡ã† | ITæ¥­å‹™ã§ä½¿ãˆã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ãƒ†ã‚¯ãƒ‹ãƒƒã‚¯](https://kekaku.addisteria.com/wp/20180531022629)\n\n`caps2ctrl_swap.reg`\n\n````reg\nWindows Registry Editor Version 5.00\n\n[HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Control\\Keyboard Layout]\n\"Scancode Map\"=hex:00,00,00,00,00,00,00,00,03,00,00,00,1d,00,3a,00,3a,00,1d,00,00,00,00,00\n````\n\n## Chocolateyã§ã¯ãªãScoopã‚’ã¤ã‹ã£ã¦ç’°å¢ƒæ§‹ç¯‰\n\n[Scoopç’°å¢ƒæ§‹ç¯‰](note/Scoopç’°å¢ƒæ§‹ç¯‰.md)\n\n### Scoopä»¥å¤–ã§ã„ã‚ŒãŸã‚‚ã®\n\n* Visual Studio Code\n* Google Chrome\n\n## ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰é…åˆ—ã‚’å¤‰æ›´\n\nUSé…åˆ—ã«æ…£ã‚Œã¦ã—ã¾ã£ãŸã®ã§ã€æ—¥æœ¬èªé…åˆ—ã®ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŒãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã¯USã¨ã—ã¦ä½¿ç”¨ã™ã‚‹ã€‚\nè¨­å®š \u003e æ™‚åˆ»ã¨è¨€èª \u003e è¨€èª \u003e æ—¥æœ¬èª \u003e ã‚ªãƒ—ã‚·ãƒ§ãƒ³ \u003e ãƒãƒ¼ãƒ‰ã‚¦ã‚§ã‚¢ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ \u003e ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’å¤‰æ›´ã™ã‚‹ \u003e è‹±èªã‚­ãƒ¼ãƒœãƒ¼ãƒ‰(101/102ã‚­ãƒ¼)\n\n### æ—¥æœ¬èªã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã§USé…åˆ—ã‚’è¨­å®šã—Googleæ—¥æœ¬èªå…¥åŠ›ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã¨ãã«ã€Ctrl+Spaceã§å…¨è§’/åŠè§’ã‚’åˆ‡ã‚Šæ›¿ãˆã‚‹\n\n[Googleå…¥åŠ›ã‚’è‹±èªé…åˆ—ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã§ä½¿ã£ã¦ã„ã‚‹äººå‘ã‘æ—¥æœ¬èªå…¥åŠ›åˆ‡ã‚Šæ›¿ãˆã®å¤‰æ›´æ–¹æ³•ï½œã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®æŠ€è¡“LOG](https://ko-log.net/tech-log/archives/3826932.html)\n\n1. ã‚¿ã‚¹ã‚¯ãƒãƒ¼ã®å³ä¸‹ã«ã‚ã‚‹IMEã‚’å³ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’é–‹ã\n1. ã‚­ãƒ¼è¨­å®šã®é¸æŠ \u003e ç·¨é›†\n1. å…¥åŠ›ã‚­ãƒ¼ãŒ `Hankaku/Zenkaku` ã®è¡Œã‚’é¸æŠã—ã¦ã€ `Hankaku/Zenkaku` ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã‚­ãƒ¼å…¥åŠ›ã®ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚‹\n1. Ctrl Space ã‚­ãƒ¼ã‚’æŠ¼ã™\n1. ã“ã‚Œã‚’Hankaku/Zenkakuã®å…¨é …ç›®ã«ç¹°ã‚Šè¿”ã™\n1. Ctrl+Spaceã§åˆ‡ã‚Šæ›¿ãˆã‚‰ã‚Œã‚‹ã‚ˆã†ã«ãªã‚‹\n\n### è‹±èªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã§å¤‰æ›ã‚­ãƒ¼ã‚’IMEã®ONã€ç„¡å¤‰æ›ã‚­ãƒ¼ã‚’IMEã®OFFã«ã™ã‚‹\n\nCtrl+Spaceã‚­ãƒ¼ã¯ãƒˆã‚°ãƒ«ãªã®ã§ã€ç¾åœ¨ã®çŠ¶æ…‹ã‚’ç¢ºèªã›ã­ã°ãªã‚‰ãšç…©ã‚ã—ã„ã€‚\nMacã®ã‹ãª/è‹±æ•°ã‚­ãƒ¼ã®ã‚ˆã†ãªã“ã¨ã‚’ã—ãŸã„ã€‚\n\n[Windowsã§AXé…åˆ—ã‚’ä½¿ã† - Qiita](https://qiita.com/Big/items/c97573965804fb21ff9e)\n\nWindowsã®å ´åˆè‹±èªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«ã™ã‚‹ã¨å¤‰æ›ã€ç„¡å¤‰æ›ã‚­ãƒ¼ãŒèªè­˜ã•ã‚Œãªããªã‚‹ã€‚\nAXé…åˆ—ã«ã™ã‚‹ã¨èªè­˜ã•ã‚Œã‚‹ãŸã‚å®Ÿç¾ã§ãã‚‹ã€‚\n\nãŸã ã—ãƒ¬ã‚¸ã‚¹ãƒˆãƒªã®å¤‰æ›´ã‚’ä¼´ã†ãŸã‚ã€è‡ªå·±è²¬ä»»ã¨ãªã‚‹ã€‚\n\n### Ctrl-n,Ctrl-pã§å¤‰æ›å€™è£œã‚’é¸æŠ\n\n\\[å‚™å¿˜éŒ²çš„ãªblog: googleæ—¥æœ¬èªå…¥åŠ›ã®å€™è£œç§»å‹•ã‚­ãƒ¼ã®å¤‰æ›´\\](\u003chttp://se-bikou.blogspot.com/2011/04/google.html]\u003e\n\nã‚­ãƒ¼è¨­å®š \u003e ç·¨é›†\n\n|ãƒ¢ãƒ¼ãƒ‰|å…¥åŠ›ã‚­ãƒ¼|ã‚³ãƒãƒ³ãƒ‰|\n|---------|------------|------------|\n|å¤‰æ›å‰å…¥åŠ›ä¸­|Ctrl n|äºˆæ¸¬å¤‰æ›|\n|å¤‰æ›ä¸­|Ctrl n|æ¬¡å€™è£œã‚’é¸æŠ|\n|å¤‰æ›ä¸­|Ctrl p|å‰å€™è£œã‚’é¸æŠ|\n\n## WSL2\n\n\u003chttps://docs.microsoft.com/ja-jp/windows/wsl/install-win10#manual-installation-steps\u003e\n\n[WSL/WSL2 ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« (Windows 10ã§Ubuntu) - PS Work](https://pswork.jp/wsl/windows-10-wsl-install/)\nStoreã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‚ˆã‚Šæ‰‹å‹•ã®ã»ã†ãŒå ´æ‰€ã‚’æ±ºã‚ã‚‰ã‚Œã‚‹ã®ã§ã„ã„ã¨ã‹ã„ã¦ã‚ã‚‹\nè‡ªåˆ†ã‚‚ãã†æ€ã†ãŒã€ä¹…ã—ã¶ã‚Šã«é–‹ãã¨ã‚ã‹ã‚‰ãªããªã‚Šãã†ãªã®ã§ä¸€æ—¦Storeã‹ã‚‰ã®ã¾ã¾ã«ã—ã¦ãŠã\n\n## Windows ã‚¿ãƒ¼ãƒŸãƒŠãƒ«\n\n\u003chttps://docs.microsoft.com/ja-jp/windows/terminal/get-started\u003e\n\nStoreã‹ã‚‰ã¨æ›¸ã„ã¦ã‚ã‚‹ãŒã€Scoopã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸ\n\n## PATHä¿®æ­£\n\nã‚‚ã¨ã®PATH\n\n````sh\nPS C:\\Users\\ikorihn\u003e $env:Path.Split(\";\")\nD:\\app\\oracleuser\\product\\12.1.0\\dbhome_1\\bin\nC:\\Program Files\\Java\\jdk1.8.0_73\\bin\nC:\\Program Files (x86)\\Intel\\iCLS Client\\\nC:\\Program Files\\Intel\\iCLS Client\\\nC:\\WINDOWS\\system32\nC:\\WINDOWS\nC:\\WINDOWS\\System32\\Wbem\nC:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\\nC:\\Program Files\\Intel\\Intel(R) Management Engine Components\\DAL\nC:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\DAL\nC:\\Program Files\\Intel\\Intel(R) Management Engine Components\\IPT\nC:\\Program Files (x86)\\Intel\\Intel(R) Management Engine Components\\IPT\nD:\\utils\\vim74-kaoriya-win64\\\nC:\\Python36\nC:\\ProgramData\\chocolatey\\bin\nC:\\Users\\ikorihn\\AppData\\Local\\atom\\bin\nC:\\Users\\ikorihn\\AppData\\Local\\atom\\app-1.9.9\\resources\\app\\apm\\bin\nC:\\WINDOWS\\system32\nC:\\WINDOWS\nC:\\WINDOWS\\System32\\Wbem\nC:\\WINDOWS\\System32\\WindowsPowerShell\\v1.0\\\nD:\\utils\\Neovim\\bin\nC:\\WINDOWS\\System32\\OpenSSH\\\nC:\\Users\\ikorihn\\scoop\\shims\nC:\\Users\\ikorihn\\AppData\\Local\\atom\\bin\nC:\\Users\\ikorihn\\AppData\\Local\\Microsoft\\WindowsApps\nC:\\Python27\\Scripts\n\nC:\\Users\\ikorihn\\AppData\\Local\\Programs\\Microsoft VS Code\\bin\n````\n\n## å‚è€ƒ\n\n[Windows 10å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸãƒ¡ãƒ¢ - HackMD](https://hackmd.io/@Eai/Win10-reinstall)\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["Windows"]},"/note/xcode-select%E3%81%AE%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E3%81%8C%E5%8F%A4%E3%81%84%E3%81%A8%E3%82%A8%E3%83%A9%E3%83%BC%E3%81%8C%E3%81%A7%E3%82%8B":{"title":"xcode-selectã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå¤ã„ã¨ã‚¨ãƒ©ãƒ¼ãŒã§ã‚‹","content":"\n\n````shell\n$ /usr/bin/git\n2022-09-14 19:57:46.548 xcodebuild[4220:18896] [MT] DVTPlugInLoading: Failed to load code for plug-in com.apple.dt.IDESimulatorAvailability (/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin), error = Error Domain=NSCocoaErrorDomain Code=3588 \"dlopen(/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin/Contents/MacOS/IDESimulatorAvailability, 0x0109): Symbol not found: (_OBJC_CLASS_$_SimDiskImage)\n  Referenced from: '/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin/Contents/MacOS/IDESimulatorAvailability'\n  Expected in: '/Library/Developer/PrivateFrameworks/CoreSimulator.framework/Versions/A/CoreSimulator'\" UserInfo={NSLocalizedFailureReason=The bundle couldnâ€™t be loaded., NSLocalizedRecoverySuggestion=Try reinstalling the bundle., NSFilePath=/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin/Contents/MacOS/IDESimulatorAvailability, NSDebugDescription=dlopen(/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin/Contents/MacOS/IDESimulatorAvailability, 0x0109): Symbol not found: (_OBJC_CLASS_$_SimDiskImage)\n  Referenced from: '/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin/Contents/MacOS/IDESimulatorAvailability'\n  Expected in: '/Library/Developer/PrivateFrameworks/CoreSimulator.framework/Versions/A/CoreSimulator', NSBundlePath=/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin, NSLocalizedDescription=The bundle â€œIDESimulatorAvailabilityâ€ couldnâ€™t be loaded.}, dyldError = dlopen(/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin/Contents/MacOS/IDESimulatorAvailability, 0x0000): Symbol not found: (_OBJC_CLASS_$_SimDiskImage)\n  Referenced from: '/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin/Contents/MacOS/IDESimulatorAvailability'\n  Expected in: '/Library/Developer/PrivateFrameworks/CoreSimulator.framework/Versions/A/CoreSimulator'\n2022-09-14 19:57:46.570 xcodebuild[4220:18896] [MT] DVTAssertions: ASSERTION FAILURE in /System/Volumes/Data/SWE/Apps/DT/BuildRoots/BuildRoot2/ActiveBuildRoot/Library/Caches/com.apple.xbs/Sources/DVTFrameworks/DVTFrameworks-21303/DVTFoundation/PlugInArchitecture/DataModel/DVTPlugIn.m:374\nDetails:  Failed to load code for plug-in com.apple.dt.IDESimulatorAvailability (/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin)\nPlease ensure Xcode packages are up-to-date â€” try running 'xcodebuild -runFirstLaunch'.\n\nNSBundle error: Error Domain=NSCocoaErrorDomain Code=3588 \"dlopen(/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin/Contents/MacOS/IDESimulatorAvailability, 0x0109): Symbol not found: (_OBJC_CLASS_$_SimDiskImage)\n  Referenced from: '/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin/Contents/MacOS/IDESimulatorAvailability'\n  Expected in: '/Library/Developer/PrivateFrameworks/CoreSimulator.framework/Versions/A/CoreSimulator'\" UserInfo={NSLocalizedFailureReason=The bundle couldnâ€™t be loaded., NSLocalizedRecoverySuggestion=Try reinstalling the bundle., NSFilePath=/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin/Contents/MacOS/IDESimulatorAvailability, NSDebugDescription=dlopen(/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin/Contents/MacOS/IDESimulatorAvailability, 0x0109): Symbol not found: (_OBJC_CLASS_$_SimDiskImage)\n  Referenced from: '/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin/Contents/MacOS/IDESimulatorAvailability'\n  Expected in: '/Library/Developer/PrivateFrameworks/CoreSimulator.framework/Versions/A/CoreSimulator', NSBundlePath=/Applications/Xcode.app/Contents/PlugIns/IDESimulatorAvailability.ideplugin, NSLocalizedDescription=The bundle â€œIDESimulatorAvailabilityâ€ couldnâ€™t be loaded.}\nObject:   \u003cDVTPlugIn: 0x60000126a3a0\u003e\nMethod:   -loadAssertingOnError:error:\nThread:   \u003c_NSMainThread: 0x60000363c2c0\u003e{number = 1, name = main}\nHints:\n\nBacktrace:\n  0  0x0000000105ef9410\n  1  0x0000000105ef8aec\n  2  0x0000000105ef8c6c\n  3  0x0000000105da72ac\n4  0x0000000105d6d118\n  5  0x0000000105d6b528\n  6  0x00000001af9541b4\n  7  0x00000001af963414\n  8  0x0000000105f3d58c\n  9  0x0000000105f194b0\n 10  0x0000000105d6b3c0\n 11  0x0000000105d6b5e0\n 12  0x0000000106e2f2ec\n 13  0x0000000106e2eae0\n 14  0x0000000106e2e1e8\n 15  0x00000001047cc324\n 16  0x0000000104375e0c\nsh: line 1:  4240 Abort trap: 6           /Applications/Xcode.app/Contents/Developer/usr/bin/xcodebuild -sdk /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk -find git 2\u003e /dev/null\ngit: error: sh -c '/Applications/Xcode.app/Contents/Developer/usr/bin/xcodebuild -sdk /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk -find git 2\u003e /dev/null' failed with exit code 34304: (null) (errno=Invalid argument)\nxcode-select: Failed to locate 'git', requesting installation of command line developer tools.\n````\n\nxcodeã¨CommandLineToolsã‚’ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã—ãŸã€‚\nâ†’ ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆãŒæˆåŠŸã—ãªã„â€¦\n\nxcodeã¨CLTã‚’ã‚¢ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‹ã‚‰å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã“ã¨ã«ã€‚\n\nä»¥ä¸‹ã‚’å‰Šé™¤\n\n* /Applications/Xcode.app\n* /Library/Developer/CommandLineTools\n* ~/Library/Developer\n* ~/Library/Caches/com.apple.dt.Xcode\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["Mac"]},"/note/xlsx2csv":{"title":"xlsx2csv","content":"\n\u003chttps://github.com/dilshod/xlsx2csv\u003e\n\n````sh\n$ xlsx=æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«.xlsx\n$ xlsx2csv -a -q all $xlsx ${xlsx/.xlsx/}\n-a: ã™ã¹ã¦ã®ã‚·ãƒ¼ãƒˆã‚’csvã«ã™ã‚‹\n-q: ã‚«ãƒ©ãƒ ã‚’ãƒ€ãƒ–ãƒ«ã‚¯ã‚¦ã‚©ãƒ¼ãƒˆã§å›²ã‚€\n````\n\n-aã‚’ã¤ã‘ã‚‹ã¨ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒä½œæˆã•ã‚Œãã®ä¸­ã«ã‚·ãƒ¼ãƒˆã”ã¨ã«csvãŒä½œã‚‰ã‚Œã‚‹\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["shell"]},"/note/yq":{"title":"yq","content":"\n\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["2023/05/04","shell","yaml","yq"]},"/note/yq-%E3%83%81%E3%83%BC%E3%83%88%E3%82%B7%E3%83%BC%E3%83%88":{"title":"yq ãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆ","content":"\n[yq](note/yq.md) ã«ã¯Goç‰ˆã¨Pythonç‰ˆãŒã‚ã‚‹ã®ã§ã€æ³¨æ„ã™ã‚‹ã€‚Goç‰ˆã‚’ã“ã“ã§ã¯ä½¿ã†\n\nhttps://mikefarah.gitbook.io/yq/\nhttps://github.com/mikefarah/yq\n\n## \n\n## shellã®å¤‰æ•°ã‚’ä½¿ã†\n\nã“ã®ã‚ˆã†ãªæ›¸ãæ–¹ã§ã¯å¤‰æ•°ãŒæ­£ã—ãåˆ©ç”¨ã•ã‚Œãªã„\n\n````shell\nMY_NAME=Alice\nyq \".users.$MY_NAME\" group.yaml\n````\n\n`env` ã‚„ `strenv` ã‚’ä½¿ã†ã“ã¨ã§ç’°å¢ƒå¤‰æ•°ãŒå±•é–‹ã•ã‚Œã‚‹\n\n````shell\nlts_version=$(curl -LSs https://updates.jenkins.io/stable/latestCore.txt)\necho \"${lts_version}\"\nval=\"${lts_version}\" ./yq e -i '.controller.tag=strenv(val)' $file\n````\n\n````shell\ninstalled_plugins=$(./yq '.controller.installPlugins' $file)\nfor p in $(echo $PLUGIN_NAME_VERSION); do\n  name=$(echo $p | cut -d':' -f1)\n  installed_plugins=$(echo \"$installed_plugins\" | sed -r \"s/$name:.*/$p/\")\ndone\nupdated_plugins=$(echo \"$installed_plugins\" | sed -e \"s/- /'/\" -e \"s/$/'/g\" | tr '\\n' \",\")\necho \"$updated_plugins\"\nval=\"[${updated_plugins}]\" ./yq e -P -i '.controller.installPlugins=env(val)' $file\n````\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["2023/01/27","shell","yaml","yq"]},"/note/yum-%E3%83%91%E3%83%83%E3%82%B1%E3%83%BC%E3%82%B8%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E3%82%92%E6%8C%87%E5%AE%9A%E3%81%97%E3%81%A6%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B":{"title":"yum ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’æŒ‡å®šã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹","content":"\n\n````shell\n$ yum --showduplicates search java-17-\nLoaded plugins: ovl, priorities\n============================================================================== N/S matched: java-17- ===============================================================================\n1:java-17-amazon-corretto-17.0.1+12-2.amzn2.1.aarch64 : Amazon Corretto development environment\n1:java-17-amazon-corretto-17.0.1+12-3.amzn2.1.aarch64 : Amazon Corretto development environment\n1:java-17-amazon-corretto-17.0.2+8-1.amzn2.1.aarch64 : Amazon Corretto development environment\n1:java-17-amazon-corretto-17.0.3+6-1.amzn2.1.aarch64 : Amazon Corretto development environment\n1:java-17-amazon-corretto-17.0.4+8-1.amzn2.1.aarch64 : Amazon Corretto development environment\n1:java-17-amazon-corretto-17.0.4+9-1.amzn2.1.aarch64 : Amazon Corretto development environment\n1:java-17-amazon-corretto-17.0.5+8-1.amzn2.1.aarch64 : Amazon Corretto development environment\n1:java-17-amazon-corretto-17.0.6+10-1.amzn2.1.aarch64 : Amazon Corretto development environment\n1:java-17-amazon-corretto-devel-17.0.1+12-2.amzn2.1.aarch64 : Amazon Corretto 17 development tools\n1:java-17-amazon-corretto-devel-17.0.1+12-3.amzn2.1.aarch64 : Amazon Corretto 17 development tools\n1:java-17-amazon-corretto-devel-17.0.2+8-1.amzn2.1.aarch64 : Amazon Corretto 17 development tools\n1:java-17-amazon-corretto-devel-17.0.3+6-1.amzn2.1.aarch64 : Amazon Corretto 17 development tools\n1:java-17-amazon-corretto-devel-17.0.4+8-1.amzn2.1.aarch64 : Amazon Corretto 17 development tools\n1:java-17-amazon-corretto-devel-17.0.4+9-1.amzn2.1.aarch64 : Amazon Corretto 17 development tools\n1:java-17-amazon-corretto-devel-17.0.5+8-1.amzn2.1.aarch64 : Amazon Corretto 17 development tools\n1:java-17-amazon-corretto-devel-17.0.6+10-1.amzn2.1.aarch64 : Amazon Corretto 17 development tools\n1:java-17-amazon-corretto-headless-17.0.1+12-2.amzn2.1.aarch64 : Amazon Corretto headless development environment\n1:java-17-amazon-corretto-headless-17.0.1+12-3.amzn2.1.aarch64 : Amazon Corretto headless development environment\n1:java-17-amazon-corretto-headless-17.0.2+8-1.amzn2.1.aarch64 : Amazon Corretto headless development environment\n1:java-17-amazon-corretto-headless-17.0.3+6-1.amzn2.1.aarch64 : Amazon Corretto headless development environment\n1:java-17-amazon-corretto-headless-17.0.4+8-1.amzn2.1.aarch64 : Amazon Corretto headless development environment\n1:java-17-amazon-corretto-headless-17.0.4+9-1.amzn2.1.aarch64 : Amazon Corretto headless development environment\n1:java-17-amazon-corretto-headless-17.0.5+8-1.amzn2.1.aarch64 : Amazon Corretto headless development environment\n1:java-17-amazon-corretto-headless-17.0.6+10-1.amzn2.1.aarch64 : Amazon Corretto headless development environment\n1:java-17-amazon-corretto-javadoc-17.0.1+12-2.amzn2.1.aarch64 : Amazon Corretto 17 API documentation\n1:java-17-amazon-corretto-javadoc-17.0.1+12-3.amzn2.1.aarch64 : Amazon Corretto 17 API documentation\n1:java-17-amazon-corretto-javadoc-17.0.2+8-1.amzn2.1.aarch64 : Amazon Corretto 17 API documentation\n1:java-17-amazon-corretto-javadoc-17.0.3+6-1.amzn2.1.aarch64 : Amazon Corretto 17 API documentation\n1:java-17-amazon-corretto-javadoc-17.0.4+8-1.amzn2.1.aarch64 : Amazon Corretto 17 API documentation\n1:java-17-amazon-corretto-javadoc-17.0.4+9-1.amzn2.1.aarch64 : Amazon Corretto 17 API documentation\n1:java-17-amazon-corretto-javadoc-17.0.5+8-1.amzn2.1.aarch64 : Amazon Corretto 17 API documentation\n1:java-17-amazon-corretto-javadoc-17.0.6+10-1.amzn2.1.aarch64 : Amazon Corretto 17 API documentation\n1:java-17-amazon-corretto-jmods-17.0.1+12-2.amzn2.1.aarch64 : Amazon Corretto 17 jmods\n1:java-17-amazon-corretto-jmods-17.0.1+12-3.amzn2.1.aarch64 : Amazon Corretto 17 jmods\n1:java-17-amazon-corretto-jmods-17.0.2+8-1.amzn2.1.aarch64 : Amazon Corretto 17 jmods\n1:java-17-amazon-corretto-jmods-17.0.3+6-1.amzn2.1.aarch64 : Amazon Corretto 17 jmods\n1:java-17-amazon-corretto-jmods-17.0.4+8-1.amzn2.1.aarch64 : Amazon Corretto 17 jmods\n1:java-17-amazon-corretto-jmods-17.0.4+9-1.amzn2.1.aarch64 : Amazon Corretto 17 jmods\n1:java-17-amazon-corretto-jmods-17.0.5+8-1.amzn2.1.aarch64 : Amazon Corretto 17 jmods\n1:java-17-amazon-corretto-jmods-17.0.6+10-1.amzn2.1.aarch64 : Amazon Corretto 17 jmods\n````\n\nä½¿ã„ãŸã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ãƒ•ãƒ«ã§æŒ‡å®šã™ã‚‹\narchã¯æ›¸ã‹ãªãã¦ã‚‚ã„ã„\n\n````shell\n$ yum install java-17-amazon-corretto-17.0.6+10-1.amzn2.1\n````\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["2023/04/04","Linux"]},"/note/yum-S3%E3%81%AB%E3%82%AB%E3%82%B9%E3%82%BF%E3%83%A0%E3%83%AA%E3%83%9D%E3%82%B8%E3%83%88%E3%83%AA%E3%82%92%E4%BD%9C%E6%88%90%E3%81%97%E3%81%A6%E3%81%9D%E3%81%93%E3%81%8B%E3%82%89%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB%E3%81%99%E3%82%8B":{"title":"yum S3ã«ã‚«ã‚¹ã‚¿ãƒ ãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã—ã¦ãã“ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹","content":"\nè‡ªå‰ã®yumãƒªãƒã‚¸ãƒˆãƒªã‚µãƒ¼ãƒã‚’æ§‹ç¯‰ã—ã€ãã®ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚\n\n## å‚è€ƒ\n\n[(CentOS7)ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆç’°å¢ƒã«å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã¿æä¾›ã™ã‚‹yumãƒªãƒã‚¸ãƒˆãƒªã‚µãƒ¼ãƒã‚’æ§‹ç¯‰ã™ã‚‹ - zaki work log](https://zaki-hmkc.hatenablog.com/entry/2020/03/08/222941)\n[S3ã«yumãƒªãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã—ã¦ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆã‚µãƒ–ãƒãƒƒãƒˆã‹ã‚‰å‚ç…§ã™ã‚‹ | Awstut](https://awstut.com/2022/03/19/yum-repository-in-s3/)\n\n## æ‰‹é †\n\n### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆ\n\nã¨ã‚Šã‚ãˆãš `/tmp/repo` ã«ä½œã‚‹\n\n````shell\nmkdir -p /tmp/repo/\n````\n\n### é…ç½®ã—ãŸã„rpmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰\n\ncurlã‚„wgetã§ã‚‚è‰¯ã„ãŒã€ä»Šå›ã¯ `yumdownloader` ã‚’ä½¿ã†ã€‚å…¥ã£ã¦ã„ãªã‘ã‚Œã° `yum install yum-utils`\nzstdã®rpmã‚’å…¥ã‚Œã¦ã¿ã‚‹\n\n````shell\n$ cd /tmp/repo\n$ yumdownloader zstd\n````\n\n### ãƒªãƒã‚¸ãƒˆãƒªä½œæˆ\n\ncreaterepoã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ä½¿ã†\n\n````shell\n$ yum install createrepo\n\n$ createrepo -v /tmp/repo\nSpawning worker 0 with 1 pkgs\nSpawning worker 1 with 0 pkgs\nWorker 0: reading zstd-1.5.2-1.amzn2.x86_64.rpm\nWorkers Finished\nSaving Primary metadata\nSaving file lists metadata\nSaving other metadata\nGenerating sqlite DBs\nSqlite DBs complete\n````\n\n### S3ã¸ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰\n\n````shell\n$ aws s3 cp /tmp/repo s3://my-bucket/repos/ --recursive\n````\n\n## åˆ©ç”¨å´ã®æ‰‹é †\n\n### ãƒªãƒã‚¸ãƒˆãƒªã‚’è¨­å®š\n\n````shell\n$ vi /etc/yum.repos.d/myprivate.repo\n````\n\n````conf\n[myprivate]\nenabled=1\ngpgcheck=0\nname=my repo\nbaseurl=https://myrepository.example.com/repos\n````\n\n### æ›´æ–°\n\n````shell\n$ yum makecache fast\n````\n\n### ç¢ºèª\n\n````shell\n$ yum repolist all\n\nmyprivateãŒå­˜åœ¨ã™ã‚‹\n````\n\n### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\nä¸€æ™‚çš„ã«è¨­å®šæ¸ˆã¿ã®repoã‚’ç„¡åŠ¹åŒ–ã—ã¦ã€ã“ã‚Œã ã‘ãŒä½¿ã‚ã‚Œã‚‹ã‚ˆã†ã«ã—ã¦ã¿ã‚‹\n\n````shell\n$ yum --disablerepo=* --enablerepo=myprivate install zstd\n````\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["2023/04/05","Linux"]},"/note/zap.Logger%E3%81%A7%E3%83%AD%E3%82%B0%E5%87%BA%E5%8A%9B%E6%99%82%E3%81%ABSentry%E3%81%AB%E3%82%82%E5%87%BA%E5%8A%9B%E3%81%99%E3%82%8B":{"title":"zap.Loggerã§ãƒ­ã‚°å‡ºåŠ›æ™‚ã«Sentryã«ã‚‚å‡ºåŠ›ã™ã‚‹","content":"\n\u003chttps://docs.sentry.io/platforms/go/\u003e\n\nzapåˆæœŸåŒ–æ™‚ã«ã€Hookã‚’ç™»éŒ²ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚\nzapcore.Entryã‚’å¼•æ•°ã«å–ã‚‹ã®ã§ã€ãã“ã‹ã‚‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚„ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã‚’å–å¾—ã—ã¦ã‚„ã‚Œã°ã‚ˆã„\n\n````go\nimport (\n\t\"fmt\"\n\t\"strings\"\n\t\"time\"\n\n\t\"github.com/aws/aws-lambda-go/events\"\n\t\"github.com/getsentry/sentry-go\"\n\t\"go.uber.org/zap\"\n\t\"go.uber.org/zap/zapcore\"\n)\n\nfunc NewLogger(levelStr string) (*zap.Logger, error) {\n\tlevel := parseLogLevel(levelStr)\n\tconfig := zap.Config{\n\t\tLevel: zap.NewAtomicLevelAt(level),\n\t}\n\n\t// ç’°å¢ƒå¤‰æ•°SENTRY_DSNã‚’è¨­å®šã™ã‚‹ã‹ã€ClientOptionsã«è¨­å®šã™ã‚‹\n\terr := sentry.Init(sentry.ClientOptions{})\n\tif err != nil {\n\t\tfmt.Printf(\"sentry.Init: %s\", err)\n\t}\n\n\treturn config.Build(zap.Hooks(func(entry zapcore.Entry) error {\n\t\tif entry.Level == zapcore.ErrorLevel {\n\t\t\tdefer sentry.Flush(2 * time.Second)\n\t\t\tev := sentry.NewEvent()\n\t\t\tev.Level = sentry.LevelError\n\t\t\tev.Message = entry.Message\n\t\t\tsentry.CaptureEvent(ev)\n\t\t}\n\t\treturn nil\n\t}))\n}\n\nfunc parseLogLevel(levelStr string) zapcore.Level {\n\tswitch strings.ToUpper(levelStr) {\n\tcase zapcore.DebugLevel.CapitalString():\n\t\treturn zapcore.DebugLevel\n\tcase zapcore.InfoLevel.CapitalString():\n\t\treturn zapcore.InfoLevel\n\tcase zapcore.WarnLevel.CapitalString():\n\t\treturn zapcore.WarnLevel\n\tcase zapcore.ErrorLevel.CapitalString():\n\t\treturn zapcore.ErrorLevel\n\tdefault:\n\t\treturn zapcore.InfoLevel\n\t}\n}\n\n````\n\n[logging - How to use Sentry with go.uber.org/zap/zapcore logger - Stack Overflow](https://stackoverflow.com/questions/64801270/how-to-use-sentry-with-go-uber-org-zap-zapcore-logger)\n[\\[Go\\]Sentryã«å¯¾å¿œã—ãŸcustom errorã®ä½œã‚Šæ–¹](https://zenn.dev/tomtwinkle/articles/18447cca3232d07c9f12)\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["Go"]},"/note/zsh":{"title":"zsh","content":"\n\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["shell","terminal"]},"/note/zsh%E3%81%A7%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89%E8%A3%9C%E5%AE%8C%E3%82%92%E8%A8%AD%E5%AE%9A%E3%81%99%E3%82%8B":{"title":"zshã§ã‚³ãƒãƒ³ãƒ‰è£œå®Œã‚’è¨­å®šã™ã‚‹","content":"\nè£œå®Œã‚³ãƒãƒ³ãƒ‰ã®ã‚ã‚‹ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ `FPATH` ã«è¿½åŠ ã™ã‚‹\n\n`~/.zshenv`\n\n````shell\nFPATH=$(brew --prefix)/share/zsh/site-functions/:$FPATH\n````\n\n````shell\nfpath=($(brew --prefix)/share/zsh/site-functions/(N-/) $fpath)\n````\n\n## zinitã®å ´åˆ\n\n* `as'completion'` è£œå®Œmodifier\n* `has'\u003ccommand\u003e'` ã‚³ãƒãƒ³ãƒ‰ãŒå­˜åœ¨ã™ã‚‹å ´åˆ\n\n````shell\n# https://github.com/BurntSushi/ripgrep\nzinit ice lucid as'completion' blockf has'rg'\nzinit snippet /opt/homebrew/share/zsh/site-functions/_rg\n\n# https://github.com/sharkdp/fd\nzinit ice lucid as'completion' blockf has'fd'\nzinit snippet /opt/homebrew/share/zsh/site-functions/_fd\n````\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["zsh"]},"/note/zsh%E3%81%A7homebrew%E3%81%A7%E5%85%A5%E3%82%8C%E3%81%9Faws-cli-v2%E3%81%AE%E8%A3%9C%E5%AE%8C%E3%82%92%E5%8A%B9%E3%81%8B%E3%81%9B%E3%82%8B":{"title":"zshã§homebrewã§å…¥ã‚ŒãŸaws-cli-v2ã®è£œå®Œã‚’åŠ¹ã‹ã›ã‚‹","content":"\n\u003chttps://docs.aws.amazon.com/ja_jp/cli/latest/userguide/cli-configure-completion.html\u003e\n\n````shell:~/.zshrc\n# AWS CLI v2\nautoload bashcompinit \u0026\u0026 bashcompinit\nautoload -Uz compinit \u0026\u0026 compinit\ncompinit\ncomplete -C aws_completer aws\n````\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["zsh","aws"]},"/note/zsh%E3%81%A7path%E3%81%AE%E9%87%8D%E8%A4%87%E3%82%92%E9%99%A4%E5%A4%96%E3%81%99%E3%82%8B":{"title":"zshã§pathã®é‡è¤‡ã‚’é™¤å¤–ã™ã‚‹","content":"\n\u003chttps://tech.serhatteker.com/post/2019-12/remove-duplicates-in-path-zsh/\u003e\n\n````bash\ntypeset -U path\n````\n\nThatâ€™s all.\n\nAs you can imagine `-U` stands for â€˜uniqueâ€™. From [doc](https://github.com/antonio/zsh-config/blob/master/help/typeset):\n\n````txt\n-U     For  arrays  (but not for associative arrays), keep only the\n       first occurrence of each duplicated value.  This may also be\n       set for colon-separated special parameters like PATH or FIGâ€\n       NORE, etc.  This flag has a different meaning when used with\n````\n\nBtw. just care it is not `-u`. This flag just converts the content to uppercase.\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["zsh"]},"/note/zsh%E3%81%AE%E8%B5%B7%E5%8B%95%E3%81%8C%E9%81%85%E3%81%84%E3%81%AE%E3%82%92%E8%A7%A3%E6%B6%88%E3%81%97%E3%81%9F":{"title":"zshã®èµ·å‹•ãŒé…ã„ã®ã‚’è§£æ¶ˆã—ãŸ","content":"\n[zsh Zinitã«å¤‰ãˆã‚‹](note/zsh%20Zinitã«å¤‰ãˆã‚‹.md) ã‚’ã—ãŸã‘ã©é…ããªã£ã¦ããŸã®ã§èª¿æŸ»ã—ãŸ\n\n## èª¿æŸ»æ–¹æ³•\n\n[ã€‡ã€‡envã®ã›ã„ã§zshã®èµ·å‹•ãŒé…ã„ã‹ã‚‰ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã—ãŸ - Qiita](https://qiita.com/Suzuki09/items/6c27a8a875cf94d981a4)\n\nèµ·å‹•é€Ÿåº¦ã®è¨ˆæ¸¬\n\n````shell\ntime (zsh -i -c exit)\n````\n\n[zshã¨Neovimã®ç°¡å˜ãªèµ·å‹•é€Ÿåº¦ã®æ¸¬å®šæ–¹æ³•](https://zenn.dev/yutakatay/articles/zsh-neovim-speedcheck)\n\nzprofã‚’ä½¿ã£ã¦ã©ã®å‡¦ç†ã«æ™‚é–“ã‹ã‹ã£ã¦ã„ã‚‹ã‹ã‚’æ¸¬å®š\n\n````shell:.zshrc\nif [ \"$ZSHRC_PROFILE\" != \"\" ]; then\n  zmodload zsh/zprof \u0026\u0026 zprof \u003e /dev/null\nfi\n\nfunction zsh-profiler() {\n  ZSHRC_PROFILE=1 zsh -i -c zprof\n}\n````\n\n[zshã®èµ·å‹•ã‚’é«˜é€ŸåŒ–ã—ãŸ - memo/note/blog](https://note.youyo.io/post/speed-up-zsh-startup/)\n\nã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã—ãªãŒã‚‰ã©ã‚ŒãŒé…ã„ã‹ã‚’èª¿æŸ»\n\n## ã‚„ã£ãŸã“ã¨\n\n### compinitã‚’1å›ã ã‘å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ã—ãŸ\n\nè¤‡æ•°å›å®Ÿè¡Œã—ã¦ã„ã‚‹ç®‡æ‰€ãŒã‚ã£ãŸã®ã§ç›´ã—ãŸ\n\n### `brew --prefix` ã‚³ãƒãƒ³ãƒ‰ã‚’1å›ã ã‘å®Ÿè¡Œã™ã‚‹ã‚ˆã†ã«ã—ãŸ\n\nbrewã§å…¥ã‚ŒãŸã‚³ãƒãƒ³ãƒ‰ã«pathã‚’é€šã™ãŸã‚ã«ã€æ¯å› `$(brew --prefix)` ã§brewã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å–å¾—ã—ã¦ã„ãŸãŒã€ã“ã‚ŒãŒçµæ§‹æ™‚é–“ãŒã‹ã‹ã£ã¦ã„ãŸã€‚\n\n````shell\npath=(\n    $(brew --prefix)/opt/coreutils/libexec/gnubin(N-/) # coreutils\n    $(brew --prefix)/opt/ed/libexec/gnubin(N-/) # ed\n    $(brew --prefix)/opt/findutils/libexec/gnubin(N-/) # findutils\n    $(brew --prefix)/opt/gnu-sed/libexec/gnubin(N-/) # sed\n    $(brew --prefix)/opt/gnu-tar/libexec/gnubin(N-/) # tar\n    $(brew --prefix)/opt/grep/libexec/gnubin(N-/) # grep\n    ${path}\n)\nmanpath=(\n    $(brew --prefix)/opt/coreutils/libexec/gnuman(N-/) # coreutils\n    $(brew --prefix)/opt/ed/libexec/gnuman(N-/) # ed\n    $(brew --prefix)/opt/findutils/libexec/gnuman(N-/) # findutils\n    $(brew --prefix)/opt/gnu-sed/libexec/gnuman(N-/) # sed\n    $(brew --prefix)/opt/gnu-tar/libexec/gnuman(N-/) # tar\n    $(brew --prefix)/opt/grep/libexec/gnuman(N-/) # grep\n    ${manpath}\n)\n````\n\nâ†“\n\n````shell\nexport BREW_PREFIX=$(brew --prefix)\npath=(\n    $BREW_PREFIX/opt/coreutils/libexec/gnubin(N-/) # coreutils\n    $BREW_PREFIX/opt/ed/libexec/gnubin(N-/) # ed\n    $BREW_PREFIX/opt/findutils/libexec/gnubin(N-/) # findutils\n    $BREW_PREFIX/opt/gnu-sed/libexec/gnubin(N-/) # sed\n    $BREW_PREFIX/opt/gnu-tar/libexec/gnubin(N-/) # tar\n    $BREW_PREFIX/opt/grep/libexec/gnubin(N-/) # grep\n    $BREW_PREFIX/opt/mysql-client/bin(N-/) # mysql\n    ${path}\n)\nmanpath=(\n    $BREW_PREFIX/opt/coreutils/libexec/gnuman(N-/) # coreutils\n    $BREW_PREFIX/opt/ed/libexec/gnuman(N-/) # ed\n    $BREW_PREFIX/opt/findutils/libexec/gnuman(N-/) # findutils\n    $BREW_PREFIX/opt/gnu-sed/libexec/gnuman(N-/) # sed\n    $BREW_PREFIX/opt/gnu-tar/libexec/gnuman(N-/) # tar\n    $BREW_PREFIX/opt/grep/libexec/gnuman(N-/) # grep\n    ${manpath}\n)\n````\n\n### zinit -\u003e sheldon ã«ç§»è¡Œã—ãŸ\n\nãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ã¯ã‚‚ã¨ã‚‚ã¨ [zplug](https://github.com/zplug/zplug) ã‚’ä½¿ã£ã¦ã„ã¦ã€1å¹´ãã‚‰ã„å‰ã« [zinit](https://github.com/zdharma-continuum/zinit) ã«ç§»è¡Œã—ãŸãŒã€ã‚ã‚‹ã¨ãä½œè€…ã•ã‚“ãŒãƒªãƒã‚¸ãƒˆãƒªã‚’å‰Šé™¤ã—ã¦ã€ç¾åœ¨ã‚ã‚‹ã®ã¯forkç‰ˆã¨ãªã£ã¦ã„ã‚‹ã€‚\nãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã«ä¸å®‰ã‚’æ„Ÿã˜ãŸã®ã¨ã€è¨­å®šãŒé›£ã—ã„ãªã¨æ„Ÿã˜ã¦ã„ãŸã®ã§ [sheldon](https://github.com/rossmacarthur/sheldon) ã«ç§»è¡Œã—ãŸã€‚\n\n`.zshrc`\n\n````shell\n# zshrcã«ã¯ã“ã‚Œã ã‘\neval \"$(sheldon source)\"\n````\n\n`~/.config/sheldon/plugins.toml`\n\n````toml\nshell = \"zsh\"\n\n# zsh-deferã‚’ä½¿ã£ã¦ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§é…å»¶èª­ã¿è¾¼ã¿ã™ã‚‹\napply = [\"defer\"]\n[plugins.zsh-defer]\ngithub = \"romkatv/zsh-defer\"\napply = [\"source\"]\n[templates]\ndefer = { value = 'zsh-defer source \"{{ file }}\"', each = true }\n\n[plugins.compinit]\ninline = 'autoload -Uz compinit \u0026\u0026 compinit'\n\n[plugins.fast-syntax-highlighting]\ngithub = \"zdharma-continuum/fast-syntax-highlighting\"\n[plugins.zsh-completions]\ngithub = \"zsh-users/zsh-completions\"\n[plugins.zsh-autosuggestions]\ngithub = \"zsh-users/zsh-autosuggestions\"\n[plugins.zsh-history-substring-search]\ngithub = \"zsh-users/zsh-history-substring-search\"\n\n# remoteã®shellã‚’å®Ÿè¡Œã™ã‚‹\n[plugins.aws_zsh_completer]\nremote = \"https://raw.githubusercontent.com/aws/aws-cli/v2/bin/aws_zsh_completer.sh\"\n\n[plugins.dotfiles-defer]\nlocal = \"~/.config/zsh\"\nuse = [\"{functions}.zsh\"]\n\n# åŒæœŸçš„ã«èª­ã¿è¾¼ã¿ãŸã„ã‚‚ã®ã¯ source ã‚’æŒ‡å®šã™ã‚‹\n[plugins.dotfiles-sync]\nlocal = \"~/.config/zsh\"\nuse = [\"{options,plugins}.zsh\"]\napply = [\"source\"]\n````\n\nã“ã‚Œã«ã‚ˆã‚Šã€ã»ã¨ã‚“ã©ã®è¨­å®šã‚„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’éåŒæœŸã§èª­ã¿è¾¼ã‚€ã‚ˆã†ã«ãªã‚Šèµ·å‹•æ™‚ã«ã¯æ™‚é–“ãŒã‚ã¾ã‚Šã‹ã‹ã‚‰ãªããªã£ãŸã€‚\n\n## çµæœ\n\n* ã‚‚ã¨ã‚‚ã¨1.4sã‹ã‹ã£ã¦ã„ãŸã®ãŒã€`brew --prefix` ã®æ”¹å–„ã§500msã¾ã§æ—©ããªã£ãŸ\n* zinit -\u003e sheldonç§»è¡Œã§200msã¾ã§æ—©ããªã£ãŸ\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["zsh"]},"/note/zsh%E3%81%AEPATH%E3%81%A8path%E3%81%AE%E9%81%95%E3%81%84":{"title":"zshã®PATHã¨pathã®é•ã„","content":"\n[zsh](note/zsh.md) ã§ã€PATHã‚’è¿½åŠ ã™ã‚‹ã¨ãã«å¤§æ–‡å­—ã®PATHã¨å°æ–‡å­—ã®pathã¨ã§æŒ™å‹•ãŒé•ã£ãŸ\n\n\u003chttps://unix.stackexchange.com/questions/532148/what-is-the-difference-between-path-and-path-lowercase-versus-uppercase-with\u003e\n\n`$PATH` ã¯stringã§ã€`$path` ã¯ `$PATH` ã«ç´ä»˜ã‘ã‚‰ã‚ŒãŸé…åˆ—ã¨ã„ã†ã“ã¨ã‚‰ã—ã„\n\n````shell\n$ echo $PATH\n/opt/homebrew/bin:/opt/homebrew/sbin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin\n\n$ echo $path\n/opt/homebrew/bin /opt/homebrew/sbin /usr/local/bin /usr/bin /bin /usr/sbin /sbin\n\n$ typeset -p path\ntypeset -aT PATH path=( /opt/homebrew/bin /opt/homebrew/sbin /usr/local/bin /usr/bin /bin /usr/sbin /sbin)\n````\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["zsh"]},"/note/zsh%E3%81%AEPATH%E8%BF%BD%E5%8A%A0%E3%81%AE%E3%81%A8%E3%81%8D%E3%81%AFN-%E3%82%92%E3%81%A4%E3%81%91%E3%82%8B":{"title":"zshã®PATHè¿½åŠ ã®ã¨ãã¯N-ã‚’ã¤ã‘ã‚‹","content":"\n[zsh ã§ path ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’è¿½åŠ ã™ã‚‹ã¨ãã¯ (N-/) ã‚’ä»˜ã‘ã‚ˆã† - Qiita](https://qiita.com/mollifier/items/42ae46ff4140251290a7)\n\n````shell\n# é–“é•ã„ã§ã¯ãªã„\npath=($HOME/bin $path)\n# ã‚ˆã‚Šã‚ˆã„\npath=($HOME/bin(N-/) /usr/local/bin(N-/) $path)\n````\n\n## è§£èª¬\n\n`(N-/)` ã¯ãƒ•ã‚¡ã‚¤ãƒ«åä¿®é£¾å­\nãƒ•ã‚¡ã‚¤ãƒ«åã«æ¡ä»¶ã¤ã‘ã¦çµã‚Šè¾¼ã¿ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚\n\n* `/`\n  * ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå­˜åœ¨ã™ã‚‹ã¨ãã ã‘ `()` ã®å·¦å´ã®å€¤ã«å±•é–‹ã•ã‚Œã‚‹ã€‚\n  * ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå­˜åœ¨ã—ãªã„å ´åˆã‚„ã€ãƒ•ã‚¡ã‚¤ãƒ«ã€ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã®å ´åˆã«ã‚¨ãƒ©ãƒ¼\n* `N`\n  * ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãŒå­˜åœ¨ã—ãªã„ã¨ãã«ã‚¨ãƒ©ãƒ¼ã§ã¯ãªãç©ºæ–‡å­—ã«å±•é–‹ã•ã‚Œã‚‹\n* `-`\n  * ã‚·ãƒ³ãƒœãƒªãƒƒã‚¯ãƒªãƒ³ã‚¯ã®å®Ÿæ…‹ã‚’è¿½ã„ã‹ã‘ã‚‹\n\n````shell\n$ ls -1 /\nApplications\nbin\ncores\ndev\netc -\u003e private/etc\nhome -\u003e /System/Volumes/Data/home\nLibrary\nopt\nprivate\nsbin\nSystem\ntmp -\u003e private/tmp\nUsers\nusr\nvar -\u003e private/var\nVolumes\n\n$ echo /tmp\n/tmp\n\n$ echo /tmp(/)\nzsh: no matches found: /tmp(/)\n\n$ echo /tmp(N/)\n\n$ echo /private/tmp(N/)\n/private/tmp\n\n$ echo /tmp(N-/)\n/tmp\n````\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["zsh"]},"/note/zsh-%E3%83%9E%E3%83%AB%E3%83%81%E3%83%90%E3%82%A4%E3%83%88%E6%96%87%E5%AD%97%E3%82%92zsh_history%E3%81%AE%E5%BD%A2%E5%BC%8F%E3%81%AB%E5%A4%89%E6%8F%9B%E3%81%99%E3%82%8B":{"title":"zsh ãƒãƒ«ãƒãƒã‚¤ãƒˆæ–‡å­—ã‚’zsh_historyã®å½¢å¼ã«å¤‰æ›ã™ã‚‹","content":"\n## ãƒãƒ«ãƒãƒã‚¤ãƒˆæ–‡å­—ã‚’zsh_historyã®å½¢å¼ã«å¤‰æ›ã™ã‚‹\n\n[zsh æ–‡å­—åŒ–ã‘ã—ãŸzsh_historyãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚ã‚‹ã‚ˆã†ã«ã™ã‚‹](note/zsh%20æ–‡å­—åŒ–ã‘ã—ãŸzsh_historyãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚ã‚‹ã‚ˆã†ã«ã™ã‚‹.md) ã¨é€†ã®ã“ã¨ã‚’ã™ã‚Œã°ã„ã„\n\nã¤ã¾ã‚Šã€`0x83-0xA2` ã®ã¨ãã€ç›´å‰ã« `0x83` ã‚’å…¥ã‚Œã¦ã‹ã‚‰6bitç›®ã‚’åè»¢ã•ã›ã‚Œã°ã„ã„\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["zsh"]},"/note/zsh-%E5%91%BC%E3%81%B3%E5%87%BA%E3%81%97%E5%85%83%E3%81%AEfunction%E5%90%8D%E3%82%92%E5%8F%96%E5%BE%97%E3%81%99%E3%82%8B":{"title":"zsh å‘¼ã³å‡ºã—å…ƒã®functionåã‚’å–å¾—ã™ã‚‹","content":"\nhttps://stackoverflow.com/questions/31426565/get-name-of-calling-function-in-zsh\n\n````shell\nfunction a(){\n    c\n}\n\nfunction b(){\n    c\n}\n\nfunction c(){\n     #if a call me; then...\n     #if b call me; then...\n}\n````\n\nbash \n\n* `${FUNCNAME[1]}`Â is a (caller name)\n* `${FUNCNAME[0]}`Â is c (current name)\n\n[zsh](note/zsh.md)\n\n$funcstack\n\n* `${funcstack[2]}`Â is a (caller name)\n* `${funcstack[1]}`Â is c (current name)\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["zsh"]},"/note/zsh-%E6%96%87%E5%AD%97%E5%8C%96%E3%81%91%E3%81%97%E3%81%9Fzsh_history%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%82%92%E8%AA%AD%E3%82%81%E3%82%8B%E3%82%88%E3%81%86%E3%81%AB%E3%81%99%E3%82%8B":{"title":"zsh æ–‡å­—åŒ–ã‘ã—ãŸzsh_historyãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚ã‚‹ã‚ˆã†ã«ã™ã‚‹","content":"\n[zsh](note/zsh.md) ã®historyãƒ•ã‚¡ã‚¤ãƒ«ã¯ç‰¹æ®Šãªå‡¦ç†ãŒå…¥ã£ã¦ã„ã‚‹ã®ã§æ–‡å­—åŒ–ã‘ã™ã‚‹\n[zsh historyã«ãŠã‘ã‚‹éASCIIæ–‡å­—ã®æ‰±ã„ã«ã¤ã„ã¦](note/zsh%20historyã«ãŠã‘ã‚‹éASCIIæ–‡å­—ã®æ‰±ã„ã«ã¤ã„ã¦.md)\n\n## æ–‡å­—åŒ–ã‘ã—ãŸzsh_historyãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚ã‚‹ã‚ˆã†ã«ã™ã‚‹\n\n`ãã‚ãƒã„ã…ã†ãœãããŸã ã¡ã¢ã£ã¤ã¥` ã¨ã„ã†æ–‡å­—åˆ—ã‚’ä½¿ã£ã¦èª¿ã¹ã¦ã„ãã€‚\nã“ã‚Œã‚‰ã¯é ­2ãƒã‚¤ãƒˆãŒ `e381`ã€æœ«å°¾1ãƒã‚¤ãƒˆãŒãã‚Œãã‚Œã„ã‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚\n\n* `ã`: `81`\n* `ã‚`: `82`\n* `ãƒ`: `83`\n* `ã„`: `84`\n* `ã…`: `85`\n* `ã†`: `86`\n* `ãœ`: `9c`\n* `ã`: `9d`\n* `ã`: `9e`\n* `ãŸ`: `9f`\n* `ã `: `a0`\n* `ã¡`: `a1`\n* `ã¢`: `a2`\n* `ã£`: `a3`\n* `ã¤`: `a4`\n* `ã¥`: `a5`\n\nzsh_historyã§è¦‹ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªãƒã‚¤ãƒˆåˆ—ã«ãªã£ã¦ã„ã‚‹(ã‚ã‹ã‚Šã‚„ã™ã„ã‚ˆã†é©å®œã‚¹ãƒšãƒ¼ã‚¹ã‚’å…¥ã‚Œã¦ã„ã‚‹)\n\n````txt\nE38181 E38182 E38183A3 E38183A4 E38183A5 E38183A6 E38183BC E38183BD E38183BE E38183BF E3818380 E3818381 E3818382 E381A3 E381A4 E381A5\n````\n\nzsh_historyã®æ–‡å­—ã‚³ãƒ¼ãƒ‰ã¯latin1ãªã®ã§ã»ã¼UTF-8ã¨åŒã˜ã€‚\næ–‡å­—ã‚³ãƒ¼ãƒ‰è¡¨ã‚’ã‚‚ã¨ã«å½“ã¦ã¯ã¾ã‚‹æ–‡å­—ã«æˆ»ã™ã¨ã€ `0x83-0xA2` ã®ã¨ãã€ç›´å‰ã« `0x83` ã‚’å…¥ã‚Œã¦ã‹ã‚‰6bitç›®ã‚’åè»¢ã•ã›ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚‹ã€‚\n\n````txt\nE38181 E38182 E38183A3 E38183A4 E38183A5 E38183A6 E38183BC E38183BD E38183BE E38183BF E3818380 E3818381 E3818382 E381A3 E381A4 E381A5\n````\n\n`0x83` ã‚’æ¶ˆã—ã¦ã€ç›´å¾Œã®6bitç›®ã‚’åè»¢ã•ã›ã‚‹ã¨ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹\n\n````txt\nE38181 E38182 E38183 E38184 E38185 E38186 E3819C E3819D E3819E E3819F E381A0 E381A1 E381A2 E381A3 E381A4 E381A5\n````\n\nã“ã‚ŒãŒã‚‚ã¨ã®æ–‡å­—åˆ—ã®ãƒã‚¤ãƒˆåˆ—ã«ä¸€è‡´ã™ã‚‹ã€‚\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["zsh"]},"/note/zsh-Zinit%E3%81%AB%E5%A4%89%E3%81%88%E3%82%8B":{"title":"zsh Zinitã«å¤‰ãˆã‚‹","content":"\n\u003chttps://tech.zeals.co.jp/entry/2019/09/18/110923kk\u003e\n\nzplugèµ·å‹•ã«æ™‚é–“ãŒã‹ã‹ã‚‹\n\n## ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«\n\n\u003chttps://github.com/zdharma/zinit\u003e\n\næ¨å¥¨ã®æ–¹æ³•ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹\n\n````sh\nsh -c \"$(curl -fsSL https://raw.githubusercontent.com/zdharma/zinit/master/doc/install.sh)\"\n````\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["zsh"]},"/note/zsh-fzf-tab%E3%82%92%E3%81%A4%E3%81%8B%E3%81%A3%E3%81%A6%E3%81%84%E3%82%8B%E3%81%A8%E3%81%8D%E3%81%ABfzf%E3%81%A7double-star%E3%81%A7%E3%81%AE%E8%A3%9C%E5%AE%8C%E3%81%8C%E5%8A%B9%E3%81%8B%E3%81%AA%E3%81%84":{"title":"zsh fzf-tabã‚’ã¤ã‹ã£ã¦ã„ã‚‹ã¨ãã«fzfã§double starã§ã®è£œå®ŒãŒåŠ¹ã‹ãªã„","content":"\n[fzf-tab](https://github.com/Aloxaf/fzf-tab) ã‚’å…¥ã‚Œã¦ã„ã‚‹ã¨ã€ [fzf](note/fzf.md) ã® `**\u003cTAB\u003e` ã«ã‚ˆã£ã¦ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªé…ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å†å¸°çš„ã«è¡¨ç¤ºã™ã‚‹ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ãŒå®Ÿè¡Œã•ã‚Œãªãã¦ã“ã¾ã£ãŸã€‚\n\n## å¯¾å¿œæ–¹æ³•\n\nhttps://github.com/Aloxaf/fzf-tab/issues/65#issuecomment-1344970328\n\n````shell\n# fzf-tabã‚’å…¥ã‚Œã„ã¦ã„ã‚‹ã¨FZF_COMPLETION_TRIGGERã«ã‚ˆã‚‹ãƒˆãƒªã‚¬ãƒ¼ãŒåŠ¹ã‹ãªããªã‚‹ãŸã‚ã€ãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ©ã‚¦ãƒ³ãƒ‰ã¨ã—ã¦TAB2å›ã§ç™ºå‹•ã™ã‚‹ã‚ˆã†ã«ã™ã‚‹\nfzf-completion-notrigger() {\n    # disable trigger just this once\n    local FZF_COMPLETION_TRIGGER=\"\"\n    # if fzf-completion can't come up with something, call fzf-tab-complete\n    # instead of the default completion widget (expand-or-complete).\n    #\n    # FIXME: triggers an infinite recursion on an empty prompt\n    # _zsh_autosuggest_highlight_reset:3: maximum nested function level reached; increase FUNCNEST?\n    #\n    #local fzf_default_completion='fzf-tab-complete'\n    fzf-completion \"$@\"\n}\nzle -N fzf-completion-notrigger\n\n# Set an aggressive $KEYTIMEOUT to make usage of single \u003cTab\u003e less miserable\nKEYTIMEOUT=20\n# Bind double \u003cTab\u003e\nbindkey '\\t\\t' fzf-completion-notrigger\n````\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["2023/05/06","zsh","terminal"]},"/note/zsh-history%E3%81%AB%E3%81%8A%E3%81%91%E3%82%8B%E9%9D%9EASCII%E6%96%87%E5%AD%97%E3%81%AE%E6%89%B1%E3%81%84%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6":{"title":"zsh historyã«ãŠã‘ã‚‹éASCIIæ–‡å­—ã®æ‰±ã„ã«ã¤ã„ã¦","content":"\n## [zsh](note/zsh.md) ã®ãƒ’ã‚¹ãƒˆãƒªãƒ•ã‚¡ã‚¤ãƒ«ã®ä»•æ§˜ã«ã¤ã„ã¦\n\nzshã®historyãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›´æ¥é–‹ãã¨ã€æ—¥æœ¬èªãŒæ–‡å­—åŒ–ã‘ã—ã¦ã„ã‚‹ãŒã€\nhistoryã‚³ãƒãƒ³ãƒ‰ã®çµæœã¯æ–‡å­—åŒ–ã‘ã—ã¦ã„ãªã„ã€‚\n\nå†…éƒ¨ã§ãªã«ã‹å¤‰æ›ã‚’ã‹ã‘ã¦ã„ã‚‹ã¯ãšã§ã€èª¿ã¹ã¦ã¿ãŸã¨ã“ã‚ã€åŒã˜ã‚ˆã†ãªã¨ã“ã‚ã§å›°ã£ã¦ã„ã‚‹äººãŒã„ãŸã€‚\n\nhttps://github.com/dvorka/hstr/pull/416\n[.zsh_historyã«ãŠã‘ã‚‹éASCIIæ–‡å­—ã®æ‰±ã„ã«ã¤ã„ã¦ - ç”Ÿæ¶¯æœªç†Ÿ](https://syossan.hateblo.jp/entry/2017/10/09/181928)\n\nã©ã†ã‚„ã‚‰metafy/unmetafyã¨ã„ã†å‡¦ç†ã‚’ã—ã¦ã„ã‚‹ã‚‰ã—ãã€\nãƒ¡ã‚¿ãªãƒã‚¤ãƒˆãŒã‚ã£ãŸã‚‰ `0x83` ã‚’æŒ¿å…¥ã—ã¦ã€`0x20`ã¨ã®xorã‚’å–ã‚Š6bitç›®ã‚’åè»¢ã•ã›ã¦ã„ã‚‹ã€‚\n\nhttps://github.com/zsh-users/zsh/blob/master/Src/utils.c#L4921-L4933\n\n````c\nmod_export char *\nunmetafy(char *s, int *len)\n{\n    char *p, *t;\n\n    for (p = s; *p \u0026\u0026 *p != Meta; p++);\n    for (t = p; (*t = *p++);)\n\tif (*t++ == Meta \u0026\u0026 *p)\n\t    t[-1] = *p++ ^ 32;\n    if (len)\n\t*len = t - s;\n    return s;\n}\n````\n\n* [zsh æ–‡å­—åŒ–ã‘ã—ãŸzsh_historyãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚ã‚‹ã‚ˆã†ã«ã™ã‚‹](note/zsh%20æ–‡å­—åŒ–ã‘ã—ãŸzsh_historyãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚ã‚‹ã‚ˆã†ã«ã™ã‚‹.md)\n* [zsh ãƒãƒ«ãƒãƒã‚¤ãƒˆæ–‡å­—ã‚’zsh_historyã®å½¢å¼ã«å¤‰æ›ã™ã‚‹](note/zsh%20ãƒãƒ«ãƒãƒã‚¤ãƒˆæ–‡å­—ã‚’zsh_historyã®å½¢å¼ã«å¤‰æ›ã™ã‚‹.md)\n* [Goã§zsh_historyã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ã„ã¦ã¿ã‚‹](note/Goã§zsh_historyã‚’ãƒ‘ãƒ¼ã‚¹ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ã„ã¦ã¿ã‚‹.md)\n* [fishã®historyã‚’zshã«å¤‰æ›](note/fishã®historyã‚’zshã«å¤‰æ›.md)\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":["zsh"]},"/posts/":{"title":"_index","content":"lists\n","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":[]},"/posts/2020":{"title":"2020","content":"","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":[]},"/posts/2021":{"title":"2021","content":"","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":[]},"/posts/2022":{"title":"2022","content":"","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":[]},"/posts/2023":{"title":"2023","content":"","lastmodified":"2023-07-29T08:18:43.05149894Z","tags":[]}}